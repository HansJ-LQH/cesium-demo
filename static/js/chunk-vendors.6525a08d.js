(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"0056":function(e,t,n){var i,o;
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(r,a){"use strict";e.exports?e.exports=a():(i=a,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))})(0,(function(e){"use strict";var t=e&&e.IPv6;function n(e){var t,n,i=e.toLowerCase(),o=i.split(":"),r=o.length,a=8;for(""===o[0]&&""===o[1]&&""===o[2]?(o.shift(),o.shift()):""===o[0]&&""===o[1]?o.shift():""===o[r-1]&&""===o[r-2]&&o.pop(),r=o.length,-1!==o[r-1].indexOf(".")&&(a=7),t=0;t<r;t++)if(""===o[t])break;if(t<a){o.splice(t,1,"0000");while(o.length<a)o.splice(t,0,"0000")}for(var s=0;s<a;s++){n=o[s].split("");for(var c=0;c<3;c++){if(!("0"===n[0]&&n.length>1))break;n.splice(0,1)}o[s]=n.join("")}var l=-1,u=0,h=0,d=-1,f=!1;for(s=0;s<a;s++)f?"0"===o[s]?h+=1:(f=!1,h>u&&(l=d,u=h)):"0"===o[s]&&(f=!0,d=s,h=1);h>u&&(l=d,u=h),u>1&&o.splice(l,u,""),r=o.length;var p="";for(""===o[0]&&(p=":"),s=0;s<r;s++){if(p+=o[s],s===r-1)break;p+=":"}return""===o[r-1]&&(p+=":"),p}function i(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:i}}))},"00ee":function(e,t,n){var i=n("b622"),o=i("toStringTag"),r={};r[o]="z",e.exports="[object z]"===String(r)},"0366":function(e,t,n){var i=n("1c0b");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},"0538":function(e,t,n){"use strict";var i=n("1c0b"),o=n("861d"),r=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var i=[],o=0;o<t;o++)i[o]="a["+o+"]";a[t]=Function("C,a","return new C("+i.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=r.call(arguments,1),a=function(){var i=n.concat(r.call(arguments));return this instanceof a?s(t,i.length,i):t.apply(e,i)};return o(t.prototype)&&(a.prototype=t.prototype),a}},"0569":function(e,t,n){"use strict";var i=n("2f63"),o=n("4f04");function r(e){if(!Object(i["a"])(e))throw new o["a"]("obj is required.");let t="";for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=`${encodeURIComponent(n)}=`;if(Array.isArray(i))for(let e=0,n=i.length;e<n;++e)t+=`${o+encodeURIComponent(i[e])}&`;else t+=`${o+encodeURIComponent(i)}&`}return t=t.slice(0,-1),t}t["a"]=r},"057f":function(e,t,n){var i=n("fc6a"),o=n("241c").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?s(e):o(i(e))}},"06cf":function(e,t,n){var i=n("83ab"),o=n("d1e7"),r=n("5c6c"),a=n("fc6a"),s=n("c04e"),c=n("5135"),l=n("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}if(c(e,t))return r(!o.f.call(e,t),e[t])}},"083c":function(e,t,n){"use strict";var i=n("2f63");let o;function r(e){Object(i["a"])(o)||(o=document.createElement("a")),o.href=window.location.href;const t=o.host,n=o.protocol;return o.href=e,o.href=o.href,n!==o.protocol||t!==o.host}t["a"]=r},"0cfb":function(e,t,n){var i=n("83ab"),o=n("d039"),r=n("cc12");e.exports=!i&&!o((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},"0e68":function(e,t,n){"use strict";function i(e){const t=document.createElement("script");return t.async=!0,t.src=e,new Promise((e,n)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");const i=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,i.removeChild(t),e()},t.onerror=function(e){n(e)},i.appendChild(t)})}t["a"]=i},1148:function(e,t,n){"use strict";var i=n("a691"),o=n("1d80");e.exports="".repeat||function(e){var t=String(o(this)),n="",r=i(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},"131a":function(e,t,n){var i=n("23e7"),o=n("d2bb");i({target:"Object",stat:!0},{setPrototypeOf:o})},"159b":function(e,t,n){var i=n("da84"),o=n("fdbc"),r=n("17c2"),a=n("9112");for(var s in o){var c=i[s],l=c&&c.prototype;if(l&&l.forEach!==r)try{a(l,"forEach",r)}catch(u){l.forEach=r}}},"160b":function(e,t,n){(function(n){"use strict";var i="Compound",o="Identifier",r="MemberExpression",a="Literal",s="ThisExpression",c="CallExpression",l="UnaryExpression",u="BinaryExpression",h="LogicalExpression",d="ConditionalExpression",f="ArrayExpression",p=46,m=44,_=39,g=34,b=40,y=41,v=91,O=93,A=63,w=59,T=58,C=function(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n},E=!0,x={"-":E,"!":E,"~":E,"+":E},S={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},I=function(e){var t,n=0;for(var i in e)(t=i.length)>n&&e.hasOwnProperty(i)&&(n=t);return n},D=I(x),P=I(S),j={true:!0,false:!1,null:null},R="this",L=function(e){return S[e]||0},M=function(e,t,n){var i="||"===e||"&&"===e?h:u;return{type:i,operator:e,left:t,right:n}},N=function(e){return e>=48&&e<=57},B=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!S[String.fromCharCode(e)]},F=function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!S[String.fromCharCode(e)]},z=function(e){var t,n,u=0,h=e.charAt,E=e.charCodeAt,I=function(t){return h.call(e,t)},z=function(t){return E.call(e,t)},k=e.length,U=function(){var e=z(u);while(32===e||9===e||10===e||13===e)e=z(++u)},V=function(){var e,t,n=G();return U(),z(u)!==A?n:(u++,e=V(),e||C("Expected expression",u),U(),z(u)===T?(u++,t=V(),t||C("Expected expression",u),{type:d,test:n,consequent:e,alternate:t}):void C("Expected :",u))},H=function(){U();var t=e.substr(u,P),n=t.length;while(n>0){if(S.hasOwnProperty(t)&&(!B(z(u))||u+t.length<e.length&&!F(z(u+t.length))))return u+=n,t;t=t.substr(0,--n)}return!1},G=function(){var e,t,n,i,o,r,a,s,c;if(r=W(),t=H(),!t)return r;o={value:t,prec:L(t)},a=W(),a||C("Expected expression after "+t,u),i=[r,o,a];while(t=H()){if(n=L(t),0===n)break;o={value:t,prec:n},c=t;while(i.length>2&&n<=i[i.length-2].prec)a=i.pop(),t=i.pop().value,r=i.pop(),e=M(t,r,a),i.push(e);e=W(),e||C("Expected expression after "+c,u),i.push(o,e)}s=i.length-1,e=i[s];while(s>1)e=M(i[s-1].value,i[s-2],e),s-=2;return e},W=function(){var t,n,i;if(U(),t=z(u),N(t)||t===p)return q();if(t===_||t===g)return Y();if(t===v)return Q();n=e.substr(u,D),i=n.length;while(i>0){if(x.hasOwnProperty(n)&&(!B(z(u))||u+n.length<e.length&&!F(z(u+n.length))))return u+=i,{type:l,operator:n,argument:W(),prefix:!0};n=n.substr(0,--i)}return!(!B(t)&&t!==b)&&$()},q=function(){var e,t,n="";while(N(z(u)))n+=I(u++);if(z(u)===p){n+=I(u++);while(N(z(u)))n+=I(u++)}if(e=I(u),"e"===e||"E"===e){n+=I(u++),e=I(u),"+"!==e&&"-"!==e||(n+=I(u++));while(N(z(u)))n+=I(u++);N(z(u-1))||C("Expected exponent ("+n+I(u)+")",u)}return t=z(u),B(t)?C("Variable names cannot start with a number ("+n+I(u)+")",u):t===p&&C("Unexpected period",u),{type:a,value:parseFloat(n),raw:n}},Y=function(){var e,t="",n=I(u++),i=!1;while(u<k){if(e=I(u++),e===n){i=!0;break}if("\\"===e)switch(e=I(u++),e){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return i||C('Unclosed quote after "'+t+'"',u),{type:a,value:t,raw:n+t+n}},X=function(){var t,n=z(u),i=u;B(n)?u++:C("Unexpected "+I(u),u);while(u<k){if(n=z(u),!F(n))break;u++}return t=e.slice(i,u),j.hasOwnProperty(t)?{type:a,value:j[t],raw:t}:t===R?{type:s}:{type:o,name:t}},K=function(e){var t,n,o=[],r=!1,a=0;while(u<k){if(U(),t=z(u),t===e){r=!0,u++,e===y&&a&&a>=o.length&&C("Unexpected token "+String.fromCharCode(e),u);break}if(t===m){if(u++,a++,a!==o.length)if(e===y)C("Unexpected token ,",u);else if(e===O)for(var s=o.length;s<a;s++)o.push(null)}else n=V(),n&&n.type!==i||C("Expected comma",u),o.push(n)}return r||C("Expected "+String.fromCharCode(e),u),o},$=function(){var e,t;e=z(u),t=e===b?J():X(),U(),e=z(u);while(e===p||e===v||e===b)u++,e===p?(U(),t={type:r,computed:!1,object:t,property:X()}):e===v?(t={type:r,computed:!0,object:t,property:V()},U(),e=z(u),e!==O&&C("Unclosed [",u),u++):e===b&&(t={type:c,arguments:K(y),callee:t}),U(),e=z(u);return t},J=function(){u++;var e=V();if(U(),z(u)===y)return u++,e;C("Unclosed (",u)},Q=function(){return u++,{type:f,elements:K(O)}},Z=[];while(u<k)t=z(u),t===w||t===m?u++:(n=V())?Z.push(n):u<k&&C('Unexpected "'+I(u)+'"',u);return 1===Z.length?Z[0]:{type:i,body:Z}};z.version="0.3.5",z.toString=function(){return"JavaScript Expression Parser (JSEP) v"+z.version},z.addUnaryOp=function(e){return D=Math.max(e.length,D),x[e]=E,this},z.addBinaryOp=function(e,t){return P=Math.max(e.length,P),S[e]=t,this},z.addLiteral=function(e,t){return j[e]=t,this},z.removeUnaryOp=function(e){return delete x[e],e.length===D&&(D=I(x)),this},z.removeAllUnaryOps=function(){return x={},D=0,this},z.removeBinaryOp=function(e){return delete S[e],e.length===P&&(P=I(S)),this},z.removeAllBinaryOps=function(){return S={},P=0,this},z.removeLiteral=function(e){return delete j[e],this},z.removeAllLiterals=function(){return j={},this},e.exports?t=e.exports=z:t.parse=z})()},"166e":function(e,t,n){"use strict";var i=n("d4da");const o=/^data:/i;function r(e){return i["a"].typeOf.string("uri",e),o.test(e)}t["a"]=r},"17c2":function(e,t,n){"use strict";var i=n("b727").forEach,o=n("a640"),r=n("ae40"),a=o("forEach"),s=r("forEach");e.exports=a&&s?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},1994:function(e,t){e.exports={webm:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",mp4:"data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}},"19aa":function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"1a99":function(e,t,n){"use strict";var i=n("c909"),o=n.n(i),r=n("2f63"),a=n("4f04");function s(e,t){if(!Object(r["a"])(e))throw new a["a"]("uri is required.");let n="";const i=e.lastIndexOf("/");return-1!==i&&(n=e.substring(0,i+1)),t?(e=new o.a(e),0!==e.query().length&&(n+=`?${e.query()}`),0!==e.fragment().length&&(n+=`#${e.fragment()}`),n):n}t["a"]=s},"1be4":function(e,t,n){var i=n("d066");e.exports=i("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,n){var i=n("b622"),o=i("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[o]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var i={};i[o]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(c){}return n}},"1cdc":function(e,t,n){var i=n("342f");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,n){var i=n("d039"),o=n("b622"),r=n("2d00"),a=o("species");e.exports=function(e){return r>=51||!i((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1f30":function(e,t,n){"use strict";var i=n("c909"),o=n.n(i),r=n("2f63"),a=n("4f04");function s(e){if(!Object(r["a"])(e))throw new a["a"]("uri is required.");const t=new o.a(e);t.normalize();let n=t.path(),i=n.lastIndexOf("/");return-1!==i&&(n=n.substr(i+1)),i=n.lastIndexOf("."),n=-1===i?"":n.substr(i+1),n}t["a"]=s},"1fb5":function(e,t,n){"use strict";t.byteLength=u,t.toByteArray=d,t.fromByteArray=m;for(var i=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],o[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function u(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function h(e,t,n){return 3*(t+n)/4-n}function d(e){var t,n,i=l(e),a=i[0],s=i[1],c=new r(h(e,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c}function f(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function p(e,t,n){for(var i,o=[],r=t;r<n;r+=3)i=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),o.push(f(i));return o.join("")}function m(e){for(var t,n=e.length,o=n%3,r=[],a=16383,s=0,c=n-o;s<c;s+=a)r.push(p(e,s,s+a>c?c:s+a));return 1===o?(t=e[n-1],r.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],r.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),r.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"21d7":function(e,t,n){"use strict";var i=n("d4da"),o=n("2f63");function r(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function a(e,t){return t-e}Object.defineProperties(r.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),r.prototype.addEventListener=function(e,t){i["a"].typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);const n=this;return function(){n.removeEventListener(e,t)}},r.prototype.removeEventListener=function(e,t){i["a"].typeOf.func("listener",e);const n=this._listeners,o=this._scopes;let r=-1;for(let i=0;i<n.length;i++)if(n[i]===e&&o[i]===t){r=i;break}return-1!==r&&(this._insideRaiseEvent?(this._toRemove.push(r),n[r]=void 0,o[r]=void 0):(n.splice(r,1),o.splice(r,1)),!0)},r.prototype.raiseEvent=function(){let e;this._insideRaiseEvent=!0;const t=this._listeners,n=this._scopes;let i=t.length;for(e=0;e<i;e++){const i=t[e];Object(o["a"])(i)&&t[e].apply(n[e],arguments)}const r=this._toRemove;if(i=r.length,i>0){for(r.sort(a),e=0;e<i;e++){const i=r[e];t.splice(i,1),n.splice(i,1)}r.length=0}this._insideRaiseEvent=!1},t["a"]=r},2266:function(e,t,n){var i=n("825a"),o=n("e95a"),r=n("50c4"),a=n("0366"),s=n("35a1"),c=n("9bdd"),l=function(e,t){this.stopped=e,this.result=t},u=e.exports=function(e,t,n,u,h){var d,f,p,m,_,g,b,y=a(t,n,u?2:1);if(h)d=e;else{if(f=s(e),"function"!=typeof f)throw TypeError("Target is not iterable");if(o(f)){for(p=0,m=r(e.length);m>p;p++)if(_=u?y(i(b=e[p])[0],b[1]):y(e[p]),_&&_ instanceof l)return _;return new l(!1)}d=f.call(e)}g=d.next;while(!(b=g.call(d)).done)if(_=c(d,y,b.value,u),"object"==typeof _&&_&&_ instanceof l)return _;return new l(!1)};u.stop=function(e){return new l(!0,e)}},"22b5":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var i,o={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Bounce.In(2*e):.5*o.Bounce.Out(2*e-1)+.5}}};i="undefined"===typeof self&&"undefined"!==typeof e&&e.hrtime?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var r=i,a=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=r()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],a=!t;o&&!1===o.update(e,a)&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),s={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=s.Utils.Linear;return t<0?r(e[0],e[1],i):t>1?r(e[n],e[n-1],n-i):r(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,r=s.Utils.Bernstein,a=0;a<=i;a++)n+=o(1-t,i-a)*o(t,a)*e[a]*r(i,a);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),r=s.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(o=Math.floor(i=n*(1+t))),r(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):t<0?e[0]-(r(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(r(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):r(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=s.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,o){var r=.5*(n-e),a=.5*(i-t),s=o*o,c=o*s;return(2*t-2*n+r+a)*c+(-3*t+3*n-2*r-a)*s+r*o+t}}},c=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),l=new a,u=function(){function e(e,t){void 0===t&&(t=l),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=o.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=c.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"===typeof e?r()+parseFloat(e):e:r(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,n,i){for(var o in n){var r=e[o],a=Array.isArray(r),s=a?"array":typeof r,c=!a&&Array.isArray(n[o]);if("undefined"!==s&&"function"!==s){if(c){var l=n[o];if(0===l.length)continue;l=l.map(this._handleRelativeValue.bind(this,r)),n[o]=[r].concat(l)}if("object"!==s&&!a||!r||c)"undefined"===typeof t[o]&&(t[o]=r),a||(t[o]*=1),i[o]=c?n[o].slice().reverse():t[o]||0;else{for(var u in t[o]=a?[]:{},r)t[o][u]=r[u];i[o]=a?[]:{},this._setupProperties(r,t[o],n[o],i[o])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=r()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=r()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=r()),void 0===t&&(t=!0),this._isPaused)return!0;var n,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i;var a=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,i){for(var o in n)if(void 0!==t[o]){var r=t[o]||0,a=n[o],s=Array.isArray(e[o]),c=Array.isArray(a),l=!s&&c;l?e[o]=this._interpolationFunction(a,i):"object"===typeof a&&a?this._updateProperties(e[o],r,a,i):(a=this._handleRelativeValue(r,a),"number"===typeof a&&(e[o]=r+(a-r)*i))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),h=(c.nextId,l);h.getAll.bind(h),h.removeAll.bind(h),h.add.bind(h),h.remove.bind(h),h.update.bind(h)}).call(this,n("4362"))},"23cb":function(e,t,n){var i=n("a691"),o=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):r(n,t)}},"23e7":function(e,t,n){var i=n("da84"),o=n("06cf").f,r=n("9112"),a=n("6eeb"),s=n("ce4e"),c=n("e893"),l=n("94ca");e.exports=function(e,t){var n,u,h,d,f,p,m=e.target,_=e.global,g=e.stat;if(u=_?i:g?i[m]||s(m,{}):(i[m]||{}).prototype,u)for(h in t){if(f=t[h],e.noTargetGet?(p=o(u,h),d=p&&p.value):d=u[h],n=l(_?h:m+(g?".":"#")+h,e.forced),!n&&void 0!==d){if(typeof f===typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&r(f,"sham",!0),a(u,h,f,e)}}},"241c":function(e,t,n){var i=n("ca84"),o=n("7839"),r=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},"257e":function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return i}))},"25a5":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){"use strict";function e(e,i,o,r,a){!function e(n,i,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,c=i-o+1,l=Math.log(s),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1),d=Math.max(o,Math.floor(i-c*u/s+h)),f=Math.min(r,Math.floor(i+(s-c)*u/s+h));e(n,i,d,f,a)}var p=n[i],m=o,_=r;for(t(n,o,i),a(n[r],p)>0&&t(n,o,r);m<_;){for(t(n,m,_),m++,_--;a(n[m],p)<0;)m++;for(;a(n[_],p)>0;)_--}0===a(n[o],p)?t(n,o,_):t(n,++_,r),_<=i&&(o=_+1),i<=_&&(r=_-1)}}(e,i,o||0,r||e.length-1,a||n)}function t(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function n(e,t){return e<t?-1:e>t?1:0}var i=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(e,t,n){if(!n)return t.indexOf(e);for(var i=0;i<t.length;i++)if(n(e,t[i]))return i;return-1}function r(e,t){a(e,0,e.children.length,t,e)}function a(e,t,n,i,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r=t;r<n;r++){var a=e.children[r];s(o,e.leaf?i(a):a)}return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function l(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function p(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,n,i,o,r){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=o)){var s=n+Math.ceil((i-n)/o/2)*o;e(t,s,n,i,r),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,n=[];if(!f(e,t))return n;for(var i=this.toBBox,o=[];t;){for(var r=0;r<t.children.length;r++){var a=t.children[r],s=t.leaf?i(a):a;f(e,s)&&(t.leaf?n.push(a):d(e,s)?this._all(a,n):o.push(a))}t=o.pop()}return n},i.prototype.collides=function(e){var t=this.data;if(!f(e,t))return!1;for(var n=[];t;){for(var i=0;i<t.children.length;i++){var o=t.children[i],r=t.leaf?this.toBBox(o):o;if(f(e,r)){if(t.leaf||d(e,r))return!0;n.push(o)}}t=n.pop()}return!1},i.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var n,i,r,a=this.data,s=this.toBBox(e),c=[],l=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],n=l.pop(),r=!0),a.leaf){var u=o(e,a.children,t);if(-1!==u)return a.children.splice(u,1),c.push(a),this._condense(c),this}r||a.leaf||!d(a,s)?i?(n++,a=i.children[n],r=!1):a=null:(c.push(a),l.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},i.prototype._build=function(e,t,n,i){var o,a=n-t+1,s=this._maxEntries;if(a<=s)return r(o=p(e.slice(t,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(o=p([])).leaf=!1,o.height=i;var c=Math.ceil(a/s),l=c*Math.ceil(Math.sqrt(s));m(e,t,n,l,this.compareMinX);for(var u=t;u<=n;u+=l){var h=Math.min(u+l-1,n);m(e,u,h,c,this.compareMinY);for(var d=u;d<=h;d+=c){var f=Math.min(d+c-1,h);o.children.push(this._build(e,d,f,i-1))}}return r(o,this.toBBox),o},i.prototype._chooseSubtree=function(e,t,n,i){for(;i.push(t),!t.leaf&&i.length-1!==n;){for(var o=1/0,r=1/0,a=void 0,s=0;s<t.children.length;s++){var c=t.children[s],l=u(c),h=(d=e,f=c,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-l);h<r?(r=h,o=l<o?l:o,a=c):h===r&&l<o&&(o=l,a=c)}t=a||t.children[0]}var d,f;return t},i.prototype._insert=function(e,t,n){var i=n?e:this.toBBox(e),o=[],r=this._chooseSubtree(i,this.data,t,o);for(r.children.push(e),s(r,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},i.prototype._split=function(e,t){var n=e[t],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);var a=this._chooseSplitIndex(n,o,i),s=p(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,r(n,this.toBBox),r(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(e,t){this.data=p([e,t]),this.data.height=e.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,n){for(var i,o,r,s,c,l,h,d=1/0,f=1/0,p=t;p<=n-t;p++){var m=a(e,0,p,this.toBBox),_=a(e,p,n,this.toBBox),g=(o=m,r=_,s=void 0,c=void 0,l=void 0,h=void 0,s=Math.max(o.minX,r.minX),c=Math.max(o.minY,r.minY),l=Math.min(o.maxX,r.maxX),h=Math.min(o.maxY,r.maxY),Math.max(0,l-s)*Math.max(0,h-c)),b=u(m)+u(_);g<d?(d=g,i=p,f=b<f?b:f):g===d&&b<f&&(f=b,i=p)}return i||n-t},i.prototype._chooseSplitAxis=function(e,t,n){var i=e.leaf?this.compareMinX:c,o=e.leaf?this.compareMinY:l;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,o)&&e.children.sort(i)},i.prototype._allDistMargin=function(e,t,n,i){e.children.sort(i);for(var o=this.toBBox,r=a(e,0,t,o),c=a(e,n-t,n,o),l=h(r)+h(c),u=t;u<n-t;u++){var d=e.children[u];s(r,e.leaf?o(d):d),l+=h(r)}for(var f=n-t-1;f>=t;f--){var p=e.children[f];s(c,e.leaf?o(p):p),l+=h(c)}return l},i.prototype._adjustParentBBoxes=function(e,t,n){for(var i=n;i>=0;i--)s(t[i],e)},i.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)0===e[t].children.length?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():r(e[t],this.toBBox)},i}))},"25f0":function(e,t,n){"use strict";var i=n("6eeb"),o=n("825a"),r=n("d039"),a=n("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=s;(u||h)&&i(RegExp.prototype,s,(function(){var e=o(this),t=String(e.source),n=e.flags,i=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?a.call(e):n);return"/"+t+"/"+i}),{unsafe:!0})},2626:function(e,t,n){"use strict";var i=n("d066"),o=n("9bf2"),r=n("b622"),a=n("83ab"),s=r("species");e.exports=function(e){var t=i(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},"262e":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("b380");function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(i["a"])(e,t)}},2720:function(e,t,n){"use strict";var i=n("2f63");const o={};function r(e,t,n){Object(i["a"])(t)||(t=e.width),Object(i["a"])(n)||(n=e.height);let r=o[t];Object(i["a"])(r)||(r={},o[t]=r);let a=r[n];if(!Object(i["a"])(a)){const e=document.createElement("canvas");e.width=t,e.height=n,a=e.getContext("2d"),a.globalCompositeOperation="copy",r[n]=a}return a.drawImage(e,0,0,t,n),a.getImageData(0,0,t,n).data}t["a"]=r},"283e":function(e,t,n){"use strict";var i=n("2f63");function o(e){let t;this.name="RuntimeError",this.message=e;try{throw new Error}catch(n){t=n.stack}this.stack=t}Object(i["a"])(Object.create)&&(o.prototype=Object.create(Error.prototype),o.prototype.constructor=o),o.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return Object(i["a"])(this.stack)&&(e+=`\n${this.stack.toString()}`),e},t["a"]=o},2877:function(e,t,n){"use strict";function i(e,t,n,i,o,r,a,s){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},"2b0e":function(e,t,n){"use strict";(function(e){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function i(e){return void 0===e||null===e}function o(e){return void 0!==e&&null!==e}function r(e){return!0===e}function a(e){return!1===e}function s(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function u(e){return"[object Object]"===l.call(e)}function h(e){return"[object RegExp]"===l.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return o(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),i=e.split(","),o=0;o<i.length;o++)n[i[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}_("slot,component",!0);var g=_("key,ref,slot,slot-scope,is");function b(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function v(e,t){return y.call(e,t)}function O(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var A=/-(\w)/g,w=O((function(e){return e.replace(A,(function(e,t){return t?t.toUpperCase():""}))})),T=O((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),C=/\B([A-Z])/g,E=O((function(e){return e.replace(C,"-$1").toLowerCase()}));function x(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function S(e,t){return e.bind(t)}var I=Function.prototype.bind?S:x;function D(e,t){t=t||0;var n=e.length-t,i=new Array(n);while(n--)i[n]=e[n+t];return i}function P(e,t){for(var n in t)e[n]=t[n];return e}function j(e){for(var t={},n=0;n<e.length;n++)e[n]&&P(t,e[n]);return t}function R(e,t,n){}var L=function(e,t,n){return!1},M=function(e){return e};function N(e,t){if(e===t)return!0;var n=c(e),i=c(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var o=Array.isArray(e),r=Array.isArray(t);if(o&&r)return e.length===t.length&&e.every((function(e,n){return N(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(o||r)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return N(e[n],t[n])}))}catch(l){return!1}}function B(e,t){for(var n=0;n<e.length;n++)if(N(e[n],t))return n;return-1}function F(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var z="data-server-rendered",k=["component","directive","filter"],U=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:R,parsePlatformTagName:M,mustUseProp:L,async:!0,_lifecycleHooks:U},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function G(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function Y(e){if(!q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var X,K="__proto__"in{},$="undefined"!==typeof window,J="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=J&&WXEnvironment.platform.toLowerCase(),Z=$&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,ie=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===Q),oe=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),re={}.watch,ae=!1;if($)try{var se={};Object.defineProperty(se,"passive",{get:function(){ae=!0}}),window.addEventListener("test-passive",null,se)}catch(wa){}var ce=function(){return void 0===X&&(X=!$&&!J&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),X},le=$&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(e){return"function"===typeof e&&/native code/.test(e.toString())}var he,de="undefined"!==typeof Symbol&&ue(Symbol)&&"undefined"!==typeof Reflect&&ue(Reflect.ownKeys);he="undefined"!==typeof Set&&ue(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var fe=R,pe=0,me=function(){this.id=pe++,this.subs=[]};me.prototype.addSub=function(e){this.subs.push(e)},me.prototype.removeSub=function(e){b(this.subs,e)},me.prototype.depend=function(){me.target&&me.target.addDep(this)},me.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},me.target=null;var _e=[];function ge(e){_e.push(e),me.target=e}function be(){_e.pop(),me.target=_e[_e.length-1]}var ye=function(e,t,n,i,o,r,a,s){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=o,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ve={child:{configurable:!0}};ve.child.get=function(){return this.componentInstance},Object.defineProperties(ye.prototype,ve);var Oe=function(e){void 0===e&&(e="");var t=new ye;return t.text=e,t.isComment=!0,t};function Ae(e){return new ye(void 0,void 0,void 0,String(e))}function we(e){var t=new ye(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Te=Array.prototype,Ce=Object.create(Te),Ee=["push","pop","shift","unshift","splice","sort","reverse"];Ee.forEach((function(e){var t=Te[e];W(Ce,e,(function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];var o,r=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),r}))}));var xe=Object.getOwnPropertyNames(Ce),Se=!0;function Ie(e){Se=e}var De=function(e){this.value=e,this.dep=new me,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)?(K?Pe(e,Ce):je(e,Ce,xe),this.observeArray(e)):this.walk(e)};function Pe(e,t){e.__proto__=t}function je(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];W(e,r,t[r])}}function Re(e,t){var n;if(c(e)&&!(e instanceof ye))return v(e,"__ob__")&&e.__ob__ instanceof De?n=e.__ob__:Se&&!ce()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new De(e)),t&&n&&n.vmCount++,n}function Le(e,t,n,i,o){var r=new me,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=e[t]);var l=!o&&Re(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return me.target&&(r.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Be(t))),t},set:function(t){var i=s?s.call(e):n;t===i||t!==t&&i!==i||s&&!c||(c?c.call(e,t):n=t,l=!o&&Re(t),r.notify())}})}}function Me(e,t,n){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(Le(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function Ne(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||v(e,t)&&(delete e[t],n&&n.dep.notify())}}function Be(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Be(t)}De.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Le(e,t[n])},De.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Re(e[t])};var Fe=V.optionMergeStrategies;function ze(e,t){if(!t)return e;for(var n,i,o,r=de?Reflect.ownKeys(t):Object.keys(t),a=0;a<r.length;a++)n=r[a],"__ob__"!==n&&(i=e[n],o=t[n],v(e,n)?i!==o&&u(i)&&u(o)&&ze(i,o):Me(e,n,o));return e}function ke(e,t,n){return n?function(){var i="function"===typeof t?t.call(n,n):t,o="function"===typeof e?e.call(n,n):e;return i?ze(i,o):o}:t?e?function(){return ze("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function Ue(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?Ve(n):n}function Ve(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function He(e,t,n,i){var o=Object.create(e||null);return t?P(o,t):o}Fe.data=function(e,t,n){return n?ke(e,t,n):t&&"function"!==typeof t?e:ke(e,t)},U.forEach((function(e){Fe[e]=Ue})),k.forEach((function(e){Fe[e+"s"]=He})),Fe.watch=function(e,t,n,i){if(e===re&&(e=void 0),t===re&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var r in P(o,e),t){var a=o[r],s=t[r];a&&!Array.isArray(a)&&(a=[a]),o[r]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Fe.props=Fe.methods=Fe.inject=Fe.computed=function(e,t,n,i){if(!e)return t;var o=Object.create(null);return P(o,e),t&&P(o,t),o},Fe.provide=ke;var Ge=function(e,t){return void 0===t?e:t};function We(e,t){var n=e.props;if(n){var i,o,r,a={};if(Array.isArray(n)){i=n.length;while(i--)o=n[i],"string"===typeof o&&(r=w(o),a[r]={type:null})}else if(u(n))for(var s in n)o=n[s],r=w(s),a[r]=u(o)?o:{type:o};else 0;e.props=a}}function qe(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)i[n[o]]={from:n[o]};else if(u(n))for(var r in n){var a=n[r];i[r]=u(a)?P({from:r},a):{from:a}}else 0}}function Ye(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"===typeof i&&(t[n]={bind:i,update:i})}}function Xe(e,t,n){if("function"===typeof t&&(t=t.options),We(t,n),qe(t,n),Ye(t),!t._base&&(t.extends&&(e=Xe(e,t.extends,n)),t.mixins))for(var i=0,o=t.mixins.length;i<o;i++)e=Xe(e,t.mixins[i],n);var r,a={};for(r in e)s(r);for(r in t)v(e,r)||s(r);function s(i){var o=Fe[i]||Ge;a[i]=o(e[i],t[i],n,i)}return a}function Ke(e,t,n,i){if("string"===typeof n){var o=e[t];if(v(o,n))return o[n];var r=w(n);if(v(o,r))return o[r];var a=T(r);if(v(o,a))return o[a];var s=o[n]||o[r]||o[a];return s}}function $e(e,t,n,i){var o=t[e],r=!v(n,e),a=n[e],s=et(Boolean,o.type);if(s>-1)if(r&&!v(o,"default"))a=!1;else if(""===a||a===E(e)){var c=et(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=Je(i,o,e);var l=Se;Ie(!0),Re(a),Ie(l)}return a}function Je(e,t,n){if(v(t,"default")){var i=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof i&&"Function"!==Qe(t.type)?i.call(e):i}}function Qe(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ze(e,t){return Qe(e)===Qe(t)}function et(e,t){if(!Array.isArray(t))return Ze(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(Ze(t[n],e))return n;return-1}function tt(e,t,n){ge();try{if(t){var i=t;while(i=i.$parent){var o=i.$options.errorCaptured;if(o)for(var r=0;r<o.length;r++)try{var a=!1===o[r].call(i,e,t,n);if(a)return}catch(wa){it(wa,i,"errorCaptured hook")}}}it(e,t,n)}finally{be()}}function nt(e,t,n,i,o){var r;try{r=n?e.apply(t,n):e.call(t),r&&!r._isVue&&f(r)&&!r._handled&&(r.catch((function(e){return tt(e,i,o+" (Promise/async)")})),r._handled=!0)}catch(wa){tt(wa,i,o)}return r}function it(e,t,n){if(V.errorHandler)try{return V.errorHandler.call(null,e,t,n)}catch(wa){wa!==e&&ot(wa,null,"config.errorHandler")}ot(e,t,n)}function ot(e,t,n){if(!$&&!J||"undefined"===typeof console)throw e;console.error(e)}var rt,at=!1,st=[],ct=!1;function lt(){ct=!1;var e=st.slice(0);st.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ue(Promise)){var ut=Promise.resolve();rt=function(){ut.then(lt),ie&&setTimeout(R)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!ue(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())rt="undefined"!==typeof setImmediate&&ue(setImmediate)?function(){setImmediate(lt)}:function(){setTimeout(lt,0)};else{var ht=1,dt=new MutationObserver(lt),ft=document.createTextNode(String(ht));dt.observe(ft,{characterData:!0}),rt=function(){ht=(ht+1)%2,ft.data=String(ht)},at=!0}function pt(e,t){var n;if(st.push((function(){if(e)try{e.call(t)}catch(wa){tt(wa,t,"nextTick")}else n&&n(t)})),ct||(ct=!0,rt()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var mt=new he;function _t(e){gt(e,mt),mt.clear()}function gt(e,t){var n,i,o=Array.isArray(e);if(!(!o&&!c(e)||Object.isFrozen(e)||e instanceof ye)){if(e.__ob__){var r=e.__ob__.dep.id;if(t.has(r))return;t.add(r)}if(o){n=e.length;while(n--)gt(e[n],t)}else{i=Object.keys(e),n=i.length;while(n--)gt(e[i[n]],t)}}}var bt=O((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var i="!"===e.charAt(0);return e=i?e.slice(1):e,{name:e,once:n,capture:i,passive:t}}));function yt(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return nt(i,null,arguments,t,"v-on handler");for(var o=i.slice(),r=0;r<o.length;r++)nt(o[r],null,e,t,"v-on handler")}return n.fns=e,n}function vt(e,t,n,o,a,s){var c,l,u,h;for(c in e)l=e[c],u=t[c],h=bt(c),i(l)||(i(u)?(i(l.fns)&&(l=e[c]=yt(l,s)),r(h.once)&&(l=e[c]=a(h.name,l,h.capture)),n(h.name,l,h.capture,h.passive,h.params)):l!==u&&(u.fns=l,e[c]=u));for(c in t)i(e[c])&&(h=bt(c),o(h.name,t[c],h.capture))}function Ot(e,t,n){var a;e instanceof ye&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),b(a.fns,c)}i(s)?a=yt([c]):o(s.fns)&&r(s.merged)?(a=s,a.fns.push(c)):a=yt([s,c]),a.merged=!0,e[t]=a}function At(e,t,n){var r=t.options.props;if(!i(r)){var a={},s=e.attrs,c=e.props;if(o(s)||o(c))for(var l in r){var u=E(l);wt(a,c,l,u,!0)||wt(a,s,l,u,!1)}return a}}function wt(e,t,n,i,r){if(o(t)){if(v(t,n))return e[n]=t[n],r||delete t[n],!0;if(v(t,i))return e[n]=t[i],r||delete t[i],!0}return!1}function Tt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Ct(e){return s(e)?[Ae(e)]:Array.isArray(e)?xt(e):void 0}function Et(e){return o(e)&&o(e.text)&&a(e.isComment)}function xt(e,t){var n,a,c,l,u=[];for(n=0;n<e.length;n++)a=e[n],i(a)||"boolean"===typeof a||(c=u.length-1,l=u[c],Array.isArray(a)?a.length>0&&(a=xt(a,(t||"")+"_"+n),Et(a[0])&&Et(l)&&(u[c]=Ae(l.text+a[0].text),a.shift()),u.push.apply(u,a)):s(a)?Et(l)?u[c]=Ae(l.text+a):""!==a&&u.push(Ae(a)):Et(a)&&Et(l)?u[c]=Ae(l.text+a.text):(r(e._isVList)&&o(a.tag)&&i(a.key)&&o(t)&&(a.key="__vlist"+t+"_"+n+"__"),u.push(a)));return u}function St(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function It(e){var t=Dt(e.$options.inject,e);t&&(Ie(!1),Object.keys(t).forEach((function(n){Le(e,n,t[n])})),Ie(!0))}function Dt(e,t){if(e){for(var n=Object.create(null),i=de?Reflect.ownKeys(e):Object.keys(e),o=0;o<i.length;o++){var r=i[o];if("__ob__"!==r){var a=e[r].from,s=t;while(s){if(s._provided&&v(s._provided,a)){n[r]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[r]){var c=e[r].default;n[r]="function"===typeof c?c.call(t):c}else 0}}return n}}function Pt(e,t){if(!e||!e.length)return{};for(var n={},i=0,o=e.length;i<o;i++){var r=e[i],a=r.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,r.context!==t&&r.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(r);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===r.tag?c.push.apply(c,r.children||[]):c.push(r)}}for(var l in n)n[l].every(jt)&&delete n[l];return n}function jt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Rt(e,t,i){var o,r=Object.keys(t).length>0,a=e?!!e.$stable:!r,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&i&&i!==n&&s===i.$key&&!r&&!i.$hasNormal)return i;for(var c in o={},e)e[c]&&"$"!==c[0]&&(o[c]=Lt(t,c,e[c]))}else o={};for(var l in t)l in o||(o[l]=Mt(t,l));return e&&Object.isExtensible(e)&&(e._normalized=o),W(o,"$stable",a),W(o,"$key",s),W(o,"$hasNormal",r),o}function Lt(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({});return e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:Ct(e),e&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function Mt(e,t){return function(){return e[t]}}function Nt(e,t){var n,i,r,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=t(e[i],i);else if("number"===typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(c(e))if(de&&e[Symbol.iterator]){n=[];var l=e[Symbol.iterator](),u=l.next();while(!u.done)n.push(t(u.value,n.length)),u=l.next()}else for(a=Object.keys(e),n=new Array(a.length),i=0,r=a.length;i<r;i++)s=a[i],n[i]=t(e[s],s,i);return o(n)||(n=[]),n._isVList=!0,n}function Bt(e,t,n,i){var o,r=this.$scopedSlots[e];r?(n=n||{},i&&(n=P(P({},i),n)),o=r(n)||t):o=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function Ft(e){return Ke(this.$options,"filters",e,!0)||M}function zt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function kt(e,t,n,i,o){var r=V.keyCodes[t]||n;return o&&i&&!V.keyCodes[t]?zt(o,i):r?zt(r,e):i?E(i)!==t:void 0}function Ut(e,t,n,i,o){if(n)if(c(n)){var r;Array.isArray(n)&&(n=j(n));var a=function(a){if("class"===a||"style"===a||g(a))r=e;else{var s=e.attrs&&e.attrs.type;r=i||V.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=w(a),l=E(a);if(!(c in r)&&!(l in r)&&(r[a]=n[a],o)){var u=e.on||(e.on={});u["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function Vt(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Gt(i,"__static__"+e,!1)),i}function Ht(e,t,n){return Gt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Gt(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!==typeof e[i]&&Wt(e[i],t+"_"+i,n);else Wt(e,t,n)}function Wt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function qt(e,t){if(t)if(u(t)){var n=e.on=e.on?P({},e.on):{};for(var i in t){var o=n[i],r=t[i];n[i]=o?[].concat(o,r):r}}else;return e}function Yt(e,t,n,i){t=t||{$stable:!n};for(var o=0;o<e.length;o++){var r=e[o];Array.isArray(r)?Yt(r,t,n):r&&(r.proxy&&(r.fn.proxy=!0),t[r.key]=r.fn)}return i&&(t.$key=i),t}function Xt(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"===typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Kt(e,t){return"string"===typeof e?t+e:e}function $t(e){e._o=Ht,e._n=m,e._s=p,e._l=Nt,e._t=Bt,e._q=N,e._i=B,e._m=Vt,e._f=Ft,e._k=kt,e._b=Ut,e._v=Ae,e._e=Oe,e._u=Yt,e._g=qt,e._d=Xt,e._p=Kt}function Jt(e,t,i,o,a){var s,c=this,l=a.options;v(o,"_uid")?(s=Object.create(o),s._original=o):(s=o,o=o._original);var u=r(l._compiled),h=!u;this.data=e,this.props=t,this.children=i,this.parent=o,this.listeners=e.on||n,this.injections=Dt(l.inject,o),this.slots=function(){return c.$slots||Rt(e.scopedSlots,c.$slots=Pt(i,o)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Rt(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Rt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,i){var r=hn(s,e,t,n,i,h);return r&&!Array.isArray(r)&&(r.fnScopeId=l._scopeId,r.fnContext=o),r}:this._c=function(e,t,n,i){return hn(s,e,t,n,i,h)}}function Qt(e,t,i,r,a){var s=e.options,c={},l=s.props;if(o(l))for(var u in l)c[u]=$e(u,l,t||n);else o(i.attrs)&&en(c,i.attrs),o(i.props)&&en(c,i.props);var h=new Jt(i,c,a,r,e),d=s.render.call(null,h._c,h);if(d instanceof ye)return Zt(d,i,h.parent,s,h);if(Array.isArray(d)){for(var f=Ct(d)||[],p=new Array(f.length),m=0;m<f.length;m++)p[m]=Zt(f[m],i,h.parent,s,h);return p}}function Zt(e,t,n,i,o){var r=we(e);return r.fnContext=n,r.fnOptions=i,t.slot&&((r.data||(r.data={})).slot=t.slot),r}function en(e,t){for(var n in t)e[w(n)]=t[n]}$t(Jt.prototype);var tn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;tn.prepatch(n,n)}else{var i=e.componentInstance=rn(e,Dn);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;Mn(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,zn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Qn(n):Bn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Fn(t,!0):t.$destroy())}},nn=Object.keys(tn);function on(e,t,n,a,s){if(!i(e)){var l=n.$options._base;if(c(e)&&(e=l.extend(e)),"function"===typeof e){var u;if(i(e.cid)&&(u=e,e=On(u,l),void 0===e))return vn(u,t,n,a,s);t=t||{},Oi(e),o(t.model)&&cn(e.options,t);var h=At(t,e,s);if(r(e.options.functional))return Qt(e,h,t,n,a);var d=t.on;if(t.on=t.nativeOn,r(e.options.abstract)){var f=t.slot;t={},f&&(t.slot=f)}an(t);var p=e.options.name||s,m=new ye("vue-component-"+e.cid+(p?"-"+p:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:d,tag:s,children:a},u);return m}}}function rn(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return o(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}function an(e){for(var t=e.hook||(e.hook={}),n=0;n<nn.length;n++){var i=nn[n],o=t[i],r=tn[i];o===r||o&&o._merged||(t[i]=o?sn(r,o):r)}}function sn(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function cn(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var r=t.on||(t.on={}),a=r[i],s=t.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(r[i]=[s].concat(a)):r[i]=s}var ln=1,un=2;function hn(e,t,n,i,o,a){return(Array.isArray(n)||s(n))&&(o=i,i=n,n=void 0),r(a)&&(o=un),dn(e,t,n,i,o)}function dn(e,t,n,i,r){if(o(n)&&o(n.__ob__))return Oe();if(o(n)&&o(n.is)&&(t=n.is),!t)return Oe();var a,s,c;(Array.isArray(i)&&"function"===typeof i[0]&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),r===un?i=Ct(i):r===ln&&(i=Tt(i)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||V.getTagNamespace(t),a=V.isReservedTag(t)?new ye(V.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!o(c=Ke(e.$options,"components",t))?new ye(t,n,i,void 0,void 0,e):on(c,n,e,i,t)):a=on(t,n,e,i);return Array.isArray(a)?a:o(a)?(o(s)&&fn(a,s),o(n)&&pn(n),a):Oe()}function fn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),o(e.children))for(var a=0,s=e.children.length;a<s;a++){var c=e.children[a];o(c.tag)&&(i(c.ns)||r(n)&&"svg"!==c.tag)&&fn(c,t,n)}}function pn(e){c(e.style)&&_t(e.style),c(e.class)&&_t(e.class)}function mn(e){e._vnode=null,e._staticTrees=null;var t=e.$options,i=e.$vnode=t._parentVnode,o=i&&i.context;e.$slots=Pt(t._renderChildren,o),e.$scopedSlots=n,e._c=function(t,n,i,o){return hn(e,t,n,i,o,!1)},e.$createElement=function(t,n,i,o){return hn(e,t,n,i,o,!0)};var r=i&&i.data;Le(e,"$attrs",r&&r.attrs||n,null,!0),Le(e,"$listeners",t._parentListeners||n,null,!0)}var _n,gn=null;function bn(e){$t(e.prototype),e.prototype.$nextTick=function(e){return pt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,o=n._parentVnode;o&&(t.$scopedSlots=Rt(o.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=o;try{gn=t,e=i.call(t._renderProxy,t.$createElement)}catch(wa){tt(wa,t,"render"),e=t._vnode}finally{gn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ye||(e=Oe()),e.parent=o,e}}function yn(e,t){return(e.__esModule||de&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function vn(e,t,n,i,o){var r=Oe();return r.asyncFactory=e,r.asyncMeta={data:t,context:n,children:i,tag:o},r}function On(e,t){if(r(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=gn;if(n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),r(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var a=e.owners=[n],s=!0,l=null,u=null;n.$on("hook:destroyed",(function(){return b(a,n)}));var h=function(e){for(var t=0,n=a.length;t<n;t++)a[t].$forceUpdate();e&&(a.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},d=F((function(n){e.resolved=yn(n,t),s?a.length=0:h(!0)})),p=F((function(t){o(e.errorComp)&&(e.error=!0,h(!0))})),m=e(d,p);return c(m)&&(f(m)?i(e.resolved)&&m.then(d,p):f(m.component)&&(m.component.then(d,p),o(m.error)&&(e.errorComp=yn(m.error,t)),o(m.loading)&&(e.loadingComp=yn(m.loading,t),0===m.delay?e.loading=!0:l=setTimeout((function(){l=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,h(!1))}),m.delay||200)),o(m.timeout)&&(u=setTimeout((function(){u=null,i(e.resolved)&&p(null)}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function An(e){return e.isComment&&e.asyncFactory}function wn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||An(n)))return n}}function Tn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Sn(e,t)}function Cn(e,t){_n.$on(e,t)}function En(e,t){_n.$off(e,t)}function xn(e,t){var n=_n;return function i(){var o=t.apply(null,arguments);null!==o&&n.$off(e,i)}}function Sn(e,t,n){_n=e,vt(t,n||{},Cn,En,xn,e),_n=void 0}function In(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var o=0,r=e.length;o<r;o++)i.$on(e[o],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,o=e.length;i<o;i++)n.$off(e[i],t);return n}var r,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var s=a.length;while(s--)if(r=a[s],r===t||r.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?D(n):n;for(var i=D(arguments,1),o='event handler for "'+e+'"',r=0,a=n.length;r<a;r++)nt(n[r],t,i,t,o)}return t}}var Dn=null;function Pn(e){var t=Dn;return Dn=e,function(){Dn=t}}function jn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Rn(e){e.prototype._update=function(e,t){var n=this,i=n.$el,o=n._vnode,r=Pn(n);n._vnode=e,n.$el=o?n.__patch__(o,e):n.__patch__(n.$el,e,t,!1),r(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){zn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),zn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Ln(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=Oe),zn(e,"beforeMount"),i=function(){e._update(e._render(),n)},new ni(e,i,R,{before:function(){e._isMounted&&!e._isDestroyed&&zn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,zn(e,"mounted")),e}function Mn(e,t,i,o,r){var a=o.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),l=!!(r||e.$options._renderChildren||c);if(e.$options._parentVnode=o,e.$vnode=o,e._vnode&&(e._vnode.parent=o),e.$options._renderChildren=r,e.$attrs=o.data.attrs||n,e.$listeners=i||n,t&&e.$options.props){Ie(!1);for(var u=e._props,h=e.$options._propKeys||[],d=0;d<h.length;d++){var f=h[d],p=e.$options.props;u[f]=$e(f,p,t,e)}Ie(!0),e.$options.propsData=t}i=i||n;var m=e.$options._parentListeners;e.$options._parentListeners=i,Sn(e,i,m),l&&(e.$slots=Pt(r,o.context),e.$forceUpdate())}function Nn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Bn(e,t){if(t){if(e._directInactive=!1,Nn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Bn(e.$children[n]);zn(e,"activated")}}function Fn(e,t){if((!t||(e._directInactive=!0,!Nn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Fn(e.$children[n]);zn(e,"deactivated")}}function zn(e,t){ge();var n=e.$options[t],i=t+" hook";if(n)for(var o=0,r=n.length;o<r;o++)nt(n[o],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),be()}var kn=[],Un=[],Vn={},Hn=!1,Gn=!1,Wn=0;function qn(){Wn=kn.length=Un.length=0,Vn={},Hn=Gn=!1}var Yn=0,Xn=Date.now;if($&&!ee){var Kn=window.performance;Kn&&"function"===typeof Kn.now&&Xn()>document.createEvent("Event").timeStamp&&(Xn=function(){return Kn.now()})}function $n(){var e,t;for(Yn=Xn(),Gn=!0,kn.sort((function(e,t){return e.id-t.id})),Wn=0;Wn<kn.length;Wn++)e=kn[Wn],e.before&&e.before(),t=e.id,Vn[t]=null,e.run();var n=Un.slice(),i=kn.slice();qn(),Zn(n),Jn(i),le&&V.devtools&&le.emit("flush")}function Jn(e){var t=e.length;while(t--){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&zn(i,"updated")}}function Qn(e){e._inactive=!1,Un.push(e)}function Zn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Bn(e[t],!0)}function ei(e){var t=e.id;if(null==Vn[t]){if(Vn[t]=!0,Gn){var n=kn.length-1;while(n>Wn&&kn[n].id>e.id)n--;kn.splice(n+1,0,e)}else kn.push(e);Hn||(Hn=!0,pt($n))}}var ti=0,ni=function(e,t,n,i,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ti,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new he,this.newDepIds=new he,this.expression="","function"===typeof t?this.getter=t:(this.getter=Y(t),this.getter||(this.getter=R)),this.value=this.lazy?void 0:this.get()};ni.prototype.get=function(){var e;ge(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(wa){if(!this.user)throw wa;tt(wa,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&_t(e),be(),this.cleanupDeps()}return e},ni.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},ni.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ni.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ei(this)},ni.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(wa){tt(wa,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},ni.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ni.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},ni.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var ii={enumerable:!0,configurable:!0,get:R,set:R};function oi(e,t,n){ii.get=function(){return this[t][n]},ii.set=function(e){this[t][n]=e},Object.defineProperty(e,n,ii)}function ri(e){e._watchers=[];var t=e.$options;t.props&&ai(e,t.props),t.methods&&pi(e,t.methods),t.data?si(e):Re(e._data={},!0),t.computed&&ui(e,t.computed),t.watch&&t.watch!==re&&mi(e,t.watch)}function ai(e,t){var n=e.$options.propsData||{},i=e._props={},o=e.$options._propKeys=[],r=!e.$parent;r||Ie(!1);var a=function(r){o.push(r);var a=$e(r,t,n,e);Le(i,r,a),r in e||oi(e,"_props",r)};for(var s in t)a(s);Ie(!0)}function si(e){var t=e.$options.data;t=e._data="function"===typeof t?ci(t,e):t||{},u(t)||(t={});var n=Object.keys(t),i=e.$options.props,o=(e.$options.methods,n.length);while(o--){var r=n[o];0,i&&v(i,r)||G(r)||oi(e,"_data",r)}Re(t,!0)}function ci(e,t){ge();try{return e.call(t,t)}catch(wa){return tt(wa,t,"data()"),{}}finally{be()}}var li={lazy:!0};function ui(e,t){var n=e._computedWatchers=Object.create(null),i=ce();for(var o in t){var r=t[o],a="function"===typeof r?r:r.get;0,i||(n[o]=new ni(e,a||R,R,li)),o in e||hi(e,o,r)}}function hi(e,t,n){var i=!ce();"function"===typeof n?(ii.get=i?di(t):fi(n),ii.set=R):(ii.get=n.get?i&&!1!==n.cache?di(t):fi(n.get):R,ii.set=n.set||R),Object.defineProperty(e,t,ii)}function di(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),me.target&&t.depend(),t.value}}function fi(e){return function(){return e.call(this,this)}}function pi(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?R:I(t[n],e)}function mi(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var o=0;o<i.length;o++)_i(e,n,i[o]);else _i(e,n,i)}}function _i(e,t,n,i){return u(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,i)}function gi(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Me,e.prototype.$delete=Ne,e.prototype.$watch=function(e,t,n){var i=this;if(u(t))return _i(i,e,t,n);n=n||{},n.user=!0;var o=new ni(i,e,t,n);if(n.immediate)try{t.call(i,o.value)}catch(r){tt(r,i,'callback for immediate watcher "'+o.expression+'"')}return function(){o.teardown()}}}var bi=0;function yi(e){e.prototype._init=function(e){var t=this;t._uid=bi++,t._isVue=!0,e&&e._isComponent?vi(t,e):t.$options=Xe(Oi(t.constructor),e||{},t),t._renderProxy=t,t._self=t,jn(t),Tn(t),mn(t),zn(t,"beforeCreate"),It(t),ri(t),St(t),zn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function vi(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var o=i.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Oi(e){var t=e.options;if(e.super){var n=Oi(e.super),i=e.superOptions;if(n!==i){e.superOptions=n;var o=Ai(e);o&&P(e.extendOptions,o),t=e.options=Xe(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Ai(e){var t,n=e.options,i=e.sealedOptions;for(var o in n)n[o]!==i[o]&&(t||(t={}),t[o]=n[o]);return t}function wi(e){this._init(e)}function Ti(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=D(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Ci(e){e.mixin=function(e){return this.options=Xe(this.options,e),this}}function Ei(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,o=e._Ctor||(e._Ctor={});if(o[i])return o[i];var r=e.name||n.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Xe(n.options,e),a["super"]=n,a.options.props&&xi(a),a.options.computed&&Si(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,k.forEach((function(e){a[e]=n[e]})),r&&(a.options.components[r]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=P({},a.options),o[i]=a,a}}function xi(e){var t=e.options.props;for(var n in t)oi(e.prototype,"_props",n)}function Si(e){var t=e.options.computed;for(var n in t)hi(e.prototype,n,t[n])}function Ii(e){k.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&u(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Di(e){return e&&(e.Ctor.options.name||e.tag)}function Pi(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!h(e)&&e.test(t)}function ji(e,t){var n=e.cache,i=e.keys,o=e._vnode;for(var r in n){var a=n[r];if(a){var s=Di(a.componentOptions);s&&!t(s)&&Ri(n,r,i,o)}}}function Ri(e,t,n,i){var o=e[t];!o||i&&o.tag===i.tag||o.componentInstance.$destroy(),e[t]=null,b(n,t)}yi(wi),gi(wi),In(wi),Rn(wi),bn(wi);var Li=[String,RegExp,Array],Mi={name:"keep-alive",abstract:!0,props:{include:Li,exclude:Li,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Ri(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){ji(e,(function(e){return Pi(t,e)}))})),this.$watch("exclude",(function(t){ji(e,(function(e){return!Pi(t,e)}))}))},render:function(){var e=this.$slots.default,t=wn(e),n=t&&t.componentOptions;if(n){var i=Di(n),o=this,r=o.include,a=o.exclude;if(r&&(!i||!Pi(r,i))||a&&i&&Pi(a,i))return t;var s=this,c=s.cache,l=s.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,b(l,u),l.push(u)):(c[u]=t,l.push(u),this.max&&l.length>parseInt(this.max)&&Ri(c,l[0],l,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},Ni={KeepAlive:Mi};function Bi(e){var t={get:function(){return V}};Object.defineProperty(e,"config",t),e.util={warn:fe,extend:P,mergeOptions:Xe,defineReactive:Le},e.set=Me,e.delete=Ne,e.nextTick=pt,e.observable=function(e){return Re(e),e},e.options=Object.create(null),k.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,P(e.options.components,Ni),Ti(e),Ci(e),Ei(e),Ii(e)}Bi(wi),Object.defineProperty(wi.prototype,"$isServer",{get:ce}),Object.defineProperty(wi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wi,"FunctionalRenderContext",{value:Jt}),wi.version="2.6.11";var Fi=_("style,class"),zi=_("input,textarea,option,select,progress"),ki=function(e,t,n){return"value"===n&&zi(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Ui=_("contenteditable,draggable,spellcheck"),Vi=_("events,caret,typing,plaintext-only"),Hi=function(e,t){return Xi(t)||"false"===t?"false":"contenteditable"===e&&Vi(t)?t:"true"},Gi=_("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wi="http://www.w3.org/1999/xlink",qi=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yi=function(e){return qi(e)?e.slice(6,e.length):""},Xi=function(e){return null==e||!1===e};function Ki(e){var t=e.data,n=e,i=e;while(o(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(t=$i(i.data,t));while(o(n=n.parent))n&&n.data&&(t=$i(t,n.data));return Ji(t.staticClass,t.class)}function $i(e,t){return{staticClass:Qi(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function Ji(e,t){return o(e)||o(t)?Qi(e,Zi(t)):""}function Qi(e,t){return e?t?e+" "+t:e:t||""}function Zi(e){return Array.isArray(e)?eo(e):c(e)?to(e):"string"===typeof e?e:""}function eo(e){for(var t,n="",i=0,r=e.length;i<r;i++)o(t=Zi(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function to(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var no={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},io=_("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),oo=_("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ro=function(e){return io(e)||oo(e)};function ao(e){return oo(e)?"svg":"math"===e?"math":void 0}var so=Object.create(null);function co(e){if(!$)return!0;if(ro(e))return!1;if(e=e.toLowerCase(),null!=so[e])return so[e];var t=document.createElement(e);return e.indexOf("-")>-1?so[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:so[e]=/HTMLUnknownElement/.test(t.toString())}var lo=_("text,number,password,search,email,tel,url");function uo(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function ho(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function fo(e,t){return document.createElementNS(no[e],t)}function po(e){return document.createTextNode(e)}function mo(e){return document.createComment(e)}function _o(e,t,n){e.insertBefore(t,n)}function go(e,t){e.removeChild(t)}function bo(e,t){e.appendChild(t)}function yo(e){return e.parentNode}function vo(e){return e.nextSibling}function Oo(e){return e.tagName}function Ao(e,t){e.textContent=t}function wo(e,t){e.setAttribute(t,"")}var To=Object.freeze({createElement:ho,createElementNS:fo,createTextNode:po,createComment:mo,insertBefore:_o,removeChild:go,appendChild:bo,parentNode:yo,nextSibling:vo,tagName:Oo,setTextContent:Ao,setStyleScope:wo}),Co={create:function(e,t){Eo(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Eo(e,!0),Eo(t))},destroy:function(e){Eo(e,!0)}};function Eo(e,t){var n=e.data.ref;if(o(n)){var i=e.context,r=e.componentInstance||e.elm,a=i.$refs;t?Array.isArray(a[n])?b(a[n],r):a[n]===r&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(r)<0&&a[n].push(r):a[n]=[r]:a[n]=r}}var xo=new ye("",{},[]),So=["create","activate","update","remove","destroy"];function Io(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&Do(e,t)||r(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function Do(e,t){if("input"!==e.tag)return!0;var n,i=o(n=e.data)&&o(n=n.attrs)&&n.type,r=o(n=t.data)&&o(n=n.attrs)&&n.type;return i===r||lo(i)&&lo(r)}function Po(e,t,n){var i,r,a={};for(i=t;i<=n;++i)r=e[i].key,o(r)&&(a[r]=i);return a}function jo(e){var t,n,a={},c=e.modules,l=e.nodeOps;for(t=0;t<So.length;++t)for(a[So[t]]=[],n=0;n<c.length;++n)o(c[n][So[t]])&&a[So[t]].push(c[n][So[t]]);function u(e){return new ye(l.tagName(e).toLowerCase(),{},[],void 0,e)}function h(e,t){function n(){0===--n.listeners&&d(e)}return n.listeners=t,n}function d(e){var t=l.parentNode(e);o(t)&&l.removeChild(t,e)}function f(e,t,n,i,a,s,c){if(o(e.elm)&&o(s)&&(e=s[c]=we(e)),e.isRootInsert=!a,!p(e,t,n,i)){var u=e.data,h=e.children,d=e.tag;o(d)?(e.elm=e.ns?l.createElementNS(e.ns,d):l.createElement(d,e),A(e),y(e,h,t),o(u)&&O(e,t),b(n,e.elm,i)):r(e.isComment)?(e.elm=l.createComment(e.text),b(n,e.elm,i)):(e.elm=l.createTextNode(e.text),b(n,e.elm,i))}}function p(e,t,n,i){var a=e.data;if(o(a)){var s=o(e.componentInstance)&&a.keepAlive;if(o(a=a.hook)&&o(a=a.init)&&a(e,!1),o(e.componentInstance))return m(e,t),b(n,e.elm,i),r(s)&&g(e,t,n,i),!0}}function m(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,v(e)?(O(e,t),A(e)):(Eo(e),t.push(e))}function g(e,t,n,i){var r,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,o(r=s.data)&&o(r=r.transition)){for(r=0;r<a.activate.length;++r)a.activate[r](xo,s);t.push(s);break}b(n,e.elm,i)}function b(e,t,n){o(e)&&(o(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function y(e,t,n){if(Array.isArray(t)){0;for(var i=0;i<t.length;++i)f(t[i],n,e.elm,null,!0,t,i)}else s(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function v(e){while(e.componentInstance)e=e.componentInstance._vnode;return o(e.tag)}function O(e,n){for(var i=0;i<a.create.length;++i)a.create[i](xo,e);t=e.data.hook,o(t)&&(o(t.create)&&t.create(xo,e),o(t.insert)&&n.push(e))}function A(e){var t;if(o(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)o(t=n.context)&&o(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}o(t=Dn)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function w(e,t,n,i,o,r){for(;i<=o;++i)f(n[i],r,e,t,!1,n,i)}function T(e){var t,n,i=e.data;if(o(i))for(o(t=i.hook)&&o(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)T(e.children[n])}function C(e,t,n){for(;t<=n;++t){var i=e[t];o(i)&&(o(i.tag)?(E(i),T(i)):d(i.elm))}}function E(e,t){if(o(t)||o(e.data)){var n,i=a.remove.length+1;for(o(t)?t.listeners+=i:t=h(e.elm,i),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&E(n,t),n=0;n<a.remove.length;++n)a.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else d(e.elm)}function x(e,t,n,r,a){var s,c,u,h,d=0,p=0,m=t.length-1,_=t[0],g=t[m],b=n.length-1,y=n[0],v=n[b],O=!a;while(d<=m&&p<=b)i(_)?_=t[++d]:i(g)?g=t[--m]:Io(_,y)?(I(_,y,r,n,p),_=t[++d],y=n[++p]):Io(g,v)?(I(g,v,r,n,b),g=t[--m],v=n[--b]):Io(_,v)?(I(_,v,r,n,b),O&&l.insertBefore(e,_.elm,l.nextSibling(g.elm)),_=t[++d],v=n[--b]):Io(g,y)?(I(g,y,r,n,p),O&&l.insertBefore(e,g.elm,_.elm),g=t[--m],y=n[++p]):(i(s)&&(s=Po(t,d,m)),c=o(y.key)?s[y.key]:S(y,t,d,m),i(c)?f(y,r,e,_.elm,!1,n,p):(u=t[c],Io(u,y)?(I(u,y,r,n,p),t[c]=void 0,O&&l.insertBefore(e,u.elm,_.elm)):f(y,r,e,_.elm,!1,n,p)),y=n[++p]);d>m?(h=i(n[b+1])?null:n[b+1].elm,w(e,h,n,p,b,r)):p>b&&C(t,d,m)}function S(e,t,n,i){for(var r=n;r<i;r++){var a=t[r];if(o(a)&&Io(e,a))return r}}function I(e,t,n,s,c,u){if(e!==t){o(t.elm)&&o(s)&&(t=s[c]=we(t));var h=t.elm=e.elm;if(r(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?j(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(r(t.isStatic)&&r(e.isStatic)&&t.key===e.key&&(r(t.isCloned)||r(t.isOnce)))t.componentInstance=e.componentInstance;else{var d,f=t.data;o(f)&&o(d=f.hook)&&o(d=d.prepatch)&&d(e,t);var p=e.children,m=t.children;if(o(f)&&v(t)){for(d=0;d<a.update.length;++d)a.update[d](e,t);o(d=f.hook)&&o(d=d.update)&&d(e,t)}i(t.text)?o(p)&&o(m)?p!==m&&x(h,p,m,n,u):o(m)?(o(e.text)&&l.setTextContent(h,""),w(h,null,m,0,m.length-1,n)):o(p)?C(p,0,p.length-1):o(e.text)&&l.setTextContent(h,""):e.text!==t.text&&l.setTextContent(h,t.text),o(f)&&o(d=f.hook)&&o(d=d.postpatch)&&d(e,t)}}}function D(e,t,n){if(r(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var P=_("attrs,class,staticClass,staticStyle,key");function j(e,t,n,i){var a,s=t.tag,c=t.data,l=t.children;if(i=i||c&&c.pre,t.elm=e,r(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(o(c)&&(o(a=c.hook)&&o(a=a.init)&&a(t,!0),o(a=t.componentInstance)))return m(t,n),!0;if(o(s)){if(o(l))if(e.hasChildNodes())if(o(a=c)&&o(a=a.domProps)&&o(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var u=!0,h=e.firstChild,d=0;d<l.length;d++){if(!h||!j(h,l[d],n,i)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else y(t,l,n);if(o(c)){var f=!1;for(var p in c)if(!P(p)){f=!0,O(t,n);break}!f&&c["class"]&&_t(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!i(t)){var c=!1,h=[];if(i(e))c=!0,f(t,h);else{var d=o(e.nodeType);if(!d&&Io(e,t))I(e,t,h,null,null,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(z)&&(e.removeAttribute(z),n=!0),r(n)&&j(e,t,h))return D(t,h,!0),e;e=u(e)}var p=e.elm,m=l.parentNode(p);if(f(t,h,p._leaveCb?null:m,l.nextSibling(p)),o(t.parent)){var _=t.parent,g=v(t);while(_){for(var b=0;b<a.destroy.length;++b)a.destroy[b](_);if(_.elm=t.elm,g){for(var y=0;y<a.create.length;++y)a.create[y](xo,_);var O=_.data.hook.insert;if(O.merged)for(var A=1;A<O.fns.length;A++)O.fns[A]()}else Eo(_);_=_.parent}}o(m)?C([e],0,0):o(e.tag)&&T(e)}}return D(t,h,c),t.elm}o(e)&&T(e)}}var Ro={create:Lo,update:Lo,destroy:function(e){Lo(e,xo)}};function Lo(e,t){(e.data.directives||t.data.directives)&&Mo(e,t)}function Mo(e,t){var n,i,o,r=e===xo,a=t===xo,s=Bo(e.data.directives,e.context),c=Bo(t.data.directives,t.context),l=[],u=[];for(n in c)i=s[n],o=c[n],i?(o.oldValue=i.value,o.oldArg=i.arg,zo(o,"update",t,e),o.def&&o.def.componentUpdated&&u.push(o)):(zo(o,"bind",t,e),o.def&&o.def.inserted&&l.push(o));if(l.length){var h=function(){for(var n=0;n<l.length;n++)zo(l[n],"inserted",t,e)};r?Ot(t,"insert",h):h()}if(u.length&&Ot(t,"postpatch",(function(){for(var n=0;n<u.length;n++)zo(u[n],"componentUpdated",t,e)})),!r)for(n in s)c[n]||zo(s[n],"unbind",e,e,a)}var No=Object.create(null);function Bo(e,t){var n,i,o=Object.create(null);if(!e)return o;for(n=0;n<e.length;n++)i=e[n],i.modifiers||(i.modifiers=No),o[Fo(i)]=i,i.def=Ke(t.$options,"directives",i.name,!0);return o}function Fo(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function zo(e,t,n,i,o){var r=e.def&&e.def[t];if(r)try{r(n.elm,e,n,i,o)}catch(wa){tt(wa,n.context,"directive "+e.name+" "+t+" hook")}}var ko=[Co,Ro];function Uo(e,t){var n=t.componentOptions;if((!o(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(e.data.attrs)||!i(t.data.attrs))){var r,a,s,c=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(r in o(u.__ob__)&&(u=t.data.attrs=P({},u)),u)a=u[r],s=l[r],s!==a&&Vo(c,r,a);for(r in(ee||ne)&&u.value!==l.value&&Vo(c,"value",u.value),l)i(u[r])&&(qi(r)?c.removeAttributeNS(Wi,Yi(r)):Ui(r)||c.removeAttribute(r))}}function Vo(e,t,n){e.tagName.indexOf("-")>-1?Ho(e,t,n):Gi(t)?Xi(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Ui(t)?e.setAttribute(t,Hi(t,n)):qi(t)?Xi(n)?e.removeAttributeNS(Wi,Yi(t)):e.setAttributeNS(Wi,t,n):Ho(e,t,n)}function Ho(e,t,n){if(Xi(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var Go={create:Uo,update:Uo};function Wo(e,t){var n=t.elm,r=t.data,a=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=Ki(t),c=n._transitionClasses;o(c)&&(s=Qi(s,Zi(c))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var qo,Yo={create:Wo,update:Wo},Xo="__r",Ko="__c";function $o(e){if(o(e[Xo])){var t=ee?"change":"input";e[t]=[].concat(e[Xo],e[t]||[]),delete e[Xo]}o(e[Ko])&&(e.change=[].concat(e[Ko],e.change||[]),delete e[Ko])}function Jo(e,t,n){var i=qo;return function o(){var r=t.apply(null,arguments);null!==r&&er(e,o,n,i)}}var Qo=at&&!(oe&&Number(oe[1])<=53);function Zo(e,t,n,i){if(Qo){var o=Yn,r=t;t=r._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=o||e.timeStamp<=0||e.target.ownerDocument!==document)return r.apply(this,arguments)}}qo.addEventListener(e,t,ae?{capture:n,passive:i}:n)}function er(e,t,n,i){(i||qo).removeEventListener(e,t._wrapper||t,n)}function tr(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},o=e.data.on||{};qo=t.elm,$o(n),vt(n,o,Zo,er,Jo,t.context),qo=void 0}}var nr,ir={create:tr,update:tr};function or(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,r,a=t.elm,s=e.data.domProps||{},c=t.data.domProps||{};for(n in o(c.__ob__)&&(c=t.data.domProps=P({},c)),s)n in c||(a[n]="");for(n in c){if(r=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=r;var l=i(r)?"":String(r);rr(a,l)&&(a.value=l)}else if("innerHTML"===n&&oo(a.tagName)&&i(a.innerHTML)){nr=nr||document.createElement("div"),nr.innerHTML="<svg>"+r+"</svg>";var u=nr.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(u.firstChild)a.appendChild(u.firstChild)}else if(r!==s[n])try{a[n]=r}catch(wa){}}}}function rr(e,t){return!e.composing&&("OPTION"===e.tagName||ar(e,t)||sr(e,t))}function ar(e,t){var n=!0;try{n=document.activeElement!==e}catch(wa){}return n&&e.value!==t}function sr(e,t){var n=e.value,i=e._vModifiers;if(o(i)){if(i.number)return m(n)!==m(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}var cr={create:or,update:or},lr=O((function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function ur(e){var t=hr(e.style);return e.staticStyle?P(e.staticStyle,t):t}function hr(e){return Array.isArray(e)?j(e):"string"===typeof e?lr(e):e}function dr(e,t){var n,i={};if(t){var o=e;while(o.componentInstance)o=o.componentInstance._vnode,o&&o.data&&(n=ur(o.data))&&P(i,n)}(n=ur(e.data))&&P(i,n);var r=e;while(r=r.parent)r.data&&(n=ur(r.data))&&P(i,n);return i}var fr,pr=/^--/,mr=/\s*!important$/,_r=function(e,t,n){if(pr.test(t))e.style.setProperty(t,n);else if(mr.test(n))e.style.setProperty(E(t),n.replace(mr,""),"important");else{var i=br(t);if(Array.isArray(n))for(var o=0,r=n.length;o<r;o++)e.style[i]=n[o];else e.style[i]=n}},gr=["Webkit","Moz","ms"],br=O((function(e){if(fr=fr||document.createElement("div").style,e=w(e),"filter"!==e&&e in fr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<gr.length;n++){var i=gr[n]+t;if(i in fr)return i}}));function yr(e,t){var n=t.data,r=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,c=t.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},h=l||u,d=hr(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?P({},d):d;var f=dr(t,!0);for(s in h)i(f[s])&&_r(c,s,"");for(s in f)a=f[s],a!==h[s]&&_r(c,s,null==a?"":a)}}var vr={create:yr,update:yr},Or=/\s+/;function Ar(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Or).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function wr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Or).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Tr(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&P(t,Cr(e.name||"v")),P(t,e),t}return"string"===typeof e?Cr(e):void 0}}var Cr=O((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Er=$&&!te,xr="transition",Sr="animation",Ir="transition",Dr="transitionend",Pr="animation",jr="animationend";Er&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ir="WebkitTransition",Dr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Pr="WebkitAnimation",jr="webkitAnimationEnd"));var Rr=$?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Lr(e){Rr((function(){Rr(e)}))}function Mr(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Ar(e,t))}function Nr(e,t){e._transitionClasses&&b(e._transitionClasses,t),wr(e,t)}function Br(e,t,n){var i=zr(e,t),o=i.type,r=i.timeout,a=i.propCount;if(!o)return n();var s=o===xr?Dr:jr,c=0,l=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),r+1),e.addEventListener(s,u)}var Fr=/\b(transform|all)(,|$)/;function zr(e,t){var n,i=window.getComputedStyle(e),o=(i[Ir+"Delay"]||"").split(", "),r=(i[Ir+"Duration"]||"").split(", "),a=kr(o,r),s=(i[Pr+"Delay"]||"").split(", "),c=(i[Pr+"Duration"]||"").split(", "),l=kr(s,c),u=0,h=0;t===xr?a>0&&(n=xr,u=a,h=r.length):t===Sr?l>0&&(n=Sr,u=l,h=c.length):(u=Math.max(a,l),n=u>0?a>l?xr:Sr:null,h=n?n===xr?r.length:c.length:0);var d=n===xr&&Fr.test(i[Ir+"Property"]);return{type:n,timeout:u,propCount:h,hasTransform:d}}function kr(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Ur(t)+Ur(e[n])})))}function Ur(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Vr(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Tr(e.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){var a=r.css,s=r.type,l=r.enterClass,u=r.enterToClass,h=r.enterActiveClass,d=r.appearClass,f=r.appearToClass,p=r.appearActiveClass,_=r.beforeEnter,g=r.enter,b=r.afterEnter,y=r.enterCancelled,v=r.beforeAppear,O=r.appear,A=r.afterAppear,w=r.appearCancelled,T=r.duration,C=Dn,E=Dn.$vnode;while(E&&E.parent)C=E.context,E=E.parent;var x=!C._isMounted||!e.isRootInsert;if(!x||O||""===O){var S=x&&d?d:l,I=x&&p?p:h,D=x&&f?f:u,P=x&&v||_,j=x&&"function"===typeof O?O:g,R=x&&A||b,L=x&&w||y,M=m(c(T)?T.enter:T);0;var N=!1!==a&&!te,B=Wr(j),z=n._enterCb=F((function(){N&&(Nr(n,D),Nr(n,I)),z.cancelled?(N&&Nr(n,S),L&&L(n)):R&&R(n),n._enterCb=null}));e.data.show||Ot(e,"insert",(function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),j&&j(n,z)})),P&&P(n),N&&(Mr(n,S),Mr(n,I),Lr((function(){Nr(n,S),z.cancelled||(Mr(n,D),B||(Gr(M)?setTimeout(z,M):Br(n,s,z)))}))),e.data.show&&(t&&t(),j&&j(n,z)),N||B||z()}}}function Hr(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Tr(e.data.transition);if(i(r)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var a=r.css,s=r.type,l=r.leaveClass,u=r.leaveToClass,h=r.leaveActiveClass,d=r.beforeLeave,f=r.leave,p=r.afterLeave,_=r.leaveCancelled,g=r.delayLeave,b=r.duration,y=!1!==a&&!te,v=Wr(f),O=m(c(b)?b.leave:b);0;var A=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(Nr(n,u),Nr(n,h)),A.cancelled?(y&&Nr(n,l),_&&_(n)):(t(),p&&p(n)),n._leaveCb=null}));g?g(w):w()}function w(){A.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),y&&(Mr(n,l),Mr(n,h),Lr((function(){Nr(n,l),A.cancelled||(Mr(n,u),v||(Gr(O)?setTimeout(A,O):Br(n,s,A)))}))),f&&f(n,A),y||v||A())}}function Gr(e){return"number"===typeof e&&!isNaN(e)}function Wr(e){if(i(e))return!1;var t=e.fns;return o(t)?Wr(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function qr(e,t){!0!==t.data.show&&Vr(t)}var Yr=$?{create:qr,activate:qr,remove:function(e,t){!0!==e.data.show?Hr(e,t):t()}}:{},Xr=[Go,Yo,ir,cr,vr,Yr],Kr=Xr.concat(ko),$r=jo({nodeOps:To,modules:Kr});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&oa(e,"input")}));var Jr={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Ot(n,"postpatch",(function(){Jr.componentUpdated(e,t,n)})):Qr(e,t,n.context),e._vOptions=[].map.call(e.options,ta)):("textarea"===n.tag||lo(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",na),e.addEventListener("compositionend",ia),e.addEventListener("change",ia),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Qr(e,t,n.context);var i=e._vOptions,o=e._vOptions=[].map.call(e.options,ta);if(o.some((function(e,t){return!N(e,i[t])}))){var r=e.multiple?t.value.some((function(e){return ea(e,o)})):t.value!==t.oldValue&&ea(t.value,o);r&&oa(e,"change")}}}};function Qr(e,t,n){Zr(e,t,n),(ee||ne)&&setTimeout((function(){Zr(e,t,n)}),0)}function Zr(e,t,n){var i=t.value,o=e.multiple;if(!o||Array.isArray(i)){for(var r,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],o)r=B(i,ta(a))>-1,a.selected!==r&&(a.selected=r);else if(N(ta(a),i))return void(e.selectedIndex!==s&&(e.selectedIndex=s));o||(e.selectedIndex=-1)}}function ea(e,t){return t.every((function(t){return!N(t,e)}))}function ta(e){return"_value"in e?e._value:e.value}function na(e){e.target.composing=!0}function ia(e){e.target.composing&&(e.target.composing=!1,oa(e.target,"input"))}function oa(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function ra(e){return!e.componentInstance||e.data&&e.data.transition?e:ra(e.componentInstance._vnode)}var aa={bind:function(e,t,n){var i=t.value;n=ra(n);var o=n.data&&n.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&o?(n.data.show=!0,Vr(n,(function(){e.style.display=r}))):e.style.display=i?r:"none"},update:function(e,t,n){var i=t.value,o=t.oldValue;if(!i!==!o){n=ra(n);var r=n.data&&n.data.transition;r?(n.data.show=!0,i?Vr(n,(function(){e.style.display=e.__vOriginalDisplay})):Hr(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,o){o||(e.style.display=e.__vOriginalDisplay)}},sa={model:Jr,show:aa},ca={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function la(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?la(wn(t.children)):e}function ua(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var o=n._parentListeners;for(var r in o)t[w(r)]=o[r];return t}function ha(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function da(e){while(e=e.parent)if(e.data.transition)return!0}function fa(e,t){return t.key===e.key&&t.tag===e.tag}var pa=function(e){return e.tag||An(e)},ma=function(e){return"show"===e.name},_a={name:"transition",props:ca,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(pa),n.length)){0;var i=this.mode;0;var o=n[0];if(da(this.$vnode))return o;var r=la(o);if(!r)return o;if(this._leaving)return ha(e,o);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:s(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var c=(r.data||(r.data={})).transition=ua(this),l=this._vnode,u=la(l);if(r.data.directives&&r.data.directives.some(ma)&&(r.data.show=!0),u&&u.data&&!fa(r,u)&&!An(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=P({},c);if("out-in"===i)return this._leaving=!0,Ot(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),ha(e,o);if("in-out"===i){if(An(r))return l;var d,f=function(){d()};Ot(c,"afterEnter",f),Ot(c,"enterCancelled",f),Ot(h,"delayLeave",(function(e){d=e}))}}return o}}},ga=P({tag:String,moveClass:String},ca);delete ga.mode;var ba={props:ga,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var o=Pn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,o(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,o=this.$slots.default||[],r=this.children=[],a=ua(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))r.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(i){for(var l=[],u=[],h=0;h<i.length;h++){var d=i[h];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?l.push(d):u.push(d)}this.kept=e(t,null,l),this.removed=u}return e(t,null,r)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ya),e.forEach(va),e.forEach(Oa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;Mr(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Dr,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Dr,e),n._moveCb=null,Nr(n,t))})}})))},methods:{hasMove:function(e,t){if(!Er)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){wr(n,e)})),Ar(n,t),n.style.display="none",this.$el.appendChild(n);var i=zr(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function ya(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function va(e){e.data.newPos=e.elm.getBoundingClientRect()}function Oa(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,o=t.top-n.top;if(i||o){e.data.moved=!0;var r=e.elm.style;r.transform=r.WebkitTransform="translate("+i+"px,"+o+"px)",r.transitionDuration="0s"}}var Aa={Transition:_a,TransitionGroup:ba};wi.config.mustUseProp=ki,wi.config.isReservedTag=ro,wi.config.isReservedAttr=Fi,wi.config.getTagNamespace=ao,wi.config.isUnknownElement=co,P(wi.options.directives,sa),P(wi.options.components,Aa),wi.prototype.__patch__=$?$r:R,wi.prototype.$mount=function(e,t){return e=e&&$?uo(e):void 0,Ln(this,e,t)},$&&setTimeout((function(){V.devtools&&le&&le.emit("init",wi)}),0),t["a"]=wi}).call(this,n("c8ba"))},"2bb9":function(e,t,n){"use strict";var i=n("535a"),o=n("2f63");function r(e,t,n){n=Object(i["a"])(n,!1);const a={},s=Object(o["a"])(e),c=Object(o["a"])(t);let l,u,h;if(s)for(l in e)e.hasOwnProperty(l)&&(u=e[l],c&&n&&"object"===typeof u&&t.hasOwnProperty(l)?(h=t[l],a[l]="object"===typeof h?r(u,h,n):u):a[l]=u);if(c)for(l in t)t.hasOwnProperty(l)&&!a.hasOwnProperty(l)&&(h=t[l],a[l]=h);return a}t["a"]=r},"2cf4":function(e,t,n){var i,o,r,a=n("da84"),s=n("d039"),c=n("c6b6"),l=n("0366"),u=n("1be4"),h=n("cc12"),d=n("1cdc"),f=a.location,p=a.setImmediate,m=a.clearImmediate,_=a.process,g=a.MessageChannel,b=a.Dispatch,y=0,v={},O="onreadystatechange",A=function(e){if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},w=function(e){return function(){A(e)}},T=function(e){A(e.data)},C=function(e){a.postMessage(e+"",f.protocol+"//"+f.host)};p&&m||(p=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return v[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},m=function(e){delete v[e]},"process"==c(_)?i=function(e){_.nextTick(w(e))}:b&&b.now?i=function(e){b.now(w(e))}:g&&!d?(o=new g,r=o.port2,o.port1.onmessage=T,i=l(r.postMessage,r,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(C)?i=O in h("script")?function(e){u.appendChild(h("script"))[O]=function(){u.removeChild(this),A(e)}}:function(e){setTimeout(w(e),0)}:(i=C,a.addEventListener("message",T,!1))),e.exports={set:p,clear:m}},"2d00":function(e,t,n){var i,o,r=n("da84"),a=n("342f"),s=r.process,c=s&&s.versions,l=c&&c.v8;l?(i=l.split("."),o=i[0]+i[1]):a&&(i=a.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/),i&&(o=i[1]))),e.exports=o&&+o},"2f62":function(e,t,n){"use strict";(function(e){
/**
 * vuex v3.1.3
 * (c) 2020 Evan You
 * @license MIT
 */
function i(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:i});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,n.call(this,e)}}function i(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}n.d(t,"b",(function(){return P}));var o="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},r=o.__VUE_DEVTOOLS_GLOBAL_HOOK__;function a(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)})))}function s(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function c(e){return null!==e&&"object"===typeof e}function l(e){return e&&"function"===typeof e.then}function u(e,t){return function(){return e(t)}}var h=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},d={namespaced:{configurable:!0}};d.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(e,t){this._children[e]=t},h.prototype.removeChild=function(e){delete this._children[e]},h.prototype.getChild=function(e){return this._children[e]},h.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},h.prototype.forEachChild=function(e){s(this._children,e)},h.prototype.forEachGetter=function(e){this._rawModule.getters&&s(this._rawModule.getters,e)},h.prototype.forEachAction=function(e){this._rawModule.actions&&s(this._rawModule.actions,e)},h.prototype.forEachMutation=function(e){this._rawModule.mutations&&s(this._rawModule.mutations,e)},Object.defineProperties(h.prototype,d);var f=function(e){this.register([],e,!1)};function p(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;p(e.concat(i),t.getChild(i),n.modules[i])}}f.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},f.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},f.prototype.update=function(e){p([],this.root,e)},f.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var o=new h(t,n);if(0===e.length)this.root=o;else{var r=this.get(e.slice(0,-1));r.addChild(e[e.length-1],o)}t.modules&&s(t.modules,(function(t,o){i.register(e.concat(o),t,n)}))},f.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var m;var _=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&D(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var o=this,r=this,s=r.dispatch,c=r.commit;this.dispatch=function(e,t){return s.call(o,e,t)},this.commit=function(e,t,n){return c.call(o,e,t,n)},this.strict=i;var l=this._modules.root.state;O(this,l,[],this._modules.root),v(this,l),n.forEach((function(e){return e(t)}));var u=void 0!==e.devtools?e.devtools:m.config.devtools;u&&a(this)},g={state:{configurable:!0}};function b(e,t){return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function y(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;O(e,n,[],e._modules.root,!0),v(e,n,t)}function v(e,t,n){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,r={};s(o,(function(t,n){r[n]=u(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var a=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:r}),m.config.silent=a,e.strict&&x(e),i&&(n&&e._withCommit((function(){i._data.$$state=null})),m.nextTick((function(){return i.$destroy()})))}function O(e,t,n,i,o){var r=!n.length,a=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=i),!r&&!o){var s=S(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){m.set(s,c,i.state)}))}var l=i.context=A(e,a,n);i.forEachMutation((function(t,n){var i=a+n;T(e,i,t,l)})),i.forEachAction((function(t,n){var i=t.root?n:a+n,o=t.handler||t;C(e,i,o,l)})),i.forEachGetter((function(t,n){var i=a+n;E(e,i,t,l)})),i.forEachChild((function(i,r){O(e,t,n.concat(r),i,o)}))}function A(e,t,n){var i=""===t,o={dispatch:i?e.dispatch:function(n,i,o){var r=I(n,i,o),a=r.payload,s=r.options,c=r.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:i?e.commit:function(n,i,o){var r=I(n,i,o),a=r.payload,s=r.options,c=r.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(o,{getters:{get:i?function(){return e.getters}:function(){return w(e,t)}},state:{get:function(){return S(e.state,n)}}}),o}function w(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,i)===t){var r=o.slice(i);Object.defineProperty(n,r,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function T(e,t,n,i){var o=e._mutations[t]||(e._mutations[t]=[]);o.push((function(t){n.call(e,i.state,t)}))}function C(e,t,n,i){var o=e._actions[t]||(e._actions[t]=[]);o.push((function(t){var o=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return l(o)||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}function E(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function x(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function S(e,t){return t.reduce((function(e,t){return e[t]}),e)}function I(e,t,n){return c(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function D(e){m&&e===m||(m=e,i(m))}g.state.get=function(){return this._vm._data.$$state},g.state.set=function(e){0},_.prototype.commit=function(e,t,n){var i=this,o=I(e,t,n),r=o.type,a=o.payload,s=(o.options,{type:r,payload:a}),c=this._mutations[r];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,i.state)})))},_.prototype.dispatch=function(e,t){var n=this,i=I(e,t),o=i.type,r=i.payload,a={type:o,payload:r},s=this._actions[o];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(l){0}var c=s.length>1?Promise.all(s.map((function(e){return e(r)}))):s[0](r);return c.then((function(e){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(l){0}return e}))}},_.prototype.subscribe=function(e){return b(e,this._subscribers)},_.prototype.subscribeAction=function(e){var t="function"===typeof e?{before:e}:e;return b(t,this._actionSubscribers)},_.prototype.watch=function(e,t,n){var i=this;return this._watcherVM.$watch((function(){return e(i.state,i.getters)}),t,n)},_.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},_.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),O(this,this.state,e,this._modules.get(e),n.preserveState),v(this,this.state)},_.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=S(t.state,e.slice(0,-1));m.delete(n,e[e.length-1])})),y(this)},_.prototype.hotUpdate=function(e){this._modules.update(e),y(this,!0)},_.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(_.prototype,g);var P=F((function(e,t){var n={};return N(t).forEach((function(t){var i=t.key,o=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=z(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof o?o.call(this,t,n):t[o]},n[i].vuex=!0})),n})),j=F((function(e,t){var n={};return N(t).forEach((function(t){var i=t.key,o=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var r=z(this.$store,"mapMutations",e);if(!r)return;i=r.context.commit}return"function"===typeof o?o.apply(this,[i].concat(t)):i.apply(this.$store,[o].concat(t))}})),n})),R=F((function(e,t){var n={};return N(t).forEach((function(t){var i=t.key,o=t.val;o=e+o,n[i]=function(){if(!e||z(this.$store,"mapGetters",e))return this.$store.getters[o]},n[i].vuex=!0})),n})),L=F((function(e,t){var n={};return N(t).forEach((function(t){var i=t.key,o=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var r=z(this.$store,"mapActions",e);if(!r)return;i=r.context.dispatch}return"function"===typeof o?o.apply(this,[i].concat(t)):i.apply(this.$store,[o].concat(t))}})),n})),M=function(e){return{mapState:P.bind(null,e),mapGetters:R.bind(null,e),mapMutations:j.bind(null,e),mapActions:L.bind(null,e)}};function N(e){return B(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function B(e){return Array.isArray(e)||c(e)}function F(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function z(e,t,n){var i=e._modulesNamespaceMap[n];return i}var k={Store:_,install:D,version:"3.1.3",mapState:P,mapMutations:j,mapGetters:R,mapActions:L,createNamespacedHelpers:M};t["a"]=k}).call(this,n("c8ba"))},"2f63":function(e,t,n){"use strict";function i(e){return void 0!==e&&null!==e}t["a"]=i},3410:function(e,t,n){var i=n("23e7"),o=n("d039"),r=n("7b0b"),a=n("e163"),s=n("e177"),c=o((function(){a(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(e){return a(r(e))}})},"342f":function(e,t,n){var i=n("d066");e.exports=i("navigator","userAgent")||""},"35a1":function(e,t,n){var i=n("f5df"),o=n("3f8c"),r=n("b622"),a=r("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[i(e)]}},"37e8":function(e,t,n){var i=n("83ab"),o=n("9bf2"),r=n("825a"),a=n("df75");e.exports=i?Object.defineProperties:function(e,t){r(e);var n,i=a(t),s=i.length,c=0;while(s>c)o.f(e,n=i[c++],t[n]);return e}},"3bbe":function(e,t,n){var i=n("861d");e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3ca3":function(e,t,n){"use strict";var i=n("6547").charAt,o=n("69f3"),r=n("7dd0"),a="String Iterator",s=o.set,c=o.getterFor(a);r(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=i(n,o),t.index+=e.length,{value:e,done:!1})}))},"3e44":function(e,t,n){"use strict";var i=n("c909"),o=n.n(i),r=n("2f63"),a=n("4f04");const s={};let c={};function l(e){const t=new o.a(e);t.normalize();let n=t.authority();if(0!==n.length){if(t.authority(n),-1!==n.indexOf("@")){const e=n.split("@");n=e[1]}if(-1===n.indexOf(":")){let e=t.scheme();if(0===e.length&&(e=window.location.protocol,e=e.substring(0,e.length-1)),"http"===e)n+=":80";else{if("https"!==e)return;n+=":443"}}return n}}s.add=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("host is required.");if(!Object(r["a"])(t)||t<=0)throw new a["a"]("port is required to be greater than 0.");const n=`${e.toLowerCase()}:${t}`;Object(r["a"])(c[n])||(c[n]=!0)},s.remove=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("host is required.");if(!Object(r["a"])(t)||t<=0)throw new a["a"]("port is required to be greater than 0.");const n=`${e.toLowerCase()}:${t}`;Object(r["a"])(c[n])&&delete c[n]},s.contains=function(e){if(!Object(r["a"])(e))throw new a["a"]("url is required.");const t=l(e);return!(!Object(r["a"])(t)||!Object(r["a"])(c[t]))},s.clear=function(){c={}},t["a"]=s},"3f8c":function(e,t){e.exports={}},"408a":function(e,t,n){var i=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},"428f":function(e,t,n){var i=n("da84");e.exports=i},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,i="/";t.cwd=function(){return i},t.chdir=function(t){e||(e=n("df7c")),i=e.resolve(t,i)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var i=n("d039"),o=n("c6b6"),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?r.call(e,""):Object(e)}:Object},"44d2":function(e,t,n){var i=n("b622"),o=n("7c73"),r=n("9bf2"),a=i("unscopables"),s=Array.prototype;void 0==s[a]&&r.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},"44de":function(e,t,n){var i=n("da84");e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},4840:function(e,t,n){var i=n("825a"),o=n("1c0b"),r=n("b622"),a=r("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||void 0==(n=i(r)[a])?t:o(n)}},4930:function(e,t,n){var i=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},"4ae1":function(e,t,n){var i=n("23e7"),o=n("d066"),r=n("1c0b"),a=n("825a"),s=n("861d"),c=n("7c73"),l=n("0538"),u=n("d039"),h=o("Reflect","construct"),d=u((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),f=!u((function(){h((function(){}))})),p=d||f;i({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){r(e),a(t);var n=arguments.length<3?e:r(arguments[2]);if(f&&!d)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var o=n.prototype,u=c(s(o)?o:Object.prototype),p=Function.apply.call(e,u,t);return s(p)?p:u}})},"4ca2":function(e,t,n){"use strict";var i=n("2f63"),o=n("fa2f");function r(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,"string"===typeof this.responseHeaders&&(this.responseHeaders=Object(o["a"])(this.responseHeaders))}r.prototype.toString=function(){let e="Request has failed.";return Object(i["a"])(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e},t["a"]=r},"4d64":function(e,t,n){var i=n("fc6a"),o=n("50c4"),r=n("23cb"),a=function(e){return function(t,n,a){var s,c=i(t),l=o(c.length),u=r(a,l);if(e&&n!=n){while(l>u)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(e,t,n){"use strict";var i=n("23e7"),o=n("b727").filter,r=n("1dde"),a=n("ae40"),s=r("filter"),c=a("filter");i({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4ec9":function(e,t,n){"use strict";var i=n("6d61"),o=n("6566");e.exports=i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},"4f04":function(e,t,n){"use strict";var i=n("2f63");function o(e){let t;this.name="DeveloperError",this.message=e;try{throw new Error}catch(n){t=n.stack}this.stack=t}Object(i["a"])(Object.create)&&(o.prototype=Object.create(Error.prototype),o.prototype.constructor=o),o.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return Object(i["a"])(this.stack)&&(e+=`\n${this.stack.toString()}`),e},o.throwInstantiationError=function(){throw new o("This function defines an interface and should not be called directly.")},t["a"]=o},"50c4":function(e,t,n){var i=n("a691"),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},5135:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"535a":function(e,t,n){"use strict";function i(e,t){return void 0!==e&&null!==e?e:t}i.EMPTY_OBJECT=Object.freeze({}),t["a"]=i},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5664:function(e,t,n){"use strict";function i(e,t,n){n=n||2;var i,r,s,c,l,u,d,f=t&&t.length,p=f?t[0]*n:e.length,m=o(e,0,p,n,!0),_=[];if(!m||m.next===m.prev)return _;if(f&&(m=h(e,t,m,n)),e.length>80*n){i=s=e[0],r=c=e[1];for(var g=n;g<p;g+=n)l=e[g],u=e[g+1],l<i&&(i=l),u<r&&(r=u),l>s&&(s=l),u>c&&(c=u);d=Math.max(s-i,c-r),d=0!==d?32767/d:0}return a(m,_,n,i,r,d,0),_}function o(e,t,n,i,o){var r,a;if(o===L(e,t,n,i)>0)for(r=t;r<n;r+=i)a=P(r,e[r],e[r+1],a);else for(r=n-i;r>=t;r-=i)a=P(r,e[r],e[r+1],a);return a&&w(a,a.next)&&(j(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!w(i,i.next)&&0!==A(i.prev,i,i.next))i=i.next;else{if(j(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function a(e,t,n,i,o,h,d){if(e){!d&&h&&_(e,i,o,h);var f,p,m=e;while(e.prev!==e.next)if(f=e.prev,p=e.next,h?c(e,i,o,h):s(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(p.i/n|0),j(e),e=p.next,m=p.next;else if(e=p,e===m){d?1===d?(e=l(r(e),t,n),a(e,t,n,i,o,h,2)):2===d&&u(e,t,n,i,o,h):a(r(e),t,n,i,o,h,1);break}}}function s(e){var t=e.prev,n=e,i=e.next;if(A(t,n,i)>=0)return!1;var o=t.x,r=n.x,a=i.x,s=t.y,c=n.y,l=i.y,u=o<r?o<a?o:a:r<a?r:a,h=s<c?s<l?s:l:c<l?c:l,d=o>r?o>a?o:a:r>a?r:a,f=s>c?s>l?s:l:c>l?c:l,p=i.next;while(p!==t){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&v(o,s,r,c,a,l,p.x,p.y)&&A(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function c(e,t,n,i){var o=e.prev,r=e,a=e.next;if(A(o,r,a)>=0)return!1;var s=o.x,c=r.x,l=a.x,u=o.y,h=r.y,d=a.y,f=s<c?s<l?s:l:c<l?c:l,p=u<h?u<d?u:d:h<d?h:d,m=s>c?s>l?s:l:c>l?c:l,_=u>h?u>d?u:d:h>d?h:d,g=b(f,p,t,n,i),y=b(m,_,t,n,i),O=e.prevZ,w=e.nextZ;while(O&&O.z>=g&&w&&w.z<=y){if(O.x>=f&&O.x<=m&&O.y>=p&&O.y<=_&&O!==o&&O!==a&&v(s,u,c,h,l,d,O.x,O.y)&&A(O.prev,O,O.next)>=0)return!1;if(O=O.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=_&&w!==o&&w!==a&&v(s,u,c,h,l,d,w.x,w.y)&&A(w.prev,w,w.next)>=0)return!1;w=w.nextZ}while(O&&O.z>=g){if(O.x>=f&&O.x<=m&&O.y>=p&&O.y<=_&&O!==o&&O!==a&&v(s,u,c,h,l,d,O.x,O.y)&&A(O.prev,O,O.next)>=0)return!1;O=O.prevZ}while(w&&w.z<=y){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=_&&w!==o&&w!==a&&v(s,u,c,h,l,d,w.x,w.y)&&A(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function l(e,t,n){var i=e;do{var o=i.prev,a=i.next.next;!w(o,a)&&T(o,i,i.next,a)&&S(o,a)&&S(a,o)&&(t.push(o.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),j(i),j(i.next),i=e=a),i=i.next}while(i!==e);return r(i)}function u(e,t,n,i,o,s){var c=e;do{var l=c.next.next;while(l!==c.prev){if(c.i!==l.i&&O(c,l)){var u=D(c,l);return c=r(c,c.next),u=r(u,u.next),a(c,t,n,i,o,s,0),void a(u,t,n,i,o,s,0)}l=l.next}c=c.next}while(c!==e)}function h(e,t,n,i){var r,a,s,c,l,u=[];for(r=0,a=t.length;r<a;r++)s=t[r]*i,c=r<a-1?t[r+1]*i:e.length,l=o(e,s,c,i,!1),l===l.next&&(l.steiner=!0),u.push(y(l));for(u.sort(d),r=0;r<u.length;r++)n=f(u[r],n);return n}function d(e,t){return e.x-t.x}function f(e,t){var n=p(e,t);if(!n)return t;var i=D(n,e);return r(i,i.next),r(n,n.next)}function p(e,t){var n,i=t,o=e.x,r=e.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=o&&s>a&&(a=s,n=i.x<i.next.x?i:i.next,s===o))return n}i=i.next}while(i!==t);if(!n)return null;var c,l=n,u=n.x,h=n.y,d=1/0;i=n;do{o>=i.x&&i.x>=u&&o!==i.x&&v(r<h?o:a,r,u,h,r<h?a:o,r,i.x,i.y)&&(c=Math.abs(r-i.y)/(o-i.x),S(i,e)&&(c<d||c===d&&(i.x>n.x||i.x===n.x&&m(n,i)))&&(n=i,d=c)),i=i.next}while(i!==l);return n}function m(e,t){return A(e.prev,e,t.prev)<0&&A(t.next,e,e.next)<0}function _(e,t,n,i){var o=e;do{0===o.z&&(o.z=b(o.x,o.y,t,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,g(o)}function g(e){var t,n,i,o,r,a,s,c,l=1;do{n=e,e=null,r=null,a=0;while(n){for(a++,i=n,s=0,t=0;t<l;t++)if(s++,i=i.nextZ,!i)break;c=l;while(s>0||c>0&&i)0!==s&&(0===c||!i||n.z<=i.z)?(o=n,n=n.nextZ,s--):(o=i,i=i.nextZ,c--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;n=i}r.nextZ=null,l*=2}while(a>1);return e}function b(e,t,n,i,o){return e=(e-n)*o|0,t=(t-i)*o|0,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,i,o,r,a,s){return(o-a)*(t-s)>=(e-a)*(r-s)&&(e-a)*(i-s)>=(n-a)*(t-s)&&(n-a)*(r-s)>=(o-a)*(i-s)}function O(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!x(e,t)&&(S(e,t)&&S(t,e)&&I(e,t)&&(A(e.prev,e,t.prev)||A(e,t.prev,t))||w(e,t)&&A(e.prev,e,e.next)>0&&A(t.prev,t,t.next)>0)}function A(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,n,i){var o=E(A(e,t,n)),r=E(A(e,t,i)),a=E(A(n,i,e)),s=E(A(n,i,t));return o!==r&&a!==s||(!(0!==o||!C(e,n,t))||(!(0!==r||!C(e,i,t))||(!(0!==a||!C(n,e,i))||!(0!==s||!C(n,t,i)))))}function C(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function E(e){return e>0?1:e<0?-1:0}function x(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&T(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function S(e,t){return A(e.prev,e,e.next)<0?A(e,t,e.next)>=0&&A(e,e.prev,t)>=0:A(e,t,e.prev)<0||A(e,e.next,t)<0}function I(e,t){var n=e,i=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do{n.y>r!==n.next.y>r&&n.next.y!==n.y&&o<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}function D(e,t){var n=new R(e.i,e.x,e.y),i=new R(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function P(e,t,n,i){var o=new R(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function j(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(e,t,n,i){for(var o=0,r=t,a=n-i;r<n;r+=i)o+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return o}e.exports=i,e.exports.default=i,i.deviation=function(e,t,n,i){var o=t&&t.length,r=o?t[0]*n:e.length,a=Math.abs(L(e,0,r,n));if(o)for(var s=0,c=t.length;s<c;s++){var l=t[s]*n,u=s<c-1?t[s+1]*n:e.length;a-=Math.abs(L(e,l,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,f=i[s+1]*n,p=i[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},i.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,o=0;o<e.length;o++){for(var r=0;r<e[o].length;r++)for(var a=0;a<t;a++)n.vertices.push(e[o][r][a]);o>0&&(i+=e[o-1].length,n.holes.push(i))}return n}},5692:function(e,t,n){var i=n("c430"),o=n("c6cd");(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var i=n("d066"),o=n("241c"),r=n("7418"),a=n("825a");e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=r.f;return n?t.concat(n(e)):t}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"60da":function(e,t,n){"use strict";var i=n("83ab"),o=n("d039"),r=n("df75"),a=n("7418"),s=n("d1e7"),c=n("7b0b"),l=n("44ad"),u=Object.assign,h=Object.defineProperty;e.exports=!u||o((function(){if(i&&1!==u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||r(u({},t)).join("")!=o}))?function(e,t){var n=c(e),o=arguments.length,u=1,h=a.f,d=s.f;while(o>u){var f,p=l(arguments[u++]),m=h?r(p).concat(h(p)):r(p),_=m.length,g=0;while(_>g)f=m[g++],i&&!d.call(p,f)||(n[f]=p[f])}return n}:u},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"63c5":function(e,t,n){(function(e,i){var o;/*! https://mths.be/punycode v1.4.0 by @mathias */(function(r){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,l=36,u=1,h=26,d=38,f=700,p=72,m=128,_="-",g=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=l-u,A=Math.floor,w=String.fromCharCode;function T(e){throw new RangeError(v[e])}function C(e,t){var n=e.length,i=[];while(n--)i[n]=t(e[n]);return i}function E(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(y,".");var o=e.split("."),r=C(o,t).join(".");return i+r}function x(e){var t,n,i=[],o=0,r=e.length;while(o<r)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<r?(n=e.charCodeAt(o++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--)):i.push(t);return i}function S(e){return C(e,(function(e){var t="";return e>65535&&(e-=65536,t+=w(e>>>10&1023|55296),e=56320|1023&e),t+=w(e),t})).join("")}function I(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,n){var i=0;for(e=n?A(e/f):e>>1,e+=A(e/t);e>O*h>>1;i+=l)e=A(e/O);return A(i+(O+1)*e/(e+d))}function j(e){var t,n,i,o,r,a,s,d,f,g,b=[],y=e.length,v=0,O=m,w=p;for(n=e.lastIndexOf(_),n<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&T("not-basic"),b.push(e.charCodeAt(i));for(o=n>0?n+1:0;o<y;){for(r=v,a=1,s=l;;s+=l){if(o>=y&&T("invalid-input"),d=I(e.charCodeAt(o++)),(d>=l||d>A((c-v)/a))&&T("overflow"),v+=d*a,f=s<=w?u:s>=w+h?h:s-w,d<f)break;g=l-f,a>A(c/g)&&T("overflow"),a*=g}t=b.length+1,w=P(v-r,t,0==r),A(v/t)>c-O&&T("overflow"),O+=A(v/t),v%=t,b.splice(v++,0,O)}return S(b)}function R(e){var t,n,i,o,r,a,s,d,f,g,b,y,v,O,C,E=[];for(e=x(e),y=e.length,t=m,n=0,r=p,a=0;a<y;++a)b=e[a],b<128&&E.push(w(b));i=o=E.length,o&&E.push(_);while(i<y){for(s=c,a=0;a<y;++a)b=e[a],b>=t&&b<s&&(s=b);for(v=i+1,s-t>A((c-n)/v)&&T("overflow"),n+=(s-t)*v,t=s,a=0;a<y;++a)if(b=e[a],b<t&&++n>c&&T("overflow"),b==t){for(d=n,f=l;;f+=l){if(g=f<=r?u:f>=r+h?h:f-r,d<g)break;C=d-g,O=l-g,E.push(w(D(g+C%O,0))),d=A(C/O)}E.push(w(D(d,0))),r=P(n,v,i==o),n=0,++i}++n,++t}return E.join("")}function L(e){return E(e,(function(e){return g.test(e)?j(e.slice(4).toLowerCase()):e}))}function M(e){return E(e,(function(e){return b.test(e)?"xn--"+R(e):e}))}s={version:"1.3.2",ucs2:{decode:x,encode:S},decode:j,encode:R,toASCII:M,toUnicode:L},o=function(){return s}.call(t,n,t,e),void 0===o||(e.exports=o)})()}).call(this,n("62e4")(e),n("c8ba"))},6547:function(e,t,n){var i=n("a691"),o=n("1d80"),r=function(e){return function(t,n){var r,a,s=String(o(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):r:e?s.slice(c,c+2):a-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},6566:function(e,t,n){"use strict";var i=n("9bf2").f,o=n("7c73"),r=n("e2cc"),a=n("0366"),s=n("19aa"),c=n("2266"),l=n("7dd0"),u=n("2626"),h=n("83ab"),d=n("f183").fastKey,f=n("69f3"),p=f.set,m=f.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,i){s(e,u,t),p(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),h||(e.size=0),void 0!=i&&c(i,e[l],e,n)})),f=m(t),_=function(e,t,n){var i,o,r=f(e),a=g(e,t);return a?a.value=n:(r.last=a={index:o=d(t,!0),key:t,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=a),i&&(i.next=a),h?r.size++:e.size++,"F"!==o&&(r.index[o]=a)),e},g=function(e,t){var n,i=f(e),o=d(t);if("F"!==o)return i.index[o];for(n=i.first;n;n=n.next)if(n.key==t)return n};return r(u.prototype,{clear:function(){var e=this,t=f(e),n=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;t.first=t.last=void 0,h?t.size=0:e.size=0},delete:function(e){var t=this,n=f(t),i=g(t,e);if(i){var o=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=o),o&&(o.previous=r),n.first==i&&(n.first=o),n.last==i&&(n.last=r),h?n.size--:t.size--}return!!i},forEach:function(e){var t,n=f(this),i=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),r(u.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return _(this,0===e?0:e,t)}}:{add:function(e){return _(this,e=0===e?0:e,e)}}),h&&i(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(e,t,n){var i=t+" Iterator",o=m(t),r=m(i);l(e,t,(function(e,t){p(this,{type:i,target:e,state:o(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},"65f0":function(e,t,n){var i=n("861d"),o=n("e8b5"),r=n("b622"),a=r("species");e.exports=function(e,t){var n;return o(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"67bc":function(e,t,n){const{webm:i,mp4:o}=n("1994"),r="undefined"!==typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream;class a{constructor(){r?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("muted",""),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",i),this._addSourceToVideo(this.noSleepVideo,"mp4",o),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,t,n){var i=document.createElement("source");i.src=n,i.type=`video/${t}`,e.appendChild(i)}enable(){r?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3)):this.noSleepVideo.play()}disable(){r?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}e.exports=a},"69f3":function(e,t,n){var i,o,r,a=n("7f9a"),s=n("da84"),c=n("861d"),l=n("9112"),u=n("5135"),h=n("f772"),d=n("d012"),f=s.WeakMap,p=function(e){return r(e)?o(e):i(e,{})},m=function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(a){var _=new f,g=_.get,b=_.has,y=_.set;i=function(e,t){return y.call(_,e,t),t},o=function(e){return g.call(_,e)||{}},r=function(e){return b.call(_,e)}}else{var v=h("state");d[v]=!0,i=function(e,t){return l(e,v,t),t},o=function(e){return u(e,v)?e[v]:{}},r=function(e){return u(e,v)}}e.exports={set:i,get:o,has:r,enforce:p,getterFor:m}},"6a30":function(e,t,n){"use strict";var i=n("d4da"),o=n("535a"),r=n("2f63");function a(e){i["a"].typeOf.object("options",e),i["a"].defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function s(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}Object.defineProperties(a.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("maximumLength",e,0);const t=this._length;if(e<t){const n=this._array;for(let i=e;i<t;++i)n[i]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),a.prototype.reserve=function(e){e=Object(o["a"])(e,this._length),this._array.length=e},a.prototype.heapify=function(e){e=Object(o["a"])(e,0);const t=this._length,n=this._comparator,i=this._array;let r=-1,a=!0;while(a){const o=2*(e+1),c=o-1;r=c<t&&n(i[c],i[e])<0?c:e,o<t&&n(i[o],i[r])<0&&(r=o),r!==e?(s(i,r,e),e=r):a=!1}},a.prototype.resort=function(){const e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},a.prototype.insert=function(e){i["a"].defined("element",e);const t=this._array,n=this._comparator,o=this._maximumLength;let a,c=this._length++;c<t.length?t[c]=e:t.push(e);while(0!==c){const e=Math.floor((c-1)/2);if(!(n(t[c],t[e])<0))break;s(t,c,e),c=e}return Object(r["a"])(o)&&this._length>o&&(a=t[o],this._length=o),a},a.prototype.pop=function(e){if(e=Object(o["a"])(e,0),0===this._length)return;i["a"].typeOf.number.lessThan("index",e,this._length);const t=this._array,n=t[e];return s(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n},t["a"]=a},"6d61":function(e,t,n){"use strict";var i=n("23e7"),o=n("da84"),r=n("94ca"),a=n("6eeb"),s=n("f183"),c=n("2266"),l=n("19aa"),u=n("861d"),h=n("d039"),d=n("1c7e"),f=n("d44e"),p=n("7156");e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),_=-1!==e.indexOf("Weak"),g=m?"set":"add",b=o[e],y=b&&b.prototype,v=b,O={},A=function(e){var t=y[e];a(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return _&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(r(e,"function"!=typeof b||!(_||y.forEach&&!h((function(){(new b).entries().next()})))))v=n.getConstructor(t,e,m,g),s.REQUIRED=!0;else if(r(e,!0)){var w=new v,T=w[g](_?{}:-0,1)!=w,C=h((function(){w.has(1)})),E=d((function(e){new b(e)})),x=!_&&h((function(){var e=new b,t=5;while(t--)e[g](t,t);return!e.has(-0)}));E||(v=t((function(t,n){l(t,v,e);var i=p(new b,t,v);return void 0!=n&&c(n,i[g],i,m),i})),v.prototype=y,y.constructor=v),(C||x)&&(A("delete"),A("has"),m&&A("get")),(x||T)&&A(g),_&&y.clear&&delete y.clear}return O[e]=v,i({global:!0,forced:v!=b},O),f(v,e),_||n.setStrong(v,e,m),v}},"6eeb":function(e,t,n){var i=n("da84"),o=n("9112"),r=n("5135"),a=n("ce4e"),s=n("8925"),c=n("69f3"),l=c.get,u=c.enforce,h=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,l=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||r(n,"name")||o(n,"name",t),u(n).source=h.join("string"==typeof t?t:"")),e!==i?(c?!d&&e[t]&&(l=!0):delete e[t],l?e[t]=n:o(e,t,n)):l?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},7156:function(e,t,n){var i=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var r,a;return o&&"function"==typeof(r=t.constructor)&&r!==n&&i(a=r.prototype)&&a!==n.prototype&&o(e,a),e}},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var i=n("428f"),o=n("5135"),r=n("e538"),a=n("9bf2").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});o(t,e)||a(t,e,{value:r.f(e)})}},"75b2":function(e,t,n){"use strict";var i=n("c909"),o=n.n(i),r=n("d4da"),a=n("535a"),s=n("9c35"),c=n("2f63"),l=n("21d7"),u=n("6a30"),h=n("96e8"),d=n("166e"),f=n("8a39");function p(e,t){return e.priority-t.priority}const m={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0};let _=20;const g=new u["a"]({comparator:p});g.maximumLength=_,g.reserve(_);const b=[];let y={};const v="undefined"!==typeof document?new o.a(document.location.href):new o.a,O=new l["a"];function A(){}function w(e){Object(c["a"])(e.priorityFunction)&&(e.priority=e.priorityFunction())}function T(e){return e.state===f["a"].UNISSUED&&(e.state=f["a"].ISSUED,e.deferred=Object(s["a"])()),e.deferred.promise}function C(e){return function(t){if(e.state===f["a"].CANCELLED)return;const n=e.deferred;--m.numberOfActiveRequests,--y[e.serverKey],O.raiseEvent(),e.state=f["a"].RECEIVED,e.deferred=void 0,n.resolve(t)}}function E(e){return function(t){e.state!==f["a"].CANCELLED&&(++m.numberOfFailedRequests,--m.numberOfActiveRequests,--y[e.serverKey],O.raiseEvent(t),e.state=f["a"].FAILED,e.deferred.reject(t))}}function x(e){const t=T(e);return e.state=f["a"].ACTIVE,b.push(e),++m.numberOfActiveRequests,++m.numberOfActiveRequestsEver,++y[e.serverKey],e.requestFunction().then(C(e)).catch(E(e)),t}function S(e){const t=e.state===f["a"].ACTIVE;if(e.state=f["a"].CANCELLED,++m.numberOfCancelledRequests,Object(c["a"])(e.deferred)){const t=e.deferred;e.deferred=void 0,t.reject()}t&&(--m.numberOfActiveRequests,--y[e.serverKey],++m.numberOfCancelledActiveRequests),Object(c["a"])(e.cancelFunction)&&e.cancelFunction()}function I(){A.debugShowStatistics&&(0===m.numberOfActiveRequests&&m.lastNumberOfActiveRequests>0&&(m.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${m.numberOfAttemptedRequests}`),m.numberOfAttemptedRequests=0),m.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${m.numberOfCancelledRequests}`),m.numberOfCancelledRequests=0),m.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${m.numberOfCancelledActiveRequests}`),m.numberOfCancelledActiveRequests=0),m.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${m.numberOfFailedRequests}`),m.numberOfFailedRequests=0)),m.lastNumberOfActiveRequests=m.numberOfActiveRequests)}A.maximumRequests=50,A.maximumRequestsPerServer=6,A.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},A.throttleRequests=!0,A.debugShowStatistics=!1,A.requestCompletedEvent=O,Object.defineProperties(A,{statistics:{get:function(){return m}},priorityHeapLength:{get:function(){return _},set:function(e){if(e<_)while(g.length>e){const e=g.pop();S(e)}_=e,g.maximumLength=e,g.reserve(e)}}}),A.serverHasOpenSlots=function(e,t){t=Object(a["a"])(t,1);const n=Object(a["a"])(A.requestsByServer[e],A.maximumRequestsPerServer),i=y[e]+t<=n;return i},A.heapHasOpenSlots=function(e){const t=g.length+e<=_;return t},A.update=function(){let e,t,n=0;const i=b.length;for(e=0;e<i;++e)t=b[e],t.cancelled&&S(t),t.state===f["a"].ACTIVE?n>0&&(b[e-n]=t):++n;b.length-=n;const o=g.internalArray,r=g.length;for(e=0;e<r;++e)w(o[e]);g.resort();const a=Math.max(A.maximumRequests-b.length,0);let s=0;while(s<a&&g.length>0)t=g.pop(),t.cancelled?S(t):!t.throttleByServer||A.serverHasOpenSlots(t.serverKey)?(x(t),++s):S(t);I()},A.getServerKey=function(e){r["a"].typeOf.string("url",e);let t=new o.a(e);""===t.scheme()&&(t=new o.a(e).absoluteTo(v),t.normalize());let n=t.authority();/:/.test(n)||(n=`${n}:${"https"===t.scheme()?"443":"80"}`);const i=y[n];return Object(c["a"])(i)||(y[n]=0),n},A.request=function(e){if(r["a"].typeOf.object("request",e),r["a"].typeOf.string("request.url",e.url),r["a"].typeOf.func("request.requestFunction",e.requestFunction),Object(d["a"])(e.url)||Object(h["a"])(e.url))return O.raiseEvent(),e.state=f["a"].RECEIVED,e.requestFunction();if(++m.numberOfAttemptedRequests,Object(c["a"])(e.serverKey)||(e.serverKey=A.getServerKey(e.url)),A.throttleRequests&&e.throttleByServer&&!A.serverHasOpenSlots(e.serverKey))return;if(!A.throttleRequests||!e.throttle)return x(e);if(b.length>=A.maximumRequests)return;w(e);const t=g.insert(e);if(Object(c["a"])(t)){if(t===e)return;S(t)}return T(e)},A.clearForSpecs=function(){while(g.length>0){const e=g.pop();S(e)}const e=b.length;for(let t=0;t<e;++t)S(b[t]);b.length=0,y={},m.numberOfAttemptedRequests=0,m.numberOfActiveRequests=0,m.numberOfCancelledRequests=0,m.numberOfCancelledActiveRequests=0,m.numberOfFailedRequests=0,m.numberOfActiveRequestsEver=0,m.lastNumberOfActiveRequests=0},A.numberOfActiveRequestsByServer=function(e){return y[e]},A.requestHeap=g,t["a"]=A},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,n){var i=n("1d80");e.exports=function(e){return Object(i(e))}},"7c73":function(e,t,n){var i,o=n("825a"),r=n("37e8"),a=n("7839"),s=n("d012"),c=n("1be4"),l=n("cc12"),u=n("f772"),h=">",d="<",f="prototype",p="script",m=u("IE_PROTO"),_=function(){},g=function(e){return d+p+h+e+d+"/"+p+h},b=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+p+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},v=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}v=i?b(i):y();var e=a.length;while(e--)delete v[f][a[e]];return v()};s[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(_[f]=o(e),n=new _,_[f]=null,n[m]=e):n=v(),void 0===t?n:r(n,t)}},"7dd0":function(e,t,n){"use strict";var i=n("23e7"),o=n("9ed3"),r=n("e163"),a=n("d2bb"),s=n("d44e"),c=n("9112"),l=n("6eeb"),u=n("b622"),h=n("c430"),d=n("3f8c"),f=n("ae93"),p=f.IteratorPrototype,m=f.BUGGY_SAFARI_ITERATORS,_=u("iterator"),g="keys",b="values",y="entries",v=function(){return this};e.exports=function(e,t,n,u,f,O,A){o(n,t,u);var w,T,C,E=function(e){if(e===f&&P)return P;if(!m&&e in I)return I[e];switch(e){case g:return function(){return new n(this,e)};case b:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this)}},x=t+" Iterator",S=!1,I=e.prototype,D=I[_]||I["@@iterator"]||f&&I[f],P=!m&&D||E(f),j="Array"==t&&I.entries||D;if(j&&(w=r(j.call(new e)),p!==Object.prototype&&w.next&&(h||r(w)===p||(a?a(w,p):"function"!=typeof w[_]&&c(w,_,v)),s(w,x,!0,!0),h&&(d[x]=v))),f==b&&D&&D.name!==b&&(S=!0,P=function(){return D.call(this)}),h&&!A||I[_]===P||c(I,_,P),d[t]=P,f)if(T={values:E(b),keys:O?P:E(g),entries:E(y)},A)for(C in T)!m&&!S&&C in I||l(I,C,T[C]);else i({target:t,proto:!0,forced:m||S},T);return T}},"7e84":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("131a"),n("3410");function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}},"7f9a":function(e,t,n){var i=n("da84"),o=n("8925"),r=i.WeakMap;e.exports="function"===typeof r&&/native code/.test(o(r))},"825a":function(e,t,n){var i=n("861d");e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,n){var i=n("d039");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,n){"use strict";var i=n("c04e"),o=n("9bf2"),r=n("5c6c");e.exports=function(e,t,n){var a=i(t);a in e?o.f(e,a,r(0,n)):e[a]=n}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8925:function(e,t,n){var i=n("c6cd"),o=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},"8a39":function(e,t,n){"use strict";const i={UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5};t["a"]=Object.freeze(i)},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.1.6
  * (c) 2020 Evan You
  * @license MIT
  */function i(e,t){0}function o(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function r(e,t){return t instanceof e||t&&(t.name===e.name||t._name===e._name)}function a(e,t){for(var n in t)e[n]=t[n];return e}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,i=t.children,o=t.parent,r=t.data;r.routerView=!0;var s=o.$createElement,l=n.name,u=o.$route,h=o._routerViewCache||(o._routerViewCache={}),d=0,f=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(f=!0),o=o.$parent}if(r.routerViewDepth=d,f){var m=h[l],_=m&&m.component;return _?(m.configProps&&c(_,r,m.route,m.configProps),s(_,r,i)):s()}var g=u.matched[d],b=g&&g.components[l];if(!g||!b)return h[l]=null,s();h[l]={component:b},r.registerRouteInstance=function(e,t){var n=g.instances[l];(t&&n!==e||!t&&n===e)&&(g.instances[l]=t)},(r.hook||(r.hook={})).prepatch=function(e,t){g.instances[l]=t.componentInstance},r.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==g.instances[l]&&(g.instances[l]=e.componentInstance)};var y=g.props&&g.props[l];return y&&(a(h[l],{route:u,configProps:y}),c(b,r,u,y)),s(b,r,i)}};function c(e,t,n,i){var o=t.props=l(n,i);if(o){o=t.props=a({},o);var r=t.attrs=t.attrs||{};for(var s in o)e.props&&s in e.props||(r[s]=o[s],delete o[s])}}function l(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}var u=/[!'()*]/g,h=function(e){return"%"+e.charCodeAt(0).toString(16)},d=/%2C/g,f=function(e){return encodeURIComponent(e).replace(u,h).replace(d,",")},p=decodeURIComponent;function m(e,t,n){void 0===t&&(t={});var i,o=n||_;try{i=o(e||"")}catch(a){i={}}for(var r in t)i[r]=t[r];return i}function _(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),i=p(n.shift()),o=n.length>0?p(n.join("=")):null;void 0===t[i]?t[i]=o:Array.isArray(t[i])?t[i].push(o):t[i]=[t[i],o]})),t):t}function g(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return f(t);if(Array.isArray(n)){var i=[];return n.forEach((function(e){void 0!==e&&(null===e?i.push(f(t)):i.push(f(t)+"="+f(e)))})),i.join("&")}return f(t)+"="+f(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var b=/\/?$/;function y(e,t,n,i){var o=i&&i.options.stringifyQuery,r=t.query||{};try{r=v(r)}catch(s){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:r,params:t.params||{},fullPath:w(t,o),matched:e?A(e):[]};return n&&(a.redirectedFrom=w(n,o)),Object.freeze(a)}function v(e){if(Array.isArray(e))return e.map(v);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=v(e[n]);return t}return e}var O=y(null,{path:"/"});function A(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function w(e,t){var n=e.path,i=e.query;void 0===i&&(i={});var o=e.hash;void 0===o&&(o="");var r=t||g;return(n||"/")+r(i)+o}function T(e,t){return t===O?e===t:!!t&&(e.path&&t.path?e.path.replace(b,"")===t.path.replace(b,"")&&e.hash===t.hash&&C(e.query,t.query):!(!e.name||!t.name)&&(e.name===t.name&&e.hash===t.hash&&C(e.query,t.query)&&C(e.params,t.params)))}function C(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every((function(n){var i=e[n],o=t[n];return"object"===typeof i&&"object"===typeof o?C(i,o):String(i)===String(o)}))}function E(e,t){return 0===e.path.replace(b,"/").indexOf(t.path.replace(b,"/"))&&(!t.hash||e.hash===t.hash)&&x(e.query,t.query)}function x(e,t){for(var n in t)if(!(n in e))return!1;return!0}function S(e,t,n){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return t+e;var o=t.split("/");n&&o[o.length-1]||o.pop();for(var r=e.replace(/^\//,"").split("/"),a=0;a<r.length;a++){var s=r[a];".."===s?o.pop():"."!==s&&o.push(s)}return""!==o[0]&&o.unshift(""),o.join("/")}function I(e){var t="",n="",i=e.indexOf("#");i>=0&&(t=e.slice(i),e=e.slice(0,i));var o=e.indexOf("?");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{path:e,query:n,hash:t}}function D(e){return e.replace(/\/\//g,"/")}var P=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},j=J,R=F,L=z,M=V,N=$,B=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function F(e,t){var n,i=[],o=0,r=0,a="",s=t&&t.delimiter||"/";while(null!=(n=B.exec(e))){var c=n[0],l=n[1],u=n.index;if(a+=e.slice(r,u),r=u+c.length,l)a+=l[1];else{var h=e[r],d=n[2],f=n[3],p=n[4],m=n[5],_=n[6],g=n[7];a&&(i.push(a),a="");var b=null!=d&&null!=h&&h!==d,y="+"===_||"*"===_,v="?"===_||"*"===_,O=n[2]||s,A=p||m;i.push({name:f||o++,prefix:d||"",delimiter:O,optional:v,repeat:y,partial:b,asterisk:!!g,pattern:A?G(A):g?".*":"[^"+H(O)+"]+?"})}}return r<e.length&&(a+=e.substr(r)),a&&i.push(a),i}function z(e,t){return V(F(e,t))}function k(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function U(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function V(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",r=n||{},a=i||{},s=a.pretty?k:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var u,h=r[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(P(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(u=s(h[d]),!t[c].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");o+=(0===d?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?U(h):s(h),!t[c].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');o+=l.prefix+u}}else o+=l}return o}}function H(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function G(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function W(e,t){return e.keys=t,e}function q(e){return e.sensitive?"":"i"}function Y(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return W(e,t)}function X(e,t,n){for(var i=[],o=0;o<e.length;o++)i.push(J(e[o],t,n).source);var r=new RegExp("(?:"+i.join("|")+")",q(n));return W(r,t)}function K(e,t,n){return $(F(e,n),t,n)}function $(e,t,n){P(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,o=!1!==n.end,r="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)r+=H(s);else{var c=H(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+c+l+")*"),l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",r+=l}}var u=H(n.delimiter||"/"),h=r.slice(-u.length)===u;return i||(r=(h?r.slice(0,-u.length):r)+"(?:"+u+"(?=$))?"),r+=o?"$":i&&h?"":"(?="+u+"|$)",W(new RegExp("^"+r,q(n)),t)}function J(e,t,n){return P(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?Y(e,t):P(e)?X(e,t,n):K(e,t,n)}j.parse=R,j.compile=L,j.tokensToFunction=M,j.tokensToRegExp=N;var Q=Object.create(null);function Z(e,t,n){t=t||{};try{var i=Q[e]||(Q[e]=j.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),i(t,{pretty:!0})}catch(o){return""}finally{delete t[0]}}function ee(e,t,n,i){var o="string"===typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){o=a({},e);var r=o.params;return r&&"object"===typeof r&&(o.params=a({},r)),o}if(!o.path&&o.params&&t){o=a({},o),o._normalized=!0;var s=a(a({},t.params),o.params);if(t.name)o.name=t.name,o.params=s;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;o.path=Z(c,s,"path "+t.path)}else 0;return o}var l=I(o.path||""),u=t&&t.path||"/",h=l.path?S(l.path,u,n||o.append):u,d=m(l.query,o.query,i&&i.options.parseQuery),f=o.hash||l.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:d,hash:f}}var te,ne=[String,Object],ie=[String,Array],oe=function(){},re={name:"RouterLink",props:{to:{type:ne,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:ie,default:"click"}},render:function(e){var t=this,n=this.$router,i=this.$route,o=n.resolve(this.to,i,this.append),r=o.location,s=o.route,c=o.href,l={},u=n.options.linkActiveClass,h=n.options.linkExactActiveClass,d=null==u?"router-link-active":u,f=null==h?"router-link-exact-active":h,p=null==this.activeClass?d:this.activeClass,m=null==this.exactActiveClass?f:this.exactActiveClass,_=s.redirectedFrom?y(null,ee(s.redirectedFrom),null,n):s;l[m]=T(i,_),l[p]=this.exact?l[m]:E(i,_);var g=function(e){ae(e)&&(t.replace?n.replace(r,oe):n.push(r,oe))},b={click:ae};Array.isArray(this.event)?this.event.forEach((function(e){b[e]=g})):b[this.event]=g;var v={class:l},O=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:s,navigate:g,isActive:l[p],isExactActive:l[m]});if(O){if(1===O.length)return O[0];if(O.length>1||!O.length)return 0===O.length?e():e("span",{},O)}if("a"===this.tag)v.on=b,v.attrs={href:c};else{var A=se(this.$slots.default);if(A){A.isStatic=!1;var w=A.data=a({},A.data);for(var C in w.on=w.on||{},w.on){var x=w.on[C];C in b&&(w.on[C]=Array.isArray(x)?x:[x])}for(var S in b)S in w.on?w.on[S].push(b[S]):w.on[S]=g;var I=A.data.attrs=a({},A.data.attrs);I.href=c}else v.on=b}return e(this.tag,v,this.$slots.default)}};function ae(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function se(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=se(t.children)))return t}}function ce(e){if(!ce.installed||te!==e){ce.installed=!0,te=e;var t=function(e){return void 0!==e},n=function(e,n){var i=e.$options._parentVnode;t(i)&&t(i=i.data)&&t(i=i.registerRouteInstance)&&i(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",s),e.component("RouterLink",re);var i=e.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var le="undefined"!==typeof window;function ue(e,t,n,i){var o=t||[],r=n||Object.create(null),a=i||Object.create(null);e.forEach((function(e){he(o,r,a,e)}));for(var s=0,c=o.length;s<c;s++)"*"===o[s]&&(o.push(o.splice(s,1)[0]),c--,s--);return{pathList:o,pathMap:r,nameMap:a}}function he(e,t,n,i,o,r){var a=i.path,s=i.name;var c=i.pathToRegexpOptions||{},l=fe(a,o,c.strict);"boolean"===typeof i.caseSensitive&&(c.sensitive=i.caseSensitive);var u={path:l,regex:de(l,c),components:i.components||{default:i.component},instances:{},name:s,parent:o,matchAs:r,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach((function(i){var o=r?D(r+"/"+i.path):void 0;he(e,t,n,i,u,o)})),t[u.path]||(e.push(u.path),t[u.path]=u),void 0!==i.alias)for(var h=Array.isArray(i.alias)?i.alias:[i.alias],d=0;d<h.length;++d){var f=h[d];0;var p={path:f,children:i.children};he(e,t,n,p,o,u.path||"/")}s&&(n[s]||(n[s]=u))}function de(e,t){var n=j(e,[],t);return n}function fe(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:D(t.path+"/"+e)}function pe(e,t){var n=ue(e),i=n.pathList,o=n.pathMap,r=n.nameMap;function a(e){ue(e,i,o,r)}function s(e,n,a){var s=ee(e,n,!1,t),c=s.name;if(c){var l=r[c];if(!l)return u(null,s);var h=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in s.params)&&h.indexOf(d)>-1&&(s.params[d]=n.params[d]);return s.path=Z(l.path,s.params,'named route "'+c+'"'),u(l,s,a)}if(s.path){s.params={};for(var f=0;f<i.length;f++){var p=i[f],m=o[p];if(me(m.regex,s.path,s.params))return u(m,s,a)}}return u(null,s)}function c(e,n){var i=e.redirect,o="function"===typeof i?i(y(e,n,null,t)):i;if("string"===typeof o&&(o={path:o}),!o||"object"!==typeof o)return u(null,n);var a=o,c=a.name,l=a.path,h=n.query,d=n.hash,f=n.params;if(h=a.hasOwnProperty("query")?a.query:h,d=a.hasOwnProperty("hash")?a.hash:d,f=a.hasOwnProperty("params")?a.params:f,c){r[c];return s({_normalized:!0,name:c,query:h,hash:d,params:f},void 0,n)}if(l){var p=_e(l,e),m=Z(p,f,'redirect route with path "'+p+'"');return s({_normalized:!0,path:m,query:h,hash:d},void 0,n)}return u(null,n)}function l(e,t,n){var i=Z(n,t.params,'aliased route with path "'+n+'"'),o=s({_normalized:!0,path:i});if(o){var r=o.matched,a=r[r.length-1];return t.params=o.params,u(a,t)}return u(null,t)}function u(e,n,i){return e&&e.redirect?c(e,i||n):e&&e.matchAs?l(e,n,e.matchAs):y(e,n,i,t)}return{match:s,addRoutes:a}}function me(e,t,n){var i=t.match(e);if(!i)return!1;if(!n)return!0;for(var o=1,r=i.length;o<r;++o){var a=e.keys[o-1],s="string"===typeof i[o]?decodeURIComponent(i[o]):i[o];a&&(n[a.name||"pathMatch"]=s)}return!0}function _e(e,t){return S(e,t.parent?t.parent.path:"/",!0)}var ge=le&&window.performance&&window.performance.now?window.performance:Date;function be(){return ge.now().toFixed(3)}var ye=be();function ve(){return ye}function Oe(e){return ye=e}var Ae=Object.create(null);function we(){var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=a({},window.history.state);n.key=ve(),window.history.replaceState(n,"",t),window.addEventListener("popstate",(function(e){Ce(),e.state&&e.state.key&&Oe(e.state.key)}))}function Te(e,t,n,i){if(e.app){var o=e.options.scrollBehavior;o&&e.app.$nextTick((function(){var r=Ee(),a=o.call(e,t,n,i?r:null);a&&("function"===typeof a.then?a.then((function(e){Re(e,r)})).catch((function(e){0})):Re(a,r))}))}}function Ce(){var e=ve();e&&(Ae[e]={x:window.pageXOffset,y:window.pageYOffset})}function Ee(){var e=ve();if(e)return Ae[e]}function xe(e,t){var n=document.documentElement,i=n.getBoundingClientRect(),o=e.getBoundingClientRect();return{x:o.left-i.left-t.x,y:o.top-i.top-t.y}}function Se(e){return Pe(e.x)||Pe(e.y)}function Ie(e){return{x:Pe(e.x)?e.x:window.pageXOffset,y:Pe(e.y)?e.y:window.pageYOffset}}function De(e){return{x:Pe(e.x)?e.x:0,y:Pe(e.y)?e.y:0}}function Pe(e){return"number"===typeof e}var je=/^#\d/;function Re(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var i=je.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(i){var o=e.offset&&"object"===typeof e.offset?e.offset:{};o=De(o),t=xe(i,o)}else Se(e)&&(t=Ie(e))}else n&&Se(e)&&(t=Ie(e));t&&window.scrollTo(t.x,t.y)}var Le=le&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}();function Me(e,t){Ce();var n=window.history;try{if(t){var i=a({},n.state);i.key=ve(),n.replaceState(i,"",e)}else n.pushState({key:Oe(be())},"",e)}catch(o){window.location[t?"replace":"assign"](e)}}function Ne(e){Me(e,!0)}function Be(e,t,n){var i=function(o){o>=e.length?n():e[o]?t(e[o],(function(){i(o+1)})):i(o+1)};i(0)}function Fe(e){return function(t,n,i){var r=!1,a=0,s=null;ze(e,(function(e,t,n,c){if("function"===typeof e&&void 0===e.cid){r=!0,a++;var l,u=He((function(t){Ve(t)&&(t=t.default),e.resolved="function"===typeof t?t:te.extend(t),n.components[c]=t,a--,a<=0&&i()})),h=He((function(e){var t="Failed to resolve async component "+c+": "+e;s||(s=o(e)?e:new Error(t),i(s))}));try{l=e(u,h)}catch(f){h(f)}if(l)if("function"===typeof l.then)l.then(u,h);else{var d=l.component;d&&"function"===typeof d.then&&d.then(u,h)}}})),r||i()}}function ze(e,t){return ke(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function ke(e){return Array.prototype.concat.apply([],e)}var Ue="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Ve(e){return e.__esModule||Ue&&"Module"===e[Symbol.toStringTag]}function He(e){var t=!1;return function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}var Ge=function(e){function t(t){e.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+t.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new e).stack,writable:!0,configurable:!0})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);Ge._name="NavigationDuplicated";var We=function(e,t){this.router=e,this.base=qe(t),this.current=O,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function qe(e){if(!e)if(le){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function Ye(e,t){var n,i=Math.max(e.length,t.length);for(n=0;n<i;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function Xe(e,t,n,i){var o=ze(e,(function(e,i,o,r){var a=Ke(e,t);if(a)return Array.isArray(a)?a.map((function(e){return n(e,i,o,r)})):n(a,i,o,r)}));return ke(i?o.reverse():o)}function Ke(e,t){return"function"!==typeof e&&(e=te.extend(e)),e.options[t]}function $e(e){return Xe(e,"beforeRouteLeave",Qe,!0)}function Je(e){return Xe(e,"beforeRouteUpdate",Qe)}function Qe(e,t){if(t)return function(){return e.apply(t,arguments)}}function Ze(e,t,n){return Xe(e,"beforeRouteEnter",(function(e,i,o,r){return et(e,o,r,t,n)}))}function et(e,t,n,i,o){return function(r,a,s){return e(r,a,(function(e){"function"===typeof e&&i.push((function(){tt(e,t.instances,n,o)})),s(e)}))}}function tt(e,t,n,i){t[n]&&!t[n]._isBeingDestroyed?e(t[n]):i()&&setTimeout((function(){tt(e,t,n,i)}),16)}We.prototype.listen=function(e){this.cb=e},We.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},We.prototype.onError=function(e){this.errorCbs.push(e)},We.prototype.transitionTo=function(e,t,n){var i=this,o=this.router.match(e,this.current);this.confirmTransition(o,(function(){i.updateRoute(o),t&&t(o),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(o)})))}),(function(e){n&&n(e),e&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(e)})))}))},We.prototype.confirmTransition=function(e,t,n){var a=this,s=this.current,c=function(e){!r(Ge,e)&&o(e)&&(a.errorCbs.length?a.errorCbs.forEach((function(t){t(e)})):(i(!1,"uncaught error during route navigation:"),console.error(e))),n&&n(e)};if(T(e,s)&&e.matched.length===s.matched.length)return this.ensureURL(),c(new Ge(e));var l=Ye(this.current.matched,e.matched),u=l.updated,h=l.deactivated,d=l.activated,f=[].concat($e(h),this.router.beforeHooks,Je(u),d.map((function(e){return e.beforeEnter})),Fe(d));this.pending=e;var p=function(t,n){if(a.pending!==e)return c();try{t(e,s,(function(e){!1===e||o(e)?(a.ensureURL(!0),c(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(c(),"object"===typeof e&&e.replace?a.replace(e):a.push(e)):n(e)}))}catch(i){c(i)}};Be(f,p,(function(){var n=[],i=function(){return a.current===e},o=Ze(d,n,i),r=o.concat(a.router.resolveHooks);Be(r,p,(function(){if(a.pending!==e)return c();a.pending=null,t(e),a.router.app&&a.router.app.$nextTick((function(){n.forEach((function(e){e()}))}))}))}))},We.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(n){n&&n(e,t)}))};var nt=function(e){function t(t,n){var i=this;e.call(this,t,n);var o=t.options.scrollBehavior,r=Le&&o;r&&we();var a=it(this.base);window.addEventListener("popstate",(function(e){var n=i.current,o=it(i.base);i.current===O&&o===a||i.transitionTo(o,(function(e){r&&Te(t,e,n,!0)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var i=this,o=this,r=o.current;this.transitionTo(e,(function(e){Me(D(i.base+e.fullPath)),Te(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,o=this,r=o.current;this.transitionTo(e,(function(e){Ne(D(i.base+e.fullPath)),Te(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(it(this.base)!==this.current.fullPath){var t=D(this.base+this.current.fullPath);e?Me(t):Ne(t)}},t.prototype.getCurrentLocation=function(){return it(this.base)},t}(We);function it(e){var t=decodeURI(window.location.pathname);return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var ot=function(e){function t(t,n,i){e.call(this,t,n),i&&rt(this.base)||at()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router,n=t.options.scrollBehavior,i=Le&&n;i&&we(),window.addEventListener(Le?"popstate":"hashchange",(function(){var t=e.current;at()&&e.transitionTo(st(),(function(n){i&&Te(e.router,n,t,!0),Le||ut(n.fullPath)}))}))},t.prototype.push=function(e,t,n){var i=this,o=this,r=o.current;this.transitionTo(e,(function(e){lt(e.fullPath),Te(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,o=this,r=o.current;this.transitionTo(e,(function(e){ut(e.fullPath),Te(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;st()!==t&&(e?lt(t):ut(t))},t.prototype.getCurrentLocation=function(){return st()},t}(We);function rt(e){var t=it(e);if(!/^\/#/.test(t))return window.location.replace(D(e+"/#"+t)),!0}function at(){var e=st();return"/"===e.charAt(0)||(ut("/"+e),!1)}function st(){var e=window.location.href,t=e.indexOf("#");if(t<0)return"";e=e.slice(t+1);var n=e.indexOf("?");if(n<0){var i=e.indexOf("#");e=i>-1?decodeURI(e.slice(0,i))+e.slice(i):decodeURI(e)}else e=decodeURI(e.slice(0,n))+e.slice(n);return e}function ct(e){var t=window.location.href,n=t.indexOf("#"),i=n>=0?t.slice(0,n):t;return i+"#"+e}function lt(e){Le?Me(ct(e)):window.location.hash=e}function ut(e){Le?Ne(ct(e)):window.location.replace(ct(e))}var ht=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,(function(){t.index=n,t.updateRoute(i)}),(function(e){r(Ge,e)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(We),dt=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Le&&!1!==e.fallback,this.fallback&&(t="hash"),le||(t="abstract"),this.mode=t,t){case"history":this.history=new nt(this,e.base);break;case"hash":this.history=new ot(this,e.base,this.fallback);break;case"abstract":this.history=new ht(this,e.base);break;default:0}},ft={currentRoute:{configurable:!0}};function pt(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function mt(e,t,n){var i="hash"===n?"#"+t:t;return e?D(e+"/"+i):i}dt.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},ft.currentRoute.get=function(){return this.history&&this.history.current},dt.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null)})),!this.app){this.app=e;var n=this.history;if(n instanceof nt)n.transitionTo(n.getCurrentLocation());else if(n instanceof ot){var i=function(){n.setupListeners()};n.transitionTo(n.getCurrentLocation(),i,i)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},dt.prototype.beforeEach=function(e){return pt(this.beforeHooks,e)},dt.prototype.beforeResolve=function(e){return pt(this.resolveHooks,e)},dt.prototype.afterEach=function(e){return pt(this.afterHooks,e)},dt.prototype.onReady=function(e,t){this.history.onReady(e,t)},dt.prototype.onError=function(e){this.history.onError(e)},dt.prototype.push=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.push(e,t,n)}));this.history.push(e,t,n)},dt.prototype.replace=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.replace(e,t,n)}));this.history.replace(e,t,n)},dt.prototype.go=function(e){this.history.go(e)},dt.prototype.back=function(){this.go(-1)},dt.prototype.forward=function(){this.go(1)},dt.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},dt.prototype.resolve=function(e,t,n){t=t||this.history.current;var i=ee(e,t,n,this),o=this.match(i,t),r=o.redirectedFrom||o.fullPath,a=this.history.base,s=mt(a,r,this.mode);return{location:i,route:o,href:s,normalizedTo:i,resolved:o}},dt.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==O&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(dt.prototype,ft),dt.install=ce,dt.version="3.1.6",le&&window.Vue&&window.Vue.use(dt),t["a"]=dt},9072:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("e260"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0");var i=n("7e84"),o=n("b380");n("25f0");function r(e){return-1!==Function.toString.call(e).indexOf("[native code]")}n("4ae1");function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return s=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=Function.bind.apply(e,i),a=new r;return n&&Object(o["a"])(a,n.prototype),a},s.apply(null,arguments)}function c(e){var t="function"===typeof Map?new Map:void 0;return c=function(e){if(null===e||!r(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return s(e,arguments,Object(i["a"])(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(o["a"])(n,e)},c(e)}},"90e3":function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},9112:function(e,t,n){var i=n("83ab"),o=n("9bf2"),r=n("5c6c");e.exports=i?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},9152:function(e,t){t.read=function(e,t,n,i,o){var r,a,s=8*o-i-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?o-1:0,d=n?-1:1,f=e[t+h];for(h+=d,r=f&(1<<-u)-1,f>>=-u,u+=s;u>0;r=256*r+e[t+h],h+=d,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=i;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===r)r=1-l;else{if(r===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),r-=l}return(f?-1:1)*a*Math.pow(2,r-i)},t.write=function(e,t,n,i,o,r){var a,s,c,l=8*r-o-1,u=(1<<l)-1,h=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+h>=1?d/c:d*Math.pow(2,1-h),t*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*c-1)*Math.pow(2,o),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=p,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*m}},"93da":function(e,t,n){"use strict";var i=n("d34e"),o=n.n(i),r=n("d4da"),a=n("535a"),s=n("2f63"),c=n("4f04");const l={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,EPSILON21:1e-21,GRAVITATIONALPARAMETER:3986004418e5,SOLAR_RADIUS:6955e5,LUNAR_RADIUS:1737400,SIXTY_FOUR_KILOBYTES:65536,FOUR_GIGABYTES:4294967296};l.sign=Object(a["a"])(Math.sign,(function(e){return e=+e,0===e||e!==e?e:e>0?1:-1})),l.signNotZero=function(e){return e<0?-1:1},l.toSNorm=function(e,t){return t=Object(a["a"])(t,255),Math.round((.5*l.clamp(e,-1,1)+.5)*t)},l.fromSNorm=function(e,t){return t=Object(a["a"])(t,255),l.clamp(e,0,t)/t*2-1},l.normalize=function(e,t,n){return n=Math.max(n-t,0),0===n?0:l.clamp((e-t)/n,0,1)},l.sinh=Object(a["a"])(Math.sinh,(function(e){return(Math.exp(e)-Math.exp(-e))/2})),l.cosh=Object(a["a"])(Math.cosh,(function(e){return(Math.exp(e)+Math.exp(-e))/2})),l.lerp=function(e,t,n){return(1-n)*e+n*t},l.PI=Math.PI,l.ONE_OVER_PI=1/Math.PI,l.PI_OVER_TWO=Math.PI/2,l.PI_OVER_THREE=Math.PI/3,l.PI_OVER_FOUR=Math.PI/4,l.PI_OVER_SIX=Math.PI/6,l.THREE_PI_OVER_TWO=3*Math.PI/2,l.TWO_PI=2*Math.PI,l.ONE_OVER_TWO_PI=1/(2*Math.PI),l.RADIANS_PER_DEGREE=Math.PI/180,l.DEGREES_PER_RADIAN=180/Math.PI,l.RADIANS_PER_ARCSECOND=l.RADIANS_PER_DEGREE/3600,l.toRadians=function(e){if(!Object(s["a"])(e))throw new c["a"]("degrees is required.");return e*l.RADIANS_PER_DEGREE},l.toDegrees=function(e){if(!Object(s["a"])(e))throw new c["a"]("radians is required.");return e*l.DEGREES_PER_RADIAN},l.convertLongitudeRange=function(e){if(!Object(s["a"])(e))throw new c["a"]("angle is required.");const t=l.TWO_PI,n=e-Math.floor(e/t)*t;return n<-Math.PI?n+t:n>=Math.PI?n-t:n},l.clampToLatitudeRange=function(e){if(!Object(s["a"])(e))throw new c["a"]("angle is required.");return l.clamp(e,-1*l.PI_OVER_TWO,l.PI_OVER_TWO)},l.negativePiToPi=function(e){if(!Object(s["a"])(e))throw new c["a"]("angle is required.");return e>=-l.PI&&e<=l.PI?e:l.zeroToTwoPi(e+l.PI)-l.PI},l.zeroToTwoPi=function(e){if(!Object(s["a"])(e))throw new c["a"]("angle is required.");if(e>=0&&e<=l.TWO_PI)return e;const t=l.mod(e,l.TWO_PI);return Math.abs(t)<l.EPSILON14&&Math.abs(e)>l.EPSILON14?l.TWO_PI:t},l.mod=function(e,t){if(!Object(s["a"])(e))throw new c["a"]("m is required.");if(!Object(s["a"])(t))throw new c["a"]("n is required.");if(0===t)throw new c["a"]("divisor cannot be 0.");return l.sign(e)===l.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t},l.equalsEpsilon=function(e,t,n,i){if(!Object(s["a"])(e))throw new c["a"]("left is required.");if(!Object(s["a"])(t))throw new c["a"]("right is required.");n=Object(a["a"])(n,0),i=Object(a["a"])(i,n);const o=Math.abs(e-t);return o<=i||o<=n*Math.max(Math.abs(e),Math.abs(t))},l.lessThan=function(e,t,n){if(!Object(s["a"])(e))throw new c["a"]("first is required.");if(!Object(s["a"])(t))throw new c["a"]("second is required.");if(!Object(s["a"])(n))throw new c["a"]("absoluteEpsilon is required.");return e-t<-n},l.lessThanOrEquals=function(e,t,n){if(!Object(s["a"])(e))throw new c["a"]("first is required.");if(!Object(s["a"])(t))throw new c["a"]("second is required.");if(!Object(s["a"])(n))throw new c["a"]("absoluteEpsilon is required.");return e-t<n},l.greaterThan=function(e,t,n){if(!Object(s["a"])(e))throw new c["a"]("first is required.");if(!Object(s["a"])(t))throw new c["a"]("second is required.");if(!Object(s["a"])(n))throw new c["a"]("absoluteEpsilon is required.");return e-t>n},l.greaterThanOrEquals=function(e,t,n){if(!Object(s["a"])(e))throw new c["a"]("first is required.");if(!Object(s["a"])(t))throw new c["a"]("second is required.");if(!Object(s["a"])(n))throw new c["a"]("absoluteEpsilon is required.");return e-t>-n};const u=[1];l.factorial=function(e){if("number"!==typeof e||e<0)throw new c["a"]("A number greater than or equal to 0 is required.");const t=u.length;if(e>=t){let n=u[t-1];for(let i=t;i<=e;i++){const e=n*i;u.push(e),n=e}}return u[e]},l.incrementWrap=function(e,t,n){if(n=Object(a["a"])(n,0),!Object(s["a"])(e))throw new c["a"]("n is required.");if(t<=n)throw new c["a"]("maximumValue must be greater than minimumValue.");return++e,e>t&&(e=n),e},l.isPowerOfTwo=function(e){if("number"!==typeof e||e<0||e>4294967295)throw new c["a"]("A number between 0 and (2^32)-1 is required.");return 0!==e&&0===(e&e-1)},l.nextPowerOfTwo=function(e){if("number"!==typeof e||e<0||e>2147483648)throw new c["a"]("A number between 0 and 2^31 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e,e},l.previousPowerOfTwo=function(e){if("number"!==typeof e||e<0||e>4294967295)throw new c["a"]("A number between 0 and (2^32)-1 is required.");return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1),e},l.clamp=function(e,t,n){return r["a"].typeOf.number("value",e),r["a"].typeOf.number("min",t),r["a"].typeOf.number("max",n),e<t?t:e>n?n:e};let h=new o.a;l.setRandomNumberSeed=function(e){if(!Object(s["a"])(e))throw new c["a"]("seed is required.");h=new o.a(e)},l.nextRandomNumber=function(){return h.random()},l.randomBetween=function(e,t){return l.nextRandomNumber()*(t-e)+e},l.acosClamped=function(e){if(!Object(s["a"])(e))throw new c["a"]("value is required.");return Math.acos(l.clamp(e,-1,1))},l.asinClamped=function(e){if(!Object(s["a"])(e))throw new c["a"]("value is required.");return Math.asin(l.clamp(e,-1,1))},l.chordLength=function(e,t){if(!Object(s["a"])(e))throw new c["a"]("angle is required.");if(!Object(s["a"])(t))throw new c["a"]("radius is required.");return 2*t*Math.sin(.5*e)},l.logBase=function(e,t){if(!Object(s["a"])(e))throw new c["a"]("number is required.");if(!Object(s["a"])(t))throw new c["a"]("base is required.");return Math.log(e)/Math.log(t)},l.cbrt=Object(a["a"])(Math.cbrt,(function(e){const t=Math.pow(Math.abs(e),1/3);return e<0?-t:t})),l.log2=Object(a["a"])(Math.log2,(function(e){return Math.log(e)*Math.LOG2E})),l.fog=function(e,t){const n=e*t;return 1-Math.exp(-n*n)},l.fastApproximateAtan=function(e){return r["a"].typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)},l.fastApproximateAtan2=function(e,t){let n;r["a"].typeOf.number("x",e),r["a"].typeOf.number("y",t);let i=Math.abs(e);n=Math.abs(t);const o=Math.max(i,n);n=Math.min(i,n);const a=n/o;if(isNaN(a))throw new c["a"]("either x or y must be nonzero");return i=l.fastApproximateAtan(a),i=Math.abs(t)>Math.abs(e)?l.PI_OVER_TWO-i:i,i=e<0?l.PI-i:i,i=t<0?-i:i,i},t["a"]=l},"94ca":function(e,t,n){var i=n("d039"),o=/#|\.prototype\./,r=function(e,t){var n=s[a(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},a=r.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=r.data={},c=r.NATIVE="N",l=r.POLYFILL="P";e.exports=r},"96e8":function(e,t,n){"use strict";var i=n("d4da");const o=/^blob:/i;function r(e){return i["a"].typeOf.string("uri",e),o.test(e)}t["a"]=r},"97e0":function(e,t,n){"use strict";(function(e){var n;"undefined"!==typeof ko&&(n=ko),function(){
/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(){(function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,o=t.jQuery,r=t.JSON;o||"undefined"===typeof jQuery||(o=jQuery),function(e){e(t.ko={})}((function(a,s){function c(e,t){return(null===e||typeof e in m)&&e===t}function l(t,n){var i;return function(){i||(i=p.a.setTimeout((function(){i=e,t()}),n))}}function u(e,t){var n;return function(){clearTimeout(n),n=p.a.setTimeout(e,t)}}function h(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function d(e,t){null!==t&&t.s&&t.s()}function f(e,t){var n=this.qd,i=n[v];i.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):i.I[t]||n.uc(t,e,i.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var p="undefined"!==typeof a?a:{};p.b=function(e,t){for(var n=e.split("."),i=p,o=0;o<n.length-1;o++)i=i[n[o]];i[n[n.length-1]]=t},p.L=function(e,t,n){e[t]=n},p.version="3.5.1",p.b("version",p.version),p.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},p.a=function(){function a(e,t){for(var n in e)u.call(e,n)&&t(n,e[n])}function s(e,t){if(t)for(var n in t)u.call(t,n)&&(e[n]=t[n]);return e}function c(e,t){return e.__proto__=t,e}function l(e,t,n,i){var o=e[t].match(y)||[];p.a.D(n.match(y),(function(e){p.a.Na(o,e,i)})),e[t]=o.join(" ")}var u=Object.prototype.hasOwnProperty,h={__proto__:[]}instanceof Array,d="function"===typeof Symbol,f={},m={};f[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(f,(function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)m[t[n]]=e}));var _,g={propertychange:!0},b=n&&function(){for(var t=3,i=n.createElement("div"),o=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:e}(),y=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var i=0,o=e.length;i<o;i++)t.call(n,e[i],i,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,i){for(var o=0,r=t.length;o<r;o++)if(n.call(i,t[o],o,t))return t[o];return e},Pa:function(e,t){var n=p.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&p.a.D(e,(function(e){0>p.a.A(t,e)&&t.push(e)})),t},Mb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)i.push(t.call(n,e[o],o));return i},jb:function(e,t,n){var i=[];if(e)for(var o=0,r=e.length;o<r;o++)t.call(n,e[o],o)&&i.push(e[o]);return i},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Na:function(e,t,n){var i=p.a.A(p.a.bc(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},Ba:h,extend:s,setPrototypeOf:c,Ab:h?c:s,P:a,Ga:function(e,t,n){if(!e)return e;var i,o={};for(i in e)u.call(e,i)&&(o[i]=t.call(n,e[i],i,e));return o},Tb:function(e){for(;e.firstChild;)p.removeNode(e.firstChild)},Yb:function(e){e=p.a.la(e);for(var t=(e[0]&&e[0].ownerDocument||n).createElement("div"),i=0,o=e.length;i<o;i++)t.appendChild(p.oa(e[i]));return t},Ca:function(e,t){for(var n=0,i=e.length,o=[];n<i;n++){var r=e[n].cloneNode(!0);o.push(t?p.oa(r):r)}return o},va:function(e,t){if(p.a.Tb(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],o=i.parentNode,r=0,a=t.length;r<a;r++)o.insertBefore(t[r],i);for(r=0,a=n.length;r<a;r++)p.removeNode(n[r])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},Zc:function(e,t){7>b?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return p.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!p.a.Lb(e,p.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return p.onError?function(){try{return e.apply(this,arguments)}catch(s){throw p.onError&&p.onError(s),s}}:e},setTimeout:function(e,t){return setTimeout(p.a.Ac(e),t)},Gc:function(e){setTimeout((function(){throw p.onError&&p.onError(e),e}),0)},B:function(e,t,n){var i=p.a.Ac(n);if(n=g[t],p.options.useOnlyNativeEvents||n||!o)if(n||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){i.call(e,t)},a="on"+t;e.attachEvent(a,r),p.a.K.za(e,(function(){e.detachEvent(a,r)}))}else e.addEventListener(t,i,!1);else _||(_="function"==typeof o(e).on?"on":"bind"),o(e)[_](t,i)},Fb:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if("input"===p.a.R(e)&&e.type&&"click"==i.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1,p.options.useOnlyNativeEvents||!o||r)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=n.createEvent(m[i]||"HTMLEvents"),r.initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}else o(e).trigger(i)},f:function(e){return p.O(e)?e():e},bc:function(e){return p.O(e)?e.v():e},Eb:function(e,t,n){var i;t&&("object"===typeof e.classList?(i=e.classList[n?"add":"remove"],p.a.D(t.match(y),(function(t){i.call(e.classList,t)}))):"string"===typeof e.className.baseVal?l(e.className,"baseVal",t,n):l(e,"className",t,n))},Bb:function(t,n){var i=p.a.f(n);null!==i&&i!==e||(i="");var o=p.h.firstChild(t);!o||3!=o.nodeType||p.h.nextSibling(o)?p.h.va(t,[t.ownerDocument.createTextNode(i)]):o.data=i,p.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=b)try{var i=e.name.replace(/[&<>'"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));e.mergeAttributes(n.createElement("<input name='"+i+"'/>"),!1)}catch(c){}},Ad:function(e){9<=b&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},wd:function(e){if(b){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=p.a.f(e),t=p.a.f(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},la:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Da:function(e){return d?Symbol(e):e},Zd:6===b,$d:7===b,W:b,Lc:function(e,t){for(var n=p.a.la(e.getElementsByTagName("input")).concat(p.a.la(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],r=n.length-1;0<=r;r--)i(n[r])&&o.push(n[r]);return o},Nd:function(e){return"string"==typeof e&&(e=p.a.Db(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(p.a.f(e),t,n)},Od:function(e,t,i){i=i||{};var o=i.params||{},r=i.includeFields||this.Jc,s=e;if("object"==typeof e&&"form"===p.a.R(e)){s=e.action;for(var c=r.length-1;0<=c;c--)for(var l=p.a.Lc(e,r[c]),u=l.length-1;0<=u;u--)o[l[u].name]=l[u].value}t=p.a.f(t);var h=n.createElement("form");for(var d in h.style.display="none",h.action=s,h.method="post",t)e=n.createElement("input"),e.type="hidden",e.name=d,e.value=p.a.hc(p.a.f(t[d])),h.appendChild(e);a(o,(function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,h.appendChild(i)})),n.body.appendChild(h),i.submitter?i.submitter(h):h.submit(),setTimeout((function(){h.parentNode.removeChild(h)}),0)}}}(),p.b("utils",p.a),p.b("utils.arrayForEach",p.a.D),p.b("utils.arrayFirst",p.a.Lb),p.b("utils.arrayFilter",p.a.jb),p.b("utils.arrayGetDistinctValues",p.a.wc),p.b("utils.arrayIndexOf",p.a.A),p.b("utils.arrayMap",p.a.Mb),p.b("utils.arrayPushAll",p.a.Nb),p.b("utils.arrayRemoveItem",p.a.Pa),p.b("utils.cloneNodes",p.a.Ca),p.b("utils.createSymbolOrString",p.a.Da),p.b("utils.extend",p.a.extend),p.b("utils.fieldsIncludedWithJsonPost",p.a.Jc),p.b("utils.getFormFields",p.a.Lc),p.b("utils.objectMap",p.a.Ga),p.b("utils.peekObservable",p.a.bc),p.b("utils.postJson",p.a.Od),p.b("utils.parseJson",p.a.Nd),p.b("utils.registerEventHandler",p.a.B),p.b("utils.stringifyJson",p.a.hc),p.b("utils.range",p.a.Pd),p.b("utils.toggleDomNodeCssClass",p.a.Eb),p.b("utils.triggerEvent",p.a.Fb),p.b("utils.unwrapObservable",p.a.f),p.b("utils.objectForEach",p.a.P),p.b("utils.addOrRemoveItem",p.a.Na),p.b("utils.setTextContent",p.a.Bb),p.b("unwrap",p.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),p.a.g=new function(){var t,n,i=0,o="__ko__"+(new Date).getTime(),r={};return p.a.W?(t=function(t,n){var a=t[o];if(!a||"null"===a||!r[a]){if(!n)return e;a=t[o]="ko"+i++,r[a]={}}return r[a]},n=function(e){var t=e[o];return!!t&&(delete r[t],e[o]=null,!0)}):(t=function(e,t){var n=e[o];return!n&&t&&(n=e[o]={}),n},n=function(e){return!!e[o]&&(delete e[o],!0)}),{get:function(e,n){var i=t(e,!1);return i&&i[n]},set:function(n,i,o){(n=t(n,o!==e))&&(n[i]=o)},Ub:function(e,n,i){return e=t(e,!0),e[n]||(e[n]=i)},clear:n,Z:function(){return i+++o}}},p.b("utils.domData",p.a.g),p.b("utils.domData.clear",p.a.g.clear),p.a.K=new function(){function t(t,n){var i=p.a.g.get(t,r);return i===e&&n&&(i=[],p.a.g.set(t,r,i)),i}function n(e){var n=t(e,!1);if(n){n=n.slice(0);for(var o=0;o<n.length;o++)n[o](e)}p.a.g.clear(e),p.a.K.cleanExternalData(e),s[e.nodeType]&&i(e.childNodes,!0)}function i(e,t){for(var i,o=[],r=0;r<e.length;r++)if((!t||8===e[r].nodeType)&&(n(o[o.length]=i=e[r]),e[r]!==i))for(;r--&&-1==p.a.A(o,e[r]););}var r=p.a.g.Z(),a={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,i){var o=t(n,!1);o&&(p.a.Pa(o,i),0==o.length&&p.a.g.set(n,r,e))},oa:function(e){return p.u.G((function(){a[e.nodeType]&&(n(e),s[e.nodeType]&&i(e.getElementsByTagName("*")))})),e},removeNode:function(e){p.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){o&&"function"==typeof o.cleanData&&o.cleanData([e])}}},p.oa=p.a.K.oa,p.removeNode=p.a.K.removeNode,p.b("cleanNode",p.oa),p.b("removeNode",p.removeNode),p.b("utils.domNodeDisposal",p.a.K),p.b("utils.domNodeDisposal.addDisposeCallback",p.a.K.za),p.b("utils.domNodeDisposal.removeDisposeCallback",p.a.K.yb),function(){var i=[0,"",""],r=[1,"<table>","</table>"],a=[3,"<table><tbody><tr>","</tr></tbody></table>"],s=[1,"<select multiple='multiple'>","</select>"],c={thead:r,tbody:r,tfoot:r,tr:[2,"<table><tbody>","</tbody></table>"],td:a,th:a,option:s,optgroup:s},l=8>=p.a.W;p.a.ua=function(e,r){var a;if(o){if(o.parseHTML)a=o.parseHTML(e,r)||[];else if((a=o.clean([e],r))&&a[0]){for(var s=a[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(a=r)||(a=n);s=a.parentWindow||a.defaultView||t;var u,h=p.a.Db(e).toLowerCase(),d=a.createElement("div");for(u=(h=h.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&c[h[1]]||i,h=u[0],u="ignored<div>"+u[1]+e+u[2]+"</div>","function"==typeof s.innerShiv?d.appendChild(s.innerShiv(u)):(l&&a.body.appendChild(d),d.innerHTML=u,l&&d.parentNode.removeChild(d));h--;)d=d.lastChild;a=p.a.la(d.lastChild.childNodes)}return a},p.a.Md=function(e,t){var n=p.a.ua(e,t);return n.length&&n[0].parentElement||p.a.Yb(n)},p.a.fc=function(t,n){if(p.a.Tb(t),n=p.a.f(n),null!==n&&n!==e)if("string"!=typeof n&&(n=n.toString()),o)o(t).html(n);else for(var i=p.a.ua(n,t.ownerDocument),r=0;r<i.length;r++)t.appendChild(i[r])}}(),p.b("utils.parseHtmlFragment",p.a.ua),p.b("utils.setHtml",p.a.fc),p.aa=function(){function t(e,n){if(e)if(8==e.nodeType){var i=p.aa.Uc(e.nodeValue);null!=i&&n.push({ud:e,Kd:i})}else if(1==e.nodeType){i=0;for(var o=e.childNodes,r=o.length;i<r;i++)t(o[i],n)}}var n={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},bd:function(t,i){var o=n[t];if(o===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return o.apply(null,i||[]),!0}finally{delete n[t]}},cd:function(e,n){var i=[];t(e,i);for(var o=0,r=i.length;o<r;o++){var a=i[o].ud,s=[a];n&&p.a.Nb(s,n),p.aa.bd(i[o].Kd,s),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),p.b("memoization",p.aa),p.b("memoization.memoize",p.aa.Xb),p.b("memoization.unmemoize",p.aa.bd),p.b("memoization.parseMemoText",p.aa.Uc),p.b("memoization.unmemoizeDomNodeAndDescendants",p.aa.cd),p.na=function(){function e(){if(a)for(var e,t=a,n=0;c<a;)if(e=r[c++]){if(c>t){if(5e3<=++n){c=a,p.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=a}try{e()}catch(i){p.a.Gc(i)}}}function i(){e(),c=a=r.length=0}var o,r=[],a=0,s=1,c=0;return o=t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:o,zb:function(e){return a||p.na.scheduler(i),r[a++]=e,s++},cancel:function(e){e-=s-a,e>=c&&e<a&&(r[e]=null)},resetForTesting:function(){var e=a-c;return c=a=r.length=0,e},Sd:e}}(),p.b("tasks",p.na),p.b("tasks.schedule",p.na.zb),p.b("tasks.runEarly",p.na.Sd),p.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return p.$({read:e,write:function(i){clearTimeout(n),n=p.a.setTimeout((function(){e(i)}),t)}})},rateLimit:function(e,t){var n,i,o;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e.Hb=!1,o="function"==typeof i?i:"notifyWhenChangesStop"==i?u:l,e.ub((function(e){return o(e,n,t)}))},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub((function(n){var i,o=!1;return function(){if(!o){p.na.cancel(i),i=p.na.zb(n);try{o=!0,t.notifySubscribers(e,"dirty")}finally{o=!1}}}})))},notify:function(e,t){e.equalityComparer="always"==t?null:c}};var m={undefined:1,boolean:1,number:1,string:1};p.b("extenders",p.Ta),p.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,p.L(this,"dispose",this.s),p.L(this,"disposeWhenNodeIsRemoved",this.l)},p.ic.prototype.s=function(){this.Ib||(this.fb&&p.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},p.ic.prototype.l=function(e){this.Jb=e,p.a.K.za(e,this.fb=this.s.bind(this))},p.T=function(){p.a.Ab(this,_),_.qb(this)};var _={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var i=this;n=n||"change";var o=new p.ic(i,t?e.bind(t):e,(function(){p.a.Pa(i.U[n],o),i.hb&&i.hb(n)}));return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(o),o},notifySubscribers:function(e,t){if(t=t||"change","change"===t&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{p.u.xc();for(var i,o=0;i=n[o];++o)i.Ib||i.lc(e)}finally{p.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,i,o,r,a=this,s=p.O(a);a.gb||(a.gb=a.notifySubscribers,a.notifySubscribers=h);var c=e((function(){a.Ja=!1,s&&o===a&&(o=a.nc?a.nc():a());var e=n||r&&a.sb(i,o);r=n=t=!1,e&&a.gb(i=o)}));a.qc=function(e,n){n&&a.Ja||(r=!n),a.ed=a.U.change.slice(0),a.Ja=t=!0,o=e,c()},a.pc=function(e){t||(i=e,a.gb(e,"beforeChange"))},a.rc=function(){r=!0},a.gd=function(){a.sb(i,a.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return p.a.P(this.U,(function(e,n){"dirty"!==e&&(t+=n.length)})),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&p.a.P(e,(function(e,n){var i=p.Ta[e];"function"==typeof i&&(t=i(t,n)||t)})),t}};p.L(_,"init",_.qb),p.L(_,"subscribe",_.subscribe),p.L(_,"extend",_.extend),p.L(_,"getSubscriptionsCount",_.Bd),p.a.Ba&&p.a.setPrototypeOf(_,Function.prototype),p.T.fn=_,p.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},p.b("subscribable",p.T),p.b("isSubscribable",p.Qc),p.S=p.u=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],o=0;return{xc:e,end:t,cc:function(e){if(n){if(!p.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++o))}},G:function(n,i,o){try{return e(),n.apply(i,o||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),p.b("computedContext",p.S),p.b("computedContext.getDependenciesCount",p.S.qa),p.b("computedContext.getDependencies",p.S.Va),p.b("computedContext.isInitial",p.S.Ya),p.b("computedContext.registerDependency",p.S.cc),p.b("ignoreDependencies",p.Yd=p.u.G);var g=p.a.Da("_latestValue");p.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[g],arguments[0])&&(t.ya(),t[g]=arguments[0],t.xa()),this):(p.u.cc(t),t[g])}return t[g]=e,p.a.Ba||p.a.extend(t,p.T.fn),p.T.fn.qb(t),p.a.Ab(t,b),p.options.deferUpdates&&p.Ta.deferred(t,!0),t};var b={equalityComparer:c,v:function(){return this[g]},xa:function(){this.notifySubscribers(this[g],"spectate"),this.notifySubscribers(this[g])},ya:function(){this.notifySubscribers(this[g],"beforeChange")}};p.a.Ba&&p.a.setPrototypeOf(b,p.T.fn);var y=p.ta.Ma="__ko_proto__";b[y]=p.ta,p.O=function(e){if((e="function"==typeof e&&e[y])&&e!==b[y]&&e!==p.o.fn[y])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},p.Za=function(e){return"function"==typeof e&&(e[y]===b[y]||e[y]===p.o.fn[y]&&e.Nc)},p.b("observable",p.ta),p.b("isObservable",p.O),p.b("isWriteableObservable",p.Za),p.b("isWritableObservable",p.Za),p.b("observable.fn",b),p.L(b,"peek",b.v),p.L(b,"valueHasMutated",b.xa),p.L(b,"valueWillMutate",b.ya),p.Ha=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=p.ta(e),p.a.Ab(e,p.Ha.fn),e.extend({trackArrayChanges:!0})},p.Ha.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||p.O(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var r=t[o];if(i(r)){if(0===n.length&&this.ya(),t[o]!==r)throw Error("Array modified during remove; cannot remove item");n.push(r),t.splice(o,1),o--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return t?this.remove((function(e){return 0<=p.a.A(t,e)})):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||p.O(e)?function(t){return t===e}:e;this.ya();for(var i=t.length-1;0<=i;i--){var o=t[i];n(o)&&(o._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy((function(){return!0})):t?this.destroy((function(e){return 0<=p.a.A(t,e)})):[]},indexOf:function(e){var t=this();return p.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},p.a.Ba&&p.a.setPrototypeOf(p.Ha.fn,p.ta.fn),p.a.D("pop push reverse shift sort splice unshift".split(" "),(function(e){p.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}})),p.a.D(["slice"],(function(e){p.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}})),p.Pc=function(e){return p.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},p.b("observableArray",p.Ha),p.b("isObservableArray",p.Pc),p.Ta.trackArrayChanges=function(t,n){function i(){function e(){if(l){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!c||1<l)&&(c=p.a.Pb(a,n,t.Ob)),e=c),a=n,c=null,l=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}s?e():(s=!0,r=t.subscribe((function(){++l}),null,"spectate"),a=[].concat(t.v()||[]),c=null,o=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&p.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var o,r,a,s=!1,c=null,l=0,u=t.Qa,h=t.hb;t.Qa=function(e){u&&u.call(t,e),"arrayChange"===e&&i()},t.hb=function(n){h&&h.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(o&&o.s(),r&&r.s(),r=o=null,s=!1,a=e)},t.zc=function(e,t,n){function i(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(s&&!l){var o=[],r=e.length,a=n.length,u=0;switch(t){case"push":u=r;case"unshift":for(t=0;t<a;t++)i("added",n[t],u+t);break;case"pop":u=r-1;case"shift":r&&i("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>n[0]?r+n[0]:n[0]),r);r=1===a?r:Math.min(t+(n[1]||0),r),a=t+a-2,u=Math.max(r,a);for(var h=[],d=[],f=2;t<u;++t,++f)t<r&&d.push(i("deleted",e[t],t)),t<a&&h.push(i("added",n[f],t));p.a.Kc(d,h);break;default:return}c=o}}}};var v=p.a.Da("_state");p.o=p.$=function(t,n,i){function o(){if(0<arguments.length){if("function"!==typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(a.nb,arguments),this}return a.ra||p.u.cc(o),(a.ka||a.J&&o.Xa())&&o.ha(),a.X}if("object"===typeof t?i=t:(i=i||{},t&&(i.read=t)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var r=i.write,a={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return o[v]=a,o.Nc="function"===typeof r,p.a.Ba||p.a.extend(o,p.T.fn),p.T.fn.qb(o),p.a.Ab(o,O),i.pure?(a.wb=!0,a.J=!0,p.a.extend(o,A)):i.deferEvaluation&&p.a.extend(o,w),p.options.deferUpdates&&p.Ta.deferred(o,!0),a.l&&(a.jc=!0,a.l.nodeType||(a.l=null)),a.J||i.deferEvaluation||o.ha(),a.l&&o.ja()&&p.a.K.za(a.l,a.Rb=function(){o.s()}),o};var O={equalityComparer:c,qa:function(){return this[v].V},Va:function(){var e=[];return p.a.P(this[v].I,(function(t,n){e[n.Ka]=n.da})),e},Vb:function(e){if(!this[v].V)return!1;var t=this.Va();return-1!==p.a.A(t,e)||!!p.a.Lb(t,(function(t){return t.Vb&&t.Vb(e)}))},uc:function(e,t,n){if(this[v].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[v].I[e]=n,n.Ka=this[v].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[v].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[v].rb&&this.Ia(!1)},ja:function(){var e=this[v];return e.ka||0<e.V},Rd:function(){this.Ja?this[v].ka&&(this[v].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[v].Ic),this[v].Ic=p.a.setTimeout((function(){e.ha(!0)}),t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[v],n=t.Sa,i=!1;if(!t.rb&&!t.ra){if(t.l&&!p.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{i=this.zd(e)}finally{t.rb=!1}return i}},zd:function(t){var n=this[v],i=!1,o=n.wb?e:!n.V;i={qd:this,mb:n.I,Qb:n.V};p.u.xc({pd:i,od:f,o:this,Ya:o}),n.I={},n.V=0;var r=this.yd(n,i);return n.V?i=this.sb(n.X,r):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=r,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),o&&this.notifySubscribers(n.X,"awake"),i},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{p.u.end(),t.Qb&&!e.J&&p.a.P(t.mb,d),e.sa=e.ka=!1}},v:function(e){var t=this[v];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){p.T.fn.ub.call(this,e),this.nc=function(){return this[v].J||(this[v].sa?this.ha():this[v].ka=!1),this[v].X},this.Ia=function(e){this.pc(this[v].X),this[v].ka=!0,e&&(this[v].sa=!0),this.qc(this,!e)}},s:function(){var t=this[v];!t.J&&t.I&&p.a.P(t.I,(function(e,t){t.s&&t.s()})),t.l&&t.Rb&&p.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},A={Qa:function(e){var t=this,n=t[v];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var i=[];p.a.P(n.I,(function(e,t){i[t.Ka]=e})),p.a.D(i,(function(e,i){var o=n.I[e],r=t.$c(o.da);r.Ka=i,r.La=o.La,n.I[e]=r})),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[v];n.ra||"change"!=t||this.Wa("change")||(p.a.P(n.I,(function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())})),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[v];return e.J&&(e.sa||this.Xa())&&this.ha(),p.T.fn.ob.call(this)}},w={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};p.a.Ba&&p.a.setPrototypeOf(O,p.T.fn);var T=p.ta.Ma;O[T]=p.o,p.Oc=function(e){return"function"==typeof e&&e[T]===O[T]},p.Fd=function(e){return p.Oc(e)&&e[v]&&e[v].wb},p.b("computed",p.o),p.b("dependentObservable",p.o),p.b("isComputed",p.Oc),p.b("isPureComputed",p.Fd),p.b("computed.fn",O),p.L(O,"peek",O.v),p.L(O,"dispose",O.s),p.L(O,"isActive",O.ja),p.L(O,"getDependenciesCount",O.qa),p.L(O,"getDependencies",O.Va),p.xb=function(e,t){return"function"===typeof e?p.o(e,t,{pure:!0}):(e=p.a.extend({},e),e.pure=!0,p.o(e,t))},p.b("pureComputed",p.xb),function(){function t(o,r,a){if(a=a||new i,o=r(o),"object"!=typeof o||null===o||o===e||o instanceof RegExp||o instanceof Date||o instanceof String||o instanceof Number||o instanceof Boolean)return o;var s=o instanceof Array?[]:{};return a.save(o,s),n(o,(function(n){var i=r(o[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":s[n]=i;break;case"object":case"undefined":var c=a.get(i);s[n]=c!==e?c:t(i,r,a)}})),s}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function i(){this.keys=[],this.values=[]}p.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,(function(e){for(var t=0;p.O(e)&&10>t;t++)e=e();return e}))},p.toJSON=function(e,t,n){return e=p.ad(e),p.a.hc(e,t,n)},i.prototype={constructor:i,save:function(e,t){var n=p.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return t=p.a.A(this.keys,t),0<=t?this.values[t]:e}}}(),p.b("toJS",p.ad),p.b("toJSON",p.toJSON),p.Wd=function(e,t,n){function i(t){var i=p.xb(e,n).extend({ma:"always"}),o=i.subscribe((function(e){e&&(o.s(),t(e))}));return i.notifySubscribers(i.v()),o}return"function"!==typeof Promise||t?i(t.bind(n)):new Promise(i)},p.b("when",p.Wd),function(){p.w={M:function(t){switch(p.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?p.a.g.get(t,p.c.options.$b):7>=p.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?p.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,i){switch(p.a.R(t)){case"option":"string"===typeof n?(p.a.g.set(t,p.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(p.a.g.set(t,p.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"===typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var o,r=-1,a=0,s=t.options.length;a<s;++a)if(o=p.w.M(t.options[a]),o==n||""===o&&n===e){r=a;break}(i||0<=r||n===e&&1<t.size)&&(t.selectedIndex=r,6===p.a.W&&p.a.setTimeout((function(){t.selectedIndex=r}),0));break;default:null!==n&&n!==e||(n=""),t.value=n}}}}(),p.b("selectExtensions",p.w),p.b("selectExtensions.readValue",p.w.M),p.b("selectExtensions.writeValue",p.w.cb),p.m=function(){function e(e){e=p.a.Db(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1)),e+="\n,";var t,n=[],a=e.match(i),s=[],c=0;if(1<a.length){for(var l,u=0;l=a[u];++u){var h=l.charCodeAt(0);if(44===h){if(0>=c){n.push(t&&s.length?{key:t,value:s.join("")}:{unknown:t||s.join("")}),t=c=0,s=[];continue}}else if(58===h){if(!c&&!t&&1===s.length){t=s.pop();continue}}else{if(47===h&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===h&&u&&1<l.length?(h=a[u-1].match(o))&&!r[h[0]]&&(e=e.substr(e.indexOf(l)+1),a=e.match(i),u=-1,l="/"):40===h||123===h||91===h?++c:41===h||125===h||93===h?--c:t||s.length||34!==h&&39!==h||(l=l.slice(1,-1))}s.push(l)}if(0<c)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),o=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},a={};return{Ra:[],wa:a,ac:e,vb:function(i,o){function r(e,i){var o;if(!u){var h=p.getBindingHandler(e);if(h&&h.preprocess&&!(i=h.preprocess(i,e,r)))return;(h=a[e])&&(o=i,0<=p.a.A(t,o)?o=!1:(h=o.match(n),o=null!==h&&(h[1]?"Object("+h[1]+")"+h[2]:o)),h=o),h&&c.push("'"+("string"==typeof a[e]?a[e]:e)+"':function(_z){"+o+"=_z}")}l&&(i="function(){return "+i+" }"),s.push("'"+e+"':"+i)}o=o||{};var s=[],c=[],l=o.valueAccessors,u=o.bindingParams,h="string"===typeof i?e(i):i;return p.a.D(h,(function(e){r(e.key||e.unknown,e.value)})),c.length&&r("_ko_property_writers","{"+c.join(",")+" }"),s.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,i,o){e&&p.O(e)?!p.Za(e)||o&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),p.b("expressionRewriting",p.m),p.b("expressionRewriting.bindingRewriteValidators",p.m.Ra),p.b("expressionRewriting.parseObjectLiteral",p.m.ac),p.b("expressionRewriting.preProcessBindings",p.m.vb),p.b("expressionRewriting._twoWayBindings",p.m.wa),p.b("jsonExpressionRewriting",p.m),p.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",p.m.vb),function(){function e(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function i(n,i){for(var o=n,r=1,a=[];o=o.nextSibling;){if(t(o)&&(p.a.g.set(o,l,!0),r--,0===r))return a;a.push(o),e(o)&&r++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"\x3c!--test--\x3e"===n.createComment("test").text,a=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,c={ul:!0,ol:!0},l="__ko_matchedEndComment__";p.h={ea:{},childNodes:function(t){return e(t)?i(t):t.childNodes},Ea:function(t){if(e(t)){t=p.h.childNodes(t);for(var n=0,i=t.length;n<i;n++)p.removeNode(t[n])}else p.a.Tb(t)},va:function(t,n){if(e(t)){p.h.Ea(t);for(var i=t.nextSibling,o=0,r=n.length;o<r;o++)i.parentNode.insertBefore(n[o],i)}else p.a.va(t,n)},Vc:function(t,n){var i;e(t)?(i=t.nextSibling,t=t.parentNode):i=t.firstChild,i?n!==i&&t.insertBefore(n,i):t.appendChild(n)},Wb:function(t,n,i){i?(i=i.nextSibling,e(t)&&(t=t.parentNode),i?n!==i&&t.insertBefore(n,i):t.appendChild(n)):p.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)){var i=n.nextSibling;if(t(i)&&!p.a.g.get(i,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(r?e.text:e.nodeValue).match(a))?e[1]:null},Sc:function(n){if(c[p.a.R(n)]){var i=n.firstChild;if(i)do{if(1===i.nodeType){var r;r=i.firstChild;var a=null;if(r)do{if(a)a.push(r);else if(e(r)){var s=o(r,!0);s?r=s:a=[r]}else t(r)&&(a=[r])}while(r=r.nextSibling);if(r=a)for(a=i.nextSibling,s=0;s<r.length;s++)a?n.insertBefore(r[s],a):n.appendChild(r[s])}}while(i=i.nextSibling)}}}}(),p.b("virtualElements",p.h),p.b("virtualElements.allowedBindings",p.h.ea),p.b("virtualElements.emptyNode",p.h.Ea),p.b("virtualElements.insertAfter",p.h.Wb),p.b("virtualElements.prepend",p.h.Vc),p.b("virtualElements.setDomNodeChildren",p.h.va),function(){p.ga=function(){this.nd={}},p.a.extend(p.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||p.j.getComponentNameForNode(e);case 8:return p.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);n=n?this.parseBindingsString(n,t,e):null;return p.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);n=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return p.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return p.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var o,r=this.nd,a=e+(i&&i.valueAccessors||"");if(!(o=r[a])){var s,c="with($context){with($data||{}){return{"+p.m.vb(e,i)+"}}}";s=new Function("$context","$element",c),o=r[a]=s}return o(t,n)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+l.message,l}}}),p.ga.instance=new p.ga}(),p.b("bindingProvider",p.ga),function(){function i(e){var t=(e=p.a.g.get(e,A))&&e.N;t&&(e.N=null,t.Tc())}function r(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||p.a.K.za(e,i),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function a(e){return function(){return e}}function s(e){return e()}function c(e){return p.a.Ga(p.u.G(e),(function(t,n){return function(){return e()[n]}}))}function l(e,t,n){return"function"===typeof e?c(e.bind(null,t,n)):p.a.Ga(e,a)}function u(e,t){return c(this.getBindings.bind(this,e,t))}function h(e,t){var n=p.h.firstChild(t);if(n){var i,o=p.ga.instance,r=o.preprocessNode;if(r){for(;i=n;)n=p.h.nextSibling(i),r.call(o,i);n=p.h.firstChild(t)}for(;i=n;)n=p.h.nextSibling(i),d(e,i)}p.i.ma(t,p.i.H)}function d(e,t){var n=e,i=1===t.nodeType;i&&p.h.Sc(t),(i||p.ga.instance.nodeHasBindings(t))&&(n=m(t,null,e).bindingContextForDescendants),n&&!v[p.a.R(t)]&&h(n,t)}function f(e){var t=[],n={},i=[];return p.a.P(e,(function o(r){if(!n[r]){var a=p.getBindingHandler(r);a&&(a.after&&(i.push(r),p.a.D(a.after,(function(t){if(e[t]){if(-1!==p.a.A(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));o(t)}})),i.length--),t.push({key:r,Mc:a})),n[r]=!0}})),t}function m(t,n,i){var o,r=p.a.g.Ub(t,A,{}),a=r.hd;if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");r.hd=!0}if(a||(r.context=i),r.Zb||(r.Zb={}),n&&"function"!==typeof n)o=n;else{var c=p.ga.instance,l=c.getBindingAccessors||u,h=p.$((function(){return(o=n?n(i,t):l.call(c,t,i))&&(i[g]&&i[g](),i[y]&&i[y]()),o}),null,{l:t});o&&h.ja()||(h=null)}var d,m=i;if(o){var _=function(){return p.a.Ga(h?h():o,s)},b=h?function(e){return function(){return s(h()[e])}}:function(e){return o[e]};_.get=function(e){return o[e]&&s(b(e))},_.has=function(e){return e in o},p.i.H in o&&p.i.subscribe(t,p.i.H,(function(){var e=(0,o[p.i.H])();if(e){var n=p.h.childNodes(t);n.length&&e(n,p.Ec(n[0]))}})),p.i.pa in o&&(m=p.i.Cb(t,i),p.i.subscribe(t,p.i.pa,(function(){var e=(0,o[p.i.pa])();e&&p.h.firstChild(t)&&e(t)}))),r=f(o),p.a.D(r,(function(n){var i=n.Mc.init,r=n.Mc.update,s=n.key;if(8===t.nodeType&&!p.h.ea[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&p.u.G((function(){var n=i(t,b(s),_,m.$data,m);if(n&&n.controlsDescendantBindings){if(d!==e)throw Error("Multiple bindings ("+d+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");d=s}})),"function"==typeof r&&p.$((function(){r(t,b(s),_,m.$data,m)}),null,{l:t})}catch(a){throw a.message='Unable to process binding "'+s+": "+o[s]+'"\nMessage: '+a.message,a}}))}return r=d===e,{shouldBindDescendants:r,bindingContextForDescendants:r&&m}}function _(t,n){return t&&t instanceof p.fa?t:new p.fa(t,e,e,n)}var g=p.a.Da("_subscribable"),b=p.a.Da("_ancestorBindingInfo"),y=p.a.Da("_dataDependency");p.c={};var v={script:!0,textarea:!0,template:!0};p.getBindingHandler=function(e){return p.c[e]};var O={};p.fa=function(t,n,i,o,r){function a(){var e=h?u():u,t=p.a.f(e);return n?(p.a.extend(c,n),b in n&&(c[b]=n[b])):(c.$parents=[],c.$root=t,c.ko=p),c[g]=s,l?t=c.$data:(c.$rawData=e,c.$data=t),i&&(c[i]=t),o&&o(c,n,t),n&&n[g]&&!p.S.o().Vb(n[g])&&n[g](),d&&(c[y]=d),c.$data}var s,c=this,l=t===O,u=l?e:t,h="function"==typeof u&&!p.O(u),d=r&&r.dataDependency;r&&r.exportDependencies?a():(s=p.xb(a),s.v(),s.ja()?s.equalityComparer=null:c[g]=e)},p.fa.prototype.createChildContext=function(e,t,n,i){if(!i&&t&&"object"==typeof t&&(i=t,t=i.as,n=i.extend),t&&i&&i.noChildContext){var o="function"==typeof e&&!p.O(e);return new p.fa(O,this,null,(function(i){n&&n(i),i[t]=o?e():e}),i)}return new p.fa(e,this,t,(function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)}),i)},p.fa.prototype.extend=function(e,t){return new p.fa(O,this,null,(function(t){p.a.extend(t,"function"==typeof e?e(t):e)}),t)};var A=p.a.g.Z();r.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},r.prototype.sd=function(e){p.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},r.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,p.a.K.yb(this.node,i),p.i.ma(this.node,p.i.pa),this.Tc())},p.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,i,o){var r=p.a.g.Ub(e,A,{});return r.Fa||(r.Fa=new p.T),o&&o.notifyImmediately&&r.Zb[t]&&p.u.G(n,i,[e]),r.Fa.subscribe(n,i,t)},ma:function(t,n){var i=p.a.g.get(t,A);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(t,n),n==p.i.H))if(i.N)i.N.Cc();else if(i.N===e&&i.Fa&&i.Fa.Wa(p.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=p.a.g.Ub(e,A,{});return n.N||(n.N=new r(e,n,t[b])),t[b]==n?t:t.extend((function(e){e[b]=n}))}},p.Td=function(e){return(e=p.a.g.get(e,A))&&e.context},p.ib=function(e,t,n){return 1===e.nodeType&&p.h.Sc(e),m(e,t,_(n))},p.ld=function(e,t,n){return n=_(n),p.ib(e,l(t,n,e),n)},p.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||h(_(e),t)},p.vc=function(e,i,r){if(!o&&t.jQuery&&(o=t.jQuery),2>arguments.length){if(i=n.body,!i)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!i||1!==i.nodeType&&8!==i.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");d(_(e,r),i)},p.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:p.Td(t)},p.Ec=function(t){return(t=p.Dc(t))?t.$data:e},p.b("bindingHandlers",p.c),p.b("bindingEvent",p.i),p.b("bindingEvent.subscribe",p.i.subscribe),p.b("bindingEvent.startPossiblyAsyncContentBinding",p.i.Cb),p.b("applyBindings",p.vc),p.b("applyBindingsToDescendants",p.Oa),p.b("applyBindingAccessorsToNode",p.ib),p.b("applyBindingsToNode",p.ld),p.b("contextFor",p.Dc),p.b("dataFor",p.Ec)}(),function(e){function t(t,i){var a,s=Object.prototype.hasOwnProperty.call(o,t)?o[t]:e;s?s.subscribe(i):(s=o[t]=new p.T,s.subscribe(i),n(t,(function(e,n){var i=!(!n||!n.synchronous);r[t]={definition:e,Gd:i},delete o[t],a||i?s.notifySubscribers(e):p.na.zb((function(){s.notifySubscribers(e)}))})),a=!0)}function n(e,t){i("getConfig",[e],(function(n){n?i("loadComponent",[e,n],(function(e){t(e,n)})):t(null,null)}))}function i(t,n,o,r){r||(r=p.j.loaders.slice(0));var a=r.shift();if(a){var s=a[t];if(s){var c=!1;if(s.apply(a,n.concat((function(e){c?o(null):null!==e?o(e):i(t,n,o,r)})))!==e&&(c=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var o={},r={};p.j={get:function(n,i){var o=Object.prototype.hasOwnProperty.call(r,n)?r[n]:e;o?o.Gd?p.u.G((function(){i(o.definition)})):p.na.zb((function(){i(o.definition)})):t(n,i)},Bc:function(e){delete r[e]},oc:i},p.j.loaders=[],p.b("components",p.j),p.b("components.get",p.j.get),p.b("components.clearCachedDefinition",p.j.Bc)}(),function(){function e(e,t,n,i){function o(){0===--s&&i(r)}var r={},s=2,c=n.template;n=n.viewModel,c?a(t,c,(function(t){p.j.oc("loadTemplate",[e,t],(function(e){r.template=e,o()}))})):o(),n?a(t,n,(function(t){p.j.oc("loadViewModel",[e,t],(function(e){r[u]=e,o()}))})):o()}function i(e,t,n){if("function"===typeof t)n((function(e){return new t(e)}));else if("function"===typeof t[u])n(t[u]);else if("instance"in t){var o=t.instance;n((function(){return o}))}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function o(e){switch(p.a.R(e)){case"script":return p.a.ua(e.text);case"textarea":return p.a.ua(e.value);case"template":if(r(e.content))return p.a.Ca(e.content.childNodes)}return p.a.Ca(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function a(e,n,i){"string"===typeof n.require?s||t.require?(s||t.require)([n.require],(function(e){e&&"object"===typeof e&&e.Xd&&e["default"]&&(e=e["default"]),i(e)})):e("Uses require, but no AMD loader is present"):i(n)}function c(e){return function(t){throw Error("Component '"+e+"': "+t)}}var l={};p.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(p.j.tb(e))throw Error("Component "+e+" is already registered");l[e]=t},p.j.tb=function(e){return Object.prototype.hasOwnProperty.call(l,e)},p.j.unregister=function(e){delete l[e],p.j.Bc(e)},p.j.Fc={getConfig:function(e,t){t(p.j.tb(e)?l[e]:null)},loadComponent:function(t,n,i){var o=c(t);a(o,n,(function(n){e(t,o,n,i)}))},loadTemplate:function(e,i,a){if(e=c(e),"string"===typeof i)a(p.a.ua(i));else if(i instanceof Array)a(i);else if(r(i))a(p.a.la(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)a(o(i));else if("string"===typeof i){var s=n.getElementById(i);s?a(o(s)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(c(e),t,n)}};var u="createViewModel";p.b("components.register",p.j.register),p.b("components.isRegistered",p.j.tb),p.b("components.unregister",p.j.unregister),p.b("components.defaultLoader",p.j.Fc),p.j.loaders.push(p.j.Fc),p.j.dd=l}(),function(){function e(e,n){var i=e.getAttribute("params");if(i){i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),i=p.a.Ga(i,(function(t){return p.o(t,null,{l:e})}));var o=p.a.Ga(i,(function(t){var n=t.v();return t.ja()?p.o({read:function(){return p.a.f(t())},write:p.Za(n)&&function(e){t()(e)},l:e}):n}));return Object.prototype.hasOwnProperty.call(o,"$raw")||(o.$raw=i),o}return{$raw:{}}}p.j.getComponentNameForNode=function(e){var t=p.a.R(e);if(p.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=p.a.W&&e.tagName===t))return t},p.j.tc=function(t,n,i,o){if(1===n.nodeType){var r=p.j.getComponentNameForNode(n);if(r){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:r,params:e(n,i)};t.component=o?function(){return a}:a}}return t};var t=new p.ga;9>p.a.W&&(p.j.register=function(e){return function(t){return e.apply(this,arguments)}}(p.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=p.j.dd;for(t in i);return n}}(n.createDocumentFragment))}(),function(){function e(e,t,n){if(t=t.template,!t)throw Error("Component '"+e+"' has no template");e=p.a.Ca(t),p.h.va(n,e)}function t(e,t,n){var i=e.createViewModel;return i?i.call(e,t,n):t}var n=0;p.c.component={init:function(i,o,r,a,s){function c(){var e=l&&l.dispose;"function"===typeof e&&e.call(l),h&&h.s(),u=l=h=null}var l,u,h,d=p.a.la(p.h.childNodes(i));return p.h.Ea(i),p.a.K.za(i,c),p.o((function(){var r,a,f=p.a.f(o());if("string"===typeof f?r=f:(r=p.a.f(f.name),a=p.a.f(f.params)),!r)throw Error("No component name specified");var m=p.i.Cb(i,s),_=u=++n;p.j.get(r,(function(n){if(u===_){if(c(),!n)throw Error("Unknown component '"+r+"'");e(r,n,i);var o=t(n,a,{element:i,templateNodes:d});n=m.createChildContext(o,{extend:function(e){e.$component=o,e.$componentTemplateNodes=d}}),o&&o.koDescendantsComplete&&(h=p.i.subscribe(i,p.i.pa,o.koDescendantsComplete,o)),l=o,p.Oa(n,i)}}))}),null,{l:i}),{controlsDescendantBindings:!0}}},p.h.ea.component=!0}();var C={class:"className",for:"htmlFor"};p.c.attr={update:function(t,n){var i=p.a.f(n())||{};p.a.P(i,(function(n,i){i=p.a.f(i);var o=n.indexOf(":"),r=(o="lookupNamespaceURI"in t&&0<o&&t.lookupNamespaceURI(n.substr(0,o)),!1===i||null===i||i===e);r?o?t.removeAttributeNS(o,n):t.removeAttribute(n):i=i.toString(),8>=p.a.W&&n in C?(n=C[n],r?t.removeAttribute(n):t[n]=i):r||(o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)),"name"===n&&p.a.Yc(t,r?"":i)}))}},function(){p.c.checked={after:["value","attr"],init:function(t,n,i){function o(){var o=t.checked,r=a();if(!p.S.Ya()&&(o||!c&&!p.S.qa())){var l=p.u.G(n);if(u){var d=h?l.v():l,m=f;f=r,m!==r?o&&(p.a.Na(d,r,!0),p.a.Na(d,m,!1)):p.a.Na(d,r,o),h&&p.Za(l)&&l(d)}else s&&(r===e?r=o:o||(r=e)),p.m.eb(l,i,"checked",r,!0)}}function r(){var i=p.a.f(n()),o=a();u?(t.checked=0<=p.a.A(i,o),f=o):t.checked=s&&o===e?!!i:a()===i}var a=p.xb((function(){return i.has("checkedValue")?p.a.f(i.get("checkedValue")):d?i.has("value")?p.a.f(i.get("value")):t.value:void 0})),s="checkbox"==t.type,c="radio"==t.type;if(s||c){var l=n(),u=s&&p.a.f(l)instanceof Array,h=!(u&&l.push&&l.splice),d=c||u,f=u?a():e;c&&!t.name&&p.c.uniqueName.init(t,(function(){return!0})),p.o(o,null,{l:t}),p.a.B(t,"click",o),p.o(r,null,{l:t}),l=e}}},p.m.wa.checked=!0,p.c.checkedValue={update:function(e,t){e.value=p.a.f(t())}}}(),p.c["class"]={update:function(e,t){var n=p.a.Db(p.a.f(t()));p.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,p.a.Eb(e,n,!0)}},p.c.css={update:function(e,t){var n=p.a.f(t());null!==n&&"object"==typeof n?p.a.P(n,(function(t,n){n=p.a.f(n),p.a.Eb(e,t,n)})):p.c["class"].update(e,t)}},p.c.enable={update:function(e,t){var n=p.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},p.c.disable={update:function(e,t){p.c.enable.update(e,(function(){return!p.a.f(t())}))}},p.c.event={init:function(e,t,n,i,o){var r=t()||{};p.a.P(r,(function(r){"string"==typeof r&&p.a.B(e,r,(function(e){var a,s=t()[r];if(s){try{var c=p.a.la(arguments);i=o.$data,c.unshift(i),a=s.apply(i,c)}finally{!0!==a&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}}))}))}},p.c.foreach={Rc:function(e){return function(){var t=e(),n=p.a.bc(t);return n&&"number"!=typeof n.length?(p.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:p.ba.Ma}):{foreach:t,templateEngine:p.ba.Ma}}},init:function(e,t){return p.c.template.init(e,p.c.foreach.Rc(t))},update:function(e,t,n,i,o){return p.c.template.update(e,p.c.foreach.Rc(t),n,i,o)}},p.m.Ra.foreach=!1,p.h.ea.foreach=!0,p.c.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var o=e.ownerDocument;if("activeElement"in o){var r;try{r=o.activeElement}catch(a){r=o.body}i=r===e}o=t(),p.m.eb(o,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var o=i.bind(null,!0),r=i.bind(null,!1);p.a.B(e,"focus",o),p.a.B(e,"focusin",o),p.a.B(e,"blur",r),p.a.B(e,"focusout",r),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!p.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),p.u.G(p.a.Fb,null,[e,n?"focusin":"focusout"]))}},p.m.wa.hasfocus=!0,p.c.hasFocus=p.c.hasfocus,p.m.wa.hasFocus="hasfocus",p.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){p.a.fc(e,t())}},function(){function e(e,t,n){p.c[e]={init:function(e,i,o,r,a){var s,c,l,u,h,d={};if(t){r=o.get("as");var f=o.get("noChildContext");h=!(r&&f),d={as:r,noChildContext:f,exportDependencies:h}}return u=(l="render"==o.get("completeOn"))||o.has(p.i.pa),p.o((function(){var o,r=p.a.f(i()),f=!n!==!r,m=!c;(h||f!==s)&&(u&&(a=p.i.Cb(e,a)),f&&(t&&!h||(d.dataDependency=p.S.o()),o=t?a.createChildContext("function"==typeof r?r:i,d):p.S.qa()?a.extend(null,d):a),m&&p.S.qa()&&(c=p.a.Ca(p.h.childNodes(e),!0)),f?(m||p.h.va(e,p.a.Ca(c)),p.Oa(o,e)):(p.h.Ea(e),l||p.i.ma(e,p.i.H)),s=f)}),null,{l:e}),{controlsDescendantBindings:!0}}},p.m.Ra[e]=!1,p.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),p.c.let={init:function(e,t,n,i,o){return t=o.extend(t),p.Oa(t,e),{controlsDescendantBindings:!0}}},p.h.ea.let=!0;var E={};p.c.options={init:function(e){if("select"!==p.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function o(){return p.a.jb(t.options,(function(e){return e.selected}))}function r(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function a(e,n){if(_&&u)p.i.ma(t,p.i.H);else if(f.length){var i=0<=p.a.A(f,p.w.M(n[0]));p.a.Zc(n[0],i),_&&!i&&p.u.G(p.a.Fb,null,[t,"change"])}}var s=t.multiple,c=0!=t.length&&s?t.scrollTop:null,l=p.a.f(n()),u=i.get("valueAllowUnset")&&i.has("value"),h=i.get("optionsIncludeDestroyed");n={};var d,f=[];u||(s?f=p.a.Mb(o(),p.w.M):0<=t.selectedIndex&&f.push(p.w.M(t.options[t.selectedIndex]))),l&&("undefined"==typeof l.length&&(l=[l]),d=p.a.jb(l,(function(t){return h||t===e||null===t||!p.a.f(t._destroy)})),i.has("optionsCaption")&&(l=p.a.f(i.get("optionsCaption")),null!==l&&l!==e&&d.unshift(E)));var m,_=!1;(n.beforeRemove=function(e){t.removeChild(e)},l=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(t,n){a(0,n),p.u.G(i.get("optionsAfterRender"),null,[n[0],t!==E?t:e])}),p.a.ec(t,d,(function(n,o,a){return a.length&&(f=!u&&a[0].selected?[p.w.M(a[0])]:[],_=!0),o=t.ownerDocument.createElement("option"),n===E?(p.a.Bb(o,i.get("optionsCaption")),p.w.cb(o,e)):(a=r(n,i.get("optionsValue"),n),p.w.cb(o,p.a.f(a)),n=r(n,i.get("optionsText"),a),p.a.Bb(o,n)),[o]}),n,l),u)||(m=s?f.length&&o().length<f.length:f.length&&0<=t.selectedIndex?p.w.M(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex,m&&p.u.G(p.a.Fb,null,[t,"change"]));(u||p.S.Ya())&&p.i.ma(t,p.i.H),p.a.wd(t),c&&20<Math.abs(c-t.scrollTop)&&(t.scrollTop=c)}},p.c.options.$b=p.a.g.Z(),p.c.selectedOptions={init:function(e,t,n){function i(){var i=t(),o=[];p.a.D(e.getElementsByTagName("option"),(function(e){e.selected&&o.push(p.w.M(e))})),p.m.eb(i,n,"selectedOptions",o)}function o(){var n=p.a.f(t()),i=e.scrollTop;n&&"number"==typeof n.length&&p.a.D(e.getElementsByTagName("option"),(function(e){var t=0<=p.a.A(n,p.w.M(e));e.selected!=t&&p.a.Zc(e,t)})),e.scrollTop=i}if("select"!=p.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var r;p.i.subscribe(e,p.i.H,(function(){r?i():(p.a.B(e,"change",i),r=p.o(o,null,{l:e}))}),null,{notifyImmediately:!0})},update:function(){}},p.m.wa.selectedOptions=!0,p.c.style={update:function(t,n){var i=p.a.f(n()||{});p.a.P(i,(function(n,i){if(i=p.a.f(i),null!==i&&i!==e&&!1!==i||(i=""),o)o(t).css(n,i);else if(/^--/.test(n))t.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));var r=t.style[n];t.style[n]=i,i===r||t.style[n]!=r||isNaN(i)||(t.style[n]=i+"px")}}))}},p.c.submit={init:function(e,t,n,i,o){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");p.a.B(e,"submit",(function(n){var i,r=t();try{i=r.call(o.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}}))}},p.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){p.a.Bb(e,t())}},p.h.ea.text=!0,function(){if(t&&t.navigator){var n,i,o,r,a,s=function(e){if(e)return parseFloat(e[1])},c=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(a=s(c.match(/Edge\/([^ ]+)$/)))||s(c.match(/Chrome\/([^ ]+)/))||(i=s(c.match(/Version\/([^ ]+) Safari/)))||(o=s(c.match(/Firefox\/([^ ]+)/)))||(r=p.a.W||s(c.match(/MSIE ([^ ]+)/)))||(r=s(c.match(/rv:([^ )]+)/)))}if(8<=r&&10>r)var l=p.a.g.Z(),u=p.a.g.Z(),h=function(e){var t=this.activeElement;(t=t&&p.a.g.get(t,u))&&t(e)},d=function(e,t){var n=e.ownerDocument;p.a.g.get(n,l)||(p.a.g.set(n,l,!0),p.a.B(n,"selectionchange",h)),p.a.g.set(e,u,t)};p.c.textInput={init:function(t,s,c){function l(e,n){p.a.B(t,e,n)}function u(){var n=p.a.f(s());null!==n&&n!==e||(n=""),_!==e&&n===_?p.a.setTimeout(u,4):t.value!==n&&(y=!0,t.value=n,y=!1,g=t.value)}function h(){m||(_=t.value,m=p.a.setTimeout(f,4))}function f(){clearTimeout(m),_=m=e;var n=t.value;g!==n&&(g=n,p.m.eb(s(),c,"textInput",n))}var m,_,g=t.value,b=9==p.a.W?h:f,y=!1;r&&l("keypress",f),11>r&&l("propertychange",(function(e){y||"value"!==e.propertyName||b(e)})),8==r&&(l("keyup",f),l("keydown",f)),d&&(d(t,b),l("dragend",h)),(!r||9<=r)&&l("input",b),5>i&&"textarea"===p.a.R(t)?(l("keydown",h),l("paste",h),l("cut",h)):11>n?l("keydown",h):4>o?(l("DOMAutoComplete",f),l("dragdrop",f),l("drop",f)):a&&"number"===t.type&&l("keydown",h),l("change",f),l("blur",f),p.o(u,null,{l:t})}},p.m.wa.textInput=!0,p.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),p.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++p.c.uniqueName.rd;p.a.Yc(e,n)}}},p.c.uniqueName.rd=0,p.c.using={init:function(e,t,n,i,o){var r;return n.has("as")&&(r={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=o.createChildContext(t,r),p.Oa(t,e),{controlsDescendantBindings:!0}}},p.h.ea.using=!0,p.c.value={init:function(t,n,i){var o=p.a.R(t),r="input"==o;if(!r||"checkbox"!=t.type&&"radio"!=t.type){var a=[],s=i.get("valueUpdate"),c=!1,l=null;s&&(a="string"==typeof s?[s]:p.a.wc(s),p.a.Pa(a,"change"));var u,h,d=function(){l=null,c=!1;var e=n(),o=p.w.M(t);p.m.eb(e,i,"value",o)};if(!p.a.W||!r||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=p.a.A(a,"propertychange")||(p.a.B(t,"propertychange",(function(){c=!0})),p.a.B(t,"focus",(function(){c=!1})),p.a.B(t,"blur",(function(){c&&d()}))),p.a.D(a,(function(e){var n=d;p.a.Ud(e,"after")&&(n=function(){l=p.w.M(t),p.a.setTimeout(d,0)},e=e.substring(5)),p.a.B(t,e,n)})),u=r&&"file"==t.type?function(){var i=p.a.f(n());null===i||i===e||""===i?t.value="":p.u.G(d)}:function(){var r=p.a.f(n()),a=p.w.M(t);null!==l&&r===l?p.a.setTimeout(u,0):r===a&&a!==e||("select"===o?(a=i.get("valueAllowUnset"),p.w.cb(t,r,a),a||r===p.w.M(t)||p.u.G(d)):p.w.cb(t,r))},"select"===o)p.i.subscribe(t,p.i.H,(function(){h?i.get("valueAllowUnset")?u():d():(p.a.B(t,"change",d),h=p.o(u,null,{l:t}))}),null,{notifyImmediately:!0});else p.a.B(t,"change",d),p.o(u,null,{l:t})}else p.ib(t,{checkedValue:n})},update:function(){}},p.m.wa.value=!0,p.c.visible={update:function(e,t){var n=p.a.f(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},p.c.hidden={update:function(e,t){p.c.visible.update(e,(function(){return!p.a.f(t())}))}},function(e){p.c[e]={init:function(t,n,i,o,r){return p.c.event.init.call(this,t,(function(){var t={};return t[e]=n(),t}),i,o,r)}}}("click"),p.ca=function(){},p.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},p.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},p.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||n;var i=t.getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new p.C.F(i)}if(1==e.nodeType||8==e.nodeType)return new p.C.ia(e);throw Error("Unknown template type: "+e)},p.ca.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n,i)},p.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},p.ca.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},p.b("templateEngine",p.ca),p.kc=function(){function e(e,t,n,i){e=p.m.ac(e);for(var o=p.m.Ra,r=0;r<e.length;r++){var a=e[r].key;if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a];if("function"===typeof s){if(a=s(e[r].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+p.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,(function(e){return p.kc.Ld(e,t)}),n)},Ld:function(i,o){return i.replace(t,(function(t,n,i,r,a){return e(a,n,i,o)})).replace(n,(function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",o)}))},md:function(e,t){return p.aa.Xb((function(n,i){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&p.ib(o,e,i)}))}}}(),p.b("__tr_ambtns",p.kc.md),function(){p.C={},p.C.F=function(e){if(this.F=e){var t=p.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},p.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?p.a.fc(this.F,t):this.F[e]=t};var t=p.a.g.Z()+"_";p.C.F.prototype.data=function(e){if(1===arguments.length)return p.a.g.get(this.F,t+e);p.a.g.set(this.F,t+e,arguments[1])};var n=p.a.g.Z();p.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var i=p.a.g.get(t,n)||{},o=i.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!o||i.jd){var r=this.text();r&&r!==i.bb&&(o=p.a.Md(r,t.ownerDocument),p.a.g.set(t,n,{lb:o,bb:r,jd:!0}))}return o}i=arguments[0],this.ab!==e&&this.text(""),p.a.g.set(t,n,{lb:i})},p.C.ia=function(e){this.F=e},p.C.ia.prototype=new p.C.F,p.C.ia.prototype.constructor=p.C.ia,p.C.ia.prototype.text=function(){if(0==arguments.length){var t=p.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}p.a.g.set(this.F,n,{bb:arguments[0]})},p.b("templateSources",p.C),p.b("templateSources.domElement",p.C.F),p.b("templateSources.anonymousTemplate",p.C.ia)}(),function(){function t(e,t,n){var i;for(t=p.h.nextSibling(t);e&&(i=e)!==t;)e=p.h.nextSibling(i),n(i,e)}function n(e,n){if(e.length){var i=e[0],o=e[e.length-1],r=i.parentNode,a=p.ga.instance,s=a.preprocessNode;if(s){if(t(i,o,(function(e,t){var n=e.previousSibling,r=s.call(a,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))})),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),p.a.Ua(e,r))}t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||p.vc(n,e)})),t(i,o,(function(e){1!==e.nodeType&&8!==e.nodeType||p.aa.cd(e,[n])})),p.a.Ua(e,r)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function o(e,t,o,r,s){s=s||{};var c=(e&&i(e)||o||{}).ownerDocument,l=s.templateEngine||a;if(p.kc.xd(o,l,c),o=l.renderTemplate(o,r,s,c),"number"!=typeof o.length||0<o.length&&"number"!=typeof o[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(c=!1,t){case"replaceChildren":p.h.va(e,o),c=!0;break;case"replaceNode":p.a.Xc(e,o),c=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return c&&(n(o,r),s.afterRender&&p.u.G(s.afterRender,null,[o,r[s.as||"$data"]]),"replaceChildren"==t&&p.i.ma(e,p.i.H)),o}function r(e,t,n){return p.O(e)?e():"function"===typeof e?e(t,n):e}var a;p.gc=function(t){if(t!=e&&!(t instanceof p.ca))throw Error("templateEngine must inherit from ko.templateEngine");a=t},p.dc=function(t,n,s,c,l){if(s=s||{},(s.templateEngine||a)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",c){var u=i(c);return p.$((function(){var e=n&&n instanceof p.fa?n:new p.fa(n,null,null,null,{exportDependencies:!0}),a=r(t,e.$data,e);e=o(c,l,a,e,s);"replaceNode"==l&&(c=e,u=i(c))}),null,{Sa:function(){return!u||!p.a.Sb(u)},l:u&&"replaceNode"==l?u.parentNode:u})}return p.aa.Xb((function(e){p.dc(t,n,s,e,"replaceNode")}))},p.Qd=function(t,i,a,s,c){function l(e,t){p.u.G(p.a.ec,null,[s,e,h,a,u,t]),p.i.ma(s,p.i.H)}function u(e,t){n(t,d),a.afterRender&&a.afterRender(t,e),d=null}function h(e,n){d=c.createChildContext(e,{as:f,noChildContext:a.noChildContext,extend:function(e){e.$index=n,f&&(e[f+"Index"]=n)}});var i=r(t,e,d);return o(s,"ignoreTargetNode",i,d,a)}var d,f=a.as,m=!1===a.includeDestroyed||p.options.foreachHidesDestroyed&&!a.includeDestroyed;if(m||a.beforeRemove||!p.Pc(i))return p.$((function(){var t=p.a.f(i)||[];"undefined"==typeof t.length&&(t=[t]),m&&(t=p.a.jb(t,(function(t){return t===e||null===t||!p.a.f(t._destroy)}))),l(t)}),null,{l:s});l(i.v());var _=i.subscribe((function(e){l(i(),e)}),null,"arrayChange");return _.l(s),_};var s=p.a.g.Z(),c=p.a.g.Z();p.c.template={init:function(e,t){var n=p.a.f(t());if("string"==typeof n||"name"in n)p.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],p.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&p.a.g.get(i,c)||(i=p.a.Yb(n),p.a.g.set(i,c,!0)),new p.C.ia(e).nodes(i)}else{if(n=p.h.childNodes(e),!(0<n.length))throw Error("Anonymous template defined, but no template content was provided");i=p.a.Yb(n),new p.C.ia(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,n,i,o,r){var a=n();n=p.a.f(a),i=!0,o=null,"string"==typeof n?n={}:(a="name"in n?n.name:t,"if"in n&&(i=p.a.f(n["if"])),i&&"ifnot"in n&&(i=!p.a.f(n.ifnot)),i&&!a&&(i=!1)),"foreach"in n?o=p.Qd(a,i&&n.foreach||[],n,t,r):i?(i=r,"data"in n&&(i=r.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),o=p.dc(a,i,n,t)):p.h.Ea(t),r=o,(n=p.a.g.get(t,s))&&"function"==typeof n.s&&n.s(),p.a.g.set(t,s,!r||r.ja&&!r.ja()?e:r)}},p.m.Ra.template=function(e){return e=p.m.ac(e),1==e.length&&e[0].unknown||p.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},p.h.ea.template=!0}(),p.b("setTemplateEngine",p.gc),p.b("renderTemplate",p.dc),p.a.Kc=function(e,t,n){var i,o,r,a,s;if(e.length&&t.length)for(i=o=0;(!n||i<n)&&(a=e[o]);++o){for(r=0;s=t[r];++r)if(a.value===s.value){a.moved=s.index,s.moved=a.index,t.splice(r,1),i=r=0;break}i+=r}},p.a.Pb=function(){function e(e,t,n,i,o){var r,a,s,c,l,u=Math.min,h=Math.max,d=[],f=e.length,m=t.length,_=m-f||1,g=f+m+1;for(r=0;r<=f;r++)for(c=s,d.push(s=[]),l=u(m,r+_),a=h(0,r-1);a<=l;a++)s[a]=a?r?e[r-1]===t[a-1]?c[a-1]:u(c[a]||g,s[a-1]||g)+1:a+1:r+1;for(u=[],h=[],_=[],r=f,a=m;r||a;)m=d[r][a]-1,a&&m===d[r][a-1]?h.push(u[u.length]={status:n,value:t[--a],index:a}):r&&m===d[r-1][a]?_.push(u[u.length]={status:i,value:e[--r],index:r}):(--a,--r,o.sparse||u.push({status:"retained",value:t[a]}));return p.a.Kc(_,h,!o.dontLimitMoves&&10*f),u.reverse()}return function(t,n,i){return i="boolean"===typeof i?{dontLimitMoves:i}:i||{},t=t||[],n=n||[],t.length<n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),p.b("utils.compareArrays",p.a.Pb),function(){function t(t,n,i,o,r){var a=[],s=p.$((function(){var e=n(i,r,p.a.Ua(a,t))||[];0<a.length&&(p.a.Xc(a,e),o&&p.u.G(o,null,[i,e,r])),a.length=0,p.a.Nb(a,e)}),null,{l:t,Sa:function(){return!p.a.kd(a)}});return{Y:a,$:s.ja()?s:e}}var n=p.a.g.Z(),i=p.a.g.Z();p.a.ec=function(o,r,a,s,c,l){function u(e){f={Aa:e,pb:p.ta(A++)},v.push(f),y||S.push(f)}function h(e){f=b[e],A!==f.pb.v()&&x.push(f),f.pb(A++),p.a.Ua(f.Y,o),v.push(f)}function d(e,t){if(e)for(var n=0,i=t.length;n<i;n++)p.a.D(t[n].Y,(function(i){e(i,n,t[n].Aa)}))}r=r||[],"undefined"==typeof r.length&&(r=[r]),s=s||{};var f,m,_,g,b=p.a.g.get(o,n),y=!b,v=[],O=0,A=0,w=[],C=[],E=[],x=[],S=[],I=0;if(y)p.a.D(r,u);else{if(!l||b&&b._countWaitingForRemove){var D=p.a.Mb(b,(function(e){return e.Aa}));l=p.a.Pb(D,r,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var P,j,R;for(D=0;P=l[D];D++)switch(j=P.moved,R=P.index,P.status){case"deleted":for(;O<R;)h(O++);j===e&&(f=b[O],f.$&&(f.$.s(),f.$=e),p.a.Ua(f.Y,o).length&&(s.beforeRemove&&(v.push(f),I++,f.Aa===i?f=null:E.push(f)),f&&w.push.apply(w,f.Y))),O++;break;case"added":for(;A<R;)h(O++);j!==e?(C.push(v.length),h(j)):u(P.value)}for(;A<r.length;)h(O++);v._countWaitingForRemove=I}p.a.g.set(o,n,v),d(s.beforeMove,x),p.a.D(w,s.beforeRemove?p.oa:p.removeNode);try{g=o.ownerDocument.activeElement}catch(T){}if(C.length)for(;(D=C.shift())!=e;){for(f=v[D],m=e;D;)if((_=v[--D].Y)&&_.length){m=_[_.length-1];break}for(r=0;O=f.Y[r];m=O,r++)p.h.Wb(o,O,m)}for(D=0;f=v[D];D++){for(f.Y||p.a.extend(f,t(o,a,f.Aa,c,f.pb)),r=0;O=f.Y[r];m=O,r++)p.h.Wb(o,O,m);!f.Ed&&c&&(c(f.Aa,f.Y,f.pb),f.Ed=!0,m=f.Y[f.Y.length-1])}for(g&&o.ownerDocument.activeElement!=g&&g.focus(),d(s.beforeRemove,E),D=0;D<E.length;++D)E[D].Aa=i;d(s.afterMove,x),d(s.afterAdd,S)}}(),p.b("utils.setDomNodeChildrenFromArrayMapping",p.a.ec),p.ba=function(){this.allowTemplateRewriting=!1},p.ba.prototype=new p.ca,p.ba.prototype.constructor=p.ba,p.ba.prototype.renderTemplateSource=function(e,t,n,i){return(t=9>p.a.W||!e.nodes?null:e.nodes())?p.a.la(t.cloneNode(!0).childNodes):(e=e.text(),p.a.ua(e,i))},p.ba.Ma=new p.ba,p.gc(p.ba.Ma),p.b("nativeTemplateEngine",p.ba),function(){p.$a=function(){var e=this.Hd=function(){if(!o||!o.tmpl)return 0;try{if(0<=o.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,r,a){if(a=a||n,r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=o.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[i.$data],i=o.extend({koBindingContext:i},r.templateOptions),i=o.tmpl(s,t,i),i.appendTo(a.createElement("div")),o.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},p.$a.prototype=new p.ca,p.$a.prototype.constructor=p.$a;var e=new p.$a;0<e.Hd&&p.gc(e),p.b("jqueryTmplTemplateEngine",p.$a)}()}))})()})()}();var i=ko;"undefined"!==typeof window?(ko=window.ko,"undefined"!==typeof n?window.ko=n:delete window.ko):(ko=e.ko,"undefined"!==typeof n?e.ko=n:delete e.ko),t["a"]=i}).call(this,n("c8ba"))},"99de":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=n("257e");function r(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o["a"])(e):t}},"9bdd":function(e,t,n){var i=n("825a");e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(a){var r=e["return"];throw void 0!==r&&i(r.call(e)),a}}},"9bf2":function(e,t,n){var i=n("83ab"),o=n("0cfb"),r=n("825a"),a=n("c04e"),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return s(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9c35":function(e,t,n){"use strict";function i(){let e,t;const n=new Promise((function(n,i){e=n,t=i}));return{resolve:e,reject:t,promise:n}}t["a"]=i},"9ed3":function(e,t,n){"use strict";var i=n("ae93").IteratorPrototype,o=n("7c73"),r=n("5c6c"),a=n("d44e"),s=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=o(i,{next:r(1,n)}),a(e,l,!1,!0),s[l]=c,e}},a434:function(e,t,n){"use strict";var i=n("23e7"),o=n("23cb"),r=n("a691"),a=n("50c4"),s=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),h=n("ae40"),d=u("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,_=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var n,i,u,h,d,f,b=s(this),y=a(b.length),v=o(e,y),O=arguments.length;if(0===O?n=i=0:1===O?(n=0,i=y-v):(n=O-2,i=m(p(r(t),0),y-v)),y+n-i>_)throw TypeError(g);for(u=c(b,i),h=0;h<i;h++)d=v+h,d in b&&l(u,h,b[d]);if(u.length=i,n<i){for(h=v;h<y-i;h++)d=h+i,f=h+n,d in b?b[f]=b[d]:delete b[f];for(h=y;h>y-i+n;h--)delete b[h-1]}else if(n>i)for(h=y-i;h>v;h--)d=h+i-1,f=h+n-1,d in b?b[f]=b[d]:delete b[f];for(h=0;h<n;h++)b[h+v]=arguments[h+2];return b.length=y-i+n,u}})},a4d3:function(e,t,n){"use strict";var i=n("23e7"),o=n("da84"),r=n("d066"),a=n("c430"),s=n("83ab"),c=n("4930"),l=n("fdbf"),u=n("d039"),h=n("5135"),d=n("e8b5"),f=n("861d"),p=n("825a"),m=n("7b0b"),_=n("fc6a"),g=n("c04e"),b=n("5c6c"),y=n("7c73"),v=n("df75"),O=n("241c"),A=n("057f"),w=n("7418"),T=n("06cf"),C=n("9bf2"),E=n("d1e7"),x=n("9112"),S=n("6eeb"),I=n("5692"),D=n("f772"),P=n("d012"),j=n("90e3"),R=n("b622"),L=n("e538"),M=n("746f"),N=n("d44e"),B=n("69f3"),F=n("b727").forEach,z=D("hidden"),k="Symbol",U="prototype",V=R("toPrimitive"),H=B.set,G=B.getterFor(k),W=Object[U],q=o.Symbol,Y=r("JSON","stringify"),X=T.f,K=C.f,$=A.f,J=E.f,Q=I("symbols"),Z=I("op-symbols"),ee=I("string-to-symbol-registry"),te=I("symbol-to-string-registry"),ne=I("wks"),ie=o.QObject,oe=!ie||!ie[U]||!ie[U].findChild,re=s&&u((function(){return 7!=y(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=X(W,t);i&&delete W[t],K(e,t,n),i&&e!==W&&K(W,t,i)}:K,ae=function(e,t){var n=Q[e]=y(q[U]);return H(n,{type:k,tag:e,description:t}),s||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ce=function(e,t,n){e===W&&ce(Z,t,n),p(e);var i=g(t,!0);return p(n),h(Q,i)?(n.enumerable?(h(e,z)&&e[z][i]&&(e[z][i]=!1),n=y(n,{enumerable:b(0,!1)})):(h(e,z)||K(e,z,b(1,{})),e[z][i]=!0),re(e,i,n)):K(e,i,n)},le=function(e,t){p(e);var n=_(t),i=v(n).concat(pe(n));return F(i,(function(t){s&&!he.call(n,t)||ce(e,t,n[t])})),e},ue=function(e,t){return void 0===t?y(e):le(y(e),t)},he=function(e){var t=g(e,!0),n=J.call(this,t);return!(this===W&&h(Q,t)&&!h(Z,t))&&(!(n||!h(this,t)||!h(Q,t)||h(this,z)&&this[z][t])||n)},de=function(e,t){var n=_(e),i=g(t,!0);if(n!==W||!h(Q,i)||h(Z,i)){var o=X(n,i);return!o||!h(Q,i)||h(n,z)&&n[z][i]||(o.enumerable=!0),o}},fe=function(e){var t=$(_(e)),n=[];return F(t,(function(e){h(Q,e)||h(P,e)||n.push(e)})),n},pe=function(e){var t=e===W,n=$(t?Z:_(e)),i=[];return F(n,(function(e){!h(Q,e)||t&&!h(W,e)||i.push(Q[e])})),i};if(c||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=j(e),n=function(e){this===W&&n.call(Z,e),h(this,z)&&h(this[z],t)&&(this[z][t]=!1),re(this,t,b(1,e))};return s&&oe&&re(W,t,{configurable:!0,set:n}),ae(t,e)},S(q[U],"toString",(function(){return G(this).tag})),S(q,"withoutSetter",(function(e){return ae(j(e),e)})),E.f=he,C.f=ce,T.f=de,O.f=A.f=fe,w.f=pe,L.f=function(e){return ae(R(e),e)},s&&(K(q[U],"description",{configurable:!0,get:function(){return G(this).description}}),a||S(W,"propertyIsEnumerable",he,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:q}),F(v(ne),(function(e){M(e)})),i({target:k,stat:!0,forced:!c},{for:function(e){var t=String(e);if(h(ee,t))return ee[t];var n=q(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(h(te,e))return te[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!s},{create:ue,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:de}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:fe,getOwnPropertySymbols:pe}),i({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(e){return w.f(m(e))}}),Y){var me=!c||u((function(){var e=q();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}));i({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var i,o=[e],r=1;while(arguments.length>r)o.push(arguments[r++]);if(i=t,(f(t)||void 0!==e)&&!se(e))return d(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!se(t))return t}),o[1]=t,Y.apply(null,o)}})}q[U][V]||x(q[U],V,q[U].valueOf),N(q,k),P[z]=!0},a640:function(e,t,n){"use strict";var i=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},a734:function(e,t,n){"use strict";var i=n("c909"),o=n.n(i),r=n("535a"),a=n("2f63"),s=n("4f04");function c(e,t){let n;return"undefined"!==typeof document&&(n=document),c._implementation(e,t,n)}c._implementation=function(e,t,n){if(!Object(a["a"])(e))throw new s["a"]("relative uri is required.");if(!Object(a["a"])(t)){if("undefined"===typeof n)return e;t=Object(r["a"])(n.baseURI,n.location.href)}const i=new o.a(e);return""!==i.scheme()?i.toString():i.absoluteTo(t).toString()},t["a"]=c},a79d:function(e,t,n){"use strict";var i=n("23e7"),o=n("c430"),r=n("fea9"),a=n("d039"),s=n("d066"),c=n("4840"),l=n("cdf9"),u=n("6eeb"),h=!!r&&a((function(){r.prototype["finally"].call({then:function(){}},(function(){}))}));i({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),o||"function"!=typeof r||r.prototype["finally"]||u(r.prototype,"finally",s("Promise").prototype["finally"])},ad6d:function(e,t,n){"use strict";var i=n("825a");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae40:function(e,t,n){var i=n("83ab"),o=n("d039"),r=n("5135"),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(r(s,e))return s[e];t||(t={});var n=[][e],l=!!r(t,"ACCESSORS")&&t.ACCESSORS,u=r(t,0)?t[0]:c,h=r(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(l&&!i)return!0;var e={length:-1};l?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,h)}))}},ae93:function(e,t,n){"use strict";var i,o,r,a=n("e163"),s=n("9112"),c=n("5135"),l=n("b622"),u=n("c430"),h=l("iterator"),d=!1,f=function(){return this};[].keys&&(r=[].keys(),"next"in r?(o=a(a(r)),o!==Object.prototype&&(i=o)):d=!0),void 0==i&&(i={}),u||c(i,h)||s(i,h,f),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},afab:function(e,t,n){var i,o;
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(r,a){"use strict";e.exports?e.exports=a():(i=a,o="function"===typeof i?i.call(t,n,t,e):i,void 0===o||(e.exports=o))})(0,(function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(i+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i>=0)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return null;var o=n.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}))},b041:function(e,t,n){"use strict";var i=n("00ee"),o=n("f5df");e.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},b0c0:function(e,t,n){var i=n("83ab"),o=n("9bf2").f,r=Function.prototype,a=r.toString,s=/^\s*function ([^ (]*)/,c="name";!i||c in r||o(r,c,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},b380:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("131a");function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}},b575:function(e,t,n){var i,o,r,a,s,c,l,u,h=n("da84"),d=n("06cf").f,f=n("c6b6"),p=n("2cf4").set,m=n("1cdc"),_=h.MutationObserver||h.WebKitMutationObserver,g=h.process,b=h.Promise,y="process"==f(g),v=d(h,"queueMicrotask"),O=v&&v.value;O||(i=function(){var e,t;y&&(e=g.domain)&&e.exit();while(o){t=o.fn,o=o.next;try{t()}catch(n){throw o?a():r=void 0,n}}r=void 0,e&&e.enter()},y?a=function(){g.nextTick(i)}:_&&!m?(s=!0,c=document.createTextNode(""),new _(i).observe(c,{characterData:!0}),a=function(){c.data=s=!s}):b&&b.resolve?(l=b.resolve(void 0),u=l.then,a=function(){u.call(l,i)}):a=function(){p.call(h,i)}),e.exports=O||function(e){var t={fn:e,next:void 0};r&&(r.next=t),o||(o=t,a()),r=t}},b622:function(e,t,n){var i=n("da84"),o=n("5692"),r=n("5135"),a=n("90e3"),s=n("4930"),c=n("fdbf"),l=o("wks"),u=i.Symbol,h=c?u:u&&u.withoutSetter||a;e.exports=function(e){return r(l,e)||(s&&r(u,e)?l[e]=u[e]:l[e]=h("Symbol."+e)),l[e]}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("1fb5"),o=n("9152"),r=n("e3db");function a(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?_(e,t,n,i):"string"===typeof t?p(e,t,n):g(e,t)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,n,i){return h(t),t<=0?c(e,t):void 0!==n?"string"===typeof i?c(e,t).fill(n,i):c(e,t).fill(n):c(e,t)}function f(e,t){if(h(t),e=c(e,t<0?0:0|b(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|v(t,n);e=c(e,i);var o=e.write(t,n);return o!==i&&(e=e.slice(0,o)),e}function m(e,t){var n=t.length<0?0:0|b(t.length);e=c(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function _(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=m(e,t),e}function g(e,t){if(l.isBuffer(t)){var n=0|b(t.length);return e=c(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?c(e,0):m(e,t);if("Buffer"===t.type&&r(t.data))return m(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),l.alloc(+e)}function v(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return $(e).length;t=(""+t).toLowerCase(),i=!0}}function O(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function A(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function w(e,t,n,i,o){if(0===e.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:T(e,t,n,i,o);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):T(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function T(e,t,n,i,o){var r,a=1,s=e.length,c=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var u=-1;for(r=n;r<s;r++)if(l(e,r)===l(t,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===c)return u*a}else-1!==u&&(r-=r-u),u=-1}else for(n+c>s&&(n=s-c),r=n;r>=0;r--){for(var h=!0,d=0;d<c;d++)if(l(e,r+d)!==l(t,d)){h=!1;break}if(h)return r}return-1}function C(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var r=t.length;if(r%2!==0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function E(e,t,n,i){return ee($(t,e.length-n),e,n,i)}function x(e,t,n,i){return ee(J(t),e,n,i)}function S(e,t,n,i){return x(e,t,n,i)}function I(e,t,n,i){return ee(Z(t),e,n,i)}function D(e,t,n,i){return ee(Q(t,e.length-n),e,n,i)}function P(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);var i=[],o=t;while(o<n){var r,a,s,c,l=e[o],u=null,h=l>239?4:l>223?3:l>191?2:1;if(o+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:r=e[o+1],128===(192&r)&&(c=(31&l)<<6|63&r,c>127&&(u=c));break;case 3:r=e[o+1],a=e[o+2],128===(192&r)&&128===(192&a)&&(c=(15&l)<<12|(63&r)<<6|63&a,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:r=e[o+1],a=e[o+2],s=e[o+3],128===(192&r)&&128===(192&a)&&128===(192&s)&&(c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s,c>65535&&c<1114112&&(u=c))}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=h}return L(i)}t.Buffer=l,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:a(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return d(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,r=Math.min(n,i);o<r;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},l.byteLength=v,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)A(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):O.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,o){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var r=o-i,a=n-t,s=Math.min(r,a),c=this.slice(i,o),u=e.slice(t,n),h=0;h<s;++h)if(c[h]!==u[h]){r=c[h],a=u[h];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function L(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);var n="",i=0;while(i<t)n+=String.fromCharCode.apply(String,e.slice(i,i+=R));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function N(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function B(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",r=t;r<n;++r)o+=K(e[r]);return o}function F(e,t,n){for(var i=e.slice(t,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,i,o,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function U(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,r=Math.min(e.length-n,2);o<r;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function V(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,r=Math.min(e.length-n,4);o<r;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function H(e,t,n,i,o,r){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,i,r){return r||H(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,i,23,4),n+4}function W(e,t,n,i,r){return r||H(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var o=t-e;n=new l(o,void 0);for(var r=0;r<o;++r)n[r]=this[r+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);var i=this[e],o=1,r=0;while(++r<t&&(o*=256))i+=this[e+r]*o;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);var i=this[e+--t],o=1;while(t>0&&(o*=256))i+=this[e+--t]*o;return i},l.prototype.readUInt8=function(e,t){return t||z(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||z(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||z(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);var i=this[e],o=1,r=0;while(++r<t&&(o*=256))i+=this[e+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||z(e,t,this.length);var i=t,o=1,r=this[e+--i];while(i>0&&(o*=256))r+=this[e+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||z(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||z(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||z(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||z(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var o=Math.pow(2,8*n)-1;k(this,e,t,n,o,0)}var r=1,a=0;this[t]=255&e;while(++a<n&&(r*=256))this[t+a]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var o=Math.pow(2,8*n)-1;k(this,e,t,n,o,0)}var r=n-1,a=1;this[t+r]=255&e;while(--r>=0&&(a*=256))this[t+r]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var r=0,a=1,s=0;this[t]=255&e;while(++r<n&&(a*=256))e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var r=n-1,a=1,s=0;this[t+r]=255&e;while(--r>=0&&(a*=256))e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,r=i-n;if(this===e&&n<t&&t<i)for(o=r-1;o>=0;--o)e[o+t]=this[o+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},l.prototype.fill=function(e,t,n,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(r=t;r<n;++r)this[r]=e;else{var a=l.isBuffer(e)?e:$(new l(e,i).toString()),s=a.length;for(r=0;r<n-t;++r)this[r+t]=a[r%s]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function Y(e){if(e=X(e).replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function X(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var i=e.length,o=null,r=[],a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function J(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n,i,o,r=[],a=0;a<e.length;++a){if((t-=2)<0)break;n=e.charCodeAt(a),i=n>>8,o=n%256,r.push(o),r.push(i)}return r}function Z(e){return i.toByteArray(Y(e))}function ee(e,t,n,i){for(var o=0;o<i;++o){if(o+n>=t.length||o>=e.length)break;t[o+n]=e[o]}return o}function te(e){return e!==e}}).call(this,n("c8ba"))},b64b:function(e,t,n){var i=n("23e7"),o=n("7b0b"),r=n("df75"),a=n("d039"),s=a((function(){r(1)}));i({target:"Object",stat:!0,forced:s},{keys:function(e){return r(o(e))}})},b680:function(e,t,n){"use strict";var i=n("23e7"),o=n("a691"),r=n("408a"),a=n("1148"),s=n("d039"),c=1..toFixed,l=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},h=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));i({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,n,i,s,c=r(this),d=o(e),f=[0,0,0,0,0,0],p="",m="0",_=function(e,t){var n=-1,i=t;while(++n<6)i+=e*f[n],f[n]=i%1e7,i=l(i/1e7)},g=function(e){var t=6,n=0;while(--t>=0)n+=f[t],f[t]=l(n/e),n=n%e*1e7},b=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==f[e]){var n=String(f[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(t=h(c*u(2,69,1))-69,n=t<0?c*u(2,-t,1):c/u(2,t,1),n*=4503599627370496,t=52-t,t>0){_(0,n),i=d;while(i>=7)_(1e7,0),i-=7;_(u(10,i,1),0),i=t-1;while(i>=23)g(1<<23),i-=23;g(1<<i),_(1,1),g(2),m=b()}else _(0,n),_(1<<-t,0),m=b()+a.call("0",d);return d>0?(s=m.length,m=p+(s<=d?"0."+a.call("0",d-s)+m:m.slice(0,s-d)+"."+m.slice(s-d))):m=p+m,m}})},b727:function(e,t,n){var i=n("0366"),o=n("44ad"),r=n("7b0b"),a=n("50c4"),s=n("65f0"),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,h=6==e,d=5==e||h;return function(f,p,m,_){for(var g,b,y=r(f),v=o(y),O=i(p,m,3),A=a(v.length),w=0,T=_||s,C=t?T(f,A):n?T(f,0):void 0;A>w;w++)if((d||w in v)&&(g=v[w],b=O(g,w,y),e))if(t)C[w]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:c.call(C,g)}else if(u)return!1;return h?-1:l||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},b82e:function(e,t,n){"use strict";const i={TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3};t["a"]=Object.freeze(i)},bb2f:function(e,t,n){var i=n("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bee2:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return o}))},c04e:function(e,t,n){var i=n("861d");e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},c097:function(e,t,n){function i(){var e=0,t=1,n=2,i=3,o=4,r=5,a=6,s=7,c=8,l=9,u=10,h=11,d=12,f=13,p=14,m=15,_=16,g=17,b=0,y=1,v=2,O=3,A=4;function w(e,t){return 55296<=e.charCodeAt(t)&&e.charCodeAt(t)<=56319&&56320<=e.charCodeAt(t+1)&&e.charCodeAt(t+1)<=57343}function T(e,t){void 0===t&&(t=0);var n=e.charCodeAt(t);if(55296<=n&&n<=56319&&t<e.length-1){var i=n,o=e.charCodeAt(t+1);return 56320<=o&&o<=57343?1024*(i-55296)+(o-56320)+65536:i}if(56320<=n&&n<=57343&&t>=1){i=e.charCodeAt(t-1),o=n;return 55296<=i&&i<=56319?1024*(i-55296)+(o-56320)+65536:o}return n}function C(h,w,T){var C=[h].concat(w).concat([T]),E=C[C.length-2],x=T,S=C.lastIndexOf(p);if(S>1&&C.slice(1,S).every((function(e){return e==i}))&&-1==[i,f,g].indexOf(h))return v;var I=C.lastIndexOf(o);if(I>0&&C.slice(1,I).every((function(e){return e==o}))&&-1==[d,o].indexOf(E))return C.filter((function(e){return e==o})).length%2==1?O:A;if(E==e&&x==t)return b;if(E==n||E==e||E==t)return x==p&&w.every((function(e){return e==i}))?v:y;if(x==n||x==e||x==t)return y;if(E==a&&(x==a||x==s||x==l||x==u))return b;if(!(E!=l&&E!=s||x!=s&&x!=c))return b;if((E==u||E==c)&&x==c)return b;if(x==i||x==m)return b;if(x==r)return b;if(E==d)return b;var D=-1!=C.indexOf(i)?C.lastIndexOf(i)-1:C.length-2;return-1!=[f,g].indexOf(C[D])&&C.slice(D+1,-1).every((function(e){return e==i}))&&x==p||E==m&&-1!=[_,g].indexOf(x)?b:-1!=w.indexOf(o)?v:E==o&&x==o?b:y}function E(b){return 1536<=b&&b<=1541||1757==b||1807==b||2274==b||3406==b||69821==b||70082<=b&&b<=70083||72250==b||72326<=b&&b<=72329||73030==b?d:13==b?e:10==b?t:0<=b&&b<=9||11<=b&&b<=12||14<=b&&b<=31||127<=b&&b<=159||173==b||1564==b||6158==b||8203==b||8206<=b&&b<=8207||8232==b||8233==b||8234<=b&&b<=8238||8288<=b&&b<=8292||8293==b||8294<=b&&b<=8303||55296<=b&&b<=57343||65279==b||65520<=b&&b<=65528||65529<=b&&b<=65531||113824<=b&&b<=113827||119155<=b&&b<=119162||917504==b||917505==b||917506<=b&&b<=917535||917632<=b&&b<=917759||918e3<=b&&b<=921599?n:768<=b&&b<=879||1155<=b&&b<=1159||1160<=b&&b<=1161||1425<=b&&b<=1469||1471==b||1473<=b&&b<=1474||1476<=b&&b<=1477||1479==b||1552<=b&&b<=1562||1611<=b&&b<=1631||1648==b||1750<=b&&b<=1756||1759<=b&&b<=1764||1767<=b&&b<=1768||1770<=b&&b<=1773||1809==b||1840<=b&&b<=1866||1958<=b&&b<=1968||2027<=b&&b<=2035||2070<=b&&b<=2073||2075<=b&&b<=2083||2085<=b&&b<=2087||2089<=b&&b<=2093||2137<=b&&b<=2139||2260<=b&&b<=2273||2275<=b&&b<=2306||2362==b||2364==b||2369<=b&&b<=2376||2381==b||2385<=b&&b<=2391||2402<=b&&b<=2403||2433==b||2492==b||2494==b||2497<=b&&b<=2500||2509==b||2519==b||2530<=b&&b<=2531||2561<=b&&b<=2562||2620==b||2625<=b&&b<=2626||2631<=b&&b<=2632||2635<=b&&b<=2637||2641==b||2672<=b&&b<=2673||2677==b||2689<=b&&b<=2690||2748==b||2753<=b&&b<=2757||2759<=b&&b<=2760||2765==b||2786<=b&&b<=2787||2810<=b&&b<=2815||2817==b||2876==b||2878==b||2879==b||2881<=b&&b<=2884||2893==b||2902==b||2903==b||2914<=b&&b<=2915||2946==b||3006==b||3008==b||3021==b||3031==b||3072==b||3134<=b&&b<=3136||3142<=b&&b<=3144||3146<=b&&b<=3149||3157<=b&&b<=3158||3170<=b&&b<=3171||3201==b||3260==b||3263==b||3266==b||3270==b||3276<=b&&b<=3277||3285<=b&&b<=3286||3298<=b&&b<=3299||3328<=b&&b<=3329||3387<=b&&b<=3388||3390==b||3393<=b&&b<=3396||3405==b||3415==b||3426<=b&&b<=3427||3530==b||3535==b||3538<=b&&b<=3540||3542==b||3551==b||3633==b||3636<=b&&b<=3642||3655<=b&&b<=3662||3761==b||3764<=b&&b<=3769||3771<=b&&b<=3772||3784<=b&&b<=3789||3864<=b&&b<=3865||3893==b||3895==b||3897==b||3953<=b&&b<=3966||3968<=b&&b<=3972||3974<=b&&b<=3975||3981<=b&&b<=3991||3993<=b&&b<=4028||4038==b||4141<=b&&b<=4144||4146<=b&&b<=4151||4153<=b&&b<=4154||4157<=b&&b<=4158||4184<=b&&b<=4185||4190<=b&&b<=4192||4209<=b&&b<=4212||4226==b||4229<=b&&b<=4230||4237==b||4253==b||4957<=b&&b<=4959||5906<=b&&b<=5908||5938<=b&&b<=5940||5970<=b&&b<=5971||6002<=b&&b<=6003||6068<=b&&b<=6069||6071<=b&&b<=6077||6086==b||6089<=b&&b<=6099||6109==b||6155<=b&&b<=6157||6277<=b&&b<=6278||6313==b||6432<=b&&b<=6434||6439<=b&&b<=6440||6450==b||6457<=b&&b<=6459||6679<=b&&b<=6680||6683==b||6742==b||6744<=b&&b<=6750||6752==b||6754==b||6757<=b&&b<=6764||6771<=b&&b<=6780||6783==b||6832<=b&&b<=6845||6846==b||6912<=b&&b<=6915||6964==b||6966<=b&&b<=6970||6972==b||6978==b||7019<=b&&b<=7027||7040<=b&&b<=7041||7074<=b&&b<=7077||7080<=b&&b<=7081||7083<=b&&b<=7085||7142==b||7144<=b&&b<=7145||7149==b||7151<=b&&b<=7153||7212<=b&&b<=7219||7222<=b&&b<=7223||7376<=b&&b<=7378||7380<=b&&b<=7392||7394<=b&&b<=7400||7405==b||7412==b||7416<=b&&b<=7417||7616<=b&&b<=7673||7675<=b&&b<=7679||8204==b||8400<=b&&b<=8412||8413<=b&&b<=8416||8417==b||8418<=b&&b<=8420||8421<=b&&b<=8432||11503<=b&&b<=11505||11647==b||11744<=b&&b<=11775||12330<=b&&b<=12333||12334<=b&&b<=12335||12441<=b&&b<=12442||42607==b||42608<=b&&b<=42610||42612<=b&&b<=42621||42654<=b&&b<=42655||42736<=b&&b<=42737||43010==b||43014==b||43019==b||43045<=b&&b<=43046||43204<=b&&b<=43205||43232<=b&&b<=43249||43302<=b&&b<=43309||43335<=b&&b<=43345||43392<=b&&b<=43394||43443==b||43446<=b&&b<=43449||43452==b||43493==b||43561<=b&&b<=43566||43569<=b&&b<=43570||43573<=b&&b<=43574||43587==b||43596==b||43644==b||43696==b||43698<=b&&b<=43700||43703<=b&&b<=43704||43710<=b&&b<=43711||43713==b||43756<=b&&b<=43757||43766==b||44005==b||44008==b||44013==b||64286==b||65024<=b&&b<=65039||65056<=b&&b<=65071||65438<=b&&b<=65439||66045==b||66272==b||66422<=b&&b<=66426||68097<=b&&b<=68099||68101<=b&&b<=68102||68108<=b&&b<=68111||68152<=b&&b<=68154||68159==b||68325<=b&&b<=68326||69633==b||69688<=b&&b<=69702||69759<=b&&b<=69761||69811<=b&&b<=69814||69817<=b&&b<=69818||69888<=b&&b<=69890||69927<=b&&b<=69931||69933<=b&&b<=69940||70003==b||70016<=b&&b<=70017||70070<=b&&b<=70078||70090<=b&&b<=70092||70191<=b&&b<=70193||70196==b||70198<=b&&b<=70199||70206==b||70367==b||70371<=b&&b<=70378||70400<=b&&b<=70401||70460==b||70462==b||70464==b||70487==b||70502<=b&&b<=70508||70512<=b&&b<=70516||70712<=b&&b<=70719||70722<=b&&b<=70724||70726==b||70832==b||70835<=b&&b<=70840||70842==b||70845==b||70847<=b&&b<=70848||70850<=b&&b<=70851||71087==b||71090<=b&&b<=71093||71100<=b&&b<=71101||71103<=b&&b<=71104||71132<=b&&b<=71133||71219<=b&&b<=71226||71229==b||71231<=b&&b<=71232||71339==b||71341==b||71344<=b&&b<=71349||71351==b||71453<=b&&b<=71455||71458<=b&&b<=71461||71463<=b&&b<=71467||72193<=b&&b<=72198||72201<=b&&b<=72202||72243<=b&&b<=72248||72251<=b&&b<=72254||72263==b||72273<=b&&b<=72278||72281<=b&&b<=72283||72330<=b&&b<=72342||72344<=b&&b<=72345||72752<=b&&b<=72758||72760<=b&&b<=72765||72767==b||72850<=b&&b<=72871||72874<=b&&b<=72880||72882<=b&&b<=72883||72885<=b&&b<=72886||73009<=b&&b<=73014||73018==b||73020<=b&&b<=73021||73023<=b&&b<=73029||73031==b||92912<=b&&b<=92916||92976<=b&&b<=92982||94095<=b&&b<=94098||113821<=b&&b<=113822||119141==b||119143<=b&&b<=119145||119150<=b&&b<=119154||119163<=b&&b<=119170||119173<=b&&b<=119179||119210<=b&&b<=119213||119362<=b&&b<=119364||121344<=b&&b<=121398||121403<=b&&b<=121452||121461==b||121476==b||121499<=b&&b<=121503||121505<=b&&b<=121519||122880<=b&&b<=122886||122888<=b&&b<=122904||122907<=b&&b<=122913||122915<=b&&b<=122916||122918<=b&&b<=122922||125136<=b&&b<=125142||125252<=b&&b<=125258||917536<=b&&b<=917631||917760<=b&&b<=917999?i:127462<=b&&b<=127487?o:2307==b||2363==b||2366<=b&&b<=2368||2377<=b&&b<=2380||2382<=b&&b<=2383||2434<=b&&b<=2435||2495<=b&&b<=2496||2503<=b&&b<=2504||2507<=b&&b<=2508||2563==b||2622<=b&&b<=2624||2691==b||2750<=b&&b<=2752||2761==b||2763<=b&&b<=2764||2818<=b&&b<=2819||2880==b||2887<=b&&b<=2888||2891<=b&&b<=2892||3007==b||3009<=b&&b<=3010||3014<=b&&b<=3016||3018<=b&&b<=3020||3073<=b&&b<=3075||3137<=b&&b<=3140||3202<=b&&b<=3203||3262==b||3264<=b&&b<=3265||3267<=b&&b<=3268||3271<=b&&b<=3272||3274<=b&&b<=3275||3330<=b&&b<=3331||3391<=b&&b<=3392||3398<=b&&b<=3400||3402<=b&&b<=3404||3458<=b&&b<=3459||3536<=b&&b<=3537||3544<=b&&b<=3550||3570<=b&&b<=3571||3635==b||3763==b||3902<=b&&b<=3903||3967==b||4145==b||4155<=b&&b<=4156||4182<=b&&b<=4183||4228==b||6070==b||6078<=b&&b<=6085||6087<=b&&b<=6088||6435<=b&&b<=6438||6441<=b&&b<=6443||6448<=b&&b<=6449||6451<=b&&b<=6456||6681<=b&&b<=6682||6741==b||6743==b||6765<=b&&b<=6770||6916==b||6965==b||6971==b||6973<=b&&b<=6977||6979<=b&&b<=6980||7042==b||7073==b||7078<=b&&b<=7079||7082==b||7143==b||7146<=b&&b<=7148||7150==b||7154<=b&&b<=7155||7204<=b&&b<=7211||7220<=b&&b<=7221||7393==b||7410<=b&&b<=7411||7415==b||43043<=b&&b<=43044||43047==b||43136<=b&&b<=43137||43188<=b&&b<=43203||43346<=b&&b<=43347||43395==b||43444<=b&&b<=43445||43450<=b&&b<=43451||43453<=b&&b<=43456||43567<=b&&b<=43568||43571<=b&&b<=43572||43597==b||43755==b||43758<=b&&b<=43759||43765==b||44003<=b&&b<=44004||44006<=b&&b<=44007||44009<=b&&b<=44010||44012==b||69632==b||69634==b||69762==b||69808<=b&&b<=69810||69815<=b&&b<=69816||69932==b||70018==b||70067<=b&&b<=70069||70079<=b&&b<=70080||70188<=b&&b<=70190||70194<=b&&b<=70195||70197==b||70368<=b&&b<=70370||70402<=b&&b<=70403||70463==b||70465<=b&&b<=70468||70471<=b&&b<=70472||70475<=b&&b<=70477||70498<=b&&b<=70499||70709<=b&&b<=70711||70720<=b&&b<=70721||70725==b||70833<=b&&b<=70834||70841==b||70843<=b&&b<=70844||70846==b||70849==b||71088<=b&&b<=71089||71096<=b&&b<=71099||71102==b||71216<=b&&b<=71218||71227<=b&&b<=71228||71230==b||71340==b||71342<=b&&b<=71343||71350==b||71456<=b&&b<=71457||71462==b||72199<=b&&b<=72200||72249==b||72279<=b&&b<=72280||72343==b||72751==b||72766==b||72873==b||72881==b||72884==b||94033<=b&&b<=94078||119142==b||119149==b?r:4352<=b&&b<=4447||43360<=b&&b<=43388?a:4448<=b&&b<=4519||55216<=b&&b<=55238?s:4520<=b&&b<=4607||55243<=b&&b<=55291?c:44032==b||44060==b||44088==b||44116==b||44144==b||44172==b||44200==b||44228==b||44256==b||44284==b||44312==b||44340==b||44368==b||44396==b||44424==b||44452==b||44480==b||44508==b||44536==b||44564==b||44592==b||44620==b||44648==b||44676==b||44704==b||44732==b||44760==b||44788==b||44816==b||44844==b||44872==b||44900==b||44928==b||44956==b||44984==b||45012==b||45040==b||45068==b||45096==b||45124==b||45152==b||45180==b||45208==b||45236==b||45264==b||45292==b||45320==b||45348==b||45376==b||45404==b||45432==b||45460==b||45488==b||45516==b||45544==b||45572==b||45600==b||45628==b||45656==b||45684==b||45712==b||45740==b||45768==b||45796==b||45824==b||45852==b||45880==b||45908==b||45936==b||45964==b||45992==b||46020==b||46048==b||46076==b||46104==b||46132==b||46160==b||46188==b||46216==b||46244==b||46272==b||46300==b||46328==b||46356==b||46384==b||46412==b||46440==b||46468==b||46496==b||46524==b||46552==b||46580==b||46608==b||46636==b||46664==b||46692==b||46720==b||46748==b||46776==b||46804==b||46832==b||46860==b||46888==b||46916==b||46944==b||46972==b||47e3==b||47028==b||47056==b||47084==b||47112==b||47140==b||47168==b||47196==b||47224==b||47252==b||47280==b||47308==b||47336==b||47364==b||47392==b||47420==b||47448==b||47476==b||47504==b||47532==b||47560==b||47588==b||47616==b||47644==b||47672==b||47700==b||47728==b||47756==b||47784==b||47812==b||47840==b||47868==b||47896==b||47924==b||47952==b||47980==b||48008==b||48036==b||48064==b||48092==b||48120==b||48148==b||48176==b||48204==b||48232==b||48260==b||48288==b||48316==b||48344==b||48372==b||48400==b||48428==b||48456==b||48484==b||48512==b||48540==b||48568==b||48596==b||48624==b||48652==b||48680==b||48708==b||48736==b||48764==b||48792==b||48820==b||48848==b||48876==b||48904==b||48932==b||48960==b||48988==b||49016==b||49044==b||49072==b||49100==b||49128==b||49156==b||49184==b||49212==b||49240==b||49268==b||49296==b||49324==b||49352==b||49380==b||49408==b||49436==b||49464==b||49492==b||49520==b||49548==b||49576==b||49604==b||49632==b||49660==b||49688==b||49716==b||49744==b||49772==b||49800==b||49828==b||49856==b||49884==b||49912==b||49940==b||49968==b||49996==b||50024==b||50052==b||50080==b||50108==b||50136==b||50164==b||50192==b||50220==b||50248==b||50276==b||50304==b||50332==b||50360==b||50388==b||50416==b||50444==b||50472==b||50500==b||50528==b||50556==b||50584==b||50612==b||50640==b||50668==b||50696==b||50724==b||50752==b||50780==b||50808==b||50836==b||50864==b||50892==b||50920==b||50948==b||50976==b||51004==b||51032==b||51060==b||51088==b||51116==b||51144==b||51172==b||51200==b||51228==b||51256==b||51284==b||51312==b||51340==b||51368==b||51396==b||51424==b||51452==b||51480==b||51508==b||51536==b||51564==b||51592==b||51620==b||51648==b||51676==b||51704==b||51732==b||51760==b||51788==b||51816==b||51844==b||51872==b||51900==b||51928==b||51956==b||51984==b||52012==b||52040==b||52068==b||52096==b||52124==b||52152==b||52180==b||52208==b||52236==b||52264==b||52292==b||52320==b||52348==b||52376==b||52404==b||52432==b||52460==b||52488==b||52516==b||52544==b||52572==b||52600==b||52628==b||52656==b||52684==b||52712==b||52740==b||52768==b||52796==b||52824==b||52852==b||52880==b||52908==b||52936==b||52964==b||52992==b||53020==b||53048==b||53076==b||53104==b||53132==b||53160==b||53188==b||53216==b||53244==b||53272==b||53300==b||53328==b||53356==b||53384==b||53412==b||53440==b||53468==b||53496==b||53524==b||53552==b||53580==b||53608==b||53636==b||53664==b||53692==b||53720==b||53748==b||53776==b||53804==b||53832==b||53860==b||53888==b||53916==b||53944==b||53972==b||54e3==b||54028==b||54056==b||54084==b||54112==b||54140==b||54168==b||54196==b||54224==b||54252==b||54280==b||54308==b||54336==b||54364==b||54392==b||54420==b||54448==b||54476==b||54504==b||54532==b||54560==b||54588==b||54616==b||54644==b||54672==b||54700==b||54728==b||54756==b||54784==b||54812==b||54840==b||54868==b||54896==b||54924==b||54952==b||54980==b||55008==b||55036==b||55064==b||55092==b||55120==b||55148==b||55176==b?l:44033<=b&&b<=44059||44061<=b&&b<=44087||44089<=b&&b<=44115||44117<=b&&b<=44143||44145<=b&&b<=44171||44173<=b&&b<=44199||44201<=b&&b<=44227||44229<=b&&b<=44255||44257<=b&&b<=44283||44285<=b&&b<=44311||44313<=b&&b<=44339||44341<=b&&b<=44367||44369<=b&&b<=44395||44397<=b&&b<=44423||44425<=b&&b<=44451||44453<=b&&b<=44479||44481<=b&&b<=44507||44509<=b&&b<=44535||44537<=b&&b<=44563||44565<=b&&b<=44591||44593<=b&&b<=44619||44621<=b&&b<=44647||44649<=b&&b<=44675||44677<=b&&b<=44703||44705<=b&&b<=44731||44733<=b&&b<=44759||44761<=b&&b<=44787||44789<=b&&b<=44815||44817<=b&&b<=44843||44845<=b&&b<=44871||44873<=b&&b<=44899||44901<=b&&b<=44927||44929<=b&&b<=44955||44957<=b&&b<=44983||44985<=b&&b<=45011||45013<=b&&b<=45039||45041<=b&&b<=45067||45069<=b&&b<=45095||45097<=b&&b<=45123||45125<=b&&b<=45151||45153<=b&&b<=45179||45181<=b&&b<=45207||45209<=b&&b<=45235||45237<=b&&b<=45263||45265<=b&&b<=45291||45293<=b&&b<=45319||45321<=b&&b<=45347||45349<=b&&b<=45375||45377<=b&&b<=45403||45405<=b&&b<=45431||45433<=b&&b<=45459||45461<=b&&b<=45487||45489<=b&&b<=45515||45517<=b&&b<=45543||45545<=b&&b<=45571||45573<=b&&b<=45599||45601<=b&&b<=45627||45629<=b&&b<=45655||45657<=b&&b<=45683||45685<=b&&b<=45711||45713<=b&&b<=45739||45741<=b&&b<=45767||45769<=b&&b<=45795||45797<=b&&b<=45823||45825<=b&&b<=45851||45853<=b&&b<=45879||45881<=b&&b<=45907||45909<=b&&b<=45935||45937<=b&&b<=45963||45965<=b&&b<=45991||45993<=b&&b<=46019||46021<=b&&b<=46047||46049<=b&&b<=46075||46077<=b&&b<=46103||46105<=b&&b<=46131||46133<=b&&b<=46159||46161<=b&&b<=46187||46189<=b&&b<=46215||46217<=b&&b<=46243||46245<=b&&b<=46271||46273<=b&&b<=46299||46301<=b&&b<=46327||46329<=b&&b<=46355||46357<=b&&b<=46383||46385<=b&&b<=46411||46413<=b&&b<=46439||46441<=b&&b<=46467||46469<=b&&b<=46495||46497<=b&&b<=46523||46525<=b&&b<=46551||46553<=b&&b<=46579||46581<=b&&b<=46607||46609<=b&&b<=46635||46637<=b&&b<=46663||46665<=b&&b<=46691||46693<=b&&b<=46719||46721<=b&&b<=46747||46749<=b&&b<=46775||46777<=b&&b<=46803||46805<=b&&b<=46831||46833<=b&&b<=46859||46861<=b&&b<=46887||46889<=b&&b<=46915||46917<=b&&b<=46943||46945<=b&&b<=46971||46973<=b&&b<=46999||47001<=b&&b<=47027||47029<=b&&b<=47055||47057<=b&&b<=47083||47085<=b&&b<=47111||47113<=b&&b<=47139||47141<=b&&b<=47167||47169<=b&&b<=47195||47197<=b&&b<=47223||47225<=b&&b<=47251||47253<=b&&b<=47279||47281<=b&&b<=47307||47309<=b&&b<=47335||47337<=b&&b<=47363||47365<=b&&b<=47391||47393<=b&&b<=47419||47421<=b&&b<=47447||47449<=b&&b<=47475||47477<=b&&b<=47503||47505<=b&&b<=47531||47533<=b&&b<=47559||47561<=b&&b<=47587||47589<=b&&b<=47615||47617<=b&&b<=47643||47645<=b&&b<=47671||47673<=b&&b<=47699||47701<=b&&b<=47727||47729<=b&&b<=47755||47757<=b&&b<=47783||47785<=b&&b<=47811||47813<=b&&b<=47839||47841<=b&&b<=47867||47869<=b&&b<=47895||47897<=b&&b<=47923||47925<=b&&b<=47951||47953<=b&&b<=47979||47981<=b&&b<=48007||48009<=b&&b<=48035||48037<=b&&b<=48063||48065<=b&&b<=48091||48093<=b&&b<=48119||48121<=b&&b<=48147||48149<=b&&b<=48175||48177<=b&&b<=48203||48205<=b&&b<=48231||48233<=b&&b<=48259||48261<=b&&b<=48287||48289<=b&&b<=48315||48317<=b&&b<=48343||48345<=b&&b<=48371||48373<=b&&b<=48399||48401<=b&&b<=48427||48429<=b&&b<=48455||48457<=b&&b<=48483||48485<=b&&b<=48511||48513<=b&&b<=48539||48541<=b&&b<=48567||48569<=b&&b<=48595||48597<=b&&b<=48623||48625<=b&&b<=48651||48653<=b&&b<=48679||48681<=b&&b<=48707||48709<=b&&b<=48735||48737<=b&&b<=48763||48765<=b&&b<=48791||48793<=b&&b<=48819||48821<=b&&b<=48847||48849<=b&&b<=48875||48877<=b&&b<=48903||48905<=b&&b<=48931||48933<=b&&b<=48959||48961<=b&&b<=48987||48989<=b&&b<=49015||49017<=b&&b<=49043||49045<=b&&b<=49071||49073<=b&&b<=49099||49101<=b&&b<=49127||49129<=b&&b<=49155||49157<=b&&b<=49183||49185<=b&&b<=49211||49213<=b&&b<=49239||49241<=b&&b<=49267||49269<=b&&b<=49295||49297<=b&&b<=49323||49325<=b&&b<=49351||49353<=b&&b<=49379||49381<=b&&b<=49407||49409<=b&&b<=49435||49437<=b&&b<=49463||49465<=b&&b<=49491||49493<=b&&b<=49519||49521<=b&&b<=49547||49549<=b&&b<=49575||49577<=b&&b<=49603||49605<=b&&b<=49631||49633<=b&&b<=49659||49661<=b&&b<=49687||49689<=b&&b<=49715||49717<=b&&b<=49743||49745<=b&&b<=49771||49773<=b&&b<=49799||49801<=b&&b<=49827||49829<=b&&b<=49855||49857<=b&&b<=49883||49885<=b&&b<=49911||49913<=b&&b<=49939||49941<=b&&b<=49967||49969<=b&&b<=49995||49997<=b&&b<=50023||50025<=b&&b<=50051||50053<=b&&b<=50079||50081<=b&&b<=50107||50109<=b&&b<=50135||50137<=b&&b<=50163||50165<=b&&b<=50191||50193<=b&&b<=50219||50221<=b&&b<=50247||50249<=b&&b<=50275||50277<=b&&b<=50303||50305<=b&&b<=50331||50333<=b&&b<=50359||50361<=b&&b<=50387||50389<=b&&b<=50415||50417<=b&&b<=50443||50445<=b&&b<=50471||50473<=b&&b<=50499||50501<=b&&b<=50527||50529<=b&&b<=50555||50557<=b&&b<=50583||50585<=b&&b<=50611||50613<=b&&b<=50639||50641<=b&&b<=50667||50669<=b&&b<=50695||50697<=b&&b<=50723||50725<=b&&b<=50751||50753<=b&&b<=50779||50781<=b&&b<=50807||50809<=b&&b<=50835||50837<=b&&b<=50863||50865<=b&&b<=50891||50893<=b&&b<=50919||50921<=b&&b<=50947||50949<=b&&b<=50975||50977<=b&&b<=51003||51005<=b&&b<=51031||51033<=b&&b<=51059||51061<=b&&b<=51087||51089<=b&&b<=51115||51117<=b&&b<=51143||51145<=b&&b<=51171||51173<=b&&b<=51199||51201<=b&&b<=51227||51229<=b&&b<=51255||51257<=b&&b<=51283||51285<=b&&b<=51311||51313<=b&&b<=51339||51341<=b&&b<=51367||51369<=b&&b<=51395||51397<=b&&b<=51423||51425<=b&&b<=51451||51453<=b&&b<=51479||51481<=b&&b<=51507||51509<=b&&b<=51535||51537<=b&&b<=51563||51565<=b&&b<=51591||51593<=b&&b<=51619||51621<=b&&b<=51647||51649<=b&&b<=51675||51677<=b&&b<=51703||51705<=b&&b<=51731||51733<=b&&b<=51759||51761<=b&&b<=51787||51789<=b&&b<=51815||51817<=b&&b<=51843||51845<=b&&b<=51871||51873<=b&&b<=51899||51901<=b&&b<=51927||51929<=b&&b<=51955||51957<=b&&b<=51983||51985<=b&&b<=52011||52013<=b&&b<=52039||52041<=b&&b<=52067||52069<=b&&b<=52095||52097<=b&&b<=52123||52125<=b&&b<=52151||52153<=b&&b<=52179||52181<=b&&b<=52207||52209<=b&&b<=52235||52237<=b&&b<=52263||52265<=b&&b<=52291||52293<=b&&b<=52319||52321<=b&&b<=52347||52349<=b&&b<=52375||52377<=b&&b<=52403||52405<=b&&b<=52431||52433<=b&&b<=52459||52461<=b&&b<=52487||52489<=b&&b<=52515||52517<=b&&b<=52543||52545<=b&&b<=52571||52573<=b&&b<=52599||52601<=b&&b<=52627||52629<=b&&b<=52655||52657<=b&&b<=52683||52685<=b&&b<=52711||52713<=b&&b<=52739||52741<=b&&b<=52767||52769<=b&&b<=52795||52797<=b&&b<=52823||52825<=b&&b<=52851||52853<=b&&b<=52879||52881<=b&&b<=52907||52909<=b&&b<=52935||52937<=b&&b<=52963||52965<=b&&b<=52991||52993<=b&&b<=53019||53021<=b&&b<=53047||53049<=b&&b<=53075||53077<=b&&b<=53103||53105<=b&&b<=53131||53133<=b&&b<=53159||53161<=b&&b<=53187||53189<=b&&b<=53215||53217<=b&&b<=53243||53245<=b&&b<=53271||53273<=b&&b<=53299||53301<=b&&b<=53327||53329<=b&&b<=53355||53357<=b&&b<=53383||53385<=b&&b<=53411||53413<=b&&b<=53439||53441<=b&&b<=53467||53469<=b&&b<=53495||53497<=b&&b<=53523||53525<=b&&b<=53551||53553<=b&&b<=53579||53581<=b&&b<=53607||53609<=b&&b<=53635||53637<=b&&b<=53663||53665<=b&&b<=53691||53693<=b&&b<=53719||53721<=b&&b<=53747||53749<=b&&b<=53775||53777<=b&&b<=53803||53805<=b&&b<=53831||53833<=b&&b<=53859||53861<=b&&b<=53887||53889<=b&&b<=53915||53917<=b&&b<=53943||53945<=b&&b<=53971||53973<=b&&b<=53999||54001<=b&&b<=54027||54029<=b&&b<=54055||54057<=b&&b<=54083||54085<=b&&b<=54111||54113<=b&&b<=54139||54141<=b&&b<=54167||54169<=b&&b<=54195||54197<=b&&b<=54223||54225<=b&&b<=54251||54253<=b&&b<=54279||54281<=b&&b<=54307||54309<=b&&b<=54335||54337<=b&&b<=54363||54365<=b&&b<=54391||54393<=b&&b<=54419||54421<=b&&b<=54447||54449<=b&&b<=54475||54477<=b&&b<=54503||54505<=b&&b<=54531||54533<=b&&b<=54559||54561<=b&&b<=54587||54589<=b&&b<=54615||54617<=b&&b<=54643||54645<=b&&b<=54671||54673<=b&&b<=54699||54701<=b&&b<=54727||54729<=b&&b<=54755||54757<=b&&b<=54783||54785<=b&&b<=54811||54813<=b&&b<=54839||54841<=b&&b<=54867||54869<=b&&b<=54895||54897<=b&&b<=54923||54925<=b&&b<=54951||54953<=b&&b<=54979||54981<=b&&b<=55007||55009<=b&&b<=55035||55037<=b&&b<=55063||55065<=b&&b<=55091||55093<=b&&b<=55119||55121<=b&&b<=55147||55149<=b&&b<=55175||55177<=b&&b<=55203?u:9757==b||9977==b||9994<=b&&b<=9997||127877==b||127938<=b&&b<=127940||127943==b||127946<=b&&b<=127948||128066<=b&&b<=128067||128070<=b&&b<=128080||128110==b||128112<=b&&b<=128120||128124==b||128129<=b&&b<=128131||128133<=b&&b<=128135||128170==b||128372<=b&&b<=128373||128378==b||128400==b||128405<=b&&b<=128406||128581<=b&&b<=128583||128587<=b&&b<=128591||128675==b||128692<=b&&b<=128694||128704==b||128716==b||129304<=b&&b<=129308||129310<=b&&b<=129311||129318==b||129328<=b&&b<=129337||129341<=b&&b<=129342||129489<=b&&b<=129501?f:127995<=b&&b<=127999?p:8205==b?m:9792==b||9794==b||9877<=b&&b<=9878||9992==b||10084==b||127752==b||127806==b||127859==b||127891==b||127908==b||127912==b||127979==b||127981==b||128139==b||128187<=b&&b<=128188||128295==b||128300==b||128488==b||128640==b||128658==b?_:128102<=b&&b<=128105?g:h}return this.nextBreak=function(e,t){if(void 0===t&&(t=0),t<0)return 0;if(t>=e.length-1)return e.length;for(var n=E(T(e,t)),i=[],o=t+1;o<e.length;o++)if(!w(e,o-1)){var r=E(T(e,o));if(C(n,i,r))return o;i.push(r)}return e.length},this.splitGraphemes=function(e){var t,n=[],i=0;while((t=this.nextBreak(e,i))<e.length)n.push(e.slice(i,t)),i=t;return i<e.length&&n.push(e.slice(i)),n},this.iterateGraphemes=function(e){var t=0,n={next:function(){var n,i;return(i=this.nextBreak(e,t))<e.length?(n=e.slice(t,i),t=i,{value:n,done:!1}):t<e.length?(n=e.slice(t),t=e.length,{value:n,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return n}),n},this.countGraphemes=function(e){var t,n=0,i=0;while((t=this.nextBreak(e,i))<e.length)i=t,n++;return i<e.length&&n++,n},this}e.exports&&(e.exports=i)},c0c4:function(e,t,n){
/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */
(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,o,r){return i=n()?Reflect.construct:function(e,n,i){var o=[null];o.push.apply(o,n);var r=Function.bind.apply(e,o),a=new r;return i&&t(a,i.prototype),a},i.apply(null,arguments)}function o(e){return r(e)||a(e)||s(e)||l()}function r(e){if(Array.isArray(e))return c(e)}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=Object.hasOwnProperty,h=Object.setPrototypeOf,d=Object.isFrozen,f=Object.getPrototypeOf,p=Object.getOwnPropertyDescriptor,m=Object.freeze,_=Object.seal,g=Object.create,b="undefined"!==typeof Reflect&&Reflect,y=b.apply,v=b.construct;y||(y=function(e,t,n){return e.apply(t,n)}),m||(m=function(e){return e}),_||(_=function(e){return e}),v||(v=function(e,t){return i(e,o(t))});var O=P(Array.prototype.forEach),A=P(Array.prototype.pop),w=P(Array.prototype.push),T=P(String.prototype.toLowerCase),C=P(String.prototype.match),E=P(String.prototype.replace),x=P(String.prototype.indexOf),S=P(String.prototype.trim),I=P(RegExp.prototype.test),D=j(TypeError);function P(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return y(e,t,i)}}function j(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return v(e,n)}}function R(e,t,n){n=n||T,h&&h(e,null);var i=t.length;while(i--){var o=t[i];if("string"===typeof o){var r=n(o);r!==o&&(d(t)||(t[i]=r),o=r)}e[o]=!0}return e}function L(e){var t,n=g(null);for(t in e)y(u,e,[t])&&(n[t]=e[t]);return n}function M(e,t){while(null!==e){var n=p(e,t);if(n){if(n.get)return P(n.get);if("function"===typeof n.value)return P(n.value)}e=f(e)}function i(e){return console.warn("fallback value for",e),null}return i}var N=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),F=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),k=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),V=m(["#text"]),H=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),W=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Y=_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),X=_(/<%[\w\W]*|[\w\W]*%>/gm),K=_(/^data-[\-\w.\u00B7-\uFFFF]/),$=_(/^aria-[\-\w]+$/),J=_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=_(/^(?:\w+script|data):/i),Z=_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ee=_(/^html$/i),te=function(){return"undefined"===typeof window?null:window},ne=function(t,n){if("object"!==e(t)||"function"!==typeof t.createPolicy)return null;var i=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(i=n.currentScript.getAttribute(o));var r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(a){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function ie(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te(),n=function(e){return ie(e)};if(n.version="2.4.0",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var i=t.document,r=t.document,a=t.DocumentFragment,s=t.HTMLTemplateElement,c=t.Node,l=t.Element,u=t.NodeFilter,h=t.NamedNodeMap,d=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,f=t.HTMLFormElement,p=t.DOMParser,_=t.trustedTypes,g=l.prototype,b=M(g,"cloneNode"),y=M(g,"nextSibling"),v=M(g,"childNodes"),P=M(g,"parentNode");if("function"===typeof s){var j=r.createElement("template");j.content&&j.content.ownerDocument&&(r=j.content.ownerDocument)}var oe=ne(_,i),re=oe?oe.createHTML(""):"",ae=r,se=ae.implementation,ce=ae.createNodeIterator,le=ae.createDocumentFragment,ue=ae.getElementsByTagName,he=i.importNode,de={};try{de=L(r).documentMode?r.documentMode:{}}catch(xt){}var fe={};n.isSupported="function"===typeof P&&se&&"undefined"!==typeof se.createHTMLDocument&&9!==de;var pe,me,_e=Y,ge=X,be=K,ye=$,ve=Q,Oe=Z,Ae=J,we=null,Te=R({},[].concat(o(N),o(B),o(F),o(k),o(V))),Ce=null,Ee=R({},[].concat(o(H),o(G),o(W),o(q))),xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Ie=null,De=!0,Pe=!0,je=!1,Re=!1,Le=!1,Me=!1,Ne=!1,Be=!1,Fe=!1,ze=!1,ke=!0,Ue=!1,Ve="user-content-",He=!0,Ge=!1,We={},qe=null,Ye=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xe=null,Ke=R({},["audio","video","img","source","image","track"]),$e=null,Je=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,nt=!1,it=["application/xhtml+xml","text/html"],ot="text/html",rt=null,at=r.createElement("form"),st=function(e){return e instanceof RegExp||e instanceof Function},ct=function(t){rt&&rt===t||(t&&"object"===e(t)||(t={}),t=L(t),pe=pe=-1===it.indexOf(t.PARSER_MEDIA_TYPE)?ot:t.PARSER_MEDIA_TYPE,me="application/xhtml+xml"===pe?function(e){return e}:T,we="ALLOWED_TAGS"in t?R({},t.ALLOWED_TAGS,me):Te,Ce="ALLOWED_ATTR"in t?R({},t.ALLOWED_ATTR,me):Ee,$e="ADD_URI_SAFE_ATTR"in t?R(L(Je),t.ADD_URI_SAFE_ATTR,me):Je,Xe="ADD_DATA_URI_TAGS"in t?R(L(Ke),t.ADD_DATA_URI_TAGS,me):Ke,qe="FORBID_CONTENTS"in t?R({},t.FORBID_CONTENTS,me):Ye,Se="FORBID_TAGS"in t?R({},t.FORBID_TAGS,me):{},Ie="FORBID_ATTR"in t?R({},t.FORBID_ATTR,me):{},We="USE_PROFILES"in t&&t.USE_PROFILES,De=!1!==t.ALLOW_ARIA_ATTR,Pe=!1!==t.ALLOW_DATA_ATTR,je=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=t.SAFE_FOR_TEMPLATES||!1,Le=t.WHOLE_DOCUMENT||!1,Be=t.RETURN_DOM||!1,Fe=t.RETURN_DOM_FRAGMENT||!1,ze=t.RETURN_TRUSTED_TYPE||!1,Ne=t.FORCE_BODY||!1,ke=!1!==t.SANITIZE_DOM,Ue=t.SANITIZE_NAMED_PROPS||!1,He=!1!==t.KEEP_CONTENT,Ge=t.IN_PLACE||!1,Ae=t.ALLOWED_URI_REGEXP||Ae,tt=t.NAMESPACE||et,t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xe.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&st(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xe.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xe.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(Pe=!1),Fe&&(Be=!0),We&&(we=R({},o(V)),Ce=[],!0===We.html&&(R(we,N),R(Ce,H)),!0===We.svg&&(R(we,B),R(Ce,G),R(Ce,q)),!0===We.svgFilters&&(R(we,F),R(Ce,G),R(Ce,q)),!0===We.mathMl&&(R(we,k),R(Ce,W),R(Ce,q))),t.ADD_TAGS&&(we===Te&&(we=L(we)),R(we,t.ADD_TAGS,me)),t.ADD_ATTR&&(Ce===Ee&&(Ce=L(Ce)),R(Ce,t.ADD_ATTR,me)),t.ADD_URI_SAFE_ATTR&&R($e,t.ADD_URI_SAFE_ATTR,me),t.FORBID_CONTENTS&&(qe===Ye&&(qe=L(qe)),R(qe,t.FORBID_CONTENTS,me)),He&&(we["#text"]=!0),Le&&R(we,["html","head","body"]),we.table&&(R(we,["tbody"]),delete Se.tbody),m&&m(t),rt=t)},lt=R({},["mi","mo","mn","ms","mtext"]),ut=R({},["foreignobject","desc","title","annotation-xml"]),ht=R({},["title","style","font","a","script"]),dt=R({},B);R(dt,F),R(dt,z);var ft=R({},k);R(ft,U);var pt=function(e){var t=P(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});var n=T(e.tagName),i=T(t.tagName);return e.namespaceURI===Ze?t.namespaceURI===et?"svg"===n:t.namespaceURI===Qe?"svg"===n&&("annotation-xml"===i||lt[i]):Boolean(dt[n]):e.namespaceURI===Qe?t.namespaceURI===et?"math"===n:t.namespaceURI===Ze?"math"===n&&ut[i]:Boolean(ft[n]):e.namespaceURI===et&&(!(t.namespaceURI===Ze&&!ut[i])&&(!(t.namespaceURI===Qe&&!lt[i])&&(!ft[n]&&(ht[n]||!dt[n]))))},mt=function(e){w(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(xt){try{e.outerHTML=re}catch(xt){e.remove()}}},_t=function(e,t){try{w(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(xt){w(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ce[e])if(Be||Fe)try{mt(t)}catch(xt){}else try{t.setAttribute(e,"")}catch(xt){}},gt=function(e){var t,n;if(Ne)e="<remove></remove>"+e;else{var i=C(e,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===pe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=oe?oe.createHTML(e):e;if(tt===et)try{t=(new p).parseFromString(o,pe)}catch(xt){}if(!t||!t.documentElement){t=se.createDocument(tt,"template",null);try{t.documentElement.innerHTML=nt?"":o}catch(xt){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(r.createTextNode(n),a.childNodes[0]||null),tt===et?ue.call(t,Le?"html":"body")[0]:Le?t.documentElement:a},bt=function(e){return ce.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},yt=function(e){return e instanceof f&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof d)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore)},vt=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName},Ot=function(e,t,i){fe[e]&&O(fe[e],(function(e){e.call(n,t,i,rt)}))},At=function(e){var t;if(Ot("beforeSanitizeElements",e,null),yt(e))return mt(e),!0;if(I(/[\u0080-\uFFFF]/,e.nodeName))return mt(e),!0;var i=me(e.nodeName);if(Ot("uponSanitizeElement",e,{tagName:i,allowedTags:we}),e.hasChildNodes()&&!vt(e.firstElementChild)&&(!vt(e.content)||!vt(e.content.firstElementChild))&&I(/<[/\w]/g,e.innerHTML)&&I(/<[/\w]/g,e.textContent))return mt(e),!0;if("select"===i&&I(/<template/i,e.innerHTML))return mt(e),!0;if(!we[i]||Se[i]){if(!Se[i]&&Tt(i)){if(xe.tagNameCheck instanceof RegExp&&I(xe.tagNameCheck,i))return!1;if(xe.tagNameCheck instanceof Function&&xe.tagNameCheck(i))return!1}if(He&&!qe[i]){var o=P(e)||e.parentNode,r=v(e)||e.childNodes;if(r&&o)for(var a=r.length,s=a-1;s>=0;--s)o.insertBefore(b(r[s],!0),y(e))}return mt(e),!0}return e instanceof l&&!pt(e)?(mt(e),!0):"noscript"!==i&&"noembed"!==i||!I(/<\/no(script|embed)/i,e.innerHTML)?(Re&&3===e.nodeType&&(t=e.textContent,t=E(t,_e," "),t=E(t,ge," "),e.textContent!==t&&(w(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ot("afterSanitizeElements",e,null),!1):(mt(e),!0)},wt=function(e,t,n){if(ke&&("id"===t||"name"===t)&&(n in r||n in at))return!1;if(Pe&&!Ie[t]&&I(be,t));else if(De&&I(ye,t));else if(!Ce[t]||Ie[t]){if(!(Tt(e)&&(xe.tagNameCheck instanceof RegExp&&I(xe.tagNameCheck,e)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(e))&&(xe.attributeNameCheck instanceof RegExp&&I(xe.attributeNameCheck,t)||xe.attributeNameCheck instanceof Function&&xe.attributeNameCheck(t))||"is"===t&&xe.allowCustomizedBuiltInElements&&(xe.tagNameCheck instanceof RegExp&&I(xe.tagNameCheck,n)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(n))))return!1}else if($e[t]);else if(I(Ae,E(n,Oe,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==x(n,"data:")||!Xe[e]){if(je&&!I(ve,E(n,Oe,"")));else if(n)return!1}else;return!0},Tt=function(e){return e.indexOf("-")>0},Ct=function(t){var i,o,r,a;Ot("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ce};a=s.length;while(a--){i=s[a];var l=i,u=l.name,h=l.namespaceURI;if(o="value"===u?i.value:S(i.value),r=me(u),c.attrName=r,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,Ot("uponSanitizeAttribute",t,c),o=c.attrValue,!c.forceKeepAttr&&(_t(u,t),c.keepAttr))if(I(/\/>/i,o))_t(u,t);else{Re&&(o=E(o,_e," "),o=E(o,ge," "));var d=me(t.nodeName);if(wt(d,r,o)){if(!Ue||"id"!==r&&"name"!==r||(_t(u,t),o=Ve+o),oe&&"object"===e(_)&&"function"===typeof _.getAttributeType)if(h);else switch(_.getAttributeType(d,r)){case"TrustedHTML":o=oe.createHTML(o);break;case"TrustedScriptURL":o=oe.createScriptURL(o);break}try{h?t.setAttributeNS(h,u,o):t.setAttribute(u,o),A(n.removed)}catch(xt){}}}}Ot("afterSanitizeAttributes",t,null)}},Et=function e(t){var n,i=bt(t);Ot("beforeSanitizeShadowDOM",t,null);while(n=i.nextNode())Ot("uponSanitizeShadowNode",n,null),At(n)||(n.content instanceof a&&e(n.content),Ct(n));Ot("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(o){var r,s,l,u,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(nt=!o,nt&&(o="\x3c!--\x3e"),"string"!==typeof o&&!vt(o)){if("function"!==typeof o.toString)throw D("toString is not a function");if(o=o.toString(),"string"!==typeof o)throw D("dirty is not a string, aborting")}if(!n.isSupported){if("object"===e(t.toStaticHTML)||"function"===typeof t.toStaticHTML){if("string"===typeof o)return t.toStaticHTML(o);if(vt(o))return t.toStaticHTML(o.outerHTML)}return o}if(Me||ct(d),n.removed=[],"string"===typeof o&&(Ge=!1),Ge){if(o.nodeName){var f=me(o.nodeName);if(!we[f]||Se[f])throw D("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof c)r=gt("\x3c!----\x3e"),s=r.ownerDocument.importNode(o,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Be&&!Re&&!Le&&-1===o.indexOf("<"))return oe&&ze?oe.createHTML(o):o;if(r=gt(o),!r)return Be?null:ze?re:""}r&&Ne&&mt(r.firstChild);var p=bt(Ge?o:r);while(l=p.nextNode())3===l.nodeType&&l===u||At(l)||(l.content instanceof a&&Et(l.content),Ct(l),u=l);if(u=null,Ge)return o;if(Be){if(Fe){h=le.call(r.ownerDocument);while(r.firstChild)h.appendChild(r.firstChild)}else h=r;return Ce.shadowroot&&(h=he.call(i,h,!0)),h}var m=Le?r.outerHTML:r.innerHTML;return Le&&we["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&I(ee,r.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+m),Re&&(m=E(m,_e," "),m=E(m,ge," ")),oe&&ze?oe.createHTML(m):m},n.setConfig=function(e){ct(e),Me=!0},n.clearConfig=function(){rt=null,Me=!1},n.isValidAttribute=function(e,t,n){rt||ct({});var i=me(e),o=me(t);return wt(i,o,n)},n.addHook=function(e,t){"function"===typeof t&&(fe[e]=fe[e]||[],w(fe[e],t))},n.removeHook=function(e){if(fe[e])return A(fe[e])},n.removeHooks=function(e){fe[e]&&(fe[e]=[])},n.removeAllHooks=function(){fe={}},n}var oe=ie();return oe}))},c0fd:function(e,t,n){"use strict";var i=n("2f63"),o=n("4f04");function r(e){if(!Object(i["a"])(e))throw new o["a"]("queryString is required.");const t={};if(""===e)return t;const n=e.replace(/\+/g,"%20").split(/[&;]/);for(let o=0,r=n.length;o<r;++o){const e=n[o].split("="),r=decodeURIComponent(e[0]);let a=e[1];a=Object(i["a"])(a)?decodeURIComponent(a):"";const s=t[r];"string"===typeof s?t[r]=[s,a]:Array.isArray(s)?s.push(a):t[r]=a}return t}t["a"]=r},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},c6cd:function(e,t,n){var i=n("da84"),o=n("ce4e"),r="__core-js_shared__",a=i[r]||o(r,{});e.exports=a},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},c909:function(e,t,n){var i,o,r;
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(a,s){"use strict";e.exports?e.exports=s(n("63c5"),n("0056"),n("afab")):(o=[n("63c5"),n("0056"),n("afab")],i=s,r="function"===typeof i?i.apply(t,o):i,void 0===r||(e.exports=r))})(0,(function(e,t,n,i){"use strict";var o=i&&i.URI;function r(e,t){var n=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof r))return n?i?new r(e,t):new r(e):new r;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!==typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}function a(e){return/^[0-9]+$/.test(e)}r.version="1.19.11";var s=r.prototype,c=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function h(e){return"Array"===u(e)}function d(e,t){var n,i,o={};if("RegExp"===u(t))o=null;else if(h(t))for(n=0,i=t.length;n<i;n++)o[t[n]]=!0;else o[t]=!0;for(n=0,i=e.length;n<i;n++){var r=o&&void 0!==o[e[n]]||!o&&t.test(e[n]);r&&(e.splice(n,1),i--,n--)}return e}function f(e,t){var n,i;if(h(t)){for(n=0,i=t.length;n<i;n++)if(!f(e,t[n]))return!1;return!0}var o=u(t);for(n=0,i=e.length;n<i;n++)if("RegExp"===o){if("string"===typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!h(e)||!h(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function m(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function _(e){return escape(e)}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,_).replace(/\*/g,"%2A")}r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:r.preventInvalidHostname,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.preventInvalidHostname=!1,r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,r.idn_expression=/[^a-z0-9\._-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},r.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.hostProtocols=["http","https"],r.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},r.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return r.domAttributes[t]}},r.encode=g,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=g,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},r.encodeQuery=function(e,t){var n=r.encode(e+"");return void 0===t&&(t=r.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},r.decodeQuery=function(e,t){e+="",void 0===t&&(t=r.escapeQuerySpace);try{return r.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}};var b,y={encode:"encode",decode:"decode"},v=function(e,t){return function(n){try{return r[t](n+"").replace(r.characters[e][t].expression,(function(n){return r.characters[e][t].map[n]}))}catch(i){return n}}};for(b in y)r[b+"PathSegment"]=v("pathname",y[b]),r[b+"UrnPathSegment"]=v("urnpath",y[b]);var O=function(e,t,n){return function(i){var o;o=n?function(e){return r[t](r[n](e))}:r[t];for(var a=(i+"").split(e),s=0,c=a.length;s<c;s++)a[s]=o(a[s]);return a.join(e)}};function A(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function w(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!i),this)}}r.decodePath=O("/","decodePathSegment"),r.decodeUrnPath=O(":","decodeUrnPathSegment"),r.recodePath=O("/","encodePathSegment","decode"),r.recodeUrnPath=O(":","encodeUrnPathSegment","decode"),r.encodeReserved=v("reserved","encode"),r.parse=function(e,t){var n;return t||(t={preventInvalidHostname:r.preventInvalidHostname}),e=e.replace(r.leading_whitespace_expression,""),e=e.replace(r.ascii_tab_whitespace,""),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),e=e.replace(/^[/\\]{2,}/i,"//"),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=r.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(r.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3).replace(/\\/g,"/")?(e=e.substring(n+3),e=r.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},r.parseHost=function(e,t){e||(e=""),e=e.replace(/\\/g,"/");var n,i,o=e.indexOf("/");if(-1===o&&(o=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,o)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),c=e.indexOf(":",a+1);-1!==c&&(-1===s||c<s)?(t.hostname=e.substring(0,o)||null,t.port=null):(i=e.substring(0,o).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),t.preventInvalidHostname&&r.ensureValidHostname(t.hostname,t.protocol),t.port&&r.ensureValidPort(t.port),e.substring(o)||"/"},r.parseAuthority=function(e,t){return e=r.parseUserinfo(e,t),r.parseHost(e,t)},r.parseUserinfo=function(e,t){var n=e,i=e.indexOf("\\");-1!==i&&(e=e.replace(/\\/g,"/"));var o,a=e.indexOf("/"),s=e.lastIndexOf("@",a>-1?a:e.length-1);return s>-1&&(-1===a||s<a)?(o=e.substring(0,s).split(":"),t.username=o[0]?r.decode(o[0]):null,o.shift(),t.password=o[0]?r.decode(o.join(":")):null,e=n.substring(s+1)):(t.username=null,t.password=null),e},r.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,i,o,a={},s=e.split("&"),l=s.length,u=0;u<l;u++)n=s[u].split("="),i=r.decodeQuery(n.shift(),t),o=n.length?r.decodeQuery(n.join("="),t):null,"__proto__"!==i&&(c.call(a,i)?("string"!==typeof a[i]&&null!==a[i]||(a[i]=[a[i]]),a[i].push(o)):a[i]=o);return a},r.build=function(e){var t="",n=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",n=!0),t+=r.buildAuthority(e)||"","string"===typeof e.path&&("/"!==e.path.charAt(0)&&n&&(t+="/"),t+=e.path),"string"===typeof e.query&&e.query&&(t+="?"+e.query),"string"===typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},r.buildHost=function(e){var t="";return e.hostname?(r.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},r.buildAuthority=function(e){return r.buildUserinfo(e)+r.buildHost(e)},r.buildUserinfo=function(e){var t="";return e.username&&(t+=r.encode(e.username)),e.password&&(t+=":"+r.encode(e.password)),t&&(t+="@"),t},r.buildQuery=function(e,t,n){var i,o,a,s,l="";for(o in e)if("__proto__"!==o&&c.call(e,o))if(h(e[o]))for(i={},a=0,s=e[o].length;a<s;a++)void 0!==e[o][a]&&void 0===i[e[o][a]+""]&&(l+="&"+r.buildQueryParameter(o,e[o][a],n),!0!==t&&(i[e[o][a]+""]=!0));else void 0!==e[o]&&(l+="&"+r.buildQueryParameter(o,e[o],n));return l.substring(1)},r.buildQueryParameter=function(e,t,n){return r.encodeQuery(e,n)+(null!==t?"="+r.encodeQuery(t,n):"")},r.addQuery=function(e,t,n){if("object"===typeof t)for(var i in t)c.call(t,i)&&r.addQuery(e,i,t[i]);else{if("string"!==typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"===typeof e[t]&&(e[t]=[e[t]]),h(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},r.setQuery=function(e,t,n){if("object"===typeof t)for(var i in t)c.call(t,i)&&r.setQuery(e,i,t[i]);else{if("string"!==typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===n?null:n}},r.removeQuery=function(e,t,n){var i,o,a;if(h(t))for(i=0,o=t.length;i<o;i++)e[t[i]]=void 0;else if("RegExp"===u(t))for(a in e)t.test(a)&&(e[a]=void 0);else if("object"===typeof t)for(a in t)c.call(t,a)&&r.removeQuery(e,a,t[a]);else{if("string"!==typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===u(n)?!h(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=d(e[t],n):e[t]!==String(n)||h(n)&&1!==n.length?h(e[t])&&(e[t]=d(e[t],n)):e[t]=void 0:e[t]=void 0}},r.hasQuery=function(e,t,n,i){switch(u(t)){case"String":break;case"RegExp":for(var o in e)if(c.call(e,o)&&t.test(o)&&(void 0===n||r.hasQuery(e,o,n)))return!0;return!1;case"Object":for(var a in t)if(c.call(t,a)&&!r.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(n)){case"Undefined":return t in e;case"Boolean":var s=Boolean(h(e[t])?e[t].length:e[t]);return n===s;case"Function":return!!n(e[t],t,e);case"Array":if(!h(e[t]))return!1;var l=i?f:p;return l(e[t],n);case"RegExp":return h(e[t])?!!i&&f(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return h(e[t])?!!i&&f(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.joinPaths=function(){for(var e=[],t=[],n=0,i=0;i<arguments.length;i++){var o=new r(arguments[i]);e.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"===typeof a[s]&&t.push(a[s]),a[s]&&n++}if(!t.length||!n)return new r("");var c=new r("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||c.path("/"+c.path()),c.normalize()},r.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},r.withinString=function(e,t,n){n||(n={});var i=n.start||r.findUri.start,o=n.end||r.findUri.end,a=n.trim||r.findUri.trim,s=n.parens||r.findUri.parens,c=/[a-z0-9-]=["']?$/i;i.lastIndex=0;while(1){var l=i.exec(e);if(!l)break;var u=l.index;if(n.ignoreHtml){var h=e.slice(Math.max(u-3,0),u);if(h&&c.test(h))continue}var d=u+e.slice(u).search(o),f=e.slice(u,d),p=-1;while(1){var m=s.exec(f);if(!m)break;var _=m.index+m[0].length;p=Math.max(p,_)}if(f=p>-1?f.slice(0,p)+f.slice(p).replace(a,""):f.replace(a,""),!(f.length<=l[0].length)&&(!n.ignore||!n.ignore.test(f))){d=u+f.length;var g=t(f,u,d,e);void 0!==g?(g=String(g),e=e.slice(0,u)+g+e.slice(d),i.lastIndex=u+g.length):i.lastIndex=d}}return i.lastIndex=0,e},r.ensureValidHostname=function(t,n){var i=!!t,o=!!n,a=!1;if(o&&(a=f(r.hostProtocols,n)),a&&!i)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(t&&t.match(r.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(r.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},r.ensureValidPort=function(e){if(e){var t=Number(e);if(!(a(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},r.noConflict=function(e){if(e){var t={URI:this.noConflict()};return i.URITemplate&&"function"===typeof i.URITemplate.noConflict&&(t.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"===typeof i.IPv6.noConflict&&(t.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"===typeof i.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=i.SecondLevelDomains.noConflict()),t}return i.URI===this&&(i.URI=o),this},s.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new r(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=A("protocol"),s.username=A("username"),s.password=A("password"),s.hostname=A("hostname"),s.port=A("port"),s.query=w("query","?"),s.fragment=w("fragment","#"),s.search=function(e,t){var n=this.query(e,t);return"string"===typeof n&&n.length?"?"+n:n},s.hash=function(e,t){var n=this.fragment(e,t);return"string"===typeof n&&n.length?"#"+n:n},s.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?r.decodeUrnPath:r.decodePath)(n):n}return this._parts.urn?this._parts.path=e?r.recodeUrnPath(e):"":this._parts.path=e?r.recodePath(e):"/",this.build(!t),this},s.path=s.pathname,s.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=r._parts();var i=e instanceof r,o="object"===typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var a=r.getDomAttribute(e);e=e[a]||"",o=!1}if(!i&&o&&void 0!==e.pathname&&(e=e.toString()),"string"===typeof e||e instanceof String)this._parts=r.parse(String(e),this._parts);else{if(!i&&!o)throw new TypeError("invalid input");var s=i?e._parts:e;for(n in s)"query"!==n&&c.call(this._parts,n)&&(this._parts[n]=s[n]);s.query&&this.query(s.query,!1)}return this.build(!t),this},s.is=function(e){var t=!1,i=!1,o=!1,a=!1,s=!1,c=!1,l=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),t=i||o,a=!t,s=a&&n&&n.has(this._parts.hostname),c=a&&r.idn_expression.test(this._parts.hostname),l=a&&r.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return c;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var T=s.protocol,C=s.port,E=s.hostname;s.protocol=function(e,t){if(e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(r.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return T.call(this,e,t)},s.scheme=s.protocol,s.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),r.ensureValidPort(e))),C.call(this,e,t))},s.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={preventInvalidHostname:this._parts.preventInvalidHostname},i=r.parseHost(e,n);if("/"!==i)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname,this._parts.preventInvalidHostname&&r.ensureValidHostname(e,this._parts.protocol)}return E.call(this,e,t)},s.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol(),i=this.authority();return i?(n?n+"://":"")+this.authority():""}var o=r(e);return this.protocol(o.protocol()).authority(o.authority()).build(!t),this},s.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildHost(this._parts):"";var n=r.parseHost(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?r.buildAuthority(this._parts):"";var n=r.parseAuthority(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=r.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),r.parseUserinfo(e,this._parts),this.build(!t),this},s.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=r.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},s.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,i),a=new RegExp("^"+l(o));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&r.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},s.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"===typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(r.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},s.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"===typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(i+1);return!0!==t&&n&&n.list[o.toLowerCase()]&&n.get(this._parts.hostname)||o}var r;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},s.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?r.decodePath(i):i}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},s.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!==typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?r.decodePathSegment(i):i}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return e=r.recodePath(e),this._parts.path=this._parts.path.replace(a,e),o?this.normalizePath(t):this.build(!t),this},s.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(n=o.substring(a+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?r.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var s,c=this.suffix();if(c)s=e?new RegExp(l(c)+"$"):new RegExp(l("."+c)+"$");else{if(!e)return this;this._parts.path+="."+r.recodePath(e)}return s&&(e=r.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},s.segment=function(e,t,n){var i=this._parts.urn?":":"/",o=this.path(),r="/"===o.substring(0,1),a=o.split(i);if(void 0!==e&&"number"!==typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!==typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(r&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(h(t)){a=[];for(var s=0,c=t.length;s<c;s++)(t[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(m(t[s])))}else(t||"string"===typeof t)&&(t=m(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=m(t):a.splice(e,1);return r&&a.unshift(""),this.path(a.join(i),n)},s.segmentCoded=function(e,t,n){var i,o,a;if("number"!==typeof e&&(n=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,n),h(i))for(o=0,a=i.length;o<a;o++)i[o]=r.decode(i[o]);else i=void 0!==i?r.decode(i):void 0;return i}if(h(t))for(o=0,a=t.length;o<a;o++)t[o]=r.encode(t[o]);else t="string"===typeof t||t instanceof String?r.encode(t):t;return this.segment(e,t,n)};var x=s.query;return s.query=function(e,t){if(!0===e)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof e){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!==typeof e?(this._parts.query=r.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):x.call(this,e,t)},s.setQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!==typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in e)c.call(e,o)&&(i[o]=e[o])}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!==typeof e&&(n=t),this.build(!n),this},s.addQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,e,void 0===t?null:t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!==typeof e&&(n=t),this.build(!n),this},s.removeQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,e,t),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!==typeof e&&(n=t),this.build(!n),this},s.hasQuery=function(e,t,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,e,t,n)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(e){return"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},s.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},s.normalizePort=function(e){return"string"===typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},s.normalizePath=function(e){var t,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=r.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;n=r.recodePath(n);var i,o,a="";"/"!==n.charAt(0)&&(t=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=n.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));while(1){if(i=n.search(/\/\.\.(\/|$)/),-1===i)break;0!==i?(o=n.substring(0,i).lastIndexOf("/"),-1===o&&(o=i),n=n.substring(0,o)+n.substring(i+3)):n=n.substring(3)}return t&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!e),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(e){return"string"===typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},s.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var e=r.encode,t=r.decode;r.encode=escape,r.decode=decodeURIComponent;try{this.normalize()}finally{r.encode=e,r.decode=t}return this},s.unicode=function(){var e=r.encode,t=r.decode;r.encode=g,r.decode=unescape;try{this.normalize()}finally{r.encode=e,r.decode=t}return this},s.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",o=0,a=t._parts.query.split("&"),s=a.length;o<s;o++){var c=(a[o]||"").split("=");i+="&"+r.decodeQuery(c[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==c[1]&&(i+="="+r.decodeQuery(c[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(t.hash(),!0),n},s.absoluteTo=function(e){var t,n,i,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof r||(e=new r(e)),o._parts.protocol)return o;if(o._parts.protocol=e._parts.protocol,this._parts.hostname)return o;for(n=0;i=a[n];n++)o._parts[i]=e._parts[i];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(t=e.directory(),t=t||(0===e.path().indexOf("/")?"/":""),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),o.build(),o},s.relativeTo=function(e){var t,n,i,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new r(e).normalize(),t=s._parts,n=e._parts,o=s.path(),a=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,o===a)return t.path="",s.build();if(i=r.commonPath(o,a),!i)return s.build();var c=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=c+t.path.substring(i.length)||"./",s.build()},s.equals=function(e){var t,n,i,o=this.clone(),a=new r(e),s={},l={},u={};if(o.normalize(),a.normalize(),o.toString()===a.toString())return!0;if(t=o.query(),n=a.query(),o.query(""),a.query(""),o.toString()!==a.toString())return!1;if(t.length!==n.length)return!1;for(i in s=r.parseQuery(t,this._parts.escapeQuerySpace),l=r.parseQuery(n,this._parts.escapeQuerySpace),s)if(c.call(s,i)){if(h(s[i])){if(!p(s[i],l[i]))return!1}else if(s[i]!==l[i])return!1;u[i]=!0}for(i in l)if(c.call(l,i)&&!u[i])return!1;return!0},s.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},s.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},s.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},r}))},ca84:function(e,t,n){var i=n("5135"),o=n("fc6a"),r=n("4d64").indexOf,a=n("d012");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)!i(a,n)&&i(s,n)&&l.push(n);while(t.length>c)i(s,n=t[c++])&&(~r(l,n)||l.push(n));return l}},cc12:function(e,t,n){var i=n("da84"),o=n("861d"),r=i.document,a=o(r)&&o(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},cca6:function(e,t,n){var i=n("23e7"),o=n("60da");i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},cdf9:function(e,t,n){var i=n("825a"),o=n("861d"),r=n("f069");e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=r.f(e),a=n.resolve;return a(t),n.promise}},ce4e:function(e,t,n){var i=n("da84"),o=n("9112");e.exports=function(e,t){try{o(i,e,t)}catch(n){i[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var i=n("428f"),o=n("da84"),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},d1e7:function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!i.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},d28b:function(e,t,n){var i=n("746f");i("iterator")},d2bb:function(e,t,n){var i=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return i(n),o(r),t?e.call(n,r):n.__proto__=r,n}}():void 0)},d34e:function(e,t){var n=function(e){void 0==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};n.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},n.prototype.init_by_array=function(e,t){var n,i,o;for(this.init_seed(19650218),n=1,i=0,o=this.N>t?this.N:t;o;o--){var r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&r)>>>16)<<16)+1664525*(65535&r))+e[i]+i,this.mt[n]>>>=0,n++,i++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),i>=t&&(i=0)}for(o=this.N-1;o;o--){r=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&r)>>>16)<<16)+1566083941*(65535&r))-n,this.mt[n]>>>=0,n++,n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},n.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0},n.prototype.random_int31=function(){return this.random_int()>>>1},n.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},n.prototype.random=function(){return this.random_int()*(1/4294967296)},n.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},n.prototype.random_long=function(){var e=this.random_int()>>>5,t=this.random_int()>>>6;return(67108864*e+t)*(1/9007199254740992)},e.exports=n},d3b7:function(e,t,n){var i=n("00ee"),o=n("6eeb"),r=n("b041");i||o(Object.prototype,"toString",r,{unsafe:!0})},d44e:function(e,t,n){var i=n("9bf2").f,o=n("5135"),r=n("b622"),a=r("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},d4da:function(e,t,n){"use strict";var i=n("2f63"),o=n("4f04");const r={};function a(e){return`${e} is required, actual value was undefined`}function s(e,t,n){return`Expected ${n} to be typeof ${t}, actual typeof was ${e}`}r.typeOf={},r.defined=function(e,t){if(!Object(i["a"])(t))throw new o["a"](a(e))},r.typeOf.func=function(e,t){if("function"!==typeof t)throw new o["a"](s(typeof t,"function",e))},r.typeOf.string=function(e,t){if("string"!==typeof t)throw new o["a"](s(typeof t,"string",e))},r.typeOf.number=function(e,t){if("number"!==typeof t)throw new o["a"](s(typeof t,"number",e))},r.typeOf.number.lessThan=function(e,t,n){if(r.typeOf.number(e,t),t>=n)throw new o["a"](`Expected ${e} to be less than ${n}, actual value was ${t}`)},r.typeOf.number.lessThanOrEquals=function(e,t,n){if(r.typeOf.number(e,t),t>n)throw new o["a"](`Expected ${e} to be less than or equal to ${n}, actual value was ${t}`)},r.typeOf.number.greaterThan=function(e,t,n){if(r.typeOf.number(e,t),t<=n)throw new o["a"](`Expected ${e} to be greater than ${n}, actual value was ${t}`)},r.typeOf.number.greaterThanOrEquals=function(e,t,n){if(r.typeOf.number(e,t),t<n)throw new o["a"](`Expected ${e} to be greater than or equal to ${n}, actual value was ${t}`)},r.typeOf.object=function(e,t){if("object"!==typeof t)throw new o["a"](s(typeof t,"object",e))},r.typeOf.bool=function(e,t){if("boolean"!==typeof t)throw new o["a"](s(typeof t,"boolean",e))},r.typeOf.bigint=function(e,t){if("bigint"!==typeof t)throw new o["a"](s(typeof t,"bigint",e))},r.typeOf.number.equals=function(e,t,n,i){if(r.typeOf.number(e,n),r.typeOf.number(t,i),n!==i)throw new o["a"](`${e} must be equal to ${t}, the actual values are ${n} and ${i}`)},t["a"]=r},d4ec:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i}))},d4ed:function(e,t,n){"use strict";(function(e){var i=n("c909"),o=n.n(i),r=n("de5b"),a=n("d4da"),s=n("dc1c"),c=n("2bb9"),l=n("535a"),u=n("9c35"),h=n("2f63"),d=n("4f04"),f=n("a734"),p=n("1a99"),m=n("1f30"),_=n("2720"),g=n("96e8"),b=n("083c"),y=n("166e"),v=n("0e68"),O=n("93da"),A=n("0569"),w=n("c0fd"),T=n("de66"),C=n("4ca2"),E=n("75b2"),x=n("8a39"),S=n("283e"),I=n("3e44");const D=function(){try{const e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function P(e,t,n,i){const o=e.query();if(0===o.length)return{};let r;if(-1===o.indexOf("=")){const e={};e[o]=void 0,r=e}else r=Object(w["a"])(o);t._queryParameters=n?M(r,t._queryParameters,i):r,e.search("")}function j(e,t){const n=t._queryParameters,i=Object.keys(n);1!==i.length||Object(h["a"])(n[i[0]])?e.search(Object(A["a"])(n)):e.search(i[0])}function R(e,t){return Object(h["a"])(e)?Object(h["a"])(e.clone)?e.clone():Object(s["a"])(e):t}function L(e){if(e.state===x["a"].ISSUED||e.state===x["a"].ACTIVE)throw new S["a"]("The Resource is already being fetched.");e.state=x["a"].UNISSUED,e.deferred=void 0}function M(e,t,n){if(!n)return Object(c["a"])(e,t);const i=Object(s["a"])(e,!0);for(const o in t)if(t.hasOwnProperty(o)){let e=i[o];const n=t[o];Object(h["a"])(e)?(Array.isArray(e)||(e=i[o]=[e]),i[o]=e.concat(n)):i[o]=Array.isArray(n)?n.slice():n}return i}function N(e){e=Object(l["a"])(e,l["a"].EMPTY_OBJECT),"string"===typeof e&&(e={url:e}),a["a"].typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=R(e.templateValues,{}),this._queryParameters=R(e.queryParameters,{}),this.headers=R(e.headers,{}),this.request=Object(l["a"])(e.request,new T["a"]),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=Object(l["a"])(e.retryAttempts,0),this._retryCount=0;const t=new o.a(e.url);P(t,this,!0,!0),t.fragment(""),this._url=t.toString()}let B;function F(e){const t=e.resource,n=e.flipY,i=e.skipColorSpaceConversion,o=e.preferImageBitmap,r=t.request;r.url=t.url,r.requestFunction=function(){let e=!1;t.isDataUri||t.isBlobUri||(e=t.isCrossOriginUrl);const a=Object(u["a"])();return N._Implementations.createImage(r,e,a,n,i,o),a.promise};const a=E["a"].request(r);if(Object(h["a"])(a))return a.catch((function(e){return r.state!==x["a"].FAILED?Promise.reject(e):t.retryOnError(e).then((function(a){return a?(r.state=x["a"].UNISSUED,r.deferred=void 0,F({resource:t,flipY:n,skipColorSpaceConversion:i,preferImageBitmap:o})):Promise.reject(e)}))}))}function z(e,t,n){const i={};i[t]=n,e.setQueryParameters(i);const o=e.request;o.url=e.url,o.requestFunction=function(){const t=Object(u["a"])();return window[n]=function(e){t.resolve(e);try{delete window[n]}catch(i){window[n]=void 0}},N._Implementations.loadAndExecuteScript(e.url,n,t),t.promise};const r=E["a"].request(o);if(Object(h["a"])(r))return r.catch((function(i){return o.state!==x["a"].FAILED?Promise.reject(i):e.retryOnError(i).then((function(r){return r?(o.state=x["a"].UNISSUED,o.deferred=void 0,z(e,t,n)):Promise.reject(i)}))}))}N.createIfNeeded=function(e){return e instanceof N?e.getDerivedResource({request:e.request}):"string"!==typeof e?e:new N({url:e})},N.supportsImageBitmapOptions=function(){if(Object(h["a"])(B))return B;if("function"!==typeof createImageBitmap)return B=Promise.resolve(!1),B;const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC";return B=N.fetchBlob({url:e}).then((function(e){const t={imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"};return Promise.all([createImageBitmap(e,t),createImageBitmap(e)])})).then((function(e){const t=Object(_["a"])(e[0]),n=Object(_["a"])(e[1]);return t[1]!==n[1]})).catch((function(){return!1})),B},Object.defineProperties(N,{isBlobSupported:{get:function(){return D}}}),Object.defineProperties(N.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){const t=new o.a(e);P(t,this,!1),t.fragment(""),this._url=t.toString()}},extension:{get:function(){return Object(m["a"])(this._url)}},isDataUri:{get:function(){return Object(y["a"])(this._url)}},isBlobUri:{get:function(){return Object(g["a"])(this._url)}},isCrossOriginUrl:{get:function(){return Object(b["a"])(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}}}),N.prototype.toString=function(){return this.getUrlComponent(!0,!0)},N.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;const n=new o.a(this._url);e&&j(n,this);let i=n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}");const r=this._templateValues;return i=i.replace(/{(.*?)}/g,(function(e,t){const n=r[t];return Object(h["a"])(n)?encodeURIComponent(n):e})),t&&Object(h["a"])(this.proxy)&&(i=this.proxy.getURL(i)),i},N.prototype.setQueryParameters=function(e,t){this._queryParameters=t?M(this._queryParameters,e,!1):M(e,this._queryParameters,!1)},N.prototype.appendQueryParameters=function(e){this._queryParameters=M(e,this._queryParameters,!0)},N.prototype.setTemplateValues=function(e,t){this._templateValues=t?Object(c["a"])(this._templateValues,e):Object(c["a"])(e,this._templateValues)},N.prototype.getDerivedResource=function(e){const t=this.clone();if(t._retryCount=0,Object(h["a"])(e.url)){const n=new o.a(e.url),i=Object(l["a"])(e.preserveQueryParameters,!1);P(n,t,!0,i),n.fragment(""),""!==n.scheme()?t._url=n.toString():t._url=n.absoluteTo(new o.a(Object(f["a"])(this._url))).toString()}return Object(h["a"])(e.queryParameters)&&(t._queryParameters=Object(c["a"])(e.queryParameters,t._queryParameters)),Object(h["a"])(e.templateValues)&&(t._templateValues=Object(c["a"])(e.templateValues,t.templateValues)),Object(h["a"])(e.headers)&&(t.headers=Object(c["a"])(e.headers,t.headers)),Object(h["a"])(e.proxy)&&(t.proxy=e.proxy),Object(h["a"])(e.request)&&(t.request=e.request),Object(h["a"])(e.retryCallback)&&(t.retryCallback=e.retryCallback),Object(h["a"])(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},N.prototype.retryOnError=function(e){const t=this.retryCallback;if("function"!==typeof t||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);const n=this;return Promise.resolve(t(this,e)).then((function(e){return++n._retryCount,e}))},N.prototype.clone=function(e){return Object(h["a"])(e)||(e=new N({url:this._url})),e._url=this._url,e._queryParameters=Object(s["a"])(this._queryParameters),e._templateValues=Object(s["a"])(this._templateValues),e.headers=Object(s["a"])(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},N.prototype.getBaseUri=function(e){return Object(p["a"])(this.getUrlComponent(e),e)},N.prototype.appendForwardSlash=function(){this._url=Object(r["a"])(this._url)},N.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},N.fetchArrayBuffer=function(e){const t=new N(e);return t.fetchArrayBuffer()},N.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},N.fetchBlob=function(e){const t=new N(e);return t.fetchBlob()},N.prototype.fetchImage=function(e){e=Object(l["a"])(e,l["a"].EMPTY_OBJECT);const t=Object(l["a"])(e.preferImageBitmap,!1),n=Object(l["a"])(e.preferBlob,!1),i=Object(l["a"])(e.flipY,!1),o=Object(l["a"])(e.skipColorSpaceConversion,!1);if(L(this.request),!D||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!n)return F({resource:this,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:t});const r=this.fetchBlob();if(!Object(h["a"])(r))return;let a,s,c,u;return N.supportsImageBitmapOptions().then((function(e){return a=e,s=a&&t,r})).then((function(e){if(!Object(h["a"])(e))return;if(u=e,s)return N.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});const t=window.URL.createObjectURL(e);return c=new N({url:t}),F({resource:c,flipY:i,skipColorSpaceConversion:o,preferImageBitmap:!1})})).then((function(e){if(Object(h["a"])(e))return e.blob=u,s||window.URL.revokeObjectURL(c.url),e})).catch((function(e){return Object(h["a"])(c)&&window.URL.revokeObjectURL(c.url),e.blob=u,Promise.reject(e)}))},N.fetchImage=function(e){const t=new N(e);return t.fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},N.prototype.fetchText=function(){return this.fetch({responseType:"text"})},N.fetchText=function(e){const t=new N(e);return t.fetchText()},N.prototype.fetchJson=function(){const e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(Object(h["a"])(e))return e.then((function(e){if(Object(h["a"])(e))return JSON.parse(e)}))},N.fetchJson=function(e){const t=new N(e);return t.fetchJson()},N.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},N.fetchXML=function(e){const t=new N(e);return t.fetchXML()},N.prototype.fetchJsonp=function(e){let t;e=Object(l["a"])(e,"callback"),L(this.request);do{t=`loadJsonp${O["a"].nextRandomNumber().toString().substring(2,8)}`}while(Object(h["a"])(window[t]));return z(this,e,t)},N.fetchJsonp=function(e){const t=new N(e);return t.fetchJsonp(e.callbackParameterName)},N.prototype._makeRequest=function(e){const t=this;L(t.request);const n=t.request;n.url=t.url,n.requestFunction=function(){const i=e.responseType,o=Object(c["a"])(e.headers,t.headers),r=e.overrideMimeType,a=e.method,s=e.data,l=Object(u["a"])(),d=N._Implementations.loadWithXhr(t.url,i,a,s,o,l,r);return Object(h["a"])(d)&&Object(h["a"])(d.abort)&&(n.cancelFunction=function(){d.abort()}),l.promise};const i=E["a"].request(n);if(Object(h["a"])(i))return i.then((function(e){return n.cancelFunction=void 0,e})).catch((function(i){return n.cancelFunction=void 0,n.state!==x["a"].FAILED?Promise.reject(i):t.retryOnError(i).then((function(o){return o?(n.state=x["a"].UNISSUED,n.deferred=void 0,t.fetch(e)):Promise.reject(i)}))}))};const k=/^data:(.*?)(;base64)?,(.*)$/;function U(e,t){const n=decodeURIComponent(t);return e?atob(n):n}function V(e,t){const n=U(e,t),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return i}function H(e,t){t=Object(l["a"])(t,"");const n=e[1],i=!!e[2],o=e[3];let r,a;switch(t){case"":case"text":return U(i,o);case"arraybuffer":return V(i,o);case"blob":return r=V(i,o),new Blob([r],{type:n});case"document":return a=new DOMParser,a.parseFromString(U(i,o),n);case"json":return JSON.parse(U(i,o));default:throw new d["a"](`Unhandled responseType: ${t}`)}}function G(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}function W(t,i,o,r,a,s,c){let l,u;Promise.all([n.e("chunk-429c32b9").then(n.t.bind(null,"0b16",7)),Promise.all([n.e("chunk-60cc0512"),n.e("chunk-40064d5e")]).then(n.t.bind(null,"470b",7))]).then(([e,i])=>(l=e.parse(t),u=i,"https:"===l.protocol?Promise.all([n.e("chunk-60cc0512"),n.e("chunk-429c32b9"),n.e("chunk-a5846a34")]).then(n.t.bind(null,"24f8",7)):Promise.all([n.e("chunk-60cc0512"),n.e("chunk-429c32b9"),n.e("chunk-01877047")]).then(n.t.bind(null,"9490",7)))).then(t=>{const n={protocol:l.protocol,hostname:l.hostname,port:l.port,path:l.path,query:l.query,method:o,headers:a};t.request(n).on("response",(function(t){if(t.statusCode<200||t.statusCode>=300)return void s.reject(new C["a"](t.statusCode,t,t.headers));const n=[];t.on("data",(function(e){n.push(e)})),t.on("end",(function(){const o=e.concat(n);"gzip"===t.headers["content-encoding"]?u.gunzip(o,(function(e,t){e?s.reject(new S["a"]("Error decompressing response.")):s.resolve(G(t,i))})):s.resolve(G(o,i))}))})).on("error",(function(e){s.reject(new C["a"])})).end()})}N.prototype.fetch=function(e){return e=R(e,{}),e.method="GET",this._makeRequest(e)},N.fetch=function(e){const t=new N(e);return t.fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.delete=function(e){return e=R(e,{}),e.method="DELETE",this._makeRequest(e)},N.delete=function(e){const t=new N(e);return t.delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},N.prototype.head=function(e){return e=R(e,{}),e.method="HEAD",this._makeRequest(e)},N.head=function(e){const t=new N(e);return t.head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.options=function(e){return e=R(e,{}),e.method="OPTIONS",this._makeRequest(e)},N.options=function(e){const t=new N(e);return t.options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.post=function(e,t){return a["a"].defined("data",e),t=R(t,{}),t.method="POST",t.data=e,this._makeRequest(t)},N.post=function(e){const t=new N(e);return t.post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.put=function(e,t){return a["a"].defined("data",e),t=R(t,{}),t.method="PUT",t.data=e,this._makeRequest(t)},N.put=function(e){const t=new N(e);return t.put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N.prototype.patch=function(e,t){return a["a"].defined("data",e),t=R(t,{}),t.method="PATCH",t.data=e,this._makeRequest(t)},N.patch=function(e){const t=new N(e);return t.patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},N._Implementations={},N._Implementations.loadImageElement=function(e,t,n){const i=new Image;i.onload=function(){0===i.naturalWidth&&0===i.naturalHeight&&0===i.width&&0===i.height&&(i.width=300,i.height=150),n.resolve(i)},i.onerror=function(e){n.reject(e)},t&&(I["a"].contains(e)?i.crossOrigin="use-credentials":i.crossOrigin=""),i.src=e},N._Implementations.createImage=function(e,t,n,i,o,r){const a=e.url;N.supportsImageBitmapOptions().then((function(s){if(!s||!r)return void N._Implementations.loadImageElement(a,t,n);const c="blob",l="GET",d=Object(u["a"])(),f=N._Implementations.loadWithXhr(a,c,l,void 0,void 0,d,void 0,void 0,void 0);return Object(h["a"])(f)&&Object(h["a"])(f.abort)&&(e.cancelFunction=function(){f.abort()}),d.promise.then((function(e){if(Object(h["a"])(e))return N.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:o});n.reject(new S["a"](`Successfully retrieved ${a} but it contained no content.`))})).then((function(e){n.resolve(e)}))})).catch((function(e){n.reject(e)}))},N.createImageBitmapFromBlob=function(e,t){return a["a"].defined("options",t),a["a"].typeOf.bool("options.flipY",t.flipY),a["a"].typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),a["a"].typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};const q="undefined"===typeof XMLHttpRequest;N._Implementations.loadWithXhr=function(e,t,n,i,o,r,a){const s=k.exec(e);if(null!==s)return void r.resolve(H(s,t));if(q)return void W(e,t,n,i,o,r,a);const c=new XMLHttpRequest;if(I["a"].contains(e)&&(c.withCredentials=!0),c.open(n,e,!0),Object(h["a"])(a)&&Object(h["a"])(c.overrideMimeType)&&c.overrideMimeType(a),Object(h["a"])(o))for(const u in o)o.hasOwnProperty(u)&&c.setRequestHeader(u,o[u]);Object(h["a"])(t)&&(c.responseType=t);let l=!1;return"string"===typeof e&&(l=0===e.indexOf("file://")||"undefined"!==typeof window&&"file://"===window.location.origin),c.onload=function(){if((c.status<200||c.status>=300)&&(!l||0!==c.status))return void r.reject(new C["a"](c.status,c.response,c.getAllResponseHeaders()));const e=c.response,i=c.responseType;if("HEAD"===n||"OPTIONS"===n){const e=c.getAllResponseHeaders(),t=e.trim().split(/[\r\n]+/),n={};return t.forEach((function(e){const t=e.split(": "),i=t.shift();n[i]=t.join(": ")})),void r.resolve(n)}if(204===c.status)r.resolve();else if(!Object(h["a"])(e)||Object(h["a"])(t)&&i!==t)if("json"===t&&"string"===typeof e)try{r.resolve(JSON.parse(e))}catch(o){r.reject(o)}else(""===i||"document"===i)&&Object(h["a"])(c.responseXML)&&c.responseXML.hasChildNodes()?r.resolve(c.responseXML):""!==i&&"text"!==i||!Object(h["a"])(c.responseText)?r.reject(new S["a"]("Invalid XMLHttpRequest response type.")):r.resolve(c.responseText);else r.resolve(e)},c.onerror=function(e){r.reject(new C["a"])},c.send(i),c},N._Implementations.loadAndExecuteScript=function(e,t,n){return Object(v["a"])(e,t).catch((function(e){n.reject(e)}))},N._DefaultImplementations={},N._DefaultImplementations.createImage=N._Implementations.createImage,N._DefaultImplementations.loadWithXhr=N._Implementations.loadWithXhr,N._DefaultImplementations.loadAndExecuteScript=N._Implementations.loadAndExecuteScript,N.DEFAULT=Object.freeze(new N({url:"undefined"===typeof document?"":document.location.href.split("?")[0]})),t["a"]=N}).call(this,n("b639").Buffer)},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n("c8ba"))},dae6:function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * protobuf.js v6.10.2 (c) 2016, daniel wirtz
 * compiled fri, 08 jul 2022 16:17:13 utc
 * licensed under the bsd-3-clause license
 * see: https://github.com/dcodeio/protobuf.js for details
 */(function(undefined){"use strict";(function(e,t,n){function i(n){var o=t[n];return o||e[n][0].call(o=t[n]={exports:{}},i,o,o.exports),o.exports}var o=i(n[0]);o.util.global.protobuf=o,__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("f537")],__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(o.util.Long=e,o.configure()),o}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=o)})({1:[function(e,t,n){function i(e,t){var n=new Array(arguments.length-1),i=0,o=2,r=!0;while(o<arguments.length)n[i++]=arguments[o++];return new Promise((function(o,a){n[i]=function(e){if(r)if(r=!1,e)a(e);else{var t=new Array(arguments.length-1),n=0;while(n<t.length)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(s){r&&(r=!1,a(s))}}))}t.exports=i},{}],2:[function(e,t,n){var i=n;i.length=function(e){var t=e.length;if(!t)return 0;var n=0;while(--t%4>1&&"="===e.charAt(t))++n;return Math.ceil(3*e.length)/4-n};for(var o=new Array(64),r=new Array(123),a=0;a<64;)r[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(e,t,n){var i,r=null,a=[],s=0,c=0;while(t<n){var l=e[t++];switch(c){case 0:a[s++]=o[l>>2],i=(3&l)<<4,c=1;break;case 1:a[s++]=o[i|l>>4],i=(15&l)<<2,c=2;break;case 2:a[s++]=o[i|l>>6],a[s++]=o[63&l],c=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=o[i],a[s++]=61,1===c&&(a[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var s="invalid encoding";i.decode=function(e,t,n){for(var i,o=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if((l=r[l])===undefined)throw Error(s);switch(a){case 0:i=l,a=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,a=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,a=3;break;case 3:t[n++]=(3&i)<<6|l,a=0;break}}if(1===a)throw Error(s);return n-o},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,n){function i(){this._listeners={}}t.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},{}],4:[function(e,t,n){function i(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function o(e,i,o){t[0]=e,i[o]=n[0],i[o+1]=n[1],i[o+2]=n[2],i[o+3]=n[3]}function r(e,i,o){t[0]=e,i[o]=n[3],i[o+1]=n[2],i[o+2]=n[1],i[o+3]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?o:r,e.writeFloatBE=i?r:o,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function t(e,t,n,i){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var r=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-r)*8388608);e((o<<31|r+127<<23|a)>>>0,n,i)}}function n(e,t,n){var i=e(t,n),o=2*(i>>31)+1,r=i>>>23&255,a=8388607&i;return 255===r?a?NaN:o*(1/0):0===r?1401298464324817e-60*o*a:o*Math.pow(2,r-150)*(a+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,r),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function o(e,i,o){t[0]=e,i[o]=n[0],i[o+1]=n[1],i[o+2]=n[2],i[o+3]=n[3],i[o+4]=n[4],i[o+5]=n[5],i[o+6]=n[6],i[o+7]=n[7]}function r(e,i,o){t[0]=e,i[o]=n[7],i[o+1]=n[6],i[o+2]=n[5],i[o+3]=n[4],i[o+4]=n[3],i[o+5]=n[2],i[o+6]=n[1],i[o+7]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?o:r,e.writeDoubleBE=i?r:o,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function t(e,t,n,i,o,r){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,o,r+t),e(1/i>0?0:2147483648,o,r+n);else if(isNaN(i))e(0,o,r+t),e(2146959360,o,r+n);else if(i>17976931348623157e292)e(0,o,r+t),e((a<<31|2146435072)>>>0,o,r+n);else{var s;if(i<22250738585072014e-324)s=i/5e-324,e(s>>>0,o,r+t),e((a<<31|s/4294967296)>>>0,o,r+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),s=i*Math.pow(2,-c),e(4503599627370496*s>>>0,o,r+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,r+n)}}}function n(e,t,n,i,o){var r=e(i,o+t),a=e(i,o+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+r;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=i(i)},{}],5:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],6:[function(e,t,n){function i(e,t,n){var i=n||8192,o=i>>>1,r=null,a=i;return function(n){if(n<1||n>o)return e(n);a+n>i&&(r=e(i),a=0);var s=t.call(r,a,a+=n);return 7&a&&(a=1+(7|a)),s}}t.exports=i},{}],7:[function(e,t,n){var i=n;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){var i=n-t;if(i<1)return"";var o,r=null,a=[],s=0;while(t<n)o=e[t++],o<128?a[s++]=o:o>191&&o<224?a[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[s++]=55296+(o>>10),a[s++]=56320+(1023&o)):a[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))},i.write=function(e,t,n){for(var i,o,r=n,a=0;a<e.length;++a)i=e.charCodeAt(a),i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&56320===(64512&(o=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&o),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-r}},{}],8:[function(e,t,n){var i=n;function o(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=e(16),i.BufferWriter=e(17),i.Reader=e(9),i.BufferReader=e(10),i.util=e(15),i.rpc=e(12),i.roots=e(11),i.configure=o,o()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(e,t,n){t.exports=c;var i,o=e(15),r=o.LongBits,a=o.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new i(e):l(e)})(e)}:l};function h(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){i=e,c.create=u(),i._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{15:15}],10:[function(e,t,n){t.exports=r;var i=e(9);(r.prototype=Object.create(i.prototype)).constructor=r;var o=e(15);function r(e){i.call(this,e)}r._configure=function(){o.Buffer&&(r.prototype._slice=o.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure()},{15:15,9:9}],11:[function(e,t,n){t.exports={}},{}],12:[function(e,t,n){var i=n;i.Service=e(13)},{13:13}],13:[function(e,t,n){t.exports=o;var i=e(15);function o(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(i.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,r,a){if(!r)throw TypeError("request must be specified");var s=this;if(!a)return i.asPromise(e,s,t,n,o,r);if(!s.rpcImpl)return setTimeout((function(){a(Error("already ended"))}),0),undefined;try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null===n)return s.end(!0),undefined;if(!(n instanceof o))try{n=o[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}))}catch(c){return s.emit("error",c,t),setTimeout((function(){a(c)}),0),undefined}},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{15:15}],14:[function(e,t,n){t.exports=o;var i=e(15);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=o.zero=new o(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var a=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new o(n,i)},o.from=function(e){if("number"===typeof e)return o.fromNumber(e);if(i.isString(e)){if(!i.Long)return o.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):r},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;o.fromHash=function(e){return e===a?r:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{15:15}],15:[function(e,t,n){var i=n;function o(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;++o)e[i[o]]!==undefined&&n||(e[i[o]]=t[i[o]]);return e}function r(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:undefined,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}i.asPromise=e(1),i.base64=e(2),i.EventEmitter=e(3),i.float=e(4),i.inquire=e(5),i.utf8=e(7),i.pool=e(6),i.LongBits=e(14),i.isNode=Boolean("undefined"!==typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),i.global=i.isNode&&global||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"===typeof e||e instanceof String},i.isObject=function(e){return e&&"object"===typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"===typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=o,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=r,i.ProtocolError=r("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&this[e[n]]!==undefined&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(e,t,n){t.exports=h;var i,o=e(15),r=o.LongBits,a=o.base64,s=o.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=undefined,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return o.Buffer?function(){return(h.create=function(){return new i})()}:function(){return new h}};function f(e,t,n){t[n]=255&e}function p(e,t,n){while(e>127)t[n++]=127&e|128,e>>>=7;t[n]=e}function m(e,t){this.len=e,this.next=undefined,this.val=t}function _(e,t,n){while(e.hi)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}h.create=d(),h.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(h.alloc=o.pool(h.alloc,o.Array.prototype.subarray)),h.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},m.prototype=Object.create(c.prototype),m.prototype.fn=p,h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(_,10,r.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=r.from(e);return this._push(_,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(_,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=r.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var b=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(o.isString(e)){var n=h.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(b,t,e)},h.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},h.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),n=0;while(e)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},h._configure=function(e){i=e,h.create=d(),i._configure()}},{15:15}],17:[function(e,t,n){t.exports=r;var i=e(16);(r.prototype=Object.create(i.prototype)).constructor=r;var o=e(15);function r(){i.call(this)}function a(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}r._configure=function(){r.alloc=o._Buffer_allocUnsafe,r.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},r.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},r._configure()},{15:15,16:16}]},{},[8])})()}).call(this,__webpack_require__("c8ba"),__webpack_require__("62e4")(module))},dbb4:function(e,t,n){var i=n("23e7"),o=n("83ab"),r=n("56ef"),a=n("fc6a"),s=n("06cf"),c=n("8418");i({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,n,i=a(e),o=s.f,l=r(i),u={},h=0;while(l.length>h)n=o(i,t=l[h++]),void 0!==n&&c(u,t,n);return u}})},dc1c:function(e,t,n){"use strict";var i=n("535a");function o(e,t){if(null===e||"object"!==typeof e)return e;t=Object(i["a"])(t,!1);const n=new e.constructor;for(const i in e)if(e.hasOwnProperty(i)){let r=e[i];t&&(r=o(r,t)),n[i]=r}return n}t["a"]=o},dda6:function(e,t,n){"use strict";e.exports=o;var i=1e20;function o(e,t){t||(t={});var n,o,a,s,c,l,u,h,d,f,p,m=null==t.cutoff?.25:t.cutoff,_=null==t.radius?8:t.radius,g=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");n=t.width,o=t.height,s=e,l=t.stride?t.stride:Math.floor(e.length/n/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=e,u=h.getContext("2d"),n=h.width,o=h.height,d=u.getImageData(0,0,n,o),s=d.data,l=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(h=e.canvas,u=e,n=h.width,o=h.height,d=u.getImageData(0,0,n,o),s=d.data,l=4):window.ImageData&&e instanceof window.ImageData&&(d=e,n=e.width,o=e.height,s=d.data,l=4);if(a=Math.max(n,o),window.Uint8ClampedArray&&s instanceof window.Uint8ClampedArray||window.Uint8Array&&s instanceof window.Uint8Array)for(c=s,s=Array(n*o),f=0,p=Math.floor(c.length/l);f<p;f++)s[f]=c[f*l+g]/255;else if(1!==l)throw Error("Raw data can have only 1 value per pixel");var b=Array(n*o),y=Array(n*o),v=Array(a),O=Array(a),A=Array(a+1),w=Array(a);for(f=0,p=n*o;f<p;f++){var T=s[f];b[f]=1===T?0:0===T?i:Math.pow(Math.max(0,.5-T),2),y[f]=1===T?i:0===T?0:Math.pow(Math.max(0,T-.5),2)}r(b,n,o,v,O,w,A),r(y,n,o,v,O,w,A);var C=window.Float32Array?new Float32Array(n*o):new Array(n*o);for(f=0,p=n*o;f<p;f++)C[f]=Math.min(Math.max(1-((b[f]-y[f])/_+m),0),1);return C}function r(e,t,n,i,o,r,s){for(var c=0;c<t;c++){for(var l=0;l<n;l++)i[l]=e[l*t+c];for(a(i,o,r,s,n),l=0;l<n;l++)e[l*t+c]=o[l]}for(l=0;l<n;l++){for(c=0;c<t;c++)i[c]=e[l*t+c];for(a(i,o,r,s,t),c=0;c<t;c++)e[l*t+c]=Math.sqrt(o[c])}}function a(e,t,n,o,r){n[0]=0,o[0]=-i,o[1]=+i;for(var a=1,s=0;a<r;a++){var c=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);while(c<=o[s])s--,c=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);s++,n[s]=a,o[s]=c,o[s+1]=+i}for(a=0,s=0;a<r;a++){while(o[s+1]<a)s++;t[a]=(a-n[s])*(a-n[s])+e[n[s]]}}},ddb0:function(e,t,n){var i=n("da84"),o=n("fdbc"),r=n("e260"),a=n("9112"),s=n("b622"),c=s("iterator"),l=s("toStringTag"),u=r.values;for(var h in o){var d=i[h],f=d&&d.prototype;if(f){if(f[c]!==u)try{a(f,c,u)}catch(m){f[c]=u}if(f[l]||a(f,l,h),o[h])for(var p in r)if(f[p]!==r[p])try{a(f,p,r[p])}catch(m){f[p]=r[p]}}}},de5b:function(e,t,n){"use strict";function i(e){return 0!==e.length&&"/"===e[e.length-1]||(e=`${e}/`),e}t["a"]=i},de66:function(e,t,n){"use strict";var i=n("535a"),o=n("2f63"),r=n("8a39"),a=n("b82e");function s(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=Object(i["a"])(e.throttleByServer,!1),n=Object(i["a"])(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=Object(i["a"])(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=Object(i["a"])(e.type,a["a"].OTHER),this.serverKey=void 0,this.state=r["a"].UNISSUED,this.deferred=void 0,this.cancelled=!1}s.prototype.cancel=function(){this.cancelled=!0},s.prototype.clone=function(e){return Object(o["a"])(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new s(this)},t["a"]=s},df75:function(e,t,n){var i=n("ca84"),o=n("7839");e.exports=Object.keys||function(e){return i(e,o)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,i=e.length-1;i>=0;i--){var o=e[i];"."===o?e.splice(i,1):".."===o?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e){"string"!==typeof e&&(e+="");var t,n=0,i=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===i&&(o=!1,i=t+1);return-1===i?"":e.slice(n,i)}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}t.resolve=function(){for(var t="",i=!1,r=arguments.length-1;r>=-1&&!i;r--){var a=r>=0?arguments[r]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(o(t.split("/"),(function(e){return!!e})),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===r(e,-1);return e=n(o(e.split("/"),(function(e){return!!e})),!i).join("/"),e||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=i(e.split("/")),r=i(n.split("/")),a=Math.min(o.length,r.length),s=a,c=0;c<a;c++)if(o[c]!==r[c]){s=c;break}var l=[];for(c=s;c<o.length;c++)l.push("..");return l=l.concat(r.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,o=!0,r=e.length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!o){i=r;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var n=i(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,i=-1,o=!0,r=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===i&&(o=!1,i=a+1),46===s?-1===t?t=a:1!==r&&(r=1):-1!==t&&(r=-1);else if(!o){n=a+1;break}}return-1===t||-1===i||0===r||1===r&&t===i-1&&t===n+1?"":e.slice(t,i)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e01a:function(e,t,n){"use strict";var i=n("23e7"),o=n("83ab"),r=n("da84"),a=n("5135"),s=n("861d"),c=n("9bf2").f,l=n("e893"),u=r.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(h[t]=!0),t};l(d,u);var f=d.prototype=u.prototype;f.constructor=d;var p=f.toString,m="Symbol(test)"==String(u("test")),_=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var n=m?t.slice(7,-1):t.replace(_,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:d})}},e163:function(e,t,n){var i=n("5135"),o=n("7b0b"),r=n("f772"),a=n("e177"),s=r("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},e177:function(e,t,n){var i=n("d039");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,n){"use strict";var i=n("fc6a"),o=n("44d2"),r=n("3f8c"),a=n("69f3"),s=n("7dd0"),c="Array Iterator",l=a.set,u=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},e2cc:function(e,t,n){var i=n("6eeb");e.exports=function(e,t,n){for(var o in t)i(e,o,t[o],n);return e}},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e439:function(e,t,n){var i=n("23e7"),o=n("d039"),r=n("fc6a"),a=n("06cf").f,s=n("83ab"),c=o((function(){a(1)})),l=!s||c;i({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(r(e),t)}})},e538:function(e,t,n){var i=n("b622");t.f=i},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,n){"use strict";var i,o,r,a,s=n("23e7"),c=n("c430"),l=n("da84"),u=n("d066"),h=n("fea9"),d=n("6eeb"),f=n("e2cc"),p=n("d44e"),m=n("2626"),_=n("861d"),g=n("1c0b"),b=n("19aa"),y=n("c6b6"),v=n("8925"),O=n("2266"),A=n("1c7e"),w=n("4840"),T=n("2cf4").set,C=n("b575"),E=n("cdf9"),x=n("44de"),S=n("f069"),I=n("e667"),D=n("69f3"),P=n("94ca"),j=n("b622"),R=n("2d00"),L=j("species"),M="Promise",N=D.get,B=D.set,F=D.getterFor(M),z=h,k=l.TypeError,U=l.document,V=l.process,H=u("fetch"),G=S.f,W=G,q="process"==y(V),Y=!!(U&&U.createEvent&&l.dispatchEvent),X="unhandledrejection",K="rejectionhandled",$=0,J=1,Q=2,Z=1,ee=2,te=P(M,(function(){var e=v(z)!==String(z);if(!e){if(66===R)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!z.prototype["finally"])return!0;if(R>=51&&/native code/.test(z))return!1;var t=z.resolve(1),n=function(e){e((function(){}),(function(){}))},i=t.constructor={};return i[L]=n,!(t.then((function(){}))instanceof n)})),ne=te||!A((function(e){z.all(e)["catch"]((function(){}))})),ie=function(e){var t;return!(!_(e)||"function"!=typeof(t=e.then))&&t},oe=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;C((function(){var o=t.value,r=t.state==J,a=0;while(i.length>a){var s,c,l,u=i[a++],h=r?u.ok:u.fail,d=u.resolve,f=u.reject,p=u.domain;try{h?(r||(t.rejection===ee&&ce(e,t),t.rejection=Z),!0===h?s=o:(p&&p.enter(),s=h(o),p&&(p.exit(),l=!0)),s===u.promise?f(k("Promise-chain cycle")):(c=ie(s))?c.call(s,d,f):d(s)):f(o)}catch(m){p&&!l&&p.exit(),f(m)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&ae(e,t)}))}},re=function(e,t,n){var i,o;Y?(i=U.createEvent("Event"),i.promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},(o=l["on"+e])?o(i):e===X&&x("Unhandled promise rejection",n)},ae=function(e,t){T.call(l,(function(){var n,i=t.value,o=se(t);if(o&&(n=I((function(){q?V.emit("unhandledRejection",i,e):re(X,e,i)})),t.rejection=q||se(t)?ee:Z,n.error))throw n.value}))},se=function(e){return e.rejection!==Z&&!e.parent},ce=function(e,t){T.call(l,(function(){q?V.emit("rejectionHandled",e):re(K,e,t.value)}))},le=function(e,t,n,i){return function(o){e(t,n,o,i)}},ue=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=Q,oe(e,t,!0))},he=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw k("Promise can't be resolved itself");var o=ie(n);o?C((function(){var i={done:!1};try{o.call(n,le(he,e,i,t),le(ue,e,i,t))}catch(r){ue(e,i,r,t)}})):(t.value=n,t.state=J,oe(e,t,!1))}catch(r){ue(e,{done:!1},r,t)}}};te&&(z=function(e){b(this,z,M),g(e),i.call(this);var t=N(this);try{e(le(he,this,t),le(ue,this,t))}catch(n){ue(this,t,n)}},i=function(e){B(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:$,value:void 0})},i.prototype=f(z.prototype,{then:function(e,t){var n=F(this),i=G(w(this,z));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=q?V.domain:void 0,n.parent=!0,n.reactions.push(i),n.state!=$&&oe(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i,t=N(e);this.promise=e,this.resolve=le(he,e,t),this.reject=le(ue,e,t)},S.f=G=function(e){return e===z||e===r?new o(e):W(e)},c||"function"!=typeof h||(a=h.prototype.then,d(h.prototype,"then",(function(e,t){var n=this;return new z((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof H&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(z,H.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:te},{Promise:z}),p(z,M,!1,!0),m(M),r=u(M),s({target:M,stat:!0,forced:te},{reject:function(e){var t=G(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:c||te},{resolve:function(e){return E(c&&this===r?z:this,e)}}),s({target:M,stat:!0,forced:ne},{all:function(e){var t=this,n=G(t),i=n.resolve,o=n.reject,r=I((function(){var n=g(t.resolve),r=[],a=0,s=1;O(e,(function(e){var c=a++,l=!1;r.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,r[c]=e,--s||i(r))}),o)})),--s||i(r)}));return r.error&&o(r.value),n.promise},race:function(e){var t=this,n=G(t),i=n.reject,o=I((function(){var o=g(t.resolve);O(e,(function(e){o.call(t,e).then(n.resolve,i)}))}));return o.error&&i(o.value),n.promise}})},e877:function(e,t,n){},e893:function(e,t,n){var i=n("5135"),o=n("56ef"),r=n("06cf"),a=n("9bf2");e.exports=function(e,t){for(var n=o(t),s=a.f,c=r.f,l=0;l<n.length;l++){var u=n[l];i(e,u)||s(e,u,c(t,u))}}},e8b5:function(e,t,n){var i=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},e95a:function(e,t,n){var i=n("b622"),o=n("3f8c"),r=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[r]===e)}},ec35:function(e,t,n){"use strict";n.r(t),n.d(t,"VERSION",(function(){return sct})),n.d(t,"ApproximateTerrainHeights",(function(){return rn})),n.d(t,"ArcGISTiledElevationTerrainProvider",(function(){return cu})),n.d(t,"ArcType",(function(){return uu})),n.d(t,"ArticulationStageType",(function(){return du})),n.d(t,"AssociativeArray",(function(){return pu})),n.d(t,"AttributeCompression",(function(){return pc})),n.d(t,"AxisAlignedBoundingBox",(function(){return gn})),n.d(t,"BingMapsGeocoderService",(function(){return gu})),n.d(t,"BoundingRectangle",(function(){return Au})),n.d(t,"BoundingSphere",(function(){return Tt})),n.d(t,"BoxGeometry",(function(){return eh})),n.d(t,"BoxOutlineGeometry",(function(){return ah})),n.d(t,"Cartesian2",(function(){return Gt})),n.d(t,"Cartesian3",(function(){return g})),n.d(t,"Cartesian4",(function(){return be})),n.d(t,"Cartographic",(function(){return I})),n.d(t,"CartographicGeocoderService",(function(){return ch})),n.d(t,"CatmullRomSpline",(function(){return jh})),n.d(t,"CesiumTerrainProvider",(function(){return dd})),n.d(t,"Check",(function(){return i["a"]})),n.d(t,"CircleGeometry",(function(){return Jp})),n.d(t,"CircleOutlineGeometry",(function(){return dm})),n.d(t,"Clock",(function(){return vm})),n.d(t,"ClockRange",(function(){return pm})),n.d(t,"ClockStep",(function(){return _m})),n.d(t,"Color",(function(){return Dm})),n.d(t,"ColorGeometryInstanceAttribute",(function(){return jm})),n.d(t,"ComponentDatatype",(function(){return Ks})),n.d(t,"CompressedTextureBuffer",(function(){return Lm})),n.d(t,"ConstantSpline",(function(){return Nm})),n.d(t,"CoplanarPolygonGeometry",(function(){return bg})),n.d(t,"CoplanarPolygonGeometryLibrary",(function(){return Ym})),n.d(t,"CoplanarPolygonOutlineGeometry",(function(){return Ag})),n.d(t,"CornerType",(function(){return Tg})),n.d(t,"CorridorGeometry",(function(){return Gy})),n.d(t,"CorridorGeometryLibrary",(function(){return _y})),n.d(t,"CorridorOutlineGeometry",(function(){return ev})),n.d(t,"Credit",(function(){return hn})),n.d(t,"CubicRealPolynomial",(function(){return Un})),n.d(t,"CullingVolume",(function(){return av})),n.d(t,"CustomHeightmapTerrainProvider",(function(){return cv})),n.d(t,"CylinderGeometry",(function(){return vv})),n.d(t,"CylinderGeometryLibrary",(function(){return uv})),n.d(t,"CylinderOutlineGeometry",(function(){return Tv})),n.d(t,"DefaultProxy",(function(){return Ev})),n.d(t,"DeveloperError",(function(){return a["a"]})),n.d(t,"DistanceDisplayCondition",(function(){return Sv})),n.d(t,"DistanceDisplayConditionGeometryInstanceAttribute",(function(){return Dv})),n.d(t,"DoubleEndedPriorityQueue",(function(){return Bv})),n.d(t,"DoublyLinkedList",(function(){return Uv})),n.d(t,"EarthOrientationParameters",(function(){return Ao})),n.d(t,"EarthOrientationParametersSample",(function(){return Ni})),n.d(t,"EasingFunction",(function(){return Gv})),n.d(t,"EllipseGeometry",(function(){return Yp})),n.d(t,"EllipseGeometryLibrary",(function(){return Ed})),n.d(t,"EllipseOutlineGeometry",(function(){return cm})),n.d(t,"Ellipsoid",(function(){return k})),n.d(t,"EllipsoidGeodesic",(function(){return Rg})),n.d(t,"EllipsoidGeometry",(function(){return rO})),n.d(t,"EllipsoidOutlineGeometry",(function(){return fO})),n.d(t,"EllipsoidRhumbLine",(function(){return o_})),n.d(t,"EllipsoidTangentPlane",(function(){return Ya})),n.d(t,"EllipsoidTerrainProvider",(function(){return mO})),n.d(t,"EllipsoidalOccluder",(function(){return Mn})),n.d(t,"EncodedCartesian3",(function(){return Bd})),n.d(t,"Event",(function(){return dn["a"]})),n.d(t,"EventHelper",(function(){return gO})),n.d(t,"ExtrapolationType",(function(){return yO})),n.d(t,"FeatureDetection",(function(){return Or})),n.d(t,"FrustumGeometry",(function(){return sA})),n.d(t,"FrustumOutlineGeometry",(function(){return mA})),n.d(t,"Fullscreen",(function(){return Mo})),n.d(t,"GeocodeType",(function(){return gA})),n.d(t,"GeocoderService",(function(){return yA})),n.d(t,"GeographicProjection",(function(){return V})),n.d(t,"GeographicTilingScheme",(function(){return qt})),n.d(t,"Geometry",(function(){return Fu})),n.d(t,"GeometryAttribute",(function(){return ku})),n.d(t,"GeometryAttributes",(function(){return Vu})),n.d(t,"GeometryFactory",(function(){return OA})),n.d(t,"GeometryInstance",(function(){return Sd})),n.d(t,"GeometryInstanceAttribute",(function(){return wA})),n.d(t,"GeometryOffsetAttribute",(function(){return Gu})),n.d(t,"GeometryPipeline",(function(){return mp})),n.d(t,"GeometryType",(function(){return Tu})),n.d(t,"GoogleEarthEnterpriseMetadata",(function(){return GA})),n.d(t,"GoogleEarthEnterpriseTerrainData",(function(){return lw})),n.d(t,"GoogleEarthEnterpriseTerrainProvider",(function(){return gw})),n.d(t,"GoogleEarthEnterpriseTileInformation",(function(){return RA})),n.d(t,"GregorianDate",(function(){return Fi})),n.d(t,"GroundPolylineGeometry",(function(){return KT})),n.d(t,"HeadingPitchRange",(function(){return JT})),n.d(t,"HeadingPitchRoll",(function(){return To})),n.d(t,"Heap",(function(){return QT["a"]})),n.d(t,"HeightmapEncoding",(function(){return pn})),n.d(t,"HeightmapTerrainData",(function(){return xl})),n.d(t,"HeightmapTessellator",(function(){return zc})),n.d(t,"HermitePolynomialApproximation",(function(){return oC})),n.d(t,"HermiteSpline",(function(){return Th})),n.d(t,"HilbertOrder",(function(){return sC})),n.d(t,"Iau2000Orientation",(function(){return xC})),n.d(t,"Iau2006XysData",(function(){return Po})),n.d(t,"Iau2006XysSample",(function(){return Eo})),n.d(t,"IauOrientationAxes",(function(){return MC})),n.d(t,"IauOrientationParameters",(function(){return lC})),n.d(t,"IndexDatatype",(function(){return ll})),n.d(t,"InterpolationAlgorithm",(function(){return BC})),n.d(t,"InterpolationType",(function(){return zC})),n.d(t,"Intersect",(function(){return G})),n.d(t,"IntersectionTests",(function(){return Ci})),n.d(t,"Intersections2D",(function(){return kh})),n.d(t,"Interval",(function(){return q})),n.d(t,"Ion",(function(){return HC})),n.d(t,"IonGeocoderService",(function(){return YC})),n.d(t,"IonResource",(function(){return $C})),n.d(t,"Iso8601",(function(){return oE})),n.d(t,"JulianDate",(function(){return mo})),n.d(t,"KTX2Transcoder",(function(){return sE})),n.d(t,"KeyboardEventModifier",(function(){return lE})),n.d(t,"LagrangePolynomialApproximation",(function(){return hE})),n.d(t,"LeapSecond",(function(){return Vi})),n.d(t,"LinearApproximation",(function(){return fE})),n.d(t,"LinearSpline",(function(){return dh})),n.d(t,"ManagedArray",(function(){return mE})),n.d(t,"MapProjection",(function(){return gE})),n.d(t,"Math",(function(){return s["a"]})),n.d(t,"Matrix2",(function(){return ic})),n.d(t,"Matrix3",(function(){return ce})),n.d(t,"Matrix4",(function(){return Me})),n.d(t,"MorphWeightSpline",(function(){return yE})),n.d(t,"MortonOrder",(function(){return CE})),n.d(t,"NearFarScalar",(function(){return xE})),n.d(t,"Occluder",(function(){return HE})),n.d(t,"OffsetGeometryInstanceAttribute",(function(){return WE})),n.d(t,"OpenCageGeocoderService",(function(){return XE})),n.d(t,"OrientedBoundingBox",(function(){return Ws})),n.d(t,"OrthographicFrustum",(function(){return IO})),n.d(t,"OrthographicOffCenterFrustum",(function(){return EO})),n.d(t,"Packable",(function(){return $E})),n.d(t,"PackableForInterpolation",(function(){return QE})),n.d(t,"PeliasGeocoderService",(function(){return WC})),n.d(t,"PerspectiveFrustum",(function(){return zO})),n.d(t,"PerspectiveOffCenterFrustum",(function(){return NO})),n.d(t,"PinBuilder",(function(){return lx})),n.d(t,"PixelFormat",(function(){return fx})),n.d(t,"Plane",(function(){return ji})),n.d(t,"PlaneGeometry",(function(){return yx})),n.d(t,"PlaneOutlineGeometry",(function(){return wx})),n.d(t,"PolygonGeometry",(function(){return oS})),n.d(t,"PolygonGeometryLibrary",(function(){return Q_})),n.d(t,"PolygonHierarchy",(function(){return aS})),n.d(t,"PolygonOutlineGeometry",(function(){return pS})),n.d(t,"PolygonPipeline",(function(){return x_})),n.d(t,"PolylineGeometry",(function(){return CS})),n.d(t,"PolylinePipeline",(function(){return ib})),n.d(t,"PolylineVolumeGeometry",(function(){return jS})),n.d(t,"PolylineVolumeGeometryLibrary",(function(){return Wb})),n.d(t,"PolylineVolumeOutlineGeometry",(function(){return FS})),n.d(t,"PrimitiveType",(function(){return Eu})),n.d(t,"Proxy",(function(){return kS})),n.d(t,"QuadraticRealPolynomial",(function(){return Fn})),n.d(t,"QuantizedMeshTerrainData",(function(){return nd})),n.d(t,"QuarticRealPolynomial",(function(){return Wn})),n.d(t,"Quaternion",(function(){return Kr})),n.d(t,"QuaternionSpline",(function(){return HS})),n.d(t,"Queue",(function(){return I_})),n.d(t,"Ray",(function(){return Yn})),n.d(t,"Rectangle",(function(){return Fe})),n.d(t,"RectangleCollisionChecker",(function(){return JS})),n.d(t,"RectangleGeometry",(function(){return HI})),n.d(t,"RectangleGeometryLibrary",(function(){return cI})),n.d(t,"RectangleOutlineGeometry",(function(){return tD})),n.d(t,"ReferenceFrame",(function(){return iD})),n.d(t,"Request",(function(){return Sl["a"]})),n.d(t,"RequestErrorEvent",(function(){return oD["a"]})),n.d(t,"RequestScheduler",(function(){return rD["a"]})),n.d(t,"RequestState",(function(){return Il["a"]})),n.d(t,"RequestType",(function(){return Dl["a"]})),n.d(t,"Resource",(function(){return Et["a"]})),n.d(t,"RuntimeError",(function(){return ye["a"]})),n.d(t,"S2Cell",(function(){return MD})),n.d(t,"ScreenSpaceEventHandler",(function(){return OP})),n.d(t,"ScreenSpaceEventType",(function(){return BD})),n.d(t,"ShowGeometryInstanceAttribute",(function(){return wP})),n.d(t,"Simon1994PlanetaryPositions",(function(){return Xj})),n.d(t,"SimplePolylineGeometry",(function(){return eR})),n.d(t,"SphereGeometry",(function(){return oR})),n.d(t,"SphereOutlineGeometry",(function(){return cR})),n.d(t,"Spherical",(function(){return uR})),n.d(t,"Spline",(function(){return uh})),n.d(t,"SteppedSpline",(function(){return dR})),n.d(t,"TaskProcessor",(function(){return il})),n.d(t,"TerrainData",(function(){return rl})),n.d(t,"TerrainEncoding",(function(){return Pc})),n.d(t,"TerrainExaggeration",(function(){return gc})),n.d(t,"TerrainMesh",(function(){return sl})),n.d(t,"TerrainProvider",(function(){return gl})),n.d(t,"TerrainQuantization",(function(){return yc})),n.d(t,"TileAvailability",(function(){return Kl})),n.d(t,"TileEdge",(function(){return pR})),n.d(t,"TileProviderError",(function(){return Zl})),n.d(t,"TilingScheme",(function(){return _R})),n.d(t,"TimeConstants",(function(){return Gi})),n.d(t,"TimeInterval",(function(){return ZC})),n.d(t,"TimeIntervalCollection",(function(){return xR})),n.d(t,"TimeStandard",(function(){return qi})),n.d(t,"Tipsify",(function(){return zd})),n.d(t,"Transforms",(function(){return ka})),n.d(t,"TranslationRotationScale",(function(){return jR})),n.d(t,"TridiagonalSystemSolver",(function(){return ph})),n.d(t,"TrustedServers",(function(){return RR["a"]})),n.d(t,"VRTheWorldTerrainProvider",(function(){return kR})),n.d(t,"VertexFormat",(function(){return qu})),n.d(t,"VideoSynchronizer",(function(){return HR})),n.d(t,"Visibility",(function(){return IE})),n.d(t,"VulkanConstants",(function(){return WR})),n.d(t,"WallGeometry",(function(){return dL})),n.d(t,"WallGeometryLibrary",(function(){return eL})),n.d(t,"WallOutlineGeometry",(function(){return bL})),n.d(t,"WebGLConstants",(function(){return Ys})),n.d(t,"WebMercatorProjection",(function(){return Rc})),n.d(t,"WebMercatorTilingScheme",(function(){return tu})),n.d(t,"WindingOrder",(function(){return c_})),n.d(t,"WireframeIndexGenerator",(function(){return EL})),n.d(t,"appendForwardSlash",(function(){return xL["a"]})),n.d(t,"arrayRemoveDuplicates",(function(){return zm})),n.d(t,"barycentricCoordinates",(function(){return Rd})),n.d(t,"binarySearch",(function(){return Li})),n.d(t,"buildModuleUrl",(function(){return Bt})),n.d(t,"cancelAnimationFrame",(function(){return jL})),n.d(t,"clone",(function(){return RL["a"]})),n.d(t,"combine",(function(){return qE["a"]})),n.d(t,"createGuid",(function(){return ML})),n.d(t,"createWorldTerrain",(function(){return BL})),n.d(t,"decodeGoogleEarthEnterpriseData",(function(){return UL})),n.d(t,"decodeVectorPolylinePositions",(function(){return qL})),n.d(t,"defaultValue",(function(){return o["a"]})),n.d(t,"defer",(function(){return Vc["a"]})),n.d(t,"defined",(function(){return r["a"]})),n.d(t,"deprecationWarning",(function(){return IL})),n.d(t,"destroyObject",(function(){return Wc})),n.d(t,"formatError",(function(){return Jl})),n.d(t,"getAbsoluteUri",(function(){return Ct["a"]})),n.d(t,"getBaseUri",(function(){return YL["a"]})),n.d(t,"getExtensionFromUri",(function(){return XL["a"]})),n.d(t,"getFilenameFromUri",(function(){return $L})),n.d(t,"getImageFromTypedArray",(function(){return QL})),n.d(t,"getImagePixels",(function(){return LR["a"]})),n.d(t,"getJsonFromTypedArray",(function(){return Fh})),n.d(t,"getMagic",(function(){return eM})),n.d(t,"getStringFromTypedArray",(function(){return Nh})),n.d(t,"getTimestamp",(function(){return bm})),n.d(t,"isBitSet",(function(){return EA})),n.d(t,"isBlobUri",(function(){return tM["a"]})),n.d(t,"isCrossOriginUrl",(function(){return qc["a"]})),n.d(t,"isDataUri",(function(){return nM["a"]})),n.d(t,"isLeapYear",(function(){return ki})),n.d(t,"loadAndExecuteScript",(function(){return LA["a"]})),n.d(t,"loadImageFromTypedArray",(function(){return oM})),n.d(t,"loadKTX2",(function(){return sM})),n.d(t,"mergeSort",(function(){return fM})),n.d(t,"objectToQuery",(function(){return pM["a"]})),n.d(t,"oneTimeWarning",(function(){return ab})),n.d(t,"parseResponseHeaders",(function(){return mM["a"]})),n.d(t,"pointInsideTriangle",(function(){return bM})),n.d(t,"queryToObject",(function(){return yM["a"]})),n.d(t,"requestAnimationFrame",(function(){return AM})),n.d(t,"resizeImageToNextPowerOfTwo",(function(){return TM})),n.d(t,"sampleTerrain",(function(){return RM})),n.d(t,"sampleTerrainMostDetailed",(function(){return NM})),n.d(t,"scaleToGeodeticSurface",(function(){return O})),n.d(t,"subdivideArray",(function(){return FM})),n.d(t,"webGLConstantToGlslType",(function(){return kM})),n.d(t,"wrapFunction",(function(){return VM})),n.d(t,"writeTextToCanvas",(function(){return nx})),n.d(t,"BillboardGraphics",(function(){return $M})),n.d(t,"BillboardVisualizer",(function(){return IN})),n.d(t,"BoundingSphereState",(function(){return oN})),n.d(t,"BoxGeometryUpdater",(function(){return eX})),n.d(t,"BoxGraphics",(function(){return wq})),n.d(t,"CallbackProperty",(function(){return kY})),n.d(t,"Cesium3DTilesetGraphics",(function(){return tY})),n.d(t,"Cesium3DTilesetVisualizer",(function(){return tbe})),n.d(t,"CheckerboardMaterialProperty",(function(){return abe})),n.d(t,"ColorMaterialProperty",(function(){return oF})),n.d(t,"CompositeEntityCollection",(function(){return vbe})),n.d(t,"CompositeMaterialProperty",(function(){return Cbe})),n.d(t,"CompositePositionProperty",(function(){return xbe})),n.d(t,"CompositeProperty",(function(){return wbe})),n.d(t,"ConstantPositionProperty",(function(){return Sq})),n.d(t,"ConstantProperty",(function(){return GM})),n.d(t,"CorridorGeometryUpdater",(function(){return Fbe})),n.d(t,"CorridorGraphics",(function(){return Dq})),n.d(t,"CustomDataSource",(function(){return uve})),n.d(t,"CylinderGeometryUpdater",(function(){return bve})),n.d(t,"CylinderGraphics",(function(){return Mq})),n.d(t,"CzmlDataSource",(function(){return pwe})),n.d(t,"DataSource",(function(){return kbe})),n.d(t,"DataSourceClock",(function(){return vve})),n.d(t,"DataSourceCollection",(function(){return bwe})),n.d(t,"DataSourceDisplay",(function(){return Fxe})),n.d(t,"DynamicGeometryBatch",(function(){return Cwe})),n.d(t,"DynamicGeometryUpdater",(function(){return GW})),n.d(t,"EllipseGeometryUpdater",(function(){return Rwe})),n.d(t,"EllipseGraphics",(function(){return Bq})),n.d(t,"EllipsoidGeometryUpdater",(function(){return Gwe})),n.d(t,"EllipsoidGraphics",(function(){return zq})),n.d(t,"Entity",(function(){return SY})),n.d(t,"EntityCluster",(function(){return cve})),n.d(t,"EntityCollection",(function(){return ube})),n.d(t,"EntityView",(function(){return tSe})),n.d(t,"GeoJsonDataSource",(function(){return GSe})),n.d(t,"GeometryUpdater",(function(){return FY})),n.d(t,"GeometryVisualizer",(function(){return ICe})),n.d(t,"GpxDataSource",(function(){return GDe})),n.d(t,"GridMaterialProperty",(function(){return xve})),n.d(t,"GroundGeometryUpdater",(function(){return Dbe})),n.d(t,"ImageMaterialProperty",(function(){return bq})),n.d(t,"KmlCamera",(function(){return qDe})),n.d(t,"KmlDataSource",(function(){return WFe})),n.d(t,"KmlLookAt",(function(){return WNe})),n.d(t,"KmlTour",(function(){return $Ne})),n.d(t,"KmlTourFlyTo",(function(){return QNe})),n.d(t,"KmlTourWait",(function(){return eBe})),n.d(t,"LabelGraphics",(function(){return Uq})),n.d(t,"LabelVisualizer",(function(){return oEe})),n.d(t,"MaterialProperty",(function(){return VW})),n.d(t,"ModelGraphics",(function(){return Zq})),n.d(t,"ModelVisualizer",(function(){return EEe})),n.d(t,"NodeTransformationProperty",(function(){return Gq})),n.d(t,"PathGraphics",(function(){return iY})),n.d(t,"PathVisualizer",(function(){return WEe})),n.d(t,"PlaneGeometryUpdater",(function(){return oTe})),n.d(t,"PlaneGraphics",(function(){return rY})),n.d(t,"PointGraphics",(function(){return sY})),n.d(t,"PointVisualizer",(function(){return axe})),n.d(t,"PolygonGeometryUpdater",(function(){return _Te})),n.d(t,"PolygonGraphics",(function(){return uY})),n.d(t,"PolylineArrowMaterialProperty",(function(){return Ive})),n.d(t,"PolylineDashMaterialProperty",(function(){return Mve})),n.d(t,"PolylineGeometryUpdater",(function(){return Oxe})),n.d(t,"PolylineGlowMaterialProperty",(function(){return kve})),n.d(t,"PolylineGraphics",(function(){return dY})),n.d(t,"PolylineOutlineMaterialProperty",(function(){return Wve})),n.d(t,"PolylineVisualizer",(function(){return Lxe})),n.d(t,"PolylineVolumeGeometryUpdater",(function(){return OTe})),n.d(t,"PolylineVolumeGraphics",(function(){return pY})),n.d(t,"PositionProperty",(function(){return Eq})),n.d(t,"PositionPropertyArray",(function(){return Yve})),n.d(t,"Property",(function(){return aN})),n.d(t,"PropertyArray",(function(){return Kve})),n.d(t,"PropertyBag",(function(){return Xq})),n.d(t,"RectangleGeometryUpdater",(function(){return PTe})),n.d(t,"RectangleGraphics",(function(){return _Y})),n.d(t,"ReferenceProperty",(function(){return Qve})),n.d(t,"Rotation",(function(){return eOe})),n.d(t,"SampledPositionProperty",(function(){return hOe})),n.d(t,"SampledProperty",(function(){return lOe})),n.d(t,"ScaledPositionProperty",(function(){return SEe})),n.d(t,"StaticGeometryColorBatch",(function(){return GTe})),n.d(t,"StaticGeometryPerMaterialBatch",(function(){return QTe})),n.d(t,"StaticGroundGeometryColorBatch",(function(){return oCe})),n.d(t,"StaticGroundGeometryPerMaterialBatch",(function(){return lCe})),n.d(t,"StaticGroundPolylinePerMaterialBatch",(function(){return xxe})),n.d(t,"StaticOutlineGeometryBatch",(function(){return gCe})),n.d(t,"StripeMaterialProperty",(function(){return vOe})),n.d(t,"StripeOrientation",(function(){return fOe})),n.d(t,"TerrainOffsetProperty",(function(){return GY})),n.d(t,"TimeIntervalCollectionPositionProperty",(function(){return AOe})),n.d(t,"TimeIntervalCollectionProperty",(function(){return TOe})),n.d(t,"VelocityOrientationProperty",(function(){return MOe})),n.d(t,"VelocityVectorProperty",(function(){return DOe})),n.d(t,"Visualizer",(function(){return YFe})),n.d(t,"WallGeometryUpdater",(function(){return ACe})),n.d(t,"WallGraphics",(function(){return bY})),n.d(t,"createMaterialPropertyDescriptor",(function(){return Oq})),n.d(t,"createPropertyDescriptor",(function(){return XM})),n.d(t,"createRawPropertyDescriptor",(function(){return Rq})),n.d(t,"exportKml",(function(){return Sze})),n.d(t,"heightReferenceOnEntityPropertyChanged",(function(){return qY})),n.d(t,"AutomaticUniforms",(function(){return qF})),n.d(t,"Buffer",(function(){return NV})),n.d(t,"BufferUsage",(function(){return LV})),n.d(t,"ClearCommand",(function(){return xX})),n.d(t,"ComputeCommand",(function(){return nX})),n.d(t,"ComputeEngine",(function(){return Bze})),n.d(t,"Context",(function(){return Qke})),n.d(t,"ContextLimits",(function(){return YN})),n.d(t,"CubeMap",(function(){return sB})),n.d(t,"CubeMapFace",(function(){return KN})),n.d(t,"DrawCommand",(function(){return lF})),n.d(t,"Framebuffer",(function(){return S8})),n.d(t,"FramebufferManager",(function(){return N8})),n.d(t,"MipmapHint",(function(){return JN})),n.d(t,"MultisampleFramebuffer",(function(){return D8})),n.d(t,"Pass",(function(){return hF})),n.d(t,"PassState",(function(){return zze})),n.d(t,"PixelDatatype",(function(){return hx})),n.d(t,"RenderState",(function(){return UF})),n.d(t,"Renderbuffer",(function(){return L8})),n.d(t,"RenderbufferFormat",(function(){return j8})),n.d(t,"Sampler",(function(){return rB})),n.d(t,"ShaderBuilder",(function(){return Cre})),n.d(t,"ShaderCache",(function(){return Hze})),n.d(t,"ShaderDestination",(function(){return Mee})),n.d(t,"ShaderFunction",(function(){return vre})),n.d(t,"ShaderProgram",(function(){return Nz})),n.d(t,"ShaderSource",(function(){return EV})),n.d(t,"ShaderStruct",(function(){return bre})),n.d(t,"Texture",(function(){return lB})),n.d(t,"TextureCache",(function(){return Wze})),n.d(t,"TextureMagnificationFilter",(function(){return ZN})),n.d(t,"TextureMinificationFilter",(function(){return tB})),n.d(t,"TextureWrap",(function(){return iB})),n.d(t,"UniformState",(function(){return Lke})),n.d(t,"VertexArray",(function(){return WV})),n.d(t,"VertexArrayFacade",(function(){return Kse})),n.d(t,"createUniform",(function(){return lz})),n.d(t,"createUniformArray",(function(){return wz})),n.d(t,"freezeRenderState",(function(){return fF})),n.d(t,"loadCubeMap",(function(){return eUe})),n.d(t,"modernizeShader",(function(){return Wz})),n.d(t,"AlphaMode",(function(){return H1})),n.d(t,"Appearance",(function(){return WN})),n.d(t,"ArcGisMapServerImageryProvider",(function(){return uUe})),n.d(t,"AttributeType",(function(){return rc})),n.d(t,"AutoExposure",(function(){return bUe})),n.d(t,"Axis",(function(){return IX})),n.d(t,"B3dmParser",(function(){return b9})),n.d(t,"BatchTable",(function(){return lH})),n.d(t,"BatchTableHierarchy",(function(){return hK})),n.d(t,"BatchTexture",(function(){return WX})),n.d(t,"Billboard",(function(){return Ace})),n.d(t,"BillboardCollection",(function(){return Hle})),n.d(t,"BingMapsImageryProvider",(function(){return IUe})),n.d(t,"BingMapsStyle",(function(){return vUe})),n.d(t,"BlendEquation",(function(){return BN})),n.d(t,"BlendFunction",(function(){return zN})),n.d(t,"BlendOption",(function(){return Tce})),n.d(t,"BlendingState",(function(){return UN})),n.d(t,"BoxEmitter",(function(){return RUe})),n.d(t,"BrdfLutGenerator",(function(){return BUe})),n.d(t,"BufferLoader",(function(){return eZ})),n.d(t,"Camera",(function(){return IGe})),n.d(t,"CameraEventAggregator",(function(){return kGe})),n.d(t,"CameraEventType",(function(){return PGe})),n.d(t,"CameraFlightPath",(function(){return iVe})),n.d(t,"Cesium3DContentGroup",(function(){return PX})),n.d(t,"Cesium3DTile",(function(){return k_e})),n.d(t,"Cesium3DTileBatchTable",(function(){return UK})),n.d(t,"Cesium3DTileColorBlendMode",(function(){return fK})),n.d(t,"Cesium3DTileContent",(function(){return VGe})),n.d(t,"Cesium3DTileContentFactory",(function(){return bfe})),n.d(t,"Cesium3DTileContentState",(function(){return vfe})),n.d(t,"Cesium3DTileContentType",(function(){return Afe})),n.d(t,"Cesium3DTileFeature",(function(){return qK})),n.d(t,"Cesium3DTileFeatureTable",(function(){return A9})),n.d(t,"Cesium3DTileOptimizationHint",(function(){return Tfe})),n.d(t,"Cesium3DTileOptimizations",(function(){return K_e})),n.d(t,"Cesium3DTilePass",(function(){return Ape})),n.d(t,"Cesium3DTilePassState",(function(){return GGe})),n.d(t,"Cesium3DTilePointFeature",(function(){return Kle})),n.d(t,"Cesium3DTileRefine",(function(){return foe})),n.d(t,"Cesium3DTileStyle",(function(){return ZGe})),n.d(t,"Cesium3DTileStyleEngine",(function(){return sge})),n.d(t,"Cesium3DTileset",(function(){return $ge})),n.d(t,"Cesium3DTilesetCache",(function(){return J_e})),n.d(t,"Cesium3DTilesetHeatmap",(function(){return nge})),n.d(t,"Cesium3DTilesetMetadata",(function(){return q_e})),n.d(t,"Cesium3DTilesetMostDetailedTraversal",(function(){return Nfe})),n.d(t,"Cesium3DTilesetStatistics",(function(){return rge})),n.d(t,"Cesium3DTilesetTraversal",(function(){return ype})),n.d(t,"CircleEmitter",(function(){return tWe})),n.d(t,"ClassificationPrimitive",(function(){return wW})),n.d(t,"ClassificationType",(function(){return DV})),n.d(t,"ClippingPlane",(function(){return c4})),n.d(t,"ClippingPlaneCollection",(function(){return A4})),n.d(t,"CloudCollection",(function(){return eqe})),n.d(t,"CloudType",(function(){return iWe})),n.d(t,"ColorBlendMode",(function(){return T4})),n.d(t,"Composite3DTileContent",(function(){return MX})),n.d(t,"ConditionsExpression",(function(){return XGe})),n.d(t,"ConeEmitter",(function(){return iqe})),n.d(t,"ContentMetadata",(function(){return Epe})),n.d(t,"CreditDisplay",(function(){return Aqe})),n.d(t,"CullFace",(function(){return HN})),n.d(t,"CumulusCloud",(function(){return gWe})),n.d(t,"DebugAppearance",(function(){return Tqe})),n.d(t,"DebugCameraPrimitive",(function(){return Mqe})),n.d(t,"DebugInspector",(function(){return Vqe})),n.d(t,"DebugModelMatrixPrimitive",(function(){return Gqe})),n.d(t,"DepthFunction",(function(){return jV})),n.d(t,"DepthPlane",(function(){return tYe})),n.d(t,"DerivedCommand",(function(){return pYe})),n.d(t,"DeviceOrientationCameraController",(function(){return vYe})),n.d(t,"DirectionalLight",(function(){return AYe})),n.d(t,"DiscardEmptyTileImagePolicy",(function(){return wUe})),n.d(t,"DiscardMissingTileImagePolicy",(function(){return nUe})),n.d(t,"DracoLoader",(function(){return aZ})),n.d(t,"EllipsoidPrimitive",(function(){return IYe})),n.d(t,"EllipsoidSurfaceAppearance",(function(){return RYe})),n.d(t,"Empty3DTileContent",(function(){return Tpe})),n.d(t,"Expression",(function(){return $$})),n.d(t,"ExpressionNodeType",(function(){return $K})),n.d(t,"Fog",(function(){return VYe})),n.d(t,"FrameRateMonitor",(function(){return qYe})),n.d(t,"FrameState",(function(){return XYe})),n.d(t,"FrustumCommands",(function(){return $Ye})),n.d(t,"Geometry3DTileContent",(function(){return UJ})),n.d(t,"GetFeatureInfoFormat",(function(){return mXe})),n.d(t,"Globe",(function(){return ZJe})),n.d(t,"GlobeDepth",(function(){return rQe})),n.d(t,"GlobeSurfaceShaderSet",(function(){return PXe})),n.d(t,"GlobeSurfaceTile",(function(){return eKe})),n.d(t,"GlobeSurfaceTileProvider",(function(){return X$e})),n.d(t,"GlobeTranslucency",(function(){return $$e})),n.d(t,"GlobeTranslucencyFramebuffer",(function(){return uQe})),n.d(t,"GlobeTranslucencyState",(function(){return nZe})),n.d(t,"GltfBufferViewLoader",(function(){return oZ})),n.d(t,"GltfDracoLoader",(function(){return lZ})),n.d(t,"GltfImageLoader",(function(){return yZ})),n.d(t,"GltfIndexBufferLoader",(function(){return DZ})),n.d(t,"GltfJsonLoader",(function(){return U1})),n.d(t,"GltfLoader",(function(){return T8})),n.d(t,"GltfLoaderUtil",(function(){return y2})),n.d(t,"GltfStructuralMetadataLoader",(function(){return c5})),n.d(t,"GltfTextureLoader",(function(){return T2})),n.d(t,"GltfVertexBufferLoader",(function(){return j2})),n.d(t,"GoogleEarthEnterpriseImageryProvider",(function(){return cZe})),n.d(t,"GoogleEarthEnterpriseMapsProvider",(function(){return uZe})),n.d(t,"GridImageryProvider",(function(){return mZe})),n.d(t,"GroundPolylinePrimitive",(function(){return fq})),n.d(t,"GroundPrimitive",(function(){return kW})),n.d(t,"GroupMetadata",(function(){return V_e})),n.d(t,"HeightReference",(function(){return QM})),n.d(t,"HorizontalOrigin",(function(){return eN})),n.d(t,"I3dmParser",(function(){return i7})),n.d(t,"ImageBasedLighting",(function(){return CX})),n.d(t,"Imagery",(function(){return oKe})),n.d(t,"ImageryLayer",(function(){return bKe})),n.d(t,"ImageryLayerCollection",(function(){return nJe})),n.d(t,"ImageryLayerFeatureInfo",(function(){return oUe})),n.d(t,"ImageryProvider",(function(){return sUe})),n.d(t,"ImageryState",(function(){return RXe})),n.d(t,"Implicit3DTileContent",(function(){return i4})),n.d(t,"ImplicitAvailabilityBitstream",(function(){return qJ})),n.d(t,"ImplicitMetadataView",(function(){return XJ})),n.d(t,"ImplicitSubdivisionScheme",(function(){return $J})),n.d(t,"ImplicitSubtree",(function(){return C3})),n.d(t,"ImplicitSubtreeMetadata",(function(){return eQ})),n.d(t,"ImplicitTileCoordinates",(function(){return mge})),n.d(t,"ImplicitTileset",(function(){return hge})),n.d(t,"InstanceAttributeSemantic",(function(){return b5})),n.d(t,"InvertClassification",(function(){return AZe})),n.d(t,"IonImageryProvider",(function(){return Y0e})),n.d(t,"IonWorldImageryStyle",(function(){return K0e})),n.d(t,"JobScheduler",(function(){return Q0e})),n.d(t,"JobType",(function(){return OZ})),n.d(t,"JsonMetadataTable",(function(){return C9})),n.d(t,"Label",(function(){return yue})),n.d(t,"LabelCollection",(function(){return Uue})),n.d(t,"LabelStyle",(function(){return Zle})),n.d(t,"Light",(function(){return e1e})),n.d(t,"MapMode2D",(function(){return rVe})),n.d(t,"MapboxImageryProvider",(function(){return T0e})),n.d(t,"MapboxStyleImageryProvider",(function(){return o1e})),n.d(t,"Material",(function(){return XB})),n.d(t,"MaterialAppearance",(function(){return $B})),n.d(t,"MetadataClass",(function(){return L2})),n.d(t,"MetadataClassProperty",(function(){return AQ})),n.d(t,"MetadataComponentType",(function(){return nQ})),n.d(t,"MetadataEntity",(function(){return QJ})),n.d(t,"MetadataEnum",(function(){return F2})),n.d(t,"MetadataEnumValue",(function(){return N2})),n.d(t,"MetadataSchema",(function(){return k2})),n.d(t,"MetadataSchemaLoader",(function(){return H2})),n.d(t,"MetadataSemantic",(function(){return x3})),n.d(t,"MetadataTable",(function(){return YQ})),n.d(t,"MetadataTableProperty",(function(){return GQ})),n.d(t,"MetadataType",(function(){return oQ})),n.d(t,"ModelAnimationLoop",(function(){return r4})),n.d(t,"ModelAnimationState",(function(){return w7})),n.d(t,"ModelComponents",(function(){return _2})),n.d(t,"Moon",(function(){return u1e})),n.d(t,"Multiple3DTileContent",(function(){return qpe})),n.d(t,"NeverTileDiscardPolicy",(function(){return d1e})),n.d(t,"OIT",(function(){return B1e})),n.d(t,"OctahedralProjectedCubeMap",(function(){return AX})),n.d(t,"OpenStreetMapImageryProvider",(function(){return k1e})),n.d(t,"OrderedGroundPrimitiveCollection",(function(){return wwe})),n.d(t,"Particle",(function(){return G1e})),n.d(t,"ParticleBurst",(function(){return q1e})),n.d(t,"ParticleEmitter",(function(){return X1e})),n.d(t,"ParticleSystem",(function(){return a2e})),n.d(t,"PerInstanceColorAppearance",(function(){return nF})),n.d(t,"PerformanceDisplay",(function(){return c2e})),n.d(t,"PickDepth",(function(){return p2e})),n.d(t,"PickDepthFramebuffer",(function(){return b2e})),n.d(t,"PickFramebuffer",(function(){return O2e})),n.d(t,"Picking",(function(){return k4e})),n.d(t,"PntsParser",(function(){return vae})),n.d(t,"PointCloud",(function(){return A5e})),n.d(t,"PointCloudEyeDomeLighting",(function(){return W8})),n.d(t,"PointCloudShading",(function(){return Y8})),n.d(t,"PointPrimitive",(function(){return tye})),n.d(t,"PointPrimitiveCollection",(function(){return Rye})),n.d(t,"Polyline",(function(){return Que})),n.d(t,"PolylineCollection",(function(){return qhe})),n.d(t,"PolylineColorAppearance",(function(){return eq})),n.d(t,"PolylineMaterialAppearance",(function(){return aq})),n.d(t,"PostProcessStage",(function(){return z5e})),n.d(t,"PostProcessStageCollection",(function(){return D6e})),n.d(t,"PostProcessStageComposite",(function(){return s6e})),n.d(t,"PostProcessStageLibrary",(function(){return d6e})),n.d(t,"PostProcessStageSampleMode",(function(){return T5e})),n.d(t,"PostProcessStageTextureCache",(function(){return A6e})),n.d(t,"Primitive",(function(){return EG})),n.d(t,"PrimitiveCollection",(function(){return Owe})),n.d(t,"PrimitiveLoadPlan",(function(){return B5})),n.d(t,"PrimitivePipeline",(function(){return TH})),n.d(t,"PrimitiveState",(function(){return EH})),n.d(t,"PropertyAttribute",(function(){return z4})),n.d(t,"PropertyAttributeProperty",(function(){return B4})),n.d(t,"PropertyTable",(function(){return S4})),n.d(t,"PropertyTexture",(function(){return M4})),n.d(t,"PropertyTextureProperty",(function(){return R4})),n.d(t,"QuadtreeOccluders",(function(){return oJe})),n.d(t,"QuadtreePrimitive",(function(){return UJe})),n.d(t,"QuadtreeTile",(function(){return sJe})),n.d(t,"QuadtreeTileLoadState",(function(){return MXe})),n.d(t,"QuadtreeTileProvider",(function(){return j6e})),n.d(t,"ResourceCache",(function(){return r3})),n.d(t,"ResourceCacheKey",(function(){return e3})),n.d(t,"ResourceCacheStatistics",(function(){return n3})),n.d(t,"ResourceLoader",(function(){return KQ})),n.d(t,"ResourceLoaderState",(function(){return JQ})),n.d(t,"SDFSettings",(function(){return Ece})),n.d(t,"Scene",(function(){return Htt})),n.d(t,"SceneFramebuffer",(function(){return T2e})),n.d(t,"SceneMode",(function(){return SH})),n.d(t,"SceneTransforms",(function(){return f9})),n.d(t,"SceneTransitioner",(function(){return H8e})),n.d(t,"ScreenSpaceCameraController",(function(){return xet})),n.d(t,"ShadowMap",(function(){return A3e})),n.d(t,"ShadowMapShader",(function(){return E2e})),n.d(t,"ShadowMode",(function(){return DH})),n.d(t,"ShadowVolumeAppearance",(function(){return nW})),n.d(t,"SingleTileImageryProvider",(function(){return E0e})),n.d(t,"SkyAtmosphere",(function(){return $tt})),n.d(t,"SkyBox",(function(){return ent})),n.d(t,"SphereEmitter",(function(){return nnt})),n.d(t,"SplitDirection",(function(){return m9})),n.d(t,"Splitter",(function(){return G4e})),n.d(t,"StencilConstants",(function(){return cW})),n.d(t,"StencilFunction",(function(){return oW})),n.d(t,"StencilOperation",(function(){return aW})),n.d(t,"StructuralMetadata",(function(){return U4})),n.d(t,"StyleExpression",(function(){return ont})),n.d(t,"Sun",(function(){return fnt})),n.d(t,"SunLight",(function(){return Yze})),n.d(t,"SunPostProcess",(function(){return Bet})),n.d(t,"SupportedImageFormats",(function(){return z5})),n.d(t,"TerrainFillMesh",(function(){return c$e})),n.d(t,"TerrainState",(function(){return BXe})),n.d(t,"TextureAtlas",(function(){return Lce})),n.d(t,"TileBoundingRegion",(function(){return hme})),n.d(t,"TileBoundingS2Cell",(function(){return Xme})),n.d(t,"TileBoundingSphere",(function(){return $me})),n.d(t,"TileBoundingVolume",(function(){return mnt})),n.d(t,"TileCoordinatesImageryProvider",(function(){return gnt})),n.d(t,"TileDiscardPolicy",(function(){return ynt})),n.d(t,"TileImagery",(function(){return aKe})),n.d(t,"TileMapServiceImageryProvider",(function(){return v0e})),n.d(t,"TileMetadata",(function(){return jpe})),n.d(t,"TileOrientedBoundingBox",(function(){return r_e})),n.d(t,"TileReplacementQueue",(function(){return uJe})),n.d(t,"TileSelectionResult",(function(){return vKe})),n.d(t,"TileState",(function(){return Ont})),n.d(t,"Tileset3DTileContent",(function(){return Hse})),n.d(t,"TilesetMetadata",(function(){return G_e})),n.d(t,"TimeDynamicImagery",(function(){return j0e})),n.d(t,"TimeDynamicPointCloud",(function(){return Knt})),n.d(t,"Tonemapper",(function(){return T6e})),n.d(t,"TranslucentTileClassification",(function(){return R3e})),n.d(t,"TweenCollection",(function(){return q8e})),n.d(t,"UrlTemplateImageryProvider",(function(){return _0e})),n.d(t,"Vector3DTileBatch",(function(){return HK})),n.d(t,"Vector3DTileClampedPolylines",(function(){return afe})),n.d(t,"Vector3DTileContent",(function(){return _fe})),n.d(t,"Vector3DTileGeometry",(function(){return LJ})),n.d(t,"Vector3DTilePoints",(function(){return lde})),n.d(t,"Vector3DTilePolygons",(function(){return bde})),n.d(t,"Vector3DTilePolylines",(function(){return Fde})),n.d(t,"Vector3DTilePrimitive",(function(){return CJ})),n.d(t,"VertexAttributeSemantic",(function(){return h5})),n.d(t,"VerticalOrigin",(function(){return nN})),n.d(t,"View",(function(){return G3e})),n.d(t,"ViewportQuad",(function(){return Qnt})),n.d(t,"WebMapServiceImageryProvider",(function(){return z0e})),n.d(t,"WebMapTileServiceImageryProvider",(function(){return H0e})),n.d(t,"computeFlyToLocationForRectangle",(function(){return eit})),n.d(t,"createBillboardPointCallback",(function(){return Wle})),n.d(t,"createElevationBandMaterial",(function(){return fit})),n.d(t,"createOsmBuildings",(function(){return mit})),n.d(t,"createTangentSpaceDebugPrimitive",(function(){return git})),n.d(t,"createWorldImagery",(function(){return yit})),n.d(t,"findContentMetadata",(function(){return Spe})),n.d(t,"findGroupMetadata",(function(){return Dpe})),n.d(t,"findTileMetadata",(function(){return Lpe})),n.d(t,"getBinaryAccessor",(function(){return KX})),n.d(t,"getClipAndStyleCode",(function(){return V4e})),n.d(t,"getClippingFunction",(function(){return EXe})),n.d(t,"hasExtension",(function(){return HJ})),n.d(t,"parseBatchTable",(function(){return j9})),n.d(t,"parseBoundingVolumeSemantics",(function(){return j3})),n.d(t,"parseFeatureMetadataLegacy",(function(){return Y4})),n.d(t,"parseStructuralMetadata",(function(){return H4})),n.d(t,"preprocess3DTileContent",(function(){return Bpe})),n.d(t,"_shadersAdjustTranslucentFS",(function(){return f1e})),n.d(t,"_shadersAtmosphereCommon",(function(){return bXe})),n.d(t,"_shadersBillboardCollectionFS",(function(){return $se})),n.d(t,"_shadersBillboardCollectionVS",(function(){return Jse})),n.d(t,"_shadersBrdfLutGeneratorFS",(function(){return LUe})),n.d(t,"_shadersCloudCollectionFS",(function(){return oWe})),n.d(t,"_shadersCloudCollectionVS",(function(){return rWe})),n.d(t,"_shadersCloudNoiseFS",(function(){return aWe})),n.d(t,"_shadersCloudNoiseVS",(function(){return sWe})),n.d(t,"_shadersCompareAndPackTranslucentDepth",(function(){return w3e})),n.d(t,"_shadersCompositeOITFS",(function(){return p1e})),n.d(t,"_shadersDepthPlaneFS",(function(){return Wqe})),n.d(t,"_shadersDepthPlaneVS",(function(){return qqe})),n.d(t,"_shadersEllipsoidFS",(function(){return wYe})),n.d(t,"_shadersEllipsoidVS",(function(){return TYe})),n.d(t,"_shadersFXAA3_11",(function(){return o6e})),n.d(t,"_shadersGlobeFS",(function(){return _Xe})),n.d(t,"_shadersGlobeVS",(function(){return gXe})),n.d(t,"_shadersGroundAtmosphere",(function(){return yXe})),n.d(t,"_shadersOctahedralProjectionAtlasFS",(function(){return iX})),n.d(t,"_shadersOctahedralProjectionFS",(function(){return oX})),n.d(t,"_shadersOctahedralProjectionVS",(function(){return rX})),n.d(t,"_shadersPointPrimitiveCollectionFS",(function(){return nye})),n.d(t,"_shadersPointPrimitiveCollectionVS",(function(){return iye})),n.d(t,"_shadersPolylineCommon",(function(){return $W})),n.d(t,"_shadersPolylineFS",(function(){return nq})),n.d(t,"_shadersPolylineShadowVolumeFS",(function(){return WW})),n.d(t,"_shadersPolylineShadowVolumeMorphFS",(function(){return qW})),n.d(t,"_shadersPolylineShadowVolumeMorphVS",(function(){return YW})),n.d(t,"_shadersPolylineShadowVolumeVS",(function(){return XW})),n.d(t,"_shadersPolylineVS",(function(){return Vue})),n.d(t,"_shadersReprojectWebMercatorFS",(function(){return tKe})),n.d(t,"_shadersReprojectWebMercatorVS",(function(){return nKe})),n.d(t,"_shadersShadowVolumeAppearanceFS",(function(){return xG})),n.d(t,"_shadersShadowVolumeAppearanceVS",(function(){return xV})),n.d(t,"_shadersShadowVolumeFS",(function(){return SV})),n.d(t,"_shadersSkyAtmosphereCommon",(function(){return Gtt})),n.d(t,"_shadersSkyAtmosphereFS",(function(){return Wtt})),n.d(t,"_shadersSkyAtmosphereVS",(function(){return qtt})),n.d(t,"_shadersSkyBoxFS",(function(){return Jtt})),n.d(t,"_shadersSkyBoxVS",(function(){return Qtt})),n.d(t,"_shadersSunFS",(function(){return rnt})),n.d(t,"_shadersSunTextureFS",(function(){return ant})),n.d(t,"_shadersSunVS",(function(){return snt})),n.d(t,"_shadersVector3DTileClampedPolylinesFS",(function(){return kde})),n.d(t,"_shadersVector3DTileClampedPolylinesVS",(function(){return zde})),n.d(t,"_shadersVector3DTilePolylinesVS",(function(){return yde})),n.d(t,"_shadersVectorTileVS",(function(){return GK})),n.d(t,"_shadersViewportQuadFS",(function(){return $nt})),n.d(t,"_shadersViewportQuadVS",(function(){return Ize})),n.d(t,"knockout_3_5_1",(function(){return vit["a"]})),n.d(t,"knockout_es5",(function(){return Lit})),n.d(t,"knockout",(function(){return zit})),n.d(t,"ClockViewModel",(function(){return Uit})),n.d(t,"Command",(function(){return Hit})),n.d(t,"InspectorShared",(function(){return Wit})),n.d(t,"SvgPathBindingHandler",(function(){return Fit})),n.d(t,"ToggleButtonViewModel",(function(){return Yit})),n.d(t,"createCommand",(function(){return Kit})),n.d(t,"getElement",(function(){return HNe})),n.d(t,"subscribeAndEvaluate",(function(){return Jit})),n.d(t,"ForEach",(function(){return NZ})),n.d(t,"addBuffer",(function(){return M0})),n.d(t,"addDefaults",(function(){return GZ})),n.d(t,"addExtensionsRequired",(function(){return O0})),n.d(t,"addExtensionsUsed",(function(){return c0})),n.d(t,"addPipelineExtras",(function(){return YZ})),n.d(t,"addToArray",(function(){return jZ})),n.d(t,"findAccessorMinMax",(function(){return d0})),n.d(t,"forEachTextureInMaterial",(function(){return C0})),n.d(t,"getAccessorByteStride",(function(){return kZ})),n.d(t,"getComponentReader",(function(){return u0})),n.d(t,"moveTechniqueRenderStates",(function(){return y0})),n.d(t,"moveTechniquesToExtension",(function(){return w0})),n.d(t,"numberOfComponentsForType",(function(){return FZ})),n.d(t,"parseGlb",(function(){return i0})),n.d(t,"readAccessorPacked",(function(){return B0})),n.d(t,"removeExtension",(function(){return G0})),n.d(t,"removeExtensionsRequired",(function(){return KZ})),n.d(t,"removeExtensionsUsed",(function(){return JZ}));n.d(t,"removePipelineExtras",(function(){return a0})),n.d(t,"removeUnusedElements",(function(){return R0})),n.d(t,"updateAccessorComponentTypes",(function(){return k0})),n.d(t,"updateVersion",(function(){return j1})),n.d(t,"usesExtension",(function(){return LZ})),n.d(t,"AlphaPipelineStage",(function(){return ene})),n.d(t,"B3dmLoader",(function(){return z9})),n.d(t,"BatchTexturePipelineStage",(function(){return nne})),n.d(t,"CPUStylingPipelineStage",(function(){return lne})),n.d(t,"ClassificationModelDrawCommand",(function(){return lee})),n.d(t,"ClassificationPipelineStage",(function(){return rne})),n.d(t,"CustomShader",(function(){return got})),n.d(t,"CustomShaderMode",(function(){return hne})),n.d(t,"CustomShaderPipelineStage",(function(){return aie})),n.d(t,"CustomShaderTranslucencyMode",(function(){return Gne})),n.d(t,"DequantizationPipelineStage",(function(){return fie})),n.d(t,"FeatureIdPipelineStage",(function(){return xne})),n.d(t,"GeoJsonLoader",(function(){return e7})),n.d(t,"GeometryPipelineStage",(function(){return Lie})),n.d(t,"I3dmLoader",(function(){return O7})),n.d(t,"ImageBasedLightingPipelineStage",(function(){return kee})),n.d(t,"InstancingPipelineStage",(function(){return Ute})),n.d(t,"LightingModel",(function(){return Bie})),n.d(t,"LightingPipelineStage",(function(){return zie})),n.d(t,"MaterialPipelineStage",(function(){return $ie})),n.d(t,"MetadataPipelineStage",(function(){return Vne})),n.d(t,"Model",(function(){return Bse})),n.d(t,"Model3DTileContent",(function(){return kse})),n.d(t,"ModelAlphaOptions",(function(){return _re})),n.d(t,"ModelAnimation",(function(){return L7})),n.d(t,"ModelAnimationChannel",(function(){return P7})),n.d(t,"ModelAnimationCollection",(function(){return z7})),n.d(t,"ModelArticulation",(function(){return $ee})),n.d(t,"ModelArticulationStage",(function(){return Wee})),n.d(t,"ModelClippingPlanesPipelineStage",(function(){return ite})),n.d(t,"ModelColorPipelineStage",(function(){return Zee})),n.d(t,"ModelDrawCommand",(function(){return Dee})),n.d(t,"ModelFeature",(function(){return U7})),n.d(t,"ModelFeatureTable",(function(){return K7})),n.d(t,"ModelLightingOptions",(function(){return Fre})),n.d(t,"ModelMatrixUpdateStage",(function(){return Gte})),n.d(t,"ModelNode",(function(){return rte})),n.d(t,"ModelRenderResources",(function(){return xre})),n.d(t,"ModelRuntimeNode",(function(){return Qte})),n.d(t,"ModelRuntimePrimitive",(function(){return ure})),n.d(t,"ModelSceneGraph",(function(){return cae})),n.d(t,"ModelSilhouettePipelineStage",(function(){return Pre})),n.d(t,"ModelSkin",(function(){return pre})),n.d(t,"ModelSplitterPipelineStage",(function(){return Lre})),n.d(t,"ModelStatistics",(function(){return uae})),n.d(t,"ModelType",(function(){return W7})),n.d(t,"ModelUtility",(function(){return _5})),n.d(t,"MorphTargetsPipelineStage",(function(){return aoe})),n.d(t,"NodeRenderResources",(function(){return Nre})),n.d(t,"NodeStatisticsPipelineStage",(function(){return Xte})),n.d(t,"PickingPipelineStage",(function(){return hoe})),n.d(t,"PntsLoader",(function(){return Xae})),n.d(t,"PointCloudStylingPipelineStage",(function(){return xoe})),n.d(t,"PrimitiveOutlineGenerator",(function(){return S5})),n.d(t,"PrimitiveOutlinePipelineStage",(function(){return Poe})),n.d(t,"PrimitiveRenderResources",(function(){return kre})),n.d(t,"PrimitiveStatisticsPipelineStage",(function(){return Voe})),n.d(t,"SceneMode2DPipelineStage",(function(){return Zoe})),n.d(t,"SelectedFeatureIdPipelineStage",(function(){return Aie})),n.d(t,"SkinningPipelineStage",(function(){return ore})),n.d(t,"StyleCommandsNeeded",(function(){return H7})),n.d(t,"TextureManager",(function(){return sot})),n.d(t,"TextureUniform",(function(){return yot})),n.d(t,"TilesetPipelineStage",(function(){return Bee})),n.d(t,"UniformType",(function(){return Zit})),n.d(t,"VaryingType",(function(){return Oot})),n.d(t,"WireframePipelineStage",(function(){return sre})),n.d(t,"buildDrawCommand",(function(){return Ree})),n.d(t,"_shadersAllMaterialAppearanceFS",(function(){return DN})),n.d(t,"_shadersAllMaterialAppearanceVS",(function(){return PN})),n.d(t,"_shadersBasicMaterialAppearanceFS",(function(){return jN})),n.d(t,"_shadersBasicMaterialAppearanceVS",(function(){return RN})),n.d(t,"_shadersEllipsoidSurfaceAppearanceFS",(function(){return DYe})),n.d(t,"_shadersEllipsoidSurfaceAppearanceVS",(function(){return PYe})),n.d(t,"_shadersPerInstanceColorAppearanceFS",(function(){return JB})),n.d(t,"_shadersPerInstanceColorAppearanceVS",(function(){return QB})),n.d(t,"_shadersPerInstanceFlatColorAppearanceFS",(function(){return ZB})),n.d(t,"_shadersPerInstanceFlatColorAppearanceVS",(function(){return eF})),n.d(t,"_shadersPolylineColorAppearanceVS",(function(){return KW})),n.d(t,"_shadersPolylineMaterialAppearanceVS",(function(){return tq})),n.d(t,"_shadersTexturedMaterialAppearanceFS",(function(){return LN})),n.d(t,"_shadersTexturedMaterialAppearanceVS",(function(){return MN})),n.d(t,"_shadersCzmBuiltins",(function(){return fV})),n.d(t,"_shadersAspectRampMaterial",(function(){return uB})),n.d(t,"_shadersBumpMapMaterial",(function(){return hB})),n.d(t,"_shadersCheckerboardMaterial",(function(){return dB})),n.d(t,"_shadersDotMaterial",(function(){return fB})),n.d(t,"_shadersElevationBandMaterial",(function(){return pB})),n.d(t,"_shadersElevationContourMaterial",(function(){return mB})),n.d(t,"_shadersElevationRampMaterial",(function(){return _B})),n.d(t,"_shadersFadeMaterial",(function(){return gB})),n.d(t,"_shadersGridMaterial",(function(){return bB})),n.d(t,"_shadersNormalMapMaterial",(function(){return yB})),n.d(t,"_shadersPolylineArrowMaterial",(function(){return vB})),n.d(t,"_shadersPolylineDashMaterial",(function(){return OB})),n.d(t,"_shadersPolylineGlowMaterial",(function(){return AB})),n.d(t,"_shadersPolylineOutlineMaterial",(function(){return wB})),n.d(t,"_shadersRimLightingMaterial",(function(){return TB})),n.d(t,"_shadersSlopeRampMaterial",(function(){return CB})),n.d(t,"_shadersStripeMaterial",(function(){return EB})),n.d(t,"_shadersWater",(function(){return xB})),n.d(t,"_shadersCPUStylingStageFS",(function(){return sne})),n.d(t,"_shadersCPUStylingStageVS",(function(){return ane})),n.d(t,"_shadersCustomShaderStageFS",(function(){return fne})),n.d(t,"_shadersCustomShaderStageVS",(function(){return dne})),n.d(t,"_shadersFeatureIdStageFS",(function(){return pne})),n.d(t,"_shadersFeatureIdStageVS",(function(){return mne})),n.d(t,"_shadersGeometryStageFS",(function(){return pie})),n.d(t,"_shadersGeometryStageVS",(function(){return mie})),n.d(t,"_shadersImageBasedLightingStageFS",(function(){return Fee})),n.d(t,"_shadersInstancingStageCommon",(function(){return ate})),n.d(t,"_shadersInstancingStageVS",(function(){return ste})),n.d(t,"_shadersLegacyInstancingStageVS",(function(){return cte})),n.d(t,"_shadersLightingStageFS",(function(){return Mie})),n.d(t,"_shadersMaterialStageFS",(function(){return kie})),n.d(t,"_shadersMetadataStageFS",(function(){return Sne})),n.d(t,"_shadersMetadataStageVS",(function(){return Ine})),n.d(t,"_shadersModelClippingPlanesStageFS",(function(){return ete})),n.d(t,"_shadersModelColorStageFS",(function(){return Jee})),n.d(t,"_shadersModelFS",(function(){return $7})),n.d(t,"_shadersModelSilhouetteStageFS",(function(){return Sre})),n.d(t,"_shadersModelSilhouetteStageVS",(function(){return Ire})),n.d(t,"_shadersModelSplitterStageFS",(function(){return jre})),n.d(t,"_shadersModelVS",(function(){return J7})),n.d(t,"_shadersMorphTargetsStageVS",(function(){return Jie})),n.d(t,"_shadersPointCloudStylingStageVS",(function(){return poe})),n.d(t,"_shadersPrimitiveOutlineStageFS",(function(){return Ioe})),n.d(t,"_shadersPrimitiveOutlineStageVS",(function(){return Soe})),n.d(t,"_shadersSelectedFeatureIdStageCommon",(function(){return _ie})),n.d(t,"_shadersSkinningStageVS",(function(){return ere})),n.d(t,"_shadersAcesTonemappingStage",(function(){return k5e})),n.d(t,"_shadersAdditiveBlend",(function(){return Iet})),n.d(t,"_shadersAmbientOcclusionGenerate",(function(){return U5e})),n.d(t,"_shadersAmbientOcclusionModulate",(function(){return V5e})),n.d(t,"_shadersBlackAndWhite",(function(){return H5e})),n.d(t,"_shadersBloomComposite",(function(){return G5e})),n.d(t,"_shadersBrightPass",(function(){return Det})),n.d(t,"_shadersBrightness",(function(){return W5e})),n.d(t,"_shadersCompositeTranslucentClassification",(function(){return T3e})),n.d(t,"_shadersContrastBias",(function(){return q5e})),n.d(t,"_shadersDepthOfField",(function(){return Y5e})),n.d(t,"_shadersDepthView",(function(){return X5e})),n.d(t,"_shadersDepthViewPacked",(function(){return Aot})),n.d(t,"_shadersEdgeDetection",(function(){return K5e})),n.d(t,"_shadersFXAA",(function(){return J5e})),n.d(t,"_shadersFilmicTonemapping",(function(){return $5e})),n.d(t,"_shadersGaussianBlur1D",(function(){return Q5e})),n.d(t,"_shadersLensFlare",(function(){return Z5e})),n.d(t,"_shadersModifiedReinhardTonemapping",(function(){return e6e})),n.d(t,"_shadersNightVision",(function(){return t6e})),n.d(t,"_shadersPassThrough",(function(){return eQe})),n.d(t,"_shadersPassThroughDepth",(function(){return tQe})),n.d(t,"_shadersPointCloudEyeDomeLighting",(function(){return B8})),n.d(t,"_shadersReinhardTonemapping",(function(){return n6e})),n.d(t,"_shadersSilhouette",(function(){return i6e})),n.d(t,"Animation",(function(){return qot})),n.d(t,"AnimationViewModel",(function(){return trt})),n.d(t,"BaseLayerPicker",(function(){return rrt})),n.d(t,"BaseLayerPickerViewModel",(function(){return irt})),n.d(t,"ProviderViewModel",(function(){return srt})),n.d(t,"createDefaultImageryProviderViewModels",(function(){return lrt})),n.d(t,"createDefaultTerrainProviderViewModels",(function(){return hrt})),n.d(t,"Cesium3DTilesInspector",(function(){return Srt})),n.d(t,"Cesium3DTilesInspectorViewModel",(function(){return Trt})),n.d(t,"CesiumInspector",(function(){return Nrt})),n.d(t,"CesiumInspectorViewModel",(function(){return Lrt})),n.d(t,"CesiumWidget",(function(){return Hrt})),n.d(t,"FullscreenButton",(function(){return Krt})),n.d(t,"FullscreenButtonViewModel",(function(){return Wrt})),n.d(t,"Geocoder",(function(){return fat})),n.d(t,"GeocoderViewModel",(function(){return lat})),n.d(t,"HomeButton",(function(){return gat})),n.d(t,"HomeButtonViewModel",(function(){return mat})),n.d(t,"InfoBox",(function(){return wat})),n.d(t,"InfoBoxViewModel",(function(){return Oat})),n.d(t,"NavigationHelpButton",(function(){return xat})),n.d(t,"NavigationHelpButtonViewModel",(function(){return Cat})),n.d(t,"PerformanceWatchdog",(function(){return Pat})),n.d(t,"PerformanceWatchdogViewModel",(function(){return Iat})),n.d(t,"ProjectionPicker",(function(){return Bat})),n.d(t,"ProjectionPickerViewModel",(function(){return Rat})),n.d(t,"SceneModePicker",(function(){return Gat})),n.d(t,"SceneModePickerViewModel",(function(){return zat})),n.d(t,"SelectionIndicator",(function(){return $at})),n.d(t,"SelectionIndicatorViewModel",(function(){return Xat})),n.d(t,"Timeline",(function(){return mst})),n.d(t,"TimelineHighlightRange",(function(){return Qat})),n.d(t,"TimelineTrack",(function(){return est})),n.d(t,"VRButton",(function(){return Est})),n.d(t,"VRButtonViewModel",(function(){return Ast})),n.d(t,"Viewer",(function(){return Gst})),n.d(t,"viewerCesium3DTilesInspectorMixin",(function(){return qst})),n.d(t,"viewerCesiumInspectorMixin",(function(){return Xst})),n.d(t,"viewerDragDropMixin",(function(){return tct})),n.d(t,"viewerPerformanceWatchdogMixin",(function(){return ict})),n.d(t,"_shadersdegreesPerRadian",(function(){return qz})),n.d(t,"_shadersdepthRange",(function(){return Yz})),n.d(t,"_shadersepsilon1",(function(){return Xz})),n.d(t,"_shadersepsilon2",(function(){return Kz})),n.d(t,"_shadersepsilon3",(function(){return $z})),n.d(t,"_shadersepsilon4",(function(){return Jz})),n.d(t,"_shadersepsilon5",(function(){return Qz})),n.d(t,"_shadersepsilon6",(function(){return Zz})),n.d(t,"_shadersepsilon7",(function(){return ek})),n.d(t,"_shadersinfinity",(function(){return tk})),n.d(t,"_shadersoneOverPi",(function(){return nk})),n.d(t,"_shadersoneOverTwoPi",(function(){return ik})),n.d(t,"_shaderspassCesium3DTile",(function(){return ok})),n.d(t,"_shaderspassCesium3DTileClassification",(function(){return rk})),n.d(t,"_shaderspassCesium3DTileClassificationIgnoreShow",(function(){return ak})),n.d(t,"_shaderspassClassification",(function(){return sk})),n.d(t,"_shaderspassCompute",(function(){return ck})),n.d(t,"_shaderspassEnvironment",(function(){return lk})),n.d(t,"_shaderspassGlobe",(function(){return uk})),n.d(t,"_shaderspassOpaque",(function(){return hk})),n.d(t,"_shaderspassOverlay",(function(){return dk})),n.d(t,"_shaderspassTerrainClassification",(function(){return fk})),n.d(t,"_shaderspassTranslucent",(function(){return pk})),n.d(t,"_shaderspi",(function(){return mk})),n.d(t,"_shaderspiOverFour",(function(){return _k})),n.d(t,"_shaderspiOverSix",(function(){return gk})),n.d(t,"_shaderspiOverThree",(function(){return bk})),n.d(t,"_shaderspiOverTwo",(function(){return yk})),n.d(t,"_shadersradiansPerDegree",(function(){return vk})),n.d(t,"_shaderssceneMode2D",(function(){return Ok})),n.d(t,"_shaderssceneMode3D",(function(){return Ak})),n.d(t,"_shaderssceneModeColumbusView",(function(){return wk})),n.d(t,"_shaderssceneModeMorphing",(function(){return Tk})),n.d(t,"_shaderssolarRadius",(function(){return Ck})),n.d(t,"_shadersthreePiOver2",(function(){return Ek})),n.d(t,"_shaderstwoPi",(function(){return xk})),n.d(t,"_shaderswebMercatorMaxLatitude",(function(){return Sk})),n.d(t,"_shadersHSBToRGB",(function(){return Fk})),n.d(t,"_shadersHSLToRGB",(function(){return zk})),n.d(t,"_shadersRGBToHSB",(function(){return kk})),n.d(t,"_shadersRGBToHSL",(function(){return Uk})),n.d(t,"_shadersRGBToXYZ",(function(){return Vk})),n.d(t,"_shadersXYZToRGB",(function(){return Hk})),n.d(t,"_shadersacesTonemapping",(function(){return Gk})),n.d(t,"_shadersalphaWeight",(function(){return Wk})),n.d(t,"_shadersantialias",(function(){return qk})),n.d(t,"_shadersapproximateSphericalCoordinates",(function(){return Yk})),n.d(t,"_shadersbackFacing",(function(){return Xk})),n.d(t,"_shadersbranchFreeTernary",(function(){return Kk})),n.d(t,"_shaderscascadeColor",(function(){return $k})),n.d(t,"_shaderscascadeDistance",(function(){return Jk})),n.d(t,"_shaderscascadeMatrix",(function(){return Qk})),n.d(t,"_shaderscascadeWeights",(function(){return Zk})),n.d(t,"_shaderscolumbusViewMorph",(function(){return eU})),n.d(t,"_shaderscomputePosition",(function(){return tU})),n.d(t,"_shaderscosineAndSine",(function(){return nU})),n.d(t,"_shadersdecompressTextureCoordinates",(function(){return iU})),n.d(t,"_shadersdefaultPbrMaterial",(function(){return oU})),n.d(t,"_shadersdepthClamp",(function(){return rU})),n.d(t,"_shaderseastNorthUpToEyeCoordinates",(function(){return aU})),n.d(t,"_shadersellipsoidContainsPoint",(function(){return sU})),n.d(t,"_shadersellipsoidWgs84TextureCoordinates",(function(){return cU})),n.d(t,"_shadersequalsEpsilon",(function(){return lU})),n.d(t,"_shaderseyeOffset",(function(){return uU})),n.d(t,"_shaderseyeToWindowCoordinates",(function(){return hU})),n.d(t,"_shadersfastApproximateAtan",(function(){return dU})),n.d(t,"_shadersfog",(function(){return fU})),n.d(t,"_shadersgammaCorrect",(function(){return pU})),n.d(t,"_shadersgeodeticSurfaceNormal",(function(){return mU})),n.d(t,"_shadersgetDefaultMaterial",(function(){return _U})),n.d(t,"_shadersgetLambertDiffuse",(function(){return gU})),n.d(t,"_shadersgetSpecular",(function(){return bU})),n.d(t,"_shadersgetWaterNoise",(function(){return yU})),n.d(t,"_shadershue",(function(){return vU})),n.d(t,"_shadersinverseGamma",(function(){return OU})),n.d(t,"_shadersisEmpty",(function(){return AU})),n.d(t,"_shadersisFull",(function(){return wU})),n.d(t,"_shaderslatitudeToWebMercatorFraction",(function(){return TU})),n.d(t,"_shaderslineDistance",(function(){return CU})),n.d(t,"_shaderslinearToSrgb",(function(){return EU})),n.d(t,"_shadersluminance",(function(){return xU})),n.d(t,"_shadersmetersPerPixel",(function(){return SU})),n.d(t,"_shadersmodelToWindowCoordinates",(function(){return IU})),n.d(t,"_shadersmultiplyWithColorBalance",(function(){return DU})),n.d(t,"_shadersnearFarScalar",(function(){return PU})),n.d(t,"_shadersoctDecode",(function(){return jU})),n.d(t,"_shaderspackDepth",(function(){return RU})),n.d(t,"_shaderspbrLighting",(function(){return LU})),n.d(t,"_shaderspbrMetallicRoughnessMaterial",(function(){return MU})),n.d(t,"_shaderspbrSpecularGlossinessMaterial",(function(){return NU})),n.d(t,"_shadersphong",(function(){return BU})),n.d(t,"_shadersplaneDistance",(function(){return FU})),n.d(t,"_shaderspointAlongRay",(function(){return zU})),n.d(t,"_shadersrayEllipsoidIntersectionInterval",(function(){return kU})),n.d(t,"_shadersraySphereIntersectionInterval",(function(){return UU})),n.d(t,"_shadersreadDepth",(function(){return VU})),n.d(t,"_shadersreadNonPerspective",(function(){return HU})),n.d(t,"_shadersreverseLogDepth",(function(){return GU})),n.d(t,"_shadersround",(function(){return WU})),n.d(t,"_shaderssampleOctahedralProjection",(function(){return qU})),n.d(t,"_shaderssaturation",(function(){return YU})),n.d(t,"_shadersshadowDepthCompare",(function(){return XU})),n.d(t,"_shadersshadowVisibility",(function(){return KU})),n.d(t,"_shaderssignNotZero",(function(){return $U})),n.d(t,"_shaderssphericalHarmonics",(function(){return JU})),n.d(t,"_shaderssrgbToLinear",(function(){return QU})),n.d(t,"_shaderstangentToEyeSpaceMatrix",(function(){return ZU})),n.d(t,"_shaderstransformPlane",(function(){return eV})),n.d(t,"_shaderstranslateRelativeToEye",(function(){return tV})),n.d(t,"_shaderstranslucentPhong",(function(){return nV})),n.d(t,"_shaderstranspose",(function(){return iV})),n.d(t,"_shadersunpackDepth",(function(){return oV})),n.d(t,"_shadersunpackFloat",(function(){return rV})),n.d(t,"_shadersunpackUint",(function(){return aV})),n.d(t,"_shadersvalueTransform",(function(){return sV})),n.d(t,"_shadersvertexLogDepth",(function(){return cV})),n.d(t,"_shaderswindowToEyeCoordinates",(function(){return lV})),n.d(t,"_shaderswriteDepthClamp",(function(){return uV})),n.d(t,"_shaderswriteLogDepth",(function(){return hV})),n.d(t,"_shaderswriteNonPerspective",(function(){return dV})),n.d(t,"_shadersdepthRangeStruct",(function(){return Ik})),n.d(t,"_shadersmaterial",(function(){return Dk})),n.d(t,"_shadersmaterialInput",(function(){return Pk})),n.d(t,"_shadersmodelMaterial",(function(){return jk})),n.d(t,"_shadersmodelVertexOutput",(function(){return Rk})),n.d(t,"_shaderspbrParameters",(function(){return Lk})),n.d(t,"_shadersray",(function(){return Mk})),n.d(t,"_shadersraySegment",(function(){return Nk})),n.d(t,"_shadersshadowParameters",(function(){return Bk})),n.d(t,"createTaskProcessorWorker",(function(){return act}));var i=n("d4da"),o=n("535a"),r=n("2f63"),a=n("4f04"),s=n("93da");function c(e,t,n){this.x=Object(o["a"])(e,0),this.y=Object(o["a"])(t,0),this.z=Object(o["a"])(n,0)}c.fromSpherical=function(e,t){i["a"].typeOf.object("spherical",e),Object(r["a"])(t)||(t=new c);const n=e.clock,a=e.cone,s=Object(o["a"])(e.magnitude,1),l=s*Math.sin(a);return t.x=l*Math.cos(n),t.y=l*Math.sin(n),t.z=s*Math.cos(a),t},c.fromElements=function(e,t,n,i){return Object(r["a"])(i)?(i.x=e,i.y=t,i.z=n,i):new c(e,t,n)},c.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new c(e.x,e.y,e.z)},c.fromCartesian4=c.clone,c.packedLength=3,c.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t},c.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new c),n.x=e[t++],n.y=e[t++],n.z=e[t],n},c.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=3*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 3 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)c.pack(e[i],t,3*i);return t},c.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!==0)throw new a["a"]("array length must be a multiple of 3.");const n=e.length;Object(r["a"])(t)?t.length=n/3:t=new Array(n/3);for(let i=0;i<n;i+=3){const n=i/3;t[n]=c.unpack(e,i,t[n])}return t},c.fromArray=c.unpack,c.maximumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},c.minimumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},c.minimumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},c.maximumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},c.clamp=function(e,t,n,o){i["a"].typeOf.object("value",e),i["a"].typeOf.object("min",t),i["a"].typeOf.object("max",n),i["a"].typeOf.object("result",o);const r=s["a"].clamp(e.x,t.x,n.x),a=s["a"].clamp(e.y,t.y,n.y),c=s["a"].clamp(e.z,t.z,n.z);return o.x=r,o.y=a,o.z=c,o},c.magnitudeSquared=function(e){return i["a"].typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},c.magnitude=function(e){return Math.sqrt(c.magnitudeSquared(e))};const l=new c;c.distance=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),c.subtract(e,t,l),c.magnitude(l)},c.distanceSquared=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),c.subtract(e,t,l),c.magnitudeSquared(l)},c.normalize=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=c.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new a["a"]("normalized result is not a number");return t},c.dot=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},c.multiplyComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},c.divideComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},c.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},c.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},c.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},c.divideByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},c.negate=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},c.abs=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};const u=new c;c.lerp=function(e,t,n,o){return i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o),c.multiplyByScalar(t,n,u),o=c.multiplyByScalar(e,1-n,o),c.add(u,o,o)};const h=new c,d=new c;c.angleBetween=function(e,t){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),c.normalize(e,h),c.normalize(t,d);const n=c.dot(h,d),o=c.magnitude(c.cross(h,d,h));return Math.atan2(o,n)};const f=new c;c.mostOrthogonalAxis=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=c.normalize(e,f);return c.abs(n,n),t=n.x<=n.y?n.x<=n.z?c.clone(c.UNIT_X,t):c.clone(c.UNIT_Z,t):n.y<=n.z?c.clone(c.UNIT_Y,t):c.clone(c.UNIT_Z,t),t},c.projectVector=function(e,t,n){i["a"].defined("a",e),i["a"].defined("b",t),i["a"].defined("result",n);const o=c.dot(e,t)/c.dot(t,t);return c.multiplyByScalar(t,o,n)},c.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},c.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]},c.equalsEpsilon=function(e,t,n,i){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&s["a"].equalsEpsilon(e.x,t.x,n,i)&&s["a"].equalsEpsilon(e.y,t.y,n,i)&&s["a"].equalsEpsilon(e.z,t.z,n,i)},c.cross=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e.x,r=e.y,a=e.z,s=t.x,c=t.y,l=t.z,u=r*l-a*c,h=a*s-o*l,d=o*c-r*s;return n.x=u,n.y=h,n.z=d,n},c.midpoint=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n},c.fromDegrees=function(e,t,n,o,r){return i["a"].typeOf.number("longitude",e),i["a"].typeOf.number("latitude",t),e=s["a"].toRadians(e),t=s["a"].toRadians(t),c.fromRadians(e,t,n,o,r)};let p=new c,m=new c;const _=new c(40680631590769,40680631590769,40408299984661.445);c.fromRadians=function(e,t,n,a,s){i["a"].typeOf.number("longitude",e),i["a"].typeOf.number("latitude",t),n=Object(o["a"])(n,0);const l=Object(r["a"])(a)?a.radiiSquared:_,u=Math.cos(t);p.x=u*Math.cos(e),p.y=u*Math.sin(e),p.z=Math.sin(t),p=c.normalize(p,p),c.multiplyComponents(l,p,m);const h=Math.sqrt(c.dot(p,m));return m=c.divideByScalar(m,h,m),p=c.multiplyByScalar(p,n,p),Object(r["a"])(s)||(s=new c),c.add(m,p,s)},c.fromDegreesArray=function(e,t,n){if(i["a"].defined("coordinates",e),e.length<2||e.length%2!==0)throw new a["a"]("the number of coordinates must be a multiple of 2 and at least 2");const o=e.length;Object(r["a"])(n)?n.length=o/2:n=new Array(o/2);for(let i=0;i<o;i+=2){const o=e[i],r=e[i+1],a=i/2;n[a]=c.fromDegrees(o,r,0,t,n[a])}return n},c.fromRadiansArray=function(e,t,n){if(i["a"].defined("coordinates",e),e.length<2||e.length%2!==0)throw new a["a"]("the number of coordinates must be a multiple of 2 and at least 2");const o=e.length;Object(r["a"])(n)?n.length=o/2:n=new Array(o/2);for(let i=0;i<o;i+=2){const o=e[i],r=e[i+1],a=i/2;n[a]=c.fromRadians(o,r,0,t,n[a])}return n},c.fromDegreesArrayHeights=function(e,t,n){if(i["a"].defined("coordinates",e),e.length<3||e.length%3!==0)throw new a["a"]("the number of coordinates must be a multiple of 3 and at least 3");const o=e.length;Object(r["a"])(n)?n.length=o/3:n=new Array(o/3);for(let i=0;i<o;i+=3){const o=e[i],r=e[i+1],a=e[i+2],s=i/3;n[s]=c.fromDegrees(o,r,a,t,n[s])}return n},c.fromRadiansArrayHeights=function(e,t,n){if(i["a"].defined("coordinates",e),e.length<3||e.length%3!==0)throw new a["a"]("the number of coordinates must be a multiple of 3 and at least 3");const o=e.length;Object(r["a"])(n)?n.length=o/3:n=new Array(o/3);for(let i=0;i<o;i+=3){const o=e[i],r=e[i+1],a=e[i+2],s=i/3;n[s]=c.fromRadians(o,r,a,t,n[s])}return n},c.ZERO=Object.freeze(new c(0,0,0)),c.ONE=Object.freeze(new c(1,1,1)),c.UNIT_X=Object.freeze(new c(1,0,0)),c.UNIT_Y=Object.freeze(new c(0,1,0)),c.UNIT_Z=Object.freeze(new c(0,0,1)),c.prototype.clone=function(e){return c.clone(this,e)},c.prototype.equals=function(e){return c.equals(this,e)},c.prototype.equalsEpsilon=function(e,t,n){return c.equalsEpsilon(this,e,t,n)},c.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var g=c;const b=new g,y=new g;function v(e,t,n,i,o){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");if(!Object(r["a"])(t))throw new a["a"]("oneOverRadii is required.");if(!Object(r["a"])(n))throw new a["a"]("oneOverRadiiSquared is required.");if(!Object(r["a"])(i))throw new a["a"]("centerToleranceSquared is required.");const c=e.x,l=e.y,u=e.z,h=t.x,d=t.y,f=t.z,p=c*c*h*h,m=l*l*d*d,_=u*u*f*f,v=p+m+_,O=Math.sqrt(1/v),A=g.multiplyByScalar(e,O,b);if(v<i)return isFinite(O)?g.clone(A,o):void 0;const w=n.x,T=n.y,C=n.z,E=y;E.x=A.x*w*2,E.y=A.y*T*2,E.z=A.z*C*2;let x,S,I,D,P,j,R,L,M,N,B,F=(1-O)*g.magnitude(e)/(.5*g.magnitude(E)),z=0;do{F-=z,I=1/(1+F*w),D=1/(1+F*T),P=1/(1+F*C),j=I*I,R=D*D,L=P*P,M=j*I,N=R*D,B=L*P,x=p*j+m*R+_*L-1,S=p*M*w+m*N*T+_*B*C;const e=-2*S;z=x/e}while(Math.abs(x)>s["a"].EPSILON12);return Object(r["a"])(o)?(o.x=c*I,o.y=l*D,o.z=u*P,o):new g(c*I,l*D,u*P)}var O=v;function A(e,t,n){this.longitude=Object(o["a"])(e,0),this.latitude=Object(o["a"])(t,0),this.height=Object(o["a"])(n,0)}A.fromRadians=function(e,t,n,a){return i["a"].typeOf.number("longitude",e),i["a"].typeOf.number("latitude",t),n=Object(o["a"])(n,0),Object(r["a"])(a)?(a.longitude=e,a.latitude=t,a.height=n,a):new A(e,t,n)},A.fromDegrees=function(e,t,n,o){return i["a"].typeOf.number("longitude",e),i["a"].typeOf.number("latitude",t),e=s["a"].toRadians(e),t=s["a"].toRadians(t),A.fromRadians(e,t,n,o)};const w=new g,T=new g,C=new g,E=new g(1/6378137,1/6378137,1/6356752.314245179),x=new g(1/40680631590769,1/40680631590769,1/40408299984661.445),S=s["a"].EPSILON1;A.fromCartesian=function(e,t,n){const i=Object(r["a"])(t)?t.oneOverRadii:E,o=Object(r["a"])(t)?t.oneOverRadiiSquared:x,a=Object(r["a"])(t)?t._centerToleranceSquared:S,c=O(e,i,o,a,T);if(!Object(r["a"])(c))return;let l=g.multiplyComponents(c,o,w);l=g.normalize(l,l);const u=g.subtract(e,c,C),h=Math.atan2(l.y,l.x),d=Math.asin(l.z),f=s["a"].sign(g.dot(u,e))*g.magnitude(u);return Object(r["a"])(n)?(n.longitude=h,n.latitude=d,n.height=f,n):new A(h,d,f)},A.toCartesian=function(e,t,n){return i["a"].defined("cartographic",e),g.fromRadians(e.longitude,e.latitude,e.height,t,n)},A.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new A(e.longitude,e.latitude,e.height)},A.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},A.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n},A.ZERO=Object.freeze(new A(0,0,0)),A.prototype.clone=function(e){return A.clone(this,e)},A.prototype.equals=function(e){return A.equals(this,e)},A.prototype.equalsEpsilon=function(e,t){return A.equalsEpsilon(this,e,t)},A.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var I=A;function D(e,t,n,r){t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),r=Object(o["a"])(r,0),i["a"].typeOf.number.greaterThanOrEquals("x",t,0),i["a"].typeOf.number.greaterThanOrEquals("y",n,0),i["a"].typeOf.number.greaterThanOrEquals("z",r,0),e._radii=new g(t,n,r),e._radiiSquared=new g(t*t,n*n,r*r),e._radiiToTheFourth=new g(t*t*t*t,n*n*n*n,r*r*r*r),e._oneOverRadii=new g(0===t?0:1/t,0===n?0:1/n,0===r?0:1/r),e._oneOverRadiiSquared=new g(0===t?0:1/(t*t),0===n?0:1/(n*n),0===r?0:1/(r*r)),e._minimumRadius=Math.min(t,n,r),e._maximumRadius=Math.max(t,n,r),e._centerToleranceSquared=s["a"].EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function P(e,t,n){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,D(this,e,t,n)}Object.defineProperties(P.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),P.clone=function(e,t){if(!Object(r["a"])(e))return;const n=e._radii;return Object(r["a"])(t)?(g.clone(n,t._radii),g.clone(e._radiiSquared,t._radiiSquared),g.clone(e._radiiToTheFourth,t._radiiToTheFourth),g.clone(e._oneOverRadii,t._oneOverRadii),g.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new P(n.x,n.y,n.z)},P.fromCartesian3=function(e,t){return Object(r["a"])(t)||(t=new P),Object(r["a"])(e)?(D(t,e.x,e.y,e.z),t):t},P.WGS84=Object.freeze(new P(6378137,6378137,6356752.314245179)),P.UNIT_SPHERE=Object.freeze(new P(1,1,1)),P.MOON=Object.freeze(new P(s["a"].LUNAR_RADIUS,s["a"].LUNAR_RADIUS,s["a"].LUNAR_RADIUS)),P.prototype.clone=function(e){return P.clone(this,e)},P.packedLength=g.packedLength,P.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),g.pack(e._radii,t,n),t},P.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const r=g.unpack(e,t);return P.fromCartesian3(r,n)},P.prototype.geocentricSurfaceNormal=g.normalize,P.prototype.geodeticSurfaceNormalCartographic=function(e,t){i["a"].typeOf.object("cartographic",e);const n=e.longitude,o=e.latitude,a=Math.cos(o),s=a*Math.cos(n),c=a*Math.sin(n),l=Math.sin(o);return Object(r["a"])(t)||(t=new g),t.x=s,t.y=c,t.z=l,g.normalize(t,t)},P.prototype.geodeticSurfaceNormal=function(e,t){if(!g.equalsEpsilon(e,g.ZERO,s["a"].EPSILON14))return Object(r["a"])(t)||(t=new g),t=g.multiplyComponents(e,this._oneOverRadiiSquared,t),g.normalize(t,t)};const j=new g,R=new g;P.prototype.cartographicToCartesian=function(e,t){const n=j,i=R;this.geodeticSurfaceNormalCartographic(e,n),g.multiplyComponents(this._radiiSquared,n,i);const o=Math.sqrt(g.dot(n,i));return g.divideByScalar(i,o,i),g.multiplyByScalar(n,e.height,n),Object(r["a"])(t)||(t=new g),g.add(i,n,t)},P.prototype.cartographicArrayToCartesianArray=function(e,t){i["a"].defined("cartographics",e);const n=e.length;Object(r["a"])(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=this.cartographicToCartesian(e[i],t[i]);return t};const L=new g,M=new g,N=new g;P.prototype.cartesianToCartographic=function(e,t){const n=this.scaleToGeodeticSurface(e,M);if(!Object(r["a"])(n))return;const i=this.geodeticSurfaceNormal(n,L),o=g.subtract(e,n,N),a=Math.atan2(i.y,i.x),c=Math.asin(i.z),l=s["a"].sign(g.dot(o,e))*g.magnitude(o);return Object(r["a"])(t)?(t.longitude=a,t.latitude=c,t.height=l,t):new I(a,c,l)},P.prototype.cartesianArrayToCartographicArray=function(e,t){i["a"].defined("cartesians",e);const n=e.length;Object(r["a"])(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.cartesianToCartographic(e[i],t[i]);return t},P.prototype.scaleToGeodeticSurface=function(e,t){return O(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},P.prototype.scaleToGeocentricSurface=function(e,t){i["a"].typeOf.object("cartesian",e),Object(r["a"])(t)||(t=new g);const n=e.x,o=e.y,a=e.z,s=this._oneOverRadiiSquared,c=1/Math.sqrt(n*n*s.x+o*o*s.y+a*a*s.z);return g.multiplyByScalar(e,c,t)},P.prototype.transformPositionToScaledSpace=function(e,t){return Object(r["a"])(t)||(t=new g),g.multiplyComponents(e,this._oneOverRadii,t)},P.prototype.transformPositionFromScaledSpace=function(e,t){return Object(r["a"])(t)||(t=new g),g.multiplyComponents(e,this._radii,t)},P.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&g.equals(this._radii,e._radii)},P.prototype.toString=function(){return this._radii.toString()},P.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,n){if(i["a"].typeOf.object("position",e),!s["a"].equalsEpsilon(this._radii.x,this._radii.y,s["a"].EPSILON15))throw new a["a"]("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");i["a"].typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),t=Object(o["a"])(t,0);const c=this._squaredXOverSquaredZ;if(Object(r["a"])(n)||(n=new g),n.x=0,n.y=0,n.z=e.z*(1-c),!(Math.abs(n.z)>=this._radii.z-t))return n};const B=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],F=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function z(e,t,n){i["a"].typeOf.number("a",e),i["a"].typeOf.number("b",t),i["a"].typeOf.func("func",n);const o=.5*(t+e),r=.5*(t-e);let a=0;for(let i=0;i<5;i++){const e=r*B[i];a+=F[i]*(n(o+e)+n(o-e))}return a*=r,a}P.prototype.surfaceArea=function(e){i["a"].typeOf.object("rectangle",e);const t=e.west;let n=e.east;const o=e.south,r=e.north;while(n<t)n+=s["a"].TWO_PI;const a=this._radiiSquared,c=a.x,l=a.y,u=a.z,h=c*l;return z(o,r,(function(e){const i=Math.cos(e),o=Math.sin(e);return Math.cos(e)*z(t,n,(function(e){const t=Math.cos(e),n=Math.sin(e);return Math.sqrt(h*o*o+u*(l*t*t+c*n*n)*i*i)}))}))};var k=P;function U(e){this._ellipsoid=Object(o["a"])(e,k.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(U.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),U.prototype.project=function(e,t){const n=this._semimajorAxis,i=e.longitude*n,o=e.latitude*n,a=e.height;return Object(r["a"])(t)?(t.x=i,t.y=o,t.z=a,t):new g(i,o,a)},U.prototype.unproject=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required");const n=this._oneOverSemimajorAxis,i=e.x*n,o=e.y*n,s=e.z;return Object(r["a"])(t)?(t.longitude=i,t.latitude=o,t.height=s,t):new I(i,o,s)};var V=U;const H={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};var G=Object.freeze(H);function W(e,t){this.start=Object(o["a"])(e,0),this.stop=Object(o["a"])(t,0)}var q=W;function Y(e,t,n,i,r,a,s,c,l){this[0]=Object(o["a"])(e,0),this[1]=Object(o["a"])(i,0),this[2]=Object(o["a"])(s,0),this[3]=Object(o["a"])(t,0),this[4]=Object(o["a"])(r,0),this[5]=Object(o["a"])(c,0),this[6]=Object(o["a"])(n,0),this[7]=Object(o["a"])(a,0),this[8]=Object(o["a"])(l,0)}Y.packedLength=9,Y.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t},Y.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Y),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n},Y.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=9*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 9 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)Y.pack(e[i],t,9*i);return t},Y.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,9),e.length%9!==0)throw new a["a"]("array length must be a multiple of 9.");const n=e.length;Object(r["a"])(t)?t.length=n/9:t=new Array(n/9);for(let i=0;i<n;i+=9){const n=i/9;t[n]=Y.unpack(e,i,t[n])}return t},Y.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new Y(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},Y.fromArray=Y.unpack,Y.fromColumnMajorArray=function(e,t){return i["a"].defined("values",e),Y.clone(e,t)},Y.fromRowMajorArray=function(e,t){return i["a"].defined("values",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new Y(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Y.fromQuaternion=function(e,t){i["a"].typeOf.object("quaternion",e);const n=e.x*e.x,o=e.x*e.y,a=e.x*e.z,s=e.x*e.w,c=e.y*e.y,l=e.y*e.z,u=e.y*e.w,h=e.z*e.z,d=e.z*e.w,f=e.w*e.w,p=n-c-h+f,m=2*(o-d),_=2*(a+u),g=2*(o+d),b=-n+c-h+f,y=2*(l-s),v=2*(a-u),O=2*(l+s),A=-n-c+h+f;return Object(r["a"])(t)?(t[0]=p,t[1]=g,t[2]=v,t[3]=m,t[4]=b,t[5]=O,t[6]=_,t[7]=y,t[8]=A,t):new Y(p,m,_,g,b,y,v,O,A)},Y.fromHeadingPitchRoll=function(e,t){i["a"].typeOf.object("headingPitchRoll",e);const n=Math.cos(-e.pitch),o=Math.cos(-e.heading),a=Math.cos(e.roll),s=Math.sin(-e.pitch),c=Math.sin(-e.heading),l=Math.sin(e.roll),u=n*o,h=-a*c+l*s*o,d=l*c+a*s*o,f=n*c,p=a*o+l*s*c,m=-l*o+a*s*c,_=-s,g=l*n,b=a*n;return Object(r["a"])(t)?(t[0]=u,t[1]=f,t[2]=_,t[3]=h,t[4]=p,t[5]=g,t[6]=d,t[7]=m,t[8]=b,t):new Y(u,h,d,f,p,m,_,g,b)},Y.fromScale=function(e,t){return i["a"].typeOf.object("scale",e),Object(r["a"])(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new Y(e.x,0,0,0,e.y,0,0,0,e.z)},Y.fromUniformScale=function(e,t){return i["a"].typeOf.number("scale",e),Object(r["a"])(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new Y(e,0,0,0,e,0,0,0,e)},Y.fromCrossProduct=function(e,t){return i["a"].typeOf.object("vector",e),Object(r["a"])(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new Y(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},Y.fromRotationX=function(e,t){i["a"].typeOf.number("angle",e);const n=Math.cos(e),o=Math.sin(e);return Object(r["a"])(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=n,t[5]=o,t[6]=0,t[7]=-o,t[8]=n,t):new Y(1,0,0,0,n,-o,0,o,n)},Y.fromRotationY=function(e,t){i["a"].typeOf.number("angle",e);const n=Math.cos(e),o=Math.sin(e);return Object(r["a"])(t)?(t[0]=n,t[1]=0,t[2]=-o,t[3]=0,t[4]=1,t[5]=0,t[6]=o,t[7]=0,t[8]=n,t):new Y(n,0,o,0,1,0,-o,0,n)},Y.fromRotationZ=function(e,t){i["a"].typeOf.number("angle",e);const n=Math.cos(e),o=Math.sin(e);return Object(r["a"])(t)?(t[0]=n,t[1]=o,t[2]=0,t[3]=-o,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new Y(n,-o,0,o,n,0,0,0,1)},Y.toArray=function(e,t){return i["a"].typeOf.object("matrix",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},Y.getElementIndex=function(e,t){return i["a"].typeOf.number.greaterThanOrEquals("row",t,0),i["a"].typeOf.number.lessThanOrEquals("row",t,2),i["a"].typeOf.number.greaterThanOrEquals("column",e,0),i["a"].typeOf.number.lessThanOrEquals("column",e,2),3*e+t},Y.getColumn=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,2),i["a"].typeOf.object("result",n);const o=3*t,r=e[o],a=e[o+1],s=e[o+2];return n.x=r,n.y=a,n.z=s,n},Y.setColumn=function(e,t,n,o){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,2),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=Y.clone(e,o);const r=3*t;return o[r]=n.x,o[r+1]=n.y,o[r+2]=n.z,o},Y.getRow=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,2),i["a"].typeOf.object("result",n);const o=e[t],r=e[t+3],a=e[t+6];return n.x=o,n.y=r,n.z=a,n},Y.setRow=function(e,t,n,o){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,2),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=Y.clone(e,o),o[t]=n.x,o[t+3]=n.y,o[t+6]=n.z,o};const X=new g;Y.setScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n);const o=Y.getScale(e,X),r=t.x/o.x,a=t.y/o.y,s=t.z/o.z;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*a,n[4]=e[4]*a,n[5]=e[5]*a,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*s,n};const K=new g;Y.setUniformScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n);const o=Y.getScale(e,K),r=t/o.x,a=t/o.y,s=t/o.z;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*a,n[4]=e[4]*a,n[5]=e[5]*a,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*s,n};const $=new g;Y.getScale=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t.x=g.magnitude(g.fromElements(e[0],e[1],e[2],$)),t.y=g.magnitude(g.fromElements(e[3],e[4],e[5],$)),t.z=g.magnitude(g.fromElements(e[6],e[7],e[8],$)),t};const J=new g;Y.getMaximumScale=function(e){return Y.getScale(e,J),g.maximumComponent(J)};const Q=new g;Y.setRotation=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",n);const o=Y.getScale(e,Q);return n[0]=t[0]*o.x,n[1]=t[1]*o.x,n[2]=t[2]*o.x,n[3]=t[3]*o.y,n[4]=t[4]*o.y,n[5]=t[5]*o.y,n[6]=t[6]*o.z,n[7]=t[7]*o.z,n[8]=t[8]*o.z,n};const Z=new g;function ee(e){let t=0;for(let n=0;n<9;++n){const i=e[n];t+=i*i}return Math.sqrt(t)}Y.getRotation=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=Y.getScale(e,Z);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[3]/n.y,t[4]=e[4]/n.y,t[5]=e[5]/n.y,t[6]=e[6]/n.z,t[7]=e[7]/n.z,t[8]=e[8]/n.z,t},Y.multiply=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],r=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],a=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],s=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],c=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],l=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],u=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],h=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return n[0]=o,n[1]=r,n[2]=a,n[3]=s,n[4]=c,n[5]=l,n[6]=u,n[7]=h,n[8]=d,n},Y.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n},Y.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n},Y.multiplyByVector=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("cartesian",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z,s=e[0]*o+e[3]*r+e[6]*a,c=e[1]*o+e[4]*r+e[7]*a,l=e[2]*o+e[5]*r+e[8]*a;return n.x=s,n.y=c,n.z=l,n},Y.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},Y.multiplyByScale=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.x,n[3]=e[3]*t.y,n[4]=e[4]*t.y,n[5]=e[5]*t.y,n[6]=e[6]*t.z,n[7]=e[7]*t.z,n[8]=e[8]*t.z,n},Y.multiplyByUniformScale=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n},Y.negate=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},Y.transpose=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[0],o=e[3],r=e[6],a=e[1],s=e[4],c=e[7],l=e[2],u=e[5],h=e[8];return t[0]=n,t[1]=o,t[2]=r,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t};const te=[1,0,0],ne=[2,2,1];function ie(e){let t=0;for(let n=0;n<3;++n){const i=e[Y.getElementIndex(ne[n],te[n])];t+=2*i*i}return Math.sqrt(t)}function oe(e,t){const n=s["a"].EPSILON15;let i=0,o=1;for(let s=0;s<3;++s){const t=Math.abs(e[Y.getElementIndex(ne[s],te[s])]);t>i&&(o=s,i=t)}let r=1,a=0;const c=te[o],l=ne[o];if(Math.abs(e[Y.getElementIndex(l,c)])>n){const t=e[Y.getElementIndex(l,l)],n=e[Y.getElementIndex(c,c)],i=e[Y.getElementIndex(l,c)],o=(t-n)/2/i;let s;s=o<0?-1/(-o+Math.sqrt(1+o*o)):1/(o+Math.sqrt(1+o*o)),r=1/Math.sqrt(1+s*s),a=s*r}return t=Y.clone(Y.IDENTITY,t),t[Y.getElementIndex(c,c)]=t[Y.getElementIndex(l,l)]=r,t[Y.getElementIndex(l,c)]=a,t[Y.getElementIndex(c,l)]=-a,t}const re=new Y,ae=new Y;Y.computeEigenDecomposition=function(e,t){i["a"].typeOf.object("matrix",e);const n=s["a"].EPSILON20,o=10;let a=0,c=0;Object(r["a"])(t)||(t={});const l=t.unitary=Y.clone(Y.IDENTITY,t.unitary),u=t.diagonal=Y.clone(e,t.diagonal),h=n*ee(u);while(c<o&&ie(u)>h)oe(u,re),Y.transpose(re,ae),Y.multiply(u,re,u),Y.multiply(ae,u,u),Y.multiply(l,re,l),++a>2&&(++c,a=0);return t},Y.abs=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},Y.determinant=function(e){i["a"].typeOf.object("matrix",e);const t=e[0],n=e[3],o=e[6],r=e[1],a=e[4],s=e[7],c=e[2],l=e[5],u=e[8];return t*(a*u-l*s)+r*(l*o-n*u)+c*(n*s-a*o)},Y.inverse=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[0],o=e[1],r=e[2],c=e[3],l=e[4],u=e[5],h=e[6],d=e[7],f=e[8],p=Y.determinant(e);if(Math.abs(p)<=s["a"].EPSILON15)throw new a["a"]("matrix is not invertible");t[0]=l*f-d*u,t[1]=d*r-o*f,t[2]=o*u-l*r,t[3]=h*u-c*f,t[4]=n*f-h*r,t[5]=c*r-n*u,t[6]=c*d-h*l,t[7]=h*o-n*d,t[8]=n*l-c*o;const m=1/p;return Y.multiplyByScalar(t,m,t)};const se=new Y;Y.inverseTranspose=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),Y.inverse(Y.transpose(e,se),t)},Y.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},Y.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n},Y.IDENTITY=Object.freeze(new Y(1,0,0,0,1,0,0,0,1)),Y.ZERO=Object.freeze(new Y(0,0,0,0,0,0,0,0,0)),Y.COLUMN0ROW0=0,Y.COLUMN0ROW1=1,Y.COLUMN0ROW2=2,Y.COLUMN1ROW0=3,Y.COLUMN1ROW1=4,Y.COLUMN1ROW2=5,Y.COLUMN2ROW0=6,Y.COLUMN2ROW1=7,Y.COLUMN2ROW2=8,Object.defineProperties(Y.prototype,{length:{get:function(){return Y.packedLength}}}),Y.prototype.clone=function(e){return Y.clone(this,e)},Y.prototype.equals=function(e){return Y.equals(this,e)},Y.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]},Y.prototype.equalsEpsilon=function(e,t){return Y.equalsEpsilon(this,e,t)},Y.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})\n`+`(${this[1]}, ${this[4]}, ${this[7]})\n`+`(${this[2]}, ${this[5]}, ${this[8]})`};var ce=Y;function le(e,t,n,i){this.x=Object(o["a"])(e,0),this.y=Object(o["a"])(t,0),this.z=Object(o["a"])(n,0),this.w=Object(o["a"])(i,0)}le.fromElements=function(e,t,n,i,o){return Object(r["a"])(o)?(o.x=e,o.y=t,o.z=n,o.w=i,o):new le(e,t,n,i)},le.fromColor=function(e,t){return i["a"].typeOf.object("color",e),Object(r["a"])(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new le(e.red,e.green,e.blue,e.alpha)},le.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new le(e.x,e.y,e.z,e.w)},le.packedLength=4,le.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},le.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new le),n.x=e[t++],n.y=e[t++],n.z=e[t++],n.w=e[t],n},le.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=4*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)le.pack(e[i],t,4*i);return t},le.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!==0)throw new a["a"]("array length must be a multiple of 4.");const n=e.length;Object(r["a"])(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){const n=i/4;t[n]=le.unpack(e,i,t[n])}return t},le.fromArray=le.unpack,le.maximumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},le.minimumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},le.minimumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n.w=Math.min(e.w,t.w),n},le.maximumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n.w=Math.max(e.w,t.w),n},le.clamp=function(e,t,n,o){i["a"].typeOf.object("value",e),i["a"].typeOf.object("min",t),i["a"].typeOf.object("max",n),i["a"].typeOf.object("result",o);const r=s["a"].clamp(e.x,t.x,n.x),a=s["a"].clamp(e.y,t.y,n.y),c=s["a"].clamp(e.z,t.z,n.z),l=s["a"].clamp(e.w,t.w,n.w);return o.x=r,o.y=a,o.z=c,o.w=l,o},le.magnitudeSquared=function(e){return i["a"].typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},le.magnitude=function(e){return Math.sqrt(le.magnitudeSquared(e))};const ue=new le;le.distance=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),le.subtract(e,t,ue),le.magnitude(ue)},le.distanceSquared=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),le.subtract(e,t,ue),le.magnitudeSquared(ue)},le.normalize=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=le.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new a["a"]("normalized result is not a number");return t},le.dot=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},le.multiplyComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n.w=e.w*t.w,n},le.divideComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n.w=e.w/t.w,n},le.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},le.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},le.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},le.divideByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},le.negate=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},le.abs=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};const he=new le;le.lerp=function(e,t,n,o){return i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o),le.multiplyByScalar(t,n,he),o=le.multiplyByScalar(e,1-n,o),le.add(he,o,o)};const de=new le;le.mostOrthogonalAxis=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=le.normalize(e,de);return le.abs(n,n),t=n.x<=n.y?n.x<=n.z?n.x<=n.w?le.clone(le.UNIT_X,t):le.clone(le.UNIT_W,t):n.z<=n.w?le.clone(le.UNIT_Z,t):le.clone(le.UNIT_W,t):n.y<=n.z?n.y<=n.w?le.clone(le.UNIT_Y,t):le.clone(le.UNIT_W,t):n.z<=n.w?le.clone(le.UNIT_Z,t):le.clone(le.UNIT_W,t),t},le.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},le.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]&&e.w===t[n+3]},le.equalsEpsilon=function(e,t,n,i){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&s["a"].equalsEpsilon(e.x,t.x,n,i)&&s["a"].equalsEpsilon(e.y,t.y,n,i)&&s["a"].equalsEpsilon(e.z,t.z,n,i)&&s["a"].equalsEpsilon(e.w,t.w,n,i)},le.ZERO=Object.freeze(new le(0,0,0,0)),le.ONE=Object.freeze(new le(1,1,1,1)),le.UNIT_X=Object.freeze(new le(1,0,0,0)),le.UNIT_Y=Object.freeze(new le(0,1,0,0)),le.UNIT_Z=Object.freeze(new le(0,0,1,0)),le.UNIT_W=Object.freeze(new le(0,0,0,1)),le.prototype.clone=function(e){return le.clone(this,e)},le.prototype.equals=function(e){return le.equals(this,e)},le.prototype.equalsEpsilon=function(e,t,n){return le.equalsEpsilon(this,e,t,n)},le.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};const fe=new Float32Array(1),pe=new Uint8Array(fe.buffer),me=new Uint32Array([287454020]),_e=new Uint8Array(me.buffer),ge=68===_e[0];le.packFloat=function(e,t){return i["a"].typeOf.number("value",e),Object(r["a"])(t)||(t=new le),fe[0]=e,ge?(t.x=pe[0],t.y=pe[1],t.z=pe[2],t.w=pe[3]):(t.x=pe[3],t.y=pe[2],t.z=pe[1],t.w=pe[0]),t},le.unpackFloat=function(e){return i["a"].typeOf.object("packedFloat",e),ge?(pe[0]=e.x,pe[1]=e.y,pe[2]=e.z,pe[3]=e.w):(pe[0]=e.w,pe[1]=e.z,pe[2]=e.y,pe[3]=e.x),fe[0]};var be=le,ye=n("283e");function ve(e,t,n,i,r,a,s,c,l,u,h,d,f,p,m,_){this[0]=Object(o["a"])(e,0),this[1]=Object(o["a"])(r,0),this[2]=Object(o["a"])(l,0),this[3]=Object(o["a"])(f,0),this[4]=Object(o["a"])(t,0),this[5]=Object(o["a"])(a,0),this[6]=Object(o["a"])(u,0),this[7]=Object(o["a"])(p,0),this[8]=Object(o["a"])(n,0),this[9]=Object(o["a"])(s,0),this[10]=Object(o["a"])(h,0),this[11]=Object(o["a"])(m,0),this[12]=Object(o["a"])(i,0),this[13]=Object(o["a"])(c,0),this[14]=Object(o["a"])(d,0),this[15]=Object(o["a"])(_,0)}ve.packedLength=16,ve.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t[n++]=e[4],t[n++]=e[5],t[n++]=e[6],t[n++]=e[7],t[n++]=e[8],t[n++]=e[9],t[n++]=e[10],t[n++]=e[11],t[n++]=e[12],t[n++]=e[13],t[n++]=e[14],t[n]=e[15],t},ve.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new ve),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n[4]=e[t++],n[5]=e[t++],n[6]=e[t++],n[7]=e[t++],n[8]=e[t++],n[9]=e[t++],n[10]=e[t++],n[11]=e[t++],n[12]=e[t++],n[13]=e[t++],n[14]=e[t++],n[15]=e[t],n},ve.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=16*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 16 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)ve.pack(e[i],t,16*i);return t},ve.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,16),e.length%16!==0)throw new a["a"]("array length must be a multiple of 16.");const n=e.length;Object(r["a"])(t)?t.length=n/16:t=new Array(n/16);for(let i=0;i<n;i+=16){const n=i/16;t[n]=ve.unpack(e,i,t[n])}return t},ve.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new ve(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},ve.fromArray=ve.unpack,ve.fromColumnMajorArray=function(e,t){return i["a"].defined("values",e),ve.clone(e,t)},ve.fromRowMajorArray=function(e,t){return i["a"].defined("values",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new ve(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},ve.fromRotationTranslation=function(e,t,n){return i["a"].typeOf.object("rotation",e),t=Object(o["a"])(t,g.ZERO),Object(r["a"])(n)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=0,n[4]=e[3],n[5]=e[4],n[6]=e[5],n[7]=0,n[8]=e[6],n[9]=e[7],n[10]=e[8],n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,n):new ve(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},ve.fromTranslationQuaternionRotationScale=function(e,t,n,o){i["a"].typeOf.object("translation",e),i["a"].typeOf.object("rotation",t),i["a"].typeOf.object("scale",n),Object(r["a"])(o)||(o=new ve);const a=n.x,s=n.y,c=n.z,l=t.x*t.x,u=t.x*t.y,h=t.x*t.z,d=t.x*t.w,f=t.y*t.y,p=t.y*t.z,m=t.y*t.w,_=t.z*t.z,g=t.z*t.w,b=t.w*t.w,y=l-f-_+b,v=2*(u-g),O=2*(h+m),A=2*(u+g),w=-l+f-_+b,T=2*(p-d),C=2*(h-m),E=2*(p+d),x=-l-f+_+b;return o[0]=y*a,o[1]=A*a,o[2]=C*a,o[3]=0,o[4]=v*s,o[5]=w*s,o[6]=E*s,o[7]=0,o[8]=O*c,o[9]=T*c,o[10]=x*c,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,o},ve.fromTranslationRotationScale=function(e,t){return i["a"].typeOf.object("translationRotationScale",e),ve.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},ve.fromTranslation=function(e,t){return i["a"].typeOf.object("translation",e),ve.fromRotationTranslation(ce.IDENTITY,e,t)},ve.fromScale=function(e,t){return i["a"].typeOf.object("scale",e),Object(r["a"])(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new ve(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},ve.fromUniformScale=function(e,t){return i["a"].typeOf.number("scale",e),Object(r["a"])(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new ve(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)},ve.fromRotation=function(e,t){return i["a"].typeOf.object("rotation",e),Object(r["a"])(t)||(t=new ve),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};const Oe=new g,Ae=new g,we=new g;ve.fromCamera=function(e,t){i["a"].typeOf.object("camera",e);const n=e.position,o=e.direction,a=e.up;i["a"].typeOf.object("camera.position",n),i["a"].typeOf.object("camera.direction",o),i["a"].typeOf.object("camera.up",a),g.normalize(o,Oe),g.normalize(g.cross(Oe,a,Ae),Ae),g.normalize(g.cross(Ae,Oe,we),we);const s=Ae.x,c=Ae.y,l=Ae.z,u=Oe.x,h=Oe.y,d=Oe.z,f=we.x,p=we.y,m=we.z,_=n.x,b=n.y,y=n.z,v=s*-_+c*-b+l*-y,O=f*-_+p*-b+m*-y,A=u*_+h*b+d*y;return Object(r["a"])(t)?(t[0]=s,t[1]=f,t[2]=-u,t[3]=0,t[4]=c,t[5]=p,t[6]=-h,t[7]=0,t[8]=l,t[9]=m,t[10]=-d,t[11]=0,t[12]=v,t[13]=O,t[14]=A,t[15]=1,t):new ve(s,c,l,v,f,p,m,O,-u,-h,-d,A,0,0,0,1)},ve.computePerspectiveFieldOfView=function(e,t,n,o,r){i["a"].typeOf.number.greaterThan("fovY",e,0),i["a"].typeOf.number.lessThan("fovY",e,Math.PI),i["a"].typeOf.number.greaterThan("near",n,0),i["a"].typeOf.number.greaterThan("far",o,0),i["a"].typeOf.object("result",r);const a=Math.tan(.5*e),s=1/a,c=s/t,l=(o+n)/(n-o),u=2*o*n/(n-o);return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=l,r[11]=-1,r[12]=0,r[13]=0,r[14]=u,r[15]=0,r},ve.computeOrthographicOffCenter=function(e,t,n,o,r,a,s){i["a"].typeOf.number("left",e),i["a"].typeOf.number("right",t),i["a"].typeOf.number("bottom",n),i["a"].typeOf.number("top",o),i["a"].typeOf.number("near",r),i["a"].typeOf.number("far",a),i["a"].typeOf.object("result",s);let c=1/(t-e),l=1/(o-n),u=1/(a-r);const h=-(t+e)*c,d=-(o+n)*l,f=-(a+r)*u;return c*=2,l*=2,u*=-2,s[0]=c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=u,s[11]=0,s[12]=h,s[13]=d,s[14]=f,s[15]=1,s},ve.computePerspectiveOffCenter=function(e,t,n,o,r,a,s){i["a"].typeOf.number("left",e),i["a"].typeOf.number("right",t),i["a"].typeOf.number("bottom",n),i["a"].typeOf.number("top",o),i["a"].typeOf.number("near",r),i["a"].typeOf.number("far",a),i["a"].typeOf.object("result",s);const c=2*r/(t-e),l=2*r/(o-n),u=(t+e)/(t-e),h=(o+n)/(o-n),d=-(a+r)/(a-r),f=-1,p=-2*a*r/(a-r);return s[0]=c,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=u,s[9]=h,s[10]=d,s[11]=f,s[12]=0,s[13]=0,s[14]=p,s[15]=0,s},ve.computeInfinitePerspectiveOffCenter=function(e,t,n,o,r,a){i["a"].typeOf.number("left",e),i["a"].typeOf.number("right",t),i["a"].typeOf.number("bottom",n),i["a"].typeOf.number("top",o),i["a"].typeOf.number("near",r),i["a"].typeOf.object("result",a);const s=2*r/(t-e),c=2*r/(o-n),l=(t+e)/(t-e),u=(o+n)/(o-n),h=-1,d=-1,f=-2*r;return a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c,a[6]=0,a[7]=0,a[8]=l,a[9]=u,a[10]=h,a[11]=d,a[12]=0,a[13]=0,a[14]=f,a[15]=0,a},ve.computeViewportTransformation=function(e,t,n,i){Object(r["a"])(i)||(i=new ve),e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const a=Object(o["a"])(e.x,0),s=Object(o["a"])(e.y,0),c=Object(o["a"])(e.width,0),l=Object(o["a"])(e.height,0);t=Object(o["a"])(t,0),n=Object(o["a"])(n,1);const u=.5*c,h=.5*l,d=.5*(n-t),f=u,p=h,m=d,_=a+u,g=s+h,b=t+d,y=1;return i[0]=f,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=p,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=m,i[11]=0,i[12]=_,i[13]=g,i[14]=b,i[15]=y,i},ve.computeView=function(e,t,n,o,r){return i["a"].typeOf.object("position",e),i["a"].typeOf.object("direction",t),i["a"].typeOf.object("up",n),i["a"].typeOf.object("right",o),i["a"].typeOf.object("result",r),r[0]=o.x,r[1]=n.x,r[2]=-t.x,r[3]=0,r[4]=o.y,r[5]=n.y,r[6]=-t.y,r[7]=0,r[8]=o.z,r[9]=n.z,r[10]=-t.z,r[11]=0,r[12]=-g.dot(o,e),r[13]=-g.dot(n,e),r[14]=g.dot(t,e),r[15]=1,r},ve.toArray=function(e,t){return i["a"].typeOf.object("matrix",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},ve.getElementIndex=function(e,t){return i["a"].typeOf.number.greaterThanOrEquals("row",t,0),i["a"].typeOf.number.lessThanOrEquals("row",t,3),i["a"].typeOf.number.greaterThanOrEquals("column",e,0),i["a"].typeOf.number.lessThanOrEquals("column",e,3),4*e+t},ve.getColumn=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,3),i["a"].typeOf.object("result",n);const o=4*t,r=e[o],a=e[o+1],s=e[o+2],c=e[o+3];return n.x=r,n.y=a,n.z=s,n.w=c,n},ve.setColumn=function(e,t,n,o){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,3),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=ve.clone(e,o);const r=4*t;return o[r]=n.x,o[r+1]=n.y,o[r+2]=n.z,o[r+3]=n.w,o},ve.getRow=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,3),i["a"].typeOf.object("result",n);const o=e[t],r=e[t+4],a=e[t+8],s=e[t+12];return n.x=o,n.y=r,n.z=a,n.w=s,n},ve.setRow=function(e,t,n,o){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,3),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=ve.clone(e,o),o[t]=n.x,o[t+4]=n.y,o[t+8]=n.z,o[t+12]=n.w,o},ve.setTranslation=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("translation",t),i["a"].typeOf.object("result",n),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=e[15],n};const Te=new g;ve.setScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n);const o=ve.getScale(e,Te),r=t.x/o.x,a=t.y/o.y,s=t.z/o.z;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3],n[4]=e[4]*a,n[5]=e[5]*a,n[6]=e[6]*a,n[7]=e[7],n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};const Ce=new g;ve.setUniformScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n);const o=ve.getScale(e,Ce),r=t/o.x,a=t/o.y,s=t/o.z;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3],n[4]=e[4]*a,n[5]=e[5]*a,n[6]=e[6]*a,n[7]=e[7],n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};const Ee=new g;ve.getScale=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t.x=g.magnitude(g.fromElements(e[0],e[1],e[2],Ee)),t.y=g.magnitude(g.fromElements(e[4],e[5],e[6],Ee)),t.z=g.magnitude(g.fromElements(e[8],e[9],e[10],Ee)),t};const xe=new g;ve.getMaximumScale=function(e){return ve.getScale(e,xe),g.maximumComponent(xe)};const Se=new g;ve.setRotation=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",n);const o=ve.getScale(e,Se);return n[0]=t[0]*o.x,n[1]=t[1]*o.x,n[2]=t[2]*o.x,n[3]=e[3],n[4]=t[3]*o.y,n[5]=t[4]*o.y,n[6]=t[5]*o.y,n[7]=e[7],n[8]=t[6]*o.z,n[9]=t[7]*o.z,n[10]=t[8]*o.z,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n};const Ie=new g;ve.getRotation=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=ve.getScale(e,Ie);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.x,t[3]=e[4]/n.y,t[4]=e[5]/n.y,t[5]=e[6]/n.y,t[6]=e[8]/n.z,t[7]=e[9]/n.z,t[8]=e[10]/n.z,t},ve.multiply=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e[0],r=e[1],a=e[2],s=e[3],c=e[4],l=e[5],u=e[6],h=e[7],d=e[8],f=e[9],p=e[10],m=e[11],_=e[12],g=e[13],b=e[14],y=e[15],v=t[0],O=t[1],A=t[2],w=t[3],T=t[4],C=t[5],E=t[6],x=t[7],S=t[8],I=t[9],D=t[10],P=t[11],j=t[12],R=t[13],L=t[14],M=t[15],N=o*v+c*O+d*A+_*w,B=r*v+l*O+f*A+g*w,F=a*v+u*O+p*A+b*w,z=s*v+h*O+m*A+y*w,k=o*T+c*C+d*E+_*x,U=r*T+l*C+f*E+g*x,V=a*T+u*C+p*E+b*x,H=s*T+h*C+m*E+y*x,G=o*S+c*I+d*D+_*P,W=r*S+l*I+f*D+g*P,q=a*S+u*I+p*D+b*P,Y=s*S+h*I+m*D+y*P,X=o*j+c*R+d*L+_*M,K=r*j+l*R+f*L+g*M,$=a*j+u*R+p*L+b*M,J=s*j+h*R+m*L+y*M;return n[0]=N,n[1]=B,n[2]=F,n[3]=z,n[4]=k,n[5]=U,n[6]=V,n[7]=H,n[8]=G,n[9]=W,n[10]=q,n[11]=Y,n[12]=X,n[13]=K,n[14]=$,n[15]=J,n},ve.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n},ve.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n},ve.multiplyTransformation=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e[0],r=e[1],a=e[2],s=e[4],c=e[5],l=e[6],u=e[8],h=e[9],d=e[10],f=e[12],p=e[13],m=e[14],_=t[0],g=t[1],b=t[2],y=t[4],v=t[5],O=t[6],A=t[8],w=t[9],T=t[10],C=t[12],E=t[13],x=t[14],S=o*_+s*g+u*b,I=r*_+c*g+h*b,D=a*_+l*g+d*b,P=o*y+s*v+u*O,j=r*y+c*v+h*O,R=a*y+l*v+d*O,L=o*A+s*w+u*T,M=r*A+c*w+h*T,N=a*A+l*w+d*T,B=o*C+s*E+u*x+f,F=r*C+c*E+h*x+p,z=a*C+l*E+d*x+m;return n[0]=S,n[1]=I,n[2]=D,n[3]=0,n[4]=P,n[5]=j,n[6]=R,n[7]=0,n[8]=L,n[9]=M,n[10]=N,n[11]=0,n[12]=B,n[13]=F,n[14]=z,n[15]=1,n},ve.multiplyByMatrix3=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("rotation",t),i["a"].typeOf.object("result",n);const o=e[0],r=e[1],a=e[2],s=e[4],c=e[5],l=e[6],u=e[8],h=e[9],d=e[10],f=t[0],p=t[1],m=t[2],_=t[3],g=t[4],b=t[5],y=t[6],v=t[7],O=t[8],A=o*f+s*p+u*m,w=r*f+c*p+h*m,T=a*f+l*p+d*m,C=o*_+s*g+u*b,E=r*_+c*g+h*b,x=a*_+l*g+d*b,S=o*y+s*v+u*O,I=r*y+c*v+h*O,D=a*y+l*v+d*O;return n[0]=A,n[1]=w,n[2]=T,n[3]=0,n[4]=C,n[5]=E,n[6]=x,n[7]=0,n[8]=S,n[9]=I,n[10]=D,n[11]=0,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},ve.multiplyByTranslation=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("translation",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z,s=o*e[0]+r*e[4]+a*e[8]+e[12],c=o*e[1]+r*e[5]+a*e[9]+e[13],l=o*e[2]+r*e[6]+a*e[10]+e[14];return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=s,n[13]=c,n[14]=l,n[15]=e[15],n},ve.multiplyByScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z;return 1===o&&1===r&&1===a?ve.clone(e,n):(n[0]=o*e[0],n[1]=o*e[1],n[2]=o*e[2],n[3]=e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=r*e[6],n[7]=e[7],n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n)},ve.multiplyByUniformScale=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3],n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7],n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},ve.multiplyByVector=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("cartesian",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z,s=t.w,c=e[0]*o+e[4]*r+e[8]*a+e[12]*s,l=e[1]*o+e[5]*r+e[9]*a+e[13]*s,u=e[2]*o+e[6]*r+e[10]*a+e[14]*s,h=e[3]*o+e[7]*r+e[11]*a+e[15]*s;return n.x=c,n.y=l,n.z=u,n.w=h,n},ve.multiplyByPointAsVector=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("cartesian",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z,s=e[0]*o+e[4]*r+e[8]*a,c=e[1]*o+e[5]*r+e[9]*a,l=e[2]*o+e[6]*r+e[10]*a;return n.x=s,n.y=c,n.z=l,n},ve.multiplyByPoint=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("cartesian",t),i["a"].typeOf.object("result",n);const o=t.x,r=t.y,a=t.z,s=e[0]*o+e[4]*r+e[8]*a+e[12],c=e[1]*o+e[5]*r+e[9]*a+e[13],l=e[2]*o+e[6]*r+e[10]*a+e[14];return n.x=s,n.y=c,n.z=l,n},ve.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n},ve.negate=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ve.transpose=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[1],o=e[2],r=e[3],a=e[6],s=e[7],c=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=a,t[10]=e[10],t[11]=e[14],t[12]=r,t[13]=s,t[14]=c,t[15]=e[15],t},ve.abs=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},ve.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},ve.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n&&Math.abs(e[4]-t[4])<=n&&Math.abs(e[5]-t[5])<=n&&Math.abs(e[6]-t[6])<=n&&Math.abs(e[7]-t[7])<=n&&Math.abs(e[8]-t[8])<=n&&Math.abs(e[9]-t[9])<=n&&Math.abs(e[10]-t[10])<=n&&Math.abs(e[11]-t[11])<=n&&Math.abs(e[12]-t[12])<=n&&Math.abs(e[13]-t[13])<=n&&Math.abs(e[14]-t[14])<=n&&Math.abs(e[15]-t[15])<=n},ve.getTranslation=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},ve.getMatrix3=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};const De=new ce,Pe=new ce,je=new be,Re=new be(0,0,0,1);ve.inverse=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[0],o=e[4],r=e[8],a=e[12],c=e[1],l=e[5],u=e[9],h=e[13],d=e[2],f=e[6],p=e[10],m=e[14],_=e[3],g=e[7],b=e[11],y=e[15];let v=p*y,O=m*b,A=f*y,w=m*g,T=f*b,C=p*g,E=d*y,x=m*_,S=d*b,I=p*_,D=d*g,P=f*_;const j=v*l+w*u+T*h-(O*l+A*u+C*h),R=O*c+E*u+I*h-(v*c+x*u+S*h),L=A*c+x*l+D*h-(w*c+E*l+P*h),M=C*c+S*l+P*u-(T*c+I*l+D*u),N=O*o+A*r+C*a-(v*o+w*r+T*a),B=v*n+x*r+S*a-(O*n+E*r+I*a),F=w*n+E*o+P*a-(A*n+x*o+D*a),z=T*n+I*o+D*r-(C*n+S*o+P*r);v=r*h,O=a*u,A=o*h,w=a*l,T=o*u,C=r*l,E=n*h,x=a*c,S=n*u,I=r*c,D=n*l,P=o*c;const k=v*g+w*b+T*y-(O*g+A*b+C*y),U=O*_+E*b+I*y-(v*_+x*b+S*y),V=A*_+x*g+D*y-(w*_+E*g+P*y),H=C*_+S*g+P*b-(T*_+I*g+D*b),G=A*p+C*m+O*f-(T*m+v*f+w*p),W=S*m+v*d+x*p-(E*p+I*m+O*d),q=E*f+P*m+w*d-(D*m+A*d+x*f),Y=D*p+T*d+I*f-(S*f+P*p+C*d);let X=n*j+o*R+r*L+a*M;if(Math.abs(X)<s["a"].EPSILON21){if(ce.equalsEpsilon(ve.getMatrix3(e,De),Pe,s["a"].EPSILON7)&&be.equals(ve.getRow(e,3,je),Re))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new ye["a"]("matrix is not invertible because its determinate is zero.")}return X=1/X,t[0]=j*X,t[1]=R*X,t[2]=L*X,t[3]=M*X,t[4]=N*X,t[5]=B*X,t[6]=F*X,t[7]=z*X,t[8]=k*X,t[9]=U*X,t[10]=V*X,t[11]=H*X,t[12]=G*X,t[13]=W*X,t[14]=q*X,t[15]=Y*X,t},ve.inverseTransformation=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[0],o=e[1],r=e[2],a=e[4],s=e[5],c=e[6],l=e[8],u=e[9],h=e[10],d=e[12],f=e[13],p=e[14],m=-n*d-o*f-r*p,_=-a*d-s*f-c*p,g=-l*d-u*f-h*p;return t[0]=n,t[1]=a,t[2]=l,t[3]=0,t[4]=o,t[5]=s,t[6]=u,t[7]=0,t[8]=r,t[9]=c,t[10]=h,t[11]=0,t[12]=m,t[13]=_,t[14]=g,t[15]=1,t};const Le=new ve;ve.inverseTranspose=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),ve.inverse(ve.transpose(e,Le),t)},ve.IDENTITY=Object.freeze(new ve(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ve.ZERO=Object.freeze(new ve(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),ve.COLUMN0ROW0=0,ve.COLUMN0ROW1=1,ve.COLUMN0ROW2=2,ve.COLUMN0ROW3=3,ve.COLUMN1ROW0=4,ve.COLUMN1ROW1=5,ve.COLUMN1ROW2=6,ve.COLUMN1ROW3=7,ve.COLUMN2ROW0=8,ve.COLUMN2ROW1=9,ve.COLUMN2ROW2=10,ve.COLUMN2ROW3=11,ve.COLUMN3ROW0=12,ve.COLUMN3ROW1=13,ve.COLUMN3ROW2=14,ve.COLUMN3ROW3=15,Object.defineProperties(ve.prototype,{length:{get:function(){return ve.packedLength}}}),ve.prototype.clone=function(e){return ve.clone(this,e)},ve.prototype.equals=function(e){return ve.equals(this,e)},ve.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]&&e[4]===t[n+4]&&e[5]===t[n+5]&&e[6]===t[n+6]&&e[7]===t[n+7]&&e[8]===t[n+8]&&e[9]===t[n+9]&&e[10]===t[n+10]&&e[11]===t[n+11]&&e[12]===t[n+12]&&e[13]===t[n+13]&&e[14]===t[n+14]&&e[15]===t[n+15]},ve.prototype.equalsEpsilon=function(e,t){return ve.equalsEpsilon(this,e,t)},ve.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})\n`+`(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})\n`+`(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})\n`+`(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var Me=ve;function Ne(e,t,n,i){this.west=Object(o["a"])(e,0),this.south=Object(o["a"])(t,0),this.east=Object(o["a"])(n,0),this.north=Object(o["a"])(i,0)}Object.defineProperties(Ne.prototype,{width:{get:function(){return Ne.computeWidth(this)}},height:{get:function(){return Ne.computeHeight(this)}}}),Ne.packedLength=4,Ne.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.west,t[n++]=e.south,t[n++]=e.east,t[n]=e.north,t},Ne.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Ne),n.west=e[t++],n.south=e[t++],n.east=e[t++],n.north=e[t],n},Ne.computeWidth=function(e){i["a"].typeOf.object("rectangle",e);let t=e.east;const n=e.west;return t<n&&(t+=s["a"].TWO_PI),t-n},Ne.computeHeight=function(e){return i["a"].typeOf.object("rectangle",e),e.north-e.south},Ne.fromDegrees=function(e,t,n,i,a){return e=s["a"].toRadians(Object(o["a"])(e,0)),t=s["a"].toRadians(Object(o["a"])(t,0)),n=s["a"].toRadians(Object(o["a"])(n,0)),i=s["a"].toRadians(Object(o["a"])(i,0)),Object(r["a"])(a)?(a.west=e,a.south=t,a.east=n,a.north=i,a):new Ne(e,t,n,i)},Ne.fromRadians=function(e,t,n,i,a){return Object(r["a"])(a)?(a.west=Object(o["a"])(e,0),a.south=Object(o["a"])(t,0),a.east=Object(o["a"])(n,0),a.north=Object(o["a"])(i,0),a):new Ne(e,t,n,i)},Ne.fromCartographicArray=function(e,t){i["a"].defined("cartographics",e);let n=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,c=-Number.MAX_VALUE,l=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(let i=0,r=e.length;i<r;i++){const t=e[i];n=Math.min(n,t.longitude),o=Math.max(o,t.longitude),l=Math.min(l,t.latitude),u=Math.max(u,t.latitude);const r=t.longitude>=0?t.longitude:t.longitude+s["a"].TWO_PI;a=Math.min(a,r),c=Math.max(c,r)}return o-n>c-a&&(n=a,o=c,o>s["a"].PI&&(o-=s["a"].TWO_PI),n>s["a"].PI&&(n-=s["a"].TWO_PI)),Object(r["a"])(t)?(t.west=n,t.south=l,t.east=o,t.north=u,t):new Ne(n,l,o,u)},Ne.fromCartesianArray=function(e,t,n){i["a"].defined("cartesians",e),t=Object(o["a"])(t,k.WGS84);let a=Number.MAX_VALUE,c=-Number.MAX_VALUE,l=Number.MAX_VALUE,u=-Number.MAX_VALUE,h=Number.MAX_VALUE,d=-Number.MAX_VALUE;for(let i=0,o=e.length;i<o;i++){const n=t.cartesianToCartographic(e[i]);a=Math.min(a,n.longitude),c=Math.max(c,n.longitude),h=Math.min(h,n.latitude),d=Math.max(d,n.latitude);const o=n.longitude>=0?n.longitude:n.longitude+s["a"].TWO_PI;l=Math.min(l,o),u=Math.max(u,o)}return c-a>u-l&&(a=l,c=u,c>s["a"].PI&&(c-=s["a"].TWO_PI),a>s["a"].PI&&(a-=s["a"].TWO_PI)),Object(r["a"])(n)?(n.west=a,n.south=h,n.east=c,n.north=d,n):new Ne(a,h,c,d)},Ne.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new Ne(e.west,e.south,e.east,e.north)},Ne.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e.west-t.west)<=n&&Math.abs(e.south-t.south)<=n&&Math.abs(e.east-t.east)<=n&&Math.abs(e.north-t.north)<=n},Ne.prototype.clone=function(e){return Ne.clone(this,e)},Ne.prototype.equals=function(e){return Ne.equals(this,e)},Ne.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},Ne.prototype.equalsEpsilon=function(e,t){return Ne.equalsEpsilon(this,e,t)},Ne.validate=function(e){i["a"].typeOf.object("rectangle",e);const t=e.north;i["a"].typeOf.number.greaterThanOrEquals("north",t,-s["a"].PI_OVER_TWO),i["a"].typeOf.number.lessThanOrEquals("north",t,s["a"].PI_OVER_TWO);const n=e.south;i["a"].typeOf.number.greaterThanOrEquals("south",n,-s["a"].PI_OVER_TWO),i["a"].typeOf.number.lessThanOrEquals("south",n,s["a"].PI_OVER_TWO);const o=e.west;i["a"].typeOf.number.greaterThanOrEquals("west",o,-Math.PI),i["a"].typeOf.number.lessThanOrEquals("west",o,Math.PI);const r=e.east;i["a"].typeOf.number.greaterThanOrEquals("east",r,-Math.PI),i["a"].typeOf.number.lessThanOrEquals("east",r,Math.PI)},Ne.southwest=function(e,t){return i["a"].typeOf.object("rectangle",e),Object(r["a"])(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new I(e.west,e.south)},Ne.northwest=function(e,t){return i["a"].typeOf.object("rectangle",e),Object(r["a"])(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new I(e.west,e.north)},Ne.northeast=function(e,t){return i["a"].typeOf.object("rectangle",e),Object(r["a"])(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new I(e.east,e.north)},Ne.southeast=function(e,t){return i["a"].typeOf.object("rectangle",e),Object(r["a"])(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new I(e.east,e.south)},Ne.center=function(e,t){i["a"].typeOf.object("rectangle",e);let n=e.east;const o=e.west;n<o&&(n+=s["a"].TWO_PI);const a=s["a"].negativePiToPi(.5*(o+n)),c=.5*(e.south+e.north);return Object(r["a"])(t)?(t.longitude=a,t.latitude=c,t.height=0,t):new I(a,c)},Ne.intersection=function(e,t,n){i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("otherRectangle",t);let o=e.east,a=e.west,c=t.east,l=t.west;o<a&&c>0?o+=s["a"].TWO_PI:c<l&&o>0&&(c+=s["a"].TWO_PI),o<a&&l<0?l+=s["a"].TWO_PI:c<l&&a<0&&(a+=s["a"].TWO_PI);const u=s["a"].negativePiToPi(Math.max(a,l)),h=s["a"].negativePiToPi(Math.min(o,c));if((e.west<e.east||t.west<t.east)&&h<=u)return;const d=Math.max(e.south,t.south),f=Math.min(e.north,t.north);return d>=f?void 0:Object(r["a"])(n)?(n.west=u,n.south=d,n.east=h,n.north=f,n):new Ne(u,d,h,f)},Ne.simpleIntersection=function(e,t,n){i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("otherRectangle",t);const o=Math.max(e.west,t.west),a=Math.max(e.south,t.south),s=Math.min(e.east,t.east),c=Math.min(e.north,t.north);if(!(a>=c||o>=s))return Object(r["a"])(n)?(n.west=o,n.south=a,n.east=s,n.north=c,n):new Ne(o,a,s,c)},Ne.union=function(e,t,n){i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("otherRectangle",t),Object(r["a"])(n)||(n=new Ne);let o=e.east,a=e.west,c=t.east,l=t.west;o<a&&c>0?o+=s["a"].TWO_PI:c<l&&o>0&&(c+=s["a"].TWO_PI),o<a&&l<0?l+=s["a"].TWO_PI:c<l&&a<0&&(a+=s["a"].TWO_PI);const u=s["a"].negativePiToPi(Math.min(a,l)),h=s["a"].negativePiToPi(Math.max(o,c));return n.west=u,n.south=Math.min(e.south,t.south),n.east=h,n.north=Math.max(e.north,t.north),n},Ne.expand=function(e,t,n){return i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("cartographic",t),Object(r["a"])(n)||(n=new Ne),n.west=Math.min(e.west,t.longitude),n.south=Math.min(e.south,t.latitude),n.east=Math.max(e.east,t.longitude),n.north=Math.max(e.north,t.latitude),n},Ne.contains=function(e,t){i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("cartographic",t);let n=t.longitude;const o=t.latitude,r=e.west;let a=e.east;return a<r&&(a+=s["a"].TWO_PI,n<0&&(n+=s["a"].TWO_PI)),(n>r||s["a"].equalsEpsilon(n,r,s["a"].EPSILON14))&&(n<a||s["a"].equalsEpsilon(n,a,s["a"].EPSILON14))&&o>=e.south&&o<=e.north};const Be=new I;Ne.subsample=function(e,t,n,a){i["a"].typeOf.object("rectangle",e),t=Object(o["a"])(t,k.WGS84),n=Object(o["a"])(n,0),Object(r["a"])(a)||(a=[]);let c=0;const l=e.north,u=e.south,h=e.east,d=e.west,f=Be;f.height=n,f.longitude=d,f.latitude=l,a[c]=t.cartographicToCartesian(f,a[c]),c++,f.longitude=h,a[c]=t.cartographicToCartesian(f,a[c]),c++,f.latitude=u,a[c]=t.cartographicToCartesian(f,a[c]),c++,f.longitude=d,a[c]=t.cartographicToCartesian(f,a[c]),c++,f.latitude=l<0?l:u>0?u:0;for(let i=1;i<8;++i)f.longitude=-Math.PI+i*s["a"].PI_OVER_TWO,Ne.contains(e,f)&&(a[c]=t.cartographicToCartesian(f,a[c]),c++);return 0===f.latitude&&(f.longitude=d,a[c]=t.cartographicToCartesian(f,a[c]),c++,f.longitude=h,a[c]=t.cartographicToCartesian(f,a[c]),c++),a.length=c,a},Ne.subsection=function(e,t,n,o,a,c){if(i["a"].typeOf.object("rectangle",e),i["a"].typeOf.number.greaterThanOrEquals("westLerp",t,0),i["a"].typeOf.number.lessThanOrEquals("westLerp",t,1),i["a"].typeOf.number.greaterThanOrEquals("southLerp",n,0),i["a"].typeOf.number.lessThanOrEquals("southLerp",n,1),i["a"].typeOf.number.greaterThanOrEquals("eastLerp",o,0),i["a"].typeOf.number.lessThanOrEquals("eastLerp",o,1),i["a"].typeOf.number.greaterThanOrEquals("northLerp",a,0),i["a"].typeOf.number.lessThanOrEquals("northLerp",a,1),i["a"].typeOf.number.lessThanOrEquals("westLerp",t,o),i["a"].typeOf.number.lessThanOrEquals("southLerp",n,a),Object(r["a"])(c)||(c=new Ne),e.west<=e.east){const n=e.east-e.west;c.west=e.west+t*n,c.east=e.west+o*n}else{const n=s["a"].TWO_PI+e.east-e.west;c.west=s["a"].negativePiToPi(e.west+t*n),c.east=s["a"].negativePiToPi(e.west+o*n)}const l=e.north-e.south;return c.south=e.south+n*l,c.north=e.south+a*l,1===t&&(c.west=e.east),1===o&&(c.east=e.east),1===n&&(c.south=e.north),1===a&&(c.north=e.north),c},Ne.MAX_VALUE=Object.freeze(new Ne(-Math.PI,-s["a"].PI_OVER_TWO,Math.PI,s["a"].PI_OVER_TWO));var Fe=Ne;function ze(e,t){this.center=g.clone(Object(o["a"])(e,g.ZERO)),this.radius=Object(o["a"])(t,0)}const ke=new g,Ue=new g,Ve=new g,He=new g,Ge=new g,We=new g,qe=new g,Ye=new g,Xe=new g,Ke=new g,$e=new g,Je=new g,Qe=4/3*s["a"].PI;ze.fromPoints=function(e,t){if(Object(r["a"])(t)||(t=new ze),!Object(r["a"])(e)||0===e.length)return t.center=g.clone(g.ZERO,t.center),t.radius=0,t;const n=g.clone(e[0],qe),i=g.clone(n,ke),o=g.clone(n,Ue),a=g.clone(n,Ve),s=g.clone(n,He),c=g.clone(n,Ge),l=g.clone(n,We),u=e.length;let h;for(h=1;h<u;h++){g.clone(e[h],n);const t=n.x,r=n.y,u=n.z;t<i.x&&g.clone(n,i),t>s.x&&g.clone(n,s),r<o.y&&g.clone(n,o),r>c.y&&g.clone(n,c),u<a.z&&g.clone(n,a),u>l.z&&g.clone(n,l)}const d=g.magnitudeSquared(g.subtract(s,i,Ye)),f=g.magnitudeSquared(g.subtract(c,o,Ye)),p=g.magnitudeSquared(g.subtract(l,a,Ye));let m=i,_=s,b=d;f>b&&(b=f,m=o,_=c),p>b&&(b=p,m=a,_=l);const y=Xe;y.x=.5*(m.x+_.x),y.y=.5*(m.y+_.y),y.z=.5*(m.z+_.z);let v=g.magnitudeSquared(g.subtract(_,y,Ye)),O=Math.sqrt(v);const A=Ke;A.x=i.x,A.y=o.y,A.z=a.z;const w=$e;w.x=s.x,w.y=c.y,w.z=l.z;const T=g.midpoint(A,w,Je);let C=0;for(h=0;h<u;h++){g.clone(e[h],n);const t=g.magnitude(g.subtract(n,T,Ye));t>C&&(C=t);const i=g.magnitudeSquared(g.subtract(n,y,Ye));if(i>v){const e=Math.sqrt(i);O=.5*(O+e),v=O*O;const t=e-O;y.x=(O*y.x+t*n.x)/e,y.y=(O*y.y+t*n.y)/e,y.z=(O*y.z+t*n.z)/e}}return O<C?(g.clone(y,t.center),t.radius=O):(g.clone(T,t.center),t.radius=C),t};const Ze=new V,et=new g,tt=new g,nt=new I,it=new I;ze.fromRectangle2D=function(e,t,n){return ze.fromRectangleWithHeights2D(e,t,0,0,n)},ze.fromRectangleWithHeights2D=function(e,t,n,i,a){if(Object(r["a"])(a)||(a=new ze),!Object(r["a"])(e))return a.center=g.clone(g.ZERO,a.center),a.radius=0,a;t=Object(o["a"])(t,Ze),Fe.southwest(e,nt),nt.height=n,Fe.northeast(e,it),it.height=i;const s=t.project(nt,et),c=t.project(it,tt),l=c.x-s.x,u=c.y-s.y,h=c.z-s.z;a.radius=.5*Math.sqrt(l*l+u*u+h*h);const d=a.center;return d.x=s.x+.5*l,d.y=s.y+.5*u,d.z=s.z+.5*h,a};const ot=[];ze.fromRectangle3D=function(e,t,n,i){if(t=Object(o["a"])(t,k.WGS84),n=Object(o["a"])(n,0),Object(r["a"])(i)||(i=new ze),!Object(r["a"])(e))return i.center=g.clone(g.ZERO,i.center),i.radius=0,i;const a=Fe.subsample(e,t,n,ot);return ze.fromPoints(a,i)},ze.fromVertices=function(e,t,n,a){if(Object(r["a"])(a)||(a=new ze),!Object(r["a"])(e)||0===e.length)return a.center=g.clone(g.ZERO,a.center),a.radius=0,a;t=Object(o["a"])(t,g.ZERO),n=Object(o["a"])(n,3),i["a"].typeOf.number.greaterThanOrEquals("stride",n,3);const s=qe;s.x=e[0]+t.x,s.y=e[1]+t.y,s.z=e[2]+t.z;const c=g.clone(s,ke),l=g.clone(s,Ue),u=g.clone(s,Ve),h=g.clone(s,He),d=g.clone(s,Ge),f=g.clone(s,We),p=e.length;let m;for(m=0;m<p;m+=n){const n=e[m]+t.x,i=e[m+1]+t.y,o=e[m+2]+t.z;s.x=n,s.y=i,s.z=o,n<c.x&&g.clone(s,c),n>h.x&&g.clone(s,h),i<l.y&&g.clone(s,l),i>d.y&&g.clone(s,d),o<u.z&&g.clone(s,u),o>f.z&&g.clone(s,f)}const _=g.magnitudeSquared(g.subtract(h,c,Ye)),b=g.magnitudeSquared(g.subtract(d,l,Ye)),y=g.magnitudeSquared(g.subtract(f,u,Ye));let v=c,O=h,A=_;b>A&&(A=b,v=l,O=d),y>A&&(A=y,v=u,O=f);const w=Xe;w.x=.5*(v.x+O.x),w.y=.5*(v.y+O.y),w.z=.5*(v.z+O.z);let T=g.magnitudeSquared(g.subtract(O,w,Ye)),C=Math.sqrt(T);const E=Ke;E.x=c.x,E.y=l.y,E.z=u.z;const x=$e;x.x=h.x,x.y=d.y,x.z=f.z;const S=g.midpoint(E,x,Je);let I=0;for(m=0;m<p;m+=n){s.x=e[m]+t.x,s.y=e[m+1]+t.y,s.z=e[m+2]+t.z;const n=g.magnitude(g.subtract(s,S,Ye));n>I&&(I=n);const i=g.magnitudeSquared(g.subtract(s,w,Ye));if(i>T){const e=Math.sqrt(i);C=.5*(C+e),T=C*C;const t=e-C;w.x=(C*w.x+t*s.x)/e,w.y=(C*w.y+t*s.y)/e,w.z=(C*w.z+t*s.z)/e}}return C<I?(g.clone(w,a.center),a.radius=C):(g.clone(S,a.center),a.radius=I),a},ze.fromEncodedCartesianVertices=function(e,t,n){if(Object(r["a"])(n)||(n=new ze),!Object(r["a"])(e)||!Object(r["a"])(t)||e.length!==t.length||0===e.length)return n.center=g.clone(g.ZERO,n.center),n.radius=0,n;const i=qe;i.x=e[0]+t[0],i.y=e[1]+t[1],i.z=e[2]+t[2];const o=g.clone(i,ke),a=g.clone(i,Ue),s=g.clone(i,Ve),c=g.clone(i,He),l=g.clone(i,Ge),u=g.clone(i,We),h=e.length;let d;for(d=0;d<h;d+=3){const n=e[d]+t[d],r=e[d+1]+t[d+1],h=e[d+2]+t[d+2];i.x=n,i.y=r,i.z=h,n<o.x&&g.clone(i,o),n>c.x&&g.clone(i,c),r<a.y&&g.clone(i,a),r>l.y&&g.clone(i,l),h<s.z&&g.clone(i,s),h>u.z&&g.clone(i,u)}const f=g.magnitudeSquared(g.subtract(c,o,Ye)),p=g.magnitudeSquared(g.subtract(l,a,Ye)),m=g.magnitudeSquared(g.subtract(u,s,Ye));let _=o,b=c,y=f;p>y&&(y=p,_=a,b=l),m>y&&(y=m,_=s,b=u);const v=Xe;v.x=.5*(_.x+b.x),v.y=.5*(_.y+b.y),v.z=.5*(_.z+b.z);let O=g.magnitudeSquared(g.subtract(b,v,Ye)),A=Math.sqrt(O);const w=Ke;w.x=o.x,w.y=a.y,w.z=s.z;const T=$e;T.x=c.x,T.y=l.y,T.z=u.z;const C=g.midpoint(w,T,Je);let E=0;for(d=0;d<h;d+=3){i.x=e[d]+t[d],i.y=e[d+1]+t[d+1],i.z=e[d+2]+t[d+2];const n=g.magnitude(g.subtract(i,C,Ye));n>E&&(E=n);const o=g.magnitudeSquared(g.subtract(i,v,Ye));if(o>O){const e=Math.sqrt(o);A=.5*(A+e),O=A*A;const t=e-A;v.x=(A*v.x+t*i.x)/e,v.y=(A*v.y+t*i.y)/e,v.z=(A*v.z+t*i.z)/e}}return A<E?(g.clone(v,n.center),n.radius=A):(g.clone(C,n.center),n.radius=E),n},ze.fromCornerPoints=function(e,t,n){i["a"].typeOf.object("corner",e),i["a"].typeOf.object("oppositeCorner",t),Object(r["a"])(n)||(n=new ze);const o=g.midpoint(e,t,n.center);return n.radius=g.distance(o,t),n},ze.fromEllipsoid=function(e,t){return i["a"].typeOf.object("ellipsoid",e),Object(r["a"])(t)||(t=new ze),g.clone(g.ZERO,t.center),t.radius=e.maximumRadius,t};const rt=new g;ze.fromBoundingSpheres=function(e,t){if(Object(r["a"])(t)||(t=new ze),!Object(r["a"])(e)||0===e.length)return t.center=g.clone(g.ZERO,t.center),t.radius=0,t;const n=e.length;if(1===n)return ze.clone(e[0],t);if(2===n)return ze.union(e[0],e[1],t);const i=[];let o;for(o=0;o<n;o++)i.push(e[o].center);t=ze.fromPoints(i,t);const a=t.center;let s=t.radius;for(o=0;o<n;o++){const t=e[o];s=Math.max(s,g.distance(a,t.center,rt)+t.radius)}return t.radius=s,t};const at=new g,st=new g,ct=new g;ze.fromOrientedBoundingBox=function(e,t){i["a"].defined("orientedBoundingBox",e),Object(r["a"])(t)||(t=new ze);const n=e.halfAxes,o=ce.getColumn(n,0,at),a=ce.getColumn(n,1,st),s=ce.getColumn(n,2,ct);return g.add(o,a,o),g.add(o,s,o),t.center=g.clone(e.center,t.center),t.radius=g.magnitude(o),t};const lt=new g,ut=new g;ze.fromTransformation=function(e,t){i["a"].typeOf.object("transformation",e),Object(r["a"])(t)||(t=new ze);const n=Me.getTranslation(e,lt),o=Me.getScale(e,ut),a=.5*g.magnitude(o);return t.center=g.clone(n,t.center),t.radius=a,t},ze.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.center=g.clone(e.center,t.center),t.radius=e.radius,t):new ze(e.center,e.radius)},ze.packedLength=4,ze.pack=function(e,t,n){i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0);const r=e.center;return t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n]=e.radius,t},ze.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new ze);const a=n.center;return a.x=e[t++],a.y=e[t++],a.z=e[t++],n.radius=e[t],n};const ht=new g,dt=new g;ze.union=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),Object(r["a"])(n)||(n=new ze);const o=e.center,a=e.radius,s=t.center,c=t.radius,l=g.subtract(s,o,ht),u=g.magnitude(l);if(a>=u+c)return e.clone(n),n;if(c>=u+a)return t.clone(n),n;const h=.5*(a+u+c),d=g.multiplyByScalar(l,(-a+h)/u,dt);return g.add(d,o,d),g.clone(d,n.center),n.radius=h,n};const ft=new g;ze.expand=function(e,t,n){i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("point",t),n=ze.clone(e,n);const o=g.magnitude(g.subtract(t,n.center,ft));return o>n.radius&&(n.radius=o),n},ze.intersectPlane=function(e,t){i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("plane",t);const n=e.center,o=e.radius,r=t.normal,a=g.dot(r,n)+t.distance;return a<-o?G.OUTSIDE:a<o?G.INTERSECTING:G.INSIDE},ze.transform=function(e,t,n){return i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("transform",t),Object(r["a"])(n)||(n=new ze),n.center=Me.multiplyByPoint(t,e.center,n.center),n.radius=Me.getMaximumScale(t)*e.radius,n};const pt=new g;ze.distanceSquaredTo=function(e,t){i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("cartesian",t);const n=g.subtract(e.center,t,pt),o=g.magnitude(n)-e.radius;return o<=0?0:o*o},ze.transformWithoutScale=function(e,t,n){return i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("transform",t),Object(r["a"])(n)||(n=new ze),n.center=Me.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n};const mt=new g;ze.computePlaneDistances=function(e,t,n,o){i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("position",t),i["a"].typeOf.object("direction",n),Object(r["a"])(o)||(o=new q);const a=g.subtract(e.center,t,mt),s=g.dot(n,a);return o.start=s-e.radius,o.stop=s+e.radius,o};const _t=new g,gt=new g,bt=new g,yt=new g,vt=new g,Ot=new I,At=new Array(8);for(let Set=0;Set<8;++Set)At[Set]=new g;const wt=new V;ze.projectTo2D=function(e,t,n){i["a"].typeOf.object("sphere",e),t=Object(o["a"])(t,wt);const r=t.ellipsoid;let a=e.center;const s=e.radius;let c;c=g.equals(a,g.ZERO)?g.clone(g.UNIT_X,_t):r.geodeticSurfaceNormal(a,_t);const l=g.cross(g.UNIT_Z,c,gt);g.normalize(l,l);const u=g.cross(c,l,bt);g.normalize(u,u),g.multiplyByScalar(c,s,c),g.multiplyByScalar(u,s,u),g.multiplyByScalar(l,s,l);const h=g.negate(u,vt),d=g.negate(l,yt),f=At;let p=f[0];g.add(c,u,p),g.add(p,l,p),p=f[1],g.add(c,u,p),g.add(p,d,p),p=f[2],g.add(c,h,p),g.add(p,d,p),p=f[3],g.add(c,h,p),g.add(p,l,p),g.negate(c,c),p=f[4],g.add(c,u,p),g.add(p,l,p),p=f[5],g.add(c,u,p),g.add(p,d,p),p=f[6],g.add(c,h,p),g.add(p,d,p),p=f[7],g.add(c,h,p),g.add(p,l,p);const m=f.length;for(let i=0;i<m;++i){const e=f[i];g.add(a,e,e);const n=r.cartesianToCartographic(e,Ot);t.project(n,e)}n=ze.fromPoints(f,n),a=n.center;const _=a.x,b=a.y,y=a.z;return a.x=y,a.y=_,a.z=b,n},ze.isOccluded=function(e,t){return i["a"].typeOf.object("sphere",e),i["a"].typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)},ze.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&g.equals(e.center,t.center)&&e.radius===t.radius},ze.prototype.intersectPlane=function(e){return ze.intersectPlane(this,e)},ze.prototype.distanceSquaredTo=function(e){return ze.distanceSquaredTo(this,e)},ze.prototype.computePlaneDistances=function(e,t,n){return ze.computePlaneDistances(this,e,t,n)},ze.prototype.isOccluded=function(e){return ze.isOccluded(this,e)},ze.prototype.equals=function(e){return ze.equals(this,e)},ze.prototype.clone=function(e){return ze.clone(this,e)},ze.prototype.volume=function(){const e=this.radius;return Qe*e*e*e};var Tt=ze,Ct=n("a734"),Et=n("d4ed");const xt=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function St(){const e=document.getElementsByTagName("script");for(let t=0,n=e.length;t<n;++t){const n=e[t].getAttribute("src"),i=xt.exec(n);if(null!==i)return i[1]}}let It,Dt,Pt;function jt(e){return"undefined"===typeof document?e:(Object(r["a"])(It)||(It=document.createElement("a")),It.href=e,It.href=It.href,It.href)}function Rt(){if(Object(r["a"])(Dt))return Dt;let e;if(e="undefined"!==typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"===typeof define&&Object(r["a"])(n("3c35"))&&!n("3c35").toUrlUndefined&&Object(r["a"])(n("429a").toUrl)?Object(Ct["a"])("..",Nt("Core/buildModuleUrl.js")):St(),!Object(r["a"])(e))throw new a["a"]("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return Dt=new Et["a"]({url:jt(e)}),Dt.appendForwardSlash(),Dt}function Lt(e){return jt(n("429a").toUrl(`../${e}`))}function Mt(e){const t=Rt().getDerivedResource({url:e});return t.url}function Nt(e){Object(r["a"])(Pt)||(Pt="object"===typeof define&&Object(r["a"])(n("3c35"))&&!n("3c35").toUrlUndefined&&Object(r["a"])(n("429a").toUrl)?Lt:Mt);const t=Pt(e);return t}Nt._cesiumScriptRegex=xt,Nt._buildModuleUrlFromBaseUrl=Mt,Nt._clearBaseResource=function(){Dt=void 0},Nt.setBaseUrl=function(e){Dt=Et["a"].DEFAULT.getDerivedResource({url:e})},Nt.getCesiumBaseUrl=Rt;var Bt=Nt;function Ft(e,t){this.x=Object(o["a"])(e,0),this.y=Object(o["a"])(t,0)}Ft.fromElements=function(e,t,n){return Object(r["a"])(n)?(n.x=e,n.y=t,n):new Ft(e,t)},Ft.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.x=e.x,t.y=e.y,t):new Ft(e.x,e.y)},Ft.fromCartesian3=Ft.clone,Ft.fromCartesian4=Ft.clone,Ft.packedLength=2,Ft.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.x,t[n]=e.y,t},Ft.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Ft),n.x=e[t++],n.y=e[t],n},Ft.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=2*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)Ft.pack(e[i],t,2*i);return t},Ft.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!==0)throw new a["a"]("array length must be a multiple of 2.");const n=e.length;Object(r["a"])(t)?t.length=n/2:t=new Array(n/2);for(let i=0;i<n;i+=2){const n=i/2;t[n]=Ft.unpack(e,i,t[n])}return t},Ft.fromArray=Ft.unpack,Ft.maximumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.max(e.x,e.y)},Ft.minimumComponent=function(e){return i["a"].typeOf.object("cartesian",e),Math.min(e.x,e.y)},Ft.minimumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n},Ft.maximumByComponent=function(e,t,n){return i["a"].typeOf.object("first",e),i["a"].typeOf.object("second",t),i["a"].typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n},Ft.clamp=function(e,t,n,o){i["a"].typeOf.object("value",e),i["a"].typeOf.object("min",t),i["a"].typeOf.object("max",n),i["a"].typeOf.object("result",o);const r=s["a"].clamp(e.x,t.x,n.x),a=s["a"].clamp(e.y,t.y,n.y);return o.x=r,o.y=a,o},Ft.magnitudeSquared=function(e){return i["a"].typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},Ft.magnitude=function(e){return Math.sqrt(Ft.magnitudeSquared(e))};const zt=new Ft;Ft.distance=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),Ft.subtract(e,t,zt),Ft.magnitude(zt)},Ft.distanceSquared=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),Ft.subtract(e,t,zt),Ft.magnitudeSquared(zt)},Ft.normalize=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=Ft.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,isNaN(t.x)||isNaN(t.y))throw new a["a"]("normalized result is not a number");return t},Ft.dot=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.x*t.x+e.y*t.y},Ft.cross=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.x*t.y-e.y*t.x},Ft.multiplyComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n},Ft.divideComponents=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n},Ft.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n},Ft.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n},Ft.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n},Ft.divideByScalar=function(e,t,n){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n},Ft.negate=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t},Ft.abs=function(e,t){return i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};const kt=new Ft;Ft.lerp=function(e,t,n,o){return i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o),Ft.multiplyByScalar(t,n,kt),o=Ft.multiplyByScalar(e,1-n,o),Ft.add(kt,o,o)};const Ut=new Ft,Vt=new Ft;Ft.angleBetween=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),Ft.normalize(e,Ut),Ft.normalize(t,Vt),s["a"].acosClamped(Ft.dot(Ut,Vt))};const Ht=new Ft;Ft.mostOrthogonalAxis=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=Ft.normalize(e,Ht);return Ft.abs(n,n),t=n.x<=n.y?Ft.clone(Ft.UNIT_X,t):Ft.clone(Ft.UNIT_Y,t),t},Ft.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.x===t.x&&e.y===t.y},Ft.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]},Ft.equalsEpsilon=function(e,t,n,i){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&s["a"].equalsEpsilon(e.x,t.x,n,i)&&s["a"].equalsEpsilon(e.y,t.y,n,i)},Ft.ZERO=Object.freeze(new Ft(0,0)),Ft.ONE=Object.freeze(new Ft(1,1)),Ft.UNIT_X=Object.freeze(new Ft(1,0)),Ft.UNIT_Y=Object.freeze(new Ft(0,1)),Ft.prototype.clone=function(e){return Ft.clone(this,e)},Ft.prototype.equals=function(e){return Ft.equals(this,e)},Ft.prototype.equalsEpsilon=function(e,t,n){return Ft.equalsEpsilon(this,e,t,n)},Ft.prototype.toString=function(){return`(${this.x}, ${this.y})`};var Gt=Ft;function Wt(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._rectangle=Object(o["a"])(e.rectangle,Fe.MAX_VALUE),this._projection=new V(this._ellipsoid),this._numberOfLevelZeroTilesX=Object(o["a"])(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=Object(o["a"])(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(Wt.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),Wt.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},Wt.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},Wt.prototype.rectangleToNativeRectangle=function(e,t){i["a"].defined("rectangle",e);const n=s["a"].toDegrees(e.west),o=s["a"].toDegrees(e.south),a=s["a"].toDegrees(e.east),c=s["a"].toDegrees(e.north);return Object(r["a"])(t)?(t.west=n,t.south=o,t.east=a,t.north=c,t):new Fe(n,o,a,c)},Wt.prototype.tileXYToNativeRectangle=function(e,t,n,i){const o=this.tileXYToRectangle(e,t,n,i);return o.west=s["a"].toDegrees(o.west),o.south=s["a"].toDegrees(o.south),o.east=s["a"].toDegrees(o.east),o.north=s["a"].toDegrees(o.north),o},Wt.prototype.tileXYToRectangle=function(e,t,n,i){const o=this._rectangle,a=this.getNumberOfXTilesAtLevel(n),s=this.getNumberOfYTilesAtLevel(n),c=o.width/a,l=e*c+o.west,u=(e+1)*c+o.west,h=o.height/s,d=o.north-t*h,f=o.north-(t+1)*h;return Object(r["a"])(i)||(i=new Fe(l,f,u,d)),i.west=l,i.south=f,i.east=u,i.north=d,i},Wt.prototype.positionToTileXY=function(e,t,n){const i=this._rectangle;if(!Fe.contains(i,e))return;const o=this.getNumberOfXTilesAtLevel(t),a=this.getNumberOfYTilesAtLevel(t),c=i.width/o,l=i.height/a;let u=e.longitude;i.east<i.west&&(u+=s["a"].TWO_PI);let h=(u-i.west)/c|0;h>=o&&(h=o-1);let d=(i.north-e.latitude)/l|0;return d>=a&&(d=a-1),Object(r["a"])(n)?(n.x=h,n.y=d,n):new Gt(h,d)};var qt=Wt;const Yt=new g,Xt=new g,Kt=new I,$t=new g,Jt=new g,Qt=new Tt,Zt=new qt,en=[new I,new I,new I,new I],tn=new Gt,nn={};function on(e){I.fromRadians(e.east,e.north,0,en[0]),I.fromRadians(e.west,e.north,0,en[1]),I.fromRadians(e.east,e.south,0,en[2]),I.fromRadians(e.west,e.south,0,en[3]);let t=0,n=0,i=0,o=0;const r=nn._terrainHeightsMaxLevel;let a;for(a=0;a<=r;++a){let e=!1;for(let t=0;t<4;++t){const n=en[t];if(Zt.positionToTileXY(n,a,tn),0===t)i=tn.x,o=tn.y;else if(i!==tn.x||o!==tn.y){e=!0;break}}if(e)break;t=i,n=o}if(0!==a)return{x:t,y:n,level:a>r?r:a-1}}nn.initialize=function(){let e=nn._initPromise;return Object(r["a"])(e)||(e=Et["a"].fetchJson(Bt("Assets/approximateTerrainHeights.json")).then((function(e){nn._terrainHeights=e})),nn._initPromise=e),e},nn.getMinimumMaximumHeights=function(e,t){if(i["a"].defined("rectangle",e),!Object(r["a"])(nn._terrainHeights))throw new a["a"]("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");t=Object(o["a"])(t,k.WGS84);const n=on(e);let s=nn._defaultMinTerrainHeight,c=nn._defaultMaxTerrainHeight;if(Object(r["a"])(n)){const i=`${n.level}-${n.x}-${n.y}`,o=nn._terrainHeights[i];Object(r["a"])(o)&&(s=o[0],c=o[1]),t.cartographicToCartesian(Fe.northeast(e,Kt),Yt),t.cartographicToCartesian(Fe.southwest(e,Kt),Xt),g.midpoint(Xt,Yt,$t);const a=t.scaleToGeodeticSurface($t,Jt);if(Object(r["a"])(a)){const e=g.distance($t,a);s=Math.min(s,-e)}else s=nn._defaultMinTerrainHeight}return s=Math.max(nn._defaultMinTerrainHeight,s),{minimumTerrainHeight:s,maximumTerrainHeight:c}},nn.getBoundingSphere=function(e,t){if(i["a"].defined("rectangle",e),!Object(r["a"])(nn._terrainHeights))throw new a["a"]("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");t=Object(o["a"])(t,k.WGS84);const n=on(e);let s=nn._defaultMaxTerrainHeight;if(Object(r["a"])(n)){const e=`${n.level}-${n.x}-${n.y}`,t=nn._terrainHeights[e];Object(r["a"])(t)&&(s=t[1])}const c=Tt.fromRectangle3D(e,t,0);return Tt.fromRectangle3D(e,t,s,Qt),Tt.union(c,Qt,c)},nn._terrainHeightsMaxLevel=6,nn._defaultMaxTerrainHeight=9e3,nn._defaultMinTerrainHeight=-1e5,nn._terrainHeights=void 0,nn._initPromise=void 0,Object.defineProperties(nn,{initialized:{get:function(){return Object(r["a"])(nn._terrainHeights)}}});var rn=nn,an=n("c0c4"),sn=n.n(an);let cn=0;const ln={};function un(e,t){let n;i["a"].typeOf.string("html",e);const a=e;Object(r["a"])(ln[a])?n=ln[a]:(n=cn++,ln[a]=n),t=Object(o["a"])(t,!1),this._id=n,this._html=e,this._showOnScreen=t,this._element=void 0}Object.defineProperties(un.prototype,{html:{get:function(){return this._html}},id:{get:function(){return this._id}},showOnScreen:{get:function(){return this._showOnScreen},set:function(e){this._showOnScreen=e}},element:{get:function(){if(!Object(r["a"])(this._element)){const e=sn.a.sanitize(this._html),t=document.createElement("div");t._creditId=this._id,t.style.display="inline",t.innerHTML=e;const n=t.querySelectorAll("a");for(let i=0;i<n.length;i++)n[i].setAttribute("target","_blank");this._element=t}return this._element}}}),un.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e._id===t._id&&e._showOnScreen===t._showOnScreen},un.prototype.equals=function(e){return un.equals(this,e)},un.getIonCredit=function(e){const t=Object(r["a"])(e.collapsible)&&!e.collapsible,n=new un(e.html,t);return n._isIon=-1!==n.html.indexOf("ion-credit.png"),n},un.clone=function(e){if(Object(r["a"])(e))return new un(e.html,e.showOnScreen)};var hn=un,dn=n("21d7");const fn={NONE:0,LERC:1};var pn=Object.freeze(fn);function mn(e,t,n){this.minimum=g.clone(Object(o["a"])(e,g.ZERO)),this.maximum=g.clone(Object(o["a"])(t,g.ZERO)),n=Object(r["a"])(n)?g.clone(n):g.midpoint(this.minimum,this.maximum,new g),this.center=n}mn.fromCorners=function(e,t,n){return i["a"].defined("minimum",e),i["a"].defined("maximum",t),Object(r["a"])(n)||(n=new mn),n.minimum=g.clone(e,n.minimum),n.maximum=g.clone(t,n.maximum),n.center=g.midpoint(e,t,n.center),n},mn.fromPoints=function(e,t){if(Object(r["a"])(t)||(t=new mn),!Object(r["a"])(e)||0===e.length)return t.minimum=g.clone(g.ZERO,t.minimum),t.maximum=g.clone(g.ZERO,t.maximum),t.center=g.clone(g.ZERO,t.center),t;let n=e[0].x,i=e[0].y,o=e[0].z,a=e[0].x,s=e[0].y,c=e[0].z;const l=e.length;for(let r=1;r<l;r++){const t=e[r],l=t.x,u=t.y,h=t.z;n=Math.min(l,n),a=Math.max(l,a),i=Math.min(u,i),s=Math.max(u,s),o=Math.min(h,o),c=Math.max(h,c)}const u=t.minimum;u.x=n,u.y=i,u.z=o;const h=t.maximum;return h.x=a,h.y=s,h.z=c,t.center=g.midpoint(u,h,t.center),t},mn.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.minimum=g.clone(e.minimum,t.minimum),t.maximum=g.clone(e.maximum,t.maximum),t.center=g.clone(e.center,t.center),t):new mn(e.minimum,e.maximum,e.center)},mn.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&g.equals(e.center,t.center)&&g.equals(e.minimum,t.minimum)&&g.equals(e.maximum,t.maximum)};let _n=new g;mn.intersectPlane=function(e,t){i["a"].defined("box",e),i["a"].defined("plane",t),_n=g.subtract(e.maximum,e.minimum,_n);const n=g.multiplyByScalar(_n,.5,_n),o=t.normal,r=n.x*Math.abs(o.x)+n.y*Math.abs(o.y)+n.z*Math.abs(o.z),a=g.dot(e.center,o)+t.distance;return a-r>0?G.INSIDE:a+r<0?G.OUTSIDE:G.INTERSECTING},mn.prototype.clone=function(e){return mn.clone(this,e)},mn.prototype.intersectPlane=function(e){return mn.intersectPlane(this,e)},mn.prototype.equals=function(e){return mn.equals(this,e)};var gn=mn;function bn(e,t){i["a"].typeOf.object("ellipsoid",e),this._ellipsoid=e,this._cameraPosition=new g,this._cameraPositionInScaledSpace=new g,this._distanceToLimbInScaledSpaceSquared=0,Object(r["a"])(t)&&(this.cameraPosition=t)}Object.defineProperties(bn.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},cameraPosition:{get:function(){return this._cameraPosition},set:function(e){const t=this._ellipsoid,n=t.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),i=g.magnitudeSquared(n)-1;g.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=n,this._distanceToLimbInScaledSpaceSquared=i}}});const yn=new g;bn.prototype.isPointVisible=function(e){const t=this._ellipsoid,n=t.transformPositionToScaledSpace(e,yn);return Sn(n,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)},bn.prototype.isScaledSpacePointVisible=function(e){return Sn(e,this._cameraPositionInScaledSpace,this._distanceToLimbInScaledSpaceSquared)};const vn=new g;bn.prototype.isScaledSpacePointVisiblePossiblyUnderEllipsoid=function(e,t){const n=this._ellipsoid;let i,o;return Object(r["a"])(t)&&t<0&&n.minimumRadius>-t?(o=vn,o.x=this._cameraPosition.x/(n.radii.x+t),o.y=this._cameraPosition.y/(n.radii.y+t),o.z=this._cameraPosition.z/(n.radii.z+t),i=o.x*o.x+o.y*o.y+o.z*o.z-1):(o=this._cameraPositionInScaledSpace,i=this._distanceToLimbInScaledSpaceSquared),Sn(e,o,i)},bn.prototype.computeHorizonCullingPoint=function(e,t,n){return Cn(this._ellipsoid,e,t,n)};const On=k.clone(k.UNIT_SPHERE);bn.prototype.computeHorizonCullingPointPossiblyUnderEllipsoid=function(e,t,n,i){const o=Tn(this._ellipsoid,n,On);return Cn(o,e,t,i)},bn.prototype.computeHorizonCullingPointFromVertices=function(e,t,n,i,o){return xn(this._ellipsoid,e,t,n,i,o)},bn.prototype.computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid=function(e,t,n,i,o,r){const a=Tn(this._ellipsoid,o,On);return xn(a,e,t,n,i,r)};const An=[];bn.prototype.computeHorizonCullingPointFromRectangle=function(e,t,n){i["a"].typeOf.object("rectangle",e);const o=Fe.subsample(e,t,0,An),r=Tt.fromPoints(o);if(!(g.magnitude(r.center)<.1*t.minimumRadius))return this.computeHorizonCullingPoint(r.center,o,n)};const wn=new g;function Tn(e,t,n){if(Object(r["a"])(t)&&t<0&&e.minimumRadius>-t){const i=g.fromElements(e.radii.x+t,e.radii.y+t,e.radii.z+t,wn);e=k.fromCartesian3(i,n)}return e}function Cn(e,t,n,o){i["a"].typeOf.object("directionToPoint",t),i["a"].defined("positions",n),Object(r["a"])(o)||(o=new g);const a=Ln(e,t);let s=0;for(let i=0,r=n.length;i<r;++i){const t=n[i],o=Pn(e,t,a);if(o<0)return;s=Math.max(s,o)}return jn(a,s,o)}const En=new g;function xn(e,t,n,a,s,c){i["a"].typeOf.object("directionToPoint",t),i["a"].defined("vertices",n),i["a"].typeOf.number("stride",a),Object(r["a"])(c)||(c=new g),a=Object(o["a"])(a,3),s=Object(o["a"])(s,g.ZERO);const l=Ln(e,t);let u=0;for(let i=0,o=n.length;i<o;i+=a){En.x=n[i]+s.x,En.y=n[i+1]+s.y,En.z=n[i+2]+s.z;const t=Pn(e,En,l);if(t<0)return;u=Math.max(u,t)}return jn(l,u,c)}function Sn(e,t,n){const i=t,o=n,r=g.subtract(e,i,yn),a=-g.dot(r,i),s=o<0?a>0:a>o&&a*a/g.magnitudeSquared(r)>o;return!s}const In=new g,Dn=new g;function Pn(e,t,n){const i=e.transformPositionToScaledSpace(t,In);let o=g.magnitudeSquared(i),r=Math.sqrt(o);const a=g.divideByScalar(i,r,Dn);o=Math.max(1,o),r=Math.max(1,r);const s=g.dot(a,n),c=g.magnitude(g.cross(a,n,a)),l=1/r,u=Math.sqrt(o-1)*l;return 1/(s*l-c*u)}function jn(e,t,n){if(!(t<=0||t===1/0||t!==t))return g.multiplyByScalar(e,t,n)}const Rn=new g;function Ln(e,t){return g.equals(t,g.ZERO)?t:(e.transformPositionToScaledSpace(t,Rn),g.normalize(Rn,Rn))}var Mn=bn;const Nn={};function Bn(e,t,n){const i=e+t;return s["a"].sign(e)!==s["a"].sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}Nn.computeDiscriminant=function(e,t,n){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");const i=t*t-4*e*n;return i},Nn.computeRealRoots=function(e,t,n){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");let i;if(0===e)return 0===t?[]:[-n/t];if(0===t){if(0===n)return[0,0];const t=Math.abs(n),o=Math.abs(e);if(t<o&&t/o<s["a"].EPSILON14)return[0,0];if(t>o&&o/t<s["a"].EPSILON14)return[];if(i=-n/e,i<0)return[];const r=Math.sqrt(i);return[-r,r]}if(0===n)return i=-t/e,i<0?[i,0]:[0,i];const o=t*t,r=4*e*n,c=Bn(o,-r,s["a"].EPSILON14);if(c<0)return[];const l=-.5*Bn(t,s["a"].sign(t)*Math.sqrt(c),s["a"].EPSILON14);return t>0?[l/e,n/l]:[n/l,l/e]};var Fn=Nn;const zn={};function kn(e,t,n,i){const o=e,r=t/3,a=n/3,s=i,c=o*a,l=r*s,u=r*r,h=a*a,d=o*a-u,f=o*s-r*a,p=r*s-h,m=4*d*p-f*f;let _,g;if(m<0){let e,t,n;u*l>=c*h?(e=o,t=d,n=-2*r*d+o*f):(e=s,t=p,n=-s*f+2*a*p);const i=n<0?-1:1,b=-i*Math.abs(e)*Math.sqrt(-m);g=-n+b;const y=g/2,v=y<0?-Math.pow(-y,1/3):Math.pow(y,1/3),O=g===b?-v:-t/v;return _=t<=0?v+O:-n/(v*v+O*O+t),u*l>=c*h?[(_-r)/o]:[-s/(_+a)]}const b=d,y=-2*r*d+o*f,v=p,O=-s*f+2*a*p,A=Math.sqrt(m),w=Math.sqrt(3)/2;let T=Math.abs(Math.atan2(o*A,-y)/3);_=2*Math.sqrt(-b);let C=Math.cos(T);g=_*C;let E=_*(-C/2-w*Math.sin(T));const x=g+E>2*r?g-r:E-r,S=o,I=x/S;T=Math.abs(Math.atan2(s*A,-O)/3),_=2*Math.sqrt(-v),C=Math.cos(T),g=_*C,E=_*(-C/2-w*Math.sin(T));const D=-s,P=g+E<2*a?g+a:E+a,j=D/P,R=S*P,L=-x*P-S*D,M=x*D,N=(a*L-r*M)/(-r*L+a*R);return I<=N?I<=j?N<=j?[I,N,j]:[I,j,N]:[j,I,N]:I<=j?[N,I,j]:N<=j?[N,j,I]:[j,N,I]}zn.computeDiscriminant=function(e,t,n,i){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");if("number"!==typeof i)throw new a["a"]("d is a required number.");const o=e*e,r=t*t,s=n*n,c=i*i,l=18*e*t*n*i+r*s-27*o*c-4*(e*s*n+r*t*i);return l},zn.computeRealRoots=function(e,t,n,i){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");if("number"!==typeof i)throw new a["a"]("d is a required number.");let o,r;if(0===e)return Fn.computeRealRoots(t,n,i);if(0===t){if(0===n){if(0===i)return[0,0,0];r=-i/e;const t=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[t,t,t]}return 0===i?(o=Fn.computeRealRoots(e,0,n),0===o.Length?[0]:[o[0],0,o[1]]):kn(e,0,n,i)}return 0===n?0===i?(r=-t/e,r<0?[r,0,0]:[0,0,r]):kn(e,t,0,i):0===i?(o=Fn.computeRealRoots(e,t,n),0===o.length?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]):kn(e,t,n,i)};var Un=zn;const Vn={};function Hn(e,t,n,i){const o=e*e,r=t-3*o/8,a=n-t*e/2+o*e/8,c=i-n*e/4+t*o/16-3*o*o/256,l=Un.computeRealRoots(1,2*r,r*r-4*c,-a*a);if(l.length>0){const t=-e/4,n=l[l.length-1];if(Math.abs(n)<s["a"].EPSILON14){const e=Fn.computeRealRoots(1,r,c);if(2===e.length){const n=e[0],i=e[1];let o;if(n>=0&&i>=0){const e=Math.sqrt(n),o=Math.sqrt(i);return[t-o,t-e,t+e,t+o]}if(n>=0&&i<0)return o=Math.sqrt(n),[t-o,t+o];if(n<0&&i>=0)return o=Math.sqrt(i),[t-o,t+o]}return[]}if(n>0){const e=Math.sqrt(n),i=(r+n-a/e)/2,o=(r+n+a/e)/2,s=Fn.computeRealRoots(1,e,i),c=Fn.computeRealRoots(1,-e,o);return 0!==s.length?(s[0]+=t,s[1]+=t,0!==c.length?(c[0]+=t,c[1]+=t,s[1]<=c[0]?[s[0],s[1],c[0],c[1]]:c[1]<=s[0]?[c[0],c[1],s[0],s[1]]:s[0]>=c[0]&&s[1]<=c[1]?[c[0],s[0],s[1],c[1]]:c[0]>=s[0]&&c[1]<=s[1]?[s[0],c[0],c[1],s[1]]:s[0]>c[0]&&s[0]<c[1]?[c[0],s[0],c[1],s[1]]:[s[0],c[0],s[1],c[1]]):s):0!==c.length?(c[0]+=t,c[1]+=t,c):[]}}return[]}function Gn(e,t,n,i){const o=n*n,r=t*t,a=e*e,c=-2*t,l=n*e+r-4*i,u=a*i-n*t*e+o,h=Un.computeRealRoots(1,c,l,u);if(h.length>0){const o=h[0],r=t-o,c=r*r,l=e/2,u=r/2,d=c-4*i,f=c+4*Math.abs(i),p=a-4*o,m=a+4*Math.abs(o);let _,g,b,y,v,O;if(o<0||d*m<p*f){const t=Math.sqrt(p);_=t/2,g=0===t?0:(e*u-n)/t}else{const t=Math.sqrt(d);_=0===t?0:(e*u-n)/t,g=t/2}0===l&&0===_?(b=0,y=0):s["a"].sign(l)===s["a"].sign(_)?(b=l+_,y=o/b):(y=l-_,b=o/y),0===u&&0===g?(v=0,O=0):s["a"].sign(u)===s["a"].sign(g)?(v=u+g,O=i/v):(O=u-g,v=i/O);const A=Fn.computeRealRoots(1,b,v),w=Fn.computeRealRoots(1,y,O);if(0!==A.length)return 0!==w.length?A[1]<=w[0]?[A[0],A[1],w[0],w[1]]:w[1]<=A[0]?[w[0],w[1],A[0],A[1]]:A[0]>=w[0]&&A[1]<=w[1]?[w[0],A[0],A[1],w[1]]:w[0]>=A[0]&&w[1]<=A[1]?[A[0],w[0],w[1],A[1]]:A[0]>w[0]&&A[0]<w[1]?[w[0],A[0],w[1],A[1]]:[A[0],w[0],A[1],w[1]]:A;if(0!==w.length)return w}return[]}Vn.computeDiscriminant=function(e,t,n,i,o){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");if("number"!==typeof i)throw new a["a"]("d is a required number.");if("number"!==typeof o)throw new a["a"]("e is a required number.");const r=e*e,s=r*e,c=t*t,l=c*t,u=n*n,h=u*n,d=i*i,f=d*i,p=o*o,m=p*o,_=c*u*d-4*l*f-4*e*h*d+18*e*t*n*f-27*r*d*d+256*s*m+o*(18*l*n*i-4*c*h+16*e*u*u-80*e*t*u*i-6*e*c*d+144*r*n*d)+p*(144*e*c*n-27*c*c-128*r*u-192*r*t*i);return _},Vn.computeRealRoots=function(e,t,n,i,o){if("number"!==typeof e)throw new a["a"]("a is a required number.");if("number"!==typeof t)throw new a["a"]("b is a required number.");if("number"!==typeof n)throw new a["a"]("c is a required number.");if("number"!==typeof i)throw new a["a"]("d is a required number.");if("number"!==typeof o)throw new a["a"]("e is a required number.");if(Math.abs(e)<s["a"].EPSILON15)return Un.computeRealRoots(t,n,i,o);const r=t/e,c=n/e,l=i/e,u=o/e;let h=r<0?1:0;switch(h+=c<0?h+1:h,h+=l<0?h+1:h,h+=u<0?h+1:h,h){case 0:return Hn(r,c,l,u);case 1:return Gn(r,c,l,u);case 2:return Gn(r,c,l,u);case 3:return Hn(r,c,l,u);case 4:return Hn(r,c,l,u);case 5:return Gn(r,c,l,u);case 6:return Hn(r,c,l,u);case 7:return Hn(r,c,l,u);case 8:return Gn(r,c,l,u);case 9:return Hn(r,c,l,u);case 10:return Hn(r,c,l,u);case 11:return Gn(r,c,l,u);case 12:return Hn(r,c,l,u);case 13:return Hn(r,c,l,u);case 14:return Hn(r,c,l,u);case 15:return Hn(r,c,l,u);default:return}};var Wn=Vn;function qn(e,t){t=g.clone(Object(o["a"])(t,g.ZERO)),g.equals(t,g.ZERO)||g.normalize(t,t),this.origin=g.clone(Object(o["a"])(e,g.ZERO)),this.direction=t}qn.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.origin=g.clone(e.origin),t.direction=g.clone(e.direction),t):new qn(e.origin,e.direction)},qn.getPoint=function(e,t,n){return i["a"].typeOf.object("ray",e),i["a"].typeOf.number("t",t),Object(r["a"])(n)||(n=new g),n=g.multiplyByScalar(e.direction,t,n),g.add(e.origin,n,n)};var Yn=qn;const Xn={rayPlane:function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("ray is required.");if(!Object(r["a"])(t))throw new a["a"]("plane is required.");Object(r["a"])(n)||(n=new g);const i=e.origin,o=e.direction,c=t.normal,l=g.dot(c,o);if(Math.abs(l)<s["a"].EPSILON15)return;const u=(-t.distance-g.dot(c,i))/l;return u<0?void 0:(n=g.multiplyByScalar(o,u,n),g.add(i,n,n))}},Kn=new g,$n=new g,Jn=new g,Qn=new g,Zn=new g;Xn.rayTriangleParametric=function(e,t,n,i,c){if(!Object(r["a"])(e))throw new a["a"]("ray is required.");if(!Object(r["a"])(t))throw new a["a"]("p0 is required.");if(!Object(r["a"])(n))throw new a["a"]("p1 is required.");if(!Object(r["a"])(i))throw new a["a"]("p2 is required.");c=Object(o["a"])(c,!1);const l=e.origin,u=e.direction,h=g.subtract(n,t,Kn),d=g.subtract(i,t,$n),f=g.cross(u,d,Jn),p=g.dot(h,f);let m,_,b,y,v;if(c){if(p<s["a"].EPSILON6)return;if(m=g.subtract(l,t,Qn),b=g.dot(m,f),b<0||b>p)return;if(_=g.cross(m,h,Zn),y=g.dot(u,_),y<0||b+y>p)return;v=g.dot(d,_)/p}else{if(Math.abs(p)<s["a"].EPSILON6)return;const e=1/p;if(m=g.subtract(l,t,Qn),b=g.dot(m,f)*e,b<0||b>1)return;if(_=g.cross(m,h,Zn),y=g.dot(u,_)*e,y<0||b+y>1)return;v=g.dot(d,_)*e}return v},Xn.rayTriangle=function(e,t,n,i,o,a){const s=Xn.rayTriangleParametric(e,t,n,i,o);if(Object(r["a"])(s)&&!(s<0))return Object(r["a"])(a)||(a=new g),g.multiplyByScalar(e.direction,s,a),g.add(e.origin,a,a)};const ei=new Yn;function ti(e,t,n,i){const o=t*t-4*e*n;if(o<0)return;if(o>0){const n=1/(2*e),r=Math.sqrt(o),a=(-t+r)*n,s=(-t-r)*n;return a<s?(i.root0=a,i.root1=s):(i.root0=s,i.root1=a),i}const r=-t/(2*e);return 0!==r?(i.root0=i.root1=r,i):void 0}Xn.lineSegmentTriangle=function(e,t,n,i,o,s,c){if(!Object(r["a"])(e))throw new a["a"]("v0 is required.");if(!Object(r["a"])(t))throw new a["a"]("v1 is required.");if(!Object(r["a"])(n))throw new a["a"]("p0 is required.");if(!Object(r["a"])(i))throw new a["a"]("p1 is required.");if(!Object(r["a"])(o))throw new a["a"]("p2 is required.");const l=ei;g.clone(e,l.origin),g.subtract(t,e,l.direction),g.normalize(l.direction,l.direction);const u=Xn.rayTriangleParametric(l,n,i,o,s);if(!(!Object(r["a"])(u)||u<0||u>g.distance(e,t)))return Object(r["a"])(c)||(c=new g),g.multiplyByScalar(l.direction,u,c),g.add(l.origin,c,c)};const ni={root0:0,root1:0};function ii(e,t,n){Object(r["a"])(n)||(n=new q);const i=e.origin,o=e.direction,a=t.center,s=t.radius*t.radius,c=g.subtract(i,a,Jn),l=g.dot(o,o),u=2*g.dot(o,c),h=g.magnitudeSquared(c)-s,d=ti(l,u,h,ni);if(Object(r["a"])(d))return n.start=d.root0,n.stop=d.root1,n}Xn.raySphere=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("ray is required.");if(!Object(r["a"])(t))throw new a["a"]("sphere is required.");if(n=ii(e,t,n),Object(r["a"])(n)&&!(n.stop<0))return n.start=Math.max(n.start,0),n};const oi=new Yn;Xn.lineSegmentSphere=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("p0 is required.");if(!Object(r["a"])(t))throw new a["a"]("p1 is required.");if(!Object(r["a"])(n))throw new a["a"]("sphere is required.");const o=oi;g.clone(e,o.origin);const s=g.subtract(t,e,o.direction),c=g.magnitude(s);if(g.normalize(s,s),i=ii(o,n,i),!(!Object(r["a"])(i)||i.stop<0||i.start>c))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,c),i};const ri=new g,ai=new g;function si(e,t,n){const i=e+t;return s["a"].sign(e)!==s["a"].sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}function ci(e,t,n,i,o){const r=i*i,a=o*o,c=(e[ce.COLUMN1ROW1]-e[ce.COLUMN2ROW2])*a,l=o*(i*si(e[ce.COLUMN1ROW0],e[ce.COLUMN0ROW1],s["a"].EPSILON15)+t.y),u=e[ce.COLUMN0ROW0]*r+e[ce.COLUMN2ROW2]*a+i*t.x+n,h=a*si(e[ce.COLUMN2ROW1],e[ce.COLUMN1ROW2],s["a"].EPSILON15),d=o*(i*si(e[ce.COLUMN2ROW0],e[ce.COLUMN0ROW2])+t.z);let f;const p=[];if(0===d&&0===h){if(f=Fn.computeRealRoots(c,l,u),0===f.length)return p;const e=f[0],t=Math.sqrt(Math.max(1-e*e,0));if(p.push(new g(i,o*e,o*-t)),p.push(new g(i,o*e,o*t)),2===f.length){const e=f[1],t=Math.sqrt(Math.max(1-e*e,0));p.push(new g(i,o*e,o*-t)),p.push(new g(i,o*e,o*t))}return p}const m=d*d,_=h*h,b=c*c,y=d*h,v=b+_,O=2*(l*c+y),A=2*u*c+l*l-_+m,w=2*(u*l-y),T=u*u-m;if(0===v&&0===O&&0===A&&0===w)return p;f=Wn.computeRealRoots(v,O,A,w,T);const C=f.length;if(0===C)return p;for(let E=0;E<C;++E){const e=f[E],t=e*e,n=Math.max(1-t,0),r=Math.sqrt(n);let a;a=s["a"].sign(c)===s["a"].sign(u)?si(c*t+u,l*e,s["a"].EPSILON12):s["a"].sign(u)===s["a"].sign(l*e)?si(c*t,l*e+u,s["a"].EPSILON12):si(c*t+l*e,u,s["a"].EPSILON12);const m=si(h*e,d,s["a"].EPSILON15),_=a*m;_<0?p.push(new g(i,o*e,o*r)):_>0?p.push(new g(i,o*e,o*-r)):0!==r?(p.push(new g(i,o*e,o*-r)),p.push(new g(i,o*e,o*r)),++E):p.push(new g(i,o*e,o*r))}return p}Xn.rayEllipsoid=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("ray is required.");if(!Object(r["a"])(t))throw new a["a"]("ellipsoid is required.");const n=t.oneOverRadii,i=g.multiplyComponents(n,e.origin,ri),o=g.multiplyComponents(n,e.direction,ai),s=g.magnitudeSquared(i),c=g.dot(i,o);let l,u,h,d,f;if(s>1){if(c>=0)return;const e=c*c;if(l=s-1,u=g.magnitudeSquared(o),h=u*l,e<h)return;if(e>h){d=c*c-h,f=-c+Math.sqrt(d);const e=f/u,t=l/f;return e<t?new q(e,t):{start:t,stop:e}}const t=Math.sqrt(l/u);return new q(t,t)}return s<1?(l=s-1,u=g.magnitudeSquared(o),h=u*l,d=c*c-h,f=-c+Math.sqrt(d),new q(0,f/u)):c<0?(u=g.magnitudeSquared(o),new q(0,-c/u)):void 0};const li=new g,ui=new g,hi=new g,di=new g,fi=new g,pi=new ce,mi=new ce,_i=new ce,gi=new ce,bi=new ce,yi=new ce,vi=new ce,Oi=new g,Ai=new g,wi=new I;Xn.grazingAltitudeLocation=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("ray is required.");if(!Object(r["a"])(t))throw new a["a"]("ellipsoid is required.");const n=e.origin,i=e.direction;if(!g.equals(n,g.ZERO)){const e=t.geodeticSurfaceNormal(n,li);if(g.dot(i,e)>=0)return n}const o=Object(r["a"])(this.rayEllipsoid(e,t)),c=t.transformPositionToScaledSpace(i,li),l=g.normalize(c,c),u=g.mostOrthogonalAxis(c,di),h=g.normalize(g.cross(u,l,ui),ui),d=g.normalize(g.cross(l,h,hi),hi),f=pi;f[0]=l.x,f[1]=l.y,f[2]=l.z,f[3]=h.x,f[4]=h.y,f[5]=h.z,f[6]=d.x,f[7]=d.y,f[8]=d.z;const p=ce.transpose(f,mi),m=ce.fromScale(t.radii,_i),_=ce.fromScale(t.oneOverRadii,gi),b=bi;b[0]=0,b[1]=-i.z,b[2]=i.y,b[3]=i.z,b[4]=0,b[5]=-i.x,b[6]=-i.y,b[7]=i.x,b[8]=0;const y=ce.multiply(ce.multiply(p,_,yi),b,yi),v=ce.multiply(ce.multiply(y,m,vi),f,vi),O=ce.multiplyByVector(y,n,fi),A=ci(v,g.negate(O,li),0,0,1);let w,T;const C=A.length;if(C>0){let e=g.clone(g.ZERO,Ai),r=Number.NEGATIVE_INFINITY;for(let t=0;t<C;++t){w=ce.multiplyByVector(m,ce.multiplyByVector(f,A[t],Oi),Oi);const o=g.normalize(g.subtract(w,n,di),di),a=g.dot(o,i);a>r&&(r=a,e=g.clone(w,e))}const a=t.cartesianToCartographic(e,wi);return r=s["a"].clamp(r,0,1),T=g.magnitude(g.subtract(e,n,di))*Math.sqrt(1-r*r),T=o?-T:T,a.height=T,t.cartographicToCartesian(a,new g)}};const Ti=new g;Xn.lineSegmentPlane=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("endPoint0 is required.");if(!Object(r["a"])(t))throw new a["a"]("endPoint1 is required.");if(!Object(r["a"])(n))throw new a["a"]("plane is required.");Object(r["a"])(i)||(i=new g);const o=g.subtract(t,e,Ti),c=n.normal,l=g.dot(c,o);if(Math.abs(l)<s["a"].EPSILON6)return;const u=g.dot(c,e),h=-(n.distance+u)/l;return h<0||h>1?void 0:(g.multiplyByScalar(o,h,i),g.add(e,i,i),i)},Xn.trianglePlaneIntersection=function(e,t,n,i){if(!Object(r["a"])(e)||!Object(r["a"])(t)||!Object(r["a"])(n)||!Object(r["a"])(i))throw new a["a"]("p0, p1, p2, and plane are required.");const o=i.normal,s=i.distance,c=g.dot(o,e)+s<0,l=g.dot(o,t)+s<0,u=g.dot(o,n)+s<0;let h,d,f=0;if(f+=c?1:0,f+=l?1:0,f+=u?1:0,1!==f&&2!==f||(h=new g,d=new g),1===f){if(c)return Xn.lineSegmentPlane(e,t,i,h),Xn.lineSegmentPlane(e,n,i,d),{positions:[e,t,n,h,d],indices:[0,3,4,1,2,4,1,4,3]};if(l)return Xn.lineSegmentPlane(t,n,i,h),Xn.lineSegmentPlane(t,e,i,d),{positions:[e,t,n,h,d],indices:[1,3,4,2,0,4,2,4,3]};if(u)return Xn.lineSegmentPlane(n,e,i,h),Xn.lineSegmentPlane(n,t,i,d),{positions:[e,t,n,h,d],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===f){if(!c)return Xn.lineSegmentPlane(t,e,i,h),Xn.lineSegmentPlane(n,e,i,d),{positions:[e,t,n,h,d],indices:[1,2,4,1,4,3,0,3,4]};if(!l)return Xn.lineSegmentPlane(n,t,i,h),Xn.lineSegmentPlane(e,t,i,d),{positions:[e,t,n,h,d],indices:[2,0,4,2,4,3,1,3,4]};if(!u)return Xn.lineSegmentPlane(e,n,i,h),Xn.lineSegmentPlane(t,n,i,d),{positions:[e,t,n,h,d],indices:[0,1,4,0,4,3,2,3,4]}}};var Ci=Xn;function Ei(e,t){if(i["a"].typeOf.object("normal",e),!s["a"].equalsEpsilon(g.magnitude(e),1,s["a"].EPSILON6))throw new a["a"]("normal must be normalized.");i["a"].typeOf.number("distance",t),this.normal=g.clone(e),this.distance=t}Ei.fromPointNormal=function(e,t,n){if(i["a"].typeOf.object("point",e),i["a"].typeOf.object("normal",t),!s["a"].equalsEpsilon(g.magnitude(t),1,s["a"].EPSILON6))throw new a["a"]("normal must be normalized.");const o=-g.dot(t,e);return Object(r["a"])(n)?(g.clone(t,n.normal),n.distance=o,n):new Ei(t,o)};const xi=new g;Ei.fromCartesian4=function(e,t){i["a"].typeOf.object("coefficients",e);const n=g.fromCartesian4(e,xi),o=e.w;if(!s["a"].equalsEpsilon(g.magnitude(n),1,s["a"].EPSILON6))throw new a["a"]("normal must be normalized.");return Object(r["a"])(t)?(g.clone(n,t.normal),t.distance=o,t):new Ei(n,o)},Ei.getPointDistance=function(e,t){return i["a"].typeOf.object("plane",e),i["a"].typeOf.object("point",t),g.dot(e.normal,t)+e.distance};const Si=new g;Ei.projectPointOntoPlane=function(e,t,n){i["a"].typeOf.object("plane",e),i["a"].typeOf.object("point",t),Object(r["a"])(n)||(n=new g);const o=Ei.getPointDistance(e,t),a=g.multiplyByScalar(e.normal,o,Si);return g.subtract(t,a,n)};const Ii=new Me,Di=new be,Pi=new g;Ei.transform=function(e,t,n){i["a"].typeOf.object("plane",e),i["a"].typeOf.object("transform",t);const o=e.normal,r=e.distance,a=Me.inverseTranspose(t,Ii);let s=be.fromElements(o.x,o.y,o.z,r,Di);s=Me.multiplyByVector(a,s,s);const c=g.fromCartesian4(s,Pi);return s=be.divideByScalar(s,g.magnitude(c),s),Ei.fromCartesian4(s,n)},Ei.clone=function(e,t){return i["a"].typeOf.object("plane",e),Object(r["a"])(t)?(g.clone(e.normal,t.normal),t.distance=e.distance,t):new Ei(e.normal,e.distance)},Ei.equals=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.distance===t.distance&&g.equals(e.normal,t.normal)},Ei.ORIGIN_XY_PLANE=Object.freeze(new Ei(g.UNIT_Z,0)),Ei.ORIGIN_YZ_PLANE=Object.freeze(new Ei(g.UNIT_X,0)),Ei.ORIGIN_ZX_PLANE=Object.freeze(new Ei(g.UNIT_Y,0));var ji=Ei;function Ri(e,t,n){i["a"].defined("array",e),i["a"].defined("itemToFind",t),i["a"].defined("comparator",n);let o,r,a=0,s=e.length-1;while(a<=s)if(o=~~((a+s)/2),r=n(e[o],t),r<0)a=o+1;else{if(!(r>0))return o;s=o-1}return~(s+1)}var Li=Ri;function Mi(e,t,n,i,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=i,this.ut1MinusUtc=o}var Ni=Mi;function Bi(e,t,n,i,o,r,a,s){this.year=e,this.month=t,this.day=n,this.hour=i,this.minute=o,this.second=r,this.millisecond=a,this.isLeapSecond=s}var Fi=Bi;function zi(e){if(null===e||isNaN(e))throw new a["a"]("year is required and must be a number.");return e%4===0&&e%100!==0||e%400===0}var ki=zi;function Ui(e,t){this.julianDate=e,this.offset=t}var Vi=Ui;const Hi={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5};var Gi=Object.freeze(Hi);const Wi={UTC:0,TAI:1};var qi=Object.freeze(Wi);const Yi=new Fi,Xi=[31,28,31,30,31,30,31,31,30,31,30,31],Ki=29;function $i(e,t){return fo.compare(e.julianDate,t.julianDate)}const Ji=new Vi;function Qi(e){Ji.julianDate=e;const t=fo.leapSeconds;let n=Li(t,Ji,$i);n<0&&(n=~n),n>=t.length&&(n=t.length-1);let i=t[n].offset;if(n>0){const o=fo.secondsDifference(t[n].julianDate,e);o>i&&(n--,i=t[n].offset)}fo.addSeconds(e,i,e)}function Zi(e,t){Ji.julianDate=e;const n=fo.leapSeconds;let i=Li(n,Ji,$i);if(i<0&&(i=~i),0===i)return fo.addSeconds(e,-n[0].offset,t);if(i>=n.length)return fo.addSeconds(e,-n[i-1].offset,t);const o=fo.secondsDifference(n[i].julianDate,e);return 0===o?fo.addSeconds(e,-n[i].offset,t):o<=1?void 0:fo.addSeconds(e,-n[--i].offset,t)}function eo(e,t,n){const i=t/Gi.SECONDS_PER_DAY|0;return e+=i,t-=Gi.SECONDS_PER_DAY*i,t<0&&(e--,t+=Gi.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function to(e,t,n,i,o,r,a){const s=(t-14)/12|0,c=e+4800+s;let l=(1461*c/4|0)+(367*(t-2-12*s)/12|0)-(3*((c+100)/100|0)/4|0)+n-32075;i-=12,i<0&&(i+=24);const u=r+(i*Gi.SECONDS_PER_HOUR+o*Gi.SECONDS_PER_MINUTE+a*Gi.SECONDS_PER_MILLISECOND);return u>=43200&&(l-=1),[l,u]}const no=/^(\d{4})$/,io=/^(\d{4})-(\d{2})$/,oo=/^(\d{4})-?(\d{3})$/,ro=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ao=/^(\d{4})-?(\d{2})-?(\d{2})$/,so=/([Z+\-])?(\d{2})?:?(\d{2})?$/,co=/^(\d{2})(\.\d+)?/.source+so.source,lo=/^(\d{2}):?(\d{2})(\.\d+)?/.source+so.source,uo=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+so.source,ho="Invalid ISO 8601 date.";function fo(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=Object(o["a"])(e,0),t=Object(o["a"])(t,0),n=Object(o["a"])(n,qi.UTC);const i=0|e;t+=(e-i)*Gi.SECONDS_PER_DAY,eo(i,t,this),n===qi.UTC&&Qi(this)}fo.fromGregorianDate=function(e,t){if(!(e instanceof Fi))throw new a["a"]("date must be a valid GregorianDate.");const n=to(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return Object(r["a"])(t)?(eo(n[0],n[1],t),Qi(t),t):new fo(n[0],n[1],qi.UTC)},fo.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new a["a"]("date must be a valid JavaScript Date.");const n=to(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Object(r["a"])(t)?(eo(n[0],n[1],t),Qi(t),t):new fo(n[0],n[1],qi.UTC)},fo.fromIso8601=function(e,t){if("string"!==typeof e)throw new a["a"](ho);e=e.replace(",",".");let n,i=e.split("T"),o=1,s=1,c=0,l=0,u=0,h=0;const d=i[0],f=i[1];let p,m,_,g;if(!Object(r["a"])(d))throw new a["a"](ho);if(i=d.match(ao),null!==i){if(_=d.split("-").length-1,_>0&&2!==_)throw new a["a"](ho);n=+i[1],o=+i[2],s=+i[3]}else if(i=d.match(io),null!==i)n=+i[1],o=+i[2];else if(i=d.match(no),null!==i)n=+i[1];else{let e;if(i=d.match(oo),null!==i){if(n=+i[1],e=+i[2],m=ki(n),e<1||m&&e>366||!m&&e>365)throw new a["a"](ho)}else{if(i=d.match(ro),null===i)throw new a["a"](ho);{n=+i[1];const t=+i[2],o=+i[3]||0;if(_=d.split("-").length-1,_>0&&(!Object(r["a"])(i[3])&&1!==_||Object(r["a"])(i[3])&&2!==_))throw new a["a"](ho);const s=new Date(Date.UTC(n,0,4));e=7*t+o-s.getUTCDay()-3}}p=new Date(Date.UTC(n,0,1)),p.setUTCDate(e),o=p.getUTCMonth()+1,s=p.getUTCDate()}if(m=ki(n),o<1||o>12||s<1||(2!==o||!m)&&s>Xi[o-1]||m&&2===o&&s>Ki)throw new a["a"](ho);if(Object(r["a"])(f)){if(i=f.match(uo),null!==i){if(_=f.split(":").length-1,_>0&&2!==_&&3!==_)throw new a["a"](ho);c=+i[1],l=+i[2],u=+i[3],h=1e3*+(i[4]||0),g=5}else if(i=f.match(lo),null!==i){if(_=f.split(":").length-1,_>2)throw new a["a"](ho);c=+i[1],l=+i[2],u=60*+(i[3]||0),g=4}else{if(i=f.match(co),null===i)throw new a["a"](ho);c=+i[1],l=60*+(i[2]||0),g=3}if(l>=60||u>=61||c>24||24===c&&(l>0||u>0||h>0))throw new a["a"](ho);const e=i[g],t=+i[g+1],r=+(i[g+2]||0);switch(e){case"+":c-=t,l-=r;break;case"-":c+=t,l+=r;break;case"Z":break;default:l+=new Date(Date.UTC(n,o-1,s,c,l)).getTimezoneOffset();break}}const b=60===u;b&&u--;while(l>=60)l-=60,c++;while(c>=24)c-=24,s++;p=m&&2===o?Ki:Xi[o-1];while(s>p)s-=p,o++,o>12&&(o-=12,n++),p=m&&2===o?Ki:Xi[o-1];while(l<0)l+=60,c--;while(c<0)c+=24,s--;while(s<1)o--,o<1&&(o+=12,n--),p=m&&2===o?Ki:Xi[o-1],s+=p;const y=to(n,o,s,c,l,u,h);return Object(r["a"])(t)?(eo(y[0],y[1],t),Qi(t)):t=new fo(y[0],y[1],qi.UTC),b&&fo.addSeconds(t,1,t),t},fo.now=function(e){return fo.fromDate(new Date,e)};const po=new fo(0,0,qi.TAI);fo.toGregorianDate=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");let n=!1,i=Zi(e,po);Object(r["a"])(i)||(fo.addSeconds(e,-1,po),i=Zi(po,po),n=!0);let o=i.dayNumber;const s=i.secondsOfDay;s>=43200&&(o+=1);let c=o+68569|0;const l=4*c/146097|0;c=c-((146097*l+3)/4|0)|0;const u=4e3*(c+1)/1461001|0;c=c-(1461*u/4|0)+31|0;const h=80*c/2447|0,d=c-(2447*h/80|0)|0;c=h/11|0;const f=h+2-12*c|0,p=100*(l-49)+u+c|0;let m=s/Gi.SECONDS_PER_HOUR|0,_=s-m*Gi.SECONDS_PER_HOUR;const g=_/Gi.SECONDS_PER_MINUTE|0;_-=g*Gi.SECONDS_PER_MINUTE;let b=0|_;const y=(_-b)/Gi.SECONDS_PER_MILLISECOND;return m+=12,m>23&&(m-=24),n&&(b+=1),Object(r["a"])(t)?(t.year=p,t.month=f,t.day=d,t.hour=m,t.minute=g,t.second=b,t.millisecond=y,t.isLeapSecond=n,t):new Fi(p,f,d,m,g,b,y,n)},fo.toDate=function(e){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");const t=fo.toGregorianDate(e,Yi);let n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},fo.toIso8601=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");const n=fo.toGregorianDate(e,Yi);let i=n.year,o=n.month,s=n.day,c=n.hour;const l=n.minute,u=n.second,h=n.millisecond;let d;return 1e4===i&&1===o&&1===s&&0===c&&0===l&&0===u&&0===h&&(i=9999,o=12,s=31,c=24),Object(r["a"])(t)||0===h?Object(r["a"])(t)&&0!==t?(d=(.01*h).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}T${c.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${d}Z`):`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}T${c.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}Z`:(d=(.01*h).toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}T${c.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${d}Z`)},fo.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new fo(e.dayNumber,e.secondsOfDay,qi.TAI)},fo.compare=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("left is required.");if(!Object(r["a"])(t))throw new a["a"]("right is required.");const n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},fo.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},fo.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(fo.secondsDifference(e,t))<=n},fo.totalDays=function(e){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");return e.dayNumber+e.secondsOfDay/Gi.SECONDS_PER_DAY},fo.secondsDifference=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("left is required.");if(!Object(r["a"])(t))throw new a["a"]("right is required.");const n=(e.dayNumber-t.dayNumber)*Gi.SECONDS_PER_DAY;return n+(e.secondsOfDay-t.secondsOfDay)},fo.daysDifference=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("left is required.");if(!Object(r["a"])(t))throw new a["a"]("right is required.");const n=e.dayNumber-t.dayNumber,i=(e.secondsOfDay-t.secondsOfDay)/Gi.SECONDS_PER_DAY;return n+i},fo.computeTaiMinusUtc=function(e){Ji.julianDate=e;const t=fo.leapSeconds;let n=Li(t,Ji,$i);return n<0&&(n=~n,--n,n<0&&(n=0)),t[n].offset},fo.addSeconds=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");if(!Object(r["a"])(t))throw new a["a"]("seconds is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");return eo(e.dayNumber,e.secondsOfDay+t,n)},fo.addMinutes=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");if(!Object(r["a"])(t))throw new a["a"]("minutes is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");const i=e.secondsOfDay+t*Gi.SECONDS_PER_MINUTE;return eo(e.dayNumber,i,n)},fo.addHours=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");if(!Object(r["a"])(t))throw new a["a"]("hours is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");const i=e.secondsOfDay+t*Gi.SECONDS_PER_HOUR;return eo(e.dayNumber,i,n)},fo.addDays=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("julianDate is required.");if(!Object(r["a"])(t))throw new a["a"]("days is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");const i=e.dayNumber+t;return eo(i,e.secondsOfDay,n)},fo.lessThan=function(e,t){return fo.compare(e,t)<0},fo.lessThanOrEquals=function(e,t){return fo.compare(e,t)<=0},fo.greaterThan=function(e,t){return fo.compare(e,t)>0},fo.greaterThanOrEquals=function(e,t){return fo.compare(e,t)>=0},fo.prototype.clone=function(e){return fo.clone(this,e)},fo.prototype.equals=function(e){return fo.equals(this,e)},fo.prototype.equalsEpsilon=function(e,t){return fo.equalsEpsilon(this,e,t)},fo.prototype.toString=function(){return fo.toIso8601(this)},fo.leapSeconds=[new Vi(new fo(2441317,43210,qi.TAI),10),new Vi(new fo(2441499,43211,qi.TAI),11),new Vi(new fo(2441683,43212,qi.TAI),12),new Vi(new fo(2442048,43213,qi.TAI),13),new Vi(new fo(2442413,43214,qi.TAI),14),new Vi(new fo(2442778,43215,qi.TAI),15),new Vi(new fo(2443144,43216,qi.TAI),16),new Vi(new fo(2443509,43217,qi.TAI),17),new Vi(new fo(2443874,43218,qi.TAI),18),new Vi(new fo(2444239,43219,qi.TAI),19),new Vi(new fo(2444786,43220,qi.TAI),20),new Vi(new fo(2445151,43221,qi.TAI),21),new Vi(new fo(2445516,43222,qi.TAI),22),new Vi(new fo(2446247,43223,qi.TAI),23),new Vi(new fo(2447161,43224,qi.TAI),24),new Vi(new fo(2447892,43225,qi.TAI),25),new Vi(new fo(2448257,43226,qi.TAI),26),new Vi(new fo(2448804,43227,qi.TAI),27),new Vi(new fo(2449169,43228,qi.TAI),28),new Vi(new fo(2449534,43229,qi.TAI),29),new Vi(new fo(2450083,43230,qi.TAI),30),new Vi(new fo(2450630,43231,qi.TAI),31),new Vi(new fo(2451179,43232,qi.TAI),32),new Vi(new fo(2453736,43233,qi.TAI),33),new Vi(new fo(2454832,43234,qi.TAI),34),new Vi(new fo(2456109,43235,qi.TAI),35),new Vi(new fo(2457204,43236,qi.TAI),36),new Vi(new fo(2457754,43237,qi.TAI),37)];var mo=fo;function _o(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=Object(o["a"])(e.addNewLeapSeconds,!0),Object(r["a"])(e.data))bo(this,e.data);else if(Object(r["a"])(e.url)){const t=Et["a"].createIfNeeded(e.url),n=this;this._downloadPromise=t.fetchJson().then((function(e){bo(n,e)})).catch((function(){n._dataError=`An error occurred while retrieving the EOP data from the URL ${t.url}.`}))}else bo(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function go(e,t){return mo.compare(e.julianDate,t)}function bo(e,t){if(!Object(r["a"])(t.columnNames))return void(e._dataError="Error in loaded EOP data: The columnNames property is required.");if(!Object(r["a"])(t.samples))return void(e._dataError="Error in loaded EOP data: The samples property is required.");const n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),a=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),c=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||a<0||s<0||c<0||l<0)return void(e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");const u=e._samples=t.samples,h=e._dates=[];let d;e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=a,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=c,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;const f=e._addNewLeapSeconds;for(let p=0,m=u.length;p<m;p+=e._columnCount){const e=u[p+n],t=u[p+l],i=e+Gi.MODIFIED_JULIAN_DATE_DIFFERENCE,o=new mo(i,t,qi.TAI);if(h.push(o),f){if(t!==d&&Object(r["a"])(d)){const e=mo.leapSeconds,n=Li(e,o,go);if(n<0){const i=new Vi(o,t);e.splice(~n,0,i)}}d=t}}}function yo(e,t,n,i,o){const r=n*i;o.xPoleWander=t[r+e._xPoleWanderRadiansColumn],o.yPoleWander=t[r+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[r+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[r+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[r+e._ut1MinusUtcSecondsColumn]}function vo(e,t,n){return t+e*(n-t)}function Oo(e,t,n,i,o,r,a){const s=e._columnCount;if(r>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;const c=t[o],l=t[r];if(c.equals(l)||i.equals(c))return yo(e,n,o,s,a),a;if(i.equals(l))return yo(e,n,r,s,a),a;const u=mo.secondsDifference(i,c)/mo.secondsDifference(l,c),h=o*s,d=r*s;let f=n[h+e._ut1MinusUtcSecondsColumn],p=n[d+e._ut1MinusUtcSecondsColumn];const m=p-f;if(m>.5||m<-.5){const t=n[h+e._taiMinusUtcSecondsColumn],o=n[d+e._taiMinusUtcSecondsColumn];t!==o&&(l.equals(i)?f=p:p-=o-t)}return a.xPoleWander=vo(u,n[h+e._xPoleWanderRadiansColumn],n[d+e._xPoleWanderRadiansColumn]),a.yPoleWander=vo(u,n[h+e._yPoleWanderRadiansColumn],n[d+e._yPoleWanderRadiansColumn]),a.xPoleOffset=vo(u,n[h+e._xCelestialPoleOffsetRadiansColumn],n[d+e._xCelestialPoleOffsetRadiansColumn]),a.yPoleOffset=vo(u,n[h+e._yCelestialPoleOffsetRadiansColumn],n[d+e._yCelestialPoleOffsetRadiansColumn]),a.ut1MinusUtc=vo(u,f,p),a}_o.NONE=Object.freeze({getPromiseToLoad:function(){return Promise.resolve()},compute:function(e,t){return Object(r["a"])(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new Ni(0,0,0,0,0),t}}),_o.prototype.getPromiseToLoad=function(){return Promise.resolve(this._downloadPromise)},_o.prototype.compute=function(e,t){if(!Object(r["a"])(this._samples)){if(Object(r["a"])(this._dataError))throw new ye["a"](this._dataError);return}if(Object(r["a"])(t)||(t=new Ni(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;const n=this._dates,i=this._lastIndex;let o=0,a=0;if(Object(r["a"])(i)){const s=n[i],c=n[i+1],l=mo.lessThanOrEquals(s,e),u=!Object(r["a"])(c),h=u||mo.greaterThanOrEquals(c,e);if(l&&h)return o=i,!u&&c.equals(e)&&++o,a=o+1,Oo(this,n,this._samples,e,o,a,t),t}let s=Li(n,e,mo.compare,this._dateColumn);return s>=0?(s<n.length-1&&n[s+1].equals(e)&&++s,o=s,a=s):(a=~s,o=a-1,o<0&&(o=0)),this._lastIndex=o,Oo(this,n,this._samples,e,o,a,t),t};var Ao=_o;function wo(e,t,n){this.heading=Object(o["a"])(e,0),this.pitch=Object(o["a"])(t,0),this.roll=Object(o["a"])(n,0)}wo.fromQuaternion=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("quaternion is required");Object(r["a"])(t)||(t=new wo);const n=2*(e.w*e.y-e.z*e.x),i=1-2*(e.x*e.x+e.y*e.y),o=2*(e.w*e.x+e.y*e.z),c=1-2*(e.y*e.y+e.z*e.z),l=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(l,c),t.roll=Math.atan2(o,i),t.pitch=-s["a"].asinClamped(n),t},wo.fromDegrees=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("heading is required");if(!Object(r["a"])(t))throw new a["a"]("pitch is required");if(!Object(r["a"])(n))throw new a["a"]("roll is required");return Object(r["a"])(i)||(i=new wo),i.heading=e*s["a"].RADIANS_PER_DEGREE,i.pitch=t*s["a"].RADIANS_PER_DEGREE,i.roll=n*s["a"].RADIANS_PER_DEGREE,i},wo.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new wo(e.heading,e.pitch,e.roll)},wo.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},wo.equalsEpsilon=function(e,t,n,i){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&s["a"].equalsEpsilon(e.heading,t.heading,n,i)&&s["a"].equalsEpsilon(e.pitch,t.pitch,n,i)&&s["a"].equalsEpsilon(e.roll,t.roll,n,i)},wo.prototype.clone=function(e){return wo.clone(this,e)},wo.prototype.equals=function(e){return wo.equals(this,e)},wo.prototype.equalsEpsilon=function(e,t,n){return wo.equalsEpsilon(this,e,t,n)},wo.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var To=wo;function Co(e,t,n){this.x=e,this.y=t,this.s=n}var Eo=Co;function xo(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._xysFileUrlTemplate=Et["a"].createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=Object(o["a"])(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=Object(o["a"])(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new mo(this._sampleZeroJulianEphemerisDate,0,qi.TAI),this._stepSizeDays=Object(o["a"])(e.stepSizeDays,1),this._samplesPerXysFile=Object(o["a"])(e.samplesPerXysFile,1e3),this._totalSamples=Object(o["a"])(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];const t=this._interpolationOrder,n=this._denominators=new Array(t+1),i=this._xTable=new Array(t+1),r=Math.pow(this._stepSizeDays,t);for(let o=0;o<=t;++o){n[o]=r,i[o]=o*this._stepSizeDays;for(let e=0;e<=t;++e)e!==o&&(n[o]*=o-e);n[o]=1/n[o]}this._work=new Array(t+1),this._coef=new Array(t+1)}const So=new mo(0,0,qi.TAI);function Io(e,t,n){const i=So;return i.dayNumber=t,i.secondsOfDay=n,mo.daysDifference(i,e._sampleZeroDateTT)}function Do(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let n;const i=e._xysFileUrlTemplate;n=Object(r["a"])(i)?i.getDerivedResource({templateValues:{0:t}}):new Et["a"]({url:Bt(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)});const o=n.fetchJson().then((function(n){e._chunkDownloadsInProgress[t]=!1;const i=e._samples,o=n.samples,r=t*e._samplesPerXysFile*3;for(let e=0,t=o.length;e<t;++e)i[r+e]=o[e]}));return e._chunkDownloadsInProgress[t]=o,o}xo.prototype.preload=function(e,t,n,i){const o=Io(this,e,t),r=Io(this,n,i);let a=o/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=r/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);const c=a/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,u=[];for(let h=c;h<=l;++h)u.push(Do(this,h));return Promise.all(u)},xo.prototype.computeXysRadians=function(e,t,n){const i=Io(this,e,t);if(i<0)return;const o=i/this._stepSizeDays|0;if(o>=this._totalSamples)return;const a=this._interpolationOrder;let s=o-(a/2|0);s<0&&(s=0);let c=s+a;c>=this._totalSamples&&(c=this._totalSamples-1,s=c-a,s<0&&(s=0));let l=!1;const u=this._samples;if(Object(r["a"])(u[3*s])||(Do(this,s/this._samplesPerXysFile|0),l=!0),Object(r["a"])(u[3*c])||(Do(this,c/this._samplesPerXysFile|0),l=!0),l)return;Object(r["a"])(n)?(n.x=0,n.y=0,n.s=0):n=new Eo(0,0,0);const h=i-s*this._stepSizeDays,d=this._work,f=this._denominators,p=this._coef,m=this._xTable;let _,g;for(_=0;_<=a;++_)d[_]=h-m[_];for(_=0;_<=a;++_){for(p[_]=1,g=0;g<=a;++g)g!==_&&(p[_]*=d[g]);p[_]*=f[_];let e=3*(s+_);n.x+=p[_]*u[e++],n.y+=p[_]*u[e++],n.s+=p[_]*u[e]}return n};var Po=xo;let jo;const Ro={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Lo={};Object.defineProperties(Lo,{element:{get:function(){if(Lo.supportsFullscreen())return document[Ro.fullscreenElement]}},changeEventName:{get:function(){if(Lo.supportsFullscreen())return Ro.fullscreenchange}},errorEventName:{get:function(){if(Lo.supportsFullscreen())return Ro.fullscreenerror}},enabled:{get:function(){if(Lo.supportsFullscreen())return document[Ro.fullscreenEnabled]}},fullscreen:{get:function(){if(Lo.supportsFullscreen())return null!==Lo.element}}}),Lo.supportsFullscreen=function(){if(Object(r["a"])(jo))return jo;jo=!1;const e=document.body;if("function"===typeof e.requestFullscreen)return Ro.requestFullscreen="requestFullscreen",Ro.exitFullscreen="exitFullscreen",Ro.fullscreenEnabled="fullscreenEnabled",Ro.fullscreenElement="fullscreenElement",Ro.fullscreenchange="fullscreenchange",Ro.fullscreenerror="fullscreenerror",jo=!0,jo;const t=["webkit","moz","o","ms","khtml"];let n;for(let i=0,o=t.length;i<o;++i){const o=t[i];n=`${o}RequestFullscreen`,"function"===typeof e[n]?(Ro.requestFullscreen=n,jo=!0):(n=`${o}RequestFullScreen`,"function"===typeof e[n]&&(Ro.requestFullscreen=n,jo=!0)),n=`${o}ExitFullscreen`,"function"===typeof document[n]?Ro.exitFullscreen=n:(n=`${o}CancelFullScreen`,"function"===typeof document[n]&&(Ro.exitFullscreen=n)),n=`${o}FullscreenEnabled`,void 0!==document[n]?Ro.fullscreenEnabled=n:(n=`${o}FullScreenEnabled`,void 0!==document[n]&&(Ro.fullscreenEnabled=n)),n=`${o}FullscreenElement`,void 0!==document[n]?Ro.fullscreenElement=n:(n=`${o}FullScreenElement`,void 0!==document[n]&&(Ro.fullscreenElement=n)),n=`${o}fullscreenchange`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenChange"),Ro.fullscreenchange=n),n=`${o}fullscreenerror`,void 0!==document[`on${n}`]&&("ms"===o&&(n="MSFullscreenError"),Ro.fullscreenerror=n)}return jo},Lo.requestFullscreen=function(e,t){Lo.supportsFullscreen()&&e[Ro.requestFullscreen]({vrDisplay:t})},Lo.exitFullscreen=function(){Lo.supportsFullscreen()&&document[Ro.exitFullscreen]()},Lo._names=Ro;var Mo=Lo;let No,Bo,Fo,zo,ko,Uo,Vo,Ho,Go,Wo,qo,Yo,Xo,Ko,$o,Jo,Qo,Zo;function er(e){const t=e.split(".");for(let n=0,i=t.length;n<i;++n)t[n]=parseInt(t[n],10);return t}function tr(){if(!Object(r["a"])(Bo)&&(Bo=!1,!lr())){const e=/ Chrome\/([\.0-9]+)/.exec(No.userAgent);null!==e&&(Bo=!0,Fo=er(e[1]))}return Bo}function nr(){return tr()&&Fo}function ir(){if(!Object(r["a"])(zo)&&(zo=!1,!tr()&&!lr()&&/ Safari\/[\.0-9]+/.test(No.userAgent))){const e=/ Version\/([\.0-9]+)/.exec(No.userAgent);null!==e&&(zo=!0,ko=er(e[1]))}return zo}function or(){return ir()&&ko}function rr(){if(!Object(r["a"])(Uo)){Uo=!1;const e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(No.userAgent);null!==e&&(Uo=!0,Vo=er(e[1]),Vo.isNightly=!!e[2])}return Uo}function ar(){return rr()&&Vo}function sr(){if(!Object(r["a"])(Ho)){let e;Ho=!1,"Microsoft Internet Explorer"===No.appName?(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(No.userAgent),null!==e&&(Ho=!0,Go=er(e[1]))):"Netscape"===No.appName&&(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(No.userAgent),null!==e&&(Ho=!0,Go=er(e[1])))}return Ho}function cr(){return sr()&&Go}function lr(){if(!Object(r["a"])(Wo)){Wo=!1;const e=/ Edg\/([\.0-9]+)/.exec(No.userAgent);null!==e&&(Wo=!0,qo=er(e[1]))}return Wo}function ur(){return lr()&&qo}function hr(){if(!Object(r["a"])(Yo)){Yo=!1;const e=/Firefox\/([\.0-9]+)/.exec(No.userAgent);null!==e&&(Yo=!0,Xo=er(e[1]))}return Yo}function dr(){return Object(r["a"])(Ko)||(Ko=/Windows/i.test(No.appVersion)),Ko}function fr(){return Object(r["a"])($o)||($o="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),$o}function pr(){return hr()&&Xo}function mr(){return Object(r["a"])(Jo)||(Jo=!hr()&&"undefined"!==typeof PointerEvent&&(!Object(r["a"])(No.pointerEnabled)||No.pointerEnabled)),Jo}function _r(){if(!Object(r["a"])(Zo)){const e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");const t=e.style.imageRendering;Zo=Object(r["a"])(t)&&""!==t,Zo&&(Qo=t)}return Zo}function gr(){return _r()?Qo:void 0}function br(){if(!br.initialized)throw new a["a"]("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return br._result}No="undefined"!==typeof navigator?navigator:{},br._promise=void 0,br._result=void 0,br.initialize=function(){return Object(r["a"])(br._promise)||(br._promise=new Promise(e=>{const t=new Image;t.onload=function(){br._result=t.width>0&&t.height>0,e(br._result)},t.onerror=function(){br._result=!1,e(br._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),br._promise},Object.defineProperties(br,{initialized:{get:function(){return Object(r["a"])(br._result)}}});const yr=[];"undefined"!==typeof ArrayBuffer&&(yr.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!==typeof Uint8ClampedArray&&yr.push(Uint8ClampedArray),"undefined"!==typeof Uint8ClampedArray&&yr.push(Uint8ClampedArray),"undefined"!==typeof BigInt64Array&&yr.push(BigInt64Array),"undefined"!==typeof BigUint64Array&&yr.push(BigUint64Array));const vr={isChrome:tr,chromeVersion:nr,isSafari:ir,safariVersion:or,isWebkit:rr,webkitVersion:ar,isInternetExplorer:sr,internetExplorerVersion:cr,isEdge:lr,edgeVersion:ur,isFirefox:hr,firefoxVersion:pr,isWindows:dr,isIPadOrIOS:fr,hardwareConcurrency:Object(o["a"])(No.hardwareConcurrency,3),supportsPointerEvents:mr,supportsImageRenderingPixelated:_r,supportsWebP:br,imageRenderingValue:gr,typedArrayTypes:yr,supportsBasis:function(e){return vr.supportsWebAssembly()&&e.context.supportsBasis},supportsFullscreen:function(){return Mo.supportsFullscreen()},supportsTypedArrays:function(){return"undefined"!==typeof ArrayBuffer},supportsBigInt64Array:function(){return"undefined"!==typeof BigInt64Array},supportsBigUint64Array:function(){return"undefined"!==typeof BigUint64Array},supportsBigInt:function(){return"undefined"!==typeof BigInt},supportsWebWorkers:function(){return"undefined"!==typeof Worker},supportsWebAssembly:function(){return"undefined"!==typeof WebAssembly}};var Or=vr;function Ar(e,t,n,i){this.x=Object(o["a"])(e,0),this.y=Object(o["a"])(t,0),this.z=Object(o["a"])(n,0),this.w=Object(o["a"])(i,0)}let wr=new g;Ar.fromAxisAngle=function(e,t,n){i["a"].typeOf.object("axis",e),i["a"].typeOf.number("angle",t);const o=t/2,a=Math.sin(o);wr=g.normalize(e,wr);const s=wr.x*a,c=wr.y*a,l=wr.z*a,u=Math.cos(o);return Object(r["a"])(n)?(n.x=s,n.y=c,n.z=l,n.w=u,n):new Ar(s,c,l,u)};const Tr=[1,2,0],Cr=new Array(3);Ar.fromRotationMatrix=function(e,t){let n,o,a,s,c;i["a"].typeOf.object("matrix",e);const l=e[ce.COLUMN0ROW0],u=e[ce.COLUMN1ROW1],h=e[ce.COLUMN2ROW2],d=l+u+h;if(d>0)n=Math.sqrt(d+1),c=.5*n,n=.5/n,o=(e[ce.COLUMN1ROW2]-e[ce.COLUMN2ROW1])*n,a=(e[ce.COLUMN2ROW0]-e[ce.COLUMN0ROW2])*n,s=(e[ce.COLUMN0ROW1]-e[ce.COLUMN1ROW0])*n;else{const t=Tr;let i=0;u>l&&(i=1),h>l&&h>u&&(i=2);const r=t[i],d=t[r];n=Math.sqrt(e[ce.getElementIndex(i,i)]-e[ce.getElementIndex(r,r)]-e[ce.getElementIndex(d,d)]+1);const f=Cr;f[i]=.5*n,n=.5/n,c=(e[ce.getElementIndex(d,r)]-e[ce.getElementIndex(r,d)])*n,f[r]=(e[ce.getElementIndex(r,i)]+e[ce.getElementIndex(i,r)])*n,f[d]=(e[ce.getElementIndex(d,i)]+e[ce.getElementIndex(i,d)])*n,o=-f[0],a=-f[1],s=-f[2]}return Object(r["a"])(t)?(t.x=o,t.y=a,t.z=s,t.w=c,t):new Ar(o,a,s,c)};const Er=new Ar;let xr=new Ar,Sr=new Ar,Ir=new Ar;Ar.fromHeadingPitchRoll=function(e,t){return i["a"].typeOf.object("headingPitchRoll",e),Ir=Ar.fromAxisAngle(g.UNIT_X,e.roll,Er),Sr=Ar.fromAxisAngle(g.UNIT_Y,-e.pitch,t),t=Ar.multiply(Sr,Ir,Sr),xr=Ar.fromAxisAngle(g.UNIT_Z,-e.heading,Er),Ar.multiply(xr,t,t)};const Dr=new g,Pr=new g,jr=new Ar,Rr=new Ar,Lr=new Ar;Ar.packedLength=4,Ar.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},Ar.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Ar),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},Ar.packedInterpolationLength=3,Ar.convertPackedArrayForInterpolation=function(e,t,n,i){Ar.unpack(e,4*n,Lr),Ar.conjugate(Lr,Lr);for(let o=0,a=n-t+1;o<a;o++){const n=3*o;Ar.unpack(e,4*(t+o),jr),Ar.multiply(jr,Lr,jr),jr.w<0&&Ar.negate(jr,jr),Ar.computeAxis(jr,Dr);const a=Ar.computeAngle(jr);Object(r["a"])(i)||(i=[]),i[n]=Dr.x*a,i[n+1]=Dr.y*a,i[n+2]=Dr.z*a}},Ar.unpackInterpolationResult=function(e,t,n,i,o){Object(r["a"])(o)||(o=new Ar),g.fromArray(e,0,Pr);const a=g.magnitude(Pr);return Ar.unpack(t,4*i,Rr),0===a?Ar.clone(Ar.IDENTITY,jr):Ar.fromAxisAngle(Pr,a,jr),Ar.multiply(jr,Rr,o)},Ar.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Ar(e.x,e.y,e.z,e.w)},Ar.conjugate=function(e,t){return i["a"].typeOf.object("quaternion",e),i["a"].typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},Ar.magnitudeSquared=function(e){return i["a"].typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Ar.magnitude=function(e){return Math.sqrt(Ar.magnitudeSquared(e))},Ar.normalize=function(e,t){i["a"].typeOf.object("result",t);const n=1/Ar.magnitude(e),o=e.x*n,r=e.y*n,a=e.z*n,s=e.w*n;return t.x=o,t.y=r,t.z=a,t.w=s,t},Ar.inverse=function(e,t){i["a"].typeOf.object("result",t);const n=Ar.magnitudeSquared(e);return t=Ar.conjugate(e,t),Ar.multiplyByScalar(t,1/n,t)},Ar.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},Ar.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},Ar.negate=function(e,t){return i["a"].typeOf.object("quaternion",e),i["a"].typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Ar.dot=function(e,t){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Ar.multiply=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e.x,r=e.y,a=e.z,s=e.w,c=t.x,l=t.y,u=t.z,h=t.w,d=s*c+o*h+r*u-a*l,f=s*l-o*u+r*h+a*c,p=s*u+o*l-r*c+a*h,m=s*h-o*c-r*l-a*u;return n.x=d,n.y=f,n.z=p,n.w=m,n},Ar.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("quaternion",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},Ar.divideByScalar=function(e,t,n){return i["a"].typeOf.object("quaternion",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},Ar.computeAxis=function(e,t){i["a"].typeOf.object("quaternion",e),i["a"].typeOf.object("result",t);const n=e.w;if(Math.abs(n-1)<s["a"].EPSILON6)return t.x=t.y=t.z=0,t;const o=1/Math.sqrt(1-n*n);return t.x=e.x*o,t.y=e.y*o,t.z=e.z*o,t},Ar.computeAngle=function(e){return i["a"].typeOf.object("quaternion",e),Math.abs(e.w-1)<s["a"].EPSILON6?0:2*Math.acos(e.w)};let Mr=new Ar;Ar.lerp=function(e,t,n,o){return i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o),Mr=Ar.multiplyByScalar(t,n,Mr),o=Ar.multiplyByScalar(e,1-n,o),Ar.add(Mr,o,o)};let Nr=new Ar,Br=new Ar,Fr=new Ar;Ar.slerp=function(e,t,n,o){i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o);let r=Ar.dot(e,t),a=t;if(r<0&&(r=-r,a=Nr=Ar.negate(t,Nr)),1-r<s["a"].EPSILON6)return Ar.lerp(e,a,n,o);const c=Math.acos(r);return Br=Ar.multiplyByScalar(e,Math.sin((1-n)*c),Br),Fr=Ar.multiplyByScalar(a,Math.sin(n*c),Fr),o=Ar.add(Br,Fr,o),Ar.multiplyByScalar(o,1/Math.sin(c),o)},Ar.log=function(e,t){i["a"].typeOf.object("quaternion",e),i["a"].typeOf.object("result",t);const n=s["a"].acosClamped(e.w);let o=0;return 0!==n&&(o=n/Math.sin(n)),g.multiplyByScalar(e,o,t)},Ar.exp=function(e,t){i["a"].typeOf.object("cartesian",e),i["a"].typeOf.object("result",t);const n=g.magnitude(e);let o=0;return 0!==n&&(o=Math.sin(n)/n),t.x=e.x*o,t.y=e.y*o,t.z=e.z*o,t.w=Math.cos(n),t};const zr=new g,kr=new g,Ur=new Ar,Vr=new Ar;Ar.computeInnerQuadrangle=function(e,t,n,o){i["a"].typeOf.object("q0",e),i["a"].typeOf.object("q1",t),i["a"].typeOf.object("q2",n),i["a"].typeOf.object("result",o);const r=Ar.conjugate(t,Ur);Ar.multiply(r,n,Vr);const a=Ar.log(Vr,zr);Ar.multiply(r,e,Vr);const s=Ar.log(Vr,kr);return g.add(a,s,a),g.multiplyByScalar(a,.25,a),g.negate(a,a),Ar.exp(a,Ur),Ar.multiply(t,Ur,o)},Ar.squad=function(e,t,n,o,r,a){i["a"].typeOf.object("q0",e),i["a"].typeOf.object("q1",t),i["a"].typeOf.object("s0",n),i["a"].typeOf.object("s1",o),i["a"].typeOf.number("t",r),i["a"].typeOf.object("result",a);const s=Ar.slerp(e,t,r,Ur),c=Ar.slerp(n,o,r,Vr);return Ar.slerp(s,c,2*r*(1-r),a)};const Hr=new Ar,Gr=1.9011074535173003,Wr=Or.supportsTypedArrays()?new Float32Array(8):[],qr=Or.supportsTypedArrays()?new Float32Array(8):[],Yr=Or.supportsTypedArrays()?new Float32Array(8):[],Xr=Or.supportsTypedArrays()?new Float32Array(8):[];for(let Set=0;Set<7;++Set){const e=Set+1,t=2*e+1;Wr[Set]=1/(e*t),qr[Set]=e/t}Wr[7]=Gr/136,qr[7]=8*Gr/17,Ar.fastSlerp=function(e,t,n,o){i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o);let r,a=Ar.dot(e,t);a>=0?r=1:(r=-1,a=-a);const s=a-1,c=1-n,l=n*n,u=c*c;for(let i=7;i>=0;--i)Yr[i]=(Wr[i]*l-qr[i])*s,Xr[i]=(Wr[i]*u-qr[i])*s;const h=r*n*(1+Yr[0]*(1+Yr[1]*(1+Yr[2]*(1+Yr[3]*(1+Yr[4]*(1+Yr[5]*(1+Yr[6]*(1+Yr[7])))))))),d=c*(1+Xr[0]*(1+Xr[1]*(1+Xr[2]*(1+Xr[3]*(1+Xr[4]*(1+Xr[5]*(1+Xr[6]*(1+Xr[7])))))))),f=Ar.multiplyByScalar(e,d,Hr);return Ar.multiplyByScalar(t,h,o),Ar.add(f,o,o)},Ar.fastSquad=function(e,t,n,o,r,a){i["a"].typeOf.object("q0",e),i["a"].typeOf.object("q1",t),i["a"].typeOf.object("s0",n),i["a"].typeOf.object("s1",o),i["a"].typeOf.number("t",r),i["a"].typeOf.object("result",a);const s=Ar.fastSlerp(e,t,r,Ur),c=Ar.fastSlerp(n,o,r,Vr);return Ar.fastSlerp(s,c,2*r*(1-r),a)},Ar.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Ar.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},Ar.ZERO=Object.freeze(new Ar(0,0,0,0)),Ar.IDENTITY=Object.freeze(new Ar(0,0,0,1)),Ar.prototype.clone=function(e){return Ar.clone(this,e)},Ar.prototype.equals=function(e){return Ar.equals(this,e)},Ar.prototype.equalsEpsilon=function(e,t){return Ar.equalsEpsilon(this,e,t)},Ar.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};var Kr=Ar;const $r={},Jr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Qr={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Zr={},ea={east:new g,north:new g,up:new g,west:new g,south:new g,down:new g};let ta=new g,na=new g,ia=new g;$r.localFrameToFixedFrameGenerator=function(e,t){if(!Jr.hasOwnProperty(e)||!Jr[e].hasOwnProperty(t))throw new a["a"]("firstAxis and secondAxis must be east, north, up, west, south or down.");const n=Jr[e][t];let i;const c=e+t;return Object(r["a"])(Zr[c])?i=Zr[c]:(i=function(i,c,l){if(!Object(r["a"])(i))throw new a["a"]("origin is required.");if(Object(r["a"])(l)||(l=new Me),g.equalsEpsilon(i,g.ZERO,s["a"].EPSILON14))g.unpack(Qr[e],0,ta),g.unpack(Qr[t],0,na),g.unpack(Qr[n],0,ia);else if(s["a"].equalsEpsilon(i.x,0,s["a"].EPSILON14)&&s["a"].equalsEpsilon(i.y,0,s["a"].EPSILON14)){const o=s["a"].sign(i.z);g.unpack(Qr[e],0,ta),"east"!==e&&"west"!==e&&g.multiplyByScalar(ta,o,ta),g.unpack(Qr[t],0,na),"east"!==t&&"west"!==t&&g.multiplyByScalar(na,o,na),g.unpack(Qr[n],0,ia),"east"!==n&&"west"!==n&&g.multiplyByScalar(ia,o,ia)}else{c=Object(o["a"])(c,k.WGS84),c.geodeticSurfaceNormal(i,ea.up);const r=ea.up,a=ea.east;a.x=-i.y,a.y=i.x,a.z=0,g.normalize(a,ea.east),g.cross(r,a,ea.north),g.multiplyByScalar(ea.up,-1,ea.down),g.multiplyByScalar(ea.east,-1,ea.west),g.multiplyByScalar(ea.north,-1,ea.south),ta=ea[e],na=ea[t],ia=ea[n]}return l[0]=ta.x,l[1]=ta.y,l[2]=ta.z,l[3]=0,l[4]=na.x,l[5]=na.y,l[6]=na.z,l[7]=0,l[8]=ia.x,l[9]=ia.y,l[10]=ia.z,l[11]=0,l[12]=i.x,l[13]=i.y,l[14]=i.z,l[15]=1,l},Zr[c]=i),i},$r.eastNorthUpToFixedFrame=$r.localFrameToFixedFrameGenerator("east","north"),$r.northEastDownToFixedFrame=$r.localFrameToFixedFrameGenerator("north","east"),$r.northUpEastToFixedFrame=$r.localFrameToFixedFrameGenerator("north","up"),$r.northWestUpToFixedFrame=$r.localFrameToFixedFrameGenerator("north","west");const oa=new Kr,ra=new g(1,1,1),aa=new Me;$r.headingPitchRollToFixedFrame=function(e,t,n,r,a){i["a"].typeOf.object("HeadingPitchRoll",t),r=Object(o["a"])(r,$r.eastNorthUpToFixedFrame);const s=Kr.fromHeadingPitchRoll(t,oa),c=Me.fromTranslationQuaternionRotationScale(g.ZERO,s,ra,aa);return a=r(e,n,a),Me.multiply(a,c,a)};const sa=new Me,ca=new ce;$r.headingPitchRollQuaternion=function(e,t,n,o,r){i["a"].typeOf.object("HeadingPitchRoll",t);const a=$r.headingPitchRollToFixedFrame(e,t,n,o,sa),s=Me.getMatrix3(a,ca);return Kr.fromRotationMatrix(s,r)};const la=new g(1,1,1),ua=new g,ha=new Me,da=new Me,fa=new ce,pa=new Kr;$r.fixedFrameToHeadingPitchRoll=function(e,t,n,a){i["a"].defined("transform",e),t=Object(o["a"])(t,k.WGS84),n=Object(o["a"])(n,$r.eastNorthUpToFixedFrame),Object(r["a"])(a)||(a=new To);const s=Me.getTranslation(e,ua);if(g.equals(s,g.ZERO))return a.heading=0,a.pitch=0,a.roll=0,a;let c=Me.inverseTransformation(n(s,t,ha),ha),l=Me.setScale(e,la,da);l=Me.setTranslation(l,g.ZERO,l),c=Me.multiply(c,l,c);let u=Kr.fromRotationMatrix(Me.getMatrix3(c,fa),pa);return u=Kr.normalize(u,u),To.fromQuaternion(u,a)};const ma=24110.54841,_a=8640184.812866,ga=.093104,ba=-62e-7,ya=11772758384668e-32,va=72921158553e-15,Oa=s["a"].TWO_PI/86400;let Aa=new mo;$r.computeTemeToPseudoFixedMatrix=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("date is required.");Aa=mo.addSeconds(e,-mo.computeTaiMinusUtc(e),Aa);const n=Aa.dayNumber,i=Aa.secondsOfDay;let o;const c=n-2451545;o=i>=43200?(c+.5)/Gi.DAYS_PER_JULIAN_CENTURY:(c-.5)/Gi.DAYS_PER_JULIAN_CENTURY;const l=ma+o*(_a+o*(ga+o*ba)),u=l*Oa%s["a"].TWO_PI,h=va+ya*(n-2451545.5),d=(i+.5*Gi.SECONDS_PER_DAY)%Gi.SECONDS_PER_DAY,f=u+h*d,p=Math.cos(f),m=Math.sin(f);return Object(r["a"])(t)?(t[0]=p,t[1]=-m,t[2]=0,t[3]=m,t[4]=p,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new ce(p,m,0,-m,p,0,0,0,1)},$r.iau2006XysData=new Po,$r.earthOrientationParameters=Ao.NONE;const wa=32.184,Ta=2451545;$r.preloadIcrfFixed=function(e){const t=e.start.dayNumber,n=e.start.secondsOfDay+wa,i=e.stop.dayNumber,o=e.stop.secondsOfDay+wa,r=$r.iau2006XysData.preload(t,n,i,o),a=$r.earthOrientationParameters.getPromiseToLoad();return Promise.all([r,a])},$r.computeIcrfToFixedMatrix=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("date is required.");Object(r["a"])(t)||(t=new ce);const n=$r.computeFixedToIcrfMatrix(e,t);if(Object(r["a"])(n))return ce.transpose(n,t)};const Ca=new Eo(0,0,0),Ea=new Ni(0,0,0,0,0,0),xa=new ce,Sa=new ce;$r.computeFixedToIcrfMatrix=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("date is required.");Object(r["a"])(t)||(t=new ce);const n=$r.earthOrientationParameters.compute(e,Ea);if(!Object(r["a"])(n))return;const i=e.dayNumber,o=e.secondsOfDay+wa,c=$r.iau2006XysData.computeXysRadians(i,o,Ca);if(!Object(r["a"])(c))return;const l=c.x+n.xPoleOffset,u=c.y+n.yPoleOffset,h=1/(1+Math.sqrt(1-l*l-u*u)),d=xa;d[0]=1-h*l*l,d[3]=-h*l*u,d[6]=l,d[1]=-h*l*u,d[4]=1-h*u*u,d[7]=u,d[2]=-l,d[5]=-u,d[8]=1-h*(l*l+u*u);const f=ce.fromRotationZ(-c.s,Sa),p=ce.multiply(d,f,xa),m=e.dayNumber,_=e.secondsOfDay-mo.computeTaiMinusUtc(e)+n.ut1MinusUtc,g=m-2451545,b=_/Gi.SECONDS_PER_DAY;let y=.779057273264+b+.00273781191135448*(g+b);y=y%1*s["a"].TWO_PI;const v=ce.fromRotationZ(y,Sa),O=ce.multiply(p,v,xa),A=Math.cos(n.xPoleWander),w=Math.cos(n.yPoleWander),T=Math.sin(n.xPoleWander),C=Math.sin(n.yPoleWander);let E=i-Ta+o/Gi.SECONDS_PER_DAY;E/=36525;const x=-47e-6*E*s["a"].RADIANS_PER_DEGREE/3600,S=Math.cos(x),I=Math.sin(x),D=Sa;return D[0]=A*S,D[1]=A*I,D[2]=T,D[3]=-w*I+C*T*S,D[4]=w*S+C*T*I,D[5]=-C*A,D[6]=-C*I-w*T*S,D[7]=C*S-w*T*I,D[8]=w*A,ce.multiply(O,D,t)};const Ia=new be;$r.pointToWindowCoordinates=function(e,t,n,i){return i=$r.pointToGLWindowCoordinates(e,t,n,i),i.y=2*t[5]-i.y,i},$r.pointToGLWindowCoordinates=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("modelViewProjectionMatrix is required.");if(!Object(r["a"])(t))throw new a["a"]("viewportTransformation is required.");if(!Object(r["a"])(n))throw new a["a"]("point is required.");Object(r["a"])(i)||(i=new Gt);const o=Ia;return Me.multiplyByVector(e,be.fromElements(n.x,n.y,n.z,1,o),o),be.multiplyByScalar(o,1/o.w,o),Me.multiplyByVector(t,o,o),Gt.fromCartesian4(o,i)};const Da=new g,Pa=new g,ja=new g;$r.rotationMatrixFromPositionVelocity=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("position is required.");if(!Object(r["a"])(t))throw new a["a"]("velocity is required.");const c=Object(o["a"])(n,k.WGS84).geodeticSurfaceNormal(e,Da);let l=g.cross(t,c,Pa);g.equalsEpsilon(l,g.ZERO,s["a"].EPSILON6)&&(l=g.clone(g.UNIT_X,l));const u=g.cross(l,t,ja);return g.normalize(u,u),g.cross(t,u,l),g.negate(l,l),g.normalize(l,l),Object(r["a"])(i)||(i=new ce),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=l.x,i[4]=l.y,i[5]=l.z,i[6]=u.x,i[7]=u.y,i[8]=u.z,i};const Ra=new Me(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),La=new I,Ma=new g,Na=new g,Ba=new ce,Fa=new Me,za=new Me;$r.basisTo2D=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("projection is required.");if(!Object(r["a"])(t))throw new a["a"]("matrix is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");const i=Me.getTranslation(t,Na),o=e.ellipsoid,s=o.cartesianToCartographic(i,La),c=e.project(s,Ma);g.fromElements(c.z,c.x,c.y,c);const l=$r.eastNorthUpToFixedFrame(i,o,Fa),u=Me.inverseTransformation(l,za),h=Me.getMatrix3(t,Ba),d=Me.multiplyByMatrix3(u,h,n);return Me.multiply(Ra,d,n),Me.setTranslation(n,c,n),n},$r.wgs84To2DModelMatrix=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("projection is required.");if(!Object(r["a"])(t))throw new a["a"]("center is required.");if(!Object(r["a"])(n))throw new a["a"]("result is required.");const i=e.ellipsoid,o=$r.eastNorthUpToFixedFrame(t,i,Fa),s=Me.inverseTransformation(o,za),c=i.cartesianToCartographic(t,La),l=e.project(c,Ma);g.fromElements(l.z,l.x,l.y,l);const u=Me.fromTranslation(l,Fa);return Me.multiply(Ra,s,n),Me.multiply(u,n,n),n};var ka=$r;const Ua=new be;function Va(e,t){if(i["a"].defined("origin",e),t=Object(o["a"])(t,k.WGS84),e=t.scaleToGeodeticSurface(e),!Object(r["a"])(e))throw new a["a"]("origin must not be at the center of the ellipsoid.");const n=ka.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=g.fromCartesian4(Me.getColumn(n,0,Ua)),this._yAxis=g.fromCartesian4(Me.getColumn(n,1,Ua));const s=g.fromCartesian4(Me.getColumn(n,2,Ua));this._plane=ji.fromPointNormal(e,s)}Object.defineProperties(Va.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});const Ha=new gn;Va.fromPoints=function(e,t){i["a"].defined("cartesians",e);const n=gn.fromPoints(e,Ha);return new Va(n.center,t)};const Ga=new Yn,Wa=new g;Va.prototype.projectPointOntoPlane=function(e,t){i["a"].defined("cartesian",e);const n=Ga;n.origin=e,g.normalize(e,n.direction);let o=Ci.rayPlane(n,this._plane,Wa);if(Object(r["a"])(o)||(g.negate(n.direction,n.direction),o=Ci.rayPlane(n,this._plane,Wa)),Object(r["a"])(o)){const e=g.subtract(o,this._origin,o),n=g.dot(this._xAxis,e),i=g.dot(this._yAxis,e);return Object(r["a"])(t)?(t.x=n,t.y=i,t):new Gt(n,i)}},Va.prototype.projectPointsOntoPlane=function(e,t){i["a"].defined("cartesians",e),Object(r["a"])(t)||(t=[]);let n=0;const o=e.length;for(let i=0;i<o;i++){const o=this.projectPointOntoPlane(e[i],t[n]);Object(r["a"])(o)&&(t[n]=o,n++)}return t.length=n,t},Va.prototype.projectPointToNearestOnPlane=function(e,t){i["a"].defined("cartesian",e),Object(r["a"])(t)||(t=new Gt);const n=Ga;n.origin=e,g.clone(this._plane.normal,n.direction);let o=Ci.rayPlane(n,this._plane,Wa);Object(r["a"])(o)||(g.negate(n.direction,n.direction),o=Ci.rayPlane(n,this._plane,Wa));const a=g.subtract(o,this._origin,o),s=g.dot(this._xAxis,a),c=g.dot(this._yAxis,a);return t.x=s,t.y=c,t},Va.prototype.projectPointsToNearestOnPlane=function(e,t){i["a"].defined("cartesians",e),Object(r["a"])(t)||(t=[]);const n=e.length;t.length=n;for(let i=0;i<n;i++)t[i]=this.projectPointToNearestOnPlane(e[i],t[i]);return t};const qa=new g;Va.prototype.projectPointOntoEllipsoid=function(e,t){i["a"].defined("cartesian",e),Object(r["a"])(t)||(t=new g);const n=this._ellipsoid,o=this._origin,a=this._xAxis,s=this._yAxis,c=qa;return g.multiplyByScalar(a,e.x,c),t=g.add(o,c,t),g.multiplyByScalar(s,e.y,c),g.add(t,c,t),n.scaleToGeocentricSurface(t,t),t},Va.prototype.projectPointsOntoEllipsoid=function(e,t){i["a"].defined("cartesians",e);const n=e.length;Object(r["a"])(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.projectPointOntoEllipsoid(e[i],t[i]);return t};var Ya=Va;function Xa(e,t){this.center=g.clone(Object(o["a"])(e,g.ZERO)),this.halfAxes=ce.clone(Object(o["a"])(t,ce.ZERO))}Xa.packedLength=g.packedLength+ce.packedLength,Xa.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),g.pack(e.center,t,n),ce.pack(e.halfAxes,t,n+g.packedLength),t},Xa.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Xa),g.unpack(e,t,n.center),ce.unpack(e,t+g.packedLength,n.halfAxes),n};const Ka=new g,$a=new g,Ja=new g,Qa=new g,Za=new g,es=new g,ts=new ce,ns={unitary:new ce,diagonal:new ce};Xa.fromPoints=function(e,t){if(Object(r["a"])(t)||(t=new Xa),!Object(r["a"])(e)||0===e.length)return t.halfAxes=ce.ZERO,t.center=g.ZERO,t;let n;const i=e.length,o=g.clone(e[0],Ka);for(n=1;n<i;n++)g.add(o,e[n],o);const a=1/i;g.multiplyByScalar(o,a,o);let s,c=0,l=0,u=0,h=0,d=0,f=0;for(n=0;n<i;n++)s=g.subtract(e[n],o,$a),c+=s.x*s.x,l+=s.x*s.y,u+=s.x*s.z,h+=s.y*s.y,d+=s.y*s.z,f+=s.z*s.z;c*=a,l*=a,u*=a,h*=a,d*=a,f*=a;const p=ts;p[0]=c,p[1]=l,p[2]=u,p[3]=l,p[4]=h,p[5]=d,p[6]=u,p[7]=d,p[8]=f;const m=ce.computeEigenDecomposition(p,ns),_=ce.clone(m.unitary,t.halfAxes);let b=ce.getColumn(_,0,Qa),y=ce.getColumn(_,1,Za),v=ce.getColumn(_,2,es),O=-Number.MAX_VALUE,A=-Number.MAX_VALUE,w=-Number.MAX_VALUE,T=Number.MAX_VALUE,C=Number.MAX_VALUE,E=Number.MAX_VALUE;for(n=0;n<i;n++)s=e[n],O=Math.max(g.dot(b,s),O),A=Math.max(g.dot(y,s),A),w=Math.max(g.dot(v,s),w),T=Math.min(g.dot(b,s),T),C=Math.min(g.dot(y,s),C),E=Math.min(g.dot(v,s),E);b=g.multiplyByScalar(b,.5*(T+O),b),y=g.multiplyByScalar(y,.5*(C+A),y),v=g.multiplyByScalar(v,.5*(E+w),v);const x=g.add(b,y,t.center);g.add(x,v,x);const S=Ja;return S.x=O-T,S.y=A-C,S.z=w-E,g.multiplyByScalar(S,.5,S),ce.multiplyByScale(t.halfAxes,S,t.halfAxes),t};const is=new g,os=new g;function rs(e,t,n,i,o,s,c,l,u,h,d){if(!Object(r["a"])(o)||!Object(r["a"])(s)||!Object(r["a"])(c)||!Object(r["a"])(l)||!Object(r["a"])(u)||!Object(r["a"])(h))throw new a["a"]("all extents (minimum/maximum X/Y/Z) are required.");Object(r["a"])(d)||(d=new Xa);const f=d.halfAxes;ce.setColumn(f,0,t,f),ce.setColumn(f,1,n,f),ce.setColumn(f,2,i,f);let p=is;p.x=(o+s)/2,p.y=(c+l)/2,p.z=(u+h)/2;const m=os;m.x=(s-o)/2,m.y=(l-c)/2,m.z=(h-u)/2;const _=d.center;return p=ce.multiplyByVector(f,p,p),g.add(e,p,_),ce.multiplyByScale(f,m,f),d}const as=new I,ss=new g,cs=new I,ls=new I,us=new I,hs=new I,ds=new I,fs=new g,ps=new g,ms=new g,_s=new g,gs=new g,bs=new Gt,ys=new Gt,vs=new Gt,Os=new Gt,As=new Gt,ws=new g,Ts=new g,Cs=new g,Es=new g,xs=new Gt,Ss=new g,Is=new g,Ds=new g,Ps=new ji(g.UNIT_X,0);Xa.fromRectangle=function(e,t,n,i,c){if(!Object(r["a"])(e))throw new a["a"]("rectangle is required");if(e.width<0||e.width>s["a"].TWO_PI)throw new a["a"]("Rectangle width must be between 0 and 2*pi");if(e.height<0||e.height>s["a"].PI)throw new a["a"]("Rectangle height must be between 0 and pi");if(Object(r["a"])(i)&&!s["a"].equalsEpsilon(i.radii.x,i.radii.y,s["a"].EPSILON15))throw new a["a"]("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");let l,u,h,d,f,p,m;if(t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),i=Object(o["a"])(i,k.WGS84),e.width<=s["a"].PI){const o=Fe.center(e,as),r=i.cartographicToCartesian(o,ss),a=new Ya(r,i);m=a.plane;const s=o.longitude,_=e.south<0&&e.north>0?0:o.latitude,g=I.fromRadians(s,e.north,n,cs),b=I.fromRadians(e.west,e.north,n,ls),y=I.fromRadians(e.west,_,n,us),v=I.fromRadians(e.west,e.south,n,hs),O=I.fromRadians(s,e.south,n,ds),A=i.cartographicToCartesian(g,fs);let w=i.cartographicToCartesian(b,ps);const T=i.cartographicToCartesian(y,ms);let C=i.cartographicToCartesian(v,_s);const E=i.cartographicToCartesian(O,gs),x=a.projectPointToNearestOnPlane(A,bs),S=a.projectPointToNearestOnPlane(w,ys),D=a.projectPointToNearestOnPlane(T,vs),P=a.projectPointToNearestOnPlane(C,Os),j=a.projectPointToNearestOnPlane(E,As);return l=Math.min(S.x,D.x,P.x),u=-l,d=Math.max(S.y,x.y),h=Math.min(P.y,j.y),b.height=v.height=t,w=i.cartographicToCartesian(b,ps),C=i.cartographicToCartesian(v,_s),f=Math.min(ji.getPointDistance(m,w),ji.getPointDistance(m,C)),p=n,rs(a.origin,a.xAxis,a.yAxis,a.zAxis,l,u,h,d,f,p,c)}const _=e.south>0,b=e.north<0,y=_?e.south:b?e.north:0,v=Fe.center(e,as).longitude,O=g.fromRadians(v,y,n,i,ws);O.z=0;const A=Math.abs(O.x)<s["a"].EPSILON10&&Math.abs(O.y)<s["a"].EPSILON10,w=A?g.UNIT_X:g.normalize(O,Ts),T=g.UNIT_Z,C=g.cross(w,T,Cs);m=ji.fromPointNormal(O,w,Ps);const E=g.fromRadians(v+s["a"].PI_OVER_TWO,y,n,i,Es);u=g.dot(ji.projectPointOntoPlane(m,E,xs),C),l=-u,d=g.fromRadians(0,e.north,b?t:n,i,Ss).z,h=g.fromRadians(0,e.south,_?t:n,i,Is).z;const x=g.fromRadians(e.east,y,n,i,Ds);return f=ji.getPointDistance(m,x),p=0,rs(O,C,T,w,l,u,h,d,f,p,c)},Xa.fromTransformation=function(e,t){return i["a"].typeOf.object("transformation",e),Object(r["a"])(t)||(t=new Xa),t.center=Me.getTranslation(e,t.center),t.halfAxes=Me.getMatrix3(e,t.halfAxes),t.halfAxes=ce.multiplyByScalar(t.halfAxes,.5,t.halfAxes),t},Xa.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(g.clone(e.center,t.center),ce.clone(e.halfAxes,t.halfAxes),t):new Xa(e.center,e.halfAxes)},Xa.intersectPlane=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("box is required.");if(!Object(r["a"])(t))throw new a["a"]("plane is required.");const n=e.center,i=t.normal,o=e.halfAxes,s=i.x,c=i.y,l=i.z,u=Math.abs(s*o[ce.COLUMN0ROW0]+c*o[ce.COLUMN0ROW1]+l*o[ce.COLUMN0ROW2])+Math.abs(s*o[ce.COLUMN1ROW0]+c*o[ce.COLUMN1ROW1]+l*o[ce.COLUMN1ROW2])+Math.abs(s*o[ce.COLUMN2ROW0]+c*o[ce.COLUMN2ROW1]+l*o[ce.COLUMN2ROW2]),h=g.dot(i,n)+t.distance;return h<=-u?G.OUTSIDE:h>=u?G.INSIDE:G.INTERSECTING};const js=new g,Rs=new g,Ls=new g,Ms=new g,Ns=new g,Bs=new g;Xa.distanceSquaredTo=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("box is required.");if(!Object(r["a"])(t))throw new a["a"]("cartesian is required.");const n=g.subtract(t,e.center,is),i=e.halfAxes;let o=ce.getColumn(i,0,js),c=ce.getColumn(i,1,Rs),l=ce.getColumn(i,2,Ls);const u=g.magnitude(o),h=g.magnitude(c),d=g.magnitude(l);let f=!0,p=!0,m=!0;u>0?g.divideByScalar(o,u,o):f=!1,h>0?g.divideByScalar(c,h,c):p=!1,d>0?g.divideByScalar(l,d,l):m=!1;const _=!f+!p+!m;let b,y,v;if(1===_){let e=o;b=c,y=l,p?m||(e=l,y=o):(e=c,b=o),v=g.cross(b,y,Ns),e===o?o=v:e===c?c=v:e===l&&(l=v)}else if(2===_){b=o,p?b=c:m&&(b=l);let e=g.UNIT_Y;e.equalsEpsilon(b,s["a"].EPSILON3)&&(e=g.UNIT_X),y=g.cross(b,e,Ms),g.normalize(y,y),v=g.cross(b,y,Ns),g.normalize(v,v),b===o?(c=y,l=v):b===c?(l=y,o=v):b===l&&(o=y,c=v)}else 3===_&&(o=g.UNIT_X,c=g.UNIT_Y,l=g.UNIT_Z);const O=Bs;O.x=g.dot(n,o),O.y=g.dot(n,c),O.z=g.dot(n,l);let A,w=0;return O.x<-u?(A=O.x+u,w+=A*A):O.x>u&&(A=O.x-u,w+=A*A),O.y<-h?(A=O.y+h,w+=A*A):O.y>h&&(A=O.y-h,w+=A*A),O.z<-d?(A=O.z+d,w+=A*A):O.z>d&&(A=O.z-d,w+=A*A),w};const Fs=new g,zs=new g;Xa.computePlaneDistances=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("box is required.");if(!Object(r["a"])(t))throw new a["a"]("position is required.");if(!Object(r["a"])(n))throw new a["a"]("direction is required.");Object(r["a"])(i)||(i=new q);let o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const c=e.center,l=e.halfAxes,u=ce.getColumn(l,0,js),h=ce.getColumn(l,1,Rs),d=ce.getColumn(l,2,Ls),f=g.add(u,h,Fs);g.add(f,d,f),g.add(f,c,f);const p=g.subtract(f,t,zs);let m=g.dot(n,p);return o=Math.min(m,o),s=Math.max(m,s),g.add(c,u,f),g.add(f,h,f),g.subtract(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.add(c,u,f),g.subtract(f,h,f),g.add(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.add(c,u,f),g.subtract(f,h,f),g.subtract(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.subtract(c,u,f),g.add(f,h,f),g.add(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.subtract(c,u,f),g.add(f,h,f),g.subtract(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.subtract(c,u,f),g.subtract(f,h,f),g.add(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),g.subtract(c,u,f),g.subtract(f,h,f),g.subtract(f,d,f),g.subtract(f,t,p),m=g.dot(n,p),o=Math.min(m,o),s=Math.max(m,s),i.start=o,i.stop=s,i};const ks=new g,Us=new g,Vs=new g;Xa.computeCorners=function(e,t){i["a"].typeOf.object("box",e),Object(r["a"])(t)||(t=[new g,new g,new g,new g,new g,new g,new g,new g]);const n=e.center,o=e.halfAxes,a=ce.getColumn(o,0,ks),s=ce.getColumn(o,1,Us),c=ce.getColumn(o,2,Vs);return g.clone(n,t[0]),g.subtract(t[0],a,t[0]),g.subtract(t[0],s,t[0]),g.subtract(t[0],c,t[0]),g.clone(n,t[1]),g.subtract(t[1],a,t[1]),g.subtract(t[1],s,t[1]),g.add(t[1],c,t[1]),g.clone(n,t[2]),g.subtract(t[2],a,t[2]),g.add(t[2],s,t[2]),g.subtract(t[2],c,t[2]),g.clone(n,t[3]),g.subtract(t[3],a,t[3]),g.add(t[3],s,t[3]),g.add(t[3],c,t[3]),g.clone(n,t[4]),g.add(t[4],a,t[4]),g.subtract(t[4],s,t[4]),g.subtract(t[4],c,t[4]),g.clone(n,t[5]),g.add(t[5],a,t[5]),g.subtract(t[5],s,t[5]),g.add(t[5],c,t[5]),g.clone(n,t[6]),g.add(t[6],a,t[6]),g.add(t[6],s,t[6]),g.subtract(t[6],c,t[6]),g.clone(n,t[7]),g.add(t[7],a,t[7]),g.add(t[7],s,t[7]),g.add(t[7],c,t[7]),t};const Hs=new ce;Xa.computeTransformation=function(e,t){i["a"].typeOf.object("box",e),Object(r["a"])(t)||(t=new Me);const n=e.center,o=ce.multiplyByUniformScale(e.halfAxes,2,Hs);return Me.fromRotationTranslation(o,n,t)};const Gs=new Tt;Xa.isOccluded=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("box is required.");if(!Object(r["a"])(t))throw new a["a"]("occluder is required.");const n=Tt.fromOrientedBoundingBox(e,Gs);return!t.isBoundingSphereVisible(n)},Xa.prototype.intersectPlane=function(e){return Xa.intersectPlane(this,e)},Xa.prototype.distanceSquaredTo=function(e){return Xa.distanceSquaredTo(this,e)},Xa.prototype.computePlaneDistances=function(e,t,n){return Xa.computePlaneDistances(this,e,t,n)},Xa.prototype.computeCorners=function(e){return Xa.computeCorners(this,e)},Xa.prototype.computeTransformation=function(e){return Xa.computeTransformation(this,e)},Xa.prototype.isOccluded=function(e){return Xa.isOccluded(this,e)},Xa.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&g.equals(e.center,t.center)&&ce.equals(e.halfAxes,t.halfAxes)},Xa.prototype.clone=function(e){return Xa.clone(this,e)},Xa.prototype.equals=function(e){return Xa.equals(this,e)};var Ws=Xa;const qs={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047};var Ys=Object.freeze(qs);const Xs={BYTE:Ys.BYTE,UNSIGNED_BYTE:Ys.UNSIGNED_BYTE,SHORT:Ys.SHORT,UNSIGNED_SHORT:Ys.UNSIGNED_SHORT,INT:Ys.INT,UNSIGNED_INT:Ys.UNSIGNED_INT,FLOAT:Ys.FLOAT,DOUBLE:Ys.DOUBLE,getSizeInBytes:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");switch(e){case Xs.BYTE:return Int8Array.BYTES_PER_ELEMENT;case Xs.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Xs.SHORT:return Int16Array.BYTES_PER_ELEMENT;case Xs.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Xs.INT:return Int32Array.BYTES_PER_ELEMENT;case Xs.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Xs.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case Xs.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new a["a"]("componentDatatype is not a valid value.")}},fromTypedArray:function(e){if(e instanceof Int8Array)return Xs.BYTE;if(e instanceof Uint8Array)return Xs.UNSIGNED_BYTE;if(e instanceof Int16Array)return Xs.SHORT;if(e instanceof Uint16Array)return Xs.UNSIGNED_SHORT;if(e instanceof Int32Array)return Xs.INT;if(e instanceof Uint32Array)return Xs.UNSIGNED_INT;if(e instanceof Float32Array)return Xs.FLOAT;if(e instanceof Float64Array)return Xs.DOUBLE;throw new a["a"]("array must be an Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, or Float64Array.")},validate:function(e){return Object(r["a"])(e)&&(e===Xs.BYTE||e===Xs.UNSIGNED_BYTE||e===Xs.SHORT||e===Xs.UNSIGNED_SHORT||e===Xs.INT||e===Xs.UNSIGNED_INT||e===Xs.FLOAT||e===Xs.DOUBLE)},createTypedArray:function(e,t){if(!Object(r["a"])(e))throw new a["a"]("componentDatatype is required.");if(!Object(r["a"])(t))throw new a["a"]("valuesOrLength is required.");switch(e){case Xs.BYTE:return new Int8Array(t);case Xs.UNSIGNED_BYTE:return new Uint8Array(t);case Xs.SHORT:return new Int16Array(t);case Xs.UNSIGNED_SHORT:return new Uint16Array(t);case Xs.INT:return new Int32Array(t);case Xs.UNSIGNED_INT:return new Uint32Array(t);case Xs.FLOAT:return new Float32Array(t);case Xs.DOUBLE:return new Float64Array(t);default:throw new a["a"]("componentDatatype is not a valid value.")}},createArrayBufferView:function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("componentDatatype is required.");if(!Object(r["a"])(t))throw new a["a"]("buffer is required.");switch(n=Object(o["a"])(n,0),i=Object(o["a"])(i,(t.byteLength-n)/Xs.getSizeInBytes(e)),e){case Xs.BYTE:return new Int8Array(t,n,i);case Xs.UNSIGNED_BYTE:return new Uint8Array(t,n,i);case Xs.SHORT:return new Int16Array(t,n,i);case Xs.UNSIGNED_SHORT:return new Uint16Array(t,n,i);case Xs.INT:return new Int32Array(t,n,i);case Xs.UNSIGNED_INT:return new Uint32Array(t,n,i);case Xs.FLOAT:return new Float32Array(t,n,i);case Xs.DOUBLE:return new Float64Array(t,n,i);default:throw new a["a"]("componentDatatype is not a valid value.")}},fromName:function(e){switch(e){case"BYTE":return Xs.BYTE;case"UNSIGNED_BYTE":return Xs.UNSIGNED_BYTE;case"SHORT":return Xs.SHORT;case"UNSIGNED_SHORT":return Xs.UNSIGNED_SHORT;case"INT":return Xs.INT;case"UNSIGNED_INT":return Xs.UNSIGNED_INT;case"FLOAT":return Xs.FLOAT;case"DOUBLE":return Xs.DOUBLE;default:throw new a["a"]("name is not a valid value.")}}};var Ks=Object.freeze(Xs);function $s(e,t,n,i){this[0]=Object(o["a"])(e,0),this[1]=Object(o["a"])(n,0),this[2]=Object(o["a"])(t,0),this[3]=Object(o["a"])(i,0)}$s.packedLength=4,$s.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},$s.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new $s),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},$s.packArray=function(e,t){i["a"].defined("array",e);const n=e.length,o=4*n;if(Object(r["a"])(t)){if(!Array.isArray(t)&&t.length!==o)throw new a["a"]("If result is a typed array, it must have exactly array.length * 4 elements");t.length!==o&&(t.length=o)}else t=new Array(o);for(let i=0;i<n;++i)$s.pack(e[i],t,4*i);return t},$s.unpackArray=function(e,t){if(i["a"].defined("array",e),i["a"].typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!==0)throw new a["a"]("array length must be a multiple of 4.");const n=e.length;Object(r["a"])(t)?t.length=n/4:t=new Array(n/4);for(let i=0;i<n;i+=4){const n=i/4;t[n]=$s.unpack(e,i,t[n])}return t},$s.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new $s(e[0],e[2],e[1],e[3])},$s.fromArray=$s.unpack,$s.fromColumnMajorArray=function(e,t){return i["a"].defined("values",e),$s.clone(e,t)},$s.fromRowMajorArray=function(e,t){return i["a"].defined("values",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new $s(e[0],e[1],e[2],e[3])},$s.fromScale=function(e,t){return i["a"].typeOf.object("scale",e),Object(r["a"])(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new $s(e.x,0,0,e.y)},$s.fromUniformScale=function(e,t){return i["a"].typeOf.number("scale",e),Object(r["a"])(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new $s(e,0,0,e)},$s.fromRotation=function(e,t){i["a"].typeOf.number("angle",e);const n=Math.cos(e),o=Math.sin(e);return Object(r["a"])(t)?(t[0]=n,t[1]=o,t[2]=-o,t[3]=n,t):new $s(n,-o,o,n)},$s.toArray=function(e,t){return i["a"].typeOf.object("matrix",e),Object(r["a"])(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},$s.getElementIndex=function(e,t){return i["a"].typeOf.number.greaterThanOrEquals("row",t,0),i["a"].typeOf.number.lessThanOrEquals("row",t,1),i["a"].typeOf.number.greaterThanOrEquals("column",e,0),i["a"].typeOf.number.lessThanOrEquals("column",e,1),2*e+t},$s.getColumn=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,1),i["a"].typeOf.object("result",n);const o=2*t,r=e[o],a=e[o+1];return n.x=r,n.y=a,n},$s.setColumn=function(e,t,n,o){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,1),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=$s.clone(e,o);const r=2*t;return o[r]=n.x,o[r+1]=n.y,o},$s.getRow=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,1),i["a"].typeOf.object("result",n);const o=e[t],r=e[t+2];return n.x=o,n.y=r,n},$s.setRow=function(e,t,n,o){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number.greaterThanOrEquals("index",t,0),i["a"].typeOf.number.lessThanOrEquals("index",t,1),i["a"].typeOf.object("cartesian",n),i["a"].typeOf.object("result",o),o=$s.clone(e,o),o[t]=n.x,o[t+2]=n.y,o};const Js=new Gt;$s.setScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n);const o=$s.getScale(e,Js),r=t.x/o.x,a=t.y/o.y;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*a,n[3]=e[3]*a,n};const Qs=new Gt;$s.setUniformScale=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n);const o=$s.getScale(e,Qs),r=t/o.x,a=t/o.y;return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*a,n[3]=e[3]*a,n};const Zs=new Gt;$s.getScale=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t.x=Gt.magnitude(Gt.fromElements(e[0],e[1],Zs)),t.y=Gt.magnitude(Gt.fromElements(e[2],e[3],Zs)),t};const ec=new Gt;$s.getMaximumScale=function(e){return $s.getScale(e,ec),Gt.maximumComponent(ec)};const tc=new Gt;$s.setRotation=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",n);const o=$s.getScale(e,tc);return n[0]=t[0]*o.x,n[1]=t[1]*o.x,n[2]=t[2]*o.y,n[3]=t[3]*o.y,n};const nc=new Gt;$s.getRotation=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=$s.getScale(e,nc);return t[0]=e[0]/n.x,t[1]=e[1]/n.x,t[2]=e[2]/n.y,t[3]=e[3]/n.y,t},$s.multiply=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n);const o=e[0]*t[0]+e[2]*t[1],r=e[0]*t[2]+e[2]*t[3],a=e[1]*t[0]+e[3]*t[1],s=e[1]*t[2]+e[3]*t[3];return n[0]=o,n[1]=a,n[2]=r,n[3]=s,n},$s.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},$s.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},$s.multiplyByVector=function(e,t,n){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("cartesian",t),i["a"].typeOf.object("result",n);const o=e[0]*t.x+e[2]*t.y,r=e[1]*t.x+e[3]*t.y;return n.x=o,n.y=r,n},$s.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},$s.multiplyByScale=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("scale",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},$s.multiplyByUniformScale=function(e,t,n){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.number("scale",t),i["a"].typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},$s.negate=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},$s.transpose=function(e,t){i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t);const n=e[0],o=e[2],r=e[1],a=e[3];return t[0]=n,t[1]=o,t[2]=r,t[3]=a,t},$s.abs=function(e,t){return i["a"].typeOf.object("matrix",e),i["a"].typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},$s.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},$s.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},$s.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},$s.IDENTITY=Object.freeze(new $s(1,0,0,1)),$s.ZERO=Object.freeze(new $s(0,0,0,0)),$s.COLUMN0ROW0=0,$s.COLUMN0ROW1=1,$s.COLUMN1ROW0=2,$s.COLUMN1ROW1=3,Object.defineProperties($s.prototype,{length:{get:function(){return $s.packedLength}}}),$s.prototype.clone=function(e){return $s.clone(this,e)},$s.prototype.equals=function(e){return $s.equals(this,e)},$s.prototype.equalsEpsilon=function(e,t){return $s.equalsEpsilon(this,e,t)},$s.prototype.toString=function(){return`(${this[0]}, ${this[2]})\n`+`(${this[1]}, ${this[3]})`};var ic=$s;const oc={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(e){switch(e){case oc.SCALAR:return Number;case oc.VEC2:return Gt;case oc.VEC3:return g;case oc.VEC4:return be;case oc.MAT2:return ic;case oc.MAT3:return ce;case oc.MAT4:return Me;default:throw new a["a"]("attributeType is not a valid value.")}},getNumberOfComponents:function(e){switch(e){case oc.SCALAR:return 1;case oc.VEC2:return 2;case oc.VEC3:return 3;case oc.VEC4:case oc.MAT2:return 4;case oc.MAT3:return 9;case oc.MAT4:return 16;default:throw new a["a"]("attributeType is not a valid value.")}},getAttributeLocationCount:function(e){switch(e){case oc.SCALAR:case oc.VEC2:case oc.VEC3:case oc.VEC4:return 1;case oc.MAT2:return 2;case oc.MAT3:return 3;case oc.MAT4:return 4;default:throw new a["a"]("attributeType is not a valid value.")}},getGlslType:function(e){switch(i["a"].typeOf.string("attributeType",e),e){case oc.SCALAR:return"float";case oc.VEC2:return"vec2";case oc.VEC3:return"vec3";case oc.VEC4:return"vec4";case oc.MAT2:return"mat2";case oc.MAT3:return"mat3";case oc.MAT4:return"mat4";default:throw new a["a"]("attributeType is not a valid value.")}}};var rc=Object.freeze(oc);const ac=1/256,sc=256,cc={octEncodeInRange:function(e,t,n){i["a"].defined("vector",e),i["a"].defined("result",n);const o=g.magnitudeSquared(e);if(Math.abs(o-1)>s["a"].EPSILON6)throw new a["a"]("vector must be normalized.");if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){const e=n.x,t=n.y;n.x=(1-Math.abs(t))*s["a"].signNotZero(e),n.y=(1-Math.abs(e))*s["a"].signNotZero(t)}return n.x=s["a"].toSNorm(n.x,t),n.y=s["a"].toSNorm(n.y,t),n},octEncode:function(e,t){return cc.octEncodeInRange(e,255,t)}},lc=new Gt,uc=new Uint8Array(1);function hc(e){return uc[0]=e,uc[0]}cc.octEncodeToCartesian4=function(e,t){return cc.octEncodeInRange(e,65535,lc),t.x=hc(lc.x*ac),t.y=hc(lc.x),t.z=hc(lc.y*ac),t.w=hc(lc.y),t},cc.octDecodeInRange=function(e,t,n,o){if(i["a"].defined("result",o),e<0||e>n||t<0||t>n)throw new a["a"](`x and y must be unsigned normalized integers between 0 and ${n}`);if(o.x=s["a"].fromSNorm(e,n),o.y=s["a"].fromSNorm(t,n),o.z=1-(Math.abs(o.x)+Math.abs(o.y)),o.z<0){const e=o.x;o.x=(1-Math.abs(o.y))*s["a"].signNotZero(e),o.y=(1-Math.abs(e))*s["a"].signNotZero(o.y)}return g.normalize(o,o)},cc.octDecode=function(e,t,n){return cc.octDecodeInRange(e,t,255,n)},cc.octDecodeFromCartesian4=function(e,t){i["a"].typeOf.object("encoded",e),i["a"].typeOf.object("result",t);const n=e.x,o=e.y,r=e.z,s=e.w;if(n<0||n>255||o<0||o>255||r<0||r>255||s<0||s>255)throw new a["a"]("x, y, z, and w must be unsigned normalized integers between 0 and 255");const c=n*sc+o,l=r*sc+s;return cc.octDecodeInRange(c,l,65535,t)},cc.octPackFloat=function(e){return i["a"].defined("encoded",e),256*e.x+e.y};const dc=new Gt;function fc(e){return e>>1^-(1&e)}cc.octEncodeFloat=function(e){return cc.octEncode(e,dc),cc.octPackFloat(dc)},cc.octDecodeFloat=function(e,t){i["a"].defined("value",e);const n=e/256,o=Math.floor(n),r=256*(n-o);return cc.octDecode(o,r,t)},cc.octPack=function(e,t,n,o){i["a"].defined("v1",e),i["a"].defined("v2",t),i["a"].defined("v3",n),i["a"].defined("result",o);const r=cc.octEncodeFloat(e),a=cc.octEncodeFloat(t),s=cc.octEncode(n,dc);return o.x=65536*s.x+r,o.y=65536*s.y+a,o},cc.octUnpack=function(e,t,n,o){i["a"].defined("packed",e),i["a"].defined("v1",t),i["a"].defined("v2",n),i["a"].defined("v3",o);let r=e.x/65536;const a=Math.floor(r),s=65536*(r-a);r=e.y/65536;const c=Math.floor(r),l=65536*(r-c);cc.octDecodeFloat(s,t),cc.octDecodeFloat(l,n),cc.octDecode(a,c,o)},cc.compressTextureCoordinates=function(e){i["a"].defined("textureCoordinates",e);const t=4095*e.x|0,n=4095*e.y|0;return 4096*t+n},cc.decompressTextureCoordinates=function(e,t){i["a"].defined("compressed",e),i["a"].defined("result",t);const n=e/4096,o=Math.floor(n);return t.x=o/4095,t.y=(e-4096*o)/4095,t},cc.zigZagDeltaDecode=function(e,t,n){i["a"].defined("uBuffer",e),i["a"].defined("vBuffer",t),i["a"].typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),Object(r["a"])(n)&&i["a"].typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,n.length);const o=e.length;let a=0,s=0,c=0;for(let i=0;i<o;++i)a+=fc(e[i]),s+=fc(t[i]),e[i]=a,t[i]=s,Object(r["a"])(n)&&(c+=fc(n[i]),n[i]=c)},cc.dequantize=function(e,t,n,o){i["a"].defined("typedArray",e),i["a"].defined("componentDatatype",t),i["a"].defined("type",n),i["a"].defined("count",o);const r=rc.getNumberOfComponents(n);let s;switch(t){case Ks.BYTE:s=127;break;case Ks.UNSIGNED_BYTE:s=255;break;case Ks.SHORT:s=32767;break;case Ks.UNSIGNED_SHORT:s=65535;break;case Ks.INT:s=2147483647;break;case Ks.UNSIGNED_INT:s=4294967295;break;default:throw new a["a"](`Cannot dequantize component datatype: ${t}`)}const c=new Float32Array(o*r);for(let i=0;i<o;i++)for(let t=0;t<r;t++){const n=i*r+t;c[n]=Math.max(e[n]/s,-1)}return c},cc.decodeRGB565=function(e,t){i["a"].defined("typedArray",e);const n=3*e.length;Object(r["a"])(t)&&i["a"].typeOf.number.equals("result.length","typedArray.length * 3",t.length,n);const o=e.length;Object(r["a"])(t)||(t=new Float32Array(3*o));const a=31,s=63,c=1/31,l=1/63;for(let i=0;i<o;i++){const n=e[i],o=n>>11,r=n>>5&s,u=n&a,h=3*i;t[h]=o*c,t[h+1]=r*l,t[h+2]=u*c}return t};var pc=cc;const mc={getHeight:function(e,t,n){return(e-n)*t+n}},_c=new g;mc.getPosition=function(e,t,n,i,o){const r=t.cartesianToCartographic(e,_c),a=mc.getHeight(r.height,n,i);return g.fromRadians(r.longitude,r.latitude,a,t,o)};var gc=mc;const bc={NONE:0,BITS12:1};var yc=Object.freeze(bc);const vc=new g,Oc=new g,Ac=new Gt,wc=new Me,Tc=new Me,Cc=Math.pow(2,12);function Ec(e,t,n,i,a,s,c,l,u,h){let d,f,p=yc.NONE;if(Object(r["a"])(t)&&Object(r["a"])(n)&&Object(r["a"])(i)&&Object(r["a"])(a)){const e=t.minimum,o=t.maximum,r=g.subtract(o,e,Oc),s=i-n,c=Math.max(g.maximumComponent(r),s);p=c<Cc-1?yc.BITS12:yc.NONE,d=Me.inverseTransformation(a,new Me);const l=g.negate(e,vc);Me.multiply(Me.fromTranslation(l,wc),d,d);const u=vc;u.x=1/r.x,u.y=1/r.y,u.z=1/r.z,Me.multiply(Me.fromScale(u,wc),d,d),f=Me.clone(a),Me.setTranslation(f,g.ZERO,f),a=Me.clone(a,new Me);const h=Me.fromTranslation(e,wc),m=Me.fromScale(r,Tc),_=Me.multiply(h,m,wc);Me.multiply(a,_,a),Me.multiply(f,_,f)}this.quantization=p,this.minimumHeight=n,this.maximumHeight=i,this.center=g.clone(e),this.toScaledENU=d,this.fromScaledENU=a,this.matrix=f,this.hasVertexNormals=s,this.hasWebMercatorT=Object(o["a"])(c,!1),this.hasGeodeticSurfaceNormals=Object(o["a"])(l,!1),this.exaggeration=Object(o["a"])(u,1),this.exaggerationRelativeHeight=Object(o["a"])(h,0),this.stride=0,this._offsetGeodeticSurfaceNormal=0,this._offsetVertexNormal=0,this._calculateStrideAndOffsets()}Ec.prototype.encode=function(e,t,n,i,o,r,a,c){const l=i.x,u=i.y;if(this.quantization===yc.BITS12){n=Me.multiplyByPoint(this.toScaledENU,n,vc),n.x=s["a"].clamp(n.x,0,1),n.y=s["a"].clamp(n.y,0,1),n.z=s["a"].clamp(n.z,0,1);const i=this.maximumHeight-this.minimumHeight,r=s["a"].clamp((o-this.minimumHeight)/i,0,1);Gt.fromElements(n.x,n.y,Ac);const c=pc.compressTextureCoordinates(Ac);Gt.fromElements(n.z,r,Ac);const h=pc.compressTextureCoordinates(Ac);Gt.fromElements(l,u,Ac);const d=pc.compressTextureCoordinates(Ac);if(e[t++]=c,e[t++]=h,e[t++]=d,this.hasWebMercatorT){Gt.fromElements(a,0,Ac);const n=pc.compressTextureCoordinates(Ac);e[t++]=n}}else g.subtract(n,this.center,vc),e[t++]=vc.x,e[t++]=vc.y,e[t++]=vc.z,e[t++]=o,e[t++]=l,e[t++]=u,this.hasWebMercatorT&&(e[t++]=a);return this.hasVertexNormals&&(e[t++]=pc.octPackFloat(r)),this.hasGeodeticSurfaceNormals&&(e[t++]=c.x,e[t++]=c.y,e[t++]=c.z),t};const xc=new g,Sc=new g;Ec.prototype.addGeodeticSurfaceNormals=function(e,t,n){if(this.hasGeodeticSurfaceNormals)return;const i=this.stride,o=e.length/i;this.hasGeodeticSurfaceNormals=!0,this._calculateStrideAndOffsets();const r=this.stride;for(let a=0;a<o;a++){for(let n=0;n<i;n++){const o=a*i+n,s=a*r+n;t[s]=e[o]}const o=this.decodePosition(t,a,xc),s=n.geodeticSurfaceNormal(o,Sc),c=a*r+this._offsetGeodeticSurfaceNormal;t[c]=s.x,t[c+1]=s.y,t[c+2]=s.z}},Ec.prototype.removeGeodeticSurfaceNormals=function(e,t){if(!this.hasGeodeticSurfaceNormals)return;const n=this.stride,i=e.length/n;this.hasGeodeticSurfaceNormals=!1,this._calculateStrideAndOffsets();const o=this.stride;for(let r=0;r<i;r++)for(let i=0;i<o;i++){const a=r*n+i,s=r*o+i;t[s]=e[a]}},Ec.prototype.decodePosition=function(e,t,n){if(Object(r["a"])(n)||(n=new g),t*=this.stride,this.quantization===yc.BITS12){const i=pc.decompressTextureCoordinates(e[t],Ac);n.x=i.x,n.y=i.y;const o=pc.decompressTextureCoordinates(e[t+1],Ac);return n.z=o.x,Me.multiplyByPoint(this.fromScaledENU,n,n)}return n.x=e[t],n.y=e[t+1],n.z=e[t+2],g.add(n,this.center,n)},Ec.prototype.getExaggeratedPosition=function(e,t,n){n=this.decodePosition(e,t,n);const i=this.exaggeration,o=this.exaggerationRelativeHeight,r=1!==i;if(r&&this.hasGeodeticSurfaceNormals){const r=this.decodeGeodeticSurfaceNormal(e,t,Sc),a=this.decodeHeight(e,t),s=gc.getHeight(a,i,o)-a;n.x+=r.x*s,n.y+=r.y*s,n.z+=r.z*s}return n},Ec.prototype.decodeTextureCoordinates=function(e,t,n){return Object(r["a"])(n)||(n=new Gt),t*=this.stride,this.quantization===yc.BITS12?pc.decompressTextureCoordinates(e[t+2],n):Gt.fromElements(e[t+4],e[t+5],n)},Ec.prototype.decodeHeight=function(e,t){if(t*=this.stride,this.quantization===yc.BITS12){const n=pc.decompressTextureCoordinates(e[t+1],Ac);return n.y*(this.maximumHeight-this.minimumHeight)+this.minimumHeight}return e[t+3]},Ec.prototype.decodeWebMercatorT=function(e,t){return t*=this.stride,this.quantization===yc.BITS12?pc.decompressTextureCoordinates(e[t+3],Ac).x:e[t+6]},Ec.prototype.getOctEncodedNormal=function(e,t,n){t=t*this.stride+this._offsetVertexNormal;const i=e[t]/256,o=Math.floor(i),r=256*(i-o);return Gt.fromElements(o,r,n)},Ec.prototype.decodeGeodeticSurfaceNormal=function(e,t,n){return t=t*this.stride+this._offsetGeodeticSurfaceNormal,n.x=e[t],n.y=e[t+1],n.z=e[t+2],n},Ec.prototype._calculateStrideAndOffsets=function(){let e=0;switch(this.quantization){case yc.BITS12:e+=3;break;default:e+=6}this.hasWebMercatorT&&(e+=1),this.hasVertexNormals&&(this._offsetVertexNormal=e,e+=1),this.hasGeodeticSurfaceNormals&&(this._offsetGeodeticSurfaceNormal=e,e+=3),this.stride=e};const Ic={position3DAndHeight:0,textureCoordAndEncodedNormals:1,geodeticSurfaceNormal:2},Dc={compressed0:0,compressed1:1,geodeticSurfaceNormal:2};Ec.prototype.getAttributes=function(e){const t=Ks.FLOAT,n=Ks.getSizeInBytes(t),i=this.stride*n;let o=0;const r=[];function a(a,s){r.push({index:a,vertexBuffer:e,componentDatatype:t,componentsPerAttribute:s,offsetInBytes:o,strideInBytes:i}),o+=s*n}if(this.quantization===yc.NONE){a(Ic.position3DAndHeight,4);let e=2;e+=this.hasWebMercatorT?1:0,e+=this.hasVertexNormals?1:0,a(Ic.textureCoordAndEncodedNormals,e),this.hasGeodeticSurfaceNormals&&a(Ic.geodeticSurfaceNormal,3)}else{const e=this.hasWebMercatorT||this.hasVertexNormals,t=this.hasWebMercatorT&&this.hasVertexNormals;a(Dc.compressed0,e?4:3),t&&a(Dc.compressed1,1),this.hasGeodeticSurfaceNormals&&a(Dc.geodeticSurfaceNormal,3)}return r},Ec.prototype.getAttributeLocations=function(){return this.quantization===yc.NONE?Ic:Dc},Ec.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)||(t=new Ec),t.quantization=e.quantization,t.minimumHeight=e.minimumHeight,t.maximumHeight=e.maximumHeight,t.center=g.clone(e.center),t.toScaledENU=Me.clone(e.toScaledENU),t.fromScaledENU=Me.clone(e.fromScaledENU),t.matrix=Me.clone(e.matrix),t.hasVertexNormals=e.hasVertexNormals,t.hasWebMercatorT=e.hasWebMercatorT,t.hasGeodeticSurfaceNormals=e.hasGeodeticSurfaceNormals,t.exaggeration=e.exaggeration,t.exaggerationRelativeHeight=e.exaggerationRelativeHeight,t._calculateStrideAndOffsets(),t};var Pc=Ec;function jc(e){this._ellipsoid=Object(o["a"])(e,k.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(jc.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),jc.mercatorAngleToGeodeticLatitude=function(e){return s["a"].PI_OVER_TWO-2*Math.atan(Math.exp(-e))},jc.geodeticLatitudeToMercatorAngle=function(e){e>jc.MaximumLatitude?e=jc.MaximumLatitude:e<-jc.MaximumLatitude&&(e=-jc.MaximumLatitude);const t=Math.sin(e);return.5*Math.log((1+t)/(1-t))},jc.MaximumLatitude=jc.mercatorAngleToGeodeticLatitude(Math.PI),jc.prototype.project=function(e,t){const n=this._semimajorAxis,i=e.longitude*n,o=jc.geodeticLatitudeToMercatorAngle(e.latitude)*n,a=e.height;return Object(r["a"])(t)?(t.x=i,t.y=o,t.z=a,t):new g(i,o,a)},jc.prototype.unproject=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required");const n=this._oneOverSemimajorAxis,i=e.x*n,o=jc.mercatorAngleToGeodeticLatitude(e.y*n),s=e.z;return Object(r["a"])(t)?(t.longitude=i,t.latitude=o,t.height=s,t):new I(i,o,s)};var Rc=jc;const Lc={};Lc.DEFAULT_STRUCTURE=Object.freeze({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1});const Mc=new g,Nc=new Me,Bc=new g,Fc=new g;Lc.computeVertices=function(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.heightmap))throw new a["a"]("options.heightmap is required.");if(!Object(r["a"])(e.width)||!Object(r["a"])(e.height))throw new a["a"]("options.width and options.height are required.");if(!Object(r["a"])(e.nativeRectangle))throw new a["a"]("options.nativeRectangle is required.");if(!Object(r["a"])(e.skirtHeight))throw new a["a"]("options.skirtHeight is required.");const t=Math.cos,n=Math.sin,i=Math.sqrt,c=Math.atan,l=Math.exp,u=s["a"].PI_OVER_TWO,h=s["a"].toRadians,d=e.heightmap,f=e.width,p=e.height,m=e.skirtHeight,_=m>0,b=Object(o["a"])(e.isGeographic,!0),y=Object(o["a"])(e.ellipsoid,k.WGS84),v=1/y.maximumRadius,O=Fe.clone(e.nativeRectangle),A=Fe.clone(e.rectangle);let w,T,C,E;Object(r["a"])(A)?(w=A.west,T=A.south,C=A.east,E=A.north):b?(w=h(O.west),T=h(O.south),C=h(O.east),E=h(O.north)):(w=O.west*v,T=u-2*c(l(-O.south*v)),C=O.east*v,E=u-2*c(l(-O.north*v)));let x=e.relativeToCenter;const S=Object(r["a"])(x);x=S?x:g.ZERO;const I=Object(o["a"])(e.includeWebMercatorT,!1),D=Object(o["a"])(e.exaggeration,1),P=Object(o["a"])(e.exaggerationRelativeHeight,0),j=1!==D,R=j,L=Object(o["a"])(e.structure,Lc.DEFAULT_STRUCTURE),M=Object(o["a"])(L.heightScale,Lc.DEFAULT_STRUCTURE.heightScale),N=Object(o["a"])(L.heightOffset,Lc.DEFAULT_STRUCTURE.heightOffset),B=Object(o["a"])(L.elementsPerHeight,Lc.DEFAULT_STRUCTURE.elementsPerHeight),F=Object(o["a"])(L.stride,Lc.DEFAULT_STRUCTURE.stride),z=Object(o["a"])(L.elementMultiplier,Lc.DEFAULT_STRUCTURE.elementMultiplier),U=Object(o["a"])(L.isBigEndian,Lc.DEFAULT_STRUCTURE.isBigEndian);let V=Fe.computeWidth(O),H=Fe.computeHeight(O);const G=V/(f-1),W=H/(p-1);b||(V*=v,H*=v);const q=y.radiiSquared,Y=q.x,X=q.y,K=q.z;let $=65536,J=-65536;const Q=ka.eastNorthUpToFixedFrame(x,y),Z=Me.inverseTransformation(Q,Nc);let ee,te;I&&(ee=Rc.geodeticLatitudeToMercatorAngle(T),te=1/(Rc.geodeticLatitudeToMercatorAngle(E)-ee));const ne=Bc;ne.x=Number.POSITIVE_INFINITY,ne.y=Number.POSITIVE_INFINITY,ne.z=Number.POSITIVE_INFINITY;const ie=Fc;ie.x=Number.NEGATIVE_INFINITY,ie.y=Number.NEGATIVE_INFINITY,ie.z=Number.NEGATIVE_INFINITY;let oe=Number.POSITIVE_INFINITY;const re=f*p,ae=m>0?2*f+2*p:0,se=re+ae,ce=new Array(se),le=new Array(se),ue=new Array(se),he=I?new Array(se):[],de=R?new Array(se):[];let fe=0,pe=p,me=0,_e=f;_&&(--fe,++pe,--me,++_e);const ge=1e-5;for(let o=fe;o<pe;++o){let e=o;e<0&&(e=0),e>=p&&(e=p-1);let r=O.north-W*e;r=b?h(r):u-2*c(l(-r*v));let a=(r-T)/(E-T);a=s["a"].clamp(a,0,1);const _=o===fe,A=o===pe-1;m>0&&(_?r+=ge*H:A&&(r-=ge*H));const x=t(r),S=n(r),D=K*S;let P;I&&(P=(Rc.geodeticLatitudeToMercatorAngle(r)-ee)*te);for(let o=me;o<_e;++o){let r=o;r<0&&(r=0),r>=f&&(r=f-1);const c=e*(f*F)+r*F;let l;if(1===B)l=d[c];else{let e;if(l=0,U)for(e=0;e<B;++e)l=l*z+d[c+e];else for(e=B-1;e>=0;--e)l=l*z+d[c+e]}l=l*M+N,J=Math.max(J,l),$=Math.min($,l);let u=O.west+G*r;b?u=h(u):u*=v;let T=(u-w)/(C-w);T=s["a"].clamp(T,0,1);let E=e*f+r;if(m>0){const t=o===me,n=o===_e-1,i=_||A||t||n,a=(_||A)&&(t||n);if(a)continue;i&&(l-=m,t?(E=re+(p-e-1),u-=ge*V):A?E=re+p+(f-r-1):n?(E=re+p+f+e,u+=ge*V):_&&(E=re+p+f+p+r))}const j=x*t(u),L=x*n(u),k=Y*j,H=X*L,W=i(k*j+H*L+D*S),q=1/W,K=k*q,Q=H*q,ee=D*q,te=new g;te.x=K+j*l,te.y=Q+L*l,te.z=ee+S*l,Me.multiplyByPoint(Z,te,Mc),g.minimumByComponent(Mc,ne,ne),g.maximumByComponent(Mc,ie,ie),oe=Math.min(oe,l),ce[E]=te,ue[E]=new Gt(T,a),le[E]=l,I&&(he[E]=P),R&&(de[E]=y.geodeticSurfaceNormal(te))}}const be=Tt.fromPoints(ce);let ye,ve;if(Object(r["a"])(A)&&(ye=Ws.fromRectangle(A,$,J,y)),S){const e=new Mn(y);ve=e.computeHorizonCullingPointPossiblyUnderEllipsoid(x,ce,$)}const Oe=new gn(ne,ie,x),Ae=new Pc(x,Oe,oe,J,Q,!1,I,R,D,P),we=new Float32Array(se*Ae.stride);let Te=0;for(let o=0;o<se;++o)Te=Ae.encode(we,Te,ce[o],ue[o],le[o],void 0,he[o],de[o]);return{vertices:we,maximumHeight:J,minimumHeight:$,encoding:Ae,boundingSphere3D:be,orientedBoundingBox:ye,occludeePointInScaledSpace:ve}};var zc=Lc,kc=n("c909"),Uc=n.n(kc),Vc=n("9c35");function Hc(){return!0}function Gc(e,t){function n(){throw new a["a"](t)}t=Object(o["a"])(t,"This object was destroyed, i.e., destroy() was called.");for(const i in e)"function"===typeof e[i]&&(e[i]=n);e.isDestroyed=Hc}var Wc=Gc,qc=n("083c");function Yc(){if(!Object(r["a"])(tl._canTransferArrayBuffer)){const t=new Worker($c("Workers/transferTypedArrayTest.js"));t.postMessage=Object(o["a"])(t.webkitPostMessage,t.postMessage);const n=99,i=new Int8Array([n]);try{t.postMessage({array:i},[i.buffer])}catch(e){return tl._canTransferArrayBuffer=!1,tl._canTransferArrayBuffer}const a=Object(Vc["a"])();t.onmessage=function(e){const i=e.data.array,o=Object(r["a"])(i)&&i[0]===n;a.resolve(o),t.terminate(),tl._canTransferArrayBuffer=o},tl._canTransferArrayBuffer=a.promise}return tl._canTransferArrayBuffer}const Xc=new dn["a"];function Kc(e,t){--e._activeTasks;const n=t.id;if(!Object(r["a"])(n))return;const i=e._deferreds,o=i[n];if(Object(r["a"])(t.error)){let e=t.error;"RuntimeError"===e.name?(e=new ye["a"](t.error.message),e.stack=t.error.stack):"DeveloperError"===e.name&&(e=new a["a"](t.error.message),e.stack=t.error.stack),Xc.raiseEvent(e),o.reject(e)}else Xc.raiseEvent(),o.resolve(t.result);delete i[n]}function $c(e){let t=Bt(e);if(Object(qc["a"])(t)){const e=`importScripts("${t}");`;let i;try{i=new Blob([e],{type:"application/javascript"})}catch(n){const t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new t;o.append(e),i=o.getBlob("application/javascript")}const o=window.URL||window.webkitURL;t=o.createObjectURL(i)}return t}let Jc;function Qc(){return Object(r["a"])(Jc)||(Jc=$c("Workers/cesiumWorkerBootstrapper.js")),Jc}function Zc(e){const t=new Worker(Qc());t.postMessage=Object(o["a"])(t.webkitPostMessage,t.postMessage);const n={loaderConfig:{paths:{Workers:Bt("Workers")},baseUrl:Bt.getCesiumBaseUrl().url},workerModule:e._workerPath};return t.postMessage(n),t.onmessage=function(t){Kc(e,t.data)},t}function el(e,t){const n={modulePath:void 0,wasmBinaryFile:void 0,wasmBinary:void 0};if(!Or.supportsWebAssembly()){if(!Object(r["a"])(t.fallbackModulePath))throw new ye["a"](`This browser does not support Web Assembly, and no backup module was provided for ${e._workerPath}`);return n.modulePath=Bt(t.fallbackModulePath),Promise.resolve(n)}return n.modulePath=Bt(t.modulePath),n.wasmBinaryFile=Bt(t.wasmBinaryFile),Et["a"].fetchArrayBuffer({url:n.wasmBinaryFile}).then((function(e){return n.wasmBinary=e,n}))}function tl(e,t){const n=new Uc.a(e);this._workerPath=0!==n.scheme().length&&0===n.fragment().length?e:tl._workerModulePrefix+e,this._maximumActiveTasks=Object(o["a"])(t,Number.POSITIVE_INFINITY),this._activeTasks=0,this._deferreds={},this._nextID=0}const nl=[];tl.prototype.scheduleTask=function(e,t){if(Object(r["a"])(this._worker)||(this._worker=Zc(this)),this._activeTasks>=this._maximumActiveTasks)return;++this._activeTasks;const n=this;return Promise.resolve(Yc()).then((function(i){Object(r["a"])(t)?i||(t.length=0):t=nl;const o=n._nextID++,a=Object(Vc["a"])();return n._deferreds[o]=a,n._worker.postMessage({id:o,parameters:e,canTransferArrayBuffer:i},t),a.promise}))},tl.prototype.initWebAssemblyModule=function(e){Object(r["a"])(this._worker)||(this._worker=Zc(this));const t=Object(Vc["a"])(),n=this,i=this._worker;return el(this,e).then((function(e){return Promise.resolve(Yc()).then((function(o){let a;const s=e.wasmBinary;Object(r["a"])(s)&&o&&(a=[s]),i.onmessage=function(e){i.onmessage=function(e){Kc(n,e.data)},t.resolve(e.data)},i.postMessage({webAssemblyConfig:e},a)}))})),t.promise},tl.prototype.isDestroyed=function(){return!1},tl.prototype.destroy=function(){return Object(r["a"])(this._worker)&&this._worker.terminate(),Wc(this)},tl.taskCompletedEvent=Xc,tl._defaultWorkerModulePrefix="Workers/",tl._workerModulePrefix=tl._defaultWorkerModulePrefix,tl._canTransferArrayBuffer=void 0;var il=tl;function ol(){a["a"].throwInstantiationError()}Object.defineProperties(ol.prototype,{credits:{get:a["a"].throwInstantiationError},waterMask:{get:a["a"].throwInstantiationError}}),ol.prototype.interpolateHeight=a["a"].throwInstantiationError,ol.prototype.isChildAvailable=a["a"].throwInstantiationError,ol.prototype.createMesh=a["a"].throwInstantiationError,ol.prototype.upsample=a["a"].throwInstantiationError,ol.prototype.wasCreatedByUpsampling=a["a"].throwInstantiationError,ol.maximumAsynchronousTasks=5;var rl=ol;function al(e,t,n,i,r,a,s,c,l,u,h,d,f,p,m,_){this.center=e,this.vertices=t,this.stride=Object(o["a"])(u,6),this.indices=n,this.indexCountWithoutSkirts=i,this.vertexCountWithoutSkirts=r,this.minimumHeight=a,this.maximumHeight=s,this.boundingSphere3D=c,this.occludeePointInScaledSpace=l,this.orientedBoundingBox=h,this.encoding=d,this.westIndicesSouthToNorth=f,this.southIndicesEastToWest=p,this.eastIndicesNorthToSouth=m,this.northIndicesWestToEast=_}var sl=al;const cl={UNSIGNED_BYTE:Ys.UNSIGNED_BYTE,UNSIGNED_SHORT:Ys.UNSIGNED_SHORT,UNSIGNED_INT:Ys.UNSIGNED_INT,getSizeInBytes:function(e){switch(e){case cl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case cl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case cl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}throw new a["a"]("indexDatatype is required and must be a valid IndexDatatype constant.")},fromSizeInBytes:function(e){switch(e){case 2:return cl.UNSIGNED_SHORT;case 4:return cl.UNSIGNED_INT;case 1:return cl.UNSIGNED_BYTE;default:throw new a["a"]("Size in bytes cannot be mapped to an IndexDatatype")}},validate:function(e){return Object(r["a"])(e)&&(e===cl.UNSIGNED_BYTE||e===cl.UNSIGNED_SHORT||e===cl.UNSIGNED_INT)},createTypedArray:function(e,t){if(!Object(r["a"])(e))throw new a["a"]("numberOfVertices is required.");return e>=s["a"].SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)},createTypedArrayFromArrayBuffer:function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("numberOfVertices is required.");if(!Object(r["a"])(t))throw new a["a"]("sourceArray is required.");if(!Object(r["a"])(n))throw new a["a"]("byteOffset is required.");return e>=s["a"].SIXTY_FOUR_KILOBYTES?new Uint32Array(t,n,i):new Uint16Array(t,n,i)},fromTypedArray:function(e){if(e instanceof Uint8Array)return cl.UNSIGNED_BYTE;if(e instanceof Uint16Array)return cl.UNSIGNED_SHORT;if(e instanceof Uint32Array)return cl.UNSIGNED_INT;throw new a["a"]("array must be a Uint8Array, Uint16Array, or Uint32Array.")}};var ll=Object.freeze(cl);function ul(){a["a"].throwInstantiationError()}Object.defineProperties(ul.prototype,{errorEvent:{get:a["a"].throwInstantiationError},credit:{get:a["a"].throwInstantiationError},tilingScheme:{get:a["a"].throwInstantiationError},ready:{get:a["a"].throwInstantiationError},readyPromise:{get:a["a"].throwInstantiationError},hasWaterMask:{get:a["a"].throwInstantiationError},hasVertexNormals:{get:a["a"].throwInstantiationError},availability:{get:a["a"].throwInstantiationError}});const hl=[];ul.getRegularGridIndices=function(e,t){if(e*t>=s["a"].FOUR_GIGABYTES)throw new a["a"]("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=hl[e];Object(r["a"])(n)||(hl[e]=n=[]);let i=n[t];return Object(r["a"])(i)||(i=e*t<s["a"].SIXTY_FOUR_KILOBYTES?n[t]=new Uint16Array((e-1)*(t-1)*6):n[t]=new Uint32Array((e-1)*(t-1)*6),ml(e,t,i,0)),i};const dl=[];ul.getRegularGridIndicesAndEdgeIndices=function(e,t){if(e*t>=s["a"].FOUR_GIGABYTES)throw new a["a"]("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=dl[e];Object(r["a"])(n)||(dl[e]=n=[]);let i=n[t];if(!Object(r["a"])(i)){const o=ul.getRegularGridIndices(e,t),r=pl(e,t),a=r.westIndicesSouthToNorth,s=r.southIndicesEastToWest,c=r.eastIndicesNorthToSouth,l=r.northIndicesWestToEast;i=n[t]={indices:o,westIndicesSouthToNorth:a,southIndicesEastToWest:s,eastIndicesNorthToSouth:c,northIndicesWestToEast:l}}return i};const fl=[];function pl(e,t){const n=new Array(t),i=new Array(e),o=new Array(t),r=new Array(e);let a;for(a=0;a<e;++a)r[a]=a,i[a]=e*t-1-a;for(a=0;a<t;++a)o[a]=(a+1)*e-1,n[a]=(t-a-1)*e;return{westIndicesSouthToNorth:n,southIndicesEastToWest:i,eastIndicesNorthToSouth:o,northIndicesWestToEast:r}}function ml(e,t,n,i){let o=0;for(let r=0;r<t-1;++r){for(let t=0;t<e-1;++t){const t=o,r=t+e,a=r+1,s=t+1;n[i++]=t,n[i++]=r,n[i++]=s,n[i++]=s,n[i++]=r,n[i++]=a,++o}++o}}function _l(e,t,n,i){let o=e[0];const r=e.length;for(let a=1;a<r;++a){const r=e[a];n[i++]=o,n[i++]=r,n[i++]=t,n[i++]=t,n[i++]=r,n[i++]=t+1,o=r,++t}return i}ul.getRegularGridAndSkirtIndicesAndEdgeIndices=function(e,t){if(e*t>=s["a"].FOUR_GIGABYTES)throw new a["a"]("The total number of vertices (width * height) must be less than 4,294,967,296.");let n=fl[e];Object(r["a"])(n)||(fl[e]=n=[]);let i=n[t];if(!Object(r["a"])(i)){const o=e*t,r=(e-1)*(t-1)*6,a=2*e+2*t,s=6*Math.max(0,a-4),c=o+a,l=r+s,u=pl(e,t),h=u.westIndicesSouthToNorth,d=u.southIndicesEastToWest,f=u.eastIndicesNorthToSouth,p=u.northIndicesWestToEast,m=ll.createTypedArray(c,l);ml(e,t,m,0),ul.addSkirtIndices(h,d,f,p,o,m,r),i=n[t]={indices:m,westIndicesSouthToNorth:h,southIndicesEastToWest:d,eastIndicesNorthToSouth:f,northIndicesWestToEast:p,indexCountWithoutSkirts:r}}return i},ul.addSkirtIndices=function(e,t,n,i,o,r,a){let s=o;a=_l(e,s,r,a),s+=e.length,a=_l(t,s,r,a),s+=t.length,a=_l(n,s,r,a),s+=n.length,_l(i,s,r,a)},ul.heightmapTerrainQuality=.25,ul.getEstimatedLevelZeroGeometricErrorForAHeightmap=function(e,t,n){return 2*e.maximumRadius*Math.PI*ul.heightmapTerrainQuality/(t*n)},ul.prototype.requestTileGeometry=a["a"].throwInstantiationError,ul.prototype.getLevelMaximumGeometricError=a["a"].throwInstantiationError,ul.prototype.getTileDataAvailable=a["a"].throwInstantiationError,ul.prototype.loadTileDataAvailability=a["a"].throwInstantiationError;var gl=ul;function bl(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.buffer))throw new a["a"]("options.buffer is required.");if(!Object(r["a"])(e.width))throw new a["a"]("options.width is required.");if(!Object(r["a"])(e.height))throw new a["a"]("options.height is required.");this._buffer=e.buffer,this._width=e.width,this._height=e.height,this._childTileMask=Object(o["a"])(e.childTileMask,15),this._encoding=Object(o["a"])(e.encoding,pn.NONE);const t=zc.DEFAULT_STRUCTURE;let n=e.structure;Object(r["a"])(n)?n!==t&&(n.heightScale=Object(o["a"])(n.heightScale,t.heightScale),n.heightOffset=Object(o["a"])(n.heightOffset,t.heightOffset),n.elementsPerHeight=Object(o["a"])(n.elementsPerHeight,t.elementsPerHeight),n.stride=Object(o["a"])(n.stride,t.stride),n.elementMultiplier=Object(o["a"])(n.elementMultiplier,t.elementMultiplier),n.isBigEndian=Object(o["a"])(n.isBigEndian,t.isBigEndian)):n=t,this._structure=n,this._createdByUpsampling=Object(o["a"])(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._skirtHeight=void 0,this._bufferType=this._encoding===pn.LERC?Float32Array:this._buffer.constructor,this._mesh=void 0}Object.defineProperties(bl.prototype,{credits:{get:function(){}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}}});const yl="createVerticesFromHeightmap",vl=new il(yl),Ol=new il(yl,rl.maximumAsynchronousTasks);function Al(e,t,n,i,o,r,a,s,c,l){const u=(c-r.west)*(a-1)/(r.east-r.west),h=(l-r.south)*(s-1)/(r.north-r.south);let d=0|u,f=d+1;f>=a&&(f=a-1,d=a-2);let p=0|h,m=p+1;m>=s&&(m=s-1,p=s-2);const _=u-d,g=h-p;p=s-1-p,m=s-1-m;const b=Cl(e,t,n,i,o,p*a+d),y=Cl(e,t,n,i,o,p*a+f),v=Cl(e,t,n,i,o,m*a+d),O=Cl(e,t,n,i,o,m*a+f);return Tl(_,g,b,y,v,O)}function wl(e,t,n,i,o,r,a,s,c){const l=(s-o.west)*(r-1)/(o.east-o.west),u=(c-o.south)*(a-1)/(o.north-o.south);let h=0|l,d=h+1;d>=r&&(d=r-1,h=r-2);let f=0|u,p=f+1;p>=a&&(p=a-1,f=a-2);const m=l-h,_=u-f;f=a-1-f,p=a-1-p;const g=(t.decodeHeight(e,f*r+h)-n)/i,b=(t.decodeHeight(e,f*r+d)-n)/i,y=(t.decodeHeight(e,p*r+h)-n)/i,v=(t.decodeHeight(e,p*r+d)-n)/i;return Tl(m,_,g,b,y,v)}function Tl(e,t,n,i,o,r){return t<e?n+e*(i-n)+t*(r-i):n+e*(r-o)+t*(o-n)}function Cl(e,t,n,i,o,r){r*=i;let a,s=0;if(o)for(a=0;a<t;++a)s=s*n+e[r+a];else for(a=t-1;a>=0;--a)s=s*n+e[r+a];return s}function El(e,t,n,i,o,r,a,s){let c;if(a*=o,r)for(c=0;c<t-1;++c)e[a+c]=s/i|0,s-=e[a+c]*i,i/=n;else for(c=t-1;c>0;--c)e[a+c]=s/i|0,s-=e[a+c]*i,i/=n;e[a+c]=s}bl.prototype.createMesh=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.tilingScheme",e.tilingScheme),i["a"].typeOf.number("options.x",e.x),i["a"].typeOf.number("options.y",e.y),i["a"].typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,a=e.y,s=e.level,c=Object(o["a"])(e.exaggeration,1),l=Object(o["a"])(e.exaggerationRelativeHeight,0),u=Object(o["a"])(e.throttle,!0),h=t.ellipsoid,d=t.tileXYToNativeRectangle(n,a,s),f=t.tileXYToRectangle(n,a,s),p=h.cartographicToCartesian(Fe.center(f)),m=this._structure,_=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(h,this._width,t.getNumberOfXTilesAtLevel(0)),b=_/(1<<s);this._skirtHeight=Math.min(4*b,1e3);const y=u?Ol:vl,v=y.scheduleTask({heightmap:this._buffer,structure:m,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:d,rectangle:f,relativeToCenter:p,ellipsoid:h,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof V,exaggeration:c,exaggerationRelativeHeight:l,encoding:this._encoding});if(!Object(r["a"])(v))return;const O=this;return Promise.resolve(v).then((function(e){let t;t=O._skirtHeight>0?gl.getRegularGridAndSkirtIndicesAndEdgeIndices(e.gridWidth,e.gridHeight):gl.getRegularGridIndicesAndEdgeIndices(e.gridWidth,e.gridHeight);const n=e.gridWidth*e.gridHeight;return O._mesh=new sl(p,new Float32Array(e.vertices),t.indices,t.indexCountWithoutSkirts,n,e.minimumHeight,e.maximumHeight,Tt.clone(e.boundingSphere3D),g.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,Ws.clone(e.orientedBoundingBox),Pc.clone(e.encoding),t.westIndicesSouthToNorth,t.southIndicesEastToWest,t.eastIndicesNorthToSouth,t.northIndicesWestToEast),O._buffer=void 0,O._mesh}))},bl.prototype._createMeshSync=function(e){i["a"].typeOf.object("options.tilingScheme",e.tilingScheme),i["a"].typeOf.number("options.x",e.x),i["a"].typeOf.number("options.y",e.y),i["a"].typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,r=e.y,a=e.level,s=Object(o["a"])(e.exaggeration,1),c=Object(o["a"])(e.exaggerationRelativeHeight,0),l=t.ellipsoid,u=t.tileXYToNativeRectangle(n,r,a),h=t.tileXYToRectangle(n,r,a),d=l.cartographicToCartesian(Fe.center(h)),f=this._structure,p=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(l,this._width,t.getNumberOfXTilesAtLevel(0)),m=p/(1<<a);this._skirtHeight=Math.min(4*m,1e3);const _=zc.computeVertices({heightmap:this._buffer,structure:f,includeWebMercatorT:!0,width:this._width,height:this._height,nativeRectangle:u,rectangle:h,relativeToCenter:d,ellipsoid:l,skirtHeight:this._skirtHeight,isGeographic:t.projection instanceof V,exaggeration:s,exaggerationRelativeHeight:c});let g;this._buffer=void 0,g=this._skirtHeight>0?gl.getRegularGridAndSkirtIndicesAndEdgeIndices(this._width,this._height):gl.getRegularGridIndicesAndEdgeIndices(this._width,this._height);const b=_.gridWidth*_.gridHeight;return this._mesh=new sl(d,_.vertices,g.indices,g.indexCountWithoutSkirts,b,_.minimumHeight,_.maximumHeight,_.boundingSphere3D,_.occludeePointInScaledSpace,_.encoding.stride,_.orientedBoundingBox,_.encoding,g.westIndicesSouthToNorth,g.southIndicesEastToWest,g.eastIndicesNorthToSouth,g.northIndicesWestToEast),this._mesh},bl.prototype.interpolateHeight=function(e,t,n){const i=this._width,o=this._height,a=this._structure,s=a.stride,c=a.elementsPerHeight,l=a.elementMultiplier,u=a.isBigEndian,h=a.heightOffset,d=a.heightScale,f=Object(r["a"])(this._mesh),p=this._encoding===pn.LERC,m=!f&&p;if(m)return;let _;if(f){const r=this._mesh.vertices,a=this._mesh.encoding;_=wl(r,a,h,d,e,i,o,t,n)}else _=Al(this._buffer,c,l,s,u,e,i,o,t,n),_=_*d+h;return _},bl.prototype.upsample=function(e,t,n,i,o,c,l){if(!Object(r["a"])(e))throw new a["a"]("tilingScheme is required.");if(!Object(r["a"])(t))throw new a["a"]("thisX is required.");if(!Object(r["a"])(n))throw new a["a"]("thisY is required.");if(!Object(r["a"])(i))throw new a["a"]("thisLevel is required.");if(!Object(r["a"])(o))throw new a["a"]("descendantX is required.");if(!Object(r["a"])(c))throw new a["a"]("descendantY is required.");if(!Object(r["a"])(l))throw new a["a"]("descendantLevel is required.");const u=l-i;if(u>1)throw new a["a"]("Upsampling through more than one level at a time is not currently supported.");const h=this._mesh;if(!Object(r["a"])(h))return;const d=this._width,f=this._height,p=this._structure,m=p.stride,_=new this._bufferType(d*f*m),g=h.vertices,b=h.encoding,y=e.tileXYToRectangle(t,n,i),v=e.tileXYToRectangle(o,c,l),O=p.heightOffset,A=p.heightScale,w=p.elementsPerHeight,T=p.elementMultiplier,C=p.isBigEndian,E=Math.pow(T,w-1);for(let r=0;r<f;++r){const e=s["a"].lerp(v.north,v.south,r/(f-1));for(let t=0;t<d;++t){const n=s["a"].lerp(v.west,v.east,t/(d-1));let i=wl(g,b,O,A,y,d,f,n,e);i=i<p.lowestEncodedHeight?p.lowestEncodedHeight:i,i=i>p.highestEncodedHeight?p.highestEncodedHeight:i,El(_,w,T,E,m,C,r*d+t,i)}}return Promise.resolve(new bl({buffer:_,width:d,height:f,childTileMask:0,structure:this._structure,createdByUpsampling:!0}))},bl.prototype.isChildAvailable=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("thisX is required.");if(!Object(r["a"])(t))throw new a["a"]("thisY is required.");if(!Object(r["a"])(n))throw new a["a"]("childX is required.");if(!Object(r["a"])(i))throw new a["a"]("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),0!==(this._childTileMask&1<<o)},bl.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};var xl=bl,Sl=n("de66"),Il=n("8a39"),Dl=n("b82e");function Pl(e,t){this._tilingScheme=e,this._maximumLevel=t,this._rootNodes=[]}const jl=new Fe;function Rl(e,t,n,i){const o=i.length;for(let r=0;r<o;++r){const o=i[r];if(o.x===t&&o.y===n&&o.level===e)return!0}return!1}Pl.prototype.addAvailableTileRange=function(e,t,n,i,o){const r=this._tilingScheme,a=this._rootNodes;if(0===e)for(let d=n;d<=o;++d)for(let n=t;n<=i;++n)Rl(e,n,d,a)||a.push(new zl(r,void 0,0,n,d));r.tileXYToRectangle(t,n,e,jl);const s=jl.west,c=jl.north;r.tileXYToRectangle(i,o,e,jl);const l=jl.east,u=jl.south,h=new kl(e,s,u,l,c);for(let d=0;d<a.length;++d){const e=a[d];Ul(e.extent,h)&&Vl(this._maximumLevel,e,h)}},Pl.prototype.computeMaximumLevelAtPosition=function(e){let t;for(let n=0;n<this._rootNodes.length;++n){const i=this._rootNodes[n];if(Wl(i.extent,e)){t=i;break}}return Object(r["a"])(t)?ql(void 0,t,e):-1};const Ll=[],Ml=[],Nl=new Fe,Bl=new Fe;Pl.prototype.computeBestAvailableLevelOverRectangle=function(e){const t=Ll;t.length=0,e.east<e.west?(t.push(Fe.fromRadians(-Math.PI,e.south,e.east,e.north,Nl)),t.push(Fe.fromRadians(e.west,e.south,Math.PI,e.north,Bl))):t.push(e);const n=Ml;let i;for(n.length=0,i=0;i<this._rootNodes.length;++i)Yl(n,this._rootNodes[i],t);for(i=n.length-1;i>=0;--i)if(Object(r["a"])(n[i])&&0===n[i].length)return i;return 0};const Fl=new I;function zl(e,t,n,i,o){this.tilingScheme=e,this.parent=t,this.level=n,this.x=i,this.y=o,this.extent=e.tileXYToRectangle(i,o,n),this.rectangles=[],this._sw=void 0,this._se=void 0,this._nw=void 0,this._ne=void 0}function kl(e,t,n,i,o){this.level=e,this.west=t,this.south=n,this.east=i,this.north=o}function Ul(e,t){const n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east),r=Math.min(e.north,t.north);return i<r&&n<o}function Vl(e,t,n){while(t.level<e)if(Gl(t.nw.extent,n))t=t.nw;else if(Gl(t.ne.extent,n))t=t.ne;else if(Gl(t.sw.extent,n))t=t.sw;else{if(!Gl(t.se.extent,n))break;t=t.se}if(0===t.rectangles.length||t.rectangles[t.rectangles.length-1].level<=n.level)t.rectangles.push(n);else{let e=Li(t.rectangles,n.level,Hl);e<0&&(e=~e),t.rectangles.splice(e,0,n)}}function Hl(e,t){return e.level-t}function Gl(e,t){return t.west>=e.west&&t.east<=e.east&&t.south>=e.south&&t.north<=e.north}function Wl(e,t){return t.longitude>=e.west&&t.longitude<=e.east&&t.latitude>=e.south&&t.latitude<=e.north}function ql(e,t,n){let i=0,o=!1;while(!o){const e=t._nw&&Wl(t._nw.extent,n),r=t._ne&&Wl(t._ne.extent,n),a=t._sw&&Wl(t._sw.extent,n),s=t._se&&Wl(t._se.extent,n);if(e+r+a+s>1){e&&(i=Math.max(i,ql(t,t._nw,n))),r&&(i=Math.max(i,ql(t,t._ne,n))),a&&(i=Math.max(i,ql(t,t._sw,n))),s&&(i=Math.max(i,ql(t,t._se,n)));break}e?t=t._nw:r?t=t._ne:a?t=t._sw:s?t=t._se:o=!0}while(t!==e){const e=t.rectangles;for(let t=e.length-1;t>=0&&e[t].level>i;--t){const o=e[t];Wl(o,n)&&(i=o.level)}t=t.parent}return i}function Yl(e,t,n){if(!t)return;let i,o=!1;for(i=0;i<n.length;++i)o=o||Ul(t.extent,n[i]);if(!o)return;const r=t.rectangles;for(i=0;i<r.length;++i){const t=r[i];e[t.level]||(e[t.level]=n),e[t.level]=Xl(e[t.level],t)}Yl(e,t._nw,n),Yl(e,t._ne,n),Yl(e,t._sw,n),Yl(e,t._se,n)}function Xl(e,t){const n=[];for(let i=0;i<e.length;++i){const o=e[i];Ul(o,t)?(o.west<t.west&&n.push(new Fe(o.west,o.south,t.west,o.north)),o.east>t.east&&n.push(new Fe(t.east,o.south,o.east,o.north)),o.south<t.south&&n.push(new Fe(Math.max(t.west,o.west),o.south,Math.min(t.east,o.east),t.south)),o.north>t.north&&n.push(new Fe(Math.max(t.west,o.west),t.north,Math.min(t.east,o.east),o.north))):n.push(o)}return n}Pl.prototype.isTileAvailable=function(e,t,n){const i=this._tilingScheme.tileXYToRectangle(t,n,e,jl);return Fe.center(i,Fl),this.computeMaximumLevelAtPosition(Fl)>=e},Pl.prototype.computeChildMaskForTile=function(e,t,n){const i=e+1;if(i>=this._maximumLevel)return 0;let o=0;return o|=this.isTileAvailable(i,2*t,2*n+1)?1:0,o|=this.isTileAvailable(i,2*t+1,2*n+1)?2:0,o|=this.isTileAvailable(i,2*t,2*n)?4:0,o|=this.isTileAvailable(i,2*t+1,2*n)?8:0,o},Object.defineProperties(zl.prototype,{nw:{get:function(){return this._nw||(this._nw=new zl(this.tilingScheme,this,this.level+1,2*this.x,2*this.y)),this._nw}},ne:{get:function(){return this._ne||(this._ne=new zl(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y)),this._ne}},sw:{get:function(){return this._sw||(this._sw=new zl(this.tilingScheme,this,this.level+1,2*this.x,2*this.y+1)),this._sw}},se:{get:function(){return this._se||(this._se=new zl(this.tilingScheme,this,this.level+1,2*this.x+1,2*this.y+1)),this._se}}});var Kl=Pl;function $l(e){let t;const n=e.name,i=e.message;t=Object(r["a"])(n)&&Object(r["a"])(i)?`${n}: ${i}`:e.toString();const o=e.stack;return Object(r["a"])(o)&&(t+=`\n${o}`),t}var Jl=$l;function Ql(e,t,n,i,r,a,s){this.provider=e,this.message=t,this.x=n,this.y=i,this.level=r,this.timesRetried=Object(o["a"])(a,0),this.retry=!1,this.error=s}Ql.reportError=function(e,t,n,i,o,a,s,c){let l=e;return Object(r["a"])(e)?(l.provider=t,l.message=i,l.x=o,l.y=a,l.level=s,l.retry=!1,l.error=c,++l.timesRetried):l=new Ql(t,i,o,a,s,0,c),n.numberOfListeners>0?n.raiseEvent(l):console.log(`An error occurred in "${t.constructor.name}": ${Jl(i)}`),l},Ql.reportSuccess=function(e){Object(r["a"])(e)&&(e.timesRetried=-1)};var Zl=Ql;function eu(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._numberOfLevelZeroTilesX=Object(o["a"])(e.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=Object(o["a"])(e.numberOfLevelZeroTilesY,1),this._projection=new Rc(this._ellipsoid),Object(r["a"])(e.rectangleSouthwestInMeters)&&Object(r["a"])(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{const e=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new Gt(-e,-e),this._rectangleNortheastInMeters=new Gt(e,e)}const t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new Fe(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(eu.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),eu.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},eu.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},eu.prototype.rectangleToNativeRectangle=function(e,t){const n=this._projection,i=n.project(Fe.southwest(e)),o=n.project(Fe.northeast(e));return Object(r["a"])(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new Fe(i.x,i.y,o.x,o.y)},eu.prototype.tileXYToNativeRectangle=function(e,t,n,i){const o=this.getNumberOfXTilesAtLevel(n),a=this.getNumberOfYTilesAtLevel(n),s=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,c=this._rectangleSouthwestInMeters.x+e*s,l=this._rectangleSouthwestInMeters.x+(e+1)*s,u=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/a,h=this._rectangleNortheastInMeters.y-t*u,d=this._rectangleNortheastInMeters.y-(t+1)*u;return Object(r["a"])(i)?(i.west=c,i.south=d,i.east=l,i.north=h,i):new Fe(c,d,l,h)},eu.prototype.tileXYToRectangle=function(e,t,n,i){const o=this.tileXYToNativeRectangle(e,t,n,i),r=this._projection,a=r.unproject(new Gt(o.west,o.south)),s=r.unproject(new Gt(o.east,o.north));return o.west=a.longitude,o.south=a.latitude,o.east=s.longitude,o.north=s.latitude,o},eu.prototype.positionToTileXY=function(e,t,n){const i=this._rectangle;if(!Fe.contains(i,e))return;const o=this.getNumberOfXTilesAtLevel(t),a=this.getNumberOfYTilesAtLevel(t),s=this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x,c=s/o,l=this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y,u=l/a,h=this._projection,d=h.project(e),f=d.x-this._rectangleSouthwestInMeters.x,p=this._rectangleNortheastInMeters.y-d.y;let m=f/c|0;m>=o&&(m=o-1);let _=p/u|0;return _>=a&&(_=a-1),Object(r["a"])(n)?(n.x=m,n.y=_,n):new Gt(m,_)};var tu=eu;const nu=15;function iu(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");this._resource=void 0,this._credit=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._maxLevel=void 0,this._terrainDataStructure=void 0,this._ready=!1,this._width=void 0,this._height=void 0,this._encoding=void 0;const t=e.token;this._hasAvailability=!1,this._tilesAvailable=void 0,this._tilesAvailablityLoaded=void 0,this._availableCache={};const n=this,i=Object(o["a"])(e.ellipsoid,k.WGS84);this._readyPromise=Promise.resolve(e.url).then((function(e){let i=Et["a"].createIfNeeded(e);i.appendForwardSlash(),Object(r["a"])(t)&&(i=i.getDerivedResource({queryParameters:{token:t}})),n._resource=i;const o=i.getDerivedResource({queryParameters:{f:"pjson"}});return o.fetchJson()})).then((function(e){const t=e.copyrightText;Object(r["a"])(t)&&(n._credit=new hn(t));const a=e.spatialReference,s=Object(o["a"])(a.latestWkid,a.wkid),c=e.extent,l={ellipsoid:i};if(4326===s)l.rectangle=Fe.fromDegrees(c.xmin,c.ymin,c.xmax,c.ymax),n._tilingScheme=new qt(l);else{if(3857!==s)return Promise.reject(new ye["a"]("Invalid spatial reference"));l.rectangleSouthwestInMeters=new Gt(c.xmin,c.ymin),l.rectangleNortheastInMeters=new Gt(c.xmax,c.ymax),n._tilingScheme=new tu(l)}const u=e.tileInfo;if(!Object(r["a"])(u))return Promise.reject(new ye["a"]("tileInfo is required"));n._width=u.rows+1,n._height=u.cols+1,n._encoding="LERC"===u.format?pn.LERC:pn.NONE,n._lodCount=u.lods.length-1;const h=n._hasAvailability=-1!==e.capabilities.indexOf("Tilemap");return h&&(n._tilesAvailable=new Kl(n._tilingScheme,n._lodCount),n._tilesAvailable.addAvailableTileRange(0,0,0,n._tilingScheme.getNumberOfXTilesAtLevel(0),n._tilingScheme.getNumberOfYTilesAtLevel(0)),n._tilesAvailablityLoaded=new Kl(n._tilingScheme,n._lodCount)),n._levelZeroMaximumGeometricError=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(n._tilingScheme.ellipsoid,n._width,n._tilingScheme.getNumberOfXTilesAtLevel(0)),e.bandCount>1&&console.log("ArcGISTiledElevationTerrainProvider: Terrain data has more than 1 band. Using the first one."),n._terrainDataStructure={elementMultiplier:1,lowestEncodedHeight:e.minValues[0],highestEncodedHeight:e.maxValues[0]},n._ready=!0,!0})).catch((function(e){const t=`An error occurred while accessing ${n._resource.url}.`;return Zl.reportError(void 0,n,n._errorEvent,t),Promise.reject(e)})),this._errorEvent=new dn["a"]}function ou(e,t,n,i){if(!e._hasAvailability)return;const o=e._tilesAvailablityLoaded,r=e._tilesAvailable;return!(t>e._lodCount)&&(!!r.isTileAvailable(t,n,i)||!o.isTileAvailable(t,n,i)&&void 0)}function ru(e,t,n,i){const o=t-1,r=n-1,a=i[e.y*t+e.x],s=[],c={startX:e.x,startY:e.y,endX:0,endY:0},l=new Gt(e.x+1,e.y+1);let u=!1,h=!1;while(!u||!h){let n=l.x;const d=h?l.y+1:l.y;if(!u){for(let n=e.y;n<d;++n)if(i[n*t+l.x]!==a){u=!0;break}u?(s.push(new Gt(l.x,e.y)),--l.x,--n,c.endX=l.x):l.x===o?(c.endX=l.x,u=!0):++l.x}if(!h){const o=l.y*t;for(let t=e.x;t<=n;++t)if(i[o+t]!==a){h=!0;break}h?(s.push(new Gt(e.x,l.y)),--l.y,c.endY=l.y):l.y===r?(c.endY=l.y,h=!0):++l.y}}return{endingIndices:s,range:c,value:a}}function au(e,t,n,i,o){const r=[],a=o.every((function(e){return e===o[0]}));if(a)return 1===o[0]&&r.push({startX:e,startY:t,endX:e+n-1,endY:t+i-1}),r;let s=[new Gt(0,0)];while(s.length>0){const a=s.pop(),c=ru(a,n,i,o);if(1===c.value){const n=c.range;n.startX+=e,n.endX+=e,n.startY+=t,n.endY+=t,r.push(n)}const l=c.endingIndices;l.length>0&&(s=s.concat(l))}return r}function su(e,t,n,i){if(!e._hasAvailability)return{};const o=128*Math.floor(n/128),a=128*Math.floor(i/128),s=Math.min(1<<t,128),c=`tilemap/${t}/${a}/${o}/${s}/${s}`,l=e._availableCache;if(Object(r["a"])(l[c]))return l[c];const u=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].TERRAIN}),h=e._resource.getDerivedResource({url:c,request:u});let d=h.fetchJson();return Object(r["a"])(d)?(d=d.then((function(r){const c=au(o,a,s,s,r.data);e._tilesAvailablityLoaded.addAvailableTileRange(t,o,a,o+s,a+s);const l=e._tilesAvailable;for(let e=0;e<c.length;++e){const n=c[e];l.addAvailableTileRange(t,n.startX,n.startY,n.endX,n.endY)}return ou(e,t,n,i)})),l[c]={promise:d,request:u},d=d.finally((function(e){return delete l[c],e})),{promise:d,request:u}):{}}Object.defineProperties(iu.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this.ready)throw new a["a"]("credit must not be called before ready returns true.");return this._credit}},tilingScheme:{get:function(){if(!this.ready)throw new a["a"]("tilingScheme must not be called before ready returns true.");return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){if(!this._ready)throw new a["a"]("availability must not be called before the terrain provider is ready.");return this._tilesAvailable}}}),iu.prototype.requestTileGeometry=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestTileGeometry must not be called before the terrain provider is ready.");const o=this._resource.getDerivedResource({url:`tile/${n}/${t}/${e}`,request:i}),s=this._hasAvailability;let c,l=Promise.resolve(!0);if(s&&!Object(r["a"])(ou(this,n+1,2*e,2*t))){const i=su(this,n+1,2*e,2*t);l=i.promise,c=i.request}const u=o.fetchArrayBuffer();if(!Object(r["a"])(u)||!Object(r["a"])(l))return;const h=this,d=this._tilesAvailable;return Promise.all([u,l]).then((function(i){return new xl({buffer:i[0],width:h._width,height:h._height,childTileMask:s?d.computeChildMaskForTile(n,e,t):nu,structure:h._terrainDataStructure,encoding:h._encoding})})).catch((function(e){return Object(r["a"])(c)&&c.state===Il["a"].CANCELLED?(i.cancel(),i.deferred.promise.finally((function(){return i.state=Il["a"].CANCELLED,Promise.reject(e)}))):Promise.reject(e)}))},iu.prototype.getLevelMaximumGeometricError=function(e){if(!this.ready)throw new a["a"]("getLevelMaximumGeometricError must not be called before ready returns true.");return this._levelZeroMaximumGeometricError/(1<<e)},iu.prototype.getTileDataAvailable=function(e,t,n){if(!this._hasAvailability)return;const i=ou(this,n,e,t);if(Object(r["a"])(i))return i;su(this,n,e,t)},iu.prototype.loadTileDataAvailability=function(e,t,n){};var cu=iu;const lu={NONE:0,GEODESIC:1,RHUMB:2};var uu=Object.freeze(lu);const hu={XTRANSLATE:"xTranslate",YTRANSLATE:"yTranslate",ZTRANSLATE:"zTranslate",XROTATE:"xRotate",YROTATE:"yRotate",ZROTATE:"zRotate",XSCALE:"xScale",YSCALE:"yScale",ZSCALE:"zScale",UNIFORMSCALE:"uniformScale"};var du=Object.freeze(hu);function fu(){this._array=[],this._hash={}}Object.defineProperties(fu.prototype,{length:{get:function(){return this._array.length}},values:{get:function(){return this._array}}}),fu.prototype.contains=function(e){if("string"!==typeof e&&"number"!==typeof e)throw new a["a"]("key is required to be a string or number.");return Object(r["a"])(this._hash[e])},fu.prototype.set=function(e,t){if("string"!==typeof e&&"number"!==typeof e)throw new a["a"]("key is required to be a string or number.");const n=this._hash[e];t!==n&&(this.remove(e),this._hash[e]=t,this._array.push(t))},fu.prototype.get=function(e){if("string"!==typeof e&&"number"!==typeof e)throw new a["a"]("key is required to be a string or number.");return this._hash[e]},fu.prototype.remove=function(e){if(Object(r["a"])(e)&&"string"!==typeof e&&"number"!==typeof e)throw new a["a"]("key is required to be a string or number.");const t=this._hash[e],n=Object(r["a"])(t);if(n){const n=this._array;n.splice(n.indexOf(t),1),delete this._hash[e]}return n},fu.prototype.removeAll=function(){const e=this._array;e.length>0&&(this._hash={},e.length=0)};var pu=fu;const mu="https://dev.virtualearth.net/REST/v1/Locations";function _u(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.key;if(!Object(r["a"])(t))throw new a["a"]("options.key is required.");this._key=t;const n={key:t};Object(r["a"])(e.culture)&&(n.culture=e.culture),this._resource=new Et["a"]({url:mu,queryParameters:n})}Object.defineProperties(_u.prototype,{url:{get:function(){return mu}},key:{get:function(){return this._key}}}),_u.prototype.geocode=function(e){i["a"].typeOf.string("query",e);const t=this._resource.getDerivedResource({queryParameters:{query:e}});return t.fetchJsonp("jsonp").then((function(e){if(0===e.resourceSets.length)return[];const t=e.resourceSets[0].resources;return t.map((function(e){const t=e.bbox,n=t[0],i=t[1],o=t[2],r=t[3];return{displayName:e.name,destination:Fe.fromDegrees(i,n,r,o)}}))}))};var gu=_u;function bu(e,t,n,i){this.x=Object(o["a"])(e,0),this.y=Object(o["a"])(t,0),this.width=Object(o["a"])(n,0),this.height=Object(o["a"])(i,0)}bu.packedLength=4,bu.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.width,t[n]=e.height,t},bu.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new bu),n.x=e[t++],n.y=e[t++],n.width=e[t++],n.height=e[t],n},bu.fromPoints=function(e,t){if(Object(r["a"])(t)||(t=new bu),!Object(r["a"])(e)||0===e.length)return t.x=0,t.y=0,t.width=0,t.height=0,t;const n=e.length;let i=e[0].x,o=e[0].y,a=e[0].x,s=e[0].y;for(let r=1;r<n;r++){const t=e[r],n=t.x,c=t.y;i=Math.min(n,i),a=Math.max(n,a),o=Math.min(c,o),s=Math.max(c,s)}return t.x=i,t.y=o,t.width=a-i,t.height=s-o,t};const yu=new V,vu=new I,Ou=new I;bu.fromRectangle=function(e,t,n){if(Object(r["a"])(n)||(n=new bu),!Object(r["a"])(e))return n.x=0,n.y=0,n.width=0,n.height=0,n;t=Object(o["a"])(t,yu);const i=t.project(Fe.southwest(e,vu)),a=t.project(Fe.northeast(e,Ou));return Gt.subtract(a,i,a),n.x=i.x,n.y=i.y,n.width=a.x,n.height=a.y,n},bu.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new bu(e.x,e.y,e.width,e.height)},bu.union=function(e,t,n){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),Object(r["a"])(n)||(n=new bu);const o=Math.min(e.x,t.x),a=Math.min(e.y,t.y),s=Math.max(e.x+e.width,t.x+t.width),c=Math.max(e.y+e.height,t.y+t.height);return n.x=o,n.y=a,n.width=s-o,n.height=c-a,n},bu.expand=function(e,t,n){i["a"].typeOf.object("rectangle",e),i["a"].typeOf.object("point",t),n=bu.clone(e,n);const o=t.x-n.x,r=t.y-n.y;return o>n.width?n.width=o:o<0&&(n.width-=o,n.x=t.x),r>n.height?n.height=r:r<0&&(n.height-=r,n.y=t.y),n},bu.intersect=function(e,t){i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t);const n=e.x,o=e.y,r=t.x,a=t.y;return n>r+t.width||n+e.width<r||o+e.height<a||o>a+t.height?G.OUTSIDE:G.INTERSECTING},bu.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},bu.prototype.clone=function(e){return bu.clone(this,e)},bu.prototype.intersect=function(e){return bu.intersect(this,e)},bu.prototype.equals=function(e){return bu.equals(this,e)};var Au=bu;const wu={NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3};var Tu=Object.freeze(wu);const Cu={POINTS:Ys.POINTS,LINES:Ys.LINES,LINE_LOOP:Ys.LINE_LOOP,LINE_STRIP:Ys.LINE_STRIP,TRIANGLES:Ys.TRIANGLES,TRIANGLE_STRIP:Ys.TRIANGLE_STRIP,TRIANGLE_FAN:Ys.TRIANGLE_FAN,isLines:function(e){return e===Cu.LINES||e===Cu.LINE_LOOP||e===Cu.LINE_STRIP},isTriangles:function(e){return e===Cu.TRIANGLES||e===Cu.TRIANGLE_STRIP||e===Cu.TRIANGLE_FAN},validate:function(e){return e===Cu.POINTS||e===Cu.LINES||e===Cu.LINE_LOOP||e===Cu.LINE_STRIP||e===Cu.TRIANGLES||e===Cu.TRIANGLE_STRIP||e===Cu.TRIANGLE_FAN}};var Eu=Object.freeze(Cu);function xu(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.attributes",e.attributes),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=Object(o["a"])(e.primitiveType,Eu.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=Object(o["a"])(e.geometryType,Tu.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}xu.computeNumberOfVertices=function(e){i["a"].typeOf.object("geometry",e);let t=-1;for(const n in e.attributes)if(e.attributes.hasOwnProperty(n)&&Object(r["a"])(e.attributes[n])&&Object(r["a"])(e.attributes[n].values)){const i=e.attributes[n],o=i.values.length/i.componentsPerAttribute;if(t!==o&&-1!==t)throw new a["a"]("All attribute lists must have the same number of attributes.");t=o}return t};const Su=new I,Iu=new g,Du=new Me,Pu=[new I,new I,new I],ju=[new Gt,new Gt,new Gt],Ru=[new Gt,new Gt,new Gt],Lu=new g,Mu=new Kr,Nu=new Me,Bu=new ic;xu._textureCoordinateRotationPoints=function(e,t,n,i){let o;const r=Fe.center(i,Su),a=I.toCartesian(r,n,Iu),s=ka.eastNorthUpToFixedFrame(a,n,Du),c=Me.inverse(s,Du),l=ju,u=Pu;u[0].longitude=i.west,u[0].latitude=i.south,u[1].longitude=i.west,u[1].latitude=i.north,u[2].longitude=i.east,u[2].latitude=i.south;let h=Lu;for(o=0;o<3;o++)I.toCartesian(u[o],n,h),h=Me.multiplyByPointAsVector(c,h,h),l[o].x=h.x,l[o].y=h.y;const d=Kr.fromAxisAngle(g.UNIT_Z,-t,Mu),f=ce.fromQuaternion(d,Nu),p=e.length;let m=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY;for(o=0;o<p;o++)h=Me.multiplyByPointAsVector(c,e[o],h),h=ce.multiplyByVector(f,h,h),m=Math.min(m,h.x),_=Math.min(_,h.y),b=Math.max(b,h.x),y=Math.max(y,h.y);const v=ic.fromRotation(t,Bu),O=Ru;O[0].x=m,O[0].y=_,O[1].x=m,O[1].y=y,O[2].x=b,O[2].y=_;const A=l[0],w=l[2].x-A.x,T=l[1].y-A.y;for(o=0;o<3;o++){const e=O[o];ic.multiplyByVector(v,e,e),e.x=(e.x-A.x)/w,e.y=(e.y-A.y)/T}const C=O[0],E=O[1],x=O[2],S=new Array(6);return Gt.pack(C,S),Gt.pack(E,S,2),Gt.pack(x,S,4),S};var Fu=xu;function zu(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.componentDatatype))throw new a["a"]("options.componentDatatype is required.");if(!Object(r["a"])(e.componentsPerAttribute))throw new a["a"]("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new a["a"]("options.componentsPerAttribute must be between 1 and 4.");if(!Object(r["a"])(e.values))throw new a["a"]("options.values is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=Object(o["a"])(e.normalize,!1),this.values=e.values}var ku=zu;function Uu(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color}var Vu=Uu;const Hu={NONE:0,TOP:1,ALL:2};var Gu=Object.freeze(Hu);function Wu(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.position=Object(o["a"])(e.position,!1),this.normal=Object(o["a"])(e.normal,!1),this.st=Object(o["a"])(e.st,!1),this.bitangent=Object(o["a"])(e.bitangent,!1),this.tangent=Object(o["a"])(e.tangent,!1),this.color=Object(o["a"])(e.color,!1)}Wu.POSITION_ONLY=Object.freeze(new Wu({position:!0})),Wu.POSITION_AND_NORMAL=Object.freeze(new Wu({position:!0,normal:!0})),Wu.POSITION_NORMAL_AND_ST=Object.freeze(new Wu({position:!0,normal:!0,st:!0})),Wu.POSITION_AND_ST=Object.freeze(new Wu({position:!0,st:!0})),Wu.POSITION_AND_COLOR=Object.freeze(new Wu({position:!0,color:!0})),Wu.ALL=Object.freeze(new Wu({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0})),Wu.DEFAULT=Wu.POSITION_NORMAL_AND_ST,Wu.packedLength=6,Wu.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),t[n++]=e.position?1:0,t[n++]=e.normal?1:0,t[n++]=e.st?1:0,t[n++]=e.tangent?1:0,t[n++]=e.bitangent?1:0,t[n]=e.color?1:0,t},Wu.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");return t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Wu),n.position=1===e[t++],n.normal=1===e[t++],n.st=1===e[t++],n.tangent=1===e[t++],n.bitangent=1===e[t++],n.color=1===e[t],n},Wu.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)||(t=new Wu),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};var qu=Wu;const Yu=new g;function Xu(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.minimum,n=e.maximum;if(i["a"].typeOf.object("min",t),i["a"].typeOf.object("max",n),Object(r["a"])(e.offsetAttribute)&&e.offsetAttribute===Gu.TOP)throw new a["a"]("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");const s=Object(o["a"])(e.vertexFormat,qu.DEFAULT);this._minimum=g.clone(t),this._maximum=g.clone(n),this._vertexFormat=s,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}Xu.fromDimensions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.dimensions;i["a"].typeOf.object("dimensions",t),i["a"].typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=g.multiplyByScalar(t,.5,new g);return new Xu({minimum:g.negate(n,new g),maximum:n,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},Xu.fromAxisAlignedBoundingBox=function(e){return i["a"].typeOf.object("boundingBox",e),new Xu({minimum:e.minimum,maximum:e.maximum})},Xu.packedLength=2*g.packedLength+qu.packedLength+1,Xu.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),g.pack(e._minimum,t,n),g.pack(e._maximum,t,n+g.packedLength),qu.pack(e._vertexFormat,t,n+2*g.packedLength),t[n+2*g.packedLength+qu.packedLength]=Object(o["a"])(e._offsetAttribute,-1),t};const Ku=new g,$u=new g,Ju=new qu,Qu={minimum:Ku,maximum:$u,vertexFormat:Ju,offsetAttribute:void 0};let Zu;Xu.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=g.unpack(e,t,Ku),s=g.unpack(e,t+g.packedLength,$u),c=qu.unpack(e,t+2*g.packedLength,Ju),l=e[t+2*g.packedLength+qu.packedLength];return Object(r["a"])(n)?(n._minimum=g.clone(a,n._minimum),n._maximum=g.clone(s,n._maximum),n._vertexFormat=qu.clone(c,n._vertexFormat),n._offsetAttribute=-1===l?void 0:l,n):(Qu.offsetAttribute=-1===l?void 0:l,new Xu(Qu))},Xu.createGeometry=function(e){const t=e._minimum,n=e._maximum,i=e._vertexFormat;if(g.equals(t,n))return;const o=new Vu;let a,s;if(i.position&&(i.st||i.normal||i.tangent||i.bitangent)){if(i.position&&(s=new Float64Array(72),s[0]=t.x,s[1]=t.y,s[2]=n.z,s[3]=n.x,s[4]=t.y,s[5]=n.z,s[6]=n.x,s[7]=n.y,s[8]=n.z,s[9]=t.x,s[10]=n.y,s[11]=n.z,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=n.x,s[16]=t.y,s[17]=t.z,s[18]=n.x,s[19]=n.y,s[20]=t.z,s[21]=t.x,s[22]=n.y,s[23]=t.z,s[24]=n.x,s[25]=t.y,s[26]=t.z,s[27]=n.x,s[28]=n.y,s[29]=t.z,s[30]=n.x,s[31]=n.y,s[32]=n.z,s[33]=n.x,s[34]=t.y,s[35]=n.z,s[36]=t.x,s[37]=t.y,s[38]=t.z,s[39]=t.x,s[40]=n.y,s[41]=t.z,s[42]=t.x,s[43]=n.y,s[44]=n.z,s[45]=t.x,s[46]=t.y,s[47]=n.z,s[48]=t.x,s[49]=n.y,s[50]=t.z,s[51]=n.x,s[52]=n.y,s[53]=t.z,s[54]=n.x,s[55]=n.y,s[56]=n.z,s[57]=t.x,s[58]=n.y,s[59]=n.z,s[60]=t.x,s[61]=t.y,s[62]=t.z,s[63]=n.x,s[64]=t.y,s[65]=t.z,s[66]=n.x,s[67]=t.y,s[68]=n.z,s[69]=t.x,s[70]=t.y,s[71]=n.z,o.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:s})),i.normal){const e=new Float32Array(72);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,e[12]=0,e[13]=0,e[14]=-1,e[15]=0,e[16]=0,e[17]=-1,e[18]=0,e[19]=0,e[20]=-1,e[21]=0,e[22]=0,e[23]=-1,e[24]=1,e[25]=0,e[26]=0,e[27]=1,e[28]=0,e[29]=0,e[30]=1,e[31]=0,e[32]=0,e[33]=1,e[34]=0,e[35]=0,e[36]=-1,e[37]=0,e[38]=0,e[39]=-1,e[40]=0,e[41]=0,e[42]=-1,e[43]=0,e[44]=0,e[45]=-1,e[46]=0,e[47]=0,e[48]=0,e[49]=1,e[50]=0,e[51]=0,e[52]=1,e[53]=0,e[54]=0,e[55]=1,e[56]=0,e[57]=0,e[58]=1,e[59]=0,e[60]=0,e[61]=-1,e[62]=0,e[63]=0,e[64]=-1,e[65]=0,e[66]=0,e[67]=-1,e[68]=0,e[69]=0,e[70]=-1,e[71]=0,o.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}if(i.st){const e=new Float32Array(48);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,e[8]=1,e[9]=0,e[10]=0,e[11]=0,e[12]=0,e[13]=1,e[14]=1,e[15]=1,e[16]=0,e[17]=0,e[18]=1,e[19]=0,e[20]=1,e[21]=1,e[22]=0,e[23]=1,e[24]=1,e[25]=0,e[26]=0,e[27]=0,e[28]=0,e[29]=1,e[30]=1,e[31]=1,e[32]=1,e[33]=0,e[34]=0,e[35]=0,e[36]=0,e[37]=1,e[38]=1,e[39]=1,e[40]=0,e[41]=0,e[42]=1,e[43]=0,e[44]=1,e[45]=1,e[46]=0,e[47]=1,o.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:e})}if(i.tangent){const e=new Float32Array(72);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=-1,e[13]=0,e[14]=0,e[15]=-1,e[16]=0,e[17]=0,e[18]=-1,e[19]=0,e[20]=0,e[21]=-1,e[22]=0,e[23]=0,e[24]=0,e[25]=1,e[26]=0,e[27]=0,e[28]=1,e[29]=0,e[30]=0,e[31]=1,e[32]=0,e[33]=0,e[34]=1,e[35]=0,e[36]=0,e[37]=-1,e[38]=0,e[39]=0,e[40]=-1,e[41]=0,e[42]=0,e[43]=-1,e[44]=0,e[45]=0,e[46]=-1,e[47]=0,e[48]=-1,e[49]=0,e[50]=0,e[51]=-1,e[52]=0,e[53]=0,e[54]=-1,e[55]=0,e[56]=0,e[57]=-1,e[58]=0,e[59]=0,e[60]=1,e[61]=0,e[62]=0,e[63]=1,e[64]=0,e[65]=0,e[66]=1,e[67]=0,e[68]=0,e[69]=1,e[70]=0,e[71]=0,o.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}if(i.bitangent){const e=new Float32Array(72);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=1,e[14]=0,e[15]=0,e[16]=1,e[17]=0,e[18]=0,e[19]=1,e[20]=0,e[21]=0,e[22]=1,e[23]=0,e[24]=0,e[25]=0,e[26]=1,e[27]=0,e[28]=0,e[29]=1,e[30]=0,e[31]=0,e[32]=1,e[33]=0,e[34]=0,e[35]=1,e[36]=0,e[37]=0,e[38]=1,e[39]=0,e[40]=0,e[41]=1,e[42]=0,e[43]=0,e[44]=1,e[45]=0,e[46]=0,e[47]=1,e[48]=0,e[49]=0,e[50]=1,e[51]=0,e[52]=0,e[53]=1,e[54]=0,e[55]=0,e[56]=1,e[57]=0,e[58]=0,e[59]=1,e[60]=0,e[61]=0,e[62]=1,e[63]=0,e[64]=0,e[65]=1,e[66]=0,e[67]=0,e[68]=1,e[69]=0,e[70]=0,e[71]=1,o.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}a=new Uint16Array(36),a[0]=0,a[1]=1,a[2]=2,a[3]=0,a[4]=2,a[5]=3,a[6]=6,a[7]=5,a[8]=4,a[9]=7,a[10]=6,a[11]=4,a[12]=8,a[13]=9,a[14]=10,a[15]=8,a[16]=10,a[17]=11,a[18]=14,a[19]=13,a[20]=12,a[21]=15,a[22]=14,a[23]=12,a[24]=18,a[25]=17,a[26]=16,a[27]=19,a[28]=18,a[29]=16,a[30]=20,a[31]=21,a[32]=22,a[33]=20,a[34]=22,a[35]=23}else s=new Float64Array(24),s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=n.x,s[4]=t.y,s[5]=t.z,s[6]=n.x,s[7]=n.y,s[8]=t.z,s[9]=t.x,s[10]=n.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=n.z,s[15]=n.x,s[16]=t.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=t.x,s[22]=n.y,s[23]=n.z,o.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:s}),a=new Uint16Array(36),a[0]=4,a[1]=5,a[2]=6,a[3]=4,a[4]=6,a[5]=7,a[6]=1,a[7]=0,a[8]=3,a[9]=1,a[10]=3,a[11]=2,a[12]=1,a[13]=6,a[14]=5,a[15]=1,a[16]=2,a[17]=6,a[18]=2,a[19]=3,a[20]=7,a[21]=2,a[22]=7,a[23]=6,a[24]=3,a[25]=0,a[26]=4,a[27]=3,a[28]=4,a[29]=7,a[30]=0,a[31]=1,a[32]=5,a[33]=0,a[34]=5,a[35]=4;const c=g.subtract(n,t,Yu),l=.5*g.magnitude(c);if(Object(r["a"])(e._offsetAttribute)){const t=s.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);o.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:o,indices:a,primitiveType:Eu.TRIANGLES,boundingSphere:new Tt(g.ZERO,l),offsetAttribute:e._offsetAttribute})},Xu.getUnitBox=function(){return Object(r["a"])(Zu)||(Zu=Xu.createGeometry(Xu.fromDimensions({dimensions:new g(1,1,1),vertexFormat:qu.POSITION_ONLY}))),Zu};var eh=Xu;const th=new g;function nh(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.minimum,n=e.maximum;if(i["a"].typeOf.object("min",t),i["a"].typeOf.object("max",n),Object(r["a"])(e.offsetAttribute)&&e.offsetAttribute===Gu.TOP)throw new a["a"]("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._min=g.clone(t),this._max=g.clone(n),this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxOutlineGeometry"}nh.fromDimensions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.dimensions;i["a"].typeOf.object("dimensions",t),i["a"].typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);const n=g.multiplyByScalar(t,.5,new g);return new nh({minimum:g.negate(n,new g),maximum:n,offsetAttribute:e.offsetAttribute})},nh.fromAxisAlignedBoundingBox=function(e){return i["a"].typeOf.object("boundindBox",e),new nh({minimum:e.minimum,maximum:e.maximum})},nh.packedLength=2*g.packedLength+1,nh.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),g.pack(e._min,t,n),g.pack(e._max,t,n+g.packedLength),t[n+2*g.packedLength]=Object(o["a"])(e._offsetAttribute,-1),t};const ih=new g,oh=new g,rh={minimum:ih,maximum:oh,offsetAttribute:void 0};nh.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=g.unpack(e,t,ih),s=g.unpack(e,t+g.packedLength,oh),c=e[t+2*g.packedLength];return Object(r["a"])(n)?(n._min=g.clone(a,n._min),n._max=g.clone(s,n._max),n._offsetAttribute=-1===c?void 0:c,n):(rh.offsetAttribute=-1===c?void 0:c,new nh(rh))},nh.createGeometry=function(e){const t=e._min,n=e._max;if(g.equals(t,n))return;const i=new Vu,o=new Uint16Array(24),a=new Float64Array(24);a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=n.x,a[4]=t.y,a[5]=t.z,a[6]=n.x,a[7]=n.y,a[8]=t.z,a[9]=t.x,a[10]=n.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=n.z,a[15]=n.x,a[16]=t.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=t.x,a[22]=n.y,a[23]=n.z,i.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:a}),o[0]=4,o[1]=5,o[2]=5,o[3]=6,o[4]=6,o[5]=7,o[6]=7,o[7]=4,o[8]=0,o[9]=1,o[10]=1,o[11]=2,o[12]=2,o[13]=3,o[14]=3,o[15]=0,o[16]=0,o[17]=4,o[18]=1,o[19]=5,o[20]=2,o[21]=6,o[22]=3,o[23]=7;const s=g.subtract(n,t,th),c=.5*g.magnitude(s);if(Object(r["a"])(e._offsetAttribute)){const t=a.length,n=e._offsetAttribute===Gu.NONE?0:1,o=new Uint8Array(t/3).fill(n);i.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:o})}return new Fu({attributes:i,indices:o,primitiveType:Eu.LINES,boundingSphere:new Tt(g.ZERO,c),offsetAttribute:e._offsetAttribute})};var ah=nh;function sh(){}sh.prototype.geocode=function(e){i["a"].typeOf.string("query",e);const t=e.match(/[^\s,\n]+/g);if(2===t.length||3===t.length){let n=+t[0],i=+t[1];const o=3===t.length?+t[2]:300;if(isNaN(n)&&isNaN(i)){const e=/^(\d+.?\d*)([nsew])/i;for(let o=0;o<t.length;++o){const r=t[o].match(e);e.test(t[o])&&3===r.length&&(/^[ns]/i.test(r[2])?i=/^[n]/i.test(r[2])?+r[1]:-r[1]:/^[ew]/i.test(r[2])&&(n=/^[e]/i.test(r[2])?+r[1]:-r[1]))}}if(!isNaN(n)&&!isNaN(i)&&!isNaN(o)){const t={displayName:e,destination:g.fromDegrees(n,i,o)};return Promise.resolve([t])}}return Promise.resolve([])};var ch=sh;function lh(){this.times=void 0,this.points=void 0,a["a"].throwInstantiationError()}lh.getPointType=function(e){if("number"===typeof e)return Number;if(e instanceof g)return g;if(e instanceof Kr)return Kr;throw new a["a"]("point must be a Cartesian3, Quaternion, or Number.")},lh.prototype.evaluate=a["a"].throwInstantiationError,lh.prototype.findTimeInterval=function(e,t){const n=this.times,r=n.length;if(i["a"].typeOf.number("time",e),e<n[0]||e>n[r-1])throw new a["a"]("time is out of range.");if(t=Object(o["a"])(t,0),e>=n[t]){if(t+1<r&&e<n[t+1])return t;if(t+2<r&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let s;if(e>n[t]){for(s=t;s<r-1;++s)if(e>=n[s]&&e<n[s+1])break}else for(s=t-1;s>=0;--s)if(e>=n[s]&&e<n[s+1])break;return s===r-1&&(s=r-2),s},lh.prototype.wrapTime=function(e){i["a"].typeOf.number("time",e);const t=this.times,n=t[t.length-1],o=t[0],r=n-o;let a;return e<o&&(a=Math.floor((o-e)/r)+1,e+=a*r),e>n&&(a=Math.floor((e-n)/r)+1,e-=a*r),e},lh.prototype.clampTime=function(e){i["a"].typeOf.number("time",e);const t=this.times;return s["a"].clamp(e,t[0],t[t.length-1])};var uh=lh;function hh(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.points,n=e.times;if(!Object(r["a"])(t)||!Object(r["a"])(n))throw new a["a"]("points and times are required.");if(t.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a["a"]("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=uh.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(hh.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),hh.prototype.findTimeInterval=uh.prototype.findTimeInterval,hh.prototype.wrapTime=uh.prototype.wrapTime,hh.prototype.clampTime=uh.prototype.clampTime,hh.prototype.evaluate=function(e,t){const n=this.points,i=this.times,o=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),a=(e-i[o])/(i[o+1]-i[o]),s=this._pointType;return s===Number?(1-a)*n[o]+a*n[o+1]:(Object(r["a"])(t)||(t=new g),g.lerp(n[o],n[o+1],a,t))};var dh=hh;const fh={solve:function(e,t,n,i){if(!Object(r["a"])(e)||!(e instanceof Array))throw new a["a"]("The array lower is required.");if(!Object(r["a"])(t)||!(t instanceof Array))throw new a["a"]("The array diagonal is required.");if(!Object(r["a"])(n)||!(n instanceof Array))throw new a["a"]("The array upper is required.");if(!Object(r["a"])(i)||!(i instanceof Array))throw new a["a"]("The array right is required.");if(t.length!==i.length)throw new a["a"]("diagonal and right must have the same lengths.");if(e.length!==n.length)throw new a["a"]("lower and upper must have the same lengths.");if(e.length!==t.length-1)throw new a["a"]("lower and upper must be one less than the length of diagonal.");const o=new Array(n.length),s=new Array(i.length),c=new Array(i.length);let l,u;for(l=0;l<s.length;l++)s[l]=new g,c[l]=new g;for(o[0]=n[0]/t[0],s[0]=g.multiplyByScalar(i[0],1/t[0],s[0]),l=1;l<o.length;++l)u=1/(t[l]-o[l-1]*e[l-1]),o[l]=n[l]*u,s[l]=g.subtract(i[l],g.multiplyByScalar(s[l-1],e[l-1],s[l]),s[l]),s[l]=g.multiplyByScalar(s[l],u,s[l]);for(u=1/(t[l]-o[l-1]*e[l-1]),s[l]=g.subtract(i[l],g.multiplyByScalar(s[l-1],e[l-1],s[l]),s[l]),s[l]=g.multiplyByScalar(s[l],u,s[l]),c[c.length-1]=s[s.length-1],l=c.length-2;l>=0;--l)c[l]=g.subtract(s[l],g.multiplyByScalar(c[l+1],o[l],c[l]),c[l]);return c}};var ph=fh;const mh=[],_h=[],gh=[],bh=[];function yh(e,t,n){const i=mh,o=gh,a=_h,s=bh;let c;i.length=o.length=e.length-1,a.length=s.length=e.length,i[0]=a[0]=1,o[0]=0;let l=s[0];for(Object(r["a"])(l)||(l=s[0]=new g),g.clone(t,l),c=1;c<i.length-1;++c)i[c]=o[c]=1,a[c]=4,l=s[c],Object(r["a"])(l)||(l=s[c]=new g),g.subtract(e[c+1],e[c-1],l),g.multiplyByScalar(l,3,l);return i[c]=0,o[c]=1,a[c]=4,l=s[c],Object(r["a"])(l)||(l=s[c]=new g),g.subtract(e[c+1],e[c-1],l),g.multiplyByScalar(l,3,l),a[c+1]=1,l=s[c+1],Object(r["a"])(l)||(l=s[c+1]=new g),g.clone(n,l),ph.solve(i,a,o,s)}function vh(e){const t=mh,n=gh,i=_h,o=bh;let a;t.length=n.length=e.length-1,i.length=o.length=e.length,t[0]=n[0]=1,i[0]=2;let s=o[0];for(Object(r["a"])(s)||(s=o[0]=new g),g.subtract(e[1],e[0],s),g.multiplyByScalar(s,3,s),a=1;a<t.length;++a)t[a]=n[a]=1,i[a]=4,s=o[a],Object(r["a"])(s)||(s=o[a]=new g),g.subtract(e[a+1],e[a-1],s),g.multiplyByScalar(s,3,s);return i[a]=2,s=o[a],Object(r["a"])(s)||(s=o[a]=new g),g.subtract(e[a],e[a-1],s),g.multiplyByScalar(s,3,s),ph.solve(t,i,n,o)}function Oh(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.points,n=e.times,i=e.inTangents,s=e.outTangents;if(!Object(r["a"])(t)||!Object(r["a"])(n)||!Object(r["a"])(i)||!Object(r["a"])(s))throw new a["a"]("times, points, inTangents, and outTangents are required.");if(t.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a["a"]("times.length must be equal to points.length.");if(i.length!==s.length||i.length!==t.length-1)throw new a["a"]("inTangents and outTangents must have a length equal to points.length - 1.");if(this._times=n,this._points=t,this._pointType=uh.getPointType(t[0]),this._pointType!==uh.getPointType(i[0])||this._pointType!==uh.getPointType(s[0]))throw new a["a"]("inTangents and outTangents must be of the same type as points.");this._inTangents=i,this._outTangents=s,this._lastTimeIndex=0}Object.defineProperties(Oh.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}}),Oh.createC1=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.times,n=e.points,i=e.tangents;if(!Object(r["a"])(n)||!Object(r["a"])(t)||!Object(r["a"])(i))throw new a["a"]("points, times and tangents are required.");if(n.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(t.length!==n.length||t.length!==i.length)throw new a["a"]("times, points and tangents must have the same length.");const s=i.slice(0,i.length-1),c=i.slice(1,i.length);return new Oh({times:t,points:n,inTangents:c,outTangents:s})},Oh.createNaturalCubic=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.times,n=e.points;if(!Object(r["a"])(n)||!Object(r["a"])(t))throw new a["a"]("points and times are required.");if(n.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a["a"]("times.length must be equal to points.length.");if(n.length<3)return new dh({points:n,times:t});const i=vh(n),s=i.slice(0,i.length-1),c=i.slice(1,i.length);return new Oh({times:t,points:n,inTangents:c,outTangents:s})},Oh.createClampedCubic=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.times,n=e.points,i=e.firstTangent,s=e.lastTangent;if(!Object(r["a"])(n)||!Object(r["a"])(t)||!Object(r["a"])(i)||!Object(r["a"])(s))throw new a["a"]("points, times, firstTangent and lastTangent are required.");if(n.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(t.length!==n.length)throw new a["a"]("times.length must be equal to points.length.");const c=uh.getPointType(n[0]);if(c!==uh.getPointType(i)||c!==uh.getPointType(s))throw new a["a"]("firstTangent and lastTangent must be of the same type as points.");if(n.length<3)return new dh({points:n,times:t});const l=yh(n,i,s),u=l.slice(0,l.length-1),h=l.slice(1,l.length);return new Oh({times:t,points:n,inTangents:h,outTangents:u})},Oh.hermiteCoefficientMatrix=new Me(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0),Oh.prototype.findTimeInterval=uh.prototype.findTimeInterval;const Ah=new be,wh=new g;Oh.prototype.wrapTime=uh.prototype.wrapTime,Oh.prototype.clampTime=uh.prototype.clampTime,Oh.prototype.evaluate=function(e,t){const n=this.points,i=this.times,o=this.inTangents,a=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const s=this._lastTimeIndex,c=i[s+1]-i[s],l=(e-i[s])/c,u=Ah;u.z=l,u.y=l*l,u.x=u.y*l,u.w=1;const h=Me.multiplyByVector(Oh.hermiteCoefficientMatrix,u,u);h.z*=c,h.w*=c;const d=this._pointType;return d===Number?n[s]*h.x+n[s+1]*h.y+a[s]*h.z+o[s]*h.w:(Object(r["a"])(t)||(t=new d),t=d.multiplyByScalar(n[s],h.x,t),d.multiplyByScalar(n[s+1],h.y,wh),d.add(t,wh,t),d.multiplyByScalar(a[s],h.z,wh),d.add(t,wh,t),d.multiplyByScalar(o[s],h.w,wh),d.add(t,wh,t))};var Th=Oh;const Ch=new be,Eh=new g,xh=new g;function Sh(e){const t=e.points,n=e.times;if(t.length<3){const e=n[0],i=1/(n[1]-e),o=t[0],a=t[1];return function(t,n){Object(r["a"])(n)||(n=new g);const s=(t-e)*i;return g.lerp(o,a,s,n)}}return function(i,o){Object(r["a"])(o)||(o=new g);const a=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),s=(i-n[a])/(n[a+1]-n[a]),c=Ch;let l,u,h,d,f;return c.z=s,c.y=s*s,c.x=c.y*s,c.w=1,0===a?(l=t[0],u=t[1],h=e.firstTangent,d=g.subtract(t[2],l,Eh),g.multiplyByScalar(d,.5,d),f=Me.multiplyByVector(Th.hermiteCoefficientMatrix,c,c)):a===t.length-2?(l=t[a],u=t[a+1],d=e.lastTangent,h=g.subtract(u,t[a-1],Eh),g.multiplyByScalar(h,.5,h),f=Me.multiplyByVector(Th.hermiteCoefficientMatrix,c,c)):(l=t[a-1],u=t[a],h=t[a+1],d=t[a+2],f=Me.multiplyByVector(Ph.catmullRomCoefficientMatrix,c,c)),o=g.multiplyByScalar(l,f.x,o),g.multiplyByScalar(u,f.y,xh),g.add(o,xh,o),g.multiplyByScalar(h,f.z,xh),g.add(o,xh,o),g.multiplyByScalar(d,f.w,xh),g.add(o,xh,o)}}const Ih=new g,Dh=new g;function Ph(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.points,n=e.times;let a=e.firstTangent,s=e.lastTangent;if(i["a"].defined("points",t),i["a"].defined("times",n),i["a"].typeOf.number.greaterThanOrEquals("points.length",t.length,2),i["a"].typeOf.number.equals("times.length","points.length",n.length,t.length),t.length>2&&(Object(r["a"])(a)||(a=Ih,g.multiplyByScalar(t[1],2,a),g.subtract(a,t[2],a),g.subtract(a,t[0],a),g.multiplyByScalar(a,.5,a)),!Object(r["a"])(s))){const e=t.length-1;s=Dh,g.multiplyByScalar(t[e-1],2,s),g.subtract(t[e],s,s),g.add(s,t[e-2],s),g.multiplyByScalar(s,.5,s)}this._times=n,this._points=t,this._firstTangent=g.clone(a),this._lastTangent=g.clone(s),this._evaluateFunction=Sh(this),this._lastTimeIndex=0}Object.defineProperties(Ph.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},firstTangent:{get:function(){return this._firstTangent}},lastTangent:{get:function(){return this._lastTangent}}}),Ph.catmullRomCoefficientMatrix=new Me(-.5,1,-.5,0,1.5,-2.5,0,1,-1.5,2,.5,0,.5,-.5,0,0),Ph.prototype.findTimeInterval=uh.prototype.findTimeInterval,Ph.prototype.wrapTime=uh.prototype.wrapTime,Ph.prototype.clampTime=uh.prototype.clampTime,Ph.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};var jh=Ph;function Rh(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("uint8Array is required.");if(t<0)throw new a["a"]("byteOffset cannot be negative.");if(n<0)throw new a["a"]("byteLength cannot be negative.");if(t+n>e.byteLength)throw new a["a"]("sub-region exceeds array bounds.");return t=Object(o["a"])(t,0),n=Object(o["a"])(n,e.byteLength-t),e=e.subarray(t,t+n),Rh.decode(e)}function Lh(e,t,n){return t<=e&&e<=n}function Mh(e){let t=0,n=0,i=0,o=128,r=191;const a=[],s=e.length;for(let c=0;c<s;++c){const s=e[c];if(0===i){if(Lh(s,0,127)){a.push(s);continue}if(Lh(s,194,223)){i=1,t=31&s;continue}if(Lh(s,224,239)){224===s&&(o=160),237===s&&(r=159),i=2,t=15&s;continue}if(Lh(s,240,244)){240===s&&(o=144),244===s&&(r=143),i=3,t=7&s;continue}throw new ye["a"]("String decoding failed.")}Lh(s,o,r)?(o=128,r=191,t=t<<6|63&s,++n,n===i&&(a.push(t),t=i=n=0)):(t=i=n=0,o=128,r=191,--c)}return a}Rh.decodeWithTextDecoder=function(e){const t=new TextDecoder("utf-8");return t.decode(e)},Rh.decodeWithFromCharCode=function(e){let t="";const n=Mh(e),i=n.length;for(let o=0;o<i;++o){let e=n[o];e<=65535?t+=String.fromCharCode(e):(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return t},"undefined"!==typeof TextDecoder?Rh.decode=Rh.decodeWithTextDecoder:Rh.decode=Rh.decodeWithFromCharCode;var Nh=Rh;function Bh(e,t,n){return JSON.parse(Nh(e,t,n))}var Fh=Bh;const zh={clipTriangleAtAxisAlignedThreshold:function(e,t,n,i,o,s){if(!Object(r["a"])(e))throw new a["a"]("threshold is required.");if(!Object(r["a"])(t))throw new a["a"]("keepAbove is required.");if(!Object(r["a"])(n))throw new a["a"]("u0 is required.");if(!Object(r["a"])(i))throw new a["a"]("u1 is required.");if(!Object(r["a"])(o))throw new a["a"]("u2 is required.");let c,l,u;Object(r["a"])(s)?s.length=0:s=[],t?(c=n<e,l=i<e,u=o<e):(c=n>e,l=i>e,u=o>e);const h=c+l+u;let d,f,p,m,_,g;return 1===h?c?(d=(e-n)/(i-n),f=(e-n)/(o-n),s.push(1),s.push(2),1!==f&&(s.push(-1),s.push(0),s.push(2),s.push(f)),1!==d&&(s.push(-1),s.push(0),s.push(1),s.push(d))):l?(p=(e-i)/(o-i),m=(e-i)/(n-i),s.push(2),s.push(0),1!==m&&(s.push(-1),s.push(1),s.push(0),s.push(m)),1!==p&&(s.push(-1),s.push(1),s.push(2),s.push(p))):u&&(_=(e-o)/(n-o),g=(e-o)/(i-o),s.push(0),s.push(1),1!==g&&(s.push(-1),s.push(2),s.push(1),s.push(g)),1!==_&&(s.push(-1),s.push(2),s.push(0),s.push(_))):2===h?c||n===e?l||i===e?u||o===e||(f=(e-n)/(o-n),p=(e-i)/(o-i),s.push(2),s.push(-1),s.push(0),s.push(2),s.push(f),s.push(-1),s.push(1),s.push(2),s.push(p)):(g=(e-o)/(i-o),d=(e-n)/(i-n),s.push(1),s.push(-1),s.push(2),s.push(1),s.push(g),s.push(-1),s.push(0),s.push(1),s.push(d)):(m=(e-i)/(n-i),_=(e-o)/(n-o),s.push(0),s.push(-1),s.push(1),s.push(0),s.push(m),s.push(-1),s.push(2),s.push(0),s.push(_)):3!==h&&(s.push(0),s.push(1),s.push(2)),s},computeBarycentricCoordinates:function(e,t,n,i,o,s,c,l,u){if(!Object(r["a"])(e))throw new a["a"]("x is required.");if(!Object(r["a"])(t))throw new a["a"]("y is required.");if(!Object(r["a"])(n))throw new a["a"]("x1 is required.");if(!Object(r["a"])(i))throw new a["a"]("y1 is required.");if(!Object(r["a"])(o))throw new a["a"]("x2 is required.");if(!Object(r["a"])(s))throw new a["a"]("y2 is required.");if(!Object(r["a"])(c))throw new a["a"]("x3 is required.");if(!Object(r["a"])(l))throw new a["a"]("y3 is required.");const h=n-c,d=c-o,f=s-l,p=i-l,m=1/(f*h+d*p),_=t-l,b=e-c,y=(f*b+d*_)*m,v=(-p*b+h*_)*m,O=1-y-v;return Object(r["a"])(u)?(u.x=y,u.y=v,u.z=O,u):new g(y,v,O)},computeLineSegmentLineSegmentIntersection:function(e,t,n,o,a,s,c,l,u){i["a"].typeOf.number("x00",e),i["a"].typeOf.number("y00",t),i["a"].typeOf.number("x01",n),i["a"].typeOf.number("y01",o),i["a"].typeOf.number("x10",a),i["a"].typeOf.number("y10",s),i["a"].typeOf.number("x11",c),i["a"].typeOf.number("y11",l);const h=(c-a)*(t-s)-(l-s)*(e-a),d=(n-e)*(t-s)-(o-t)*(e-a),f=(l-s)*(n-e)-(c-a)*(o-t);if(0===f)return;const p=h/f,m=d/f;return p>=0&&p<=1&&m>=0&&m<=1?(Object(r["a"])(u)||(u=new Gt),u.x=e+p*(n-e),u.y=t+p*(o-t),u):void 0}};var kh=zh;function Uh(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.quantizedVertices))throw new a["a"]("options.quantizedVertices is required.");if(!Object(r["a"])(e.indices))throw new a["a"]("options.indices is required.");if(!Object(r["a"])(e.minimumHeight))throw new a["a"]("options.minimumHeight is required.");if(!Object(r["a"])(e.maximumHeight))throw new a["a"]("options.maximumHeight is required.");if(!Object(r["a"])(e.maximumHeight))throw new a["a"]("options.maximumHeight is required.");if(!Object(r["a"])(e.boundingSphere))throw new a["a"]("options.boundingSphere is required.");if(!Object(r["a"])(e.horizonOcclusionPoint))throw new a["a"]("options.horizonOcclusionPoint is required.");if(!Object(r["a"])(e.westIndices))throw new a["a"]("options.westIndices is required.");if(!Object(r["a"])(e.southIndices))throw new a["a"]("options.southIndices is required.");if(!Object(r["a"])(e.eastIndices))throw new a["a"]("options.eastIndices is required.");if(!Object(r["a"])(e.northIndices))throw new a["a"]("options.northIndices is required.");if(!Object(r["a"])(e.westSkirtHeight))throw new a["a"]("options.westSkirtHeight is required.");if(!Object(r["a"])(e.southSkirtHeight))throw new a["a"]("options.southSkirtHeight is required.");if(!Object(r["a"])(e.eastSkirtHeight))throw new a["a"]("options.eastSkirtHeight is required.");if(!Object(r["a"])(e.northSkirtHeight))throw new a["a"]("options.northSkirtHeight is required.");this._quantizedVertices=e.quantizedVertices,this._encodedNormals=e.encodedNormals,this._indices=e.indices,this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._boundingSphere=e.boundingSphere,this._orientedBoundingBox=e.orientedBoundingBox,this._horizonOcclusionPoint=e.horizonOcclusionPoint,this._credits=e.credits;const t=this._quantizedVertices.length/3,n=this._uValues=this._quantizedVertices.subarray(0,t),i=this._vValues=this._quantizedVertices.subarray(t,2*t);function s(e,t){return i[e]-i[t]}function c(e,t){return n[e]-n[t]}this._heightValues=this._quantizedVertices.subarray(2*t,3*t),this._westIndices=Hh(e.westIndices,s,t),this._southIndices=Hh(e.southIndices,c,t),this._eastIndices=Hh(e.eastIndices,s,t),this._northIndices=Hh(e.northIndices,c,t),this._westSkirtHeight=e.westSkirtHeight,this._southSkirtHeight=e.southSkirtHeight,this._eastSkirtHeight=e.eastSkirtHeight,this._northSkirtHeight=e.northSkirtHeight,this._childTileMask=Object(o["a"])(e.childTileMask,15),this._createdByUpsampling=Object(o["a"])(e.createdByUpsampling,!1),this._waterMask=e.waterMask,this._mesh=void 0}Object.defineProperties(Uh.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){return this._waterMask}},childTileMask:{get:function(){return this._childTileMask}},canUpsample:{get:function(){return Object(r["a"])(this._mesh)}}});const Vh=[];function Hh(e,t,n){Vh.length=e.length;let i=!1;for(let o=0,r=e.length;o<r;++o)Vh[o]=e[o],i=i||o>0&&t(e[o-1],e[o])>0;return i?(Vh.sort(t),ll.createTypedArray(n,Vh)):e}const Gh="createVerticesFromQuantizedTerrainMesh",Wh=new il(Gh),qh=new il(Gh,rl.maximumAsynchronousTasks);Uh.prototype.createMesh=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.tilingScheme",e.tilingScheme),i["a"].typeOf.number("options.x",e.x),i["a"].typeOf.number("options.y",e.y),i["a"].typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,a=e.y,s=e.level,c=Object(o["a"])(e.exaggeration,1),l=Object(o["a"])(e.exaggerationRelativeHeight,0),u=Object(o["a"])(e.throttle,!0),h=t.ellipsoid,d=t.tileXYToRectangle(n,a,s),f=u?qh:Wh,p=f.scheduleTask({minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,quantizedVertices:this._quantizedVertices,octEncodedNormals:this._encodedNormals,includeWebMercatorT:!0,indices:this._indices,westIndices:this._westIndices,southIndices:this._southIndices,eastIndices:this._eastIndices,northIndices:this._northIndices,westSkirtHeight:this._westSkirtHeight,southSkirtHeight:this._southSkirtHeight,eastSkirtHeight:this._eastSkirtHeight,northSkirtHeight:this._northSkirtHeight,rectangle:d,relativeToCenter:this._boundingSphere.center,ellipsoid:h,exaggeration:c,exaggerationRelativeHeight:l});if(!Object(r["a"])(p))return;const m=this;return Promise.resolve(p).then((function(e){const t=m._quantizedVertices.length/3,n=t+m._westIndices.length+m._southIndices.length+m._eastIndices.length+m._northIndices.length,i=ll.createTypedArray(n,e.indices),r=new Float32Array(e.vertices),a=e.center,s=e.minimumHeight,c=e.maximumHeight,l=m._boundingSphere,u=m._orientedBoundingBox,h=Object(o["a"])(g.clone(e.occludeePointInScaledSpace),m._horizonOcclusionPoint),d=e.vertexStride,f=Pc.clone(e.encoding);return m._mesh=new sl(a,r,i,e.indexCountWithoutSkirts,t,s,c,l,h,d,u,f,e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),m._quantizedVertices=void 0,m._encodedNormals=void 0,m._indices=void 0,m._uValues=void 0,m._vValues=void 0,m._heightValues=void 0,m._westIndices=void 0,m._southIndices=void 0,m._eastIndices=void 0,m._northIndices=void 0,m._mesh}))};const Yh=new il("upsampleQuantizedTerrainMesh",rl.maximumAsynchronousTasks);Uh.prototype.upsample=function(e,t,n,i,o,s,c){if(!Object(r["a"])(e))throw new a["a"]("tilingScheme is required.");if(!Object(r["a"])(t))throw new a["a"]("thisX is required.");if(!Object(r["a"])(n))throw new a["a"]("thisY is required.");if(!Object(r["a"])(i))throw new a["a"]("thisLevel is required.");if(!Object(r["a"])(o))throw new a["a"]("descendantX is required.");if(!Object(r["a"])(s))throw new a["a"]("descendantY is required.");if(!Object(r["a"])(c))throw new a["a"]("descendantLevel is required.");const l=c-i;if(l>1)throw new a["a"]("Upsampling through more than one level at a time is not currently supported.");const u=this._mesh;if(!Object(r["a"])(this._mesh))return;const h=2*t!==o,d=2*n===s,f=e.ellipsoid,p=e.tileXYToRectangle(o,s,c),m=Yh.scheduleTask({vertices:u.vertices,vertexCountWithoutSkirts:u.vertexCountWithoutSkirts,indices:u.indices,indexCountWithoutSkirts:u.indexCountWithoutSkirts,encoding:u.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:h,isNorthChild:d,childRectangle:p,ellipsoid:f});if(!Object(r["a"])(m))return;let _=Math.min(this._westSkirtHeight,this._eastSkirtHeight);_=Math.min(_,this._southSkirtHeight),_=Math.min(_,this._northSkirtHeight);const b=h?.5*_:this._westSkirtHeight,y=d?.5*_:this._southSkirtHeight,v=h?this._eastSkirtHeight:.5*_,O=d?this._northSkirtHeight:.5*_,A=this._credits;return Promise.resolve(m).then((function(e){const t=new Uint16Array(e.vertices),n=ll.createTypedArray(t.length/3,e.indices);let i;return Object(r["a"])(e.encodedNormals)&&(i=new Uint8Array(e.encodedNormals)),new Uh({quantizedVertices:t,indices:n,encodedNormals:i,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:Tt.clone(e.boundingSphere),orientedBoundingBox:Ws.clone(e.orientedBoundingBox),horizonOcclusionPoint:g.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:b,southSkirtHeight:y,eastSkirtHeight:v,northSkirtHeight:O,childTileMask:0,credits:A,createdByUpsampling:!0})}))};const Xh=32767,Kh=new g;function $h(e,t,n,i,o,r,a,s){const c=Math.min(n,o,a),l=Math.max(n,o,a),u=Math.min(i,r,s),h=Math.max(i,r,s);return e>=c&&e<=l&&t>=u&&t<=h}Uh.prototype.interpolateHeight=function(e,t,n){let i=s["a"].clamp((t-e.west)/e.width,0,1);i*=Xh;let o=s["a"].clamp((n-e.south)/e.height,0,1);return o*=Xh,Object(r["a"])(this._mesh)?ed(this,i,o):td(this,i,o)};const Jh=new Gt,Qh=new Gt,Zh=new Gt;function ed(e,t,n){const i=e._mesh,o=i.vertices,r=i.encoding,a=i.indices;for(let s=0,c=a.length;s<c;s+=3){const e=a[s],i=a[s+1],c=a[s+2],l=r.decodeTextureCoordinates(o,e,Jh),u=r.decodeTextureCoordinates(o,i,Qh),h=r.decodeTextureCoordinates(o,c,Zh);if($h(t,n,l.x,l.y,u.x,u.y,h.x,h.y)){const a=kh.computeBarycentricCoordinates(t,n,l.x,l.y,u.x,u.y,h.x,h.y,Kh);if(a.x>=-1e-15&&a.y>=-1e-15&&a.z>=-1e-15){const t=r.decodeHeight(o,e),n=r.decodeHeight(o,i),s=r.decodeHeight(o,c);return a.x*t+a.y*n+a.z*s}}}}function td(e,t,n){const i=e._uValues,o=e._vValues,r=e._heightValues,a=e._indices;for(let c=0,l=a.length;c<l;c+=3){const l=a[c],u=a[c+1],h=a[c+2],d=i[l],f=i[u],p=i[h],m=o[l],_=o[u],g=o[h];if($h(t,n,d,m,f,_,p,g)){const i=kh.computeBarycentricCoordinates(t,n,d,m,f,_,p,g,Kh);if(i.x>=-1e-15&&i.y>=-1e-15&&i.z>=-1e-15){const t=i.x*r[l]+i.y*r[u]+i.z*r[h];return s["a"].lerp(e._minimumHeight,e._maximumHeight,t/Xh)}}}}Uh.prototype.isChildAvailable=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("thisX is required.");if(!Object(r["a"])(t))throw new a["a"]("thisY is required.");if(!Object(r["a"])(n))throw new a["a"]("childX is required.");if(!Object(r["a"])(i))throw new a["a"]("childY is required.");let o=2;return n!==2*e&&++o,i!==2*t&&(o-=2),0!==(this._childTileMask&1<<o)},Uh.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};var nd=Uh;function id(e){this.resource=e.resource,this.version=e.version,this.isHeightmap=e.isHeightmap,this.tileUrlTemplates=e.tileUrlTemplates,this.availability=e.availability,this.hasVertexNormals=e.hasVertexNormals,this.hasWaterMask=e.hasWaterMask,this.hasMetadata=e.hasMetadata,this.availabilityLevels=e.availabilityLevels,this.availabilityTilesLoaded=e.availabilityTilesLoaded,this.littleEndianExtensionSize=e.littleEndianExtensionSize,this.availabilityPromiseCache={}}function od(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");this._heightmapWidth=65,this._heightmapStructure=void 0,this._hasWaterMask=!1,this._hasVertexNormals=!1,this._ellipsoid=e.ellipsoid,this._requestVertexNormals=Object(o["a"])(e.requestVertexNormals,!1),this._requestWaterMask=Object(o["a"])(e.requestWaterMask,!1),this._requestMetadata=Object(o["a"])(e.requestMetadata,!0),this._errorEvent=new dn["a"];let t=e.credit;"string"===typeof t&&(t=new hn(t)),this._credit=t,this._availability=void 0,this._ready=!1,this._tileCredits=void 0;const n=this;let i,s,c;const l=this._layers=[];let u="";const h=[];let d=0;function f(e){let t;if(!e.format)return t="The tile format is not specified in the layer.json file.",c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t));if(!e.tiles||0===e.tiles.length)return t="The layer.json file does not specify any tile URL templates.",c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t));let o=!1,a=!1,m=!1,_=!0,b=!1;if("heightmap-1.0"===e.format)b=!0,Object(r["a"])(n._heightmapStructure)||(n._heightmapStructure={heightScale:.2,heightOffset:-1e3,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1,lowestEncodedHeight:0,highestEncodedHeight:65535}),a=!0,n._requestWaterMask=!0;else if(0!==e.format.indexOf("quantized-mesh-1."))return t=`The tile format "${e.format}" is invalid or not supported.`,c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t));const y=e.tiles,v=e.maxzoom;if(d=Math.max(d,v),e.projection&&"EPSG:4326"!==e.projection){if("EPSG:3857"!==e.projection)return t=`The projection "${e.projection}" is invalid or not supported.`,c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t));n._tilingScheme=new tu({numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:n._ellipsoid})}else n._tilingScheme=new qt({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1,ellipsoid:n._ellipsoid});if(n._levelZeroMaximumGeometricError=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(n._tilingScheme.ellipsoid,n._heightmapWidth,n._tilingScheme.getNumberOfXTilesAtLevel(0)),e.scheme&&"tms"!==e.scheme&&"slippyMap"!==e.scheme)return t=`The scheme "${e.scheme}" is invalid or not supported.`,c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t));let O;n._scheme=e.scheme,Object(r["a"])(e.extensions)&&-1!==e.extensions.indexOf("octvertexnormals")?o=!0:Object(r["a"])(e.extensions)&&-1!==e.extensions.indexOf("vertexnormals")&&(o=!0,_=!1),Object(r["a"])(e.extensions)&&-1!==e.extensions.indexOf("watermask")&&(a=!0),Object(r["a"])(e.extensions)&&-1!==e.extensions.indexOf("metadata")&&(m=!0);const A=e.metadataAvailability,w=e.available;let T;if(Object(r["a"])(w)&&!Object(r["a"])(A)){T=new Kl(n._tilingScheme,w.length);for(let e=0;e<w.length;++e){const t=w[e],i=n._tilingScheme.getNumberOfYTilesAtLevel(e);Object(r["a"])(h[e])||(h[e]=[]);for(let n=0;n<t.length;++n){const o=t[n],r=i-o.endY-1,a=i-o.startY-1;h[e].push([o.startX,r,o.endX,a]),T.addAvailableTileRange(e,o.startX,r,o.endX,a)}}}else Object(r["a"])(A)&&(O=new Kl(n._tilingScheme,v),T=new Kl(n._tilingScheme,v),h[0]=[[0,0,1,0]],T.addAvailableTileRange(0,0,0,1,0));n._hasWaterMask=n._hasWaterMask||a,n._hasVertexNormals=n._hasVertexNormals||o,n._hasMetadata=n._hasMetadata||m,Object(r["a"])(e.attribution)&&(u.length>0&&(u+=" "),u+=e.attribution),l.push(new id({resource:i,version:e.version,isHeightmap:b,tileUrlTemplates:y,availability:T,hasVertexNormals:o,hasWaterMask:a,hasMetadata:m,availabilityLevels:A,availabilityTilesLoaded:O,littleEndianExtensionSize:_}));const C=e.parentUrl;if(Object(r["a"])(C)){if(!Object(r["a"])(T))return console.log("A layer.json can't have a parentUrl if it does't have an available array."),Promise.resolve(!0);i=i.getDerivedResource({url:C}),i.appendForwardSlash(),s=i.getDerivedResource({url:"layer.json"});const e=s.fetchJson();return Promise.resolve(e).then(f).catch(p)}return Promise.resolve(!0)}function p(e){const t=`An error occurred while accessing ${s.url}.`;return c=Zl.reportError(c,n,n._errorEvent,t),c.retry?g():Promise.reject(new ye["a"](t))}function m(e){return f(e).then((function(){if(Object(r["a"])(c))return;const e=h.length;if(e>0){const t=n._availability=new Kl(n._tilingScheme,d);for(let n=0;n<e;++n){const e=h[n];for(let i=0;i<e.length;++i){const o=e[i];t.addAvailableTileRange(n,o[0],o[1],o[2],o[3])}}}if(u.length>0){const e=new hn(u);Object(r["a"])(n._tileCredits)?n._tileCredits.push(e):n._tileCredits=[e]}return n._ready=!0,Promise.resolve(!0)}))}function _(e){return Object(r["a"])(e)&&404===e.statusCode?m({tilejson:"2.1.0",format:"heightmap-1.0",version:"1.0.0",scheme:"tms",tiles:["{z}/{x}/{y}.terrain?v={version}"]}):p(e)}function g(){return Promise.resolve(s.fetchJson()).then(m).catch(_)}this._readyPromise=Promise.resolve(e.url).then((function(e){const t=Et["a"].createIfNeeded(e);return t.appendForwardSlash(),i=t,s=i.getDerivedResource({url:"layer.json"}),n._tileCredits=t.credits,g()}))}const rd={OCT_VERTEX_NORMALS:1,WATER_MASK:2,METADATA:4};function ad(e){if(!Object(r["a"])(e)||0===e.length)return{Accept:"application/vnd.quantized-mesh,application/octet-stream;q=0.9,*/*;q=0.01"};const t=e.join("-");return{Accept:`application/vnd.quantized-mesh;extensions=${t},application/octet-stream;q=0.9,*/*;q=0.01`}}function sd(e,t,n,i,o){const r=new Uint16Array(t,0,e._heightmapWidth*e._heightmapWidth);return new xl({buffer:r,childTileMask:new Uint8Array(t,r.byteLength,1)[0],waterMask:new Uint8Array(t,r.byteLength+1,t.byteLength-r.byteLength-1),width:e._heightmapWidth,height:e._heightmapWidth,structure:e._heightmapStructure,credits:e._tileCredits})}function cd(e,t,n,i,o,a){const s=a.littleEndianExtensionSize;let c=0;const l=3,u=l+1,h=Float64Array.BYTES_PER_ELEMENT*l,d=Float64Array.BYTES_PER_ELEMENT*u,f=3,p=Uint16Array.BYTES_PER_ELEMENT*f,m=3;let _=Uint16Array.BYTES_PER_ELEMENT,b=_*m;const y=new DataView(t),v=new g(y.getFloat64(c,!0),y.getFloat64(c+8,!0),y.getFloat64(c+16,!0));c+=h;const O=y.getFloat32(c,!0);c+=Float32Array.BYTES_PER_ELEMENT;const A=y.getFloat32(c,!0);c+=Float32Array.BYTES_PER_ELEMENT;const w=new Tt(new g(y.getFloat64(c,!0),y.getFloat64(c+8,!0),y.getFloat64(c+16,!0)),y.getFloat64(c+h,!0));c+=d;const T=new g(y.getFloat64(c,!0),y.getFloat64(c+8,!0),y.getFloat64(c+16,!0));c+=h;const C=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const E=new Uint16Array(t,c,3*C);c+=C*p,C>65536&&(_=Uint32Array.BYTES_PER_ELEMENT,b=_*m);const x=E.subarray(0,C),S=E.subarray(C,2*C),I=E.subarray(2*C,3*C);pc.zigZagDeltaDecode(x,S,I),c%_!==0&&(c+=_-c%_);const D=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const P=ll.createTypedArrayFromArrayBuffer(C,t,c,D*m);c+=D*b;let j=0;const R=P.length;for(let r=0;r<R;++r){const e=P[r];P[r]=j-e,0===e&&++j}const L=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const M=ll.createTypedArrayFromArrayBuffer(C,t,c,L);c+=L*_;const N=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const B=ll.createTypedArrayFromArrayBuffer(C,t,c,N);c+=N*_;const F=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const z=ll.createTypedArrayFromArrayBuffer(C,t,c,F);c+=F*_;const k=y.getUint32(c,!0);c+=Uint32Array.BYTES_PER_ELEMENT;const U=ll.createTypedArrayFromArrayBuffer(C,t,c,k);let V,H;c+=k*_;while(c<y.byteLength){const l=y.getUint8(c,!0);c+=Uint8Array.BYTES_PER_ELEMENT;const u=y.getUint32(c,s);if(c+=Uint32Array.BYTES_PER_ELEMENT,l===rd.OCT_VERTEX_NORMALS&&e._requestVertexNormals)V=new Uint8Array(t,c,2*C);else if(l===rd.WATER_MASK&&e._requestWaterMask)H=new Uint8Array(t,c,u);else if(l===rd.METADATA&&e._requestMetadata){const s=y.getUint32(c,!0);if(s>0){const i=Fh(new Uint8Array(t),c+Uint32Array.BYTES_PER_ELEMENT,s),o=i.available;if(Object(r["a"])(o))for(let t=0;t<o.length;++t){const i=n+t+1,r=o[t],s=e._tilingScheme.getNumberOfYTilesAtLevel(i);for(let t=0;t<r.length;++t){const n=r[t],o=s-n.endY-1,c=s-n.startY-1;e.availability.addAvailableTileRange(i,n.startX,o,n.endX,c),a.availability.addAvailableTileRange(i,n.startX,o,n.endX,c)}}}a.availabilityTilesLoaded.addAvailableTileRange(n,i,o,i,o)}c+=u}const G=5*e.getLevelMaximumGeometricError(n),W=e._tilingScheme.tileXYToRectangle(i,o,n),q=Ws.fromRectangle(W,O,A,e._tilingScheme.ellipsoid);return new nd({center:v,minimumHeight:O,maximumHeight:A,boundingSphere:w,orientedBoundingBox:q,horizonOcclusionPoint:T,quantizedVertices:E,encodedNormals:V,indices:P,westIndices:M,southIndices:B,eastIndices:z,northIndices:U,westSkirtHeight:G,southSkirtHeight:G,eastSkirtHeight:G,northSkirtHeight:G,childTileMask:e.availability.computeChildMaskForTile(n,i,o),waterMask:H,credits:e._tileCredits})}function ld(e,t,n,i,o,a){if(!Object(r["a"])(o))return Promise.reject(new ye["a"]("Terrain tile doesn't exist"));const s=o.tileUrlTemplates;if(0===s.length)return;let c;if(e._scheme&&"tms"!==e._scheme)c=n;else{const t=e._tilingScheme.getNumberOfYTilesAtLevel(i);c=t-n-1}const l=[];let u,h;e._requestVertexNormals&&o.hasVertexNormals&&l.push(o.littleEndianExtensionSize?"octvertexnormals":"vertexnormals"),e._requestWaterMask&&o.hasWaterMask&&l.push("watermask"),e._requestMetadata&&o.hasMetadata&&l.push("metadata");const d=s[(t+c+i)%s.length],f=o.resource;Object(r["a"])(f._ionEndpoint)&&!Object(r["a"])(f._ionEndpoint.externalType)?(0!==l.length&&(h={extensions:l.join("-")}),u=ad(void 0)):u=ad(l);const p=f.getDerivedResource({url:d,templateValues:{version:o.version,z:i,x:t,y:c},queryParameters:h,headers:u,request:a}).fetchArrayBuffer();return Object(r["a"])(p)?p.then((function(a){return Object(r["a"])(a)?Object(r["a"])(e._heightmapStructure)?sd(e,a,i,t,n):cd(e,a,i,t,n,o):Promise.reject(new ye["a"]("Mesh buffer doesn't exist."))})):void 0}function ud(e,t,n,i){if(0===i)return;const o=e.availabilityLevels,r=i%o===0?i-o:(i/o|0)*o,a=1<<i-r,s=t/a|0,c=n/a|0;return{level:r,x:s,y:c}}function hd(e,t,n,i,o,a){if(!Object(r["a"])(o.availabilityLevels))return{result:!1};let s;const c=function(){delete o.availabilityPromiseCache[s]},l=o.availabilityTilesLoaded,u=o.availability;let h=ud(o,t,n,i);while(Object(r["a"])(h)){if(u.isTileAvailable(h.level,h.x,h.y)&&!l.isTileAvailable(h.level,h.x,h.y)){let t;if(!a&&(s=`${h.level}-${h.x}-${h.y}`,t=o.availabilityPromiseCache[s],!Object(r["a"])(t))){const n=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].TERRAIN});t=ld(e,h.x,h.y,h.level,o,n),Object(r["a"])(t)&&(o.availabilityPromiseCache[s]=t,t.then(c))}return{result:!0,promise:t}}h=ud(o,h.x,h.y,h.level)}return{result:!1}}od.prototype.requestTileGeometry=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestTileGeometry must not be called before the terrain provider is ready.");const o=this._layers;let s;const c=o.length;if(1===c)s=o[0];else for(let a=0;a<c;++a){const i=o[a];if(!Object(r["a"])(i.availability)||i.availability.isTileAvailable(n,e,t)){s=i;break}}return ld(this,e,t,n,s,i)},Object.defineProperties(od.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this._ready)throw new a["a"]("credit must not be called before the terrain provider is ready.");return this._credit}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the terrain provider is ready.");return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){if(!this._ready)throw new a["a"]("hasWaterMask must not be called before the terrain provider is ready.");return this._hasWaterMask&&this._requestWaterMask}},hasVertexNormals:{get:function(){if(!this._ready)throw new a["a"]("hasVertexNormals must not be called before the terrain provider is ready.");return this._hasVertexNormals&&this._requestVertexNormals}},hasMetadata:{get:function(){if(!this._ready)throw new a["a"]("hasMetadata must not be called before the terrain provider is ready.");return this._hasMetadata&&this._requestMetadata}},requestVertexNormals:{get:function(){return this._requestVertexNormals}},requestWaterMask:{get:function(){return this._requestWaterMask}},requestMetadata:{get:function(){return this._requestMetadata}},availability:{get:function(){if(!this._ready)throw new a["a"]("availability must not be called before the terrain provider is ready.");return this._availability}}}),od.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},od.prototype.getTileDataAvailable=function(e,t,n){if(!Object(r["a"])(this._availability))return;if(n>this._availability._maximumLevel)return!1;if(this._availability.isTileAvailable(n,e,t))return!0;if(!this._hasMetadata)return!1;const i=this._layers,o=i.length;for(let r=0;r<o;++r){const o=hd(this,e,t,n,i[r],0===r);if(o.result)return}return!1},od.prototype.loadTileDataAvailability=function(e,t,n){if(!Object(r["a"])(this._availability)||n>this._availability._maximumLevel||this._availability.isTileAvailable(n,e,t)||!this._hasMetadata)return;const i=this._layers,o=i.length;for(let a=0;a<o;++a){const o=hd(this,e,t,n,i[a],0===a);if(Object(r["a"])(o.promise))return o.promise}},od._getAvailabilityTile=ud;var dd=od;const fd={},pd=new g,md=new g,_d=new Kr,gd=new ce;function bd(e,t,n,i,o,r,a,s,c,l){const u=e+t;g.multiplyByScalar(i,Math.cos(u),pd),g.multiplyByScalar(n,Math.sin(u),md),g.add(pd,md,pd);let h=Math.cos(e);h*=h;let d=Math.sin(e);d*=d;const f=r/Math.sqrt(a*h+o*d),p=f/s;return Kr.fromAxisAngle(pd,p,_d),ce.fromQuaternion(_d,gd),ce.multiplyByVector(gd,c,l),g.normalize(l,l),g.multiplyByScalar(l,s,l),l}const yd=new g,vd=new g,Od=new g,Ad=new g;fd.raisePositionsToHeight=function(e,t,n){const i=t.ellipsoid,o=t.height,r=t.extrudedHeight,a=n?e.length/3*2:e.length/3,s=new Float64Array(3*a),c=e.length,l=n?c:0;for(let u=0;u<c;u+=3){const t=u+1,a=u+2,c=g.fromArray(e,u,yd);i.scaleToGeodeticSurface(c,c);const h=g.clone(c,vd),d=i.geodeticSurfaceNormal(c,Ad),f=g.multiplyByScalar(d,o,Od);g.add(c,f,c),n&&(g.multiplyByScalar(d,r,f),g.add(h,f,h),s[u+l]=h.x,s[t+l]=h.y,s[a+l]=h.z),s[u]=c.x,s[t]=c.y,s[a]=c.z}return s};const wd=new g,Td=new g,Cd=new g;fd.computeEllipsePositions=function(e,t,n){const i=e.semiMinorAxis,o=e.semiMajorAxis,r=e.rotation,a=e.center,c=8*e.granularity,l=i*i,u=o*o,h=o*i,d=g.magnitude(a),f=g.normalize(a,wd);let p=g.cross(g.UNIT_Z,a,Td);p=g.normalize(p,p);const m=g.cross(f,p,Cd);let _=1+Math.ceil(s["a"].PI_OVER_TWO/c);const b=s["a"].PI_OVER_TWO/(_-1);let y=s["a"].PI_OVER_TWO-_*b;y<0&&(_-=Math.ceil(Math.abs(y)/b));const v=_*(_+2)*2,O=t?new Array(3*v):void 0;let A=0,w=yd,T=vd;const C=4*_*3;let E=C-1,x=0;const S=n?new Array(C):void 0;let I,D,P,j,R;for(y=s["a"].PI_OVER_TWO,w=bd(y,r,m,p,l,h,u,d,f,w),t&&(O[A++]=w.x,O[A++]=w.y,O[A++]=w.z),n&&(S[E--]=w.z,S[E--]=w.y,S[E--]=w.x),y=s["a"].PI_OVER_TWO-b,I=1;I<_+1;++I){if(w=bd(y,r,m,p,l,h,u,d,f,w),T=bd(Math.PI-y,r,m,p,l,h,u,d,f,T),t){for(O[A++]=w.x,O[A++]=w.y,O[A++]=w.z,P=2*I+2,D=1;D<P-1;++D)j=D/(P-1),R=g.lerp(w,T,j,Od),O[A++]=R.x,O[A++]=R.y,O[A++]=R.z;O[A++]=T.x,O[A++]=T.y,O[A++]=T.z}n&&(S[E--]=w.z,S[E--]=w.y,S[E--]=w.x,S[x++]=T.x,S[x++]=T.y,S[x++]=T.z),y=s["a"].PI_OVER_TWO-(I+1)*b}for(I=_;I>1;--I){if(y=s["a"].PI_OVER_TWO-(I-1)*b,w=bd(-y,r,m,p,l,h,u,d,f,w),T=bd(y+Math.PI,r,m,p,l,h,u,d,f,T),t){for(O[A++]=w.x,O[A++]=w.y,O[A++]=w.z,P=2*(I-1)+2,D=1;D<P-1;++D)j=D/(P-1),R=g.lerp(w,T,j,Od),O[A++]=R.x,O[A++]=R.y,O[A++]=R.z;O[A++]=T.x,O[A++]=T.y,O[A++]=T.z}n&&(S[E--]=w.z,S[E--]=w.y,S[E--]=w.x,S[x++]=T.x,S[x++]=T.y,S[x++]=T.z)}y=s["a"].PI_OVER_TWO,w=bd(-y,r,m,p,l,h,u,d,f,w);const L={};return t&&(O[A++]=w.x,O[A++]=w.y,O[A++]=w.z,L.positions=O,L.numPts=_),n&&(S[E--]=w.z,S[E--]=w.y,S[E--]=w.x,L.outerPositions=S),L};var Ed=fd;function xd(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.geometry))throw new a["a"]("options.geometry is required.");this.geometry=e.geometry,this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this.id=e.id,this.pickPrimitive=e.pickPrimitive,this.attributes=Object(o["a"])(e.attributes,{}),this.westHemisphereGeometry=void 0,this.eastHemisphereGeometry=void 0}var Sd=xd;const Id=new g,Dd=new g,Pd=new g;function jd(e,t,n,o,a){let c,l,u,h,d,f,p,m;if(i["a"].defined("point",e),i["a"].defined("p0",t),i["a"].defined("p1",n),i["a"].defined("p2",o),Object(r["a"])(a)||(a=new g),Object(r["a"])(t.z)){if(g.equalsEpsilon(e,t,s["a"].EPSILON14))return g.clone(g.UNIT_X,a);if(g.equalsEpsilon(e,n,s["a"].EPSILON14))return g.clone(g.UNIT_Y,a);if(g.equalsEpsilon(e,o,s["a"].EPSILON14))return g.clone(g.UNIT_Z,a);c=g.subtract(n,t,Id),l=g.subtract(o,t,Dd),u=g.subtract(e,t,Pd),h=g.dot(c,c),d=g.dot(c,l),f=g.dot(c,u),p=g.dot(l,l),m=g.dot(l,u)}else{if(Gt.equalsEpsilon(e,t,s["a"].EPSILON14))return g.clone(g.UNIT_X,a);if(Gt.equalsEpsilon(e,n,s["a"].EPSILON14))return g.clone(g.UNIT_Y,a);if(Gt.equalsEpsilon(e,o,s["a"].EPSILON14))return g.clone(g.UNIT_Z,a);c=Gt.subtract(n,t,Id),l=Gt.subtract(o,t,Dd),u=Gt.subtract(e,t,Pd),h=Gt.dot(c,c),d=Gt.dot(c,l),f=Gt.dot(c,u),p=Gt.dot(l,l),m=Gt.dot(l,u)}a.y=p*f-d*m,a.z=h*m-d*f;const _=h*p-d*d;if(0!==_)return a.y/=_,a.z/=_,a.x=1-a.y-a.z,a}var Rd=jd;function Ld(){this.high=g.clone(g.ZERO),this.low=g.clone(g.ZERO)}Ld.encode=function(e,t){let n;return i["a"].typeOf.number("value",e),Object(r["a"])(t)||(t={high:0,low:0}),e>=0?(n=65536*Math.floor(e/65536),t.high=n,t.low=e-n):(n=65536*Math.floor(-e/65536),t.high=-n,t.low=e+n),t};const Md={high:0,low:0};Ld.fromCartesian=function(e,t){i["a"].typeOf.object("cartesian",e),Object(r["a"])(t)||(t=new Ld);const n=t.high,o=t.low;return Ld.encode(e.x,Md),n.x=Md.high,o.x=Md.low,Ld.encode(e.y,Md),n.y=Md.high,o.y=Md.low,Ld.encode(e.z,Md),n.z=Md.high,o.z=Md.low,t};const Nd=new Ld;Ld.writeElements=function(e,t,n){i["a"].defined("cartesianArray",t),i["a"].typeOf.number("index",n),i["a"].typeOf.number.greaterThanOrEquals("index",n,0),Ld.fromCartesian(e,Nd);const o=Nd.high,r=Nd.low;t[n]=o.x,t[n+1]=o.y,t[n+2]=o.z,t[n+3]=r.x,t[n+4]=r.y,t[n+5]=r.z};var Bd=Ld;const Fd={calculateACMR:function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.indices;let n=e.maximumIndex;const i=Object(o["a"])(e.cacheSize,24);if(!Object(r["a"])(t))throw new a["a"]("indices is required.");const s=t.length;if(s<3||s%3!==0)throw new a["a"]("indices length must be a multiple of three.");if(n<=0)throw new a["a"]("maximumIndex must be greater than zero.");if(i<3)throw new a["a"]("cacheSize must be greater than two.");if(!Object(r["a"])(n)){n=0;let e=0,i=t[e];while(e<s)i>n&&(n=i),++e,i=t[e]}const c=[];for(let o=0;o<n+1;o++)c[o]=0;let l=i+1;for(let o=0;o<s;++o)l-c[t[o]]>i&&(c[t[o]]=l,++l);return(l-i+1)/(s/3)},tipsify:function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.indices,n=e.maximumIndex,i=Object(o["a"])(e.cacheSize,24);let s;function c(e,t,n,i){while(t.length>=1){const n=t[t.length-1];if(t.splice(t.length-1,1),e[n].numLiveTriangles>0)return n}while(s<i){if(e[s].numLiveTriangles>0)return++s,s-1;++s}return-1}function l(e,t,n,i,o,r,a){let s,l=-1,u=-1,h=0;while(h<n.length){const e=n[h];i[e].numLiveTriangles&&(s=0,o-i[e].timeStamp+2*i[e].numLiveTriangles<=t&&(s=o-i[e].timeStamp),(s>u||-1===u)&&(u=s,l=e)),++h}return-1===l?c(i,r,e,a):l}if(!Object(r["a"])(t))throw new a["a"]("indices is required.");const u=t.length;if(u<3||u%3!==0)throw new a["a"]("indices length must be a multiple of three.");if(n<=0)throw new a["a"]("maximumIndex must be greater than zero.");if(i<3)throw new a["a"]("cacheSize must be greater than two.");let h=0,d=0,f=t[d];const p=u;if(Object(r["a"])(n))h=n+1;else{while(d<p)f>h&&(h=f),++d,f=t[d];if(-1===h)return 0;++h}const m=[];let _;for(_=0;_<h;_++)m[_]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};d=0;let g=0;while(d<p)m[t[d]].vertexTriangles.push(g),++m[t[d]].numLiveTriangles,m[t[d+1]].vertexTriangles.push(g),++m[t[d+1]].numLiveTriangles,m[t[d+2]].vertexTriangles.push(g),++m[t[d+2]].numLiveTriangles,++g,d+=3;let b=0,y=i+1;s=1;let v=[];const O=[];let A,w,T=0;const C=[],E=u/3,x=[];for(_=0;_<E;_++)x[_]=!1;let S,I;while(-1!==b){v=[],w=m[b],I=w.vertexTriangles.length;for(let e=0;e<I;++e)if(g=w.vertexTriangles[e],!x[g]){x[g]=!0,d=g+g+g;for(let e=0;e<3;++e)S=t[d],v.push(S),O.push(S),C[T]=S,++T,A=m[S],--A.numLiveTriangles,y-A.timeStamp>i&&(A.timeStamp=y,++y),++d}b=l(t,i,v,m,y,O,h)}return C}};var zd=Fd;const kd={};function Ud(e,t,n,i,o){e[t++]=n,e[t++]=i,e[t++]=i,e[t++]=o,e[t++]=o,e[t]=n}function Vd(e){const t=e.length,n=t/3*6,i=ll.createTypedArray(t,n);let o=0;for(let r=0;r<t;r+=3,o+=6)Ud(i,o,e[r],e[r+1],e[r+2]);return i}function Hd(e){const t=e.length;if(t>=3){const n=6*(t-2),i=ll.createTypedArray(t,n);Ud(i,0,e[0],e[1],e[2]);let o=6;for(let r=3;r<t;++r,o+=6)Ud(i,o,e[r-1],e[r],e[r-2]);return i}return new Uint16Array}function Gd(e){if(e.length>0){const t=e.length-1,n=6*(t-1),i=ll.createTypedArray(t,n),o=e[0];let r=0;for(let a=1;a<t;++a,r+=6)Ud(i,r,o,e[a],e[a+1]);return i}return new Uint16Array}function Wd(e){const t={};for(const n in e)if(e.hasOwnProperty(n)&&Object(r["a"])(e[n])&&Object(r["a"])(e[n].values)){const i=e[n];t[n]=new ku({componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,values:[]})}return t}function qd(e,t,n){for(const i in t)if(t.hasOwnProperty(i)&&Object(r["a"])(t[i])&&Object(r["a"])(t[i].values)){const o=t[i];for(let t=0;t<o.componentsPerAttribute;++t)e[i].values.push(o.values[n*o.componentsPerAttribute+t])}}kd.toWireframe=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const t=e.indices;if(Object(r["a"])(t)){switch(e.primitiveType){case Eu.TRIANGLES:e.indices=Vd(t);break;case Eu.TRIANGLE_STRIP:e.indices=Hd(t);break;case Eu.TRIANGLE_FAN:e.indices=Gd(t);break;default:throw new a["a"]("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}e.primitiveType=Eu.LINES}return e},kd.createLineSegmentsForVectors=function(e,t,n){if(t=Object(o["a"])(t,"normal"),!Object(r["a"])(e))throw new a["a"]("geometry is required.");if(!Object(r["a"])(e.attributes.position))throw new a["a"]("geometry.attributes.position is required.");if(!Object(r["a"])(e.attributes[t]))throw new a["a"](`geometry.attributes must have an attribute with the same name as the attributeName parameter, ${t}.`);n=Object(o["a"])(n,1e4);const i=e.attributes.position.values,s=e.attributes[t].values,c=i.length,l=new Float64Array(2*c);let u,h=0;for(let o=0;o<c;o+=3)l[h++]=i[o],l[h++]=i[o+1],l[h++]=i[o+2],l[h++]=i[o]+s[o]*n,l[h++]=i[o+1]+s[o+1]*n,l[h++]=i[o+2]+s[o+2]*n;const d=e.boundingSphere;return Object(r["a"])(d)&&(u=new Tt(d.center,d.radius+n)),new Fu({attributes:{position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:l})},primitiveType:Eu.LINES,boundingSphere:u})},kd.createAttributeLocations=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const t=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={};let o,s=0;const c=t.length;for(o=0;o<c;++o){const e=t[o];Object(r["a"])(n[e])&&(i[e]=s++)}for(const a in n)n.hasOwnProperty(a)&&!Object(r["a"])(i[a])&&(i[a]=s++);return i},kd.reorderForPreVertexCache=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const t=Fu.computeNumberOfVertices(e),n=e.indices;if(Object(r["a"])(n)){const i=new Int32Array(t);for(let e=0;e<t;e++)i[e]=-1;const o=n,a=o.length,s=ll.createTypedArray(t,a);let c,l=0,u=0,h=0;while(l<a)c=i[o[l]],-1!==c?s[u]=c:(c=o[l],i[c]=h,s[u]=h,++h),++l,++u;e.indices=s;const d=e.attributes;for(const e in d)if(d.hasOwnProperty(e)&&Object(r["a"])(d[e])&&Object(r["a"])(d[e].values)){const n=d[e],o=n.values;let r=0;const a=n.componentsPerAttribute,s=Ks.createTypedArray(n.componentDatatype,h*a);while(r<t){const e=i[r];if(-1!==e)for(let t=0;t<a;t++)s[a*e+t]=o[a*r+t];++r}n.values=s}}return e},kd.reorderForPostVertexCache=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const n=e.indices;if(e.primitiveType===Eu.TRIANGLES&&Object(r["a"])(n)){const i=n.length;let o=0;for(let e=0;e<i;e++)n[e]>o&&(o=n[e]);e.indices=zd.tipsify({indices:n,maximumIndex:o,cacheSize:t})}return e},kd.fitToUnsignedShortIndices=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");if(Object(r["a"])(e.indices)&&e.primitiveType!==Eu.TRIANGLES&&e.primitiveType!==Eu.LINES&&e.primitiveType!==Eu.POINTS)throw new a["a"]("geometry.primitiveType must equal to PrimitiveType.TRIANGLES, PrimitiveType.LINES, or PrimitiveType.POINTS.");const t=[],n=Fu.computeNumberOfVertices(e);if(Object(r["a"])(e.indices)&&n>=s["a"].SIXTY_FOUR_KILOBYTES){let n=[],i=[],o=0,a=Wd(e.attributes);const c=e.indices,l=c.length;let u;e.primitiveType===Eu.TRIANGLES?u=3:e.primitiveType===Eu.LINES?u=2:e.primitiveType===Eu.POINTS&&(u=1);for(let h=0;h<l;h+=u){for(let t=0;t<u;++t){const s=c[h+t];let l=n[s];Object(r["a"])(l)||(l=o++,n[s]=l,qd(a,e.attributes,s)),i.push(l)}o+u>=s["a"].SIXTY_FOUR_KILOBYTES&&(t.push(new Fu({attributes:a,indices:i,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),n=[],i=[],o=0,a=Wd(e.attributes))}0!==i.length&&t.push(new Fu({attributes:a,indices:i,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};const Yd=new g,Xd=new I;kd.projectTo2D=function(e,t,n,i,o){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");if(!Object(r["a"])(t))throw new a["a"]("attributeName is required.");if(!Object(r["a"])(n))throw new a["a"]("attributeName3D is required.");if(!Object(r["a"])(i))throw new a["a"]("attributeName2D is required.");if(!Object(r["a"])(e.attributes[t]))throw new a["a"](`geometry must have attribute matching the attributeName argument: ${t}.`);if(e.attributes[t].componentDatatype!==Ks.DOUBLE)throw new a["a"]("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");const s=e.attributes[t];o=Object(r["a"])(o)?o:new V;const c=o.ellipsoid,l=s.values,u=new Float64Array(l.length);let h=0;for(let d=0;d<l.length;d+=3){const e=g.fromArray(l,d,Yd),t=c.cartesianToCartographic(e,Xd);if(!Object(r["a"])(t))throw new a["a"](`Could not project point (${e.x}, ${e.y}, ${e.z}) to 2D.`);const n=o.project(t,Yd);u[h++]=n.x,u[h++]=n.y,u[h++]=n.z}return e.attributes[n]=s,e.attributes[i]=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:u}),delete e.attributes[t],e};const Kd={high:0,low:0};kd.encodeAttribute=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");if(!Object(r["a"])(t))throw new a["a"]("attributeName is required.");if(!Object(r["a"])(n))throw new a["a"]("attributeHighName is required.");if(!Object(r["a"])(i))throw new a["a"]("attributeLowName is required.");if(!Object(r["a"])(e.attributes[t]))throw new a["a"](`geometry must have attribute matching the attributeName argument: ${t}.`);if(e.attributes[t].componentDatatype!==Ks.DOUBLE)throw new a["a"]("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");const o=e.attributes[t],s=o.values,c=s.length,l=new Float32Array(c),u=new Float32Array(c);for(let r=0;r<c;++r)Bd.encode(s[r],Kd),l[r]=Kd.high,u[r]=Kd.low;const h=o.componentsPerAttribute;return e.attributes[n]=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:h,values:l}),e.attributes[i]=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:h,values:u}),delete e.attributes[t],e};let $d=new g;function Jd(e,t){if(Object(r["a"])(t)){const n=t.values,i=n.length;for(let t=0;t<i;t+=3)g.unpack(n,t,$d),Me.multiplyByPoint(e,$d,$d),g.pack($d,n,t)}}function Qd(e,t){if(Object(r["a"])(t)){const n=t.values,i=n.length;for(let t=0;t<i;t+=3)g.unpack(n,t,$d),ce.multiplyByVector(e,$d,$d),$d=g.normalize($d,$d),g.pack($d,n,t)}}const Zd=new Me,ef=new ce;function tf(e,t){const n=e.length,i={},o=e[0][t].attributes;let a;for(a in o)if(o.hasOwnProperty(a)&&Object(r["a"])(o[a])&&Object(r["a"])(o[a].values)){const s=o[a];let c=s.values.length,l=!0;for(let i=1;i<n;++i){const n=e[i][t].attributes[a];if(!Object(r["a"])(n)||s.componentDatatype!==n.componentDatatype||s.componentsPerAttribute!==n.componentsPerAttribute||s.normalize!==n.normalize){l=!1;break}c+=n.values.length}l&&(i[a]=new ku({componentDatatype:s.componentDatatype,componentsPerAttribute:s.componentsPerAttribute,normalize:s.normalize,values:Ks.createTypedArray(s.componentDatatype,c)}))}return i}kd.transformToWorldCoordinates=function(e){if(!Object(r["a"])(e))throw new a["a"]("instance is required.");const t=e.modelMatrix;if(Me.equals(t,Me.IDENTITY))return e;const n=e.geometry.attributes;Jd(t,n.position),Jd(t,n.prevPosition),Jd(t,n.nextPosition),(Object(r["a"])(n.normal)||Object(r["a"])(n.tangent)||Object(r["a"])(n.bitangent))&&(Me.inverse(t,Zd),Me.transpose(Zd,Zd),Me.getMatrix3(Zd,ef),Qd(ef,n.normal),Qd(ef,n.tangent),Qd(ef,n.bitangent));const i=e.geometry.boundingSphere;return Object(r["a"])(i)&&(e.geometry.boundingSphere=Tt.transform(i,t,i)),e.modelMatrix=Me.clone(Me.IDENTITY),e};const nf=new g;function of(e,t){const n=e.length;let i,o,s,c;const l=e[0].modelMatrix,u=Object(r["a"])(e[0][t].indices),h=e[0][t].primitiveType;for(o=1;o<n;++o){if(!Me.equals(e[o].modelMatrix,l))throw new a["a"]("All instances must have the same modelMatrix.");if(Object(r["a"])(e[o][t].indices)!==u)throw new a["a"]("All instance geometries must have an indices or not have one.");if(e[o][t].primitiveType!==h)throw new a["a"]("All instance geometries must have the same primitiveType.")}const d=tf(e,t);let f,p,m,_;for(i in d)if(d.hasOwnProperty(i))for(f=d[i].values,c=0,o=0;o<n;++o)for(p=e[o][t].attributes[i].values,m=p.length,s=0;s<m;++s)f[c++]=p[s];if(u){let i=0;for(o=0;o<n;++o)i+=e[o][t].indices.length;const r=Fu.computeNumberOfVertices(new Fu({attributes:d,primitiveType:Eu.POINTS})),a=ll.createTypedArray(r,i);let s=0,l=0;for(o=0;o<n;++o){const n=e[o][t].indices,i=n.length;for(c=0;c<i;++c)a[s++]=l+n[c];l+=Fu.computeNumberOfVertices(e[o][t])}_=a}let b,y=new g,v=0;for(o=0;o<n;++o){if(b=e[o][t].boundingSphere,!Object(r["a"])(b)){y=void 0;break}g.add(b.center,y,y)}if(Object(r["a"])(y))for(g.divideByScalar(y,n,y),o=0;o<n;++o){b=e[o][t].boundingSphere;const n=g.magnitude(g.subtract(b.center,y,nf))+b.radius;n>v&&(v=n)}return new Fu({attributes:d,indices:_,primitiveType:h,boundingSphere:Object(r["a"])(y)?new Tt(y,v):void 0})}kd.combineInstances=function(e){if(!Object(r["a"])(e)||e.length<1)throw new a["a"]("instances is required and must have length greater than zero.");const t=[],n=[],i=e.length;for(let a=0;a<i;++a){const i=e[a];Object(r["a"])(i.geometry)?t.push(i):Object(r["a"])(i.westHemisphereGeometry)&&Object(r["a"])(i.eastHemisphereGeometry)&&n.push(i)}const o=[];return t.length>0&&o.push(of(t,"geometry")),n.length>0&&(o.push(of(n,"westHemisphereGeometry")),o.push(of(n,"eastHemisphereGeometry"))),o};const rf=new g,af=new g,sf=new g,cf=new g;kd.computeNormal=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");if(!Object(r["a"])(e.attributes.position)||!Object(r["a"])(e.attributes.position.values))throw new a["a"]("geometry.attributes.position.values is required.");if(!Object(r["a"])(e.indices))throw new a["a"]("geometry.indices is required.");if(e.indices.length<2||e.indices.length%3!==0)throw new a["a"]("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==Eu.TRIANGLES)throw new a["a"]("geometry.primitiveType must be PrimitiveType.TRIANGLES.");const t=e.indices,n=e.attributes,i=n.position.values,o=n.position.values.length/3,c=t.length,l=new Array(o),u=new Array(c/3),h=new Array(c);let d;for(d=0;d<o;d++)l[d]={indexOffset:0,count:0,currentCount:0};let f=0;for(d=0;d<c;d+=3){const e=t[d],n=t[d+1],o=t[d+2],r=3*e,a=3*n,s=3*o;af.x=i[r],af.y=i[r+1],af.z=i[r+2],sf.x=i[a],sf.y=i[a+1],sf.z=i[a+2],cf.x=i[s],cf.y=i[s+1],cf.z=i[s+2],l[e].count++,l[n].count++,l[o].count++,g.subtract(sf,af,sf),g.subtract(cf,af,cf),u[f]=g.cross(sf,cf,new g),f++}let p,m=0;for(d=0;d<o;d++)l[d].indexOffset+=m,m+=l[d].count;for(f=0,d=0;d<c;d+=3){p=l[t[d]];let e=p.indexOffset+p.currentCount;h[e]=f,p.currentCount++,p=l[t[d+1]],e=p.indexOffset+p.currentCount,h[e]=f,p.currentCount++,p=l[t[d+2]],e=p.indexOffset+p.currentCount,h[e]=f,p.currentCount++,f++}const _=new Float32Array(3*o);for(d=0;d<o;d++){const e=3*d;if(p=l[d],g.clone(g.ZERO,rf),p.count>0){for(f=0;f<p.count;f++)g.add(rf,u[h[p.indexOffset+f]],rf);g.equalsEpsilon(g.ZERO,rf,s["a"].EPSILON10)&&g.clone(u[h[p.indexOffset]],rf)}g.equalsEpsilon(g.ZERO,rf,s["a"].EPSILON10)&&(rf.z=1),g.normalize(rf,rf),_[e]=rf.x,_[e+1]=rf.y,_[e+2]=rf.z}return e.attributes.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:_}),e};const lf=new g,uf=new g,hf=new g;kd.computeTangentAndBitangent=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const t=e.attributes,n=e.indices;if(!Object(r["a"])(t.position)||!Object(r["a"])(t.position.values))throw new a["a"]("geometry.attributes.position.values is required.");if(!Object(r["a"])(t.normal)||!Object(r["a"])(t.normal.values))throw new a["a"]("geometry.attributes.normal.values is required.");if(!Object(r["a"])(t.st)||!Object(r["a"])(t.st.values))throw new a["a"]("geometry.attributes.st.values is required.");if(!Object(r["a"])(n))throw new a["a"]("geometry.indices is required.");if(n.length<2||n.length%3!==0)throw new a["a"]("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==Eu.TRIANGLES)throw new a["a"]("geometry.primitiveType must be PrimitiveType.TRIANGLES.");const i=e.attributes.position.values,o=e.attributes.normal.values,s=e.attributes.st.values,c=e.attributes.position.values.length/3,l=n.length,u=new Array(3*c);let h,d,f,p;for(h=0;h<u.length;h++)u[h]=0;for(h=0;h<l;h+=3){const e=n[h],t=n[h+1],o=n[h+2];d=3*e,f=3*t,p=3*o;const r=2*e,a=2*t,c=2*o,l=i[d],m=i[d+1],_=i[d+2],g=s[r],b=s[r+1],y=s[a+1]-b,v=s[c+1]-b,O=1/((s[a]-g)*v-(s[c]-g)*y),A=(v*(i[f]-l)-y*(i[p]-l))*O,w=(v*(i[f+1]-m)-y*(i[p+1]-m))*O,T=(v*(i[f+2]-_)-y*(i[p+2]-_))*O;u[d]+=A,u[d+1]+=w,u[d+2]+=T,u[f]+=A,u[f+1]+=w,u[f+2]+=T,u[p]+=A,u[p+1]+=w,u[p+2]+=T}const m=new Float32Array(3*c),_=new Float32Array(3*c);for(h=0;h<c;h++){d=3*h,f=d+1,p=d+2;const e=g.fromArray(o,d,lf),t=g.fromArray(u,d,hf),n=g.dot(e,t);g.multiplyByScalar(e,n,uf),g.normalize(g.subtract(t,uf,t),t),m[d]=t.x,m[f]=t.y,m[p]=t.z,g.normalize(g.cross(e,t,t),t),_[d]=t.x,_[f]=t.y,_[p]=t.z}return e.attributes.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:m}),e.attributes.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:_}),e};const df=new Gt,ff=new g,pf=new g,mf=new g;let _f=new Gt;function gf(e){if(Object(r["a"])(e.indices))return e;const t=Fu.computeNumberOfVertices(e);if(t<3)throw new a["a"]("The number of vertices must be at least three.");if(t%3!==0)throw new a["a"]("The number of vertices must be a multiple of three.");const n=ll.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function bf(e){const t=Fu.computeNumberOfVertices(e);if(t<3)throw new a["a"]("The number of vertices must be at least three.");const n=ll.createTypedArray(t,3*(t-2));n[0]=1,n[1]=0,n[2]=2;let i=3;for(let o=3;o<t;++o)n[i++]=o-1,n[i++]=0,n[i++]=o;return e.indices=n,e.primitiveType=Eu.TRIANGLES,e}function yf(e){const t=Fu.computeNumberOfVertices(e);if(t<3)throw new a["a"]("The number of vertices must be at least 3.");const n=ll.createTypedArray(t,3*(t-2));n[0]=0,n[1]=1,n[2]=2,t>3&&(n[3]=0,n[4]=2,n[5]=3);let i=6;for(let o=3;o<t-1;o+=2)n[i++]=o,n[i++]=o-1,n[i++]=o+1,o+2<t&&(n[i++]=o,n[i++]=o+1,n[i++]=o+2);return e.indices=n,e.primitiveType=Eu.TRIANGLES,e}function vf(e){if(Object(r["a"])(e.indices))return e;const t=Fu.computeNumberOfVertices(e);if(t<2)throw new a["a"]("The number of vertices must be at least two.");if(t%2!==0)throw new a["a"]("The number of vertices must be a multiple of 2.");const n=ll.createTypedArray(t,t);for(let i=0;i<t;++i)n[i]=i;return e.indices=n,e}function Of(e){const t=Fu.computeNumberOfVertices(e);if(t<2)throw new a["a"]("The number of vertices must be at least two.");const n=ll.createTypedArray(t,2*(t-1));n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return e.indices=n,e.primitiveType=Eu.LINES,e}function Af(e){const t=Fu.computeNumberOfVertices(e);if(t<2)throw new a["a"]("The number of vertices must be at least two.");const n=ll.createTypedArray(t,2*t);n[0]=0,n[1]=1;let i=2;for(let o=2;o<t;++o)n[i++]=o-1,n[i++]=o;return n[i++]=t-1,n[i]=0,e.indices=n,e.primitiveType=Eu.LINES,e}function wf(e){switch(e.primitiveType){case Eu.TRIANGLE_FAN:return bf(e);case Eu.TRIANGLE_STRIP:return yf(e);case Eu.TRIANGLES:return gf(e);case Eu.LINE_STRIP:return Of(e);case Eu.LINE_LOOP:return Af(e);case Eu.LINES:return vf(e)}return e}function Tf(e,t){Math.abs(e.y)<s["a"].EPSILON6&&(e.y=t?-s["a"].EPSILON6:s["a"].EPSILON6)}function Cf(e,t,n){if(0!==e.y&&0!==t.y&&0!==n.y)return Tf(e,e.y<0),Tf(t,t.y<0),void Tf(n,n.y<0);const i=Math.abs(e.y),o=Math.abs(t.y),r=Math.abs(n.y);let a;a=i>o?i>r?s["a"].sign(e.y):s["a"].sign(n.y):o>r?s["a"].sign(t.y):s["a"].sign(n.y);const c=a<0;Tf(e,c),Tf(t,c),Tf(n,c)}kd.compressVertices=function(e){if(!Object(r["a"])(e))throw new a["a"]("geometry is required.");const t=e.attributes.extrudeDirection;let n,i;if(Object(r["a"])(t)){const o=t.values;i=o.length/3;const r=new Float32Array(2*i);let a=0;for(n=0;n<i;++n)g.fromArray(o,3*n,ff),g.equals(ff,g.ZERO)?a+=2:(_f=pc.octEncodeInRange(ff,65535,_f),r[a++]=_f.x,r[a++]=_f.y);return e.attributes.compressedAttributes=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:r}),delete e.attributes.extrudeDirection,e}const o=e.attributes.normal,s=e.attributes.st,c=Object(r["a"])(o),l=Object(r["a"])(s);if(!c&&!l)return e;const u=e.attributes.tangent,h=e.attributes.bitangent,d=Object(r["a"])(u),f=Object(r["a"])(h);let p,m,_,b;c&&(p=o.values),l&&(m=s.values),d&&(_=u.values),f&&(b=h.values);const y=c?p.length:m.length,v=c?3:2;i=y/v;let O=i,A=l&&c?2:1;A+=d||f?1:0,O*=A;const w=new Float32Array(O);let T=0;for(n=0;n<i;++n){l&&(Gt.fromArray(m,2*n,df),w[T++]=pc.compressTextureCoordinates(df));const e=3*n;c&&Object(r["a"])(_)&&Object(r["a"])(b)?(g.fromArray(p,e,ff),g.fromArray(_,e,pf),g.fromArray(b,e,mf),pc.octPack(ff,pf,mf,df),w[T++]=df.x,w[T++]=df.y):(c&&(g.fromArray(p,e,ff),w[T++]=pc.octEncodeFloat(ff)),d&&(g.fromArray(_,e,ff),w[T++]=pc.octEncodeFloat(ff)),f&&(g.fromArray(b,e,ff),w[T++]=pc.octEncodeFloat(ff)))}return e.attributes.compressedAttributes=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:A,values:w}),c&&delete e.attributes.normal,l&&delete e.attributes.st,f&&delete e.attributes.bitangent,d&&delete e.attributes.tangent,e};const Ef=new g;function xf(e,t,n,i){g.add(e,g.multiplyByScalar(g.subtract(t,e,Ef),e.y/(e.y-t.y),Ef),n),g.clone(n,i),Tf(n,!0),Tf(i,!1)}const Sf=new g,If=new g,Df=new g,Pf=new g,jf={positions:new Array(7),indices:new Array(9)};function Rf(e,t,n){if(e.x>=0||t.x>=0||n.x>=0)return;Cf(e,t,n);const i=e.y<0,o=t.y<0,r=n.y<0;let a=0;a+=i?1:0,a+=o?1:0,a+=r?1:0;const s=jf.indices;1===a?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(xf(e,t,Sf,Df),xf(e,n,If,Pf),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(xf(t,n,Sf,Df),xf(t,e,If,Pf),s[0]=1,s[3]=2,s[4]=0,s[6]=2):r&&(xf(n,e,Sf,Df),xf(n,t,If,Pf),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2===a&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?o?r||(xf(n,e,Sf,Df),xf(n,t,If,Pf),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(xf(t,n,Sf,Df),xf(t,e,If,Pf),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(xf(e,t,Sf,Df),xf(e,n,If,Pf),s[0]=1,s[1]=2,s[3]=1,s[6]=0));const c=jf.positions;return c[0]=e,c[1]=t,c[2]=n,c.length=3,1!==a&&2!==a||(c[3]=Sf,c[4]=If,c[5]=Df,c[6]=Pf,c.length=7),jf}function Lf(e,t){const n=e.attributes;if(0===n.position.values.length)return;for(const o in n)if(n.hasOwnProperty(o)&&Object(r["a"])(n[o])&&Object(r["a"])(n[o].values)){const e=n[o];e.values=Ks.createTypedArray(e.componentDatatype,e.values)}const i=Fu.computeNumberOfVertices(e);return e.indices=ll.createTypedArray(i,e.indices),t&&(e.boundingSphere=Tt.fromVertices(n.position.values)),e}function Mf(e){const t=e.attributes,n={};for(const i in t)if(t.hasOwnProperty(i)&&Object(r["a"])(t[i])&&Object(r["a"])(t[i].values)){const e=t[i];n[i]=new ku({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:[]})}return new Fu({attributes:n,indices:[],primitiveType:e.primitiveType})}function Nf(e,t,n){const i=Object(r["a"])(e.geometry.boundingSphere);t=Lf(t,i),n=Lf(n,i),Object(r["a"])(n)&&!Object(r["a"])(t)?e.geometry=n:!Object(r["a"])(n)&&Object(r["a"])(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=n,e.geometry=void 0)}function Bf(e,t){const n=new e,i=new e,o=new e;return function(r,a,s,c,l,u,h,d){const f=e.fromArray(l,r*t,n),p=e.fromArray(l,a*t,i),m=e.fromArray(l,s*t,o);e.multiplyByScalar(f,c.x,f),e.multiplyByScalar(p,c.y,p),e.multiplyByScalar(m,c.z,m);const _=e.add(f,p,f);e.add(_,m,_),d&&e.normalize(_,_),e.pack(_,u,h*t)}}const Ff=Bf(be,4),zf=Bf(g,3),kf=Bf(Gt,2),Uf=function(e,t,n,i,o,r,a){const c=o[e]*i.x,l=o[t]*i.y,u=o[n]*i.z;r[a]=c+l+u>s["a"].EPSILON6?1:0},Vf=new g,Hf=new g,Gf=new g,Wf=new g;function qf(e,t,n,i,o,a,s,c,l,u,h,d,f,p,m,_){if(!Object(r["a"])(a)&&!Object(r["a"])(s)&&!Object(r["a"])(c)&&!Object(r["a"])(l)&&!Object(r["a"])(u)&&0===p)return;const b=g.fromArray(o,3*e,Vf),y=g.fromArray(o,3*t,Hf),v=g.fromArray(o,3*n,Gf),O=Rd(i,b,y,v,Wf);if(Object(r["a"])(O)){if(Object(r["a"])(a)&&zf(e,t,n,O,a,d.normal.values,_,!0),Object(r["a"])(u)){const i=g.fromArray(u,3*e,Vf),o=g.fromArray(u,3*t,Hf),r=g.fromArray(u,3*n,Gf);let a;g.multiplyByScalar(i,O.x,i),g.multiplyByScalar(o,O.y,o),g.multiplyByScalar(r,O.z,r),g.equals(i,g.ZERO)&&g.equals(o,g.ZERO)&&g.equals(r,g.ZERO)?(a=Vf,a.x=0,a.y=0,a.z=0):(a=g.add(i,o,i),g.add(a,r,a),g.normalize(a,a)),g.pack(a,d.extrudeDirection.values,3*_)}if(Object(r["a"])(h)&&Uf(e,t,n,O,h,d.applyOffset.values,_),Object(r["a"])(s)&&zf(e,t,n,O,s,d.tangent.values,_,!0),Object(r["a"])(c)&&zf(e,t,n,O,c,d.bitangent.values,_,!0),Object(r["a"])(l)&&kf(e,t,n,O,l,d.st.values,_),p>0)for(let i=0;i<p;i++){const o=f[i];Yf(e,t,n,O,_,m[o],d[o])}}}function Yf(e,t,n,i,o,r,a){const s=r.componentsPerAttribute,c=r.values,l=a.values;switch(s){case 4:Ff(e,t,n,i,c,l,o,!1);break;case 3:zf(e,t,n,i,c,l,o,!1);break;case 2:kf(e,t,n,i,c,l,o,!1);break;default:l[o]=c[e]*i.x+c[t]*i.y+c[n]*i.z}}function Xf(e,t,n,i,o,r){const a=e.position.values.length/3;if(-1!==o){const s=i[o],c=n[s];return-1===c?(n[s]=a,e.position.values.push(r.x,r.y,r.z),t.push(a),a):(t.push(c),c)}return e.position.values.push(r.x,r.y,r.z),t.push(a),a}const Kf={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function $f(e){const t=e.geometry,n=t.attributes,i=n.position.values,o=Object(r["a"])(n.normal)?n.normal.values:void 0,a=Object(r["a"])(n.bitangent)?n.bitangent.values:void 0,s=Object(r["a"])(n.tangent)?n.tangent.values:void 0,c=Object(r["a"])(n.st)?n.st.values:void 0,l=Object(r["a"])(n.extrudeDirection)?n.extrudeDirection.values:void 0,u=Object(r["a"])(n.applyOffset)?n.applyOffset.values:void 0,h=t.indices,d=[];for(const g in n)n.hasOwnProperty(g)&&!Kf[g]&&Object(r["a"])(n[g])&&d.push(g);const f=d.length,p=Mf(t),m=Mf(t);let _,b,y,v,O;const A=[];A.length=i.length/3;const w=[];for(w.length=i.length/3,O=0;O<A.length;++O)A[O]=-1,w[O]=-1;const T=h.length;for(O=0;O<T;O+=3){const e=h[O],t=h[O+1],T=h[O+2];let C=g.fromArray(i,3*e),E=g.fromArray(i,3*t),x=g.fromArray(i,3*T);const S=Rf(C,E,x);if(Object(r["a"])(S)&&S.positions.length>3){const r=S.positions,g=S.indices,C=g.length;for(let E=0;E<C;++E){const C=g[E],x=r[C];x.y<0?(_=m.attributes,b=m.indices,y=A):(_=p.attributes,b=p.indices,y=w),v=Xf(_,b,y,h,C<3?O+C:-1,x),qf(e,t,T,x,i,o,s,a,c,l,u,_,d,f,n,v)}}else Object(r["a"])(S)&&(C=S.positions[0],E=S.positions[1],x=S.positions[2]),C.y<0?(_=m.attributes,b=m.indices,y=A):(_=p.attributes,b=p.indices,y=w),v=Xf(_,b,y,h,O,C),qf(e,t,T,C,i,o,s,a,c,l,u,_,d,f,n,v),v=Xf(_,b,y,h,O+1,E),qf(e,t,T,E,i,o,s,a,c,l,u,_,d,f,n,v),v=Xf(_,b,y,h,O+2,x),qf(e,t,T,x,i,o,s,a,c,l,u,_,d,f,n,v)}Nf(e,m,p)}const Jf=ji.fromPointNormal(g.ZERO,g.UNIT_Y),Qf=new g,Zf=new g;function ep(e,t,n,i,o,a,c){if(!Object(r["a"])(c))return;const l=g.fromArray(i,3*e,Vf);g.equalsEpsilon(l,n,s["a"].EPSILON10)?a.applyOffset.values[o]=c[e]:a.applyOffset.values[o]=c[t]}function tp(e){const t=e.geometry,n=t.attributes,i=n.position.values,o=Object(r["a"])(n.applyOffset)?n.applyOffset.values:void 0,a=t.indices,c=Mf(t),l=Mf(t);let u;const h=a.length,d=[];d.length=i.length/3;const f=[];for(f.length=i.length/3,u=0;u<d.length;++u)d[u]=-1,f[u]=-1;for(u=0;u<h;u+=2){const e=a[u],t=a[u+1],n=g.fromArray(i,3*e,Vf),h=g.fromArray(i,3*t,Hf);let p;Math.abs(n.y)<s["a"].EPSILON6&&(n.y<0?n.y=-s["a"].EPSILON6:n.y=s["a"].EPSILON6),Math.abs(h.y)<s["a"].EPSILON6&&(h.y<0?h.y=-s["a"].EPSILON6:h.y=s["a"].EPSILON6);let m=c.attributes,_=c.indices,b=f,y=l.attributes,v=l.indices,O=d;const A=Ci.lineSegmentPlane(n,h,Jf,Gf);if(Object(r["a"])(A)){const r=g.multiplyByScalar(g.UNIT_Y,5*s["a"].EPSILON9,Qf);n.y<0&&(g.negate(r,r),m=l.attributes,_=l.indices,b=d,y=c.attributes,v=c.indices,O=f);const w=g.add(A,r,Zf);p=Xf(m,_,b,a,u,n),ep(e,t,n,i,p,m,o),p=Xf(m,_,b,a,-1,w),ep(e,t,w,i,p,m,o),g.negate(r,r),g.add(A,r,w),p=Xf(y,v,O,a,-1,w),ep(e,t,w,i,p,y,o),p=Xf(y,v,O,a,u+1,h),ep(e,t,h,i,p,y,o)}else{let r,s,m;n.y<0?(r=l.attributes,s=l.indices,m=d):(r=c.attributes,s=c.indices,m=f),p=Xf(r,s,m,a,u,n),ep(e,t,n,i,p,r,o),p=Xf(r,s,m,a,u+1,h),ep(e,t,h,i,p,r,o)}}Nf(e,l,c)}const np=new Gt,ip=new Gt,op=new g,rp=new g,ap=new g,sp=new g,cp=new g,lp=new g,up=new be;function hp(e){const t=e.attributes,n=t.position.values,i=t.prevPosition.values,o=t.nextPosition.values,r=n.length;for(let a=0;a<r;a+=3){const e=g.unpack(n,a,op);if(e.x>0)continue;const t=g.unpack(i,a,rp);(e.y<0&&t.y>0||e.y>0&&t.y<0)&&(a-3>0?(i[a]=n[a-3],i[a+1]=n[a-2],i[a+2]=n[a-1]):g.pack(e,i,a));const s=g.unpack(o,a,ap);(e.y<0&&s.y>0||e.y>0&&s.y<0)&&(a+3<r?(o[a]=n[a+3],o[a+1]=n[a+4],o[a+2]=n[a+5]):g.pack(e,o,a))}}const dp=5*s["a"].EPSILON9,fp=s["a"].EPSILON6;function pp(e){const t=e.geometry,n=t.attributes,i=n.position.values,o=n.prevPosition.values,a=n.nextPosition.values,c=n.expandAndWidth.values,l=Object(r["a"])(n.st)?n.st.values:void 0,u=Object(r["a"])(n.color)?n.color.values:void 0,h=Mf(t),d=Mf(t);let f,p,m,_=!1;const b=i.length/3;for(f=0;f<b;f+=4){const e=f,t=f+2,n=g.fromArray(i,3*e,op),b=g.fromArray(i,3*t,rp);if(Math.abs(n.y)<fp)for(n.y=fp*(b.y<0?-1:1),i[3*f+1]=n.y,i[3*(f+1)+1]=n.y,p=3*e;p<3*e+12;p+=3)o[p]=i[3*f],o[p+1]=i[3*f+1],o[p+2]=i[3*f+2];if(Math.abs(b.y)<fp)for(b.y=fp*(n.y<0?-1:1),i[3*(f+2)+1]=b.y,i[3*(f+3)+1]=b.y,p=3*e;p<3*e+12;p+=3)a[p]=i[3*(f+2)],a[p+1]=i[3*(f+2)+1],a[p+2]=i[3*(f+2)+2];let y=h.attributes,v=h.indices,O=d.attributes,A=d.indices;const w=Ci.lineSegmentPlane(n,b,Jf,sp);if(Object(r["a"])(w)){_=!0;const i=g.multiplyByScalar(g.UNIT_Y,dp,cp);n.y<0&&(g.negate(i,i),y=d.attributes,v=d.indices,O=h.attributes,A=h.indices);const T=g.add(w,i,lp);y.position.values.push(n.x,n.y,n.z,n.x,n.y,n.z),y.position.values.push(T.x,T.y,T.z),y.position.values.push(T.x,T.y,T.z),y.prevPosition.values.push(o[3*e],o[3*e+1],o[3*e+2]),y.prevPosition.values.push(o[3*e+3],o[3*e+4],o[3*e+5]),y.prevPosition.values.push(n.x,n.y,n.z,n.x,n.y,n.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),g.negate(i,i),g.add(w,i,T),O.position.values.push(T.x,T.y,T.z),O.position.values.push(T.x,T.y,T.z),O.position.values.push(b.x,b.y,b.z,b.x,b.y,b.z),O.prevPosition.values.push(T.x,T.y,T.z),O.prevPosition.values.push(T.x,T.y,T.z),O.prevPosition.values.push(T.x,T.y,T.z),O.prevPosition.values.push(T.x,T.y,T.z),O.nextPosition.values.push(b.x,b.y,b.z,b.x,b.y,b.z),O.nextPosition.values.push(a[3*t],a[3*t+1],a[3*t+2]),O.nextPosition.values.push(a[3*t+3],a[3*t+4],a[3*t+5]);const C=Gt.fromArray(c,2*e,np),E=Math.abs(C.y);y.expandAndWidth.values.push(-1,E,1,E),y.expandAndWidth.values.push(-1,-E,1,-E),O.expandAndWidth.values.push(-1,E,1,E),O.expandAndWidth.values.push(-1,-E,1,-E);let x=g.magnitudeSquared(g.subtract(w,n,ap));if(x/=g.magnitudeSquared(g.subtract(b,n,ap)),Object(r["a"])(u)){const n=be.fromArray(u,4*e,up),i=be.fromArray(u,4*t,up),o=s["a"].lerp(n.x,i.x,x),r=s["a"].lerp(n.y,i.y,x),a=s["a"].lerp(n.z,i.z,x),c=s["a"].lerp(n.w,i.w,x);for(p=4*e;p<4*e+8;++p)y.color.values.push(u[p]);for(y.color.values.push(o,r,a,c),y.color.values.push(o,r,a,c),O.color.values.push(o,r,a,c),O.color.values.push(o,r,a,c),p=4*t;p<4*t+8;++p)O.color.values.push(u[p])}if(Object(r["a"])(l)){const n=Gt.fromArray(l,2*e,np),i=Gt.fromArray(l,2*(f+3),ip),o=s["a"].lerp(n.x,i.x,x);for(p=2*e;p<2*e+4;++p)y.st.values.push(l[p]);for(y.st.values.push(o,n.y),y.st.values.push(o,i.y),O.st.values.push(o,n.y),O.st.values.push(o,i.y),p=2*t;p<2*t+4;++p)O.st.values.push(l[p])}m=y.position.values.length/3-4,v.push(m,m+2,m+1),v.push(m+1,m+2,m+3),m=O.position.values.length/3-4,A.push(m,m+2,m+1),A.push(m+1,m+2,m+3)}else{let e,t;for(n.y<0?(e=d.attributes,t=d.indices):(e=h.attributes,t=h.indices),e.position.values.push(n.x,n.y,n.z),e.position.values.push(n.x,n.y,n.z),e.position.values.push(b.x,b.y,b.z),e.position.values.push(b.x,b.y,b.z),p=3*f;p<3*f+12;++p)e.prevPosition.values.push(o[p]),e.nextPosition.values.push(a[p]);for(p=2*f;p<2*f+8;++p)e.expandAndWidth.values.push(c[p]),Object(r["a"])(l)&&e.st.values.push(l[p]);if(Object(r["a"])(u))for(p=4*f;p<4*f+16;++p)e.color.values.push(u[p]);m=e.position.values.length/3-4,t.push(m,m+2,m+1),t.push(m+1,m+2,m+3)}}_&&(hp(d),hp(h)),Nf(e,d,h)}kd.splitLongitude=function(e){if(!Object(r["a"])(e))throw new a["a"]("instance is required.");const t=e.geometry,n=t.boundingSphere;if(Object(r["a"])(n)){const t=n.center.x-n.radius;if(t>0||Tt.intersectPlane(n,ji.ORIGIN_ZX_PLANE)!==G.INTERSECTING)return e}if(t.geometryType!==Tu.NONE)switch(t.geometryType){case Tu.POLYLINES:pp(e);break;case Tu.TRIANGLES:$f(e);break;case Tu.LINES:tp(e);break}else wf(t),t.primitiveType===Eu.TRIANGLES?$f(e):t.primitiveType===Eu.LINES&&tp(e);return e};var mp=kd;const _p=new g,gp=new g,bp=new g,yp=new g,vp=new Gt,Op=new ce,Ap=new ce,wp=new Kr,Tp=new g,Cp=new g,Ep=new g,xp=new I,Sp=new g,Ip=new Gt,Dp=new Gt;function Pp(e,t,n){const i=t.vertexFormat,o=t.center,a=t.semiMajorAxis,s=t.semiMinorAxis,c=t.ellipsoid,l=t.stRotation,u=n?e.length/3*2:e.length/3,h=t.shadowVolume,d=i.st?new Float32Array(2*u):void 0,f=i.normal?new Float32Array(3*u):void 0,p=i.tangent?new Float32Array(3*u):void 0,m=i.bitangent?new Float32Array(3*u):void 0,_=h?new Float32Array(3*u):void 0;let b=0,y=Tp,v=Cp,O=Ep;const A=new V(c),w=A.project(c.cartesianToCartographic(o,xp),Sp),T=c.scaleToGeodeticSurface(o,_p);c.geodeticSurfaceNormal(T,T);let C=Op,E=Ap;if(0!==l){let e=Kr.fromAxisAngle(T,l,wp);C=ce.fromQuaternion(e,C),e=Kr.fromAxisAngle(T,-l,wp),E=ce.fromQuaternion(e,E)}else C=ce.clone(ce.IDENTITY,C),E=ce.clone(ce.IDENTITY,E);const x=Gt.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Ip),S=Gt.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Dp);let I=e.length;const D=n?I:0,P=D/3*2;for(let r=0;r<I;r+=3){const t=r+1,o=r+2,l=g.fromArray(e,r,_p);if(i.st){const e=ce.multiplyByVector(C,l,gp),t=A.project(c.cartesianToCartographic(e,xp),bp);g.subtract(t,w,t),vp.x=(t.x+a)/(2*a),vp.y=(t.y+s)/(2*s),x.x=Math.min(vp.x,x.x),x.y=Math.min(vp.y,x.y),S.x=Math.max(vp.x,S.x),S.y=Math.max(vp.y,S.y),n&&(d[b+P]=vp.x,d[b+1+P]=vp.y),d[b++]=vp.x,d[b++]=vp.y}(i.normal||i.tangent||i.bitangent||h)&&(y=c.geodeticSurfaceNormal(l,y),h&&(_[r+D]=-y.x,_[t+D]=-y.y,_[o+D]=-y.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(v=g.normalize(g.cross(g.UNIT_Z,y,v),v),ce.multiplyByVector(E,v,v)),i.normal&&(f[r]=y.x,f[t]=y.y,f[o]=y.z,n&&(f[r+D]=-y.x,f[t+D]=-y.y,f[o+D]=-y.z)),i.tangent&&(p[r]=v.x,p[t]=v.y,p[o]=v.z,n&&(p[r+D]=-v.x,p[t+D]=-v.y,p[o+D]=-v.z)),i.bitangent&&(O=g.normalize(g.cross(y,v,O),O),m[r]=O.x,m[t]=O.y,m[o]=O.z,n&&(m[r+D]=O.x,m[t+D]=O.y,m[o+D]=O.z))))}if(i.st){I=d.length;for(let e=0;e<I;e+=2)d[e]=(d[e]-x.x)/(S.x-x.x),d[e+1]=(d[e+1]-x.y)/(S.y-x.y)}const j=new Vu;if(i.position){const i=Ed.raisePositionsToHeight(e,t,n);j.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:i})}if(i.st&&(j.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:d})),i.normal&&(j.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:f})),i.tangent&&(j.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:p})),i.bitangent&&(j.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:m})),h&&(j.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:_})),n&&Object(r["a"])(t.offsetAttribute)){let e=new Uint8Array(u);if(t.offsetAttribute===Gu.TOP)e=e.fill(1,0,u/2);else{const n=t.offsetAttribute===Gu.NONE?0:1;e=e.fill(n)}j.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return j}function jp(e){const t=new Array(e*(e+1)*12-6);let n,i,o,r,a,s=0;for(n=0,o=1,r=0;r<3;r++)t[s++]=o++,t[s++]=n,t[s++]=o;for(r=2;r<e+1;++r){for(o=r*(r+1)-1,n=(r-1)*r-1,t[s++]=o++,t[s++]=n,t[s++]=o,i=2*r,a=0;a<i-1;++a)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;t[s++]=o++,t[s++]=n,t[s++]=o}for(i=2*e,++o,++n,r=0;r<i-1;++r)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;for(t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n++,t[s++]=n,++n,r=e-1;r>1;--r){for(t[s++]=n++,t[s++]=n,t[s++]=o,i=2*r,a=0;a<i-1;++a)t[s++]=o,t[s++]=n++,t[s++]=n,t[s++]=o++,t[s++]=n,t[s++]=o;t[s++]=n++,t[s++]=n++,t[s++]=o++}for(r=0;r<3;r++)t[s++]=n++,t[s++]=n,t[s++]=o;return t}let Rp=new g;function Lp(e){const t=e.center;Rp=g.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,Rp),e.height,Rp),Rp=g.add(t,Rp,Rp);const n=new Tt(Rp,e.semiMajorAxis),i=Ed.computeEllipsePositions(e,!0,!1),o=i.positions,r=i.numPts,a=Pp(o,e,!1);let s=jp(r);return s=ll.createTypedArray(o.length/3,s),{boundingSphere:n,attributes:a,indices:s}}function Mp(e,t){const n=t.vertexFormat,i=t.center,o=t.semiMajorAxis,a=t.semiMinorAxis,s=t.ellipsoid,c=t.height,l=t.extrudedHeight,u=t.stRotation,h=e.length/3*2,d=new Float64Array(3*h),f=n.st?new Float32Array(2*h):void 0,p=n.normal?new Float32Array(3*h):void 0,m=n.tangent?new Float32Array(3*h):void 0,_=n.bitangent?new Float32Array(3*h):void 0,b=t.shadowVolume,y=b?new Float32Array(3*h):void 0;let v=0,O=Tp,A=Cp,w=Ep;const T=new V(s),C=T.project(s.cartesianToCartographic(i,xp),Sp),E=s.scaleToGeodeticSurface(i,_p);s.geodeticSurfaceNormal(E,E);const x=Kr.fromAxisAngle(E,u,wp),S=ce.fromQuaternion(x,Op),I=Gt.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Ip),D=Gt.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Dp);let P=e.length;const j=P/3*2;for(let r=0;r<P;r+=3){const t=r+1,i=r+2;let u,h=g.fromArray(e,r,_p);if(n.st){const e=ce.multiplyByVector(S,h,gp),t=T.project(s.cartesianToCartographic(e,xp),bp);g.subtract(t,C,t),vp.x=(t.x+o)/(2*o),vp.y=(t.y+a)/(2*a),I.x=Math.min(vp.x,I.x),I.y=Math.min(vp.y,I.y),D.x=Math.max(vp.x,D.x),D.y=Math.max(vp.y,D.y),f[v+j]=vp.x,f[v+1+j]=vp.y,f[v++]=vp.x,f[v++]=vp.y}h=s.scaleToGeodeticSurface(h,h),u=g.clone(h,gp),O=s.geodeticSurfaceNormal(h,O),b&&(y[r+P]=-O.x,y[t+P]=-O.y,y[i+P]=-O.z);let E=g.multiplyByScalar(O,c,yp);if(h=g.add(h,E,h),E=g.multiplyByScalar(O,l,E),u=g.add(u,E,u),n.position&&(d[r+P]=u.x,d[t+P]=u.y,d[i+P]=u.z,d[r]=h.x,d[t]=h.y,d[i]=h.z),n.normal||n.tangent||n.bitangent){w=g.clone(O,w);const o=g.fromArray(e,(r+3)%P,yp);g.subtract(o,h,o);const a=g.subtract(u,h,bp);O=g.normalize(g.cross(a,o,O),O),n.normal&&(p[r]=O.x,p[t]=O.y,p[i]=O.z,p[r+P]=O.x,p[t+P]=O.y,p[i+P]=O.z),n.tangent&&(A=g.normalize(g.cross(w,O,A),A),m[r]=A.x,m[t]=A.y,m[i]=A.z,m[r+P]=A.x,m[r+1+P]=A.y,m[r+2+P]=A.z),n.bitangent&&(_[r]=w.x,_[t]=w.y,_[i]=w.z,_[r+P]=w.x,_[t+P]=w.y,_[i+P]=w.z)}}if(n.st){P=f.length;for(let e=0;e<P;e+=2)f[e]=(f[e]-I.x)/(D.x-I.x),f[e+1]=(f[e+1]-I.y)/(D.y-I.y)}const R=new Vu;if(n.position&&(R.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:d})),n.st&&(R.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:f})),n.normal&&(R.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:p})),n.tangent&&(R.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:m})),n.bitangent&&(R.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:_})),b&&(R.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:y})),Object(r["a"])(t.offsetAttribute)){let e=new Uint8Array(h);if(t.offsetAttribute===Gu.TOP)e=e.fill(1,0,h/2);else{const n=t.offsetAttribute===Gu.NONE?0:1;e=e.fill(n)}R.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:e})}return R}function Np(e){const t=e.length/3,n=ll.createTypedArray(t,6*t);let i=0;for(let o=0;o<t;o++){const e=o,r=o+t,a=(e+1)%t,s=a+t;n[i++]=e,n[i++]=r,n[i++]=a,n[i++]=a,n[i++]=r,n[i++]=s}return n}const Bp=new Tt,Fp=new Tt;function zp(e){const t=e.center,n=e.ellipsoid,i=e.semiMajorAxis;let o=g.multiplyByScalar(n.geodeticSurfaceNormal(t,_p),e.height,_p);Bp.center=g.add(t,o,Bp.center),Bp.radius=i,o=g.multiplyByScalar(n.geodeticSurfaceNormal(t,o),e.extrudedHeight,o),Fp.center=g.add(t,o,Fp.center),Fp.radius=i;const r=Ed.computeEllipsePositions(e,!0,!0),a=r.positions,s=r.numPts,c=r.outerPositions,l=Tt.union(Bp,Fp),u=Pp(a,e,!0);let h=jp(s);const d=h.length;h.length=2*d;const f=a.length/3;for(let g=0;g<d;g+=3)h[g+d]=h[g+2]+f,h[g+1+d]=h[g+1]+f,h[g+2+d]=h[g]+f;const p=ll.createTypedArray(2*f/3,h),m=new Fu({attributes:u,indices:p,primitiveType:Eu.TRIANGLES}),_=Mp(c,e);h=Np(c);const b=ll.createTypedArray(2*c.length/3,h),y=new Fu({attributes:_,indices:b,primitiveType:Eu.TRIANGLES}),v=mp.combineInstances([new Sd({geometry:m}),new Sd({geometry:y})]);return{boundingSphere:l,attributes:v[0].attributes,indices:v[0].indices}}function kp(e,t,n,i,o,r,a){const c=Ed.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0),l=c.outerPositions,u=l.length/3,h=new Array(u);for(let s=0;s<u;++s)h[s]=g.fromArray(l,3*s);const d=Fe.fromCartesianArray(h,r,a);return d.width>s["a"].PI&&(d.north=d.north>0?s["a"].PI_OVER_TWO-s["a"].EPSILON7:d.north,d.south=d.south<0?s["a"].EPSILON7-s["a"].PI_OVER_TWO:d.south,d.east=s["a"].PI,d.west=-s["a"].PI),d}function Up(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.center,n=Object(o["a"])(e.ellipsoid,k.WGS84),r=e.semiMajorAxis,c=e.semiMinorAxis,l=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),u=Object(o["a"])(e.vertexFormat,qu.DEFAULT);if(i["a"].defined("options.center",t),i["a"].typeOf.number("options.semiMajorAxis",r),i["a"].typeOf.number("options.semiMinorAxis",c),r<c)throw new a["a"]("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(l<=0)throw new a["a"]("granularity must be greater than zero.");const h=Object(o["a"])(e.height,0),d=Object(o["a"])(e.extrudedHeight,h);this._center=g.clone(t),this._semiMajorAxis=r,this._semiMinorAxis=c,this._ellipsoid=k.clone(n),this._rotation=Object(o["a"])(e.rotation,0),this._stRotation=Object(o["a"])(e.stRotation,0),this._height=Math.max(d,h),this._granularity=l,this._vertexFormat=qu.clone(u),this._extrudedHeight=Math.min(d,h),this._shadowVolume=Object(o["a"])(e.shadowVolume,!1),this._workerName="createEllipseGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}Up.packedLength=g.packedLength+k.packedLength+qu.packedLength+9,Up.pack=function(e,t,n){return i["a"].defined("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),g.pack(e._center,t,n),n+=g.packedLength,k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const Vp=new g,Hp=new k,Gp=new qu,Wp={center:Vp,ellipsoid:Hp,vertexFormat:Gp,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};function qp(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=Ed.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0),i=n.outerPositions,o=i.length/3,r=new Array(o);for(let c=0;c<o;++c)r[c]=g.fromArray(i,3*c);const a=e._ellipsoid,s=e.rectangle;return Fu._textureCoordinateRotationPoints(r,t,a,s)}Up.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=g.unpack(e,t,Vp);t+=g.packedLength;const s=k.unpack(e,t,Hp);t+=k.packedLength;const c=qu.unpack(e,t,Gp);t+=qu.packedLength;const l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t++],m=e[t++],_=1===e[t++],b=e[t];return Object(r["a"])(n)?(n._center=g.clone(a,n._center),n._ellipsoid=k.clone(s,n._ellipsoid),n._vertexFormat=qu.clone(c,n._vertexFormat),n._semiMajorAxis=l,n._semiMinorAxis=u,n._rotation=h,n._stRotation=d,n._height=f,n._granularity=p,n._extrudedHeight=m,n._shadowVolume=_,n._offsetAttribute=-1===b?void 0:b,n):(Wp.height=f,Wp.extrudedHeight=m,Wp.granularity=p,Wp.stRotation=d,Wp.rotation=h,Wp.semiMajorAxis=l,Wp.semiMinorAxis=u,Wp.shadowVolume=_,Wp.offsetAttribute=-1===b?void 0:b,new Up(Wp))},Up.computeRectangle=function(e,t){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const n=e.center,r=Object(o["a"])(e.ellipsoid,k.WGS84),c=e.semiMajorAxis,l=e.semiMinorAxis,u=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),h=Object(o["a"])(e.rotation,0);if(i["a"].defined("options.center",n),i["a"].typeOf.number("options.semiMajorAxis",c),i["a"].typeOf.number("options.semiMinorAxis",l),c<l)throw new a["a"]("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(u<=0)throw new a["a"]("granularity must be greater than zero.");return kp(n,c,l,h,u,r,t)},Up.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,i=!s["a"].equalsEpsilon(t,n,0,s["a"].EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation};let a;if(i)o.extrudedHeight=n,o.shadowVolume=e._shadowVolume,o.offsetAttribute=e._offsetAttribute,a=zp(o);else if(a=Lp(o),Object(r["a"])(e._offsetAttribute)){const t=a.attributes.position.values.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);a.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:a.attributes,indices:a.indices,primitiveType:Eu.TRIANGLES,boundingSphere:a.boundingSphere,offsetAttribute:e._offsetAttribute})},Up.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new Up({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:a,vertexFormat:qu.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(Up.prototype,{rectangle:{get:function(){return Object(r["a"])(this._rectangle)||(this._rectangle=kp(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return Object(r["a"])(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=qp(this)),this._textureCoordinateRotationPoints}}});var Yp=Up;function Xp(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.radius;i["a"].typeOf.number("radius",t);const n={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,vertexFormat:e.vertexFormat,stRotation:e.stRotation,shadowVolume:e.shadowVolume};this._ellipseGeometry=new Yp(n),this._workerName="createCircleGeometry"}Xp.packedLength=Yp.packedLength,Xp.pack=function(e,t,n){return i["a"].typeOf.object("value",e),Yp.pack(e._ellipseGeometry,t,n)};const Kp=new Yp({center:new g,semiMajorAxis:1,semiMinorAxis:1}),$p={center:new g,radius:void 0,ellipsoid:k.clone(k.UNIT_SPHERE),height:void 0,extrudedHeight:void 0,granularity:void 0,vertexFormat:new qu,stRotation:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0,shadowVolume:void 0};Xp.unpack=function(e,t,n){const i=Yp.unpack(e,t,Kp);return $p.center=g.clone(i._center,$p.center),$p.ellipsoid=k.clone(i._ellipsoid,$p.ellipsoid),$p.height=i._height,$p.extrudedHeight=i._extrudedHeight,$p.granularity=i._granularity,$p.vertexFormat=qu.clone(i._vertexFormat,$p.vertexFormat),$p.stRotation=i._stRotation,$p.shadowVolume=i._shadowVolume,Object(r["a"])(n)?($p.semiMajorAxis=i._semiMajorAxis,$p.semiMinorAxis=i._semiMinorAxis,n._ellipseGeometry=new Yp($p),n):($p.radius=i._semiMajorAxis,new Xp($p))},Xp.createGeometry=function(e){return Yp.createGeometry(e._ellipseGeometry)},Xp.createShadowVolume=function(e,t,n){const i=e._ellipseGeometry._granularity,o=e._ellipseGeometry._ellipsoid,r=t(i,o),a=n(i,o);return new Xp({center:e._ellipseGeometry._center,radius:e._ellipseGeometry._semiMajorAxis,ellipsoid:o,stRotation:e._ellipseGeometry._stRotation,granularity:i,extrudedHeight:r,height:a,vertexFormat:qu.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(Xp.prototype,{rectangle:{get:function(){return this._ellipseGeometry.rectangle}},textureCoordinateRotationPoints:{get:function(){return this._ellipseGeometry.textureCoordinateRotationPoints}}});var Jp=Xp;const Qp=new g;let Zp=new g;function em(e){const t=e.center;Zp=g.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,Zp),e.height,Zp),Zp=g.add(t,Zp,Zp);const n=new Tt(Zp,e.semiMajorAxis),i=Ed.computeEllipsePositions(e,!1,!0).outerPositions,o=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:Ed.raisePositionsToHeight(i,e,!1)})}),r=i.length/3,a=ll.createTypedArray(r,2*r);let s=0;for(let c=0;c<r;++c)a[s++]=c,a[s++]=(c+1)%r;return{boundingSphere:n,attributes:o,indices:a}}const tm=new Tt,nm=new Tt;function im(e){const t=e.center,n=e.ellipsoid,i=e.semiMajorAxis;let a=g.multiplyByScalar(n.geodeticSurfaceNormal(t,Qp),e.height,Qp);tm.center=g.add(t,a,tm.center),tm.radius=i,a=g.multiplyByScalar(n.geodeticSurfaceNormal(t,a),e.extrudedHeight,a),nm.center=g.add(t,a,nm.center),nm.radius=i;let c=Ed.computeEllipsePositions(e,!1,!0).outerPositions;const l=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:Ed.raisePositionsToHeight(c,e,!0)})});c=l.position.values;const u=Tt.union(tm,nm);let h=c.length/3;if(Object(r["a"])(e.offsetAttribute)){let t=new Uint8Array(h);if(e.offsetAttribute===Gu.TOP)t=t.fill(1,0,h/2);else{const n=e.offsetAttribute===Gu.NONE?0:1;t=t.fill(n)}l.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let d=Object(o["a"])(e.numberOfVerticalLines,16);d=s["a"].clamp(d,0,h/2);const f=ll.createTypedArray(h,2*h+2*d);h/=2;let p,m,_=0;for(p=0;p<h;++p)f[_++]=p,f[_++]=(p+1)%h,f[_++]=p+h,f[_++]=(p+1)%h+h;if(d>0){const e=Math.min(d,h);m=Math.round(h/e);const t=Math.min(m*d,h);for(p=0;p<t;p+=m)f[_++]=p,f[_++]=p+h}return{boundingSphere:u,attributes:l,indices:f}}function om(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.center,n=Object(o["a"])(e.ellipsoid,k.WGS84),i=e.semiMajorAxis,c=e.semiMinorAxis,l=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE);if(!Object(r["a"])(t))throw new a["a"]("center is required.");if(!Object(r["a"])(i))throw new a["a"]("semiMajorAxis is required.");if(!Object(r["a"])(c))throw new a["a"]("semiMinorAxis is required.");if(i<c)throw new a["a"]("semiMajorAxis must be greater than or equal to the semiMinorAxis.");if(l<=0)throw new a["a"]("granularity must be greater than zero.");const u=Object(o["a"])(e.height,0),h=Object(o["a"])(e.extrudedHeight,u);this._center=g.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=c,this._ellipsoid=k.clone(n),this._rotation=Object(o["a"])(e.rotation,0),this._height=Math.max(h,u),this._granularity=l,this._extrudedHeight=Math.min(h,u),this._numberOfVerticalLines=Math.max(Object(o["a"])(e.numberOfVerticalLines,16),0),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}om.packedLength=g.packedLength+k.packedLength+8,om.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),g.pack(e._center,t,n),n+=g.packedLength,k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const rm=new g,am=new k,sm={center:rm,ellipsoid:am,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};om.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");t=Object(o["a"])(t,0);const i=g.unpack(e,t,rm);t+=g.packedLength;const s=k.unpack(e,t,am);t+=k.packedLength;const c=e[t++],l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t++],m=e[t];return Object(r["a"])(n)?(n._center=g.clone(i,n._center),n._ellipsoid=k.clone(s,n._ellipsoid),n._semiMajorAxis=c,n._semiMinorAxis=l,n._rotation=u,n._height=h,n._granularity=d,n._extrudedHeight=f,n._numberOfVerticalLines=p,n._offsetAttribute=-1===m?void 0:m,n):(sm.height=h,sm.extrudedHeight=f,sm.granularity=d,sm.rotation=u,sm.semiMajorAxis=c,sm.semiMinorAxis=l,sm.numberOfVerticalLines=p,sm.offsetAttribute=-1===m?void 0:m,new om(sm))},om.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;const t=e._height,n=e._extrudedHeight,i=!s["a"].equalsEpsilon(t,n,0,s["a"].EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);const o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines};let a;if(i)o.extrudedHeight=n,o.offsetAttribute=e._offsetAttribute,a=im(o);else if(a=em(o),Object(r["a"])(e._offsetAttribute)){const t=a.attributes.position.values.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);a.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:a.attributes,indices:a.indices,primitiveType:Eu.LINES,boundingSphere:a.boundingSphere,offsetAttribute:e._offsetAttribute})};var cm=om;function lm(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.radius;i["a"].typeOf.number("radius",t);const n={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,numberOfVerticalLines:e.numberOfVerticalLines};this._ellipseGeometry=new cm(n),this._workerName="createCircleOutlineGeometry"}lm.packedLength=cm.packedLength,lm.pack=function(e,t,n){return i["a"].typeOf.object("value",e),cm.pack(e._ellipseGeometry,t,n)};const um=new cm({center:new g,semiMajorAxis:1,semiMinorAxis:1}),hm={center:new g,radius:void 0,ellipsoid:k.clone(k.UNIT_SPHERE),height:void 0,extrudedHeight:void 0,granularity:void 0,numberOfVerticalLines:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0};lm.unpack=function(e,t,n){const i=cm.unpack(e,t,um);return hm.center=g.clone(i._center,hm.center),hm.ellipsoid=k.clone(i._ellipsoid,hm.ellipsoid),hm.height=i._height,hm.extrudedHeight=i._extrudedHeight,hm.granularity=i._granularity,hm.numberOfVerticalLines=i._numberOfVerticalLines,Object(r["a"])(n)?(hm.semiMajorAxis=i._semiMajorAxis,hm.semiMinorAxis=i._semiMinorAxis,n._ellipseGeometry=new cm(hm),n):(hm.radius=i._semiMajorAxis,new lm(hm))},lm.createGeometry=function(e){return cm.createGeometry(e._ellipseGeometry)};var dm=lm;const fm={UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2};var pm=Object.freeze(fm);const mm={TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2};var _m=Object.freeze(mm);let gm;gm="undefined"!==typeof performance&&"function"===typeof performance.now&&isFinite(performance.now())?function(){return performance.now()}:function(){return Date.now()};var bm=gm;function ym(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=e.currentTime,n=e.startTime,i=e.stopTime;if(t=Object(r["a"])(t)?mo.clone(t):Object(r["a"])(n)?mo.clone(n):Object(r["a"])(i)?mo.addDays(i,-1,new mo):mo.now(),n=Object(r["a"])(n)?mo.clone(n):mo.clone(t),i=Object(r["a"])(i)?mo.clone(i):mo.addDays(n,1,new mo),mo.greaterThan(n,i))throw new a["a"]("startTime must come before stopTime.");this.startTime=n,this.stopTime=i,this.clockRange=Object(o["a"])(e.clockRange,pm.UNBOUNDED),this.canAnimate=Object(o["a"])(e.canAnimate,!0),this.onTick=new dn["a"],this.onStop=new dn["a"],this._currentTime=void 0,this._multiplier=void 0,this._clockStep=void 0,this._shouldAnimate=void 0,this._lastSystemTime=bm(),this.currentTime=t,this.multiplier=Object(o["a"])(e.multiplier,1),this.shouldAnimate=Object(o["a"])(e.shouldAnimate,!1),this.clockStep=Object(o["a"])(e.clockStep,_m.SYSTEM_CLOCK_MULTIPLIER)}Object.defineProperties(ym.prototype,{currentTime:{get:function(){return this._currentTime},set:function(e){mo.equals(this._currentTime,e)||(this._clockStep===_m.SYSTEM_CLOCK&&(this._clockStep=_m.SYSTEM_CLOCK_MULTIPLIER),this._currentTime=e)}},multiplier:{get:function(){return this._multiplier},set:function(e){this._multiplier!==e&&(this._clockStep===_m.SYSTEM_CLOCK&&(this._clockStep=_m.SYSTEM_CLOCK_MULTIPLIER),this._multiplier=e)}},clockStep:{get:function(){return this._clockStep},set:function(e){e===_m.SYSTEM_CLOCK&&(this._multiplier=1,this._shouldAnimate=!0,this._currentTime=mo.now()),this._clockStep=e}},shouldAnimate:{get:function(){return this._shouldAnimate},set:function(e){this._shouldAnimate!==e&&(this._clockStep===_m.SYSTEM_CLOCK&&(this._clockStep=_m.SYSTEM_CLOCK_MULTIPLIER),this._shouldAnimate=e)}}}),ym.prototype.tick=function(){const e=bm();let t=mo.clone(this._currentTime);if(this.canAnimate&&this._shouldAnimate){const n=this._clockStep;if(n===_m.SYSTEM_CLOCK)t=mo.now(t);else{const i=this._multiplier;if(n===_m.TICK_DEPENDENT)t=mo.addSeconds(t,i,t);else{const n=e-this._lastSystemTime;t=mo.addSeconds(t,i*(n/1e3),t)}const o=this.clockRange,r=this.startTime,a=this.stopTime;if(o===pm.CLAMPED)mo.lessThan(t,r)?t=mo.clone(r,t):mo.greaterThan(t,a)&&(t=mo.clone(a,t),this.onStop.raiseEvent(this));else if(o===pm.LOOP_STOP){mo.lessThan(t,r)&&(t=mo.clone(r,t));while(mo.greaterThan(t,a))t=mo.addSeconds(r,mo.secondsDifference(t,a),t),this.onStop.raiseEvent(this)}}}return this._currentTime=t,this._lastSystemTime=e,this.onTick.raiseEvent(this),t};var vm=ym;function Om(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Am(e,t,n,i){this.red=Object(o["a"])(e,1),this.green=Object(o["a"])(t,1),this.blue=Object(o["a"])(n,1),this.alpha=Object(o["a"])(i,1)}let wm,Tm,Cm;Am.fromCartesian4=function(e,t){return i["a"].typeOf.object("cartesian",e),Object(r["a"])(t)?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new Am(e.x,e.y,e.z,e.w)},Am.fromBytes=function(e,t,n,i,a){return e=Am.byteToFloat(Object(o["a"])(e,255)),t=Am.byteToFloat(Object(o["a"])(t,255)),n=Am.byteToFloat(Object(o["a"])(n,255)),i=Am.byteToFloat(Object(o["a"])(i,255)),Object(r["a"])(a)?(a.red=e,a.green=t,a.blue=n,a.alpha=i,a):new Am(e,t,n,i)},Am.fromAlpha=function(e,t,n){return i["a"].typeOf.object("color",e),i["a"].typeOf.number("alpha",t),Object(r["a"])(n)?(n.red=e.red,n.green=e.green,n.blue=e.blue,n.alpha=t,n):new Am(e.red,e.green,e.blue,t)},Or.supportsTypedArrays()&&(wm=new ArrayBuffer(4),Tm=new Uint32Array(wm),Cm=new Uint8Array(wm)),Am.fromRgba=function(e,t){return Tm[0]=e,Am.fromBytes(Cm[0],Cm[1],Cm[2],Cm[3],t)},Am.fromHsl=function(e,t,n,i,a){e=Object(o["a"])(e,0)%1,t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),i=Object(o["a"])(i,1);let s=n,c=n,l=n;if(0!==t){let i;i=n<.5?n*(1+t):n+t-n*t;const o=2*n-i;s=Om(o,i,e+1/3),c=Om(o,i,e),l=Om(o,i,e-1/3)}return Object(r["a"])(a)?(a.red=s,a.green=c,a.blue=l,a.alpha=i,a):new Am(s,c,l,i)},Am.fromRandom=function(e,t){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let n=e.red;if(!Object(r["a"])(n)){const t=Object(o["a"])(e.minimumRed,0),r=Object(o["a"])(e.maximumRed,1);i["a"].typeOf.number.lessThanOrEquals("minimumRed",t,r),n=t+s["a"].nextRandomNumber()*(r-t)}let a=e.green;if(!Object(r["a"])(a)){const t=Object(o["a"])(e.minimumGreen,0),n=Object(o["a"])(e.maximumGreen,1);i["a"].typeOf.number.lessThanOrEquals("minimumGreen",t,n),a=t+s["a"].nextRandomNumber()*(n-t)}let c=e.blue;if(!Object(r["a"])(c)){const t=Object(o["a"])(e.minimumBlue,0),n=Object(o["a"])(e.maximumBlue,1);i["a"].typeOf.number.lessThanOrEquals("minimumBlue",t,n),c=t+s["a"].nextRandomNumber()*(n-t)}let l=e.alpha;if(!Object(r["a"])(l)){const t=Object(o["a"])(e.minimumAlpha,0),n=Object(o["a"])(e.maximumAlpha,1);i["a"].typeOf.number.lessThanOrEquals("minumumAlpha",t,n),l=t+s["a"].nextRandomNumber()*(n-t)}return Object(r["a"])(t)?(t.red=n,t.green=a,t.blue=c,t.alpha=l,t):new Am(n,a,c,l)};const Em=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,xm=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,Sm=/^rgba?\(\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)\s*,\s*([0-9.]+%?)(?:\s*,\s*([0-9.]+))?\s*\)$/i,Im=/^hsla?\(\s*([0-9.]+)\s*,\s*([0-9.]+%)\s*,\s*([0-9.]+%)(?:\s*,\s*([0-9.]+))?\s*\)$/i;Am.fromCssColorString=function(e,t){i["a"].typeOf.string("color",e),Object(r["a"])(t)||(t=new Am),e=e.replace(/\s/g,"");const n=Am[e.toUpperCase()];if(Object(r["a"])(n))return Am.clone(n,t),t;let a=Em.exec(e);return null!==a?(t.red=parseInt(a[1],16)/15,t.green=parseInt(a[2],16)/15,t.blue=parseInt(a[3],16)/15,t.alpha=parseInt(Object(o["a"])(a[4],"f"),16)/15,t):(a=xm.exec(e),null!==a?(t.red=parseInt(a[1],16)/255,t.green=parseInt(a[2],16)/255,t.blue=parseInt(a[3],16)/255,t.alpha=parseInt(Object(o["a"])(a[4],"ff"),16)/255,t):(a=Sm.exec(e),null!==a?(t.red=parseFloat(a[1])/("%"===a[1].substr(-1)?100:255),t.green=parseFloat(a[2])/("%"===a[2].substr(-1)?100:255),t.blue=parseFloat(a[3])/("%"===a[3].substr(-1)?100:255),t.alpha=parseFloat(Object(o["a"])(a[4],"1.0")),t):(a=Im.exec(e),null!==a?Am.fromHsl(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,parseFloat(Object(o["a"])(a[4],"1.0")),t):(t=void 0,t))))},Am.packedLength=4,Am.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.red,t[n++]=e.green,t[n++]=e.blue,t[n]=e.alpha,t},Am.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new Am),n.red=e[t++],n.green=e[t++],n.blue=e[t++],n.alpha=e[t],n},Am.byteToFloat=function(e){return e/255},Am.floatToByte=function(e){return 1===e?255:256*e|0},Am.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new Am(e.red,e.green,e.blue,e.alpha)},Am.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha},Am.equalsArray=function(e,t,n){return e.red===t[n]&&e.green===t[n+1]&&e.blue===t[n+2]&&e.alpha===t[n+3]},Am.prototype.clone=function(e){return Am.clone(this,e)},Am.prototype.equals=function(e){return Am.equals(this,e)},Am.prototype.equalsEpsilon=function(e,t){return this===e||Object(r["a"])(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},Am.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`},Am.prototype.toCssColorString=function(){const e=Am.floatToByte(this.red),t=Am.floatToByte(this.green),n=Am.floatToByte(this.blue);return 1===this.alpha?`rgb(${e},${t},${n})`:`rgba(${e},${t},${n},${this.alpha})`},Am.prototype.toCssHexString=function(){let e=Am.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=Am.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let n=Am.floatToByte(this.blue).toString(16);if(n.length<2&&(n=`0${n}`),this.alpha<1){let i=Am.floatToByte(this.alpha).toString(16);return i.length<2&&(i=`0${i}`),`#${e}${t}${n}${i}`}return`#${e}${t}${n}`},Am.prototype.toBytes=function(e){const t=Am.floatToByte(this.red),n=Am.floatToByte(this.green),i=Am.floatToByte(this.blue),o=Am.floatToByte(this.alpha);return Object(r["a"])(e)?(e[0]=t,e[1]=n,e[2]=i,e[3]=o,e):[t,n,i,o]},Am.prototype.toRgba=function(){return Cm[0]=Am.floatToByte(this.red),Cm[1]=Am.floatToByte(this.green),Cm[2]=Am.floatToByte(this.blue),Cm[3]=Am.floatToByte(this.alpha),Tm[0]},Am.prototype.brighten=function(e,t){return i["a"].typeOf.number("magnitude",e),i["a"].typeOf.number.greaterThanOrEquals("magnitude",e,0),i["a"].typeOf.object("result",t),e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},Am.prototype.darken=function(e,t){return i["a"].typeOf.number("magnitude",e),i["a"].typeOf.number.greaterThanOrEquals("magnitude",e,0),i["a"].typeOf.object("result",t),e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},Am.prototype.withAlpha=function(e,t){return Am.fromAlpha(this,e,t)},Am.add=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.red=e.red+t.red,n.green=e.green+t.green,n.blue=e.blue+t.blue,n.alpha=e.alpha+t.alpha,n},Am.subtract=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.red=e.red-t.red,n.green=e.green-t.green,n.blue=e.blue-t.blue,n.alpha=e.alpha-t.alpha,n},Am.multiply=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.red=e.red*t.red,n.green=e.green*t.green,n.blue=e.blue*t.blue,n.alpha=e.alpha*t.alpha,n},Am.divide=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.red=e.red/t.red,n.green=e.green/t.green,n.blue=e.blue/t.blue,n.alpha=e.alpha/t.alpha,n},Am.mod=function(e,t,n){return i["a"].typeOf.object("left",e),i["a"].typeOf.object("right",t),i["a"].typeOf.object("result",n),n.red=e.red%t.red,n.green=e.green%t.green,n.blue=e.blue%t.blue,n.alpha=e.alpha%t.alpha,n},Am.lerp=function(e,t,n,o){return i["a"].typeOf.object("start",e),i["a"].typeOf.object("end",t),i["a"].typeOf.number("t",n),i["a"].typeOf.object("result",o),o.red=s["a"].lerp(e.red,t.red,n),o.green=s["a"].lerp(e.green,t.green,n),o.blue=s["a"].lerp(e.blue,t.blue,n),o.alpha=s["a"].lerp(e.alpha,t.alpha,n),o},Am.multiplyByScalar=function(e,t,n){return i["a"].typeOf.object("color",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.red=e.red*t,n.green=e.green*t,n.blue=e.blue*t,n.alpha=e.alpha*t,n},Am.divideByScalar=function(e,t,n){return i["a"].typeOf.object("color",e),i["a"].typeOf.number("scalar",t),i["a"].typeOf.object("result",n),n.red=e.red/t,n.green=e.green/t,n.blue=e.blue/t,n.alpha=e.alpha/t,n},Am.ALICEBLUE=Object.freeze(Am.fromCssColorString("#F0F8FF")),Am.ANTIQUEWHITE=Object.freeze(Am.fromCssColorString("#FAEBD7")),Am.AQUA=Object.freeze(Am.fromCssColorString("#00FFFF")),Am.AQUAMARINE=Object.freeze(Am.fromCssColorString("#7FFFD4")),Am.AZURE=Object.freeze(Am.fromCssColorString("#F0FFFF")),Am.BEIGE=Object.freeze(Am.fromCssColorString("#F5F5DC")),Am.BISQUE=Object.freeze(Am.fromCssColorString("#FFE4C4")),Am.BLACK=Object.freeze(Am.fromCssColorString("#000000")),Am.BLANCHEDALMOND=Object.freeze(Am.fromCssColorString("#FFEBCD")),Am.BLUE=Object.freeze(Am.fromCssColorString("#0000FF")),Am.BLUEVIOLET=Object.freeze(Am.fromCssColorString("#8A2BE2")),Am.BROWN=Object.freeze(Am.fromCssColorString("#A52A2A")),Am.BURLYWOOD=Object.freeze(Am.fromCssColorString("#DEB887")),Am.CADETBLUE=Object.freeze(Am.fromCssColorString("#5F9EA0")),Am.CHARTREUSE=Object.freeze(Am.fromCssColorString("#7FFF00")),Am.CHOCOLATE=Object.freeze(Am.fromCssColorString("#D2691E")),Am.CORAL=Object.freeze(Am.fromCssColorString("#FF7F50")),Am.CORNFLOWERBLUE=Object.freeze(Am.fromCssColorString("#6495ED")),Am.CORNSILK=Object.freeze(Am.fromCssColorString("#FFF8DC")),Am.CRIMSON=Object.freeze(Am.fromCssColorString("#DC143C")),Am.CYAN=Object.freeze(Am.fromCssColorString("#00FFFF")),Am.DARKBLUE=Object.freeze(Am.fromCssColorString("#00008B")),Am.DARKCYAN=Object.freeze(Am.fromCssColorString("#008B8B")),Am.DARKGOLDENROD=Object.freeze(Am.fromCssColorString("#B8860B")),Am.DARKGRAY=Object.freeze(Am.fromCssColorString("#A9A9A9")),Am.DARKGREEN=Object.freeze(Am.fromCssColorString("#006400")),Am.DARKGREY=Am.DARKGRAY,Am.DARKKHAKI=Object.freeze(Am.fromCssColorString("#BDB76B")),Am.DARKMAGENTA=Object.freeze(Am.fromCssColorString("#8B008B")),Am.DARKOLIVEGREEN=Object.freeze(Am.fromCssColorString("#556B2F")),Am.DARKORANGE=Object.freeze(Am.fromCssColorString("#FF8C00")),Am.DARKORCHID=Object.freeze(Am.fromCssColorString("#9932CC")),Am.DARKRED=Object.freeze(Am.fromCssColorString("#8B0000")),Am.DARKSALMON=Object.freeze(Am.fromCssColorString("#E9967A")),Am.DARKSEAGREEN=Object.freeze(Am.fromCssColorString("#8FBC8F")),Am.DARKSLATEBLUE=Object.freeze(Am.fromCssColorString("#483D8B")),Am.DARKSLATEGRAY=Object.freeze(Am.fromCssColorString("#2F4F4F")),Am.DARKSLATEGREY=Am.DARKSLATEGRAY,Am.DARKTURQUOISE=Object.freeze(Am.fromCssColorString("#00CED1")),Am.DARKVIOLET=Object.freeze(Am.fromCssColorString("#9400D3")),Am.DEEPPINK=Object.freeze(Am.fromCssColorString("#FF1493")),Am.DEEPSKYBLUE=Object.freeze(Am.fromCssColorString("#00BFFF")),Am.DIMGRAY=Object.freeze(Am.fromCssColorString("#696969")),Am.DIMGREY=Am.DIMGRAY,Am.DODGERBLUE=Object.freeze(Am.fromCssColorString("#1E90FF")),Am.FIREBRICK=Object.freeze(Am.fromCssColorString("#B22222")),Am.FLORALWHITE=Object.freeze(Am.fromCssColorString("#FFFAF0")),Am.FORESTGREEN=Object.freeze(Am.fromCssColorString("#228B22")),Am.FUCHSIA=Object.freeze(Am.fromCssColorString("#FF00FF")),Am.GAINSBORO=Object.freeze(Am.fromCssColorString("#DCDCDC")),Am.GHOSTWHITE=Object.freeze(Am.fromCssColorString("#F8F8FF")),Am.GOLD=Object.freeze(Am.fromCssColorString("#FFD700")),Am.GOLDENROD=Object.freeze(Am.fromCssColorString("#DAA520")),Am.GRAY=Object.freeze(Am.fromCssColorString("#808080")),Am.GREEN=Object.freeze(Am.fromCssColorString("#008000")),Am.GREENYELLOW=Object.freeze(Am.fromCssColorString("#ADFF2F")),Am.GREY=Am.GRAY,Am.HONEYDEW=Object.freeze(Am.fromCssColorString("#F0FFF0")),Am.HOTPINK=Object.freeze(Am.fromCssColorString("#FF69B4")),Am.INDIANRED=Object.freeze(Am.fromCssColorString("#CD5C5C")),Am.INDIGO=Object.freeze(Am.fromCssColorString("#4B0082")),Am.IVORY=Object.freeze(Am.fromCssColorString("#FFFFF0")),Am.KHAKI=Object.freeze(Am.fromCssColorString("#F0E68C")),Am.LAVENDER=Object.freeze(Am.fromCssColorString("#E6E6FA")),Am.LAVENDAR_BLUSH=Object.freeze(Am.fromCssColorString("#FFF0F5")),Am.LAWNGREEN=Object.freeze(Am.fromCssColorString("#7CFC00")),Am.LEMONCHIFFON=Object.freeze(Am.fromCssColorString("#FFFACD")),Am.LIGHTBLUE=Object.freeze(Am.fromCssColorString("#ADD8E6")),Am.LIGHTCORAL=Object.freeze(Am.fromCssColorString("#F08080")),Am.LIGHTCYAN=Object.freeze(Am.fromCssColorString("#E0FFFF")),Am.LIGHTGOLDENRODYELLOW=Object.freeze(Am.fromCssColorString("#FAFAD2")),Am.LIGHTGRAY=Object.freeze(Am.fromCssColorString("#D3D3D3")),Am.LIGHTGREEN=Object.freeze(Am.fromCssColorString("#90EE90")),Am.LIGHTGREY=Am.LIGHTGRAY,Am.LIGHTPINK=Object.freeze(Am.fromCssColorString("#FFB6C1")),Am.LIGHTSEAGREEN=Object.freeze(Am.fromCssColorString("#20B2AA")),Am.LIGHTSKYBLUE=Object.freeze(Am.fromCssColorString("#87CEFA")),Am.LIGHTSLATEGRAY=Object.freeze(Am.fromCssColorString("#778899")),Am.LIGHTSLATEGREY=Am.LIGHTSLATEGRAY,Am.LIGHTSTEELBLUE=Object.freeze(Am.fromCssColorString("#B0C4DE")),Am.LIGHTYELLOW=Object.freeze(Am.fromCssColorString("#FFFFE0")),Am.LIME=Object.freeze(Am.fromCssColorString("#00FF00")),Am.LIMEGREEN=Object.freeze(Am.fromCssColorString("#32CD32")),Am.LINEN=Object.freeze(Am.fromCssColorString("#FAF0E6")),Am.MAGENTA=Object.freeze(Am.fromCssColorString("#FF00FF")),Am.MAROON=Object.freeze(Am.fromCssColorString("#800000")),Am.MEDIUMAQUAMARINE=Object.freeze(Am.fromCssColorString("#66CDAA")),Am.MEDIUMBLUE=Object.freeze(Am.fromCssColorString("#0000CD")),Am.MEDIUMORCHID=Object.freeze(Am.fromCssColorString("#BA55D3")),Am.MEDIUMPURPLE=Object.freeze(Am.fromCssColorString("#9370DB")),Am.MEDIUMSEAGREEN=Object.freeze(Am.fromCssColorString("#3CB371")),Am.MEDIUMSLATEBLUE=Object.freeze(Am.fromCssColorString("#7B68EE")),Am.MEDIUMSPRINGGREEN=Object.freeze(Am.fromCssColorString("#00FA9A")),Am.MEDIUMTURQUOISE=Object.freeze(Am.fromCssColorString("#48D1CC")),Am.MEDIUMVIOLETRED=Object.freeze(Am.fromCssColorString("#C71585")),Am.MIDNIGHTBLUE=Object.freeze(Am.fromCssColorString("#191970")),Am.MINTCREAM=Object.freeze(Am.fromCssColorString("#F5FFFA")),Am.MISTYROSE=Object.freeze(Am.fromCssColorString("#FFE4E1")),Am.MOCCASIN=Object.freeze(Am.fromCssColorString("#FFE4B5")),Am.NAVAJOWHITE=Object.freeze(Am.fromCssColorString("#FFDEAD")),Am.NAVY=Object.freeze(Am.fromCssColorString("#000080")),Am.OLDLACE=Object.freeze(Am.fromCssColorString("#FDF5E6")),Am.OLIVE=Object.freeze(Am.fromCssColorString("#808000")),Am.OLIVEDRAB=Object.freeze(Am.fromCssColorString("#6B8E23")),Am.ORANGE=Object.freeze(Am.fromCssColorString("#FFA500")),Am.ORANGERED=Object.freeze(Am.fromCssColorString("#FF4500")),Am.ORCHID=Object.freeze(Am.fromCssColorString("#DA70D6")),Am.PALEGOLDENROD=Object.freeze(Am.fromCssColorString("#EEE8AA")),Am.PALEGREEN=Object.freeze(Am.fromCssColorString("#98FB98")),Am.PALETURQUOISE=Object.freeze(Am.fromCssColorString("#AFEEEE")),Am.PALEVIOLETRED=Object.freeze(Am.fromCssColorString("#DB7093")),Am.PAPAYAWHIP=Object.freeze(Am.fromCssColorString("#FFEFD5")),Am.PEACHPUFF=Object.freeze(Am.fromCssColorString("#FFDAB9")),Am.PERU=Object.freeze(Am.fromCssColorString("#CD853F")),Am.PINK=Object.freeze(Am.fromCssColorString("#FFC0CB")),Am.PLUM=Object.freeze(Am.fromCssColorString("#DDA0DD")),Am.POWDERBLUE=Object.freeze(Am.fromCssColorString("#B0E0E6")),Am.PURPLE=Object.freeze(Am.fromCssColorString("#800080")),Am.RED=Object.freeze(Am.fromCssColorString("#FF0000")),Am.ROSYBROWN=Object.freeze(Am.fromCssColorString("#BC8F8F")),Am.ROYALBLUE=Object.freeze(Am.fromCssColorString("#4169E1")),Am.SADDLEBROWN=Object.freeze(Am.fromCssColorString("#8B4513")),Am.SALMON=Object.freeze(Am.fromCssColorString("#FA8072")),Am.SANDYBROWN=Object.freeze(Am.fromCssColorString("#F4A460")),Am.SEAGREEN=Object.freeze(Am.fromCssColorString("#2E8B57")),Am.SEASHELL=Object.freeze(Am.fromCssColorString("#FFF5EE")),Am.SIENNA=Object.freeze(Am.fromCssColorString("#A0522D")),Am.SILVER=Object.freeze(Am.fromCssColorString("#C0C0C0")),Am.SKYBLUE=Object.freeze(Am.fromCssColorString("#87CEEB")),Am.SLATEBLUE=Object.freeze(Am.fromCssColorString("#6A5ACD")),Am.SLATEGRAY=Object.freeze(Am.fromCssColorString("#708090")),Am.SLATEGREY=Am.SLATEGRAY,Am.SNOW=Object.freeze(Am.fromCssColorString("#FFFAFA")),Am.SPRINGGREEN=Object.freeze(Am.fromCssColorString("#00FF7F")),Am.STEELBLUE=Object.freeze(Am.fromCssColorString("#4682B4")),Am.TAN=Object.freeze(Am.fromCssColorString("#D2B48C")),Am.TEAL=Object.freeze(Am.fromCssColorString("#008080")),Am.THISTLE=Object.freeze(Am.fromCssColorString("#D8BFD8")),Am.TOMATO=Object.freeze(Am.fromCssColorString("#FF6347")),Am.TURQUOISE=Object.freeze(Am.fromCssColorString("#40E0D0")),Am.VIOLET=Object.freeze(Am.fromCssColorString("#EE82EE")),Am.WHEAT=Object.freeze(Am.fromCssColorString("#F5DEB3")),Am.WHITE=Object.freeze(Am.fromCssColorString("#FFFFFF")),Am.WHITESMOKE=Object.freeze(Am.fromCssColorString("#F5F5F5")),Am.YELLOW=Object.freeze(Am.fromCssColorString("#FFFF00")),Am.YELLOWGREEN=Object.freeze(Am.fromCssColorString("#9ACD32")),Am.TRANSPARENT=Object.freeze(new Am(0,0,0,0));var Dm=Am;function Pm(e,t,n,i){e=Object(o["a"])(e,1),t=Object(o["a"])(t,1),n=Object(o["a"])(n,1),i=Object(o["a"])(i,1),this.value=new Uint8Array([Dm.floatToByte(e),Dm.floatToByte(t),Dm.floatToByte(n),Dm.floatToByte(i)])}Object.defineProperties(Pm.prototype,{componentDatatype:{get:function(){return Ks.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 4}},normalize:{get:function(){return!0}}}),Pm.fromColor=function(e){if(!Object(r["a"])(e))throw new a["a"]("color is required.");return new Pm(e.red,e.green,e.blue,e.alpha)},Pm.toValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("color is required.");return Object(r["a"])(t)?e.toBytes(t):new Uint8Array(e.toBytes())},Pm.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.value[0]===t.value[0]&&e.value[1]===t.value[1]&&e.value[2]===t.value[2]&&e.value[3]===t.value[3]};var jm=Pm;function Rm(e,t,n,i,o){this._format=e,this._datatype=t,this._width=n,this._height=i,this._buffer=o}Object.defineProperties(Rm.prototype,{internalFormat:{get:function(){return this._format}},pixelDatatype:{get:function(){return this._datatype}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},bufferView:{get:function(){return this._buffer}}}),Rm.clone=function(e){if(Object(r["a"])(e))return new Rm(e._format,e._datatype,e._width,e._height,e._buffer)},Rm.prototype.clone=function(){return Rm.clone(this)};var Lm=Rm;function Mm(e){this._value=e,this._valueType=uh.getPointType(e)}Object.defineProperties(Mm.prototype,{value:{get:function(){return this._value}}}),Mm.prototype.findTimeInterval=function(e){throw new a["a"]("findTimeInterval cannot be called on a ConstantSpline.")},Mm.prototype.wrapTime=function(e){return i["a"].typeOf.number("time",e),0},Mm.prototype.clampTime=function(e){return i["a"].typeOf.number("time",e),0},Mm.prototype.evaluate=function(e,t){i["a"].typeOf.number("time",e);const n=this._value,o=this._valueType;return o===Number?n:o.clone(n,t)};var Nm=Mm;const Bm=s["a"].EPSILON10;function Fm(e,t,n,a){if(i["a"].defined("equalsEpsilon",t),!Object(r["a"])(e))return;n=Object(o["a"])(n,!1);const s=Object(r["a"])(a),c=e.length;if(c<2)return e;let l,u,h,d=e[0],f=0,p=-1;for(l=1;l<c;++l)u=e[l],t(d,u,Bm)?(Object(r["a"])(h)||(h=e.slice(0,l),f=l-1,p=0),s&&a.push(l)):(Object(r["a"])(h)&&(h.push(u),f=l,s&&(p=a.length)),d=u);return n&&t(e[0],e[c-1],Bm)&&(s&&(Object(r["a"])(h)?a.splice(p,0,f):a.push(c-1)),Object(r["a"])(h)?h.length-=1:h=e.slice(0,-1)),Object(r["a"])(h)?h:e}var zm=Fm;const km={},Um=new g,Vm=new g,Hm=new g,Gm=new g,Wm=new Ws;function qm(e,t,n,i,o){const r=g.subtract(e,t,Um),a=g.dot(n,r),s=g.dot(i,r);return Gt.fromElements(a,s,o)}km.validOutline=function(e){i["a"].defined("positions",e);const t=Ws.fromPoints(e,Wm),n=t.halfAxes,o=ce.getColumn(n,0,Vm),r=ce.getColumn(n,1,Hm),a=ce.getColumn(n,2,Gm),s=g.magnitude(o),c=g.magnitude(r),l=g.magnitude(a);return!(0===s&&(0===c||0===l)||0===c&&0===l)},km.computeProjectTo2DArguments=function(e,t,n,o){i["a"].defined("positions",e),i["a"].defined("centerResult",t),i["a"].defined("planeAxis1Result",n),i["a"].defined("planeAxis2Result",o);const r=Ws.fromPoints(e,Wm),a=r.halfAxes,s=ce.getColumn(a,0,Vm),c=ce.getColumn(a,1,Hm),l=ce.getColumn(a,2,Gm),u=g.magnitude(s),h=g.magnitude(c),d=g.magnitude(l),f=Math.min(u,h,d);if(0===u&&(0===h||0===d)||0===h&&0===d)return!1;let p,m;return f!==h&&f!==d||(p=s),f===u?p=c:f===d&&(m=c),f!==u&&f!==h||(m=l),g.normalize(p,n),g.normalize(m,o),g.clone(r.center,t),!0},km.createProjectPointsTo2DFunction=function(e,t,n){return function(i){const o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=qm(i[r],e,t,n);return o}},km.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return qm(i,e,t,n,o)}};var Ym=km;function Xm(e,t,n){if(0===e)return t*n;const i=e*e,o=i*i,r=o*i,a=r*i,s=a*i,c=s*i,l=n,u=Math.sin(2*l),h=Math.sin(4*l),d=Math.sin(6*l),f=Math.sin(8*l),p=Math.sin(10*l),m=Math.sin(12*l);return t*((1-i/4-3*o/64-5*r/256-175*a/16384-441*s/65536-4851*c/1048576)*l-(3*i/8+3*o/32+45*r/1024+105*a/4096+2205*s/131072+6237*c/524288)*u+(15*o/256+45*r/1024+525*a/16384+1575*s/65536+155925*c/8388608)*h-(35*r/3072+175*a/12288+3675*s/262144+13475*c/1048576)*d+(315*a/131072+2205*s/524288+43659*c/8388608)*f-(693*s/1310720+6237*c/5242880)*p+1001*c/8388608*m)}function Km(e,t,n){const i=e/n;if(0===t)return i;const o=i*i,r=o*i,a=r*i,s=t,c=s*s,l=c*c,u=l*c,h=u*c,d=h*c,f=d*c,p=Math.sin(2*i),m=Math.cos(2*i),_=Math.sin(4*i),g=Math.cos(4*i),b=Math.sin(6*i),y=Math.cos(6*i),v=Math.sin(8*i),O=Math.cos(8*i),A=Math.sin(10*i),w=Math.cos(10*i),T=Math.sin(12*i);return i+i*c/4+7*i*l/64+15*i*u/256+579*i*h/16384+1515*i*d/65536+16837*i*f/1048576+(3*i*l/16+45*i*u/256-i*(32*o-561)*h/4096-i*(232*o-1677)*d/16384+i*(399985-90560*o+512*a)*f/5242880)*m+(21*i*u/256+483*i*h/4096-i*(224*o-1969)*d/16384-i*(33152*o-112599)*f/1048576)*g+(151*i*h/4096+4681*i*d/65536+1479*i*f/16384-453*r*f/32768)*y+(1097*i*d/65536+42783*i*f/1048576)*O+8011*i*f/1048576*w+(3*c/8+3*l/16+213*u/2048-3*o*u/64+255*h/4096-33*o*h/512+20861*d/524288-33*o*d/512+a*d/1024+28273*f/1048576-471*o*f/8192+9*a*f/4096)*p+(21*l/256+21*u/256+533*h/8192-21*o*h/512+197*d/4096-315*o*d/4096+584039*f/16777216-12517*o*f/131072+7*a*f/2048)*_+(151*u/6144+151*h/4096+5019*d/131072-453*o*d/16384+26965*f/786432-8607*o*f/131072)*b+(1097*h/131072+1097*d/65536+225797*f/10485760-1097*o*f/65536)*v+(8011*d/2621440+8011*f/1048576)*A+293393*f/251658240*T}function $m(e,t){if(0===e)return Math.log(Math.tan(.5*(s["a"].PI_OVER_TWO+t)));const n=e*Math.sin(t);return Math.log(Math.tan(.5*(s["a"].PI_OVER_TWO+t)))-e/2*Math.log((1+n)/(1-n))}function Jm(e,t,n,i,o){const r=$m(e._ellipticity,n),a=$m(e._ellipticity,o);return Math.atan2(s["a"].negativePiToPi(i-t),a-r)}function Qm(e,t,n,i,o,r,a){const c=e._heading,l=r-i;let u=0;if(s["a"].equalsEpsilon(Math.abs(c),s["a"].PI_OVER_TWO,s["a"].EPSILON8))if(t===n)u=t*Math.cos(o)*s["a"].negativePiToPi(l);else{const n=Math.sin(o);u=t*Math.cos(o)*s["a"].negativePiToPi(l)/Math.sqrt(1-e._ellipticitySquared*n*n)}else{const n=Xm(e._ellipticity,t,o),i=Xm(e._ellipticity,t,a);u=(i-n)/Math.cos(c)}return Math.abs(u)}const Zm=new g,e_=new g;function t_(e,t,n,o){const r=g.normalize(o.cartographicToCartesian(t,e_),Zm),a=g.normalize(o.cartographicToCartesian(n,e_),e_);i["a"].typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(g.angleBetween(r,a))-Math.PI),.0125);const s=o.maximumRadius,c=o.minimumRadius,l=s*s,u=c*c;e._ellipticitySquared=(l-u)/l,e._ellipticity=Math.sqrt(e._ellipticitySquared),e._start=I.clone(t,e._start),e._start.height=0,e._end=I.clone(n,e._end),e._end.height=0,e._heading=Jm(e,t.longitude,t.latitude,n.longitude,n.latitude),e._distance=Qm(e,o.maximumRadius,o.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude)}function n_(e,t,n,i,o,a){if(0===n)return I.clone(e,a);const c=o*o;let l,u,h;if(Math.abs(s["a"].PI_OVER_TWO-Math.abs(t))>s["a"].EPSILON8){const r=Xm(o,i,e.latitude),a=n*Math.cos(t),c=r+a;u=Km(c,o,i);const d=$m(o,e.latitude),f=$m(o,u);h=Math.tan(t)*(f-d),l=s["a"].negativePiToPi(e.longitude+h)}else{let r;if(u=e.latitude,0===o)r=i*Math.cos(e.latitude);else{const t=Math.sin(e.latitude);r=i*Math.cos(e.latitude)/Math.sqrt(1-c*t*t)}h=n/r,l=t>0?s["a"].negativePiToPi(e.longitude+h):s["a"].negativePiToPi(e.longitude-h)}return Object(r["a"])(a)?(a.longitude=l,a.latitude=u,a.height=0,a):new I(l,u,0)}function i_(e,t,n){const i=Object(o["a"])(n,k.WGS84);this._ellipsoid=i,this._start=new I,this._end=new I,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,Object(r["a"])(e)&&Object(r["a"])(t)&&t_(this,e,t,i)}Object.defineProperties(i_.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return i["a"].defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return i["a"].defined("distance",this._distance),this._heading}}}),i_.fromStartHeadingDistance=function(e,t,n,a,c){i["a"].defined("start",e),i["a"].defined("heading",t),i["a"].defined("distance",n),i["a"].typeOf.number.greaterThan("distance",n,0);const l=Object(o["a"])(a,k.WGS84),u=l.maximumRadius,h=l.minimumRadius,d=u*u,f=h*h,p=Math.sqrt((d-f)/d);t=s["a"].negativePiToPi(t);const m=n_(e,t,n,l.maximumRadius,p);return!Object(r["a"])(c)||Object(r["a"])(a)&&!a.equals(c.ellipsoid)?new i_(e,m,l):(c.setEndPoints(e,m),c)},i_.prototype.setEndPoints=function(e,t){i["a"].defined("start",e),i["a"].defined("end",t),t_(this,e,t,this._ellipsoid)},i_.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(e*this._distance,t)},i_.prototype.interpolateUsingSurfaceDistance=function(e,t){if(i["a"].typeOf.number("distance",e),!Object(r["a"])(this._distance)||0===this._distance)throw new a["a"]("EllipsoidRhumbLine must have distinct start and end set.");return n_(this._start,this._heading,e,this._ellipsoid.maximumRadius,this._ellipticity,t)},i_.prototype.findIntersectionWithLongitude=function(e,t){if(i["a"].typeOf.number("intersectionLongitude",e),!Object(r["a"])(this._distance)||0===this._distance)throw new a["a"]("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,o=this._heading,c=Math.abs(o),l=this._start;if(e=s["a"].negativePiToPi(e),s["a"].equalsEpsilon(Math.abs(e),Math.PI,s["a"].EPSILON14)&&(e=s["a"].sign(l.longitude)*Math.PI),Object(r["a"])(t)||(t=new I),Math.abs(s["a"].PI_OVER_TWO-c)<=s["a"].EPSILON8)return t.longitude=e,t.latitude=l.latitude,t.height=0,t;if(s["a"].equalsEpsilon(Math.abs(s["a"].PI_OVER_TWO-c),s["a"].PI_OVER_TWO,s["a"].EPSILON8)){if(s["a"].equalsEpsilon(e,l.longitude,s["a"].EPSILON12))return;return t.longitude=e,t.latitude=s["a"].PI_OVER_TWO*s["a"].sign(s["a"].PI_OVER_TWO-o),t.height=0,t}const u=l.latitude,h=n*Math.sin(u),d=Math.tan(.5*(s["a"].PI_OVER_TWO+u))*Math.exp((e-l.longitude)/Math.tan(o)),f=(1+h)/(1-h);let p,m=l.latitude;do{p=m;const e=n*Math.sin(p),t=(1+e)/(1-e);m=2*Math.atan(d*Math.pow(t/f,n/2))-s["a"].PI_OVER_TWO}while(!s["a"].equalsEpsilon(m,p,s["a"].EPSILON12));return t.longitude=e,t.latitude=m,t.height=0,t},i_.prototype.findIntersectionWithLatitude=function(e,t){if(i["a"].typeOf.number("intersectionLatitude",e),!Object(r["a"])(this._distance)||0===this._distance)throw new a["a"]("EllipsoidRhumbLine must have distinct start and end set.");const n=this._ellipticity,o=this._heading,c=this._start;if(s["a"].equalsEpsilon(Math.abs(o),s["a"].PI_OVER_TWO,s["a"].EPSILON8))return;const l=$m(n,c.latitude),u=$m(n,e),h=Math.tan(o)*(u-l),d=s["a"].negativePiToPi(c.longitude+h);return Object(r["a"])(t)?(t.longitude=d,t.latitude=e,t.height=0,t):new I(d,e,0)};var o_=i_,r_=n("5664"),a_=n.n(r_);const s_={CLOCKWISE:Ys.CW,COUNTER_CLOCKWISE:Ys.CCW,validate:function(e){return e===s_.CLOCKWISE||e===s_.COUNTER_CLOCKWISE}};var c_=Object.freeze(s_);const l_=new g,u_=new g,h_={computeArea2D:function(e){i["a"].defined("positions",e),i["a"].typeOf.number.greaterThanOrEquals("positions.length",e.length,3);const t=e.length;let n=0;for(let i=t-1,o=0;o<t;i=o++){const t=e[i],r=e[o];n+=t.x*r.y-r.x*t.y}return.5*n},computeWindingOrder2D:function(e){const t=h_.computeArea2D(e);return t>0?c_.COUNTER_CLOCKWISE:c_.CLOCKWISE},triangulate:function(e,t){i["a"].defined("positions",e);const n=Gt.packArray(e);return a_()(n,t,2)}},d_=new g,f_=new g,p_=new g,m_=new g,__=new g,g_=new g,b_=new g,y_=new Gt,v_=new Gt,O_=new Gt,A_=new Gt;h_.computeSubdivision=function(e,t,n,a,c){c=Object(o["a"])(c,s["a"].RADIANS_PER_DEGREE);const l=Object(r["a"])(a);i["a"].typeOf.object("ellipsoid",e),i["a"].defined("positions",t),i["a"].defined("indices",n),i["a"].typeOf.number.greaterThanOrEquals("indices.length",n.length,3),i["a"].typeOf.number.equals("indices.length % 3","0",n.length%3,0),i["a"].typeOf.number.greaterThan("granularity",c,0);const u=n.slice(0);let h;const d=t.length,f=new Array(3*d),p=new Array(2*d);let m=0,_=0;for(h=0;h<d;h++){const e=t[h];if(f[m++]=e.x,f[m++]=e.y,f[m++]=e.z,l){const e=a[h];p[_++]=e.x,p[_++]=e.y}}const b=[],y={},v=e.maximumRadius,O=s["a"].chordLength(c,v),A=O*O;while(u.length>0){const e=u.pop(),t=u.pop(),n=u.pop(),i=g.fromArray(f,3*n,d_),o=g.fromArray(f,3*t,f_),a=g.fromArray(f,3*e,p_);let s,c,d;l&&(s=Gt.fromArray(p,2*n,y_),c=Gt.fromArray(p,2*t,v_),d=Gt.fromArray(p,2*e,O_));const m=g.multiplyByScalar(g.normalize(i,m_),v,m_),_=g.multiplyByScalar(g.normalize(o,__),v,__),O=g.multiplyByScalar(g.normalize(a,g_),v,g_),w=g.magnitudeSquared(g.subtract(m,_,b_)),T=g.magnitudeSquared(g.subtract(_,O,b_)),C=g.magnitudeSquared(g.subtract(O,m,b_)),E=Math.max(w,T,C);let x,S,I;E>A?w===E?(x=`${Math.min(n,t)} ${Math.max(n,t)}`,h=y[x],Object(r["a"])(h)||(S=g.add(i,o,b_),g.multiplyByScalar(S,.5,S),f.push(S.x,S.y,S.z),h=f.length/3-1,y[x]=h,l&&(I=Gt.add(s,c,A_),Gt.multiplyByScalar(I,.5,I),p.push(I.x,I.y))),u.push(n,h,e),u.push(h,t,e)):T===E?(x=`${Math.min(t,e)} ${Math.max(t,e)}`,h=y[x],Object(r["a"])(h)||(S=g.add(o,a,b_),g.multiplyByScalar(S,.5,S),f.push(S.x,S.y,S.z),h=f.length/3-1,y[x]=h,l&&(I=Gt.add(c,d,A_),Gt.multiplyByScalar(I,.5,I),p.push(I.x,I.y))),u.push(t,h,n),u.push(h,e,n)):C===E&&(x=`${Math.min(e,n)} ${Math.max(e,n)}`,h=y[x],Object(r["a"])(h)||(S=g.add(a,i,b_),g.multiplyByScalar(S,.5,S),f.push(S.x,S.y,S.z),h=f.length/3-1,y[x]=h,l&&(I=Gt.add(d,s,A_),Gt.multiplyByScalar(I,.5,I),p.push(I.x,I.y))),u.push(e,h,t),u.push(h,n,t)):(b.push(n),b.push(t),b.push(e))}const w={attributes:{position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:f})},indices:b,primitiveType:Eu.TRIANGLES};return l&&(w.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:p})),new Fu(w)};const w_=new I,T_=new I,C_=new I,E_=new I;h_.computeRhumbLineSubdivision=function(e,t,n,a,c){c=Object(o["a"])(c,s["a"].RADIANS_PER_DEGREE);const l=Object(r["a"])(a);i["a"].typeOf.object("ellipsoid",e),i["a"].defined("positions",t),i["a"].defined("indices",n),i["a"].typeOf.number.greaterThanOrEquals("indices.length",n.length,3),i["a"].typeOf.number.equals("indices.length % 3","0",n.length%3,0),i["a"].typeOf.number.greaterThan("granularity",c,0);const u=n.slice(0);let h;const d=t.length,f=new Array(3*d),p=new Array(2*d);let m=0,_=0;for(h=0;h<d;h++){const e=t[h];if(f[m++]=e.x,f[m++]=e.y,f[m++]=e.z,l){const e=a[h];p[_++]=e.x,p[_++]=e.y}}const b=[],y={},v=e.maximumRadius,O=s["a"].chordLength(c,v),A=new o_(void 0,void 0,e),w=new o_(void 0,void 0,e),T=new o_(void 0,void 0,e);while(u.length>0){const t=u.pop(),n=u.pop(),i=u.pop(),o=g.fromArray(f,3*i,d_),a=g.fromArray(f,3*n,f_),s=g.fromArray(f,3*t,p_);let c,d,m;l&&(c=Gt.fromArray(p,2*i,y_),d=Gt.fromArray(p,2*n,v_),m=Gt.fromArray(p,2*t,O_));const _=e.cartesianToCartographic(o,w_),v=e.cartesianToCartographic(a,T_),C=e.cartesianToCartographic(s,C_);A.setEndPoints(_,v);const E=A.surfaceDistance;w.setEndPoints(v,C);const x=w.surfaceDistance;T.setEndPoints(C,_);const S=T.surfaceDistance,I=Math.max(E,x,S);let D,P,j,R,L;I>O?E===I?(D=`${Math.min(i,n)} ${Math.max(i,n)}`,h=y[D],Object(r["a"])(h)||(P=A.interpolateUsingFraction(.5,E_),j=.5*(_.height+v.height),R=g.fromRadians(P.longitude,P.latitude,j,e,b_),f.push(R.x,R.y,R.z),h=f.length/3-1,y[D]=h,l&&(L=Gt.add(c,d,A_),Gt.multiplyByScalar(L,.5,L),p.push(L.x,L.y))),u.push(i,h,t),u.push(h,n,t)):x===I?(D=`${Math.min(n,t)} ${Math.max(n,t)}`,h=y[D],Object(r["a"])(h)||(P=w.interpolateUsingFraction(.5,E_),j=.5*(v.height+C.height),R=g.fromRadians(P.longitude,P.latitude,j,e,b_),f.push(R.x,R.y,R.z),h=f.length/3-1,y[D]=h,l&&(L=Gt.add(d,m,A_),Gt.multiplyByScalar(L,.5,L),p.push(L.x,L.y))),u.push(n,h,i),u.push(h,t,i)):S===I&&(D=`${Math.min(t,i)} ${Math.max(t,i)}`,h=y[D],Object(r["a"])(h)||(P=T.interpolateUsingFraction(.5,E_),j=.5*(C.height+_.height),R=g.fromRadians(P.longitude,P.latitude,j,e,b_),f.push(R.x,R.y,R.z),h=f.length/3-1,y[D]=h,l&&(L=Gt.add(m,c,A_),Gt.multiplyByScalar(L,.5,L),p.push(L.x,L.y))),u.push(t,h,n),u.push(h,i,n)):(b.push(i),b.push(n),b.push(t))}const C={attributes:{position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:f})},indices:b,primitiveType:Eu.TRIANGLES};return l&&(C.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:p})),new Fu(C)},h_.scaleToGeodeticHeight=function(e,t,n,i){n=Object(o["a"])(n,k.WGS84);let a=l_,s=u_;if(t=Object(o["a"])(t,0),i=Object(o["a"])(i,!0),Object(r["a"])(e)){const o=e.length;for(let r=0;r<o;r+=3)g.fromArray(e,r,s),i&&(s=n.scaleToGeodeticSurface(s,s)),0!==t&&(a=n.geodeticSurfaceNormal(s,a),g.multiplyByScalar(a,t,a),g.add(s,a,s)),e[r]=s.x,e[r+1]=s.y,e[r+2]=s.z}return e};var x_=h_;function S_(){this._array=[],this._offset=0,this._length=0}Object.defineProperties(S_.prototype,{length:{get:function(){return this._length}}}),S_.prototype.enqueue=function(e){this._array.push(e),this._length++},S_.prototype.dequeue=function(){if(0===this._length)return;const e=this._array;let t=this._offset;const n=e[t];return e[t]=void 0,t++,t>10&&2*t>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n},S_.prototype.peek=function(){if(0!==this._length)return this._array[this._offset]},S_.prototype.contains=function(e){return-1!==this._array.indexOf(e)},S_.prototype.clear=function(){this._array.length=this._offset=this._length=0},S_.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};var I_=S_;const D_={computeHierarchyPackedLength:function(e,t){let n=0;const i=[e];while(i.length>0){const e=i.pop();if(!Object(r["a"])(e))continue;n+=2;const o=e.positions,a=e.holes;if(Object(r["a"])(o)&&o.length>0&&(n+=o.length*t.packedLength),Object(r["a"])(a)){const e=a.length;for(let t=0;t<e;++t)i.push(a[t])}}return n},packPolygonHierarchy:function(e,t,n,i){const o=[e];while(o.length>0){const e=o.pop();if(!Object(r["a"])(e))continue;const a=e.positions,s=e.holes;if(t[n++]=Object(r["a"])(a)?a.length:0,t[n++]=Object(r["a"])(s)?s.length:0,Object(r["a"])(a)){const e=a.length;for(let o=0;o<e;++o,n+=i.packedLength)i.pack(a[o],t,n)}if(Object(r["a"])(s)){const e=s.length;for(let t=0;t<e;++t)o.push(s[t])}}return n},unpackPolygonHierarchy:function(e,t,n){const i=e[t++],o=e[t++],r=new Array(i),a=o>0?new Array(o):void 0;for(let s=0;s<i;++s,t+=n.packedLength)r[s]=n.unpack(e,t);for(let s=0;s<o;++s)a[s]=D_.unpackPolygonHierarchy(e,t,n),t=a[s].startingIndex,delete a[s].startingIndex;return{positions:r,holes:a,startingIndex:t}}},P_=new Gt;function j_(e,t,n,i){return Gt.subtract(t,e,P_),Gt.multiplyByScalar(P_,n/i,P_),Gt.add(e,P_,P_),[P_.x,P_.y]}const R_=new g;function L_(e,t,n,i){return g.subtract(t,e,R_),g.multiplyByScalar(R_,n/i,R_),g.add(e,R_,R_),[R_.x,R_.y,R_.z]}D_.subdivideLineCount=function(e,t,n){const i=g.distance(e,t),o=i/n,r=Math.max(0,Math.ceil(s["a"].log2(o)));return Math.pow(2,r)};const M_=new I,N_=new I,B_=new I,F_=new g,z_=new o_;D_.subdivideRhumbLineCount=function(e,t,n,i){const o=e.cartesianToCartographic(t,M_),r=e.cartesianToCartographic(n,N_),a=new o_(o,r,e),c=a.surfaceDistance/i,l=Math.max(0,Math.ceil(s["a"].log2(c)));return Math.pow(2,l)},D_.subdivideTexcoordLine=function(e,t,n,i,o,r){const a=D_.subdivideLineCount(n,i,o),s=Gt.distance(e,t),c=s/a,l=r;l.length=2*a;let u=0;for(let h=0;h<a;h++){const n=j_(e,t,h*c,s);l[u++]=n[0],l[u++]=n[1]}return l},D_.subdivideLine=function(e,t,n,i){const o=D_.subdivideLineCount(e,t,n),a=g.distance(e,t),s=a/o;Object(r["a"])(i)||(i=[]);const c=i;c.length=3*o;let l=0;for(let r=0;r<o;r++){const n=L_(e,t,r*s,a);c[l++]=n[0],c[l++]=n[1],c[l++]=n[2]}return c},D_.subdivideTexcoordRhumbLine=function(e,t,n,i,o,r,a){const c=n.cartesianToCartographic(i,M_),l=n.cartesianToCartographic(o,N_);z_.setEndPoints(c,l);const u=z_.surfaceDistance/r,h=Math.max(0,Math.ceil(s["a"].log2(u))),d=Math.pow(2,h),f=Gt.distance(e,t),p=f/d,m=a;m.length=2*d;let _=0;for(let s=0;s<d;s++){const n=j_(e,t,s*p,f);m[_++]=n[0],m[_++]=n[1]}return m},D_.subdivideRhumbLine=function(e,t,n,i,o){const a=e.cartesianToCartographic(t,M_),c=e.cartesianToCartographic(n,N_),l=new o_(a,c,e),u=l.surfaceDistance/i,h=Math.max(0,Math.ceil(s["a"].log2(u))),d=Math.pow(2,h),f=l.surfaceDistance/d;Object(r["a"])(o)||(o=[]);const p=o;p.length=3*d;let m=0;for(let r=0;r<d;r++){const t=l.interpolateUsingSurfaceDistance(r*f,B_),n=e.cartographicToCartesian(t,F_);p[m++]=n.x,p[m++]=n.y,p[m++]=n.z}return p};const k_=new g,U_=new g,V_=new g,H_=new g;D_.scaleToGeodeticHeightExtruded=function(e,t,n,i,a){i=Object(o["a"])(i,k.WGS84);const s=k_;let c=U_;const l=V_;let u=H_;if(Object(r["a"])(e)&&Object(r["a"])(e.attributes)&&Object(r["a"])(e.attributes.position)){const o=e.attributes.position.values,r=o.length/2;for(let e=0;e<r;e+=3)g.fromArray(o,e,l),i.geodeticSurfaceNormal(l,s),u=i.scaleToGeodeticSurface(l,u),c=g.multiplyByScalar(s,n,c),c=g.add(u,c,c),o[e+r]=c.x,o[e+1+r]=c.y,o[e+2+r]=c.z,a&&(u=g.clone(l,u)),c=g.multiplyByScalar(s,t,c),c=g.add(u,c,c),o[e]=c.x,o[e+1]=c.y,o[e+2]=c.z}return e},D_.polygonOutlinesFromHierarchy=function(e,t,n){const i=[],o=new I_;let a,s,c;o.enqueue(e);while(0!==o.length){const e=o.dequeue();let l=e.positions;if(t)for(c=l.length,a=0;a<c;a++)n.scaleToGeodeticSurface(l[a],l[a]);if(l=zm(l,g.equalsEpsilon,!0),l.length<3)continue;const u=e.holes?e.holes.length:0;for(a=0;a<u;a++){const l=e.holes[a];let u=l.positions;if(t)for(c=u.length,s=0;s<c;++s)n.scaleToGeodeticSurface(u[s],u[s]);if(u=zm(u,g.equalsEpsilon,!0),u.length<3)continue;i.push(u);let h=0;for(Object(r["a"])(l.holes)&&(h=l.holes.length),s=0;s<h;s++)o.enqueue(l.holes[s])}i.push(l)}return i},D_.polygonsFromHierarchy=function(e,t,n,i,o){const a=[],s=[],c=new I_;c.enqueue(e);while(0!==c.length){const e=c.dequeue();let l=e.positions;const u=e.holes;let h,d;if(i)for(d=l.length,h=0;h<d;h++)o.scaleToGeodeticSurface(l[h],l[h]);if(t||(l=zm(l,g.equalsEpsilon,!0)),l.length<3)continue;let f=n(l);if(!Object(r["a"])(f))continue;const p=[];let m=x_.computeWindingOrder2D(f);m===c_.CLOCKWISE&&(f.reverse(),l=l.slice().reverse());let _=l.slice();const b=Object(r["a"])(u)?u.length:0,y=[];let v;for(h=0;h<b;h++){const e=u[h];let a=e.positions;if(i)for(d=a.length,v=0;v<d;++v)o.scaleToGeodeticSurface(a[v],a[v]);if(t||(a=zm(a,g.equalsEpsilon,!0)),a.length<3)continue;const s=n(a);if(!Object(r["a"])(s))continue;m=x_.computeWindingOrder2D(s),m===c_.CLOCKWISE&&(s.reverse(),a=a.slice().reverse()),y.push(a),p.push(_.length),_=_.concat(a),f=f.concat(s);let l=0;for(Object(r["a"])(e.holes)&&(l=e.holes.length),v=0;v<l;v++)c.enqueue(e.holes[v])}a.push({outerRing:l,holes:y}),s.push({positions:_,positions2D:f,holes:p})}return{hierarchy:a,polygons:s}};const G_=new Gt,W_=new g,q_=new Kr,Y_=new ce;D_.computeBoundingRectangle=function(e,t,n,i,o){const a=Kr.fromAxisAngle(e,i,q_),s=ce.fromQuaternion(a,Y_);let c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const d=n.length;for(let f=0;f<d;++f){const e=g.clone(n[f],W_);ce.multiplyByVector(s,e,e);const i=t(e,G_);Object(r["a"])(i)&&(c=Math.min(c,i.x),l=Math.max(l,i.x),u=Math.min(u,i.y),h=Math.max(h,i.y))}return o.x=c,o.y=u,o.width=l-c,o.height=h-u,o},D_.createGeometryFromPositions=function(e,t,n,i,o,a,s){let c=x_.triangulate(t.positions2D,t.holes);c.length<3&&(c=[0,1,2]);const l=t.positions,u=Object(r["a"])(n),h=u?n.positions:void 0;if(o){const e=l.length,t=new Array(3*e);let n=0;for(let r=0;r<e;r++){const e=l[r];t[n++]=e.x,t[n++]=e.y,t[n++]=e.z}const i={attributes:{position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:t})},indices:c,primitiveType:Eu.TRIANGLES};u&&(i.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:Gt.packArray(h)}));const o=new Fu(i);return a.normal?mp.computeNormal(o):o}return s===uu.GEODESIC?x_.computeSubdivision(e,l,c,h,i):s===uu.RHUMB?x_.computeRhumbLineSubdivision(e,l,c,h,i):void 0};const X_=[],K_=[],$_=new g,J_=new g;D_.computeWallGeometry=function(e,t,n,i,o,a){let c,l,u,h,d,f,p,m,_,b=e.length,y=0,v=0;const O=Object(r["a"])(t),A=O?t.positions:void 0;if(o)for(l=3*b*2,c=new Array(2*l),O&&(_=2*b*2,m=new Array(2*_)),u=0;u<b;u++)h=e[u],d=e[(u+1)%b],c[y]=c[y+l]=h.x,++y,c[y]=c[y+l]=h.y,++y,c[y]=c[y+l]=h.z,++y,c[y]=c[y+l]=d.x,++y,c[y]=c[y+l]=d.y,++y,c[y]=c[y+l]=d.z,++y,O&&(f=A[u],p=A[(u+1)%b],m[v]=m[v+_]=f.x,++v,m[v]=m[v+_]=f.y,++v,m[v]=m[v+_]=p.x,++v,m[v]=m[v+_]=p.y,++v);else{const t=s["a"].chordLength(i,n.maximumRadius);let o=0;if(a===uu.GEODESIC)for(u=0;u<b;u++)o+=D_.subdivideLineCount(e[u],e[(u+1)%b],t);else if(a===uu.RHUMB)for(u=0;u<b;u++)o+=D_.subdivideRhumbLineCount(n,e[u],e[(u+1)%b],t);for(l=3*(o+b),c=new Array(2*l),O&&(_=2*(o+b),m=new Array(2*_)),u=0;u<b;u++){let i,o;h=e[u],d=e[(u+1)%b],O&&(f=A[u],p=A[(u+1)%b]),a===uu.GEODESIC?(i=D_.subdivideLine(h,d,t,K_),O&&(o=D_.subdivideTexcoordLine(f,p,h,d,t,X_))):a===uu.RHUMB&&(i=D_.subdivideRhumbLine(n,h,d,t,K_),O&&(o=D_.subdivideTexcoordRhumbLine(f,p,n,h,d,t,X_)));const r=i.length;for(let e=0;e<r;++e,++y)c[y]=i[e],c[y+l]=i[e];if(c[y]=d.x,c[y+l]=d.x,++y,c[y]=d.y,c[y+l]=d.y,++y,c[y]=d.z,c[y+l]=d.z,++y,O){const e=o.length;for(let t=0;t<e;++t,++v)m[v]=o[t],m[v+_]=o[t];m[v]=p.x,m[v+_]=p.x,++v,m[v]=p.y,m[v+_]=p.y,++v}}}b=c.length;const w=ll.createTypedArray(b/3,b-6*e.length);let T=0;for(b/=6,u=0;u<b;u++){const e=u,t=e+1,n=e+b,i=n+1;h=g.fromArray(c,3*e,$_),d=g.fromArray(c,3*t,J_),g.equalsEpsilon(h,d,s["a"].EPSILON10,s["a"].EPSILON10)||(w[T++]=e,w[T++]=n,w[T++]=t,w[T++]=t,w[T++]=n,w[T++]=i)}const C={attributes:new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:c})}),indices:w,primitiveType:Eu.TRIANGLES};O&&(C.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:m}));const E=new Fu(C);return E};var Q_=D_;const Z_=new g,eg=new Au,tg=new Gt,ng=new Gt,ig=new g,og=new g,rg=new g,ag=new g,sg=new g,cg=new g,lg=new Kr,ug=new ce,hg=new ce,dg=new g;function fg(e,t,n,i,o,a,c,l,u){const h=e.positions;let d=x_.triangulate(e.positions2D,e.holes);d.length<3&&(d=[0,1,2]);const f=ll.createTypedArray(h.length,d.length);f.set(d);let p=ug;if(0!==i){let e=Kr.fromAxisAngle(c,i,lg);if(p=ce.fromQuaternion(e,p),t.tangent||t.bitangent){e=Kr.fromAxisAngle(c,-i,lg);const n=ce.fromQuaternion(e,hg);l=g.normalize(ce.multiplyByVector(n,l,l),l),t.bitangent&&(u=g.normalize(g.cross(c,l,u),u))}}else p=ce.clone(ce.IDENTITY,p);const m=ng;t.st&&(m.x=n.x,m.y=n.y);const _=h.length,b=3*_,y=new Float64Array(b),v=t.normal?new Float32Array(b):void 0,O=t.tangent?new Float32Array(b):void 0,A=t.bitangent?new Float32Array(b):void 0,w=t.st?new Float32Array(2*_):void 0;let T=0,C=0,E=0,x=0,S=0;for(let g=0;g<_;g++){const e=h[g];if(y[T++]=e.x,y[T++]=e.y,y[T++]=e.z,t.st)if(Object(r["a"])(o)&&o.positions.length===_)w[S++]=o.positions[g].x,w[S++]=o.positions[g].y;else{const t=ce.multiplyByVector(p,e,Z_),i=a(t,tg);Gt.subtract(i,m,i);const o=s["a"].clamp(i.x/n.width,0,1),r=s["a"].clamp(i.y/n.height,0,1);w[S++]=o,w[S++]=r}t.normal&&(v[C++]=c.x,v[C++]=c.y,v[C++]=c.z),t.tangent&&(O[x++]=l.x,O[x++]=l.y,O[x++]=l.z),t.bitangent&&(A[E++]=u.x,A[E++]=u.y,A[E++]=u.z)}const I=new Vu;return t.position&&(I.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:y})),t.normal&&(I.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:v})),t.tangent&&(I.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:O})),t.bitangent&&(I.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:A})),t.st&&(I.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:w})),new Fu({attributes:I,indices:f,primitiveType:Eu.TRIANGLES})}function pg(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.polygonHierarchy,n=e.textureCoordinates;i["a"].defined("options.polygonHierarchy",t);const a=Object(o["a"])(e.vertexFormat,qu.DEFAULT);this._vertexFormat=qu.clone(a),this._polygonHierarchy=t,this._stRotation=Object(o["a"])(e.stRotation,0),this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._workerName="createCoplanarPolygonGeometry",this._textureCoordinates=n,this.packedLength=Q_.computeHierarchyPackedLength(t,g)+qu.packedLength+k.packedLength+(Object(r["a"])(n)?Q_.computeHierarchyPackedLength(n,Gt):1)+2}pg.fromPositions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.positions",e.positions);const t={polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates};return new pg(t)},pg.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),n=Q_.packPolygonHierarchy(e._polygonHierarchy,t,n,g),k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._stRotation,Object(r["a"])(e._textureCoordinates)?n=Q_.packPolygonHierarchy(e._textureCoordinates,t,n,Gt):t[n++]=-1,t[n++]=e.packedLength,t};const mg=k.clone(k.UNIT_SPHERE),_g=new qu,gg={polygonHierarchy:{}};pg.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=Q_.unpackPolygonHierarchy(e,t,g);t=a.startingIndex,delete a.startingIndex;const s=k.unpack(e,t,mg);t+=k.packedLength;const c=qu.unpack(e,t,_g);t+=qu.packedLength;const l=e[t++],u=-1===e[t]?void 0:Q_.unpackPolygonHierarchy(e,t,Gt);Object(r["a"])(u)?(t=u.startingIndex,delete u.startingIndex):t++;const h=e[t++];return Object(r["a"])(n)||(n=new pg(gg)),n._polygonHierarchy=a,n._ellipsoid=k.clone(s,n._ellipsoid),n._vertexFormat=qu.clone(c,n._vertexFormat),n._stRotation=l,n._textureCoordinates=u,n.packedLength=h,n},pg.createGeometry=function(e){const t=e._vertexFormat,n=e._polygonHierarchy,i=e._stRotation,o=e._textureCoordinates,a=Object(r["a"])(o);let c=n.positions;if(c=zm(c,g.equalsEpsilon,!0),c.length<3)return;let l=ig,u=og,h=rg,d=sg;const f=cg,p=Ym.computeProjectTo2DArguments(c,ag,d,f);if(!p)return;if(l=g.cross(d,f,l),l=g.normalize(l,l),!g.equalsEpsilon(ag,g.ZERO,s["a"].EPSILON6)){const t=e._ellipsoid.geodeticSurfaceNormal(ag,dg);g.dot(l,t)<0&&(l=g.negate(l,l),d=g.negate(d,d))}const m=Ym.createProjectPointsTo2DFunction(ag,d,f),_=Ym.createProjectPointTo2DFunction(ag,d,f);t.tangent&&(u=g.clone(d,u)),t.bitangent&&(h=g.clone(f,h));const b=Q_.polygonsFromHierarchy(n,a,m,!1),y=b.hierarchy,v=b.polygons,O=function(e){return e},A=a?Q_.polygonsFromHierarchy(o,!0,O,!1).polygons:void 0;if(0===y.length)return;c=y[0].outerRing;const w=Tt.fromPoints(c),T=Q_.computeBoundingRectangle(l,_,c,i,eg),C=[];for(let r=0;r<v.length;r++){const e=new Sd({geometry:fg(v[r],t,T,i,a?A[r]:void 0,_,l,u,h)});C.push(e)}const E=mp.combineInstances(C)[0];E.attributes.position.values=new Float64Array(E.attributes.position.values),E.indices=ll.createTypedArray(E.attributes.position.values.length/3,E.indices);const x=E.attributes;return t.position||delete x.position,new Fu({attributes:x,indices:E.indices,primitiveType:E.primitiveType,boundingSphere:w})};var bg=pg;function yg(e){const t=e.length,n=new Float64Array(3*t),i=ll.createTypedArray(t,2*t);let o=0,r=0;for(let s=0;s<t;s++){const a=e[s];n[o++]=a.x,n[o++]=a.y,n[o++]=a.z,i[r++]=s,i[r++]=(s+1)%t}const a=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:n})});return new Fu({attributes:a,indices:i,primitiveType:Eu.LINES})}function vg(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.polygonHierarchy;i["a"].defined("options.polygonHierarchy",t),this._polygonHierarchy=t,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=Q_.computeHierarchyPackedLength(t,g)+1}vg.fromPositions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.positions",e.positions);const t={polygonHierarchy:{positions:e.positions}};return new vg(t)},vg.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),n=Q_.packPolygonHierarchy(e._polygonHierarchy,t,n,g),t[n]=e.packedLength,t};const Og={polygonHierarchy:{}};vg.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=Q_.unpackPolygonHierarchy(e,t,g);t=a.startingIndex,delete a.startingIndex;const s=e[t];return Object(r["a"])(n)||(n=new vg(Og)),n._polygonHierarchy=a,n.packedLength=s,n},vg.createGeometry=function(e){const t=e._polygonHierarchy;let n=t.positions;if(n=zm(n,g.equalsEpsilon,!0),n.length<3)return;const i=Ym.validOutline(n);if(!i)return;const o=Q_.polygonOutlinesFromHierarchy(t,!1);if(0===o.length)return;const r=[];for(let c=0;c<o.length;c++){const e=new Sd({geometry:yg(o[c])});r.push(e)}const a=mp.combineInstances(r)[0],s=Tt.fromPoints(t.positions);return new Fu({attributes:a.attributes,indices:a.indices,primitiveType:a.primitiveType,boundingSphere:s})};var Ag=vg;const wg={ROUNDED:0,MITERED:1,BEVELED:2};var Tg=Object.freeze(wg);function Cg(e){const t=e._uSquared,n=e._ellipsoid.maximumRadius,i=e._ellipsoid.minimumRadius,o=(n-i)/n,r=Math.cos(e._startHeading),a=Math.sin(e._startHeading),s=(1-o)*Math.tan(e._start.latitude),c=1/Math.sqrt(1+s*s),l=c*s,u=Math.atan2(s,r),h=c*a,d=h*h,f=1-d,p=Math.sqrt(f),m=t/4,_=m*m,g=_*m,b=_*_,y=1+m-3*_/4+5*g/4-175*b/64,v=1-m+15*_/8-35*g/8,O=1-3*m+35*_/4,A=1-5*m,w=y*u-v*Math.sin(2*u)*m/2-O*Math.sin(4*u)*_/16-A*Math.sin(6*u)*g/48-5*Math.sin(8*u)*b/512,T=e._constants;T.a=n,T.b=i,T.f=o,T.cosineHeading=r,T.sineHeading=a,T.tanU=s,T.cosineU=c,T.sineU=l,T.sigma=u,T.sineAlpha=h,T.sineSquaredAlpha=d,T.cosineSquaredAlpha=f,T.cosineAlpha=p,T.u2Over4=m,T.u4Over16=_,T.u6Over64=g,T.u8Over256=b,T.a0=y,T.a1=v,T.a2=O,T.a3=A,T.distanceRatio=w}function Eg(e,t){return e*t*(4+e*(4-3*t))/16}function xg(e,t,n,i,o,r,a){const s=Eg(e,n);return(1-s)*e*t*(i+s*o*(a+s*r*(2*a*a-1)))}function Sg(e,t,n,i,o,r,a){const c=(t-n)/t,l=r-i,u=Math.atan((1-c)*Math.tan(o)),h=Math.atan((1-c)*Math.tan(a)),d=Math.cos(u),f=Math.sin(u),p=Math.cos(h),m=Math.sin(h),_=d*p,g=d*m,b=f*m,y=f*p;let v,O,A,w,T,C=l,E=s["a"].TWO_PI,x=Math.cos(C),S=Math.sin(C);do{x=Math.cos(C),S=Math.sin(C);const e=g-y*x;let t;A=Math.sqrt(p*p*S*S+e*e),O=b+_*x,v=Math.atan2(A,O),0===A?(t=0,w=1):(t=_*S/A,w=1-t*t),E=C,T=O-2*b/w,isFinite(T)||(T=0),C=l+xg(c,t,w,v,A,O,T)}while(Math.abs(C-E)>s["a"].EPSILON12);const I=w*(t*t-n*n)/(n*n),D=1+I*(4096+I*(I*(320-175*I)-768))/16384,P=I*(256+I*(I*(74-47*I)-128))/1024,j=T*T,R=P*A*(T+P*(O*(2*j-1)-P*T*(4*A*A-3)*(4*j-3)/6)/4),L=n*D*(v-R),M=Math.atan2(p*S,g-y*x),N=Math.atan2(d*S,g*x-y);e._distance=L,e._startHeading=M,e._endHeading=N,e._uSquared=I}const Ig=new g,Dg=new g;function Pg(e,t,n,o){const r=g.normalize(o.cartographicToCartesian(t,Dg),Ig),a=g.normalize(o.cartographicToCartesian(n,Dg),Dg);i["a"].typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(g.angleBetween(r,a))-Math.PI),.0125),Sg(e,o.maximumRadius,o.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude),e._start=I.clone(t,e._start),e._end=I.clone(n,e._end),e._start.height=0,e._end.height=0,Cg(e)}function jg(e,t,n){const i=Object(o["a"])(n,k.WGS84);this._ellipsoid=i,this._start=new I,this._end=new I,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,Object(r["a"])(e)&&Object(r["a"])(t)&&Pg(this,e,t,i)}Object.defineProperties(jg.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return i["a"].defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return i["a"].defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return i["a"].defined("distance",this._distance),this._endHeading}}}),jg.prototype.setEndPoints=function(e,t){i["a"].defined("start",e),i["a"].defined("end",t),Pg(this,e,t,this._ellipsoid)},jg.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)},jg.prototype.interpolateUsingSurfaceDistance=function(e,t){i["a"].defined("distance",this._distance);const n=this._constants,o=n.distanceRatio+e/n.b,a=Math.cos(2*o),s=Math.cos(4*o),c=Math.cos(6*o),l=Math.sin(2*o),u=Math.sin(4*o),h=Math.sin(6*o),d=Math.sin(8*o),f=o*o,p=o*f,m=n.u8Over256,_=n.u2Over4,g=n.u6Over64,b=n.u4Over16;let y=2*p*m*a/3+o*(1-_+7*b/4-15*g/4+579*m/64-(b-15*g/4+187*m/16)*a-(5*g/4-115*m/16)*s-29*m*c/16)+(_/2-b+71*g/32-85*m/16)*l+(5*b/16-5*g/4+383*m/96)*u-f*((g-11*m/2)*l+5*m*u/2)+(29*g/96-29*m/16)*h+539*m*d/1536;const v=Math.asin(Math.sin(y)*n.cosineAlpha),O=Math.atan(n.a/n.b*Math.tan(v));y-=n.sigma;const A=Math.cos(2*n.sigma+y),w=Math.sin(y),T=Math.cos(y),C=n.cosineU*T,E=n.sineU*w,x=Math.atan2(w*n.sineHeading,C-E*n.cosineHeading),S=x-xg(n.f,n.sineAlpha,n.cosineSquaredAlpha,y,w,T,A);return Object(r["a"])(t)?(t.longitude=this._start.longitude+S,t.latitude=O,t.height=0,t):new I(this._start.longitude+S,O,0)};var Rg=jg;const Lg={numberOfPoints:function(e,t,n){const i=g.distance(e,t);return Math.ceil(i/n)},numberOfPointsRhumbLine:function(e,t,n){const i=Math.pow(e.longitude-t.longitude,2)+Math.pow(e.latitude-t.latitude,2);return Math.max(1,Math.ceil(Math.sqrt(i/(n*n))))}},Mg=new I;Lg.extractHeights=function(e,t){const n=e.length,i=new Array(n);for(let o=0;o<n;o++){const n=e[o];i[o]=t.cartesianToCartographic(n,Mg).height}return i};const Ng=new Me,Bg=new g,Fg=new g,zg=new ji(g.UNIT_X,0),kg=new g,Ug=new ji(g.UNIT_X,0),Vg=new g,Hg=new g,Gg=[];function Wg(e,t,n){const i=Gg;let o;if(i.length=e,t===n){for(o=0;o<e;o++)i[o]=t;return i}const r=n-t,a=r/e;for(o=0;o<e;o++){const e=t+o*a;i[o]=e}return i}const qg=new I,Yg=new I,Xg=new g,Kg=new g,$g=new g,Jg=new Rg;let Qg=new o_;function Zg(e,t,n,i,o,r,a,s){const c=i.scaleToGeodeticSurface(e,Kg),l=i.scaleToGeodeticSurface(t,$g),u=Lg.numberOfPoints(e,t,n),h=i.cartesianToCartographic(c,qg),d=i.cartesianToCartographic(l,Yg),f=Wg(u,o,r);Jg.setEndPoints(h,d);const p=Jg.surfaceDistance/u;let m=s;h.height=o;let _=i.cartographicToCartesian(h,Xg);g.pack(_,a,m),m+=3;for(let b=1;b<u;b++){const e=Jg.interpolateUsingSurfaceDistance(b*p,Yg);e.height=f[b],_=i.cartographicToCartesian(e,Xg),g.pack(_,a,m),m+=3}return m}function eb(e,t,n,i,o,r,a,s){const c=i.cartesianToCartographic(e,qg),l=i.cartesianToCartographic(t,Yg),u=Lg.numberOfPointsRhumbLine(c,l,n);c.height=0,l.height=0;const h=Wg(u,o,r);Qg.ellipsoid.equals(i)||(Qg=new o_(void 0,void 0,i)),Qg.setEndPoints(c,l);const d=Qg.surfaceDistance/u;let f=s;c.height=o;let p=i.cartographicToCartesian(c,Xg);g.pack(p,a,f),f+=3;for(let m=1;m<u;m++){const e=Qg.interpolateUsingSurfaceDistance(m*d,Yg);e.height=h[m],p=i.cartographicToCartesian(e,Xg),g.pack(p,a,f),f+=3}return f}Lg.wrapLongitude=function(e,t){const n=[],i=[];if(Object(r["a"])(e)&&e.length>0){t=Object(o["a"])(t,Me.IDENTITY);const a=Me.inverseTransformation(t,Ng),s=Me.multiplyByPoint(a,g.ZERO,Bg),c=g.normalize(Me.multiplyByPointAsVector(a,g.UNIT_Y,Fg),Fg),l=ji.fromPointNormal(s,c,zg),u=g.normalize(Me.multiplyByPointAsVector(a,g.UNIT_X,kg),kg),h=ji.fromPointNormal(s,u,Ug);let d=1;n.push(g.clone(e[0]));let f=n[0];const p=e.length;for(let t=1;t<p;++t){const o=e[t];if(ji.getPointDistance(h,f)<0||ji.getPointDistance(h,o)<0){const e=Ci.lineSegmentPlane(f,o,l,Vg);if(Object(r["a"])(e)){const t=g.multiplyByScalar(c,5e-9,Hg);ji.getPointDistance(l,f)<0&&g.negate(t,t),n.push(g.add(e,t,new g)),i.push(d+1),g.negate(t,t),n.push(g.add(e,t,new g)),d=1}}n.push(g.clone(e[t])),d++,f=o}i.push(d)}return{positions:n,lengths:i}},Lg.generateArc=function(e){Object(r["a"])(e)||(e={});const t=e.positions;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");const n=t.length,i=Object(o["a"])(e.ellipsoid,k.WGS84);let c=Object(o["a"])(e.height,0);const l=Array.isArray(c);if(n<1)return[];if(1===n){const e=i.scaleToGeodeticSurface(t[0],Kg);if(c=l?c[0]:c,0!==c){const t=i.geodeticSurfaceNormal(e,Xg);g.multiplyByScalar(t,c,t),g.add(e,t,e)}return[e.x,e.y,e.z]}let u=e.minDistance;if(!Object(r["a"])(u)){const t=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE);u=s["a"].chordLength(t,i.maximumRadius)}let h,d=0;for(h=0;h<n-1;h++)d+=Lg.numberOfPoints(t[h],t[h+1],u);const f=3*(d+1),p=new Array(f);let m=0;for(h=0;h<n-1;h++){const e=t[h],n=t[h+1],o=l?c[h]:c,r=l?c[h+1]:c;m=Zg(e,n,u,i,o,r,p,m)}Gg.length=0;const _=t[n-1],b=i.cartesianToCartographic(_,qg);b.height=l?c[n-1]:c;const y=i.cartographicToCartesian(b,Xg);return g.pack(y,p,f-3),p};const tb=new I,nb=new I;Lg.generateRhumbArc=function(e){Object(r["a"])(e)||(e={});const t=e.positions;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");const n=t.length,i=Object(o["a"])(e.ellipsoid,k.WGS84);let c=Object(o["a"])(e.height,0);const l=Array.isArray(c);if(n<1)return[];if(1===n){const e=i.scaleToGeodeticSurface(t[0],Kg);if(c=l?c[0]:c,0!==c){const t=i.geodeticSurfaceNormal(e,Xg);g.multiplyByScalar(t,c,t),g.add(e,t,e)}return[e.x,e.y,e.z]}const u=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE);let h,d,f=0,p=i.cartesianToCartographic(t[0],tb);for(h=0;h<n-1;h++)d=i.cartesianToCartographic(t[h+1],nb),f+=Lg.numberOfPointsRhumbLine(p,d,u),p=I.clone(d,tb);const m=3*(f+1),_=new Array(m);let b=0;for(h=0;h<n-1;h++){const e=t[h],n=t[h+1],o=l?c[h]:c,r=l?c[h+1]:c;b=eb(e,n,u,i,o,r,_,b)}Gg.length=0;const y=t[n-1],v=i.cartesianToCartographic(y,qg);v.height=l?c[n-1]:c;const O=i.cartographicToCartesian(v,Xg);return g.pack(O,_,m-3),_},Lg.generateCartesianArc=function(e){const t=Lg.generateArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=g.unpack(t,3*o);return i},Lg.generateCartesianRhumbArc=function(e){const t=Lg.generateRhumbArc(e),n=t.length/3,i=new Array(n);for(let o=0;o<n;o++)i[o]=g.unpack(t,3*o);return i};var ib=Lg;const ob={};function rb(e,t){if(!Object(r["a"])(e))throw new a["a"]("identifier is required.");Object(r["a"])(ob[e])||(ob[e]=!0,console.warn(Object(o["a"])(t,e)))}rb.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.",rb.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored",rb.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored",rb.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored";var ab=rb;const sb=[new g,new g],cb=new g,lb=new g,ub=new g,hb=new g,db=new g,fb=new g,pb=new g,mb=new g,_b=new g,gb=new g,bb=new g,yb={};let vb=new I;function Ob(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++){const o=e[i];vb=t.cartesianToCartographic(o,vb),n[i]=vb.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}function Ab(e,t,n,i){const o=e[0],r=e[1],a=g.angleBetween(o,r),s=Math.ceil(a/i),c=new Array(s);let l;if(t===n){for(l=0;l<s;l++)c[l]=t;return c.push(n),c}const u=n-t,h=u/s;for(l=1;l<s;l++){const e=t+l*h;c[l]=e}return c[0]=t,c.push(n),c}const wb=new g,Tb=new g;function Cb(e,t,n,i){const o=new Ya(n,i),r=o.projectPointOntoPlane(g.add(n,e,wb),wb),a=o.projectPointOntoPlane(g.add(n,t,Tb),Tb),s=Gt.angleBetween(r,a);return a.x*r.y-a.y*r.x>=0?-s:s}const Eb=new g(-1,0,0);let xb=new Me;const Sb=new Me;let Ib=new ce;const Db=ce.IDENTITY.clone(),Pb=new g,jb=new be,Rb=new g;function Lb(e,t,n,i,o,r,a,s){let c=Pb,l=jb;xb=ka.eastNorthUpToFixedFrame(e,o,xb),c=Me.multiplyByPointAsVector(xb,Eb,c),c=g.normalize(c,c);const u=Cb(c,t,e,o);Ib=ce.fromRotationZ(u,Ib),Rb.z=r,xb=Me.multiplyTransformation(xb,Me.fromRotationTranslation(Ib,Rb,Sb),xb);const h=Db;h[0]=a;for(let d=0;d<s;d++)for(let e=0;e<n.length;e+=3)l=g.fromArray(n,e,l),l=ce.multiplyByVector(h,l,l),l=Me.multiplyByPoint(xb,l,l),i.push(l.x,l.y,l.z);return i}const Mb=new g;function Nb(e,t,n,i,o,r,a){for(let s=0;s<e.length;s+=3){const c=g.fromArray(e,s,Mb);i=Lb(c,t,n,i,o,r[s/3],a,1)}return i}function Bb(e,t){const n=e.length,i=new Array(6*n);let o=0;const r=t.x+t.width/2,a=t.y+t.height/2;let s=e[0];i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a;for(let c=1;c<n;c++){s=e[c];const t=s.x-r,n=s.y-a;i[o++]=t,i[o++]=0,i[o++]=n,i[o++]=t,i[o++]=0,i[o++]=n}return s=e[0],i[o++]=s.x-r,i[o++]=0,i[o++]=s.y-a,i}function Fb(e,t){const n=e.length,i=new Array(3*n);let o=0;const r=t.x+t.width/2,a=t.y+t.height/2;for(let s=0;s<n;s++)i[o++]=e[s].x-r,i[o++]=0,i[o++]=e[s].y-a;return i}const zb=new Kr,kb=new g,Ub=new ce;function Vb(e,t,n,i,o,r,a,c,l,u){const h=g.angleBetween(g.subtract(t,e,gb),g.subtract(n,e,bb)),d=i===Tg.BEVELED?0:Math.ceil(h/s["a"].toRadians(5));let f,p,m;if(f=o?ce.fromQuaternion(Kr.fromAxisAngle(g.negate(e,gb),h/(d+1),zb),Ub):ce.fromQuaternion(Kr.fromAxisAngle(e,h/(d+1),zb),Ub),t=g.clone(t,kb),d>0){const n=u?2:1;for(let i=0;i<d;i++)t=ce.multiplyByVector(f,t,t),p=g.subtract(t,e,gb),p=g.normalize(p,p),o||(p=g.negate(p,p)),m=r.scaleToGeodeticSurface(t,bb),a=Lb(m,p,c,a,r,l,1,n)}else p=g.subtract(t,e,gb),p=g.normalize(p,p),o||(p=g.negate(p,p)),m=r.scaleToGeodeticSurface(t,bb),a=Lb(m,p,c,a,r,l,1,1),n=g.clone(n,kb),p=g.subtract(n,e,gb),p=g.normalize(p,p),o||(p=g.negate(p,p)),m=r.scaleToGeodeticSurface(n,bb),a=Lb(m,p,c,a,r,l,1,1);return a}yb.removeDuplicatesFromShape=function(e){const t=e.length,n=[];for(let i=t-1,o=0;o<t;i=o++){const t=e[i],r=e[o];Gt.equals(t,r)||n.push(r)}return n},yb.angleIsGreaterThanPi=function(e,t,n,i){const o=new Ya(n,i),r=o.projectPointOntoPlane(g.add(n,e,wb),wb),a=o.projectPointOntoPlane(g.add(n,t,Tb),Tb);return a.x*r.y-a.y*r.x>=0};const Hb=new g,Gb=new g;yb.computePositions=function(e,t,n,i,o){const r=i._ellipsoid,a=Ob(e,r),c=i._granularity,l=i._cornerType,u=o?Bb(t,n):Fb(t,n),h=o?Fb(t,n):void 0,d=n.height/2,f=n.width/2;let p=e.length,m=[],_=o?[]:void 0,b=cb,y=lb,v=ub,O=hb,A=db,w=fb,T=pb,C=mb,E=_b,x=e[0],S=e[1];O=r.geodeticSurfaceNormal(x,O),b=g.subtract(S,x,b),b=g.normalize(b,b),C=g.cross(O,b,C),C=g.normalize(C,C);let I,D,P=a[0],j=a[1];o&&(_=Lb(x,C,h,_,r,P+d,1,1)),E=g.clone(x,E),x=S,y=g.negate(b,y);for(let M=1;M<p-1;M++){const t=o?2:1;if(S=e[M+1],x.equals(S)){ab("Positions are too close and are considered equivalent with rounding error.");continue}b=g.subtract(S,x,b),b=g.normalize(b,b),v=g.add(b,y,v),v=g.normalize(v,v),O=r.geodeticSurfaceNormal(x,O);const n=g.multiplyByScalar(O,g.dot(b,O),Hb);g.subtract(b,n,n),g.normalize(n,n);const i=g.multiplyByScalar(O,g.dot(y,O),Gb);g.subtract(y,i,i),g.normalize(i,i);const h=!s["a"].equalsEpsilon(Math.abs(g.dot(n,i)),1,s["a"].EPSILON7);if(h){v=g.cross(v,O,v),v=g.cross(O,v,v),v=g.normalize(v,v);const e=1/Math.max(.25,g.magnitude(g.cross(v,y,gb))),n=yb.angleIsGreaterThanPi(b,y,x,r);n?(A=g.add(x,g.multiplyByScalar(v,e*f,v),A),w=g.add(A,g.multiplyByScalar(C,f,w),w),sb[0]=g.clone(E,sb[0]),sb[1]=g.clone(w,sb[1]),I=Ab(sb,P+d,j+d,c),D=ib.generateArc({positions:sb,granularity:c,ellipsoid:r}),m=Nb(D,C,u,m,r,I,1),C=g.cross(O,b,C),C=g.normalize(C,C),T=g.add(A,g.multiplyByScalar(C,f,T),T),l===Tg.ROUNDED||l===Tg.BEVELED?Vb(A,w,T,l,n,r,m,u,j+d,o):(v=g.negate(v,v),m=Lb(x,v,u,m,r,j+d,e,t)),E=g.clone(T,E)):(A=g.add(x,g.multiplyByScalar(v,e*f,v),A),w=g.add(A,g.multiplyByScalar(C,-f,w),w),sb[0]=g.clone(E,sb[0]),sb[1]=g.clone(w,sb[1]),I=Ab(sb,P+d,j+d,c),D=ib.generateArc({positions:sb,granularity:c,ellipsoid:r}),m=Nb(D,C,u,m,r,I,1),C=g.cross(O,b,C),C=g.normalize(C,C),T=g.add(A,g.multiplyByScalar(C,-f,T),T),l===Tg.ROUNDED||l===Tg.BEVELED?Vb(A,w,T,l,n,r,m,u,j+d,o):m=Lb(x,v,u,m,r,j+d,e,t),E=g.clone(T,E)),y=g.negate(b,y)}else m=Lb(E,C,u,m,r,P+d,1,1),E=x;P=j,j=a[M+1],x=S}sb[0]=g.clone(E,sb[0]),sb[1]=g.clone(x,sb[1]),I=Ab(sb,P+d,j+d,c),D=ib.generateArc({positions:sb,granularity:c,ellipsoid:r}),m=Nb(D,C,u,m,r,I,1),o&&(_=Lb(x,C,h,_,r,j+d,1,1)),p=m.length;const R=o?p+_.length:p,L=new Float64Array(R);return L.set(m),o&&L.set(_,p),L};var Wb=yb;const qb={},Yb=new g,Xb=new g,Kb=new g,$b=new g,Jb=[new g,new g],Qb=new g,Zb=new g,ey=new g,ty=new g,ny=new g,iy=new g,oy=new g,ry=new g,ay=new g,sy=new g,cy=new Kr,ly=new ce;function uy(e,t,n,i,o){const r=g.angleBetween(g.subtract(t,e,Yb),g.subtract(n,e,Xb)),a=i===Tg.BEVELED?1:Math.ceil(r/s["a"].toRadians(5))+1,c=3*a,l=new Array(c);let u;l[c-3]=n.x,l[c-2]=n.y,l[c-1]=n.z,u=o?ce.fromQuaternion(Kr.fromAxisAngle(g.negate(e,Yb),r/a,cy),ly):ce.fromQuaternion(Kr.fromAxisAngle(e,r/a,cy),ly);let h=0;t=g.clone(t,Yb);for(let s=0;s<a;s++)t=ce.multiplyByVector(u,t,t),l[h++]=t.x,l[h++]=t.y,l[h++]=t.z;return l}function hy(e){let t=Qb,n=Zb,i=ey,o=e[1];n=g.fromArray(e[1],o.length-3,n),i=g.fromArray(e[0],0,i),t=g.midpoint(n,i,t);const r=uy(t,n,i,Tg.ROUNDED,!1),a=e.length-1,s=e[a-1];o=e[a],n=g.fromArray(s,s.length-3,n),i=g.fromArray(o,0,i),t=g.midpoint(n,i,t);const c=uy(t,n,i,Tg.ROUNDED,!1);return[r,c]}function dy(e,t,n,i){let o=Yb;return i||(t=g.negate(t,t)),o=g.add(e,t,o),[o.x,o.y,o.z,n.x,n.y,n.z]}function fy(e,t,n,i){const o=new Array(e.length),r=new Array(e.length),a=g.multiplyByScalar(t,n,Yb),s=g.negate(a,Xb);let c=0,l=e.length-1;for(let u=0;u<e.length;u+=3){const t=g.fromArray(e,u,Kb),n=g.add(t,s,$b);o[c++]=n.x,o[c++]=n.y,o[c++]=n.z;const i=g.add(t,a,$b);r[l--]=i.z,r[l--]=i.y,r[l--]=i.x}return i.push(o,r),i}qb.addAttribute=function(e,t,n,i){const o=t.x,a=t.y,s=t.z;Object(r["a"])(n)&&(e[n]=o,e[n+1]=a,e[n+2]=s),Object(r["a"])(i)&&(e[i]=s,e[i-1]=a,e[i-2]=o)};const py=new g,my=new g;qb.computePositions=function(e){const t=e.granularity,n=e.positions,i=e.ellipsoid,o=e.width/2,r=e.cornerType,a=e.saveAttributes;let c=Qb,l=Zb,u=ey,h=ty,d=ny,f=iy,p=oy,m=ry,_=ay,b=sy,y=[];const v=a?[]:void 0,O=a?[]:void 0;let A,w=n[0],T=n[1];l=g.normalize(g.subtract(T,w,l),l),c=i.geodeticSurfaceNormal(w,c),h=g.normalize(g.cross(c,l,h),h),a&&(v.push(h.x,h.y,h.z),O.push(c.x,c.y,c.z)),p=g.clone(w,p),w=T,u=g.negate(l,u);const C=[];let E;const x=n.length;for(E=1;E<x-1;E++){c=i.geodeticSurfaceNormal(w,c),T=n[E+1],l=g.normalize(g.subtract(T,w,l),l),d=g.normalize(g.add(l,u,d),d);const e=g.multiplyByScalar(c,g.dot(l,c),py);g.subtract(l,e,e),g.normalize(e,e);const x=g.multiplyByScalar(c,g.dot(u,c),my);g.subtract(u,x,x),g.normalize(x,x);const S=!s["a"].equalsEpsilon(Math.abs(g.dot(e,x)),1,s["a"].EPSILON7);if(S){d=g.cross(d,c,d),d=g.cross(c,d,d),d=g.normalize(d,d);const e=o/Math.max(.25,g.magnitude(g.cross(d,u,Yb))),n=Wb.angleIsGreaterThanPi(l,u,w,i);d=g.multiplyByScalar(d,e,d),n?(m=g.add(w,d,m),b=g.add(m,g.multiplyByScalar(h,o,b),b),_=g.add(m,g.multiplyByScalar(h,2*o,_),_),Jb[0]=g.clone(p,Jb[0]),Jb[1]=g.clone(b,Jb[1]),A=ib.generateArc({positions:Jb,granularity:t,ellipsoid:i}),y=fy(A,h,o,y),a&&(v.push(h.x,h.y,h.z),O.push(c.x,c.y,c.z)),f=g.clone(_,f),h=g.normalize(g.cross(c,l,h),h),_=g.add(m,g.multiplyByScalar(h,2*o,_),_),p=g.add(m,g.multiplyByScalar(h,o,p),p),r===Tg.ROUNDED||r===Tg.BEVELED?C.push({leftPositions:uy(m,f,_,r,n)}):C.push({leftPositions:dy(w,g.negate(d,d),_,n)})):(_=g.add(w,d,_),b=g.add(_,g.negate(g.multiplyByScalar(h,o,b),b),b),m=g.add(_,g.negate(g.multiplyByScalar(h,2*o,m),m),m),Jb[0]=g.clone(p,Jb[0]),Jb[1]=g.clone(b,Jb[1]),A=ib.generateArc({positions:Jb,granularity:t,ellipsoid:i}),y=fy(A,h,o,y),a&&(v.push(h.x,h.y,h.z),O.push(c.x,c.y,c.z)),f=g.clone(m,f),h=g.normalize(g.cross(c,l,h),h),m=g.add(_,g.negate(g.multiplyByScalar(h,2*o,m),m),m),p=g.add(_,g.negate(g.multiplyByScalar(h,o,p),p),p),r===Tg.ROUNDED||r===Tg.BEVELED?C.push({rightPositions:uy(_,f,m,r,n)}):C.push({rightPositions:dy(w,d,m,n)})),u=g.negate(l,u)}w=T}let S;return c=i.geodeticSurfaceNormal(w,c),Jb[0]=g.clone(p,Jb[0]),Jb[1]=g.clone(w,Jb[1]),A=ib.generateArc({positions:Jb,granularity:t,ellipsoid:i}),y=fy(A,h,o,y),a&&(v.push(h.x,h.y,h.z),O.push(c.x,c.y,c.z)),r===Tg.ROUNDED&&(S=hy(y)),{positions:y,corners:C,lefts:v,normals:O,endPositions:S}};var _y=qb;const gy=new g,by=new g,yy=new g,vy=new g,Oy=new g,Ay=new g,wy=new g,Ty=new g;function Cy(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function Ey(e,t,n,i,o,r){const a=e.normals,s=e.tangents,c=e.bitangents,l=g.normalize(g.cross(n,t,wy),wy);r.normal&&_y.addAttribute(a,t,i,o),r.tangent&&_y.addAttribute(s,l,i,o),r.bitangent&&_y.addAttribute(c,n,i,o)}function xy(e,t,n){const i=e.positions,o=e.corners,a=e.endPositions,c=e.lefts,l=e.normals,u=new Vu;let h,d,f,p=0,m=0,_=0;for(d=0;d<i.length;d+=2)f=i[d].length-3,p+=f,_+=2*f,m+=i[d+1].length-3;for(p+=3,m+=3,d=0;d<o.length;d++){h=o[d];const e=o[d].leftPositions;Object(r["a"])(e)?(f=e.length,p+=f,_+=f):(f=o[d].rightPositions.length,m+=f,_+=f)}const b=Object(r["a"])(a);let y;b&&(y=a[0].length-3,p+=y,m+=y,y/=3,_+=6*y);const v=p+m,O=new Float64Array(v),A=t.normal?new Float32Array(v):void 0,w=t.tangent?new Float32Array(v):void 0,T=t.bitangent?new Float32Array(v):void 0,C={normals:A,tangents:w,bitangents:T};let E,x,S,I,D,P,j=0,R=v-1,L=gy,M=by;const N=y/2,B=ll.createTypedArray(v/3,_);let F=0;if(b){P=yy,D=vy;const e=a[0];for(L=g.fromArray(l,0,L),M=g.fromArray(c,0,M),d=0;d<N;d++)P=g.fromArray(e,3*(N-1-d),P),D=g.fromArray(e,3*(N+d),D),_y.addAttribute(O,D,j),_y.addAttribute(O,P,void 0,R),Ey(C,L,M,j,R,t),x=j/3,I=x+1,E=(R-2)/3,S=E-1,B[F++]=E,B[F++]=x,B[F++]=S,B[F++]=S,B[F++]=x,B[F++]=I,j+=3,R-=3}let z,k,U=0,V=0,H=i[U++],G=i[U++];for(O.set(H,j),O.set(G,R-G.length+1),M=g.fromArray(c,V,M),f=G.length-3,d=0;d<f;d+=3)z=n.geodeticSurfaceNormal(g.fromArray(H,d,wy),wy),k=n.geodeticSurfaceNormal(g.fromArray(G,f-d,Ty),Ty),L=g.normalize(g.add(z,k,L),L),Ey(C,L,M,j,R,t),x=j/3,I=x+1,E=(R-2)/3,S=E-1,B[F++]=E,B[F++]=x,B[F++]=S,B[F++]=S,B[F++]=x,B[F++]=I,j+=3,R-=3;for(z=n.geodeticSurfaceNormal(g.fromArray(H,f,wy),wy),k=n.geodeticSurfaceNormal(g.fromArray(G,f,Ty),Ty),L=g.normalize(g.add(z,k,L),L),V+=3,d=0;d<o.length;d++){let e;h=o[d];const a=h.leftPositions,s=h.rightPositions;let u,p,m=Ay,_=yy,b=vy;if(L=g.fromArray(l,V,L),Object(r["a"])(a)){for(Ey(C,L,M,void 0,R,t),R-=3,u=I,p=S,e=0;e<a.length/3;e++)m=g.fromArray(a,3*e,m),B[F++]=u,B[F++]=p-e-1,B[F++]=p-e,_y.addAttribute(O,m,void 0,R),_=g.fromArray(O,3*(p-e-1),_),b=g.fromArray(O,3*u,b),M=g.normalize(g.subtract(_,b,M),M),Ey(C,L,M,void 0,R,t),R-=3;m=g.fromArray(O,3*u,m),_=g.subtract(g.fromArray(O,3*p,_),m,_),b=g.subtract(g.fromArray(O,3*(p-e),b),m,b),M=g.normalize(g.add(_,b,M),M),Ey(C,L,M,j,void 0,t),j+=3}else{for(Ey(C,L,M,j,void 0,t),j+=3,u=S,p=I,e=0;e<s.length/3;e++)m=g.fromArray(s,3*e,m),B[F++]=u,B[F++]=p+e,B[F++]=p+e+1,_y.addAttribute(O,m,j),_=g.fromArray(O,3*u,_),b=g.fromArray(O,3*(p+e),b),M=g.normalize(g.subtract(_,b,M),M),Ey(C,L,M,j,void 0,t),j+=3;m=g.fromArray(O,3*u,m),_=g.subtract(g.fromArray(O,3*(p+e),_),m,_),b=g.subtract(g.fromArray(O,3*p,b),m,b),M=g.normalize(g.negate(g.add(b,_,M),M),M),Ey(C,L,M,void 0,R,t),R-=3}for(H=i[U++],G=i[U++],H.splice(0,3),G.splice(G.length-3,3),O.set(H,j),O.set(G,R-G.length+1),f=G.length-3,V+=3,M=g.fromArray(c,V,M),e=0;e<G.length;e+=3)z=n.geodeticSurfaceNormal(g.fromArray(H,e,wy),wy),k=n.geodeticSurfaceNormal(g.fromArray(G,f-e,Ty),Ty),L=g.normalize(g.add(z,k,L),L),Ey(C,L,M,j,R,t),I=j/3,x=I-1,S=(R-2)/3,E=S+1,B[F++]=E,B[F++]=x,B[F++]=S,B[F++]=S,B[F++]=x,B[F++]=I,j+=3,R-=3;j-=3,R+=3}if(L=g.fromArray(l,l.length-3,L),Ey(C,L,M,j,R,t),b){j+=3,R-=3,P=yy,D=vy;const e=a[1];for(d=0;d<N;d++)P=g.fromArray(e,3*(y-d-1),P),D=g.fromArray(e,3*d,D),_y.addAttribute(O,P,void 0,R),_y.addAttribute(O,D,j),Ey(C,L,M,j,R,t),I=j/3,x=I-1,S=(R-2)/3,E=S+1,B[F++]=E,B[F++]=x,B[F++]=S,B[F++]=S,B[F++]=x,B[F++]=I,j+=3,R-=3}if(u.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:O}),t.st){const e=new Float32Array(v/3*2);let t,n,i=0;if(b){p/=3,m/=3;const o=Math.PI/(y+1);let r;n=1/(p-y+1),t=1/(m-y+1);const a=y/2;for(d=a+1;d<y+1;d++)r=s["a"].PI_OVER_TWO+o*d,e[i++]=t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(d=1;d<m-y+1;d++)e[i++]=d*t,e[i++]=0;for(d=y;d>a;d--)r=s["a"].PI_OVER_TWO-d*o,e[i++]=1-t*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(d=a;d>0;d--)r=s["a"].PI_OVER_TWO-o*d,e[i++]=1-n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r));for(d=p-y;d>0;d--)e[i++]=d*n,e[i++]=1;for(d=1;d<a+1;d++)r=s["a"].PI_OVER_TWO+o*d,e[i++]=n*(1+Math.cos(r)),e[i++]=.5*(1+Math.sin(r))}else{for(p/=3,m/=3,n=1/(p-1),t=1/(m-1),d=0;d<m;d++)e[i++]=d*t,e[i++]=0;for(d=p;d>0;d--)e[i++]=(d-1)*n,e[i++]=1}u.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:e})}return t.normal&&(u.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:C.normals})),t.tangent&&(u.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:C.tangents})),t.bitangent&&(u.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:C.bitangents})),{attributes:u,indices:B}}function Sy(e,t){if(!t.normal&&!t.tangent&&!t.bitangent&&!t.st)return e;const n=e.position.values;let i,o;(t.normal||t.bitangent)&&(i=e.normal.values,o=e.bitangent.values);const r=e.position.values.length/18,a=3*r,s=2*r,c=2*a;let l;if(t.normal||t.bitangent||t.tangent){const r=t.normal?new Float32Array(6*a):void 0,s=t.tangent?new Float32Array(6*a):void 0,u=t.bitangent?new Float32Array(6*a):void 0;let h=gy,d=by,f=yy,p=vy,m=Oy,_=Ay,b=c;for(l=0;l<a;l+=3){const e=b+c;h=g.fromArray(n,l,h),d=g.fromArray(n,l+a,d),f=g.fromArray(n,(l+3)%a,f),d=g.subtract(d,h,d),f=g.subtract(f,h,f),p=g.normalize(g.cross(d,f,p),p),t.normal&&(_y.addAttribute(r,p,e),_y.addAttribute(r,p,e+3),_y.addAttribute(r,p,b),_y.addAttribute(r,p,b+3)),(t.tangent||t.bitangent)&&(_=g.fromArray(i,l,_),t.bitangent&&(_y.addAttribute(u,_,e),_y.addAttribute(u,_,e+3),_y.addAttribute(u,_,b),_y.addAttribute(u,_,b+3)),t.tangent&&(m=g.normalize(g.cross(_,p,m),m),_y.addAttribute(s,m,e),_y.addAttribute(s,m,e+3),_y.addAttribute(s,m,b),_y.addAttribute(s,m,b+3))),b+=6}if(t.normal){for(r.set(i),l=0;l<a;l+=3)r[l+a]=-i[l],r[l+a+1]=-i[l+1],r[l+a+2]=-i[l+2];e.normal.values=r}else e.normal=void 0;if(t.bitangent?(u.set(o),u.set(o,a),e.bitangent.values=u):e.bitangent=void 0,t.tangent){const t=e.tangent.values;s.set(t),s.set(t,a),e.tangent.values=s}}if(t.st){const t=e.st.values,n=new Float32Array(6*s);n.set(t),n.set(t,s);let i=2*s;for(let e=0;e<2;e++){for(n[i++]=t[0],n[i++]=t[1],l=2;l<s;l+=2){const e=t[l],o=t[l+1];n[i++]=e,n[i++]=o,n[i++]=e,n[i++]=o}n[i++]=t[0],n[i++]=t[1]}e.st.values=n}return e}function Iy(e,t,n){n[t++]=e[0],n[t++]=e[1],n[t++]=e[2];for(let i=3;i<e.length;i+=3){const o=e[i],r=e[i+1],a=e[i+2];n[t++]=o,n[t++]=r,n[t++]=a,n[t++]=o,n[t++]=r,n[t++]=a}return n[t++]=e[0],n[t++]=e[1],n[t++]=e[2],n}function Dy(e,t){const n=new qu({position:t.position,normal:t.normal||t.bitangent||e.shadowVolume,tangent:t.tangent,bitangent:t.normal||t.bitangent,st:t.st}),i=e.ellipsoid,o=_y.computePositions(e),a=xy(o,n,i),s=e.height,c=e.extrudedHeight;let l=a.attributes;const u=a.indices;let h=l.position.values,d=h.length;const f=new Float64Array(6*d);let p=new Float64Array(d);p.set(h);let m,_=new Float64Array(4*d);h=x_.scaleToGeodeticHeight(h,s,i),_=Iy(h,0,_),p=x_.scaleToGeodeticHeight(p,c,i),_=Iy(p,2*d,_),f.set(h),f.set(p,d),f.set(_,2*d),l.position.values=f,l=Sy(l,t);const g=d/3;if(e.shadowVolume){const e=l.normal.values;d=e.length;let n=new Float32Array(6*d);for(m=0;m<d;m++)e[m]=-e[m];n.set(e,d),n=Iy(e,4*d,n),l.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:n}),t.normal||(l.normal=void 0)}if(Object(r["a"])(e.offsetAttribute)){let t=new Uint8Array(6*g);if(e.offsetAttribute===Gu.TOP)t=t.fill(1,0,g).fill(1,2*g,4*g);else{const n=e.offsetAttribute===Gu.NONE?0:1;t=t.fill(n)}l.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}const b=u.length,y=g+g,v=ll.createTypedArray(f.length/3,2*b+3*y);v.set(u);let O,A,w,T,C=b;for(m=0;m<b;m+=3){const e=u[m],t=u[m+1],n=u[m+2];v[C++]=n+g,v[C++]=t+g,v[C++]=e+g}for(m=0;m<y;m+=2)O=m+y,A=O+y,w=O+1,T=A+1,v[C++]=O,v[C++]=A,v[C++]=w,v[C++]=w,v[C++]=A,v[C++]=T;return{attributes:l,indices:v}}const Py=new g,jy=new g,Ry=new I;function Ly(e,t,n,i,o,r){const a=g.subtract(t,e,Py);g.normalize(a,a);const s=n.geodeticSurfaceNormal(e,jy),c=g.cross(a,s,Py);g.multiplyByScalar(c,i,c);let l=o.latitude,u=o.longitude,h=r.latitude,d=r.longitude;g.add(e,c,jy),n.cartesianToCartographic(jy,Ry);let f=Ry.latitude,p=Ry.longitude;l=Math.min(l,f),u=Math.min(u,p),h=Math.max(h,f),d=Math.max(d,p),g.subtract(e,c,jy),n.cartesianToCartographic(jy,Ry),f=Ry.latitude,p=Ry.longitude,l=Math.min(l,f),u=Math.min(u,p),h=Math.max(h,f),d=Math.max(d,p),o.latitude=l,o.longitude=u,r.latitude=h,r.longitude=d}const My=new g,Ny=new g,By=new I,Fy=new I;function zy(e,t,n,i,o){e=Cy(e,t);const a=zm(e,g.equalsEpsilon),s=a.length;if(s<2||n<=0)return new Fe;const c=.5*n;let l,u;if(By.latitude=Number.POSITIVE_INFINITY,By.longitude=Number.POSITIVE_INFINITY,Fy.latitude=Number.NEGATIVE_INFINITY,Fy.longitude=Number.NEGATIVE_INFINITY,i===Tg.ROUNDED){const e=a[0];g.subtract(e,a[1],My),g.normalize(My,My),g.multiplyByScalar(My,c,My),g.add(e,My,Ny),t.cartesianToCartographic(Ny,Ry),l=Ry.latitude,u=Ry.longitude,By.latitude=Math.min(By.latitude,l),By.longitude=Math.min(By.longitude,u),Fy.latitude=Math.max(Fy.latitude,l),Fy.longitude=Math.max(Fy.longitude,u)}for(let r=0;r<s-1;++r)Ly(a[r],a[r+1],t,c,By,Fy);const h=a[s-1];g.subtract(h,a[s-2],My),g.normalize(My,My),g.multiplyByScalar(My,c,My),g.add(h,My,Ny),Ly(h,Ny,t,c,By,Fy),i===Tg.ROUNDED&&(t.cartesianToCartographic(Ny,Ry),l=Ry.latitude,u=Ry.longitude,By.latitude=Math.min(By.latitude,l),By.longitude=Math.min(By.longitude,u),Fy.latitude=Math.max(Fy.latitude,l),Fy.longitude=Math.max(Fy.longitude,u));const d=Object(r["a"])(o)?o:new Fe;return d.north=Fy.latitude,d.south=By.latitude,d.east=Fy.longitude,d.west=By.longitude,d}function ky(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.width;i["a"].defined("options.positions",t),i["a"].defined("options.width",n);const r=Object(o["a"])(e.height,0),a=Object(o["a"])(e.extrudedHeight,r);this._positions=t,this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._vertexFormat=qu.clone(Object(o["a"])(e.vertexFormat,qu.DEFAULT)),this._width=n,this._height=Math.max(r,a),this._extrudedHeight=Math.min(r,a),this._cornerType=Object(o["a"])(e.cornerType,Tg.ROUNDED),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._shadowVolume=Object(o["a"])(e.shadowVolume,!1),this._workerName="createCorridorGeometry",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this.packedLength=1+t.length*g.packedLength+k.packedLength+qu.packedLength+7}ky.pack=function(e,t,n){i["a"].defined("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0);const r=e._positions,a=r.length;t[n++]=a;for(let i=0;i<a;++i,n+=g.packedLength)g.pack(r[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n++]=e._shadowVolume?1:0,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const Uy=k.clone(k.UNIT_SPHERE),Vy=new qu,Hy={positions:void 0,ellipsoid:Uy,vertexFormat:Vy,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};ky.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=e[t++],s=new Array(a);for(let i=0;i<a;++i,t+=g.packedLength)s[i]=g.unpack(e,t);const c=k.unpack(e,t,Uy);t+=k.packedLength;const l=qu.unpack(e,t,Vy);t+=qu.packedLength;const u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t++],m=1===e[t++],_=e[t];return Object(r["a"])(n)?(n._positions=s,n._ellipsoid=k.clone(c,n._ellipsoid),n._vertexFormat=qu.clone(l,n._vertexFormat),n._width=u,n._height=h,n._extrudedHeight=d,n._cornerType=f,n._granularity=p,n._shadowVolume=m,n._offsetAttribute=-1===_?void 0:_,n):(Hy.positions=s,Hy.width=u,Hy.height=h,Hy.extrudedHeight=d,Hy.cornerType=f,Hy.granularity=p,Hy.shadowVolume=m,Hy.offsetAttribute=-1===_?void 0:_,new ky(Hy))},ky.computeRectangle=function(e,t){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const n=e.positions,r=e.width;i["a"].defined("options.positions",n),i["a"].defined("options.width",r);const a=Object(o["a"])(e.ellipsoid,k.WGS84),s=Object(o["a"])(e.cornerType,Tg.ROUNDED);return zy(n,a,r,s,t)},ky.createGeometry=function(e){let t=e._positions;const n=e._width,i=e._ellipsoid;t=Cy(t,i);const o=zm(t,g.equalsEpsilon);if(o.length<2||n<=0)return;const a=e._height,c=e._extrudedHeight,l=!s["a"].equalsEpsilon(a,c,0,s["a"].EPSILON2),u=e._vertexFormat,h={ellipsoid:i,positions:o,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!0};let d;if(l)h.height=a,h.extrudedHeight=c,h.shadowVolume=e._shadowVolume,h.offsetAttribute=e._offsetAttribute,d=Dy(h,u);else{const t=_y.computePositions(h);if(d=xy(t,u,i),d.attributes.position.values=x_.scaleToGeodeticHeight(d.attributes.position.values,a,i),Object(r["a"])(e._offsetAttribute)){const t=e._offsetAttribute===Gu.NONE?0:1,n=d.attributes.position.values.length,i=new Uint8Array(n/3).fill(t);d.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}}const f=d.attributes,p=Tt.fromVertices(f.position.values,void 0,3);return u.position||(d.attributes.position.values=void 0),new Fu({attributes:f,indices:d.indices,primitiveType:Eu.TRIANGLES,boundingSphere:p,offsetAttribute:e._offsetAttribute})},ky.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new ky({positions:e._positions,width:e._width,cornerType:e._cornerType,ellipsoid:o,granularity:i,extrudedHeight:r,height:a,vertexFormat:qu.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(ky.prototype,{rectangle:{get:function(){return Object(r["a"])(this._rectangle)||(this._rectangle=zy(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}});var Gy=ky;const Wy=new g,qy=new g,Yy=new g;function Xy(e,t){for(let n=0;n<e.length;n++)e[n]=t.scaleToGeodeticSurface(e[n],e[n]);return e}function Ky(e,t){const n=[],i=e.positions,o=e.corners,a=e.endPositions,s=new Vu;let c,l,u,h=0,d=0,f=0;for(l=0;l<i.length;l+=2)u=i[l].length-3,h+=u,f+=u/3*4,d+=i[l+1].length-3;for(h+=3,d+=3,l=0;l<o.length;l++){c=o[l];const e=o[l].leftPositions;Object(r["a"])(e)?(u=e.length,h+=u,f+=u/3*2):(u=o[l].rightPositions.length,d+=u,f+=u/3*2)}const p=Object(r["a"])(a);let m;p&&(m=a[0].length-3,h+=m,d+=m,m/=3,f+=4*m);const _=h+d,b=new Float64Array(_);let y,v,O,A,w,T,C=0,E=_-1;const x=m/2,S=ll.createTypedArray(_/3,f+4);let I=0;if(S[I++]=C/3,S[I++]=(E-2)/3,p){n.push(C/3),T=Wy,w=qy;const e=a[0];for(l=0;l<x;l++)T=g.fromArray(e,3*(x-1-l),T),w=g.fromArray(e,3*(x+l),w),_y.addAttribute(b,w,C),_y.addAttribute(b,T,void 0,E),v=C/3,A=v+1,y=(E-2)/3,O=y-1,S[I++]=y,S[I++]=O,S[I++]=v,S[I++]=A,C+=3,E-=3}let D=0,P=i[D++],j=i[D++];for(b.set(P,C),b.set(j,E-j.length+1),u=j.length-3,n.push(C/3,(E-2)/3),l=0;l<u;l+=3)v=C/3,A=v+1,y=(E-2)/3,O=y-1,S[I++]=y,S[I++]=O,S[I++]=v,S[I++]=A,C+=3,E-=3;for(l=0;l<o.length;l++){let e;c=o[l];const a=c.leftPositions,s=c.rightPositions;let h,d=Yy;if(Object(r["a"])(a)){for(E-=3,h=O,n.push(A),e=0;e<a.length/3;e++)d=g.fromArray(a,3*e,d),S[I++]=h-e-1,S[I++]=h-e,_y.addAttribute(b,d,void 0,E),E-=3;n.push(h-Math.floor(a.length/6)),t===Tg.BEVELED&&n.push((E-2)/3+1),C+=3}else{for(C+=3,h=A,n.push(O),e=0;e<s.length/3;e++)d=g.fromArray(s,3*e,d),S[I++]=h+e,S[I++]=h+e+1,_y.addAttribute(b,d,C),C+=3;n.push(h+Math.floor(s.length/6)),t===Tg.BEVELED&&n.push(C/3-1),E-=3}for(P=i[D++],j=i[D++],P.splice(0,3),j.splice(j.length-3,3),b.set(P,C),b.set(j,E-j.length+1),u=j.length-3,e=0;e<j.length;e+=3)A=C/3,v=A-1,O=(E-2)/3,y=O+1,S[I++]=y,S[I++]=O,S[I++]=v,S[I++]=A,C+=3,E-=3;C-=3,E+=3,n.push(C/3,(E-2)/3)}if(p){C+=3,E-=3,T=Wy,w=qy;const e=a[1];for(l=0;l<x;l++)T=g.fromArray(e,3*(m-l-1),T),w=g.fromArray(e,3*l,w),_y.addAttribute(b,T,void 0,E),_y.addAttribute(b,w,C),A=C/3,v=A-1,O=(E-2)/3,y=O+1,S[I++]=y,S[I++]=O,S[I++]=v,S[I++]=A,C+=3,E-=3;n.push(C/3)}else n.push(C/3,(E-2)/3);return S[I++]=C/3,S[I++]=(E-2)/3,s.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:b}),{attributes:s,indices:S,wallIndices:n}}function $y(e){const t=e.ellipsoid,n=_y.computePositions(e),i=Ky(n,e.cornerType),o=i.wallIndices,a=e.height,s=e.extrudedHeight,c=i.attributes,l=i.indices;let u=c.position.values,h=u.length,d=new Float64Array(h);d.set(u);const f=new Float64Array(2*h);if(u=x_.scaleToGeodeticHeight(u,a,t),d=x_.scaleToGeodeticHeight(d,s,t),f.set(u),f.set(d,h),c.position.values=f,h/=3,Object(r["a"])(e.offsetAttribute)){let t=new Uint8Array(2*h);if(e.offsetAttribute===Gu.TOP)t=t.fill(1,0,h);else{const n=e.offsetAttribute===Gu.NONE?0:1;t=t.fill(n)}c.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}let p;const m=l.length,_=ll.createTypedArray(f.length/3,2*(m+o.length));_.set(l);let g,b,y=m;for(p=0;p<m;p+=2){const e=l[p],t=l[p+1];_[y++]=e+h,_[y++]=t+h}for(p=0;p<o.length;p++)g=o[p],b=g+h,_[y++]=g,_[y++]=b;return{attributes:c,indices:_}}function Jy(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.width;i["a"].typeOf.object("options.positions",t),i["a"].typeOf.number("options.width",n);const r=Object(o["a"])(e.height,0),a=Object(o["a"])(e.extrudedHeight,r);this._positions=t,this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._width=n,this._height=Math.max(r,a),this._extrudedHeight=Math.min(r,a),this._cornerType=Object(o["a"])(e.cornerType,Tg.ROUNDED),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._offsetAttribute=e.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+t.length*g.packedLength+k.packedLength+6}Jy.pack=function(e,t,n){i["a"].typeOf.object("value",e),i["a"].typeOf.object("array",t),n=Object(o["a"])(n,0);const r=e._positions,a=r.length;t[n++]=a;for(let i=0;i<a;++i,n+=g.packedLength)g.pack(r[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._width,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._cornerType,t[n++]=e._granularity,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const Qy=k.clone(k.UNIT_SPHERE),Zy={positions:void 0,ellipsoid:Qy,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};Jy.unpack=function(e,t,n){i["a"].typeOf.object("array",e),t=Object(o["a"])(t,0);const a=e[t++],s=new Array(a);for(let i=0;i<a;++i,t+=g.packedLength)s[i]=g.unpack(e,t);const c=k.unpack(e,t,Qy);t+=k.packedLength;const l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t];return Object(r["a"])(n)?(n._positions=s,n._ellipsoid=k.clone(c,n._ellipsoid),n._width=l,n._height=u,n._extrudedHeight=h,n._cornerType=d,n._granularity=f,n._offsetAttribute=-1===p?void 0:p,n):(Zy.positions=s,Zy.width=l,Zy.height=u,Zy.extrudedHeight=h,Zy.cornerType=d,Zy.granularity=f,Zy.offsetAttribute=-1===p?void 0:p,new Jy(Zy))},Jy.createGeometry=function(e){let t=e._positions;const n=e._width,i=e._ellipsoid;t=Xy(t,i);const o=zm(t,g.equalsEpsilon);if(o.length<2||n<=0)return;const a=e._height,c=e._extrudedHeight,l=!s["a"].equalsEpsilon(a,c,0,s["a"].EPSILON2),u={ellipsoid:i,positions:o,width:n,cornerType:e._cornerType,granularity:e._granularity,saveAttributes:!1};let h;if(l)u.height=a,u.extrudedHeight=c,u.offsetAttribute=e._offsetAttribute,h=$y(u);else{const t=_y.computePositions(u);if(h=Ky(t,u.cornerType),h.attributes.position.values=x_.scaleToGeodeticHeight(h.attributes.position.values,a,i),Object(r["a"])(e._offsetAttribute)){const t=h.attributes.position.values.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);h.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}}const d=h.attributes,f=Tt.fromVertices(d.position.values,void 0,3);return new Fu({attributes:d,indices:h.indices,primitiveType:Eu.LINES,boundingSphere:f,offsetAttribute:e._offsetAttribute})};var ev=Jy;function tv(e){this.planes=Object(o["a"])(e,[])}const nv=[new g,new g,new g];g.clone(g.UNIT_X,nv[0]),g.clone(g.UNIT_Y,nv[1]),g.clone(g.UNIT_Z,nv[2]);const iv=new g,ov=new g,rv=new ji(new g(1,0,0),0);tv.fromBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("boundingSphere is required.");Object(r["a"])(t)||(t=new tv);const n=nv.length,i=t.planes;i.length=2*n;const o=e.center,s=e.radius;let c=0;for(let a=0;a<n;++a){const e=nv[a];let t=i[c],n=i[c+1];Object(r["a"])(t)||(t=i[c]=new be),Object(r["a"])(n)||(n=i[c+1]=new be),g.multiplyByScalar(e,-s,iv),g.add(o,iv,iv),t.x=e.x,t.y=e.y,t.z=e.z,t.w=-g.dot(e,iv),g.multiplyByScalar(e,s,iv),g.add(o,iv,iv),n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-g.dot(g.negate(e,ov),iv),c+=2}return t},tv.prototype.computeVisibility=function(e){if(!Object(r["a"])(e))throw new a["a"]("boundingVolume is required.");const t=this.planes;let n=!1;for(let i=0,o=t.length;i<o;++i){const o=e.intersectPlane(ji.fromCartesian4(t[i],rv));if(o===G.OUTSIDE)return G.OUTSIDE;o===G.INTERSECTING&&(n=!0)}return n?G.INTERSECTING:G.INSIDE},tv.prototype.computeVisibilityWithPlaneMask=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("boundingVolume is required.");if(!Object(r["a"])(t))throw new a["a"]("parentPlaneMask is required.");if(t===tv.MASK_OUTSIDE||t===tv.MASK_INSIDE)return t;let n=tv.MASK_INSIDE;const i=this.planes;for(let o=0,r=i.length;o<r;++o){const r=o<31?1<<o:0;if(o<31&&0===(t&r))continue;const a=e.intersectPlane(ji.fromCartesian4(i[o],rv));if(a===G.OUTSIDE)return tv.MASK_OUTSIDE;a===G.INTERSECTING&&(n|=r)}return n},tv.MASK_OUTSIDE=4294967295,tv.MASK_INSIDE=0,tv.MASK_INDETERMINATE=2147483647;var av=tv;function sv(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.callback",e.callback),i["a"].defined("options.width",e.width),i["a"].defined("options.height",e.height),this._callback=e.callback,this._tilingScheme=e.tilingScheme,Object(r["a"])(this._tilingScheme)||(this._tilingScheme=new qt({ellipsoid:Object(o["a"])(e.ellipsoid,k.WGS84)})),this._width=e.width,this._height=e.height;const t=Math.max(this._width,this._height);this._levelZeroMaximumGeometricError=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,t,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new dn["a"];let n=e.credit;"string"===typeof n&&(n=new hn(n)),this._credit=n,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(sv.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),sv.prototype.requestTileGeometry=function(e,t,n,i){const o=this._callback(e,t,n);if(!Object(r["a"])(o))return;const a=this._width,s=this._height;return Promise.resolve(o).then((function(e){let t=e;return Array.isArray(t)&&(t=new Float64Array(t)),new xl({buffer:t,width:a,height:s})}))},sv.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},sv.prototype.getTileDataAvailable=function(e,t,n){},sv.prototype.loadTileDataAvailability=function(e,t,n){};var cv=sv;const lv={computePositions:function(e,t,n,i,o){const r=.5*e,a=-r,c=i+i,l=o?2*c:c,u=new Float64Array(3*l);let h,d=0,f=0;const p=o?3*c:0,m=o?3*(c+i):3*i;for(h=0;h<i;h++){const e=h/i*s["a"].TWO_PI,c=Math.cos(e),l=Math.sin(e),_=c*n,g=l*n,b=c*t,y=l*t;u[f+p]=_,u[f+p+1]=g,u[f+p+2]=a,u[f+m]=b,u[f+m+1]=y,u[f+m+2]=r,f+=3,o&&(u[d++]=_,u[d++]=g,u[d++]=a,u[d++]=b,u[d++]=y,u[d++]=r)}return u}};var uv=lv;const hv=new Gt,dv=new g,fv=new g,pv=new g,mv=new g;function _v(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.length,n=e.topRadius,i=e.bottomRadius,s=Object(o["a"])(e.vertexFormat,qu.DEFAULT),c=Object(o["a"])(e.slices,128);if(!Object(r["a"])(t))throw new a["a"]("options.length must be defined.");if(!Object(r["a"])(n))throw new a["a"]("options.topRadius must be defined.");if(!Object(r["a"])(i))throw new a["a"]("options.bottomRadius must be defined.");if(c<3)throw new a["a"]("options.slices must be greater than or equal to 3.");if(Object(r["a"])(e.offsetAttribute)&&e.offsetAttribute===Gu.TOP)throw new a["a"]("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=i,this._vertexFormat=qu.clone(s),this._slices=c,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderGeometry"}_v.packedLength=qu.packedLength+5,_v.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const gv=new qu,bv={vertexFormat:gv,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};let yv;_v.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");t=Object(o["a"])(t,0);const i=qu.unpack(e,t,gv);t+=qu.packedLength;const s=e[t++],c=e[t++],l=e[t++],u=e[t++],h=e[t];return Object(r["a"])(n)?(n._vertexFormat=qu.clone(i,n._vertexFormat),n._length=s,n._topRadius=c,n._bottomRadius=l,n._slices=u,n._offsetAttribute=-1===h?void 0:h,n):(bv.length=s,bv.topRadius=c,bv.bottomRadius=l,bv.slices=u,bv.offsetAttribute=-1===h?void 0:h,new _v(bv))},_v.createGeometry=function(e){let t=e._length;const n=e._topRadius,i=e._bottomRadius,o=e._vertexFormat,a=e._slices;if(t<=0||n<0||i<0||0===n&&0===i)return;const c=a+a,l=a+c,u=c+c,h=uv.computePositions(t,n,i,a,!0),d=o.st?new Float32Array(2*u):void 0,f=o.normal?new Float32Array(3*u):void 0,p=o.tangent?new Float32Array(3*u):void 0,m=o.bitangent?new Float32Array(3*u):void 0;let _;const b=o.normal||o.tangent||o.bitangent;if(b){const e=o.tangent||o.bitangent;let r=0,c=0,l=0;const u=Math.atan2(i-n,t),h=dv;h.z=Math.sin(u);const d=Math.cos(u);let y=pv,v=fv;for(_=0;_<a;_++){const t=_/a*s["a"].TWO_PI,n=d*Math.cos(t),i=d*Math.sin(t);b&&(h.x=n,h.y=i,e&&(y=g.normalize(g.cross(g.UNIT_Z,h,y),y)),o.normal&&(f[r++]=h.x,f[r++]=h.y,f[r++]=h.z,f[r++]=h.x,f[r++]=h.y,f[r++]=h.z),o.tangent&&(p[c++]=y.x,p[c++]=y.y,p[c++]=y.z,p[c++]=y.x,p[c++]=y.y,p[c++]=y.z),o.bitangent&&(v=g.normalize(g.cross(h,y,v),v),m[l++]=v.x,m[l++]=v.y,m[l++]=v.z,m[l++]=v.x,m[l++]=v.y,m[l++]=v.z))}for(_=0;_<a;_++)o.normal&&(f[r++]=0,f[r++]=0,f[r++]=-1),o.tangent&&(p[c++]=1,p[c++]=0,p[c++]=0),o.bitangent&&(m[l++]=0,m[l++]=-1,m[l++]=0);for(_=0;_<a;_++)o.normal&&(f[r++]=0,f[r++]=0,f[r++]=1),o.tangent&&(p[c++]=1,p[c++]=0,p[c++]=0),o.bitangent&&(m[l++]=0,m[l++]=1,m[l++]=0)}const y=12*a-12,v=ll.createTypedArray(u,y);let O=0,A=0;for(_=0;_<a-1;_++)v[O++]=A,v[O++]=A+2,v[O++]=A+3,v[O++]=A,v[O++]=A+3,v[O++]=A+1,A+=2;for(v[O++]=c-2,v[O++]=0,v[O++]=1,v[O++]=c-2,v[O++]=1,v[O++]=c-1,_=1;_<a-1;_++)v[O++]=c+_+1,v[O++]=c+_,v[O++]=c;for(_=1;_<a-1;_++)v[O++]=l,v[O++]=l+_,v[O++]=l+_+1;let w=0;if(o.st){const e=Math.max(n,i);for(_=0;_<u;_++){const t=g.fromArray(h,3*_,mv);d[w++]=(t.x+e)/(2*e),d[w++]=(t.y+e)/(2*e)}}const T=new Vu;o.position&&(T.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:h})),o.normal&&(T.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:f})),o.tangent&&(T.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:p})),o.bitangent&&(T.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:m})),o.st&&(T.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:d})),hv.x=.5*t,hv.y=Math.max(i,n);const C=new Tt(g.ZERO,Gt.magnitude(hv));if(Object(r["a"])(e._offsetAttribute)){t=h.length;const n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);T.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:T,indices:v,primitiveType:Eu.TRIANGLES,boundingSphere:C,offsetAttribute:e._offsetAttribute})},_v.getUnitCylinder=function(){return Object(r["a"])(yv)||(yv=_v.createGeometry(new _v({topRadius:1,bottomRadius:1,length:1,vertexFormat:qu.POSITION_ONLY}))),yv};var vv=_v;const Ov=new Gt;function Av(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.length,n=e.topRadius,s=e.bottomRadius,c=Object(o["a"])(e.slices,128),l=Math.max(Object(o["a"])(e.numberOfVerticalLines,16),0);if(i["a"].typeOf.number("options.positions",t),i["a"].typeOf.number("options.topRadius",n),i["a"].typeOf.number("options.bottomRadius",s),i["a"].typeOf.number.greaterThanOrEquals("options.slices",c,3),Object(r["a"])(e.offsetAttribute)&&e.offsetAttribute===Gu.TOP)throw new a["a"]("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=t,this._topRadius=n,this._bottomRadius=s,this._slices=c,this._numberOfVerticalLines=l,this._offsetAttribute=e.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}Av.packedLength=6,Av.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e._length,t[n++]=e._topRadius,t[n++]=e._bottomRadius,t[n++]=e._slices,t[n++]=e._numberOfVerticalLines,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const wv={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};Av.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=e[t++],s=e[t++],c=e[t++],l=e[t++],u=e[t++],h=e[t];return Object(r["a"])(n)?(n._length=a,n._topRadius=s,n._bottomRadius=c,n._slices=l,n._numberOfVerticalLines=u,n._offsetAttribute=-1===h?void 0:h,n):(wv.length=a,wv.topRadius=s,wv.bottomRadius=c,wv.slices=l,wv.numberOfVerticalLines=u,wv.offsetAttribute=-1===h?void 0:h,new Av(wv))},Av.createGeometry=function(e){let t=e._length;const n=e._topRadius,i=e._bottomRadius,o=e._slices,a=e._numberOfVerticalLines;if(t<=0||n<0||i<0||0===n&&0===i)return;const s=2*o,c=uv.computePositions(t,n,i,o,!1);let l,u=2*o;if(a>0){const e=Math.min(a,o);l=Math.round(o/e),u+=e}const h=ll.createTypedArray(s,2*u);let d,f=0;for(d=0;d<o-1;d++)h[f++]=d,h[f++]=d+1,h[f++]=d+o,h[f++]=d+1+o;if(h[f++]=o-1,h[f++]=0,h[f++]=o+o-1,h[f++]=o,a>0)for(d=0;d<o;d+=l)h[f++]=d,h[f++]=d+o;const p=new Vu;p.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:c}),Ov.x=.5*t,Ov.y=Math.max(i,n);const m=new Tt(g.ZERO,Gt.magnitude(Ov));if(Object(r["a"])(e._offsetAttribute)){t=c.length;const n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);p.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:p,indices:h,primitiveType:Eu.LINES,boundingSphere:m,offsetAttribute:e._offsetAttribute})};var Tv=Av;function Cv(e){this.proxy=e}Cv.prototype.getURL=function(e){const t=-1===this.proxy.indexOf("?")?"?":"";return this.proxy+t+encodeURIComponent(e)};var Ev=Cv;function xv(e,t){e=Object(o["a"])(e,0),this._near=e,t=Object(o["a"])(t,Number.MAX_VALUE),this._far=t}Object.defineProperties(xv.prototype,{near:{get:function(){return this._near},set:function(e){this._near=e}},far:{get:function(){return this._far},set:function(e){this._far=e}}}),xv.packedLength=2,xv.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),t[n++]=e.near,t[n]=e.far,t},xv.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");return t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new xv),n.near=e[t++],n.far=e[t],n},xv.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.near===t.near&&e.far===t.far},xv.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)||(t=new xv),t.near=e.near,t.far=e.far,t},xv.prototype.clone=function(e){return xv.clone(this,e)},xv.prototype.equals=function(e){return xv.equals(this,e)};var Sv=xv;function Iv(e,t){if(e=Object(o["a"])(e,0),t=Object(o["a"])(t,Number.MAX_VALUE),t<=e)throw new a["a"]("far distance must be greater than near distance.");this.value=new Float32Array([e,t])}Object.defineProperties(Iv.prototype,{componentDatatype:{get:function(){return Ks.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}}),Iv.fromDistanceDisplayCondition=function(e){if(!Object(r["a"])(e))throw new a["a"]("distanceDisplayCondition is required.");if(e.far<=e.near)throw new a["a"]("distanceDisplayCondition.far distance must be greater than distanceDisplayCondition.near distance.");return new Iv(e.near,e.far)},Iv.toValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("distanceDisplayCondition is required.");return Object(r["a"])(t)?(t[0]=e.near,t[1]=e.far,t):new Float32Array([e.near,e.far])};var Dv=Iv;function Pv(e){i["a"].typeOf.object("options",e),i["a"].defined("options.comparator",e.comparator),Object(r["a"])(e.maximumLength)&&i["a"].typeOf.number.greaterThanOrEquals("options.maximumLength",e.maximumLength,0),this._comparator=e.comparator,this._maximumLength=e.maximumLength,this._array=Object(r["a"])(e.maximumLength)?new Array(e.maximumLength):[],this._length=0}function jv(e,t,n){const i=e._array,o=i[t];i[t]=i[n],i[n]=o}function Rv(e,t,n){return e._comparator(e._array[t],e._array[n])<0}function Lv(e,t,n){return e._comparator(e._array[t],e._array[n])>0}function Mv(e,t){if(0===t)return;const n=Math.floor(s["a"].log2(t+1))%2===0,i=Math.floor((t-1)/2),o=Rv(e,t,i);o!==n&&(jv(e,t,i),t=i);while(t>=3){const n=Math.floor((t-3)/4);if(Rv(e,t,n)!==o)break;jv(e,t,n),t=n}}function Nv(e,t){const n=e._length,i=Math.floor(s["a"].log2(t+1))%2===0;let o;while((o=2*t+1)<n){let r=o;const a=o+1;if(a<n){Rv(e,a,r)===i&&(r=a);const t=2*o+1,s=Math.max(Math.min(n-t,4),0);for(let n=0;n<s;n++){const o=t+n;Rv(e,o,r)===i&&(r=o)}}if(Rv(e,r,t)===i&&(jv(e,r,t),r!==o&&r!==a)){const t=Math.floor((r-1)/2);Lv(e,r,t)===i&&jv(e,r,t)}t=r}}Object.defineProperties(Pv.prototype,{length:{get:function(){return this._length}},maximumLength:{get:function(){return this._maximumLength},set:function(e){if(Object(r["a"])(e)){i["a"].typeOf.number.greaterThanOrEquals("maximumLength",e,0);while(this._length>e)this.removeMinimum();this._array.length=e}this._maximumLength=e}},internalArray:{get:function(){return this._array}},comparator:{get:function(){return this._comparator}}}),Pv.prototype.clone=function(){const e=this._maximumLength,t=this._comparator,n=this._array,i=this._length,o=new Pv({comparator:t,maximumLength:e});o._length=i;for(let r=0;r<i;r++)o._array[r]=n[r];return o},Pv.prototype.reset=function(){this._length=0;const e=this._maximumLength;if(Object(r["a"])(e))for(let t=0;t<e;t++)this._array[t]=void 0;else this._array.length=0},Pv.prototype.resort=function(){const e=this._length;for(let t=0;t<e;t++)Mv(this,t)},Pv.prototype.insert=function(e){let t;const n=this._maximumLength;if(Object(r["a"])(n)){if(0===n)return;if(this._length===n){const n=this._array[0];if(this._comparator(e,n)<=0)return e;t=this.removeMinimum()}}const i=this._length;return this._array[i]=e,this._length++,Mv(this,i),t},Pv.prototype.removeMinimum=function(){const e=this._length;if(0===e)return;this._length--;const t=this._array[0];return e>=2&&(this._array[0]=this._array[e-1],Nv(this,0)),this._array[e-1]=void 0,t},Pv.prototype.removeMaximum=function(){const e=this._length;if(0===e)return;let t;if(this._length--,e<=2)t=this._array[e-1];else{const n=Lv(this,1,2)?1:2;t=this._array[n],this._array[n]=this._array[e-1],e>=4&&Nv(this,n)}return this._array[e-1]=void 0,t},Pv.prototype.getMinimum=function(){const e=this._length;if(0!==e)return this._array[0]},Pv.prototype.getMaximum=function(){const e=this._length;if(0!==e)return e<=2?this._array[e-1]:this._array[Lv(this,1,2)?1:2]};var Bv=Pv;function Fv(){this.head=void 0,this.tail=void 0,this._length=0}function zv(e,t,n){this.item=e,this.previous=t,this.next=n}function kv(e,t){Object(r["a"])(t.previous)&&Object(r["a"])(t.next)?(t.previous.next=t.next,t.next.previous=t.previous):Object(r["a"])(t.previous)?(t.previous.next=void 0,e.tail=t.previous):Object(r["a"])(t.next)?(t.next.previous=void 0,e.head=t.next):(e.head=void 0,e.tail=void 0),t.next=void 0,t.previous=void 0}Object.defineProperties(Fv.prototype,{length:{get:function(){return this._length}}}),Fv.prototype.add=function(e){const t=new zv(e,this.tail,void 0);return Object(r["a"])(this.tail)?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t},Fv.prototype.remove=function(e){Object(r["a"])(e)&&(kv(this,e),--this._length)},Fv.prototype.splice=function(e,t){if(e===t)return;kv(this,t);const n=e.next;e.next=t,this.tail===e?this.tail=t:n.previous=t,t.next=n,t.previous=e};var Uv=Fv,Vv=n("22b5");const Hv={LINEAR_NONE:Vv["a"].Linear.None,QUADRATIC_IN:Vv["a"].Quadratic.In,QUADRATIC_OUT:Vv["a"].Quadratic.Out,QUADRATIC_IN_OUT:Vv["a"].Quadratic.InOut,CUBIC_IN:Vv["a"].Cubic.In,CUBIC_OUT:Vv["a"].Cubic.Out,CUBIC_IN_OUT:Vv["a"].Cubic.InOut,QUARTIC_IN:Vv["a"].Quartic.In,QUARTIC_OUT:Vv["a"].Quartic.Out,QUARTIC_IN_OUT:Vv["a"].Quartic.InOut,QUINTIC_IN:Vv["a"].Quintic.In,QUINTIC_OUT:Vv["a"].Quintic.Out,QUINTIC_IN_OUT:Vv["a"].Quintic.InOut,SINUSOIDAL_IN:Vv["a"].Sinusoidal.In,SINUSOIDAL_OUT:Vv["a"].Sinusoidal.Out,SINUSOIDAL_IN_OUT:Vv["a"].Sinusoidal.InOut,EXPONENTIAL_IN:Vv["a"].Exponential.In,EXPONENTIAL_OUT:Vv["a"].Exponential.Out,EXPONENTIAL_IN_OUT:Vv["a"].Exponential.InOut,CIRCULAR_IN:Vv["a"].Circular.In,CIRCULAR_OUT:Vv["a"].Circular.Out,CIRCULAR_IN_OUT:Vv["a"].Circular.InOut,ELASTIC_IN:Vv["a"].Elastic.In,ELASTIC_OUT:Vv["a"].Elastic.Out,ELASTIC_IN_OUT:Vv["a"].Elastic.InOut,BACK_IN:Vv["a"].Back.In,BACK_OUT:Vv["a"].Back.Out,BACK_IN_OUT:Vv["a"].Back.InOut,BOUNCE_IN:Vv["a"].Bounce.In,BOUNCE_OUT:Vv["a"].Bounce.Out,BOUNCE_IN_OUT:Vv["a"].Bounce.InOut};var Gv=Object.freeze(Hv);const Wv=new g,qv=new g,Yv=new g,Xv=new g,Kv=new g,$v=new g(1,1,1),Jv=Math.cos,Qv=Math.sin;function Zv(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.radii,$v),n=Object(o["a"])(e.innerRadii,t),i=Object(o["a"])(e.minimumClock,0),r=Object(o["a"])(e.maximumClock,s["a"].TWO_PI),c=Object(o["a"])(e.minimumCone,0),l=Object(o["a"])(e.maximumCone,s["a"].PI),u=Math.round(Object(o["a"])(e.stackPartitions,64)),h=Math.round(Object(o["a"])(e.slicePartitions,64)),d=Object(o["a"])(e.vertexFormat,qu.DEFAULT);if(h<3)throw new a["a"]("options.slicePartitions cannot be less than three.");if(u<3)throw new a["a"]("options.stackPartitions cannot be less than three.");this._radii=g.clone(t),this._innerRadii=g.clone(n),this._minimumClock=i,this._maximumClock=r,this._minimumCone=c,this._maximumCone=l,this._stackPartitions=u,this._slicePartitions=h,this._vertexFormat=qu.clone(d),this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidGeometry"}Zv.packedLength=2*g.packedLength+qu.packedLength+7,Zv.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),g.pack(e._radii,t,n),n+=g.packedLength,g.pack(e._innerRadii,t,n),n+=g.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const eO=new g,tO=new g,nO=new qu,iO={radii:eO,innerRadii:tO,vertexFormat:nO,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};let oO;Zv.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");t=Object(o["a"])(t,0);const i=g.unpack(e,t,eO);t+=g.packedLength;const s=g.unpack(e,t,tO);t+=g.packedLength;const c=qu.unpack(e,t,nO);t+=qu.packedLength;const l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t++],m=e[t];return Object(r["a"])(n)?(n._radii=g.clone(i,n._radii),n._innerRadii=g.clone(s,n._innerRadii),n._vertexFormat=qu.clone(c,n._vertexFormat),n._minimumClock=l,n._maximumClock=u,n._minimumCone=h,n._maximumCone=d,n._stackPartitions=f,n._slicePartitions=p,n._offsetAttribute=-1===m?void 0:m,n):(iO.minimumClock=l,iO.maximumClock=u,iO.minimumCone=h,iO.maximumCone=d,iO.stackPartitions=f,iO.slicePartitions=p,iO.offsetAttribute=-1===m?void 0:m,new Zv(iO))},Zv.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const i=e._minimumClock,o=e._maximumClock,a=e._minimumCone,c=e._maximumCone,l=e._vertexFormat;let u,h,d=e._slicePartitions+1,f=e._stackPartitions+1;d=Math.round(d*Math.abs(o-i)/s["a"].TWO_PI),f=Math.round(f*Math.abs(c-a)/s["a"].PI),d<2&&(d=2),f<2&&(f=2);let p=0;const m=[a],_=[i];for(u=0;u<f;u++)m.push(a+u*(c-a)/(f-1));for(m.push(c),h=0;h<d;h++)_.push(i+h*(o-i)/(d-1));_.push(o);const b=m.length,y=_.length;let v=0,O=1;const A=n.x!==t.x||n.y!==t.y||n.z!==t.z;let w=!1,T=!1,C=!1;A&&(O=2,a>0&&(w=!0,v+=d-1),c<Math.PI&&(T=!0,v+=d-1),(o-i)%s["a"].TWO_PI?(C=!0,v+=2*(f-1)+1):v+=1);const E=y*b*O,x=new Float64Array(3*E),S=new Array(E).fill(!1),I=new Array(E).fill(!1),D=d*f*O,P=6*(D+v+1-(d+f)*O),j=ll.createTypedArray(D,P),R=l.normal?new Float32Array(3*E):void 0,L=l.tangent?new Float32Array(3*E):void 0,M=l.bitangent?new Float32Array(3*E):void 0,N=l.st?new Float32Array(2*E):void 0,B=new Array(b),F=new Array(b);for(u=0;u<b;u++)B[u]=Qv(m[u]),F[u]=Jv(m[u]);const z=new Array(y),U=new Array(y);for(h=0;h<y;h++)U[h]=Jv(_[h]),z[h]=Qv(_[h]);for(u=0;u<b;u++)for(h=0;h<y;h++)x[p++]=t.x*B[u]*U[h],x[p++]=t.y*B[u]*z[h],x[p++]=t.z*F[u];let V,H,G,W,q=E/2;if(A)for(u=0;u<b;u++)for(h=0;h<y;h++)x[p++]=n.x*B[u]*U[h],x[p++]=n.y*B[u]*z[h],x[p++]=n.z*F[u],S[q]=!0,u>0&&u!==b-1&&0!==h&&h!==y-1&&(I[q]=!0),q++;for(p=0,u=1;u<b-2;u++)for(V=u*y,H=(u+1)*y,h=1;h<y-2;h++)j[p++]=H+h,j[p++]=H+h+1,j[p++]=V+h+1,j[p++]=H+h,j[p++]=V+h+1,j[p++]=V+h;if(A){const e=b*y;for(u=1;u<b-2;u++)for(V=e+u*y,H=e+(u+1)*y,h=1;h<y-2;h++)j[p++]=H+h,j[p++]=V+h,j[p++]=V+h+1,j[p++]=H+h,j[p++]=V+h+1,j[p++]=H+h+1}if(A){if(w)for(W=b*y,u=1;u<y-2;u++)j[p++]=u,j[p++]=u+1,j[p++]=W+u+1,j[p++]=u,j[p++]=W+u+1,j[p++]=W+u;if(T)for(G=b*y-y,W=b*y*O-y,u=1;u<y-2;u++)j[p++]=G+u+1,j[p++]=G+u,j[p++]=W+u,j[p++]=G+u+1,j[p++]=W+u,j[p++]=W+u+1}if(C){for(u=1;u<b-2;u++)W=y*b+y*u,G=y*u,j[p++]=W,j[p++]=G+y,j[p++]=G,j[p++]=W,j[p++]=W+y,j[p++]=G+y;for(u=1;u<b-2;u++)W=y*b+y*(u+1)-1,G=y*(u+1)-1,j[p++]=G+y,j[p++]=W,j[p++]=G,j[p++]=G+y,j[p++]=W+y,j[p++]=W}const Y=new Vu;l.position&&(Y.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:x}));let X=0,K=0,$=0,J=0;const Q=E/2;let Z;const ee=k.fromCartesian3(t),te=k.fromCartesian3(n);if(l.st||l.normal||l.tangent||l.bitangent){for(u=0;u<E;u++){Z=S[u]?te:ee;const e=g.fromArray(x,3*u,Wv),t=Z.geodeticSurfaceNormal(e,qv);if(I[u]&&g.negate(t,t),l.st){const e=Gt.negate(t,Kv);N[X++]=Math.atan2(e.y,e.x)/s["a"].TWO_PI+.5,N[X++]=Math.asin(t.z)/Math.PI+.5}if(l.normal&&(R[K++]=t.x,R[K++]=t.y,R[K++]=t.z),l.tangent||l.bitangent){const e=Yv;let n,i=0;if(S[u]&&(i=Q),n=!w&&u>=i&&u<i+2*y?g.UNIT_X:g.UNIT_Z,g.cross(n,t,e),g.normalize(e,e),l.tangent&&(L[$++]=e.x,L[$++]=e.y,L[$++]=e.z),l.bitangent){const n=g.cross(t,e,Xv);g.normalize(n,n),M[J++]=n.x,M[J++]=n.y,M[J++]=n.z}}}l.st&&(Y.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:N})),l.normal&&(Y.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:R})),l.tangent&&(Y.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:L})),l.bitangent&&(Y.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:M}))}if(Object(r["a"])(e._offsetAttribute)){const t=x.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);Y.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:Y,indices:j,primitiveType:Eu.TRIANGLES,boundingSphere:Tt.fromEllipsoid(ee),offsetAttribute:e._offsetAttribute})},Zv.getUnitEllipsoid=function(){return Object(r["a"])(oO)||(oO=Zv.createGeometry(new Zv({radii:new g(1,1,1),vertexFormat:qu.POSITION_ONLY}))),oO};var rO=Zv;const aO=new g(1,1,1),sO=Math.cos,cO=Math.sin;function lO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.radii,aO),n=Object(o["a"])(e.innerRadii,t),i=Object(o["a"])(e.minimumClock,0),c=Object(o["a"])(e.maximumClock,s["a"].TWO_PI),l=Object(o["a"])(e.minimumCone,0),u=Object(o["a"])(e.maximumCone,s["a"].PI),h=Math.round(Object(o["a"])(e.stackPartitions,10)),d=Math.round(Object(o["a"])(e.slicePartitions,8)),f=Math.round(Object(o["a"])(e.subdivisions,128));if(h<1)throw new a["a"]("options.stackPartitions cannot be less than 1");if(d<0)throw new a["a"]("options.slicePartitions cannot be less than 0");if(f<0)throw new a["a"]("options.subdivisions must be greater than or equal to zero.");if(Object(r["a"])(e.offsetAttribute)&&e.offsetAttribute===Gu.TOP)throw new a["a"]("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._radii=g.clone(t),this._innerRadii=g.clone(n),this._minimumClock=i,this._maximumClock=c,this._minimumCone=l,this._maximumCone=u,this._stackPartitions=h,this._slicePartitions=d,this._subdivisions=f,this._offsetAttribute=e.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}lO.packedLength=2*g.packedLength+8,lO.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),g.pack(e._radii,t,n),n+=g.packedLength,g.pack(e._innerRadii,t,n),n+=g.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n++]=e._subdivisions,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const uO=new g,hO=new g,dO={radii:uO,innerRadii:hO,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};lO.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");t=Object(o["a"])(t,0);const i=g.unpack(e,t,uO);t+=g.packedLength;const s=g.unpack(e,t,hO);t+=g.packedLength;const c=e[t++],l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=e[t++],m=e[t];return Object(r["a"])(n)?(n._radii=g.clone(i,n._radii),n._innerRadii=g.clone(s,n._innerRadii),n._minimumClock=c,n._maximumClock=l,n._minimumCone=u,n._maximumCone=h,n._stackPartitions=d,n._slicePartitions=f,n._subdivisions=p,n._offsetAttribute=-1===m?void 0:m,n):(dO.minimumClock=c,dO.maximumClock=l,dO.minimumCone=u,dO.maximumCone=h,dO.stackPartitions=d,dO.slicePartitions=f,dO.subdivisions=p,dO.offsetAttribute=-1===m?void 0:m,new lO(dO))},lO.createGeometry=function(e){const t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;const n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;const i=e._minimumClock,o=e._maximumClock,a=e._minimumCone,c=e._maximumCone,l=e._subdivisions,u=k.fromCartesian3(t);let h=e._slicePartitions+1,d=e._stackPartitions+1;h=Math.round(h*Math.abs(o-i)/s["a"].TWO_PI),d=Math.round(d*Math.abs(c-a)/s["a"].PI),h<2&&(h=2),d<2&&(d=2);let f=0,p=1;const m=n.x!==t.x||n.y!==t.y||n.z!==t.z;let _=!1,g=!1;m&&(p=2,a>0&&(_=!0,f+=h),c<Math.PI&&(g=!0,f+=h));const b=l*p*(d+h),y=new Float64Array(3*b),v=2*(b+f-(h+d)*p),O=ll.createTypedArray(b,v);let A,w,T,C,E=0;const x=new Array(d),S=new Array(d);for(A=0;A<d;A++)C=a+A*(c-a)/(d-1),x[A]=cO(C),S[A]=sO(C);const I=new Array(l),D=new Array(l);for(A=0;A<l;A++)T=i+A*(o-i)/(l-1),I[A]=cO(T),D[A]=sO(T);for(A=0;A<d;A++)for(w=0;w<l;w++)y[E++]=t.x*x[A]*D[w],y[E++]=t.y*x[A]*I[w],y[E++]=t.z*S[A];if(m)for(A=0;A<d;A++)for(w=0;w<l;w++)y[E++]=n.x*x[A]*D[w],y[E++]=n.y*x[A]*I[w],y[E++]=n.z*S[A];for(x.length=l,S.length=l,A=0;A<l;A++)C=a+A*(c-a)/(l-1),x[A]=cO(C),S[A]=sO(C);for(I.length=h,D.length=h,A=0;A<h;A++)T=i+A*(o-i)/(h-1),I[A]=cO(T),D[A]=sO(T);for(A=0;A<l;A++)for(w=0;w<h;w++)y[E++]=t.x*x[A]*D[w],y[E++]=t.y*x[A]*I[w],y[E++]=t.z*S[A];if(m)for(A=0;A<l;A++)for(w=0;w<h;w++)y[E++]=n.x*x[A]*D[w],y[E++]=n.y*x[A]*I[w],y[E++]=n.z*S[A];for(E=0,A=0;A<d*p;A++){const e=A*l;for(w=0;w<l-1;w++)O[E++]=e+w,O[E++]=e+w+1}let P=d*l*p;for(A=0;A<h;A++)for(w=0;w<l-1;w++)O[E++]=P+A+w*h,O[E++]=P+A+(w+1)*h;if(m)for(P=d*l*p+h*l,A=0;A<h;A++)for(w=0;w<l-1;w++)O[E++]=P+A+w*h,O[E++]=P+A+(w+1)*h;if(m){let e=d*l*p,t=e+l*h;if(_)for(A=0;A<h;A++)O[E++]=e+A,O[E++]=t+A;if(g)for(e+=l*h-h,t+=l*h-h,A=0;A<h;A++)O[E++]=e+A,O[E++]=t+A}const j=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:y})});if(Object(r["a"])(e._offsetAttribute)){const t=y.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);j.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new Fu({attributes:j,indices:O,primitiveType:Eu.LINES,boundingSphere:Tt.fromEllipsoid(u),offsetAttribute:e._offsetAttribute})};var fO=lO;function pO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._tilingScheme=e.tilingScheme,Object(r["a"])(this._tilingScheme)||(this._tilingScheme=new qt({ellipsoid:Object(o["a"])(e.ellipsoid,k.WGS84)})),this._levelZeroMaximumGeometricError=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,64,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new dn["a"],this._readyPromise=Promise.resolve(!0)}Object.defineProperties(pO.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),pO.prototype.requestTileGeometry=function(e,t,n,i){const o=16,r=16;return Promise.resolve(new xl({buffer:new Uint8Array(o*r),width:o,height:r}))},pO.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},pO.prototype.getTileDataAvailable=function(e,t,n){},pO.prototype.loadTileDataAvailability=function(e,t,n){};var mO=pO;function _O(){this._removalFunctions=[]}_O.prototype.add=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("event is required");const i=e.addEventListener(t,n);this._removalFunctions.push(i);const o=this;return function(){i();const e=o._removalFunctions;e.splice(e.indexOf(i),1)}},_O.prototype.removeAll=function(){const e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};var gO=_O;const bO={NONE:0,HOLD:1,EXTRAPOLATE:2};var yO=Object.freeze(bO);function vO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=Object(o["a"])(e.near,1),this._near=this.near,this.far=Object(o["a"])(e.far,5e8),this._far=this.far,this._cullingVolume=new av,this._orthographicMatrix=new Me}function OO(e){if(!Object(r["a"])(e.right)||!Object(r["a"])(e.left)||!Object(r["a"])(e.top)||!Object(r["a"])(e.bottom)||!Object(r["a"])(e.near)||!Object(r["a"])(e.far))throw new a["a"]("right, left, top, bottom, near, or far parameters are not set.");if(e.top!==e._top||e.bottom!==e._bottom||e.left!==e._left||e.right!==e._right||e.near!==e._near||e.far!==e._far){if(e.left>e.right)throw new a["a"]("right must be greater than left.");if(e.bottom>e.top)throw new a["a"]("top must be greater than bottom.");if(e.near<=0||e.near>e.far)throw new a["a"]("near must be greater than zero and less than far.");e._left=e.left,e._right=e.right,e._top=e.top,e._bottom=e.bottom,e._near=e.near,e._far=e.far,e._orthographicMatrix=Me.computeOrthographicOffCenter(e.left,e.right,e.bottom,e.top,e.near,e.far,e._orthographicMatrix)}}Object.defineProperties(vO.prototype,{projectionMatrix:{get:function(){return OO(this),this._orthographicMatrix}}});const AO=new g,wO=new g,TO=new g,CO=new g;vO.prototype.computeCullingVolume=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("position is required.");if(!Object(r["a"])(t))throw new a["a"]("direction is required.");if(!Object(r["a"])(n))throw new a["a"]("up is required.");const i=this._cullingVolume.planes,o=this.top,s=this.bottom,c=this.right,l=this.left,u=this.near,h=this.far,d=g.cross(t,n,AO);g.normalize(d,d);const f=wO;g.multiplyByScalar(t,u,f),g.add(e,f,f);const p=TO;g.multiplyByScalar(d,l,p),g.add(f,p,p);let m=i[0];return Object(r["a"])(m)||(m=i[0]=new be),m.x=d.x,m.y=d.y,m.z=d.z,m.w=-g.dot(d,p),g.multiplyByScalar(d,c,p),g.add(f,p,p),m=i[1],Object(r["a"])(m)||(m=i[1]=new be),m.x=-d.x,m.y=-d.y,m.z=-d.z,m.w=-g.dot(g.negate(d,CO),p),g.multiplyByScalar(n,s,p),g.add(f,p,p),m=i[2],Object(r["a"])(m)||(m=i[2]=new be),m.x=n.x,m.y=n.y,m.z=n.z,m.w=-g.dot(n,p),g.multiplyByScalar(n,o,p),g.add(f,p,p),m=i[3],Object(r["a"])(m)||(m=i[3]=new be),m.x=-n.x,m.y=-n.y,m.z=-n.z,m.w=-g.dot(g.negate(n,CO),p),m=i[4],Object(r["a"])(m)||(m=i[4]=new be),m.x=t.x,m.y=t.y,m.z=t.z,m.w=-g.dot(t,f),g.multiplyByScalar(t,h,p),g.add(e,p,p),m=i[5],Object(r["a"])(m)||(m=i[5]=new be),m.x=-t.x,m.y=-t.y,m.z=-t.z,m.w=-g.dot(g.negate(t,CO),p),this._cullingVolume},vO.prototype.getPixelDimensions=function(e,t,n,i,o){if(OO(this),!Object(r["a"])(e)||!Object(r["a"])(t))throw new a["a"]("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new a["a"]("drawingBufferWidth must be greater than zero.");if(t<=0)throw new a["a"]("drawingBufferHeight must be greater than zero.");if(!Object(r["a"])(n))throw new a["a"]("distance is required.");if(!Object(r["a"])(i))throw new a["a"]("pixelRatio is required.");if(i<=0)throw new a["a"]("pixelRatio must be greater than zero.");if(!Object(r["a"])(o))throw new a["a"]("A result object is required.");const s=this.right-this.left,c=this.top-this.bottom,l=i*s/e,u=i*c/t;return o.x=l,o.y=u,o},vO.prototype.clone=function(e){return Object(r["a"])(e)||(e=new vO),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},vO.prototype.equals=function(e){return Object(r["a"])(e)&&e instanceof vO&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},vO.prototype.equalsEpsilon=function(e,t,n){return e===this||Object(r["a"])(e)&&e instanceof vO&&s["a"].equalsEpsilon(this.right,e.right,t,n)&&s["a"].equalsEpsilon(this.left,e.left,t,n)&&s["a"].equalsEpsilon(this.top,e.top,t,n)&&s["a"].equalsEpsilon(this.bottom,e.bottom,t,n)&&s["a"].equalsEpsilon(this.near,e.near,t,n)&&s["a"].equalsEpsilon(this.far,e.far,t,n)};var EO=vO;function xO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._offCenterFrustum=new EO,this.width=e.width,this._width=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=Object(o["a"])(e.near,1),this._near=this.near,this.far=Object(o["a"])(e.far,5e8),this._far=this.far}function SO(e){if(!Object(r["a"])(e.width)||!Object(r["a"])(e.aspectRatio)||!Object(r["a"])(e.near)||!Object(r["a"])(e.far))throw new a["a"]("width, aspectRatio, near, or far parameters are not set.");const t=e._offCenterFrustum;if(e.width!==e._width||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far){if(e.aspectRatio<0)throw new a["a"]("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new a["a"]("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._width=e.width,e._near=e.near,e._far=e.far;const n=1/e.aspectRatio;t.right=.5*e.width,t.left=-t.right,t.top=n*t.right,t.bottom=-t.top,t.near=e.near,t.far=e.far}}xO.packedLength=4,xO.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.width,t[n++]=e.aspectRatio,t[n++]=e.near,t[n]=e.far,t},xO.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new xO),n.width=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t],n},Object.defineProperties(xO.prototype,{projectionMatrix:{get:function(){return SO(this),this._offCenterFrustum.projectionMatrix}}}),xO.prototype.computeCullingVolume=function(e,t,n){return SO(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},xO.prototype.getPixelDimensions=function(e,t,n,i,o){return SO(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)},xO.prototype.clone=function(e){return Object(r["a"])(e)||(e=new xO),e.aspectRatio=this.aspectRatio,e.width=this.width,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._width=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},xO.prototype.equals=function(e){return!!(Object(r["a"])(e)&&e instanceof xO)&&(SO(this),SO(e),this.width===e.width&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},xO.prototype.equalsEpsilon=function(e,t,n){return!!(Object(r["a"])(e)&&e instanceof xO)&&(SO(this),SO(e),s["a"].equalsEpsilon(this.width,e.width,t,n)&&s["a"].equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};var IO=xO;function DO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=Object(o["a"])(e.near,1),this._near=this.near,this.far=Object(o["a"])(e.far,5e8),this._far=this.far,this._cullingVolume=new av,this._perspectiveMatrix=new Me,this._infinitePerspective=new Me}function PO(e){if(!Object(r["a"])(e.right)||!Object(r["a"])(e.left)||!Object(r["a"])(e.top)||!Object(r["a"])(e.bottom)||!Object(r["a"])(e.near)||!Object(r["a"])(e.far))throw new a["a"]("right, left, top, bottom, near, or far parameters are not set.");const t=e.top,n=e.bottom,i=e.right,o=e.left,s=e.near,c=e.far;if(t!==e._top||n!==e._bottom||o!==e._left||i!==e._right||s!==e._near||c!==e._far){if(e.near<=0||e.near>e.far)throw new a["a"]("near must be greater than zero and less than far.");e._left=o,e._right=i,e._top=t,e._bottom=n,e._near=s,e._far=c,e._perspectiveMatrix=Me.computePerspectiveOffCenter(o,i,n,t,s,c,e._perspectiveMatrix),e._infinitePerspective=Me.computeInfinitePerspectiveOffCenter(o,i,n,t,s,e._infinitePerspective)}}Object.defineProperties(DO.prototype,{projectionMatrix:{get:function(){return PO(this),this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){return PO(this),this._infinitePerspective}}});const jO=new g,RO=new g,LO=new g,MO=new g;DO.prototype.computeCullingVolume=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("position is required.");if(!Object(r["a"])(t))throw new a["a"]("direction is required.");if(!Object(r["a"])(n))throw new a["a"]("up is required.");const i=this._cullingVolume.planes,o=this.top,s=this.bottom,c=this.right,l=this.left,u=this.near,h=this.far,d=g.cross(t,n,jO),f=RO;g.multiplyByScalar(t,u,f),g.add(e,f,f);const p=LO;g.multiplyByScalar(t,h,p),g.add(e,p,p);const m=MO;g.multiplyByScalar(d,l,m),g.add(f,m,m),g.subtract(m,e,m),g.normalize(m,m),g.cross(m,n,m),g.normalize(m,m);let _=i[0];return Object(r["a"])(_)||(_=i[0]=new be),_.x=m.x,_.y=m.y,_.z=m.z,_.w=-g.dot(m,e),g.multiplyByScalar(d,c,m),g.add(f,m,m),g.subtract(m,e,m),g.cross(n,m,m),g.normalize(m,m),_=i[1],Object(r["a"])(_)||(_=i[1]=new be),_.x=m.x,_.y=m.y,_.z=m.z,_.w=-g.dot(m,e),g.multiplyByScalar(n,s,m),g.add(f,m,m),g.subtract(m,e,m),g.cross(d,m,m),g.normalize(m,m),_=i[2],Object(r["a"])(_)||(_=i[2]=new be),_.x=m.x,_.y=m.y,_.z=m.z,_.w=-g.dot(m,e),g.multiplyByScalar(n,o,m),g.add(f,m,m),g.subtract(m,e,m),g.cross(m,d,m),g.normalize(m,m),_=i[3],Object(r["a"])(_)||(_=i[3]=new be),_.x=m.x,_.y=m.y,_.z=m.z,_.w=-g.dot(m,e),_=i[4],Object(r["a"])(_)||(_=i[4]=new be),_.x=t.x,_.y=t.y,_.z=t.z,_.w=-g.dot(t,f),g.negate(t,m),_=i[5],Object(r["a"])(_)||(_=i[5]=new be),_.x=m.x,_.y=m.y,_.z=m.z,_.w=-g.dot(m,p),this._cullingVolume},DO.prototype.getPixelDimensions=function(e,t,n,i,o){if(PO(this),!Object(r["a"])(e)||!Object(r["a"])(t))throw new a["a"]("Both drawingBufferWidth and drawingBufferHeight are required.");if(e<=0)throw new a["a"]("drawingBufferWidth must be greater than zero.");if(t<=0)throw new a["a"]("drawingBufferHeight must be greater than zero.");if(!Object(r["a"])(n))throw new a["a"]("distance is required.");if(!Object(r["a"])(i))throw new a["a"]("pixelRatio is required");if(i<=0)throw new a["a"]("pixelRatio must be greater than zero.");if(!Object(r["a"])(o))throw new a["a"]("A result object is required.");const s=1/this.near;let c=this.top*s;const l=2*i*n*c/t;c=this.right*s;const u=2*i*n*c/e;return o.x=u,o.y=l,o},DO.prototype.clone=function(e){return Object(r["a"])(e)||(e=new DO),e.right=this.right,e.left=this.left,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e._left=void 0,e._right=void 0,e._top=void 0,e._bottom=void 0,e._near=void 0,e._far=void 0,e},DO.prototype.equals=function(e){return Object(r["a"])(e)&&e instanceof DO&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far},DO.prototype.equalsEpsilon=function(e,t,n){return e===this||Object(r["a"])(e)&&e instanceof DO&&s["a"].equalsEpsilon(this.right,e.right,t,n)&&s["a"].equalsEpsilon(this.left,e.left,t,n)&&s["a"].equalsEpsilon(this.top,e.top,t,n)&&s["a"].equalsEpsilon(this.bottom,e.bottom,t,n)&&s["a"].equalsEpsilon(this.near,e.near,t,n)&&s["a"].equalsEpsilon(this.far,e.far,t,n)};var NO=DO;function BO(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._offCenterFrustum=new NO,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=Object(o["a"])(e.near,1),this._near=this.near,this.far=Object(o["a"])(e.far,5e8),this._far=this.far,this.xOffset=Object(o["a"])(e.xOffset,0),this._xOffset=this.xOffset,this.yOffset=Object(o["a"])(e.yOffset,0),this._yOffset=this.yOffset}function FO(e){if(!Object(r["a"])(e.fov)||!Object(r["a"])(e.aspectRatio)||!Object(r["a"])(e.near)||!Object(r["a"])(e.far))throw new a["a"]("fov, aspectRatio, near, or far parameters are not set.");const t=e._offCenterFrustum;if(e.fov!==e._fov||e.aspectRatio!==e._aspectRatio||e.near!==e._near||e.far!==e._far||e.xOffset!==e._xOffset||e.yOffset!==e._yOffset){if(e.fov<0||e.fov>=Math.PI)throw new a["a"]("fov must be in the range [0, PI).");if(e.aspectRatio<0)throw new a["a"]("aspectRatio must be positive.");if(e.near<0||e.near>e.far)throw new a["a"]("near must be greater than zero and less than far.");e._aspectRatio=e.aspectRatio,e._fov=e.fov,e._fovy=e.aspectRatio<=1?e.fov:2*Math.atan(Math.tan(.5*e.fov)/e.aspectRatio),e._near=e.near,e._far=e.far,e._sseDenominator=2*Math.tan(.5*e._fovy),e._xOffset=e.xOffset,e._yOffset=e.yOffset,t.top=e.near*Math.tan(.5*e._fovy),t.bottom=-t.top,t.right=e.aspectRatio*t.top,t.left=-t.right,t.near=e.near,t.far=e.far,t.right+=e.xOffset,t.left+=e.xOffset,t.top+=e.yOffset,t.bottom+=e.yOffset}}BO.packedLength=6,BO.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),t[n++]=e.fov,t[n++]=e.aspectRatio,t[n++]=e.near,t[n++]=e.far,t[n++]=e.xOffset,t[n]=e.yOffset,t},BO.unpack=function(e,t,n){return i["a"].defined("array",e),t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new BO),n.fov=e[t++],n.aspectRatio=e[t++],n.near=e[t++],n.far=e[t++],n.xOffset=e[t++],n.yOffset=e[t],n},Object.defineProperties(BO.prototype,{projectionMatrix:{get:function(){return FO(this),this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){return FO(this),this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){return FO(this),this._fovy}},sseDenominator:{get:function(){return FO(this),this._sseDenominator}}}),BO.prototype.computeCullingVolume=function(e,t,n){return FO(this),this._offCenterFrustum.computeCullingVolume(e,t,n)},BO.prototype.getPixelDimensions=function(e,t,n,i,o){return FO(this),this._offCenterFrustum.getPixelDimensions(e,t,n,i,o)},BO.prototype.clone=function(e){return Object(r["a"])(e)||(e=new BO),e.aspectRatio=this.aspectRatio,e.fov=this.fov,e.near=this.near,e.far=this.far,e._aspectRatio=void 0,e._fov=void 0,e._near=void 0,e._far=void 0,this._offCenterFrustum.clone(e._offCenterFrustum),e},BO.prototype.equals=function(e){return!!(Object(r["a"])(e)&&e instanceof BO)&&(FO(this),FO(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this._offCenterFrustum.equals(e._offCenterFrustum))},BO.prototype.equalsEpsilon=function(e,t,n){return!!(Object(r["a"])(e)&&e instanceof BO)&&(FO(this),FO(e),s["a"].equalsEpsilon(this.fov,e.fov,t,n)&&s["a"].equalsEpsilon(this.aspectRatio,e.aspectRatio,t,n)&&this._offCenterFrustum.equalsEpsilon(e._offCenterFrustum,t,n))};var zO=BO;const kO=0,UO=1;function VO(e){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.frustum",e.frustum),i["a"].typeOf.object("options.origin",e.origin),i["a"].typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,r=e.origin,a=Object(o["a"])(e.vertexFormat,qu.DEFAULT),s=Object(o["a"])(e._drawNearPlane,!0);let c,l;t instanceof zO?(c=kO,l=zO.packedLength):t instanceof IO&&(c=UO,l=IO.packedLength),this._frustumType=c,this._frustum=t.clone(),this._origin=g.clone(r),this._orientation=Kr.clone(n),this._drawNearPlane=s,this._vertexFormat=a,this._workerName="createFrustumGeometry",this.packedLength=2+l+g.packedLength+Kr.packedLength+qu.packedLength}VO.pack=function(e,t,n){i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0);const r=e._frustumType,a=e._frustum;return t[n++]=r,r===kO?(zO.pack(a,t,n),n+=zO.packedLength):(IO.pack(a,t,n),n+=IO.packedLength),g.pack(e._origin,t,n),n+=g.packedLength,Kr.pack(e._orientation,t,n),n+=Kr.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n]=e._drawNearPlane?1:0,t};const HO=new zO,GO=new IO,WO=new Kr,qO=new g,YO=new qu;function XO(e,t,n,i,o,a,s,c){const l=e/3*2;for(let u=0;u<4;++u)Object(r["a"])(t)&&(t[e]=a.x,t[e+1]=a.y,t[e+2]=a.z),Object(r["a"])(n)&&(n[e]=s.x,n[e+1]=s.y,n[e+2]=s.z),Object(r["a"])(i)&&(i[e]=c.x,i[e+1]=c.y,i[e+2]=c.z),e+=3;o[l]=0,o[l+1]=0,o[l+2]=1,o[l+3]=0,o[l+4]=1,o[l+5]=1,o[l+6]=0,o[l+7]=1}VO.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=e[t++];let s;a===kO?(s=zO.unpack(e,t,HO),t+=zO.packedLength):(s=IO.unpack(e,t,GO),t+=IO.packedLength);const c=g.unpack(e,t,qO);t+=g.packedLength;const l=Kr.unpack(e,t,WO);t+=Kr.packedLength;const u=qu.unpack(e,t,YO);t+=qu.packedLength;const h=1===e[t];if(!Object(r["a"])(n))return new VO({frustum:s,origin:c,orientation:l,vertexFormat:u,_drawNearPlane:h});const d=a===n._frustumType?n._frustum:void 0;return n._frustum=s.clone(d),n._frustumType=a,n._origin=g.clone(c,n._origin),n._orientation=Kr.clone(l,n._orientation),n._vertexFormat=qu.clone(u,n._vertexFormat),n._drawNearPlane=h,n};const KO=new ce,$O=new Me,JO=new Me,QO=new g,ZO=new g,eA=new g,tA=new g,nA=new g,iA=new g,oA=new Array(3),rA=new Array(4);rA[0]=new be(-1,-1,1,1),rA[1]=new be(1,-1,1,1),rA[2]=new be(1,1,1,1),rA[3]=new be(-1,1,1,1);const aA=new Array(4);for(let Set=0;Set<4;++Set)aA[Set]=new be;VO._computeNearFarPlanes=function(e,t,n,i,a,s,c,l){const u=ce.fromQuaternion(t,KO);let h=Object(o["a"])(s,QO),d=Object(o["a"])(c,ZO),f=Object(o["a"])(l,eA);h=ce.getColumn(u,0,h),d=ce.getColumn(u,1,d),f=ce.getColumn(u,2,f),g.normalize(h,h),g.normalize(d,d),g.normalize(f,f),g.negate(h,h);const p=Me.computeView(e,f,d,h,$O);let m,_;if(n===kO){const e=i.projectionMatrix,t=Me.multiply(e,p,JO);_=Me.inverse(t,JO)}else m=Me.inverseTransformation(p,JO);Object(r["a"])(_)?(oA[0]=i.near,oA[1]=i.far):(oA[0]=0,oA[1]=i.near,oA[2]=i.far);for(let o=0;o<2;++o)for(let t=0;t<4;++t){let n=be.clone(rA[t],aA[t]);if(Object(r["a"])(_)){n=Me.multiplyByVector(_,n,n);const t=1/n.w;g.multiplyByScalar(n,t,n),g.subtract(n,e,n),g.normalize(n,n);const i=g.dot(f,n);g.multiplyByScalar(n,oA[o]/i,n),g.add(n,e,n)}else{Object(r["a"])(i._offCenterFrustum)&&(i=i._offCenterFrustum);const e=oA[o],t=oA[o+1];n.x=.5*(n.x*(i.right-i.left)+i.left+i.right),n.y=.5*(n.y*(i.top-i.bottom)+i.bottom+i.top),n.z=.5*(n.z*(e-t)-e-t),n.w=1,Me.multiplyByVector(m,n,n)}a[12*o+3*t]=n.x,a[12*o+3*t+1]=n.y,a[12*o+3*t+2]=n.z}},VO.createGeometry=function(e){const t=e._frustumType,n=e._frustum,i=e._origin,o=e._orientation,a=e._drawNearPlane,s=e._vertexFormat,c=a?6:5;let l=new Float64Array(72);VO._computeNearFarPlanes(i,o,t,n,l);let u=24;l[u]=l[12],l[u+1]=l[13],l[u+2]=l[14],l[u+3]=l[0],l[u+4]=l[1],l[u+5]=l[2],l[u+6]=l[9],l[u+7]=l[10],l[u+8]=l[11],l[u+9]=l[21],l[u+10]=l[22],l[u+11]=l[23],u+=12,l[u]=l[15],l[u+1]=l[16],l[u+2]=l[17],l[u+3]=l[3],l[u+4]=l[4],l[u+5]=l[5],l[u+6]=l[0],l[u+7]=l[1],l[u+8]=l[2],l[u+9]=l[12],l[u+10]=l[13],l[u+11]=l[14],u+=12,l[u]=l[3],l[u+1]=l[4],l[u+2]=l[5],l[u+3]=l[15],l[u+4]=l[16],l[u+5]=l[17],l[u+6]=l[18],l[u+7]=l[19],l[u+8]=l[20],l[u+9]=l[6],l[u+10]=l[7],l[u+11]=l[8],u+=12,l[u]=l[6],l[u+1]=l[7],l[u+2]=l[8],l[u+3]=l[18],l[u+4]=l[19],l[u+5]=l[20],l[u+6]=l[21],l[u+7]=l[22],l[u+8]=l[23],l[u+9]=l[9],l[u+10]=l[10],l[u+11]=l[11],a||(l=l.subarray(12));const h=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:l})});if(Object(r["a"])(s.normal)||Object(r["a"])(s.tangent)||Object(r["a"])(s.bitangent)||Object(r["a"])(s.st)){const e=Object(r["a"])(s.normal)?new Float32Array(12*c):void 0,t=Object(r["a"])(s.tangent)?new Float32Array(12*c):void 0,n=Object(r["a"])(s.bitangent)?new Float32Array(12*c):void 0,i=Object(r["a"])(s.st)?new Float32Array(8*c):void 0,o=QO,l=ZO,d=eA,f=g.negate(o,tA),p=g.negate(l,nA),m=g.negate(d,iA);u=0,a&&(XO(u,e,t,n,i,m,o,l),u+=12),XO(u,e,t,n,i,d,f,l),u+=12,XO(u,e,t,n,i,f,m,l),u+=12,XO(u,e,t,n,i,p,m,f),u+=12,XO(u,e,t,n,i,o,d,l),u+=12,XO(u,e,t,n,i,l,d,f),Object(r["a"])(e)&&(h.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})),Object(r["a"])(t)&&(h.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:t})),Object(r["a"])(n)&&(h.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:n})),Object(r["a"])(i)&&(h.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:i}))}const d=new Uint16Array(6*c);for(let r=0;r<c;++r){const e=6*r,t=4*r;d[e]=t,d[e+1]=t+1,d[e+2]=t+2,d[e+3]=t,d[e+4]=t+2,d[e+5]=t+3}return new Fu({attributes:h,indices:d,primitiveType:Eu.TRIANGLES,boundingSphere:Tt.fromVertices(l)})};var sA=VO;const cA=0,lA=1;function uA(e){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.frustum",e.frustum),i["a"].typeOf.object("options.origin",e.origin),i["a"].typeOf.object("options.orientation",e.orientation);const t=e.frustum,n=e.orientation,r=e.origin,a=Object(o["a"])(e._drawNearPlane,!0);let s,c;t instanceof zO?(s=cA,c=zO.packedLength):t instanceof IO&&(s=lA,c=IO.packedLength),this._frustumType=s,this._frustum=t.clone(),this._origin=g.clone(r),this._orientation=Kr.clone(n),this._drawNearPlane=a,this._workerName="createFrustumOutlineGeometry",this.packedLength=2+c+g.packedLength+Kr.packedLength}uA.pack=function(e,t,n){i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0);const r=e._frustumType,a=e._frustum;return t[n++]=r,r===cA?(zO.pack(a,t,n),n+=zO.packedLength):(IO.pack(a,t,n),n+=IO.packedLength),g.pack(e._origin,t,n),n+=g.packedLength,Kr.pack(e._orientation,t,n),n+=Kr.packedLength,t[n]=e._drawNearPlane?1:0,t};const hA=new zO,dA=new IO,fA=new Kr,pA=new g;uA.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=e[t++];let s;a===cA?(s=zO.unpack(e,t,hA),t+=zO.packedLength):(s=IO.unpack(e,t,dA),t+=IO.packedLength);const c=g.unpack(e,t,pA);t+=g.packedLength;const l=Kr.unpack(e,t,fA);t+=Kr.packedLength;const u=1===e[t];if(!Object(r["a"])(n))return new uA({frustum:s,origin:c,orientation:l,_drawNearPlane:u});const h=a===n._frustumType?n._frustum:void 0;return n._frustum=s.clone(h),n._frustumType=a,n._origin=g.clone(c,n._origin),n._orientation=Kr.clone(l,n._orientation),n._drawNearPlane=u,n},uA.createGeometry=function(e){const t=e._frustumType,n=e._frustum,i=e._origin,o=e._orientation,r=e._drawNearPlane,a=new Float64Array(24);sA._computeNearFarPlanes(i,o,t,n,a);const s=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:a})});let c,l;const u=r?2:1,h=new Uint16Array(8*(u+1));let d=r?0:1;for(;d<2;++d)c=r?8*d:0,l=4*d,h[c]=l,h[c+1]=l+1,h[c+2]=l+1,h[c+3]=l+2,h[c+4]=l+2,h[c+5]=l+3,h[c+6]=l+3,h[c+7]=l;for(d=0;d<2;++d)c=8*(u+d),l=4*d,h[c]=l,h[c+1]=l+4,h[c+2]=l+1,h[c+3]=l+5,h[c+4]=l+2,h[c+5]=l+6,h[c+6]=l+3,h[c+7]=l+7;return new Fu({attributes:s,indices:h,primitiveType:Eu.LINES,boundingSphere:Tt.fromVertices(a)})};var mA=uA;const _A={SEARCH:0,AUTOCOMPLETE:1};var gA=Object.freeze(_A);function bA(){}bA.prototype.geocode=a["a"].throwInstantiationError;var yA=bA;function vA(){a["a"].throwInstantiationError()}vA.createGeometry=function(e){a["a"].throwInstantiationError()};var OA=vA;function AA(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.componentDatatype))throw new a["a"]("options.componentDatatype is required.");if(!Object(r["a"])(e.componentsPerAttribute))throw new a["a"]("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new a["a"]("options.componentsPerAttribute must be between 1 and 4.");if(!Object(r["a"])(e.value))throw new a["a"]("options.value is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=Object(o["a"])(e.normalize,!1),this.value=e.value}var wA=AA,TA=n("dae6");function CA(e,t){return 0!==(e&t)}var EA=CA;const xA=[1,2,4,8],SA=15,IA=16,DA=64,PA=128;function jA(e,t,n,i,o,r){this._bits=e,this.cnodeVersion=t,this.imageryVersion=n,this.terrainVersion=i,this.imageryProvider=o,this.terrainProvider=r,this.ancestorHasTerrain=!1,this.terrainState=void 0}jA.clone=function(e,t){return Object(r["a"])(t)?(t._bits=e._bits,t.cnodeVersion=e.cnodeVersion,t.imageryVersion=e.imageryVersion,t.terrainVersion=e.terrainVersion,t.imageryProvider=e.imageryProvider,t.terrainProvider=e.terrainProvider):t=new jA(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),t.ancestorHasTerrain=e.ancestorHasTerrain,t.terrainState=e.terrainState,t},jA.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},jA.prototype.hasSubtree=function(){return EA(this._bits,IA)},jA.prototype.hasImagery=function(){return EA(this._bits,DA)},jA.prototype.hasTerrain=function(){return EA(this._bits,PA)},jA.prototype.hasChildren=function(){return EA(this._bits,SA)},jA.prototype.hasChild=function(e){return EA(this._bits,xA[e])},jA.prototype.getChildBitmask=function(){return this._bits&SA};var RA=jA,LA=n("0e68");function MA(e){const t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n);for(let o=0;o<t;++o)i[o]=e.charCodeAt(o);return n}const NA=MA('Eô½\vyâjE",ÍqøIFgQ\0B%Æèa,f)\bÆ4Üjb%y\nwmiÖðk¡½NuàA[ß@V\fÙ»r|3SîOlÔq°{ÀEVZ­wUe\v3*¬l5Å0sø3>mF8J´Ýð.ÝuÚDt"úa"\f3"So¯9D\v9Ù9L¹¿«\\P_"uxéqh;ÁÄð<VqH\'UfYNeu£aF}a?A\0×´4MÎF°Õ¸\'{Ü+»Mg0ÈÑö\\Pú[/Fn5/\'C.ë\n\f^¥se4ål.jC\'c#U©?q{gC}:¯ÍâTUýKÆâ/(íË\\Æ-f§;/*"N°k.Ý\r}}GºC²²+>Mª>}æÎIÆæx\fa1-¤O¥~q ì\r1èN\v\0nPh}=\b\r¦n£h$[kó#ó¶s³\r\v@ÀØQ]ú".jßI\0¹ wUÆïj¿{GLîÜÜF©­S+S4ÿYä8è1N¹XFkË-#p\x005"Ï1²&/çÃu-6,rt°#G·ÓÑ&7râ\0DÏÚ3-Þ`i#i*|ÍKQ\rT9w.)ê¦P¢joP\\>TûïP[\vEm(w7ÛJfJo åpâ¹q~\fmI-zþrÇòY0»]såÉ êxì ðB|G`°½&·q¶ÇÑ3=Ó«îcÈ+S D\\qÆÌD2O<ÊÀ)=RÓaX©}e´ÜÏ\rô=ñ\b©BÚ#\tØ¿^PIøMÀËGLO÷{+ØÅ1;µoÜl\rÑÛ?âéÚ_ÔâFaZÞUÏ¤\0¾ýÎgñJiæ HØ]~®q N®ÀV©<rçvì)IÖ]-ãÛ6©;fjÕ¶=P^R¹KÇsWxÉô.YoÐKW>\'\'Ç`Û;íSD>?mw¢\në?R¨ÆU^1I7ôÅ&-©¿\'TÚÃj å*x°Öprªh½÷_H±~ÀXL?fù>áeÀp§Ï8i¯ðVldI\'­xtOÂÞV9\0Úw\vË-û5Oõ\bQ`Á\nZGM&30xÚÀFGâ[y`In7gS\n>éìF9²ñ4\rÆSuná\fYÙÞ){II¥wy¾IV.6ç\v:»Ob{ÒM1/½8{¨O!áìFpv})"x\nÝ\\ÚÞQÏðüYRe|3ßóHÚ»*uÛ`²Ôüíì5¨ÿ(1-ÈÜF|["');function BA(e){i["a"].defined("resourceOrUrl",e);let t=e;"string"===typeof t||t instanceof Et["a"]||(i["a"].typeOf.string("resourceOrUrl.url",e.url),t=e.url);const n=Et["a"].createIfNeeded(t);n.appendForwardSlash(),this._resource=n,this.imageryPresent=!0,this.protoImagery=void 0,this.terrainPresent=!0,this.negativeAltitudeExponentBias=32,this.negativeAltitudeThreshold=s["a"].EPSILON12,this.providers={},this.key=void 0,this._quadPacketVersion=1,this._tileInfo={},this._subtreePromises={};const o=this;this._readyPromise=HA(this).then((function(){return o.getQuadTreePacket("",o._quadPacketVersion)})).then((function(){return!0})).catch((function(e){const t=`An error occurred while accessing ${kA(o,"",1).url}.`;return Promise.reject(new ye["a"](t))}))}Object.defineProperties(BA.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},resource:{get:function(){return this._resource}},readyPromise:{get:function(){return this._readyPromise}}}),BA.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){const n=1<<o;let r=0;EA(t,n)?EA(e,n)&&(r|=1):(r|=2,EA(e,n)||(r|=1)),i+=r}return i},BA.quadKeyToTileXY=function(e){let t=0,n=0;const i=e.length-1;for(let o=i;o>=0;--o){const r=1<<o,a=+e[i-o];EA(a,2)?EA(a,1)||(t|=r):(n|=r,EA(a,1)&&(t|=r))}return{x:t,y:n,level:i}},BA.prototype.isValid=function(e){let t=this.getTileInformationFromQuadKey(e);if(Object(r["a"])(t))return null!==t;let n,i=!0,o=e;while(o.length>1){if(n=o.substring(o.length-1),o=o.substring(0,o.length-1),t=this.getTileInformationFromQuadKey(o),Object(r["a"])(t)){t.hasSubtree()||t.hasChild(parseInt(n))||(i=!1);break}if(null===t){i=!1;break}}return i};const FA=new il("decodeGoogleEarthEnterprisePacket");function zA(e,t,n){const i=e._tileInfo;let o,a=t,s=i[a];if(Object(r["a"])(s)&&(!s.hasSubtree()||s.hasChildren()))return s;while(void 0===s&&a.length>1)a=a.substring(0,a.length-1),s=i[a];const c=e._subtreePromises;let l=c[a];return Object(r["a"])(l)?l.then((function(){return o=new Sl["a"]({throttle:n.throttle,throttleByServer:n.throttleByServer,type:n.type,priorityFunction:n.priorityFunction}),zA(e,t,o)})):Object(r["a"])(s)&&s.hasSubtree()?(l=e.getQuadTreePacket(a,s.cnodeVersion,n),Object(r["a"])(l)?(c[a]=l,l.then((function(){return o=new Sl["a"]({throttle:n.throttle,throttleByServer:n.throttleByServer,type:n.type,priorityFunction:n.priorityFunction}),zA(e,t,o)})).finally((function(){delete c[a]}))):void 0):Promise.reject(new ye["a"](`Couldn't load metadata for tile ${t}`))}function kA(e,t,n,i){return e._resource.getDerivedResource({url:`flatfile?q2-0${t}-q.${n.toString()}`,request:i})}let UA,VA;function HA(e){const t=e._resource.getDerivedResource({url:"dbRoot.v5",queryParameters:{output:"proto"}});if(!Object(r["a"])(VA)){const e=Bt("ThirdParty/google-earth-dbroot-parser.js"),t=window.cesiumGoogleEarthDbRootParser;VA=Object(LA["a"])(e).then((function(){UA=window.cesiumGoogleEarthDbRootParser(TA),Object(r["a"])(t)?window.cesiumGoogleEarthDbRootParser=t:delete window.cesiumGoogleEarthDbRootParser}))}return VA.then((function(){return t.fetchArrayBuffer()})).then((function(t){const n=UA.EncryptedDbRootProto.decode(new Uint8Array(t));let i=n.encryptionData,o=i.byteOffset,r=o+i.byteLength;const a=e.key=i.buffer.slice(o,r);i=n.dbrootData,o=i.byteOffset,r=o+i.byteLength;const s=i.buffer.slice(o,r);return FA.scheduleTask({buffer:s,type:"DbRoot",key:a},[s])})).then((function(t){const n=UA.DbRootProto.decode(new Uint8Array(t.buffer));if(e.imageryPresent=Object(o["a"])(n.imageryPresent,e.imageryPresent),e.protoImagery=n.protoImagery,e.terrainPresent=Object(o["a"])(n.terrainPresent,e.terrainPresent),Object(r["a"])(n.endSnippet)&&Object(r["a"])(n.endSnippet.model)){const t=n.endSnippet.model;e.negativeAltitudeExponentBias=Object(o["a"])(t.negativeAltitudeExponentBias,e.negativeAltitudeExponentBias),e.negativeAltitudeThreshold=Object(o["a"])(t.compressedNegativeAltitudeThreshold,e.negativeAltitudeThreshold)}Object(r["a"])(n.databaseVersion)&&(e._quadPacketVersion=Object(o["a"])(n.databaseVersion.quadtreeVersion,e._quadPacketVersion));const i=e.providers,a=Object(o["a"])(n.providerInfo,[]),s=a.length;for(let e=0;e<s;++e){const t=a[e],n=t.copyrightString;Object(r["a"])(n)&&(i[t.providerId]=new hn(n.value))}})).catch((function(){console.log(`Failed to retrieve ${t.url}. Using defaults.`),e.key=NA}))}BA.prototype.getQuadTreePacket=function(e,t,n){t=Object(o["a"])(t,1),e=Object(o["a"])(e,"");const i=kA(this,e,t,n),a=i.fetchArrayBuffer();if(!Object(r["a"])(a))return;const s=this._tileInfo,c=this.key;return a.then((function(t){const n=FA.scheduleTask({buffer:t,quadKey:e,type:"Metadata",key:c},[t]);return n.then((function(t){let n,i=-1;if(""!==e){i=e.length+1;const o=t[e];n=s[e],n._bits|=o._bits,delete t[e]}const o=Object.keys(t);o.sort((function(e,t){return e.length-t.length}));const r=o.length;for(let e=0;e<r;++e){const r=o[e],a=t[r];if(null!==a){const e=RA.clone(t[r]),o=r.length;if(o===i)e.setParent(n);else if(o>1){const t=s[r.substring(0,r.length-1)];e.setParent(t)}s[r]=e}else s[r]=null}}))}))},BA.prototype.populateSubtree=function(e,t,n,i){const o=BA.tileXYToQuadKey(e,t,n);return zA(this,o,i)},BA.prototype.getTileInformation=function(e,t,n){const i=BA.tileXYToQuadKey(e,t,n);return this._tileInfo[i]},BA.prototype.getTileInformationFromQuadKey=function(e){return this._tileInfo[e]};var GA=BA;function WA(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.buffer",e.buffer),i["a"].typeOf.number("options.negativeAltitudeExponentBias",e.negativeAltitudeExponentBias),i["a"].typeOf.number("options.negativeElevationThreshold",e.negativeElevationThreshold),this._buffer=e.buffer,this._credits=e.credits,this._negativeAltitudeExponentBias=e.negativeAltitudeExponentBias,this._negativeElevationThreshold=e.negativeElevationThreshold;const t=Object(o["a"])(e.childTileMask,15);let n=3&t;n|=4&t?8:0,n|=8&t?4:0,this._childTileMask=n,this._createdByUpsampling=Object(o["a"])(e.createdByUpsampling,!1),this._skirtHeight=void 0,this._bufferType=this._buffer.constructor,this._mesh=void 0,this._minimumHeight=void 0,this._maximumHeight=void 0}Object.defineProperties(WA.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){}}});const qA="createVerticesFromGoogleEarthEnterpriseBuffer",YA=new il(qA),XA=new il(qA,rl.maximumAsynchronousTasks),KA=new Fe,$A=new Fe;WA.prototype.createMesh=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.tilingScheme",e.tilingScheme),i["a"].typeOf.number("options.x",e.x),i["a"].typeOf.number("options.y",e.y),i["a"].typeOf.number("options.level",e.level);const t=e.tilingScheme,n=e.x,a=e.y,s=e.level,c=Object(o["a"])(e.exaggeration,1),l=Object(o["a"])(e.exaggerationRelativeHeight,0),u=Object(o["a"])(e.throttle,!0),h=t.ellipsoid;t.tileXYToNativeRectangle(n,a,s,KA),t.tileXYToRectangle(n,a,s,$A);const d=h.cartographicToCartesian(Fe.center($A)),f=40075.16,p=f/(1<<s);this._skirtHeight=Math.min(8*p,1e3);const m=u?XA:YA,_=m.scheduleTask({buffer:this._buffer,nativeRectangle:KA,rectangle:$A,relativeToCenter:d,ellipsoid:h,skirtHeight:this._skirtHeight,exaggeration:c,exaggerationRelativeHeight:l,includeWebMercatorT:!0,negativeAltitudeExponentBias:this._negativeAltitudeExponentBias,negativeElevationThreshold:this._negativeElevationThreshold});if(!Object(r["a"])(_))return;const b=this;return _.then((function(e){return b._mesh=new sl(d,new Float32Array(e.vertices),new Uint16Array(e.indices),e.indexCountWithoutSkirts,e.vertexCountWithoutSkirts,e.minimumHeight,e.maximumHeight,Tt.clone(e.boundingSphere3D),g.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,Ws.clone(e.orientedBoundingBox),Pc.clone(e.encoding),e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),b._minimumHeight=e.minimumHeight,b._maximumHeight=e.maximumHeight,b._buffer=void 0,b._mesh}))},WA.prototype.interpolateHeight=function(e,t,n){const i=s["a"].clamp((t-e.west)/e.width,0,1),o=s["a"].clamp((n-e.south)/e.height,0,1);return Object(r["a"])(this._mesh)?nw(this,i,o):cw(this,i,o,e)};const JA=new il("upsampleQuantizedTerrainMesh",rl.maximumAsynchronousTasks);WA.prototype.upsample=function(e,t,n,o,s,c,l){i["a"].typeOf.object("tilingScheme",e),i["a"].typeOf.number("thisX",t),i["a"].typeOf.number("thisY",n),i["a"].typeOf.number("thisLevel",o),i["a"].typeOf.number("descendantX",s),i["a"].typeOf.number("descendantY",c),i["a"].typeOf.number("descendantLevel",l);const u=l-o;if(u>1)throw new a["a"]("Upsampling through more than one level at a time is not currently supported.");const h=this._mesh;if(!Object(r["a"])(this._mesh))return;const d=2*t!==s,f=2*n===c,p=e.ellipsoid,m=e.tileXYToRectangle(s,c,l),_=JA.scheduleTask({vertices:h.vertices,indices:h.indices,indexCountWithoutSkirts:h.indexCountWithoutSkirts,vertexCountWithoutSkirts:h.vertexCountWithoutSkirts,encoding:h.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:d,isNorthChild:f,childRectangle:m,ellipsoid:p});if(!Object(r["a"])(_))return;const b=this;return _.then((function(e){const t=new Uint16Array(e.vertices),n=ll.createTypedArray(t.length/3,e.indices),i=b._skirtHeight;return new nd({quantizedVertices:t,indices:n,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:Tt.clone(e.boundingSphere),orientedBoundingBox:Ws.clone(e.orientedBoundingBox),horizonOcclusionPoint:g.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:i,southSkirtHeight:i,eastSkirtHeight:i,northSkirtHeight:i,childTileMask:0,createdByUpsampling:!0,credits:b._credits})}))},WA.prototype.isChildAvailable=function(e,t,n,o){i["a"].typeOf.number("thisX",e),i["a"].typeOf.number("thisY",t),i["a"].typeOf.number("childX",n),i["a"].typeOf.number("childY",o);let r=2;return n!==2*e&&++r,o!==2*t&&(r-=2),0!==(this._childTileMask&1<<r)},WA.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const QA=new Gt,ZA=new Gt,ew=new Gt,tw=new g;function nw(e,t,n){const i=e._mesh,o=i.vertices,r=i.encoding,a=i.indices;for(let s=0,c=a.length;s<c;s+=3){const e=a[s],i=a[s+1],c=a[s+2],l=r.decodeTextureCoordinates(o,e,QA),u=r.decodeTextureCoordinates(o,i,ZA),h=r.decodeTextureCoordinates(o,c,ew),d=kh.computeBarycentricCoordinates(t,n,l.x,l.y,u.x,u.y,h.x,h.y,tw);if(d.x>=-1e-15&&d.y>=-1e-15&&d.z>=-1e-15){const t=r.decodeHeight(o,e),n=r.decodeHeight(o,i),a=r.decodeHeight(o,c);return d.x*t+d.y*n+d.z*a}}}const iw=Uint16Array.BYTES_PER_ELEMENT,ow=Uint32Array.BYTES_PER_ELEMENT,rw=Int32Array.BYTES_PER_ELEMENT,aw=Float32Array.BYTES_PER_ELEMENT,sw=Float64Array.BYTES_PER_ELEMENT;function cw(e,t,n,i){const o=e._buffer;let r=0,a=0,c=0;n>.5?(t>.5?(r=2,a=.5):r=3,c=.5):t>.5&&(r=1,a=.5);const l=new DataView(o);let u=0;for(let s=0;s<r;++s)u+=l.getUint32(u,!0),u+=ow;u+=ow,u+=2*sw;const h=s["a"].toRadians(180*l.getFloat64(u,!0));u+=sw;const d=s["a"].toRadians(180*l.getFloat64(u,!0));u+=sw;const f=i.width/h/2,p=i.height/d/2,m=l.getInt32(u,!0);u+=rw;const _=3*l.getInt32(u,!0);u+=rw,u+=rw;const g=new Array(m),b=new Array(m),y=new Array(m);let v;for(v=0;v<m;++v)g[v]=a+l.getUint8(u++)*f,b[v]=c+l.getUint8(u++)*p,y[v]=6371010*l.getFloat32(u,!0),u+=aw;const O=new Array(_);for(v=0;v<_;++v)O[v]=l.getUint16(u,!0),u+=iw;for(v=0;v<_;v+=3){const e=O[v],i=O[v+1],o=O[v+2],r=g[e],a=g[i],s=g[o],c=b[e],l=b[i],u=b[o],h=kh.computeBarycentricCoordinates(t,n,r,c,a,l,s,u,tw);if(h.x>=-1e-15&&h.y>=-1e-15&&h.z>=-1e-15)return h.x*y[e]+h.y*y[i]+h.z*y[o]}}var lw=WA;const uw={UNKNOWN:0,NONE:1,SELF:2,PARENT:3},hw=new mo;function dw(){this._terrainCache={},this._lastTidy=mo.now()}function fw(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url)&&!Object(r["a"])(e.metadata))throw new a["a"]("options.url or options.metadata is required.");let t;if(Object(r["a"])(e.metadata))t=e.metadata;else{const n=Et["a"].createIfNeeded(e.url);t=new GA(n)}this._metadata=t,this._tilingScheme=new qt({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new Fe(-s["a"].PI,-s["a"].PI,s["a"].PI,s["a"].PI),ellipsoid:e.ellipsoid});let n=e.credit;"string"===typeof n&&(n=new hn(n)),this._credit=n,this._levelZeroMaximumGeometricError=40075.16,this._terrainCache=new dw,this._terrainPromises={},this._terrainRequests={},this._errorEvent=new dn["a"],this._ready=!1;const i=this;let c;this._readyPromise=t.readyPromise.then((function(e){if(!t.terrainPresent){const e=new ye["a"](`The server ${t.url} doesn't have terrain`);return c=Zl.reportError(c,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}return Zl.reportSuccess(c),i._ready=e,e})).catch((function(e){return c=Zl.reportError(c,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}))}dw.prototype.add=function(e,t){this._terrainCache[e]={buffer:t,timestamp:mo.now()}},dw.prototype.get=function(e){const t=this._terrainCache,n=t[e];if(Object(r["a"])(n))return delete this._terrainCache[e],n.buffer},dw.prototype.tidy=function(){if(mo.now(hw),mo.secondsDifference(hw,this._lastTidy)>10){const e=this._terrainCache,t=Object.keys(e),n=t.length;for(let i=0;i<n;++i){const n=t[i],o=e[n];mo.secondsDifference(hw,o.timestamp)>10&&delete e[n]}mo.clone(hw,this._lastTidy)}},Object.defineProperties(fw.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}});const pw=new il("decodeGoogleEarthEnterprisePacket");function mw(e,t,n){let i=t.getChildBitmask();if(t.terrainState===uw.PARENT){i=0;for(let t=0;t<4;++t){const o=n.getTileInformationFromQuadKey(e+t.toString());Object(r["a"])(o)&&o.hasTerrain()&&(i|=1<<t)}}return i}function _w(e,t,n,i){return n=Object(r["a"])(n)&&n>0?n:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1c-0${t}-t.${n.toString()}`,request:i})}fw.prototype.requestTileGeometry=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestTileGeometry must not be called before the terrain provider is ready.");const o=GA.tileXYToQuadKey(e,t,n),s=this._terrainCache,c=this._metadata,l=c.getTileInformationFromQuadKey(o);if(!Object(r["a"])(l))return Promise.reject(new ye["a"]("Terrain tile doesn't exist"));let u=l.terrainState;Object(r["a"])(u)||(u=l.terrainState=uw.UNKNOWN);const h=s.get(o);if(Object(r["a"])(h)){const e=c.providers[l.terrainProvider];return Promise.resolve(new lw({buffer:h,childTileMask:mw(o,l,c),credits:Object(r["a"])(e)?[e]:void 0,negativeAltitudeExponentBias:c.negativeAltitudeExponentBias,negativeElevationThreshold:c.negativeAltitudeThreshold}))}if(s.tidy(),!l.ancestorHasTerrain)return Promise.resolve(new xl({buffer:new Uint8Array(256),width:16,height:16}));if(u===uw.NONE)return Promise.reject(new ye["a"]("Terrain tile doesn't exist"));let d,f=o,p=-1;switch(u){case uw.SELF:p=l.terrainVersion;break;case uw.PARENT:f=f.substring(0,f.length-1),d=c.getTileInformationFromQuadKey(f),p=d.terrainVersion;break;case uw.UNKNOWN:l.hasTerrain()?p=l.terrainVersion:(f=f.substring(0,f.length-1),d=c.getTileInformationFromQuadKey(f),Object(r["a"])(d)&&d.hasTerrain()&&(p=d.terrainVersion));break}if(p<0)return Promise.reject(new ye["a"]("Terrain tile doesn't exist"));const m=this._terrainPromises,_=this._terrainRequests;let g,b;if(Object(r["a"])(m[f]))g=m[f],b=_[f];else{b=i;const e=_w(this,f,p,b).fetchArrayBuffer();if(!Object(r["a"])(e))return;g=e.then((function(e){return Object(r["a"])(e)?pw.scheduleTask({buffer:e,type:"Terrain",key:c.key},[e]).then((function(e){const t=c.getTileInformationFromQuadKey(f);t.terrainState=uw.SELF,s.add(f,e[0]);const n=t.terrainProvider,i=e.length-1;for(let o=0;o<i;++o){const t=f+o.toString(),i=c.getTileInformationFromQuadKey(t);Object(r["a"])(i)&&(s.add(t,e[o+1]),i.terrainState=uw.PARENT,0===i.terrainProvider&&(i.terrainProvider=n))}})):Promise.reject(new ye["a"]("Failed to load terrain."))})),m[f]=g,_[f]=b,g=g.finally((function(){delete m[f],delete _[f]}))}return g.then((function(){const e=s.get(o);if(Object(r["a"])(e)){const t=c.providers[l.terrainProvider];return new lw({buffer:e,childTileMask:mw(o,l,c),credits:Object(r["a"])(t)?[t]:void 0,negativeAltitudeExponentBias:c.negativeAltitudeExponentBias,negativeElevationThreshold:c.negativeAltitudeThreshold})}return Promise.reject(new ye["a"]("Failed to load terrain."))})).catch((function(e){return b.state===Il["a"].CANCELLED?(i.state=b.state,Promise.reject(e)):(l.terrainState=uw.NONE,Promise.reject(e))}))},fw.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},fw.prototype.getTileDataAvailable=function(e,t,n){const i=this._metadata;let o=GA.tileXYToQuadKey(e,t,n);const a=i.getTileInformation(e,t,n);if(null===a)return!1;if(Object(r["a"])(a)){if(!a.ancestorHasTerrain)return!0;const e=a.terrainState;if(e===uw.NONE)return!1;if((!Object(r["a"])(e)||e===uw.UNKNOWN)&&(a.terrainState=uw.UNKNOWN,!a.hasTerrain())){o=o.substring(0,o.length-1);const e=i.getTileInformationFromQuadKey(o);if(!Object(r["a"])(e)||!e.hasTerrain())return!1}return!0}if(i.isValid(o)){const o=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].TERRAIN});i.populateSubtree(e,t,n,o)}return!1},fw.prototype.loadTileDataAvailability=function(e,t,n){};var gw=fw;const bw=[V,Rc],yw=bw.length,vw=Math.cos(s["a"].toRadians(30)),Ow=Math.cos(s["a"].toRadians(150)),Aw=0,ww=1e3;function Tw(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions;if(!Object(r["a"])(t)||t.length<2)throw new a["a"]("At least two positions are required.");if(Object(r["a"])(e.arcType)&&e.arcType!==uu.GEODESIC&&e.arcType!==uu.RHUMB)throw new a["a"]("Valid options for arcType are ArcType.GEODESIC and ArcType.RHUMB.");this.width=Object(o["a"])(e.width,1),this._positions=t,this.granularity=Object(o["a"])(e.granularity,9999),this.loop=Object(o["a"])(e.loop,!1),this.arcType=Object(o["a"])(e.arcType,uu.GEODESIC),this._ellipsoid=k.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(Tw.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+k.packedLength+1+1}}}),Tw.setProjectionAndEllipsoid=function(e,t){let n=0;for(let i=0;i<yw;i++)if(t instanceof bw[i]){n=i;break}e._projectionIndex=n,e._ellipsoid=t.ellipsoid};const Cw=new g,Ew=new g,xw=new g;function Sw(e,t,n,i,o){const r=Mw(i,e,0,Cw),a=Mw(i,e,n,Ew),s=Mw(i,t,0,xw),c=Nw(a,r,Ew),l=Nw(s,r,xw);return g.cross(l,c,o),g.normalize(o,o)}const Iw=new I,Dw=new g,Pw=new g,jw=new g;function Rw(e,t,n,i,o,r,a,s,c,l,u){if(0===o)return;let h;r===uu.GEODESIC?h=new Rg(e,t,a):r===uu.RHUMB&&(h=new o_(e,t,a));const d=h.surfaceDistance;if(d<o)return;const f=Sw(e,t,i,a,jw),p=Math.ceil(d/o),m=d/p;let _=m;const b=p-1;let y=s.length;for(let v=0;v<b;v++){const e=h.interpolateUsingSurfaceDistance(_,Iw),t=Mw(a,e,n,Dw),o=Mw(a,e,i,Pw);g.pack(f,s,y),g.pack(t,c,y),g.pack(o,l,y),u.push(e.latitude),u.push(e.longitude),y+=3,_+=m}}const Lw=new I;function Mw(e,t,n,i){return I.clone(t,Lw),Lw.height=n,I.toCartesian(Lw,e,i)}function Nw(e,t,n){return g.subtract(e,t,n),g.normalize(n,n),n}function Bw(e,t,n,i){return i=Nw(e,t,i),i=g.cross(i,n,i),i=g.normalize(i,i),i=g.cross(n,i,i),i}Tw.pack=function(e,t,n){i["a"].typeOf.object("value",e),i["a"].defined("array",t);let r=Object(o["a"])(n,0);const a=e._positions,s=a.length;t[r++]=s;for(let i=0;i<s;++i){const e=a[i];g.pack(e,t,r),r+=3}return t[r++]=e.granularity,t[r++]=e.loop?1:0,t[r++]=e.arcType,k.pack(e._ellipsoid,t,r),r+=k.packedLength,t[r++]=e._projectionIndex,t[r++]=e._scene3DOnly?1:0,t},Tw.unpack=function(e,t,n){i["a"].defined("array",e);let a=Object(o["a"])(t,0);const s=e[a++],c=new Array(s);for(let i=0;i<s;i++)c[i]=g.unpack(e,a),a+=3;const l=e[a++],u=1===e[a++],h=e[a++],d=k.unpack(e,a);a+=k.packedLength;const f=e[a++],p=1===e[a++];return Object(r["a"])(n)||(n=new Tw({positions:c})),n._positions=c,n.granularity=l,n.loop=u,n.arcType=h,n._ellipsoid=d,n._projectionIndex=f,n._scene3DOnly=p,n};const Fw=new g,zw=new g,kw=new g,Uw=new g,Vw=0,Hw=-1;function Gw(e,t,n,i,o){const r=Nw(n,t,Uw),a=Bw(e,t,r,Fw),c=Bw(i,t,r,zw);if(s["a"].equalsEpsilon(g.dot(a,c),Hw,s["a"].EPSILON5))return o=g.cross(r,a,o),o=g.normalize(o,o),o;o=g.add(c,a,o),o=g.normalize(o,o);const l=g.cross(r,o,kw);return g.dot(c,l)<Vw&&(o=g.negate(o,o)),o}const Ww=ji.fromPointNormal(g.ZERO,g.UNIT_Y),qw=new g,Yw=new g,Xw=new g,Kw=new g,$w=new g,Jw=new g,Qw=new I,Zw=new I,eT=new I;Tw.createGeometry=function(e){const t=!e._scene3DOnly;let n=e.loop;const i=e._ellipsoid,o=e.granularity,a=e.arcType,c=new bw[e._projectionIndex](i),l=Aw,u=ww;let h,d;const f=e._positions,p=f.length;let m,_,b,y;2===p&&(n=!1);const v=new o_(void 0,void 0,i);let O,A,w;const T=[f[0]];for(d=0;d<p-1;d++)m=f[d],_=f[d+1],O=Ci.lineSegmentPlane(m,_,Ww,Jw),!Object(r["a"])(O)||g.equalsEpsilon(O,m,s["a"].EPSILON7)||g.equalsEpsilon(O,_,s["a"].EPSILON7)||(e.arcType===uu.GEODESIC?T.push(g.clone(O)):e.arcType===uu.RHUMB&&(w=i.cartesianToCartographic(O,Qw).longitude,b=i.cartesianToCartographic(m,Qw),y=i.cartesianToCartographic(_,Zw),v.setEndPoints(b,y),A=v.findIntersectionWithLongitude(w,eT),O=i.cartographicToCartesian(A,Jw),!Object(r["a"])(O)||g.equalsEpsilon(O,m,s["a"].EPSILON7)||g.equalsEpsilon(O,_,s["a"].EPSILON7)||T.push(g.clone(O)))),T.push(_);n&&(m=f[p-1],_=f[0],O=Ci.lineSegmentPlane(m,_,Ww,Jw),!Object(r["a"])(O)||g.equalsEpsilon(O,m,s["a"].EPSILON7)||g.equalsEpsilon(O,_,s["a"].EPSILON7)||(e.arcType===uu.GEODESIC?T.push(g.clone(O)):e.arcType===uu.RHUMB&&(w=i.cartesianToCartographic(O,Qw).longitude,b=i.cartesianToCartographic(m,Qw),y=i.cartesianToCartographic(_,Zw),v.setEndPoints(b,y),A=v.findIntersectionWithLongitude(w,eT),O=i.cartographicToCartesian(A,Jw),!Object(r["a"])(O)||g.equalsEpsilon(O,m,s["a"].EPSILON7)||g.equalsEpsilon(O,_,s["a"].EPSILON7)||T.push(g.clone(O)))));let C=T.length,E=new Array(C);for(d=0;d<C;d++){const e=I.fromCartesian(T[d],i);e.height=0,E[d]=e}if(E=zm(E,I.equalsEpsilon),C=E.length,C<2)return;const x=[],S=[],D=[],P=[];let j=qw,R=Yw,L=Xw,M=Kw,N=$w;const B=E[0],F=E[1],z=E[C-1];for(j=Mw(i,z,l,j),M=Mw(i,F,l,M),R=Mw(i,B,l,R),L=Mw(i,B,u,L),N=n?Gw(j,R,L,M,N):Sw(B,F,u,i,N),g.pack(N,S,0),g.pack(R,D,0),g.pack(L,P,0),x.push(B.latitude),x.push(B.longitude),Rw(B,F,l,u,o,a,i,S,D,P,x),d=1;d<C-1;++d){j=g.clone(R,j),R=g.clone(M,R);const e=E[d];Mw(i,e,u,L),Mw(i,E[d+1],l,M),Gw(j,R,L,M,N),h=S.length,g.pack(N,S,h),g.pack(R,D,h),g.pack(L,P,h),x.push(e.latitude),x.push(e.longitude),Rw(E[d],E[d+1],l,u,o,a,i,S,D,P,x)}const k=E[C-1],U=E[C-2];if(R=Mw(i,k,l,R),L=Mw(i,k,u,L),n){const e=E[0];j=Mw(i,U,l,j),M=Mw(i,e,l,M),N=Gw(j,R,L,M,N)}else N=Sw(U,k,u,i,N);if(h=S.length,g.pack(N,S,h),g.pack(R,D,h),g.pack(L,P,h),x.push(k.latitude),x.push(k.longitude),n){for(Rw(k,B,l,u,o,a,i,S,D,P,x),h=S.length,d=0;d<3;++d)S[h+d]=S[d],D[h+d]=D[d],P[h+d]=P[d];x.push(B.latitude),x.push(B.longitude)}return YT(n,c,D,P,S,x,t)};const tT=new g,nT=new ce,iT=new Kr;function oT(e,t,n,i){const o=Nw(n,t,tT),r=g.dot(o,e);if(r>vw||r<Ow){const t=Nw(i,n,Uw),o=r<Ow?s["a"].PI_OVER_TWO:-s["a"].PI_OVER_TWO,a=Kr.fromAxisAngle(t,o,iT),c=ce.fromQuaternion(a,nT);return ce.multiplyByVector(c,e,e),!0}return!1}const rT=new I,aT=new g,sT=new g;function cT(e,t,n,i,o){const r=I.toCartesian(t,e._ellipsoid,aT);let a=g.add(r,n,sT),c=!1;const l=e._ellipsoid;let u=l.cartesianToCartographic(a,rT);Math.abs(t.longitude-u.longitude)>s["a"].PI_OVER_TWO&&(c=!0,a=g.subtract(r,n,sT),u=l.cartesianToCartographic(a,rT)),u.height=0;const h=e.project(u,o);return o=g.subtract(h,i,o),o.z=0,o=g.normalize(o,o),c&&g.negate(o,o),o}const lT=new g,uT=new g;function hT(e,t,n,i,o,r){const a=g.subtract(t,e,lT);g.normalize(a,a);const s=n-Aw;let c=g.multiplyByScalar(a,s,uT);g.add(e,c,o);const l=i-ww;c=g.multiplyByScalar(a,l,uT),g.add(t,c,r)}const dT=new g;function fT(e,t){const n=ji.getPointDistance(Ww,e),i=ji.getPointDistance(Ww,t);let o=dT;s["a"].equalsEpsilon(n,0,s["a"].EPSILON2)?(o=Nw(t,e,o),g.multiplyByScalar(o,s["a"].EPSILON2,o),g.add(e,o,e)):s["a"].equalsEpsilon(i,0,s["a"].EPSILON2)&&(o=Nw(e,t,o),g.multiplyByScalar(o,s["a"].EPSILON2,o),g.add(t,o,t))}function pT(e,t){const n=Math.abs(e.longitude),i=Math.abs(t.longitude);if(s["a"].equalsEpsilon(n,s["a"].PI,s["a"].EPSILON11)){const i=s["a"].sign(t.longitude);return e.longitude=i*(n-s["a"].EPSILON11),1}if(s["a"].equalsEpsilon(i,s["a"].PI,s["a"].EPSILON11)){const n=s["a"].sign(e.longitude);return t.longitude=n*(i-s["a"].EPSILON11),2}return 0}const mT=new I,_T=new I,gT=new g,bT=new g,yT=new g,vT=new g,OT=new g,AT=new g,wT=[mT,_T],TT=new Fe,CT=new g,ET=new g,xT=new g,ST=new g,IT=new g,DT=new g,PT=new g,jT=new g,RT=new g,LT=new g,MT=new g,NT=new g,BT=new g,FT=new g,zT=new Bd,kT=new Bd,UT=new g,VT=new g,HT=new g,GT=[new Tt,new Tt],WT=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],qT=WT.length;function YT(e,t,n,i,o,r,a){let c,l;const u=t._ellipsoid,h=n.length/3-1,d=8*h,f=4*d,p=36*h,m=d>65535?new Uint32Array(p):new Uint16Array(p),_=new Float64Array(3*d),b=new Float32Array(f),y=new Float32Array(f),v=new Float32Array(f),O=new Float32Array(f),A=new Float32Array(f);let w,T,C,E;a&&(w=new Float32Array(f),T=new Float32Array(f),C=new Float32Array(f),E=new Float32Array(2*d));const x=r.length/2;let S=0;const I=mT;I.height=0;const D=_T;D.height=0;let P=gT,j=bT;if(a)for(l=0,c=1;c<x;c++)I.latitude=r[l],I.longitude=r[l+1],D.latitude=r[l+2],D.longitude=r[l+3],P=t.project(I,P),j=t.project(D,j),S+=g.distance(P,j),l+=2;const R=i.length/3;j=g.unpack(i,0,j);let L,M=0;for(l=3,c=1;c<R;c++)P=g.clone(j,P),j=g.unpack(i,l,j),M+=g.distance(P,j),l+=3;l=3;let N=0,B=0,F=0,z=0,k=!1,U=g.unpack(n,0,vT),V=g.unpack(i,0,bT),H=g.unpack(o,0,AT);if(e){const e=g.unpack(n,n.length-6,yT);oT(H,e,U,V)&&(H=g.negate(H,H))}let G=0,W=0,q=0;for(c=0;c<h;c++){const e=g.clone(U,yT),c=g.clone(V,gT);let h,d,f,p,m=g.clone(H,OT);if(k&&(m=g.negate(m,m)),U=g.unpack(n,l,vT),V=g.unpack(i,l,bT),H=g.unpack(o,l,AT),k=oT(H,e,U,V),I.latitude=r[N],I.longitude=r[N+1],D.latitude=r[N+2],D.longitude=r[N+3],a){const e=pT(I,D);h=t.project(I,IT),d=t.project(D,DT);const n=Nw(d,h,UT);n.y=Math.abs(n.y),f=PT,p=jT,0===e||g.dot(n,g.UNIT_Y)>vw?(f=cT(t,I,m,h,PT),p=cT(t,D,H,d,jT)):1===e?(p=cT(t,D,H,d,jT),f.x=0,f.y=s["a"].sign(I.longitude-Math.abs(D.longitude)),f.z=0):(f=cT(t,I,m,h,PT),p.x=0,p.y=s["a"].sign(I.longitude-D.longitude),p.z=0)}const x=g.distance(c,V),P=Bd.fromCartesian(e,zT),j=g.subtract(U,e,RT),R=g.normalize(j,NT);let Y=g.subtract(c,e,LT);Y=g.normalize(Y,Y);let X=g.cross(R,Y,NT);X=g.normalize(X,X);let K=g.cross(Y,m,BT);K=g.normalize(K,K);let $=g.subtract(V,U,MT);$=g.normalize($,$);let J=g.cross(H,$,FT);J=g.normalize(J,J);const Q=x/M,Z=G/M;let ee,te,ne,ie=0,oe=0,re=0;if(a){ie=g.distance(h,d),ee=Bd.fromCartesian(h,kT),te=g.subtract(d,h,UT),ne=g.normalize(te,VT);const e=ne.x;ne.x=ne.y,ne.y=-e,oe=ie/S,re=W/S}for(L=0;L<8;L++){const e=z+4*L,t=B+2*L,n=e+3,i=L<4?1:-1,o=2===L||3===L||6===L||7===L?1:-1;g.pack(P.high,b,e),b[n]=j.x,g.pack(P.low,y,e),y[n]=j.y,g.pack(K,v,e),v[n]=j.z,g.pack(J,O,e),O[n]=Q*i,g.pack(X,A,e);let r=Z*o;0===r&&o<0&&(r=9),A[n]=r,a&&(w[e]=ee.high.x,w[e+1]=ee.high.y,w[e+2]=ee.low.x,w[e+3]=ee.low.y,C[e]=-f.y,C[e+1]=f.x,C[e+2]=p.y,C[e+3]=-p.x,T[e]=te.x,T[e+1]=te.y,T[e+2]=ne.x,T[e+3]=ne.y,E[t]=oe*i,r=re*o,0===r&&o<0&&(r=9),E[t+1]=r)}const ae=xT,se=ST,ce=CT,le=ET,ue=Fe.fromCartographicArray(wT,TT),he=rn.getMinimumMaximumHeights(ue,u),de=he.minimumTerrainHeight,fe=he.maximumTerrainHeight;q+=de,q+=fe,hT(e,c,de,fe,ae,ce),hT(U,V,de,fe,se,le);let pe=g.multiplyByScalar(X,s["a"].EPSILON5,HT);g.add(ae,pe,ae),g.add(se,pe,se),g.add(ce,pe,ce),g.add(le,pe,le),fT(ae,se),fT(ce,le),g.pack(ae,_,F),g.pack(se,_,F+3),g.pack(le,_,F+6),g.pack(ce,_,F+9),pe=g.multiplyByScalar(X,-2*s["a"].EPSILON5,HT),g.add(ae,pe,ae),g.add(se,pe,se),g.add(ce,pe,ce),g.add(le,pe,le),fT(ae,se),fT(ce,le),g.pack(ae,_,F+12),g.pack(se,_,F+15),g.pack(le,_,F+18),g.pack(ce,_,F+21),N+=2,l+=3,B+=16,F+=24,z+=32,G+=x,W+=ie}l=0;let Y=0;for(c=0;c<h;c++){for(L=0;L<qT;L++)m[l+L]=WT[L]+Y;Y+=8,l+=qT}const X=GT;Tt.fromVertices(n,g.ZERO,3,X[0]),Tt.fromVertices(i,g.ZERO,3,X[1]);const K=Tt.fromBoundingSpheres(X);K.radius+=q/(2*h);const $={position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,normalize:!1,values:_}),startHiAndForwardOffsetX:XT(b),startLoAndForwardOffsetY:XT(y),startNormalAndForwardOffsetZ:XT(v),endNormalAndTextureCoordinateNormalizationX:XT(O),rightNormalAndTextureCoordinateNormalizationY:XT(A)};return a&&($.startHiLo2D=XT(w),$.offsetAndRight2D=XT(T),$.startEndNormals2D=XT(C),$.texcoordNormalization2D=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,normalize:!1,values:E})),new Fu({attributes:$,indices:m,boundingSphere:K})}function XT(e){return new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}Tw._projectNormal=cT;var KT=Tw;function $T(e,t,n){this.heading=Object(o["a"])(e,0),this.pitch=Object(o["a"])(t,0),this.range=Object(o["a"])(n,0)}$T.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)||(t=new $T),t.heading=e.heading,t.pitch=e.pitch,t.range=e.range,t};var JT=$T,QT=n("6a30");const ZT=s["a"].factorial;function eC(e,t,n,i,o,r){let a,s,c,l=0;if(i>0){for(s=0;s<o;s++){for(a=!1,c=0;c<r.length&&!a;c++)s===r[c]&&(a=!0);a||(r.push(s),l+=eC(e,t,n,i-1,o,r),r.splice(r.length-1,1))}return l}for(l=1,s=0;s<o;s++){for(a=!1,c=0;c<r.length&&!a;c++)s===r[c]&&(a=!0);a||(l*=e-n[t[s]])}return l}const tC={type:"Hermite",getRequiredDataPoints:function(e,t){if(t=Object(o["a"])(t,0),!Object(r["a"])(e))throw new a["a"]("degree is required.");if(e<0)throw new a["a"]("degree must be 0 or greater.");if(t<0)throw new a["a"]("inputOrder must be 0 or greater.");return Math.max(Math.floor((e+1)/(t+1)),2)},interpolateOrderZero:function(e,t,n,i,o){let a,s,c,l,u,h;Object(r["a"])(o)||(o=new Array(i));const d=t.length,f=new Array(i);for(a=0;a<i;a++){o[a]=0;const e=new Array(d);for(f[a]=e,s=0;s<d;s++)e[s]=[]}const p=d,m=new Array(p);for(a=0;a<p;a++)m[a]=a;let _=d-1;for(l=0;l<i;l++){for(s=0;s<p;s++)h=m[s]*i+l,f[l][0].push(n[h]);for(a=1;a<p;a++){let e=!1;for(s=0;s<p-a;s++){const o=t[m[s]],r=t[m[s+a]];let c;r-o<=0?(h=m[s]*i+i*a+l,c=n[h],f[l][a].push(c/ZT(a))):(c=f[l][a-1][s+1]-f[l][a-1][s],f[l][a].push(c/(r-o))),e=e||0!==c}e||(_=a-1)}}for(c=0,u=0;c<=u;c++)for(a=c;a<=_;a++){const n=eC(e,m,t,c,a,[]);for(l=0;l<i;l++){const e=f[l][a][0];o[l+c*i]+=e*n}}return o}},nC=[];function iC(e,t,n,i,o,r){let a,c,l=-1;const u=t.length,h=u*(u+1)/2;for(let d=0;d<o;d++){const f=Math.floor(d*h);for(a=0;a<u;a++)c=t[a]*o*(r+1)+d,e[f+a]=i[c];for(let h=1;h<u;h++){let p=0;const m=Math.floor(h*(1-h)/2)+u*h;let _=!1;for(a=0;a<u-h;a++){const l=n[t[a]],g=n[t[a+h]];let b,y;if(g-l<=0)c=t[a]*o*(r+1)+o*h+d,b=i[c],y=b/s["a"].factorial(h),e[f+m+p]=y,p++;else{const t=Math.floor((h-1)*(2-h)/2)+u*(h-1);b=e[f+t+a+1]-e[f+t+a],y=b/(g-l),e[f+m+p]=y,p++}_=_||0!==b}_&&(l=Math.max(l,h))}}return l}tC.interpolate=function(e,t,n,i,o,a,s){const c=i*(a+1);Object(r["a"])(s)||(s=new Array(c));for(let r=0;r<c;r++)s[r]=0;const l=t.length,u=new Array(l*(o+1));let h;for(h=0;h<l;h++)for(let e=0;e<o+1;e++)u[h*(o+1)+e]=h;const d=u.length,f=nC,p=iC(f,u,t,n,i,o),m=[],_=d*(d+1)/2,g=Math.min(p,a);for(let r=0;r<=g;r++)for(h=r;h<=p;h++){m.length=0;const n=eC(e,u,t,r,h,m),o=Math.floor(h*(1-h)/2)+d*h;for(let e=0;e<i;e++){const t=Math.floor(e*_),a=f[t+o];s[e+r*i]+=a*n}}return s};var oC=tC;const rC={};function aC(e,t,n,i){if(0!==i)return;1===n&&(t.x=e-1-t.x,t.y=e-1-t.y);const o=t.x;t.x=t.y,t.y=o}rC.encode2D=function(e,t,n){const o=Math.pow(2,e);if(i["a"].typeOf.number("level",e),i["a"].typeOf.number("x",t),i["a"].typeOf.number("y",n),e<1)throw new a["a"]("Hilbert level cannot be less than 1.");if(t<0||t>=o||n<0||n>=o)throw new a["a"]("Invalid coordinates for given level.");const r={x:t,y:n};let s,c,l,u=BigInt(0);for(l=o/2;l>0;l/=2)s=(r.x&l)>0?1:0,c=(r.y&l)>0?1:0,u+=BigInt((3*s^c)*l*l),aC(o,r,s,c);return u},rC.decode2D=function(e,t){if(i["a"].typeOf.number("level",e),i["a"].typeOf.bigint("index",t),e<1)throw new a["a"]("Hilbert level cannot be less than 1.");if(t<BigInt(0)||t>=BigInt(Math.pow(4,e)))throw new a["a"]("Hilbert index exceeds valid maximum for given level.");const n=Math.pow(2,e),o={x:0,y:0};let r,s,c,l;for(c=1,l=t;c<n;c*=2)r=1&Number(l/BigInt(2)),s=1&Number(l^BigInt(r)),aC(c,o,r,s),o.x+=c*r,o.y+=c*s,l/=BigInt(4);return[o.x,o.y]};var sC=rC;function cC(e,t,n,i){this.rightAscension=e,this.declination=t,this.rotation=n,this.rotationRate=i}var lC=cC;const uC={},hC=32.184,dC=2451545,fC=-.0529921,pC=-.1059842,mC=13.0120009,_C=13.3407154,gC=.9856003,bC=26.4057084,yC=13.064993,vC=.3287146,OC=1.7484877,AC=-.1589763,wC=.0036096,TC=.1643573,CC=12.9590088;let EC=new mo;uC.ComputeMoon=function(e,t){Object(r["a"])(e)||(e=mo.now()),EC=mo.addSeconds(e,hC,EC);const n=mo.totalDays(EC)-dC,i=n/Gi.DAYS_PER_JULIAN_CENTURY,o=(125.045+fC*n)*s["a"].RADIANS_PER_DEGREE,a=(250.089+pC*n)*s["a"].RADIANS_PER_DEGREE,c=(260.008+mC*n)*s["a"].RADIANS_PER_DEGREE,l=(176.625+_C*n)*s["a"].RADIANS_PER_DEGREE,u=(357.529+gC*n)*s["a"].RADIANS_PER_DEGREE,h=(311.589+bC*n)*s["a"].RADIANS_PER_DEGREE,d=(134.963+yC*n)*s["a"].RADIANS_PER_DEGREE,f=(276.617+vC*n)*s["a"].RADIANS_PER_DEGREE,p=(34.226+OC*n)*s["a"].RADIANS_PER_DEGREE,m=(15.134+AC*n)*s["a"].RADIANS_PER_DEGREE,_=(119.743+wC*n)*s["a"].RADIANS_PER_DEGREE,g=(239.961+TC*n)*s["a"].RADIANS_PER_DEGREE,b=(25.053+CC*n)*s["a"].RADIANS_PER_DEGREE,y=Math.sin(o),v=Math.sin(a),O=Math.sin(c),A=Math.sin(l),w=Math.sin(u),T=Math.sin(h),C=Math.sin(d),E=Math.sin(f),x=Math.sin(p),S=Math.sin(m),I=Math.sin(_),D=Math.sin(g),P=Math.sin(b),j=Math.cos(o),R=Math.cos(a),L=Math.cos(c),M=Math.cos(l),N=Math.cos(u),B=Math.cos(h),F=Math.cos(d),z=Math.cos(f),k=Math.cos(p),U=Math.cos(m),V=Math.cos(_),H=Math.cos(g),G=Math.cos(b),W=(269.9949+.0031*i-3.8787*y-.1204*v+.07*O-.0172*A+.0072*T-.0052*S+.0043*P)*s["a"].RADIANS_PER_DEGREE,q=(66.5392+.013*i+1.5419*j+.0239*R-.0278*L+.0068*M-.0029*B+9e-4*F+8e-4*U-9e-4*G)*s["a"].RADIANS_PER_DEGREE,Y=(38.3213+13.17635815*n-14e-13*n*n+3.561*y+.1208*v-.0642*O+.0158*A+.0252*w-.0066*T-.0047*C-.0046*E+.0028*x+.0052*S+.004*I+.0019*D-.0044*P)*s["a"].RADIANS_PER_DEGREE,X=(13.17635815-2*n*14e-13+3.561*j*fC+.1208*R*pC-.0642*L*mC+.0158*M*_C+.0252*N*gC-.0066*B*bC-.0047*F*yC-.0046*z*vC+.0028*k*OC+.0052*U*AC+.004*V*wC+.0019*H*TC-.0044*G*CC)/86400*s["a"].RADIANS_PER_DEGREE;return Object(r["a"])(t)||(t=new lC),t.rightAscension=W,t.declination=q,t.rotation=Y,t.rotationRate=X,t};var xC=uC;function SC(e){Object(r["a"])(e)&&"function"===typeof e||(e=xC.ComputeMoon),this._computeFunction=e}const IC=new g,DC=new g,PC=new g;function jC(e,t,n){const i=IC;i.x=Math.cos(e+s["a"].PI_OVER_TWO),i.y=Math.sin(e+s["a"].PI_OVER_TWO),i.z=0;const o=Math.cos(t),a=PC;a.x=o*Math.cos(e),a.y=o*Math.sin(e),a.z=Math.sin(t);const c=g.cross(a,i,DC);return Object(r["a"])(n)||(n=new ce),n[0]=i.x,n[1]=c.x,n[2]=a.x,n[3]=i.y,n[4]=c.y,n[5]=a.y,n[6]=i.z,n[7]=c.z,n[8]=a.z,n}const RC=new ce,LC=new Kr;SC.prototype.evaluate=function(e,t){Object(r["a"])(e)||(e=mo.now());const n=this._computeFunction(e),i=jC(n.rightAscension,n.declination,t),o=s["a"].zeroToTwoPi(n.rotation),a=Kr.fromAxisAngle(g.UNIT_Z,o,LC),c=ce.fromQuaternion(Kr.conjugate(a,a),RC),l=ce.multiply(c,i,i);return l};var MC=SC;const NC={type:void 0};NC.getRequiredDataPoints=a["a"].throwInstantiationError,NC.interpolateOrderZero=a["a"].throwInstantiationError,NC.interpolate=a["a"].throwInstantiationError;var BC=NC;const FC={STEP:0,LINEAR:1,CUBICSPLINE:2};var zC=Object.freeze(FC);let kC;const UC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjYjNlMTg5Zi1hMzc2LTRmZjktOGEwZC00NGEzNTM0MTAzZGUiLCJpZCI6MjU5LCJpYXQiOjE1MTgxOTE2NTV9.qaP8-_Ej6AihGnv5iB990Hm6lHr8F_rrC3_EPxdT6MQ",VC={};VC.defaultAccessToken=UC,VC.defaultServer=new Et["a"]({url:"https://api.cesium.com/"}),VC.getDefaultTokenCredit=function(e){if(e===UC){if(!Object(r["a"])(kC)){const e='<b>             This application is using Cesium\'s default ion access token. Please assign <i>Cesium.Ion.defaultAccessToken</i>             with an access token from your ion account before making any Cesium API calls.             You can sign up for a free ion account at <a href="https://cesium.com">https://cesium.com</a>.</b>';kC=new hn(e,!0)}return kC}};var HC=VC;function GC(e){i["a"].defined("url",e),this._url=Et["a"].createIfNeeded(e),this._url.appendForwardSlash()}Object.defineProperties(GC.prototype,{url:{get:function(){return this._url}}}),GC.prototype.geocode=function(e,t){i["a"].typeOf.string("query",e);const n=this._url.getDerivedResource({url:t===gA.AUTOCOMPLETE?"autocomplete":"search",queryParameters:{text:e}});return n.fetchJson().then((function(e){return e.features.map((function(e){let t;const n=e.bbox;if(Object(r["a"])(n))t=Fe.fromDegrees(n[0],n[1],n[2],n[3]);else{const n=e.geometry.coordinates[0],i=e.geometry.coordinates[1];t=g.fromDegrees(n,i)}return{displayName:e.properties.label,destination:t}}))}))};var WC=GC;function qC(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.scene",e.scene);const t=Object(o["a"])(e.accessToken,HC.defaultAccessToken),n=Et["a"].createIfNeeded(Object(o["a"])(e.server,HC.defaultServer));n.appendForwardSlash();const a=HC.getDefaultTokenCredit(t);Object(r["a"])(a)&&e.scene.frameState.creditDisplay.addDefaultCredit(hn.clone(a));const s=n.getDerivedResource({url:"v1/geocode"});Object(r["a"])(t)&&s.appendQueryParameters({access_token:t}),this._accessToken=t,this._server=n,this._pelias=new WC(s)}qC.prototype.geocode=function(e,t){return this._pelias.geocode(e,t)};var YC=qC;function XC(e,t){let n;i["a"].defined("endpoint",e),i["a"].defined("endpointResource",t);const o=e.externalType,a=Object(r["a"])(o);if(a){if("3DTILES"!==o&&"STK_TERRAIN_SERVER"!==o)throw new ye["a"]("Ion.createResource does not support external imagery assets; use IonImageryProvider instead.");n={url:e.options.url}}else n={url:e.url,retryAttempts:1,retryCallback:KC};Et["a"].call(this,n),this._ionEndpoint=e,this._ionEndpointDomain=a?void 0:new Uc.a(e.url).authority(),this._ionEndpointResource=t,this._ionRoot=void 0,this._pendingPromise=void 0,this._credits=void 0,this._isExternal=a}function KC(e,t){const n=Object(o["a"])(e._ionRoot,e),i=n._ionEndpointResource,a="undefined"!==typeof Image;return Object(r["a"])(t)&&(401===t.statusCode||a&&t.target instanceof Image)?(Object(r["a"])(n._pendingPromise)||(n._pendingPromise=i.fetchJson().then((function(e){return n._ionEndpoint=e,e})).finally((function(e){return n._pendingPromise=void 0,e}))),n._pendingPromise.then((function(t){return e._ionEndpoint=t,!0}))):Promise.resolve(!1)}Object(r["a"])(Object.create)&&(XC.prototype=Object.create(Et["a"].prototype),XC.prototype.constructor=XC),XC.fromAssetId=function(e,t){const n=XC._createEndpointResource(e,t);return n.fetchJson().then((function(e){return new XC(e,n)}))},Object.defineProperties(XC.prototype,{credits:{get:function(){return Object(r["a"])(this._ionRoot)?this._ionRoot.credits:(Object(r["a"])(this._credits)||(this._credits=XC.getCreditsFromEndpoint(this._ionEndpoint,this._ionEndpointResource)),this._credits)}}}),XC.getCreditsFromEndpoint=function(e,t){const n=e.attributions.map(hn.getIonCredit),i=HC.getDefaultTokenCredit(t.queryParameters.access_token);return Object(r["a"])(i)&&n.push(hn.clone(i)),n},XC.prototype.clone=function(e){const t=Object(o["a"])(this._ionRoot,this);return Object(r["a"])(e)||(e=new XC(t._ionEndpoint,t._ionEndpointResource)),e=Et["a"].prototype.clone.call(this,e),e._ionRoot=t,e._isExternal=this._isExternal,e},XC.prototype.fetchImage=function(e){if(!this._isExternal){const t=e;e={preferBlob:!0},Object(r["a"])(t)&&(e.flipY=t.flipY,e.preferImageBitmap=t.preferImageBitmap)}return Et["a"].prototype.fetchImage.call(this,e)},XC.prototype._makeRequest=function(e){return this._isExternal||new Uc.a(this.url).authority()!==this._ionEndpointDomain||(Object(r["a"])(e.headers)||(e.headers={}),e.headers.Authorization=`Bearer ${this._ionEndpoint.accessToken}`),Et["a"].prototype._makeRequest.call(this,e)},XC._createEndpointResource=function(e,t){i["a"].defined("assetId",e),t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);let n=Object(o["a"])(t.server,HC.defaultServer);const a=Object(o["a"])(t.accessToken,HC.defaultAccessToken);n=Et["a"].createIfNeeded(n);const s={url:`v1/assets/${e}/endpoint`};return Object(r["a"])(a)&&(s.queryParameters={access_token:a}),n.getDerivedResource(s)};var $C=XC;function JC(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.start=Object(r["a"])(e.start)?mo.clone(e.start):new mo,this.stop=Object(r["a"])(e.stop)?mo.clone(e.stop):new mo,this.data=e.data,this.isStartIncluded=Object(o["a"])(e.isStartIncluded,!0),this.isStopIncluded=Object(o["a"])(e.isStopIncluded,!0)}Object.defineProperties(JC.prototype,{isEmpty:{get:function(){const e=mo.compare(this.stop,this.start);return e<0||0===e&&(!this.isStartIncluded||!this.isStopIncluded)}}});const QC={start:void 0,stop:void 0,isStartIncluded:void 0,isStopIncluded:void 0,data:void 0};JC.fromIso8601=function(e,t){i["a"].typeOf.object("options",e),i["a"].typeOf.string("options.iso8601",e.iso8601);const n=e.iso8601.split("/");if(2!==n.length)throw new a["a"]("options.iso8601 is an invalid ISO 8601 interval.");const s=mo.fromIso8601(n[0]),c=mo.fromIso8601(n[1]),l=Object(o["a"])(e.isStartIncluded,!0),u=Object(o["a"])(e.isStopIncluded,!0),h=e.data;return Object(r["a"])(t)?(t.start=s,t.stop=c,t.isStartIncluded=l,t.isStopIncluded=u,t.data=h,t):(QC.start=s,QC.stop=c,QC.isStartIncluded=l,QC.isStopIncluded=u,QC.data=h,new JC(QC))},JC.toIso8601=function(e,t){return i["a"].typeOf.object("timeInterval",e),`${mo.toIso8601(e.start,t)}/${mo.toIso8601(e.stop,t)}`},JC.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.start=e.start,t.stop=e.stop,t.isStartIncluded=e.isStartIncluded,t.isStopIncluded=e.isStopIncluded,t.data=e.data,t):new JC(e)},JC.equals=function(e,t,n){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&mo.equals(e.start,t.start)&&mo.equals(e.stop,t.stop)&&(e.data===t.data||Object(r["a"])(n)&&n(e.data,t.data)))},JC.equalsEpsilon=function(e,t,n,i){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&(e.isEmpty&&t.isEmpty||e.isStartIncluded===t.isStartIncluded&&e.isStopIncluded===t.isStopIncluded&&mo.equalsEpsilon(e.start,t.start,n)&&mo.equalsEpsilon(e.stop,t.stop,n)&&(e.data===t.data||Object(r["a"])(i)&&i(e.data,t.data)))},JC.intersect=function(e,t,n,o){if(i["a"].typeOf.object("left",e),!Object(r["a"])(t))return JC.clone(JC.EMPTY,n);const a=e.start,s=e.stop,c=t.start,l=t.stop,u=mo.greaterThanOrEquals(c,a)&&mo.greaterThanOrEquals(s,c),h=!u&&mo.lessThanOrEquals(c,a)&&mo.lessThanOrEquals(a,l);if(!u&&!h)return JC.clone(JC.EMPTY,n);const d=e.isStartIncluded,f=e.isStopIncluded,p=t.isStartIncluded,m=t.isStopIncluded,_=mo.lessThan(s,l);return Object(r["a"])(n)||(n=new JC),n.start=u?c:a,n.isStartIncluded=d&&p||!mo.equals(c,a)&&(u&&p||h&&d),n.stop=_?s:l,n.isStopIncluded=_?f:f&&m||!mo.equals(l,s)&&m,n.data=Object(r["a"])(o)?o(e.data,t.data):e.data,n},JC.contains=function(e,t){if(i["a"].typeOf.object("timeInterval",e),i["a"].typeOf.object("julianDate",t),e.isEmpty)return!1;const n=mo.compare(e.start,t);if(0===n)return e.isStartIncluded;const o=mo.compare(t,e.stop);return 0===o?e.isStopIncluded:n<0&&o<0},JC.prototype.clone=function(e){return JC.clone(this,e)},JC.prototype.equals=function(e,t){return JC.equals(this,e,t)},JC.prototype.equalsEpsilon=function(e,t,n){return JC.equalsEpsilon(this,e,t,n)},JC.prototype.toString=function(){return JC.toIso8601(this)},JC.EMPTY=Object.freeze(new JC({start:new mo,stop:new mo,isStartIncluded:!1,isStopIncluded:!1}));var ZC=JC;const eE=Object.freeze(mo.fromIso8601("0000-01-01T00:00:00Z")),tE=Object.freeze(mo.fromIso8601("9999-12-31T24:00:00Z")),nE=Object.freeze(new ZC({start:eE,stop:tE})),iE={MINIMUM_VALUE:eE,MAXIMUM_VALUE:tE,MAXIMUM_INTERVAL:nE};var oE=iE;function rE(){}function aE(){const e=rE._transcodeTaskProcessor.initWebAssemblyModule({modulePath:"ThirdParty/Workers/basis_transcoder.js",wasmBinaryFile:"ThirdParty/basis_transcoder.wasm"}).then((function(){return rE._transcodeTaskProcessor}));rE._readyPromise=e}rE._transcodeTaskProcessor=new il("transcodeKTX2",Number.POSITIVE_INFINITY),rE._readyPromise=void 0,rE.transcode=function(e,t){return i["a"].defined("supportedTargetFormats",t),Object(r["a"])(rE._readyPromise)||aE(),rE._readyPromise.then((function(n){let i;if(e instanceof ArrayBuffer){const o=new Uint8Array(e);return i={supportedTargetFormats:t,ktx2Buffer:o},n.scheduleTask(i,[e])}return i={supportedTargetFormats:t,ktx2Buffer:e},n.scheduleTask(i,[e.buffer])})).then((function(e){const t=e.length,n=Object.keys(e[0]),i=n.length;let o;for(o=0;o<t;o++){const t=e[o];for(let e=0;e<i;e++){const i=t[n[e]];t[n[e]]=new Lm(i.internalFormat,i.datatype,i.width,i.height,i.levelBuffer)}}if(1===i){for(o=0;o<t;++o)e[o]=e[o][n[0]];1===t&&(e=e[0])}return e})).catch((function(e){throw e}))};var sE=rE;const cE={SHIFT:0,CTRL:1,ALT:2};var lE=Object.freeze(cE);const uE={type:"Lagrange",getRequiredDataPoints:function(e){return Math.max(e+1,2)},interpolateOrderZero:function(e,t,n,i,o){let a,s;Object(r["a"])(o)||(o=new Array(i));const c=t.length;for(a=0;a<i;a++)o[a]=0;for(a=0;a<c;a++){let r=1;for(s=0;s<c;s++)if(s!==a){const n=t[a]-t[s];r*=(e-t[s])/n}for(s=0;s<i;s++)o[s]+=r*n[a*i+s]}return o}};var hE=uE;const dE={type:"Linear",getRequiredDataPoints:function(e){return 2},interpolateOrderZero:function(e,t,n,i,o){if(2!==t.length)throw new a["a"]("The xTable provided to the linear interpolator must have exactly two elements.");if(i<=0)throw new a["a"]("There must be at least 1 dependent variable for each independent variable.");let s,c,l;Object(r["a"])(o)||(o=new Array(i));const u=t[0],h=t[1];if(u===h)throw new a["a"]("Divide by zero error: xTable[0] and xTable[1] are equal");for(s=0;s<i;s++)c=n[s],l=n[s+i],o[s]=((l-c)*e+h*c-u*l)/(h-u);return o}};var fE=dE;function pE(e){e=Object(o["a"])(e,0),this._array=new Array(e),this._length=e}Object.defineProperties(pE.prototype,{length:{get:function(){return this._length},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("length",e,0);const t=this._array,n=this._length;if(e<n)for(let i=e;i<n;++i)t[i]=void 0;else e>t.length&&(t.length=e);this._length=e}},values:{get:function(){return this._array}}}),pE.prototype.get=function(e){return i["a"].typeOf.number.lessThan("index",e,this._array.length),this._array[e]},pE.prototype.set=function(e,t){i["a"].typeOf.number("index",e),e>=this._length&&(this.length=e+1),this._array[e]=t},pE.prototype.peek=function(){return this._array[this._length-1]},pE.prototype.push=function(e){const t=this.length++;this._array[t]=e},pE.prototype.pop=function(){if(0===this._length)return;const e=this._array[this._length-1];return--this.length,e},pE.prototype.reserve=function(e){i["a"].typeOf.number.greaterThanOrEquals("length",e,0),e>this._array.length&&(this._array.length=e)},pE.prototype.resize=function(e){i["a"].typeOf.number.greaterThanOrEquals("length",e,0),this.length=e},pE.prototype.trim=function(e){e=Object(o["a"])(e,this._length),this._array.length=e};var mE=pE;function _E(){a["a"].throwInstantiationError()}Object.defineProperties(_E.prototype,{ellipsoid:{get:a["a"].throwInstantiationError}}),_E.prototype.project=a["a"].throwInstantiationError,_E.prototype.unproject=a["a"].throwInstantiationError;var gE=_E;function bE(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.weights,n=e.times;if(i["a"].defined("weights",t),i["a"].defined("times",n),i["a"].typeOf.number.greaterThanOrEquals("weights.length",t.length,3),t.length%n.length!==0)throw new a["a"]("times.length must be a factor of weights.length.");this._times=n,this._weights=t,this._count=t.length/n.length,this._lastTimeIndex=0}Object.defineProperties(bE.prototype,{times:{get:function(){return this._times}},weights:{get:function(){return this._weights}}}),bE.prototype.findTimeInterval=uh.prototype.findTimeInterval,bE.prototype.wrapTime=uh.prototype.wrapTime,bE.prototype.clampTime=uh.prototype.clampTime,bE.prototype.evaluate=function(e,t){const n=this.weights,i=this.times,o=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),a=(e-i[o])/(i[o+1]-i[o]);Object(r["a"])(t)||(t=new Array(this._count));for(let r=0;r<this._count;r++){const e=o*this._count+r;t[r]=n[e]*(1-a)+n[e+this._count]*a}return t};var yE=bE;const vE={};function OE(e){return e=16711935&(e^e<<8),e=252645135&(e^e<<4),e=858993459&(e^e<<2),e=1431655765&(e^e<<1),e}function AE(e){return e=50331903&(e^e<<16),e=50393103&(e^e<<8),e=51130563&(e^e<<4),e=153391689&(e^e<<2),e}function wE(e){return e&=1431655765,e=858993459&(e^e>>1),e=252645135&(e^e>>2),e=16711935&(e^e>>4),e=65535&(e^e>>8),e}function TE(e){return e&=153391689,e=51130563&(e^e>>2),e=50393103&(e^e>>4),e=4278190335&(e^e>>8),e=1023&(e^e>>16),e}vE.encode2D=function(e,t){if(i["a"].typeOf.number("x",e),i["a"].typeOf.number("y",t),e<0||e>65535||t<0||t>65535)throw new a["a"]("inputs must be 16-bit unsigned integers");return(OE(e)|OE(t)<<1)>>>0},vE.decode2D=function(e,t){if(i["a"].typeOf.number("mortonIndex",e),e<0||e>4294967295)throw new a["a"]("input must be a 32-bit unsigned integer");return Object(r["a"])(t)||(t=new Array(2)),t[0]=wE(e),t[1]=wE(e>>1),t},vE.encode3D=function(e,t,n){if(i["a"].typeOf.number("x",e),i["a"].typeOf.number("y",t),i["a"].typeOf.number("z",n),e<0||e>1023||t<0||t>1023||n<0||n>1023)throw new a["a"]("inputs must be 10-bit unsigned integers");return AE(e)|AE(t)<<1|AE(n)<<2},vE.decode3D=function(e,t){if(i["a"].typeOf.number("mortonIndex",e),e<0||e>1073741823)throw new a["a"]("input must be a 30-bit unsigned integer");return Object(r["a"])(t)||(t=new Array(3)),t[0]=TE(e),t[1]=TE(e>>1),t[2]=TE(e>>2),t};var CE=vE;function EE(e,t,n,i){this.near=Object(o["a"])(e,0),this.nearValue=Object(o["a"])(t,0),this.far=Object(o["a"])(n,1),this.farValue=Object(o["a"])(i,0)}EE.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.near=e.near,t.nearValue=e.nearValue,t.far=e.far,t.farValue=e.farValue,t):new EE(e.near,e.nearValue,e.far,e.farValue)},EE.packedLength=4,EE.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),t[n++]=e.near,t[n++]=e.nearValue,t[n++]=e.far,t[n]=e.farValue,t},EE.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");return t=Object(o["a"])(t,0),Object(r["a"])(n)||(n=new EE),n.near=e[t++],n.nearValue=e[t++],n.far=e[t++],n.farValue=e[t],n},EE.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.near===t.near&&e.nearValue===t.nearValue&&e.far===t.far&&e.farValue===t.farValue},EE.prototype.clone=function(e){return EE.clone(this,e)},EE.prototype.equals=function(e){return EE.equals(this,e)};var xE=EE;const SE={NONE:-1,PARTIAL:0,FULL:1};var IE=Object.freeze(SE);function DE(e,t){if(!Object(r["a"])(e))throw new a["a"]("occluderBoundingSphere is required.");if(!Object(r["a"])(t))throw new a["a"]("camera position is required.");this._occluderPosition=g.clone(e.center),this._occluderRadius=e.radius,this._horizonDistance=0,this._horizonPlaneNormal=void 0,this._horizonPlanePosition=void 0,this._cameraPosition=void 0,this.cameraPosition=t}const PE=new g;Object.defineProperties(DE.prototype,{position:{get:function(){return this._occluderPosition}},radius:{get:function(){return this._occluderRadius}},cameraPosition:{set:function(e){if(!Object(r["a"])(e))throw new a["a"]("cameraPosition is required.");e=g.clone(e,this._cameraPosition);const t=g.subtract(this._occluderPosition,e,PE);let n=g.magnitudeSquared(t);const i=this._occluderRadius*this._occluderRadius;let o,s,c;if(n>i){o=Math.sqrt(n-i),n=1/Math.sqrt(n),s=g.multiplyByScalar(t,n,PE);const r=o*o*n;c=g.add(e,g.multiplyByScalar(s,r,PE),PE)}else o=Number.MAX_VALUE;this._horizonDistance=o,this._horizonPlaneNormal=s,this._horizonPlanePosition=c,this._cameraPosition=e}}}),DE.fromBoundingSphere=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("occluderBoundingSphere is required.");if(!Object(r["a"])(t))throw new a["a"]("camera position is required.");return Object(r["a"])(n)?(g.clone(e.center,n._occluderPosition),n._occluderRadius=e.radius,n.cameraPosition=t,n):new DE(e,t)};const jE=new g;DE.prototype.isPointVisible=function(e){if(this._horizonDistance!==Number.MAX_VALUE){let t=g.subtract(e,this._occluderPosition,jE),n=this._occluderRadius;if(n=g.magnitudeSquared(t)-n*n,n>0)return n=Math.sqrt(n)+this._horizonDistance,t=g.subtract(e,this._cameraPosition,t),n*n>g.magnitudeSquared(t)}return!1};const RE=new g;DE.prototype.isBoundingSphereVisible=function(e){const t=g.clone(e.center,RE),n=e.radius;if(this._horizonDistance!==Number.MAX_VALUE){let e=g.subtract(t,this._occluderPosition,jE),i=this._occluderRadius-n;if(i=g.magnitudeSquared(e)-i*i,n<this._occluderRadius)return i>0&&(i=Math.sqrt(i)+this._horizonDistance,e=g.subtract(t,this._cameraPosition,e),i*i+n*n>g.magnitudeSquared(e));if(i>0){e=g.subtract(t,this._cameraPosition,e);const o=g.magnitudeSquared(e),r=this._occluderRadius*this._occluderRadius,a=n*n;return(this._horizonDistance*this._horizonDistance+r)*a>o*r||(i=Math.sqrt(i)+this._horizonDistance,i*i+a>o)}return!0}return!1};const LE=new g;DE.prototype.computeVisibility=function(e){if(!Object(r["a"])(e))throw new a["a"]("occludeeBS is required.");const t=g.clone(e.center),n=e.radius;if(n>this._occluderRadius)return IE.FULL;if(this._horizonDistance!==Number.MAX_VALUE){let e=g.subtract(t,this._occluderPosition,LE),i=this._occluderRadius-n;const o=g.magnitudeSquared(e);if(i=o-i*i,i>0){i=Math.sqrt(i)+this._horizonDistance,e=g.subtract(t,this._cameraPosition,e);const r=g.magnitudeSquared(e);return i*i+n*n<r?IE.NONE:(i=this._occluderRadius+n,i=o-i*i,i>0?(i=Math.sqrt(i)+this._horizonDistance,r<i*i+n*n?IE.FULL:IE.PARTIAL):(e=g.subtract(t,this._horizonPlanePosition,e),g.dot(e,this._horizonPlaneNormal)>-n?IE.PARTIAL:IE.FULL))}}return IE.NONE};const ME=new g;DE.computeOccludeePoint=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("occluderBoundingSphere is required.");if(!Object(r["a"])(n))throw new a["a"]("positions is required.");if(0===n.length)throw new a["a"]("positions must contain at least one element");const i=g.clone(t),o=g.clone(e.center),s=e.radius,c=n.length;if(g.equals(o,t))throw new a["a"]("occludeePosition must be different than occluderBoundingSphere.center");const l=g.normalize(g.subtract(i,o,ME),ME),u=-g.dot(l,o),h=DE._anyRotationVector(o,l,u);let d,f=DE._horizonToPlaneNormalDotProduct(e,l,u,h,n[0]);if(!f)return;for(let r=1;r<c;++r){if(d=DE._horizonToPlaneNormalDotProduct(e,l,u,h,n[r]),!d)return;d<f&&(f=d)}if(f<.0017453283658983088)return;const p=s/f;return g.add(o,g.multiplyByScalar(l,p,ME),ME)};const NE=[];DE.computeOccludeePointFromRectangle=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("rectangle is required.");t=Object(o["a"])(t,k.WGS84);const n=Fe.subsample(e,t,0,NE),i=Tt.fromPoints(n),s=g.ZERO;if(!g.equals(s,i.center))return DE.computeOccludeePoint(new Tt(s,t.minimumRadius),i.center,n)};const BE=new g;DE._anyRotationVector=function(e,t,n){const i=g.abs(t,BE);let o=i.x>i.y?0:1;(0===o&&i.z>i.x||1===o&&i.z>i.y)&&(o=2);const r=new g;let a;0===o?(i.x=e.x,i.y=e.y+1,i.z=e.z+1,a=g.UNIT_X):1===o?(i.x=e.x+1,i.y=e.y,i.z=e.z+1,a=g.UNIT_Y):(i.x=e.x+1,i.y=e.y+1,i.z=e.z,a=g.UNIT_Z);const s=(g.dot(t,i)+n)/-g.dot(t,a);return g.normalize(g.subtract(g.add(i,g.multiplyByScalar(a,s,r),i),e,i),i)};const FE=new g;DE._rotationVector=function(e,t,n,i,o){let r=g.subtract(i,e,FE);if(r=g.normalize(r,r),g.dot(t,r)<.9999999847691291){const e=g.cross(t,r,r),n=g.magnitude(e);if(n>s["a"].EPSILON13)return g.normalize(e,new g)}return o};const zE=new g,kE=new g,UE=new g,VE=new g;DE._horizonToPlaneNormalDotProduct=function(e,t,n,i,o){const r=g.clone(o,zE),a=g.clone(e.center,kE),s=e.radius;let c=g.subtract(a,r,UE);const l=g.magnitudeSquared(c),u=s*s;if(l<u)return!1;const h=l-u,d=Math.sqrt(h),f=Math.sqrt(l),p=1/f,m=d*p,_=m*d;c=g.normalize(c,c);const b=g.add(r,g.multiplyByScalar(c,_,VE),VE),y=Math.sqrt(h-_*_);let v=this._rotationVector(a,t,n,r,i),O=g.fromElements(v.x*v.x*c.x+(v.x*v.y-v.z)*c.y+(v.x*v.z+v.y)*c.z,(v.x*v.y+v.z)*c.x+v.y*v.y*c.y+(v.y*v.z-v.x)*c.z,(v.x*v.z-v.y)*c.x+(v.y*v.z+v.x)*c.y+v.z*v.z*c.z,zE);O=g.normalize(O,O);const A=g.multiplyByScalar(O,y,zE);v=g.normalize(g.subtract(g.add(b,A,UE),a,UE),UE);const w=g.dot(t,v);v=g.normalize(g.subtract(g.subtract(b,A,v),a,v),v);const T=g.dot(t,v);return w<T?w:T};var HE=DE;function GE(e,t,n){e=Object(o["a"])(e,0),t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),this.value=new Float32Array([e,t,n])}Object.defineProperties(GE.prototype,{componentDatatype:{get:function(){return Ks.FLOAT}},componentsPerAttribute:{get:function(){return 3}},normalize:{get:function(){return!1}}}),GE.fromCartesian3=function(e){return i["a"].defined("offset",e),new GE(e.x,e.y,e.z)},GE.toValue=function(e,t){return i["a"].defined("offset",e),Object(r["a"])(t)||(t=new Float32Array([e.x,e.y,e.z])),t[0]=e.x,t[1]=e.y,t[2]=e.z,t};var WE=GE,qE=n("2bb9");function YE(e,t,n){i["a"].defined("url",e),i["a"].defined("apiKey",t),Object(r["a"])(n)&&i["a"].typeOf.object("params",n),e=Et["a"].createIfNeeded(e),e.appendForwardSlash(),e.setQueryParameters({key:t}),this._url=e,this._params=Object(o["a"])(n,{})}Object.defineProperties(YE.prototype,{url:{get:function(){return this._url}},params:{get:function(){return this._params}}}),YE.prototype.geocode=function(e){i["a"].typeOf.string("query",e);const t=this._url.getDerivedResource({url:"json",queryParameters:Object(qE["a"])(this._params,{q:e})});return t.fetchJson().then((function(e){return e.results.map((function(e){let t;const n=e.bounds;if(Object(r["a"])(n))t=Fe.fromDegrees(n.southwest.lng,n.southwest.lat,n.northeast.lng,n.northeast.lat);else{const n=e.geometry.lat,i=e.geometry.lng;t=g.fromDegrees(n,i)}return{displayName:e.formatted,destination:t}}))}))};var XE=YE;const KE={packedLength:void 0,pack:a["a"].throwInstantiationError,unpack:a["a"].throwInstantiationError};var $E=KE;const JE={packedInterpolationLength:void 0,convertPackedArrayForInterpolation:a["a"].throwInstantiationError,unpackInterpolationResult:a["a"].throwInstantiationError};var QE=JE;function ZE(e,t,n,i,o){const r=e.measureText(t),a=!/\S/.test(t);if(!a){const a=document.defaultView.getComputedStyle(e.canvas).getPropertyValue("font-size").replace("px",""),s=document.createElement("canvas"),c=100,l=r.width+c|0,u=3*a,h=u/2;s.width=l,s.height=u;const d=s.getContext("2d");d.font=n,d.fillStyle="white",d.fillRect(0,0,s.width+1,s.height+1),i&&(d.strokeStyle="black",d.lineWidth=e.lineWidth,d.strokeText(t,c/2,h)),o&&(d.fillStyle="black",d.fillText(t,c/2,h));const f=d.getImageData(0,0,l,u).data,p=f.length,m=4*l;let _,g,b,y;for(_=0;_<p;++_)if(255!==f[_]){b=_/m|0;break}for(_=p-1;_>=0;--_)if(255!==f[_]){y=_/m|0;break}let v=-1;for(_=0;_<l&&-1===v;++_)for(g=0;g<u;++g){const e=4*_+g*m;if(255!==f[e]||255!==f[e+1]||255!==f[e+2]||255!==f[e+3]){v=_;break}}return{width:r.width,height:y-b,ascent:h-b,descent:y-h,minx:v-c/2}}return{width:r.width,height:0,ascent:0,descent:0,minx:0}}let ex;function tx(e,t){if(!Object(r["a"])(e))throw new a["a"]("text is required.");if(""===e)return;t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=Object(o["a"])(t.font,"10px sans-serif"),i=Object(o["a"])(t.stroke,!1),s=Object(o["a"])(t.fill,!0),c=Object(o["a"])(t.strokeWidth,1),l=Object(o["a"])(t.backgroundColor,Dm.TRANSPARENT),u=Object(o["a"])(t.padding,0),h=2*u,d=document.createElement("canvas");d.width=1,d.height=1,d.style.font=n;const f=d.getContext("2d");Object(r["a"])(ex)||(Object(r["a"])(f.imageSmoothingEnabled)?ex="imageSmoothingEnabled":Object(r["a"])(f.mozImageSmoothingEnabled)?ex="mozImageSmoothingEnabled":Object(r["a"])(f.webkitImageSmoothingEnabled)?ex="webkitImageSmoothingEnabled":Object(r["a"])(f.msImageSmoothingEnabled)&&(ex="msImageSmoothingEnabled")),f.font=n,f.lineJoin="round",f.lineWidth=c,f[ex]=!1,d.style.visibility="hidden",document.body.appendChild(d);const p=ZE(f,e,n,i,s);d.dimensions=p,document.body.removeChild(d),d.style.visibility="";const m=-p.minx,_=Math.ceil(p.width)+m+h,g=p.height+h,b=g-p.ascent+u,y=g-b+h;if(d.width=_,d.height=g,f.font=n,f.lineJoin="round",f.lineWidth=c,f[ex]=!1,l!==Dm.TRANSPARENT&&(f.fillStyle=l.toCssColorString(),f.fillRect(0,0,d.width,d.height)),i){const n=Object(o["a"])(t.strokeColor,Dm.BLACK);f.strokeStyle=n.toCssColorString(),f.strokeText(e,m+u,y)}if(s){const n=Object(o["a"])(t.fillColor,Dm.WHITE);f.fillStyle=n.toCssColorString(),f.fillText(e,m+u,y)}return d}var nx=tx;function ix(){this._cache={}}ix.prototype.fromColor=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("color is required");if(!Object(r["a"])(t))throw new a["a"]("size is required");return cx(void 0,void 0,e,t,this._cache)},ix.prototype.fromUrl=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("url is required");if(!Object(r["a"])(t))throw new a["a"]("color is required");if(!Object(r["a"])(n))throw new a["a"]("size is required");return cx(e,void 0,t,n,this._cache)},ix.prototype.fromMakiIconId=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("id is required");if(!Object(r["a"])(t))throw new a["a"]("color is required");if(!Object(r["a"])(n))throw new a["a"]("size is required");return cx(Bt(`Assets/Textures/maki/${encodeURIComponent(e)}.png`),void 0,t,n,this._cache)},ix.prototype.fromText=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("text is required");if(!Object(r["a"])(t))throw new a["a"]("color is required");if(!Object(r["a"])(n))throw new a["a"]("size is required");return cx(void 0,e,t,n,this._cache)};const ox=new Dm;function rx(e,t,n){e.save(),e.scale(n/24,n/24),e.fillStyle=t.toCssColorString(),e.strokeStyle=t.brighten(.6,ox).toCssColorString(),e.lineWidth=.846,e.beginPath(),e.moveTo(6.72,.422),e.lineTo(17.28,.422),e.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),e.lineTo(19.577,10.973),e.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),e.lineTo(14.386,14.008),e.lineTo(11.826,23.578),e.lineTo(9.614,14.008),e.lineTo(6.719,13.965),e.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),e.lineTo(4.422,3.416),e.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),e.closePath(),e.fill(),e.stroke(),e.restore()}function ax(e,t,n){const i=n/2.5;let o=i,r=i;t.width>t.height?r=i*(t.height/t.width):t.width<t.height&&(o=i*(t.width/t.height));const a=Math.round((n-o)/2),s=Math.round(7/24*n-r/2);e.globalCompositeOperation="destination-out",e.drawImage(t,a-1,s,o,r),e.drawImage(t,a,s-1,o,r),e.drawImage(t,a+1,s,o,r),e.drawImage(t,a,s+1,o,r),e.globalCompositeOperation="destination-over",e.fillStyle=Dm.BLACK.toCssColorString(),e.fillRect(a-1,s-1,o+2,r+2),e.globalCompositeOperation="destination-out",e.drawImage(t,a,s,o,r),e.globalCompositeOperation="destination-over",e.fillStyle=Dm.WHITE.toCssColorString(),e.fillRect(a-1,s-2,o+2,r+2)}const sx=new Array(4);function cx(e,t,n,i,o){sx[0]=e,sx[1]=t,sx[2]=n,sx[3]=i;const a=JSON.stringify(sx),s=o[a];if(Object(r["a"])(s))return s;const c=document.createElement("canvas");c.width=i,c.height=i;const l=c.getContext("2d");if(rx(l,n,i),Object(r["a"])(e)){const t=Et["a"].createIfNeeded(e),n=t.fetchImage().then((function(e){return ax(l,e,i),o[a]=c,c}));return o[a]=n,n}if(Object(r["a"])(t)){const e=nx(t,{font:`bold ${i}px sans-serif`});ax(l,e,i)}return o[a]=c,c}var lx=ix;const ux={UNSIGNED_BYTE:Ys.UNSIGNED_BYTE,UNSIGNED_SHORT:Ys.UNSIGNED_SHORT,UNSIGNED_INT:Ys.UNSIGNED_INT,FLOAT:Ys.FLOAT,HALF_FLOAT:Ys.HALF_FLOAT_OES,UNSIGNED_INT_24_8:Ys.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:Ys.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:Ys.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:Ys.UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(e,t){switch(e){case ux.UNSIGNED_BYTE:return Ys.UNSIGNED_BYTE;case ux.UNSIGNED_SHORT:return Ys.UNSIGNED_SHORT;case ux.UNSIGNED_INT:return Ys.UNSIGNED_INT;case ux.FLOAT:return Ys.FLOAT;case ux.HALF_FLOAT:return t.webgl2?Ys.HALF_FLOAT:Ys.HALF_FLOAT_OES;case ux.UNSIGNED_INT_24_8:return Ys.UNSIGNED_INT_24_8;case ux.UNSIGNED_SHORT_4_4_4_4:return Ys.UNSIGNED_SHORT_4_4_4_4;case ux.UNSIGNED_SHORT_5_5_5_1:return Ys.UNSIGNED_SHORT_5_5_5_1;case ux.UNSIGNED_SHORT_5_6_5:return ux.UNSIGNED_SHORT_5_6_5}},isPacked:function(e){return e===ux.UNSIGNED_INT_24_8||e===ux.UNSIGNED_SHORT_4_4_4_4||e===ux.UNSIGNED_SHORT_5_5_5_1||e===ux.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(e){switch(e){case ux.UNSIGNED_BYTE:return 1;case ux.UNSIGNED_SHORT:case ux.UNSIGNED_SHORT_4_4_4_4:case ux.UNSIGNED_SHORT_5_5_5_1:case ux.UNSIGNED_SHORT_5_6_5:case ux.HALF_FLOAT:return 2;case ux.UNSIGNED_INT:case ux.FLOAT:case ux.UNSIGNED_INT_24_8:return 4}},validate:function(e){return e===ux.UNSIGNED_BYTE||e===ux.UNSIGNED_SHORT||e===ux.UNSIGNED_INT||e===ux.FLOAT||e===ux.HALF_FLOAT||e===ux.UNSIGNED_INT_24_8||e===ux.UNSIGNED_SHORT_4_4_4_4||e===ux.UNSIGNED_SHORT_5_5_5_1||e===ux.UNSIGNED_SHORT_5_6_5}};var hx=Object.freeze(ux);const dx={DEPTH_COMPONENT:Ys.DEPTH_COMPONENT,DEPTH_STENCIL:Ys.DEPTH_STENCIL,ALPHA:Ys.ALPHA,RGB:Ys.RGB,RGBA:Ys.RGBA,LUMINANCE:Ys.LUMINANCE,LUMINANCE_ALPHA:Ys.LUMINANCE_ALPHA,RGB_DXT1:Ys.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:Ys.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:Ys.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:Ys.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:Ys.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:Ys.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:Ys.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:Ys.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:Ys.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:Ys.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:Ys.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:Ys.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:Ys.COMPRESSED_RGBA_BPTC_UNORM,componentsLength:function(e){switch(e){case dx.RGB:return 3;case dx.RGBA:return 4;case dx.LUMINANCE_ALPHA:return 2;case dx.ALPHA:case dx.LUMINANCE:return 1;default:return 1}},validate:function(e){return e===dx.DEPTH_COMPONENT||e===dx.DEPTH_STENCIL||e===dx.ALPHA||e===dx.RGB||e===dx.RGBA||e===dx.LUMINANCE||e===dx.LUMINANCE_ALPHA||e===dx.RGB_DXT1||e===dx.RGBA_DXT1||e===dx.RGBA_DXT3||e===dx.RGBA_DXT5||e===dx.RGB_PVRTC_4BPPV1||e===dx.RGB_PVRTC_2BPPV1||e===dx.RGBA_PVRTC_4BPPV1||e===dx.RGBA_PVRTC_2BPPV1||e===dx.RGBA_ASTC||e===dx.RGB_ETC1||e===dx.RGB8_ETC2||e===dx.RGBA8_ETC2_EAC||e===dx.RGBA_BC7},isColorFormat:function(e){return e===dx.ALPHA||e===dx.RGB||e===dx.RGBA||e===dx.LUMINANCE||e===dx.LUMINANCE_ALPHA},isDepthFormat:function(e){return e===dx.DEPTH_COMPONENT||e===dx.DEPTH_STENCIL},isCompressedFormat:function(e){return e===dx.RGB_DXT1||e===dx.RGBA_DXT1||e===dx.RGBA_DXT3||e===dx.RGBA_DXT5||e===dx.RGB_PVRTC_4BPPV1||e===dx.RGB_PVRTC_2BPPV1||e===dx.RGBA_PVRTC_4BPPV1||e===dx.RGBA_PVRTC_2BPPV1||e===dx.RGBA_ASTC||e===dx.RGB_ETC1||e===dx.RGB8_ETC2||e===dx.RGBA8_ETC2_EAC||e===dx.RGBA_BC7},isDXTFormat:function(e){return e===dx.RGB_DXT1||e===dx.RGBA_DXT1||e===dx.RGBA_DXT3||e===dx.RGBA_DXT5},isPVRTCFormat:function(e){return e===dx.RGB_PVRTC_4BPPV1||e===dx.RGB_PVRTC_2BPPV1||e===dx.RGBA_PVRTC_4BPPV1||e===dx.RGBA_PVRTC_2BPPV1},isASTCFormat:function(e){return e===dx.RGBA_ASTC},isETC1Format:function(e){return e===dx.RGB_ETC1},isETC2Format:function(e){return e===dx.RGB8_ETC2||e===dx.RGBA8_ETC2_EAC},isBC7Format:function(e){return e===dx.RGBA_BC7},compressedTextureSizeInBytes:function(e,t,n){switch(e){case dx.RGB_DXT1:case dx.RGBA_DXT1:case dx.RGB_ETC1:case dx.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*8;case dx.RGBA_DXT3:case dx.RGBA_DXT5:case dx.RGBA_ASTC:case dx.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((n+3)/4)*16;case dx.RGB_PVRTC_4BPPV1:case dx.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case dx.RGB_PVRTC_2BPPV1:case dx.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);case dx.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(n/4)*16;default:return 0}},textureSizeInBytes:function(e,t,n,i){let o=dx.componentsLength(e);return hx.isPacked(t)&&(o=1),o*hx.sizeInBytes(t)*n*i},alignmentInBytes:function(e,t,n){const i=dx.textureSizeInBytes(e,t,n,1)%4;return 0===i?4:2===i?2:1},createTypedArray:function(e,t,n,i){let o;const r=hx.sizeInBytes(t);o=r===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:r===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:r===Float32Array.BYTES_PER_ELEMENT&&t===hx.FLOAT?Float32Array:Uint32Array;const a=dx.componentsLength(e)*n*i;return new o(a)},flipY:function(e,t,n,i,o){if(1===o)return e;const r=dx.createTypedArray(t,n,i,o),a=dx.componentsLength(t),s=i*a;for(let c=0;c<o;++c){const t=c*i*a,n=(o-c-1)*i*a;for(let i=0;i<s;++i)r[n+i]=e[t+i]}return r},toInternalFormat:function(e,t,n){if(!n.webgl2)return e;if(e===dx.DEPTH_STENCIL)return Ys.DEPTH24_STENCIL8;if(e===dx.DEPTH_COMPONENT){if(t===hx.UNSIGNED_SHORT)return Ys.DEPTH_COMPONENT16;if(t===hx.UNSIGNED_INT)return Ys.DEPTH_COMPONENT24}if(t===hx.FLOAT)switch(e){case dx.RGBA:return Ys.RGBA32F;case dx.RGB:return Ys.RGB32F;case dx.RG:return Ys.RG32F;case dx.R:return Ys.R32F}if(t===hx.HALF_FLOAT)switch(e){case dx.RGBA:return Ys.RGBA16F;case dx.RGB:return Ys.RGB16F;case dx.RG:return Ys.RG16F;case dx.R:return Ys.R16F}return e}};var fx=Object.freeze(dx);function px(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.vertexFormat,qu.DEFAULT);this._vertexFormat=t,this._workerName="createPlaneGeometry"}px.packedLength=qu.packedLength,px.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),qu.pack(e._vertexFormat,t,n),t};const mx=new qu,_x={vertexFormat:mx};px.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=qu.unpack(e,t,mx);return Object(r["a"])(n)?(n._vertexFormat=qu.clone(a,n._vertexFormat),n):new px(_x)};const gx=new g(-.5,-.5,0),bx=new g(.5,.5,0);px.createGeometry=function(e){const t=e._vertexFormat,n=new Vu;let i,o;if(t.position){if(o=new Float64Array(12),o[0]=gx.x,o[1]=gx.y,o[2]=0,o[3]=bx.x,o[4]=gx.y,o[5]=0,o[6]=bx.x,o[7]=bx.y,o[8]=0,o[9]=gx.x,o[10]=bx.y,o[11]=0,n.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:o}),t.normal){const e=new Float32Array(12);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,n.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}if(t.st){const e=new Float32Array(8);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,n.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:e})}if(t.tangent){const e=new Float32Array(12);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,n.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}if(t.bitangent){const e=new Float32Array(12);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,n.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}i=new Uint16Array(6),i[0]=0,i[1]=1,i[2]=2,i[3]=0,i[4]=2,i[5]=3}return new Fu({attributes:n,indices:i,primitiveType:Eu.TRIANGLES,boundingSphere:new Tt(g.ZERO,Math.sqrt(2))})};var yx=px;function vx(){this._workerName="createPlaneOutlineGeometry"}vx.packedLength=0,vx.pack=function(e,t){return i["a"].defined("value",e),i["a"].defined("array",t),t},vx.unpack=function(e,t,n){return i["a"].defined("array",e),Object(r["a"])(n)?n:new vx};const Ox=new g(-.5,-.5,0),Ax=new g(.5,.5,0);vx.createGeometry=function(){const e=new Vu,t=new Uint16Array(8),n=new Float64Array(12);return n[0]=Ox.x,n[1]=Ox.y,n[2]=Ox.z,n[3]=Ax.x,n[4]=Ox.y,n[5]=Ox.z,n[6]=Ax.x,n[7]=Ax.y,n[8]=Ox.z,n[9]=Ox.x,n[10]=Ax.y,n[11]=Ox.z,e.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new Fu({attributes:e,indices:t,primitiveType:Eu.LINES,boundingSphere:new Tt(g.ZERO,Math.sqrt(2))})};var wx=vx;const Tx=new I,Cx=new I;function Ex(e,t,n,i){const o=i.cartesianToCartographic(e,Tx),r=o.height,a=i.cartesianToCartographic(t,Cx);a.height=r,i.cartographicToCartesian(a,t);const s=i.cartesianToCartographic(n,Cx);s.height=r-100,i.cartographicToCartesian(s,n)}const xx=new Au,Sx=new g,Ix=new g,Dx=new g,Px=new g,jx=new g,Rx=new g;let Lx=new g,Mx=new g,Nx=new g;const Bx=new Gt,Fx=new Gt,zx=new g,kx=new Kr,Ux=new ce,Vx=new ce;function Hx(e){const t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,a=Object(r["a"])(n.attributes.st)?n.attributes.st.values:void 0;let c=o.length;const l=e.wall,u=e.top||l,h=e.bottom||l;if(t.st||t.normal||t.tangent||t.bitangent||i){const d=e.boundingRectangle,f=e.tangentPlane,p=e.ellipsoid,m=e.stRotation,_=e.perPositionHeight,b=Bx;b.x=d.x,b.y=d.y;const y=t.st?new Float32Array(c/3*2):void 0;let v;t.normal&&(v=_&&u&&!l?n.attributes.normal.values:new Float32Array(c));const O=t.tangent?new Float32Array(c):void 0,A=t.bitangent?new Float32Array(c):void 0,w=i?new Float32Array(c):void 0;let T=0,C=0,E=Ix,x=Dx,S=Px,I=!0,D=Ux,P=Vx;if(0!==m){let e=Kr.fromAxisAngle(f._plane.normal,m,kx);D=ce.fromQuaternion(e,D),e=Kr.fromAxisAngle(f._plane.normal,-m,kx),P=ce.fromQuaternion(e,P)}else D=ce.clone(ce.IDENTITY,D),P=ce.clone(ce.IDENTITY,P);let j=0,R=0;u&&h&&(j=c/2,R=c/3,c/=2);for(let n=0;n<c;n+=3){const m=g.fromArray(o,n,zx);if(t.st&&!Object(r["a"])(a)){let e=ce.multiplyByVector(D,m,Sx);e=p.scaleToGeodeticSurface(e,e);const t=f.projectPointOntoPlane(e,Fx);Gt.subtract(t,b,t);const n=s["a"].clamp(t.x/d.width,0,1),i=s["a"].clamp(t.y/d.height,0,1);h&&(y[T+R]=n,y[T+1+R]=i),u&&(y[T]=n,y[T+1]=i),T+=2}if(t.normal||t.tangent||t.bitangent||i){const r=C+1,a=C+2;if(l){if(n+3<c){const e=g.fromArray(o,n+3,jx);if(I){const t=g.fromArray(o,n+c,Rx);_&&Ex(m,e,t,p),g.subtract(e,m,e),g.subtract(t,m,t),E=g.normalize(g.cross(t,e,E),E),I=!1}g.equalsEpsilon(e,m,s["a"].EPSILON10)&&(I=!0)}(t.tangent||t.bitangent)&&(S=p.geodeticSurfaceNormal(m,S),t.tangent&&(x=g.normalize(g.cross(S,E,x),x)))}else E=p.geodeticSurfaceNormal(m,E),(t.tangent||t.bitangent)&&(_&&(Lx=g.fromArray(v,C,Lx),Mx=g.cross(g.UNIT_Z,Lx,Mx),Mx=g.normalize(ce.multiplyByVector(P,Mx,Mx),Mx),t.bitangent&&(Nx=g.normalize(g.cross(Lx,Mx,Nx),Nx))),x=g.cross(g.UNIT_Z,E,x),x=g.normalize(ce.multiplyByVector(P,x,x),x),t.bitangent&&(S=g.normalize(g.cross(E,x,S),S)));t.normal&&(e.wall?(v[C+j]=E.x,v[r+j]=E.y,v[a+j]=E.z):h&&(v[C+j]=-E.x,v[r+j]=-E.y,v[a+j]=-E.z),(u&&!_||l)&&(v[C]=E.x,v[r]=E.y,v[a]=E.z)),i&&(l&&(E=p.geodeticSurfaceNormal(m,E)),w[C+j]=-E.x,w[r+j]=-E.y,w[a+j]=-E.z),t.tangent&&(e.wall?(O[C+j]=x.x,O[r+j]=x.y,O[a+j]=x.z):h&&(O[C+j]=-x.x,O[r+j]=-x.y,O[a+j]=-x.z),u&&(_?(O[C]=Mx.x,O[r]=Mx.y,O[a]=Mx.z):(O[C]=x.x,O[r]=x.y,O[a]=x.z))),t.bitangent&&(h&&(A[C+j]=S.x,A[r+j]=S.y,A[a+j]=S.z),u&&(_?(A[C]=Nx.x,A[r]=Nx.y,A[a]=Nx.z):(A[C]=S.x,A[r]=S.y,A[a]=S.z))),C+=3}}t.st&&!Object(r["a"])(a)&&(n.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:y})),t.normal&&(n.attributes.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:v})),t.tangent&&(n.attributes.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:O})),t.bitangent&&(n.attributes.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:A})),i&&(n.attributes.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:w}))}if(e.extrude&&Object(r["a"])(e.offsetAttribute)){const t=o.length/3;let i=new Uint8Array(t);if(e.offsetAttribute===Gu.TOP)u&&h||l?i=i.fill(1,0,t/2):u&&(i=i.fill(1));else{const t=e.offsetAttribute===Gu.NONE?0:1;i=i.fill(t)}n.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return n}const Gx=new I,Wx=new I,qx={westOverIDL:0,eastOverIDL:0};let Yx=new Rg;function Xx(e,t,n,i,a){if(a=Object(o["a"])(a,new Fe),!Object(r["a"])(e)||e.length<3)return a.west=0,a.north=0,a.south=0,a.east=0,a;if(n===uu.RHUMB)return Fe.fromCartesianArray(e,t,a);Yx.ellipsoid.equals(t)||(Yx=new Rg(void 0,void 0,t)),a.west=Number.POSITIVE_INFINITY,a.east=Number.NEGATIVE_INFINITY,a.south=Number.POSITIVE_INFINITY,a.north=Number.NEGATIVE_INFINITY,qx.westOverIDL=Number.POSITIVE_INFINITY,qx.eastOverIDL=Number.NEGATIVE_INFINITY;const c=1/s["a"].chordLength(i,t.maximumRadius),l=e.length;let u,h=t.cartesianToCartographic(e[0],Wx),d=Gx;for(let o=1;o<l;o++)u=d,d=h,h=t.cartesianToCartographic(e[o],u),Yx.setEndPoints(d,h),$x(Yx,c,a,qx);return u=d,d=h,h=t.cartesianToCartographic(e[0],u),Yx.setEndPoints(d,h),$x(Yx,c,a,qx),a.east-a.west>qx.eastOverIDL-qx.westOverIDL&&(a.west=qx.westOverIDL,a.east=qx.eastOverIDL,a.east>s["a"].PI&&(a.east=a.east-s["a"].TWO_PI),a.west>s["a"].PI&&(a.west=a.west-s["a"].TWO_PI)),a}const Kx=new I;function $x(e,t,n,i){const o=e.surfaceDistance,r=Math.ceil(o*t),a=r>0?o/(r-1):Number.POSITIVE_INFINITY;let c=0;for(let l=0;l<r;l++){const t=e.interpolateUsingSurfaceDistance(c,Kx);c+=a;const o=t.longitude,r=t.latitude;n.west=Math.min(n.west,o),n.east=Math.max(n.east,o),n.south=Math.min(n.south,r),n.north=Math.max(n.north,r);const l=o>=0?o:o+s["a"].TWO_PI;i.westOverIDL=Math.min(i.westOverIDL,l),i.eastOverIDL=Math.max(i.eastOverIDL,l)}}const Jx=[];function Qx(e,t,n,i,o,a,s,c,l,u){const h={walls:[]};let d;if(s||c){const o=Q_.createGeometryFromPositions(e,t,n,i,a,l,u),f=o.attributes.position.values,p=o.indices;let m,_;if(s&&c){const e=f.concat(f);m=e.length/3,_=ll.createTypedArray(m,2*p.length),_.set(p);const t=p.length,i=m/2;for(d=0;d<t;d+=3){const e=_[d]+i,n=_[d+1]+i,o=_[d+2]+i;_[d+t]=o,_[d+1+t]=n,_[d+2+t]=e}if(o.attributes.position.values=e,a&&l.normal){const t=o.attributes.normal.values;o.attributes.normal.values=new Float32Array(e.length),o.attributes.normal.values.set(t)}if(l.st&&Object(r["a"])(n)){const e=o.attributes.st.values;o.attributes.st.values=new Float32Array(2*m),o.attributes.st.values=e.concat(e)}o.indices=_}else if(c){for(m=f.length/3,_=ll.createTypedArray(m,p.length),d=0;d<p.length;d+=3)_[d]=p[d+2],_[d+1]=p[d+1],_[d+2]=p[d];o.indices=_}h.topAndBottom=new Sd({geometry:o})}let f=o.outerRing,p=Ya.fromPoints(f,e),m=p.projectPointsOntoPlane(f,Jx),_=x_.computeWindingOrder2D(m);_===c_.CLOCKWISE&&(f=f.slice().reverse());let g=Q_.computeWallGeometry(f,n,e,i,a,u);h.walls.push(new Sd({geometry:g}));const b=o.holes;for(d=0;d<b.length;d++){let t=b[d];p=Ya.fromPoints(t,e),m=p.projectPointsOntoPlane(t,Jx),_=x_.computeWindingOrder2D(m),_===c_.COUNTER_CLOCKWISE&&(t=t.slice().reverse()),g=Q_.computeWallGeometry(t,n,e,i,a,u),h.walls.push(new Sd({geometry:g}))}return h}function Zx(e){if(i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.polygonHierarchy",e.polygonHierarchy),Object(r["a"])(e.perPositionHeight)&&e.perPositionHeight&&Object(r["a"])(e.height))throw new a["a"]("Cannot use both options.perPositionHeight and options.height");if(Object(r["a"])(e.arcType)&&e.arcType!==uu.GEODESIC&&e.arcType!==uu.RHUMB)throw new a["a"]("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=Object(o["a"])(e.vertexFormat,qu.DEFAULT),c=Object(o["a"])(e.ellipsoid,k.WGS84),l=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),u=Object(o["a"])(e.stRotation,0),h=e.textureCoordinates,d=Object(o["a"])(e.perPositionHeight,!1),f=d&&Object(r["a"])(e.extrudedHeight);let p=Object(o["a"])(e.height,0),m=Object(o["a"])(e.extrudedHeight,p);if(!f){const e=Math.max(p,m);m=Math.min(p,m),p=e}this._vertexFormat=qu.clone(n),this._ellipsoid=k.clone(c),this._granularity=l,this._stRotation=u,this._height=p,this._extrudedHeight=m,this._closeTop=Object(o["a"])(e.closeTop,!0),this._closeBottom=Object(o["a"])(e.closeBottom,!0),this._polygonHierarchy=t,this._perPositionHeight=d,this._perPositionHeightExtrude=f,this._shadowVolume=Object(o["a"])(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=Object(o["a"])(e.arcType,uu.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=h,this.packedLength=Q_.computeHierarchyPackedLength(t,g)+k.packedLength+qu.packedLength+(h?Q_.computeHierarchyPackedLength(h,Gt):1)+12}Zx.fromPositions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.positions",e.positions);const t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates};return new Zx(t)},Zx.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),n=Q_.packPolygonHierarchy(e._polygonHierarchy,t,n,g),k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=Object(o["a"])(e._offsetAttribute,-1),t[n++]=e._arcType,Object(r["a"])(e._textureCoordinates)?n=Q_.packPolygonHierarchy(e._textureCoordinates,t,n,Gt):t[n++]=-1,t[n++]=e.packedLength,t};const eS=k.clone(k.UNIT_SPHERE),tS=new qu,nS={polygonHierarchy:{}};function iS(e){const t=-e._stRotation;if(0===t)return[0,0,0,1,1,0];const n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return Fu._textureCoordinateRotationPoints(i,t,n,o)}Zx.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=Q_.unpackPolygonHierarchy(e,t,g);t=a.startingIndex,delete a.startingIndex;const s=k.unpack(e,t,eS);t+=k.packedLength;const c=qu.unpack(e,t,tS);t+=qu.packedLength;const l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=1===e[t++],p=1===e[t++],m=1===e[t++],_=1===e[t++],b=1===e[t++],y=e[t++],v=e[t++],O=-1===e[t]?void 0:Q_.unpackPolygonHierarchy(e,t,Gt);Object(r["a"])(O)?(t=O.startingIndex,delete O.startingIndex):t++;const A=e[t++];return Object(r["a"])(n)||(n=new Zx(nS)),n._polygonHierarchy=a,n._ellipsoid=k.clone(s,n._ellipsoid),n._vertexFormat=qu.clone(c,n._vertexFormat),n._height=l,n._extrudedHeight=u,n._granularity=h,n._stRotation=d,n._perPositionHeightExtrude=f,n._perPositionHeight=p,n._closeTop=m,n._closeBottom=_,n._shadowVolume=b,n._offsetAttribute=-1===y?void 0:y,n._arcType=v,n._textureCoordinates=O,n.packedLength=A,n},Zx.computeRectangle=function(e,t){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.polygonHierarchy",e.polygonHierarchy);const n=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),r=Object(o["a"])(e.arcType,uu.GEODESIC);if(r!==uu.GEODESIC&&r!==uu.RHUMB)throw new a["a"]("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const c=e.polygonHierarchy,l=Object(o["a"])(e.ellipsoid,k.WGS84);return Xx(c.positions,l,r,n,t)},Zx.createGeometry=function(e){const t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,a=e._polygonHierarchy,c=e._perPositionHeight,l=e._closeTop,u=e._closeBottom,h=e._arcType,d=e._textureCoordinates,f=Object(r["a"])(d);let p=a.positions;if(p.length<3)return;const m=Ya.fromPoints(p,n),_=Q_.polygonsFromHierarchy(a,f,m.projectPointsOntoPlane.bind(m),!c,n),g=_.hierarchy,b=_.polygons,y=function(e){return e},v=f?Q_.polygonsFromHierarchy(d,!0,y,!1).polygons:void 0;if(0===g.length)return;p=g[0].outerRing;const O=Q_.computeBoundingRectangle(m.plane.normal,m.projectPointOntoPlane.bind(m),p,o,xx),A=[],w=e._height,T=e._extrudedHeight,C=e._perPositionHeightExtrude||!s["a"].equalsEpsilon(w,T,0,s["a"].EPSILON2),E={perPositionHeight:c,vertexFormat:t,geometry:void 0,tangentPlane:m,boundingRectangle:O,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:h};let x;if(C)for(E.extrude=!0,E.top=l,E.bottom=u,E.shadowVolume=e._shadowVolume,E.offsetAttribute=e._offsetAttribute,x=0;x<b.length;x++){const e=Qx(n,b[x],f?v[x]:void 0,i,g[x],c,l,u,t,h);let o;l&&u?(o=e.topAndBottom,E.geometry=Q_.scaleToGeodeticHeightExtruded(o.geometry,w,T,n,c)):l?(o=e.topAndBottom,o.geometry.attributes.position.values=x_.scaleToGeodeticHeight(o.geometry.attributes.position.values,w,n,!c),E.geometry=o.geometry):u&&(o=e.topAndBottom,o.geometry.attributes.position.values=x_.scaleToGeodeticHeight(o.geometry.attributes.position.values,T,n,!0),E.geometry=o.geometry),(l||u)&&(E.wall=!1,o.geometry=Hx(E),A.push(o));const r=e.walls;E.wall=!0;for(let t=0;t<r.length;t++){const e=r[t];E.geometry=Q_.scaleToGeodeticHeightExtruded(e.geometry,w,T,n,c),e.geometry=Hx(E),A.push(e)}}else for(x=0;x<b.length;x++){const o=new Sd({geometry:Q_.createGeometryFromPositions(n,b[x],f?v[x]:void 0,i,c,t,h)});if(o.geometry.attributes.position.values=x_.scaleToGeodeticHeight(o.geometry.attributes.position.values,w,n,!c),E.geometry=o.geometry,o.geometry=Hx(E),Object(r["a"])(e._offsetAttribute)){const t=o.geometry.attributes.position.values.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);o.geometry.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}A.push(o)}const S=mp.combineInstances(A)[0];S.attributes.position.values=new Float64Array(S.attributes.position.values),S.indices=ll.createTypedArray(S.attributes.position.values.length/3,S.indices);const I=S.attributes,D=Tt.fromVertices(I.position.values);return t.position||delete I.position,new Fu({attributes:I,indices:S.indices,primitiveType:S.primitiveType,boundingSphere:D,offsetAttribute:e._offsetAttribute})},Zx.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new Zx({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:a,vertexFormat:qu.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})},Object.defineProperties(Zx.prototype,{rectangle:{get:function(){if(!Object(r["a"])(this._rectangle)){const e=this._polygonHierarchy.positions;this._rectangle=Xx(e,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return Object(r["a"])(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=iS(this)),this._textureCoordinateRotationPoints}}});var oS=Zx;function rS(e,t){this.positions=Object(r["a"])(e)?e:[],this.holes=Object(r["a"])(t)?t:[]}var aS=rS;const sS=[],cS=[];function lS(e,t,n,i,o){const r=Ya.fromPoints(t,e),a=r.projectPointsOntoPlane(t,sS),s=x_.computeWindingOrder2D(a);let c,l;s===c_.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let u=t.length,h=0;if(i)for(c=new Float64Array(2*u*3),l=0;l<u;l++){const e=t[l],n=t[(l+1)%u];c[h++]=e.x,c[h++]=e.y,c[h++]=e.z,c[h++]=n.x,c[h++]=n.y,c[h++]=n.z}else{let i=0;if(o===uu.GEODESIC)for(l=0;l<u;l++)i+=Q_.subdivideLineCount(t[l],t[(l+1)%u],n);else if(o===uu.RHUMB)for(l=0;l<u;l++)i+=Q_.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*i),l=0;l<u;l++){let i;o===uu.GEODESIC?i=Q_.subdivideLine(t[l],t[(l+1)%u],n,cS):o===uu.RHUMB&&(i=Q_.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,cS));const r=i.length;for(let e=0;e<r;++e)c[h++]=i[e]}}u=c.length/3;const d=2*u,f=ll.createTypedArray(u,d);for(h=0,l=0;l<u-1;l++)f[h++]=l,f[h++]=l+1;return f[h++]=u-1,f[h++]=0,new Sd({geometry:new Fu({attributes:new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:c})}),indices:f,primitiveType:Eu.LINES})})}function uS(e,t,n,i,o){const r=Ya.fromPoints(t,e),a=r.projectPointsOntoPlane(t,sS),s=x_.computeWindingOrder2D(a);let c,l;s===c_.CLOCKWISE&&(a.reverse(),t=t.slice().reverse());let u=t.length;const h=new Array(u);let d=0;if(i)for(c=new Float64Array(2*u*3*2),l=0;l<u;++l){h[l]=d/3;const e=t[l],n=t[(l+1)%u];c[d++]=e.x,c[d++]=e.y,c[d++]=e.z,c[d++]=n.x,c[d++]=n.y,c[d++]=n.z}else{let i=0;if(o===uu.GEODESIC)for(l=0;l<u;l++)i+=Q_.subdivideLineCount(t[l],t[(l+1)%u],n);else if(o===uu.RHUMB)for(l=0;l<u;l++)i+=Q_.subdivideRhumbLineCount(e,t[l],t[(l+1)%u],n);for(c=new Float64Array(3*i*2),l=0;l<u;++l){let i;h[l]=d/3,o===uu.GEODESIC?i=Q_.subdivideLine(t[l],t[(l+1)%u],n,cS):o===uu.RHUMB&&(i=Q_.subdivideRhumbLine(e,t[l],t[(l+1)%u],n,cS));const r=i.length;for(let e=0;e<r;++e)c[d++]=i[e]}}u=c.length/6;const f=h.length,p=2*(2*u+f),m=ll.createTypedArray(u+f,p);for(d=0,l=0;l<u;++l)m[d++]=l,m[d++]=(l+1)%u,m[d++]=l+u,m[d++]=(l+1)%u+u;for(l=0;l<f;l++){const e=h[l];m[d++]=e,m[d++]=e+u}return new Sd({geometry:new Fu({attributes:new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:c})}),indices:m,primitiveType:Eu.LINES})})}function hS(e){if(i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.polygonHierarchy",e.polygonHierarchy),e.perPositionHeight&&Object(r["a"])(e.height))throw new a["a"]("Cannot use both options.perPositionHeight and options.height");if(Object(r["a"])(e.arcType)&&e.arcType!==uu.GEODESIC&&e.arcType!==uu.RHUMB)throw new a["a"]("Invalid arcType. Valid options are ArcType.GEODESIC and ArcType.RHUMB.");const t=e.polygonHierarchy,n=Object(o["a"])(e.ellipsoid,k.WGS84),c=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),l=Object(o["a"])(e.perPositionHeight,!1),u=l&&Object(r["a"])(e.extrudedHeight),h=Object(o["a"])(e.arcType,uu.GEODESIC);let d=Object(o["a"])(e.height,0),f=Object(o["a"])(e.extrudedHeight,d);if(!u){const e=Math.max(d,f);f=Math.min(d,f),d=e}this._ellipsoid=k.clone(n),this._granularity=c,this._height=d,this._extrudedHeight=f,this._arcType=h,this._polygonHierarchy=t,this._perPositionHeight=l,this._perPositionHeightExtrude=u,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=Q_.computeHierarchyPackedLength(t,g)+k.packedLength+8}hS.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),n=Q_.packPolygonHierarchy(e._polygonHierarchy,t,n,g),k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=Object(o["a"])(e._offsetAttribute,-1),t[n]=e.packedLength,t};const dS=k.clone(k.UNIT_SPHERE),fS={polygonHierarchy:{}};hS.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=Q_.unpackPolygonHierarchy(e,t,g);t=a.startingIndex,delete a.startingIndex;const s=k.unpack(e,t,dS);t+=k.packedLength;const c=e[t++],l=e[t++],u=e[t++],h=1===e[t++],d=1===e[t++],f=e[t++],p=e[t++],m=e[t];return Object(r["a"])(n)||(n=new hS(fS)),n._polygonHierarchy=a,n._ellipsoid=k.clone(s,n._ellipsoid),n._height=c,n._extrudedHeight=l,n._granularity=u,n._perPositionHeight=d,n._perPositionHeightExtrude=h,n._arcType=f,n._offsetAttribute=-1===p?void 0:p,n.packedLength=m,n},hS.fromPositions=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.positions",e.positions);const t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute};return new hS(t)},hS.createGeometry=function(e){const t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,o=e._perPositionHeight,a=e._arcType,c=Q_.polygonOutlinesFromHierarchy(i,!o,t);if(0===c.length)return;let l;const u=[],h=s["a"].chordLength(n,t.maximumRadius),d=e._height,f=e._extrudedHeight,p=e._perPositionHeightExtrude||!s["a"].equalsEpsilon(d,f,0,s["a"].EPSILON2);let m,_;if(p)for(_=0;_<c.length;_++){if(l=uS(t,c[_],h,o,a),l.geometry=Q_.scaleToGeodeticHeightExtruded(l.geometry,d,f,t,o),Object(r["a"])(e._offsetAttribute)){const t=l.geometry.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===Gu.TOP?n=n.fill(1,0,t/2):(m=e._offsetAttribute===Gu.NONE?0:1,n=n.fill(m)),l.geometry.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}u.push(l)}else for(_=0;_<c.length;_++){if(l=lS(t,c[_],h,o,a),l.geometry.attributes.position.values=x_.scaleToGeodeticHeight(l.geometry.attributes.position.values,d,t,!o),Object(r["a"])(e._offsetAttribute)){const t=l.geometry.attributes.position.values.length;m=e._offsetAttribute===Gu.NONE?0:1;const n=new Uint8Array(t/3).fill(m);l.geometry.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}u.push(l)}const g=mp.combineInstances(u)[0],b=Tt.fromVertices(g.attributes.position.values);return new Fu({attributes:g.attributes,indices:g.indices,primitiveType:g.primitiveType,boundingSphere:b,offsetAttribute:e._offsetAttribute})};var pS=hS;const mS=[];function _S(e,t,n,i,o){const r=mS;let a;r.length=o;const s=n.red,c=n.green,l=n.blue,u=n.alpha,h=i.red,d=i.green,f=i.blue,p=i.alpha;if(Dm.equals(n,i)){for(a=0;a<o;a++)r[a]=Dm.clone(n);return r}const m=(h-s)/o,_=(d-c)/o,g=(f-l)/o,b=(p-u)/o;for(a=0;a<o;a++)r[a]=new Dm(s+a*m,c+a*_,l+a*g,u+a*b);return r}function gS(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.colors,i=Object(o["a"])(e.width,1),c=Object(o["a"])(e.colorsPerVertex,!1);if(!Object(r["a"])(t)||t.length<2)throw new a["a"]("At least two positions are required.");if("number"!==typeof i)throw new a["a"]("width must be a number");if(Object(r["a"])(n)&&(c&&n.length<t.length||!c&&n.length<t.length-1))throw new a["a"]("colors has an invalid length.");this._positions=t,this._colors=n,this._width=i,this._colorsPerVertex=c,this._vertexFormat=qu.clone(Object(o["a"])(e.vertexFormat,qu.DEFAULT)),this._arcType=Object(o["a"])(e.arcType,uu.GEODESIC),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._workerName="createPolylineGeometry";let l=1+t.length*g.packedLength;l+=Object(r["a"])(n)?1+n.length*Dm.packedLength:1,this.packedLength=l+k.packedLength+qu.packedLength+4}gS.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._colors;for(c=Object(r["a"])(l)?l.length:0,t[n++]=c,i=0;i<c;++i,n+=Dm.packedLength)Dm.pack(l[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._width,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t};const bS=k.clone(k.UNIT_SPHERE),yS=new qu,vS={positions:void 0,colors:void 0,ellipsoid:bS,vertexFormat:yS,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};gS.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);s=e[t++];const l=s>0?new Array(s):void 0;for(i=0;i<s;++i,t+=Dm.packedLength)l[i]=Dm.unpack(e,t);const u=k.unpack(e,t,bS);t+=k.packedLength;const h=qu.unpack(e,t,yS);t+=qu.packedLength;const d=e[t++],f=1===e[t++],p=e[t++],m=e[t];return Object(r["a"])(n)?(n._positions=c,n._colors=l,n._ellipsoid=k.clone(u,n._ellipsoid),n._vertexFormat=qu.clone(h,n._vertexFormat),n._width=d,n._colorsPerVertex=f,n._arcType=p,n._granularity=m,n):(vS.positions=c,vS.colors=l,vS.width=d,vS.colorsPerVertex=f,vS.arcType=p,vS.granularity=m,new gS(vS))};const OS=new g,AS=new g,wS=new g,TS=new g;gS.createGeometry=function(e){const t=e._width,n=e._vertexFormat;let i=e._colors;const o=e._colorsPerVertex,a=e._arcType,c=e._granularity,l=e._ellipsoid;let u,h,d;const f=[];let p=zm(e._positions,g.equalsEpsilon,!1,f);if(Object(r["a"])(i)&&f.length>0){let e=0,t=f[0];i=i.filter((function(n,i){let r=!1;return r=o?i===t||0===i&&1===t:i+1===t,!r||(e++,t=f[e],!1)}))}let m=p.length;if(m<2||t<=0)return;if(a===uu.GEODESIC||a===uu.RHUMB){let e,t;a===uu.GEODESIC?(e=s["a"].chordLength(c,l.maximumRadius),t=ib.numberOfPoints):(e=c,t=ib.numberOfPointsRhumbLine);const n=ib.extractHeights(p,l);if(Object(r["a"])(i)){let n=1;for(u=0;u<m-1;++u)n+=t(p[u],p[u+1],e);const r=new Array(n);let a=0;for(u=0;u<m-1;++u){const s=p[u],c=p[u+1],l=i[u],d=t(s,c,e);if(o&&u<n){const e=i[u+1],t=_S(s,c,l,e,d),n=t.length;for(h=0;h<n;++h)r[a++]=t[h]}else for(h=0;h<d;++h)r[a++]=Dm.clone(l)}r[a]=Dm.clone(i[i.length-1]),i=r,mS.length=0}p=a===uu.GEODESIC?ib.generateCartesianArc({positions:p,minDistance:e,ellipsoid:l,height:n}):ib.generateCartesianRhumbArc({positions:p,granularity:e,ellipsoid:l,height:n})}m=p.length;const _=4*m-4,b=new Float64Array(3*_),y=new Float64Array(3*_),v=new Float64Array(3*_),O=new Float32Array(2*_),A=n.st?new Float32Array(2*_):void 0,w=Object(r["a"])(i)?new Uint8Array(4*_):void 0;let T,C=0,E=0,x=0,S=0;for(h=0;h<m;++h){let e,a;0===h?(T=OS,g.subtract(p[0],p[1],T),g.add(p[0],T,T)):T=p[h-1],g.clone(T,wS),g.clone(p[h],AS),h===m-1?(T=OS,g.subtract(p[m-1],p[m-2],T),g.add(p[m-1],T,T)):T=p[h+1],g.clone(T,TS),Object(r["a"])(w)&&(e=0===h||o?i[h]:i[h-1],h!==m-1&&(a=i[h]));const s=0===h?2:0,c=h===m-1?2:4;for(d=s;d<c;++d){g.pack(AS,b,C),g.pack(wS,y,C),g.pack(TS,v,C),C+=3;const i=d-2<0?-1:1;if(O[E++]=d%2*2-1,O[E++]=i*t,n.st&&(A[x++]=h/(m-1),A[x++]=Math.max(O[E-2],0)),Object(r["a"])(w)){const t=d<2?e:a;w[S++]=Dm.floatToByte(t.red),w[S++]=Dm.floatToByte(t.green),w[S++]=Dm.floatToByte(t.blue),w[S++]=Dm.floatToByte(t.alpha)}}}const I=new Vu;I.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:b}),I.prevPosition=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:y}),I.nextPosition=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:v}),I.expandAndWidth=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:O}),n.st&&(I.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:A})),Object(r["a"])(w)&&(I.color=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:4,values:w,normalize:!0}));const D=ll.createTypedArray(_,6*m-6);let P=0,j=0;const R=m-1;for(h=0;h<R;++h)D[j++]=P,D[j++]=P+2,D[j++]=P+1,D[j++]=P+1,D[j++]=P+2,D[j++]=P+3,P+=4;return new Fu({attributes:I,indices:D,primitiveType:Eu.TRIANGLES,boundingSphere:Tt.fromPoints(p),geometryType:Tu.POLYLINES})};var CS=gS;function ES(e,t,n,i){const o=new Vu;i.position&&(o.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:e}));const r=t.length,a=e.length/3,s=(a-2*r)/(2*r),c=x_.triangulate(t),l=(s-1)*r*6+2*c.length,u=ll.createTypedArray(a,l);let h,d,f,p,m,_;const g=2*r;let b=0;for(h=0;h<s-1;h++){for(d=0;d<r-1;d++)f=2*d+h*r*2,_=f+g,p=f+1,m=p+g,u[b++]=p,u[b++]=f,u[b++]=m,u[b++]=m,u[b++]=f,u[b++]=_;f=2*r-2+h*r*2,p=f+1,m=p+g,_=f+g,u[b++]=p,u[b++]=f,u[b++]=m,u[b++]=m,u[b++]=f,u[b++]=_}if(i.st||i.tangent||i.bitangent){const e=new Float32Array(2*a),i=1/(s-1),c=1/n.height,l=n.height/2;let u,f,p=0;for(h=0;h<s;h++){for(u=h*i,f=c*(t[0].y+l),e[p++]=u,e[p++]=f,d=1;d<r;d++)f=c*(t[d].y+l),e[p++]=u,e[p++]=f,e[p++]=u,e[p++]=f;f=c*(t[0].y+l),e[p++]=u,e[p++]=f}for(d=0;d<r;d++)u=0,f=c*(t[d].y+l),e[p++]=u,e[p++]=f;for(d=0;d<r;d++)u=(s-1)*i,f=c*(t[d].y+l),e[p++]=u,e[p++]=f;o.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:new Float32Array(e)})}const y=a-2*r;for(h=0;h<c.length;h+=3){const e=c[h]+y,t=c[h+1]+y,n=c[h+2]+y;u[b++]=e,u[b++]=t,u[b++]=n,u[b++]=n+r,u[b++]=t+r,u[b++]=e+r}let v=new Fu({attributes:o,indices:u,boundingSphere:Tt.fromVertices(e),primitiveType:Eu.TRIANGLES});if(i.normal&&(v=mp.computeNormal(v)),i.tangent||i.bitangent){try{v=mp.computeTangentAndBitangent(v)}catch(O){ab("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(v.attributes.tangent=void 0),i.bitangent||(v.attributes.bitangent=void 0),i.st||(v.attributes.st=void 0)}return v}function xS(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.polylinePositions,n=e.shapePositions;if(!Object(r["a"])(t))throw new a["a"]("options.polylinePositions is required.");if(!Object(r["a"])(n))throw new a["a"]("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._cornerType=Object(o["a"])(e.cornerType,Tg.ROUNDED),this._vertexFormat=qu.clone(Object(o["a"])(e.vertexFormat,qu.DEFAULT)),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";let i=1+t.length*g.packedLength;i+=1+n.length*Gt.packedLength,this.packedLength=i+k.packedLength+qu.packedLength+2}xS.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._shape;for(c=l.length,t[n++]=c,i=0;i<c;++i,n+=Gt.packedLength)Gt.pack(l[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const SS=k.clone(k.UNIT_SPHERE),IS=new qu,DS={polylinePositions:void 0,shapePositions:void 0,ellipsoid:SS,vertexFormat:IS,cornerType:void 0,granularity:void 0};xS.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);s=e[t++];const l=new Array(s);for(i=0;i<s;++i,t+=Gt.packedLength)l[i]=Gt.unpack(e,t);const u=k.unpack(e,t,SS);t+=k.packedLength;const h=qu.unpack(e,t,IS);t+=qu.packedLength;const d=e[t++],f=e[t];return Object(r["a"])(n)?(n._positions=c,n._shape=l,n._ellipsoid=k.clone(u,n._ellipsoid),n._vertexFormat=qu.clone(h,n._vertexFormat),n._cornerType=d,n._granularity=f,n):(DS.polylinePositions=c,DS.shapePositions=l,DS.cornerType=d,DS.granularity=f,new xS(DS))};const PS=new Au;xS.createGeometry=function(e){const t=e._positions,n=zm(t,g.equalsEpsilon);let i=e._shape;if(i=Wb.removeDuplicatesFromShape(i),n.length<2||i.length<3)return;x_.computeWindingOrder2D(i)===c_.CLOCKWISE&&i.reverse();const o=Au.fromPoints(i,PS),r=Wb.computePositions(n,i,o,e,!0);return ES(r,i,o,e._vertexFormat)};var jS=xS;function RS(e,t){const n=new Vu;n.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:e});const i=t.length,o=n.position.values.length/3,r=e.length/3,a=r/i,s=ll.createTypedArray(o,2*i*(a+1));let c,l,u=0;c=0;let h=c*i;for(l=0;l<i-1;l++)s[u++]=l+h,s[u++]=l+h+1;for(s[u++]=i-1+h,s[u++]=h,c=a-1,h=c*i,l=0;l<i-1;l++)s[u++]=l+h,s[u++]=l+h+1;for(s[u++]=i-1+h,s[u++]=h,c=0;c<a-1;c++){const e=i*c,t=e+i;for(l=0;l<i;l++)s[u++]=l+e,s[u++]=l+t}const d=new Fu({attributes:n,indices:ll.createTypedArray(o,s),boundingSphere:Tt.fromVertices(e),primitiveType:Eu.LINES});return d}function LS(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.polylinePositions,n=e.shapePositions;if(!Object(r["a"])(t))throw new a["a"]("options.polylinePositions is required.");if(!Object(r["a"])(n))throw new a["a"]("options.shapePositions is required.");this._positions=t,this._shape=n,this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._cornerType=Object(o["a"])(e.cornerType,Tg.ROUNDED),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";let i=1+t.length*g.packedLength;i+=1+n.length*Gt.packedLength,this.packedLength=i+k.packedLength+2}LS.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._shape;for(c=l.length,t[n++]=c,i=0;i<c;++i,n+=Gt.packedLength)Gt.pack(l[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};const MS=k.clone(k.UNIT_SPHERE),NS={polylinePositions:void 0,shapePositions:void 0,ellipsoid:MS,height:void 0,cornerType:void 0,granularity:void 0};LS.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);s=e[t++];const l=new Array(s);for(i=0;i<s;++i,t+=Gt.packedLength)l[i]=Gt.unpack(e,t);const u=k.unpack(e,t,MS);t+=k.packedLength;const h=e[t++],d=e[t];return Object(r["a"])(n)?(n._positions=c,n._shape=l,n._ellipsoid=k.clone(u,n._ellipsoid),n._cornerType=h,n._granularity=d,n):(NS.polylinePositions=c,NS.shapePositions=l,NS.cornerType=h,NS.granularity=d,new LS(NS))};const BS=new Au;LS.createGeometry=function(e){const t=e._positions,n=zm(t,g.equalsEpsilon);let i=e._shape;if(i=Wb.removeDuplicatesFromShape(i),n.length<2||i.length<3)return;x_.computeWindingOrder2D(i)===c_.CLOCKWISE&&i.reverse();const o=Au.fromPoints(i,BS),r=Wb.computePositions(n,i,o,e,!1);return RS(r,i)};var FS=LS;function zS(){a["a"].throwInstantiationError()}zS.prototype.getURL=a["a"].throwInstantiationError;var kS=zS;function US(e){const t=e.points,n=e.times;return function(i,o){Object(r["a"])(o)||(o=new Kr);const a=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),s=(i-n[a])/(n[a+1]-n[a]),c=t[a],l=t[a+1];return Kr.fastSlerp(c,l,s,o)}}function VS(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.points,n=e.times;if(!Object(r["a"])(t)||!Object(r["a"])(n))throw new a["a"]("points and times are required.");if(t.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a["a"]("times.length must be equal to points.length.");this._times=n,this._points=t,this._evaluateFunction=US(this),this._lastTimeIndex=0}Object.defineProperties(VS.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),VS.prototype.findTimeInterval=uh.prototype.findTimeInterval,VS.prototype.wrapTime=uh.prototype.wrapTime,VS.prototype.clampTime=uh.prototype.clampTime,VS.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};var HS=VS,GS=n("25a5"),WS=n.n(GS);function qS(){this._tree=new WS.a}function YS(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}function XS(e,t){return e.id===t.id}YS.fromRectangleAndId=function(e,t,n){return n.minX=t.west,n.minY=t.south,n.maxX=t.east,n.maxY=t.north,n.id=e,n},qS.prototype.insert=function(e,t){i["a"].typeOf.string("id",e),i["a"].typeOf.object("rectangle",t);const n=YS.fromRectangleAndId(e,t,new YS);this._tree.insert(n)};const KS=new YS;qS.prototype.remove=function(e,t){i["a"].typeOf.string("id",e),i["a"].typeOf.object("rectangle",t);const n=YS.fromRectangleAndId(e,t,KS);this._tree.remove(n,XS)};const $S=new YS;qS.prototype.collides=function(e){i["a"].typeOf.object("rectangle",e);const t=YS.fromRectangleAndId("",e,$S);return this._tree.collides(t)};var JS=qS;const QS=Math.cos,ZS=Math.sin,eI=Math.sqrt,tI={computePosition:function(e,t,n,i,o,a,s){const c=t.radiiSquared,l=e.nwCorner,u=e.boundingRectangle;let h=l.latitude-e.granYCos*i+o*e.granXSin;const d=QS(h),f=ZS(h),p=c.z*f;let m=l.longitude+i*e.granYSin+o*e.granXCos;const _=d*QS(m),g=d*ZS(m),b=c.x*_,y=c.y*g,v=eI(b*_+y*g+p*f);if(a.x=b/v,a.y=y/v,a.z=p/v,n){const t=e.stNwCorner;Object(r["a"])(t)?(h=t.latitude-e.stGranYCos*i+o*e.stGranXSin,m=t.longitude+i*e.stGranYSin+o*e.stGranXCos,s.x=(m-e.stWest)*e.lonScalar,s.y=(h-e.stSouth)*e.latScalar):(s.x=(m-u.west)*e.lonScalar,s.y=(h-u.south)*e.latScalar)}}},nI=new ic;let iI=new g;const oI=new I;let rI=new g;const aI=new V;function sI(e,t,n,i,o,r,a){const s=Math.cos(t),c=i*s,l=n*s,u=Math.sin(t),h=i*u,d=n*u;iI=aI.project(e,iI),iI=g.subtract(iI,rI,iI);const f=ic.fromRotation(t,nI);iI=ic.multiplyByVector(f,iI,iI),iI=g.add(iI,rI,iI),e=aI.unproject(iI,e),r-=1,a-=1;const p=e.latitude,m=p+r*d,_=p-c*a,b=p-c*a+r*d,y=Math.max(p,m,_,b),v=Math.min(p,m,_,b),O=e.longitude,A=O+r*l,w=O+a*h,T=O+a*h+r*l,C=Math.max(O,A,w,T),E=Math.min(O,A,w,T);return{north:y,south:v,east:C,west:E,granYCos:c,granYSin:h,granXCos:l,granXSin:d,nwCorner:e}}tI.computeOptions=function(e,t,n,i,o,r,c){let l,u=e.east,h=e.west,d=e.north,f=e.south,p=!1,m=!1;d===s["a"].PI_OVER_TWO&&(p=!0),f===-s["a"].PI_OVER_TWO&&(m=!0);const _=d-f;l=h>u?s["a"].TWO_PI-h+u:u-h;const g=Math.ceil(l/t)+1,b=Math.ceil(_/t)+1,y=l/(g-1),v=_/(b-1),O=Fe.northwest(e,r),A=Fe.center(e,oI);0===n&&0===i||(A.longitude<O.longitude&&(A.longitude+=s["a"].TWO_PI),rI=aI.project(A,rI));const w=v,T=y,C=0,E=0,x=Fe.clone(e,o),S={granYCos:w,granYSin:C,granXCos:T,granXSin:E,nwCorner:O,boundingRectangle:x,width:g,height:b,northCap:p,southCap:m};if(0!==n){const e=sI(O,n,y,v,A,g,b);if(d=e.north,f=e.south,u=e.east,h=e.west,d<-s["a"].PI_OVER_TWO||d>s["a"].PI_OVER_TWO||f<-s["a"].PI_OVER_TWO||f>s["a"].PI_OVER_TWO)throw new a["a"]("Rotated rectangle is invalid.  It crosses over either the north or south pole.");S.granYCos=e.granYCos,S.granYSin=e.granYSin,S.granXCos=e.granXCos,S.granXSin=e.granXSin,x.north=d,x.south=f,x.east=u,x.west=h}if(0!==i){n-=i;const e=Fe.northwest(x,c),t=sI(e,n,y,v,A,g,b);S.stGranYCos=t.granYCos,S.stGranXCos=t.granXCos,S.stGranYSin=t.granYSin,S.stGranXSin=t.granXSin,S.stNwCorner=e,S.stWest=t.west,S.stSouth=t.south}return S};var cI=tI;const lI=new g,uI=new g,hI=new g,dI=new g,fI=new Fe,pI=new Gt,mI=new Tt,_I=new Tt;function gI(e,t){const n=new Fu({attributes:new Vu,primitiveType:Eu.TRIANGLES});return n.attributes.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:t.positions}),e.normal&&(n.attributes.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:t.normals})),e.tangent&&(n.attributes.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:t.tangents})),e.bitangent&&(n.attributes.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:t.bitangents})),n}function bI(e,t,n,i){const o=e.length,r=t.normal?new Float32Array(o):void 0,a=t.tangent?new Float32Array(o):void 0,s=t.bitangent?new Float32Array(o):void 0;let c=0;const l=dI,u=hI;let h=uI;if(t.normal||t.tangent||t.bitangent)for(let d=0;d<o;d+=3){const o=g.fromArray(e,d,lI),f=c+1,p=c+2;h=n.geodeticSurfaceNormal(o,h),(t.tangent||t.bitangent)&&(g.cross(g.UNIT_Z,h,u),ce.multiplyByVector(i,u,u),g.normalize(u,u),t.bitangent&&g.normalize(g.cross(h,u,l),l)),t.normal&&(r[c]=h.x,r[f]=h.y,r[p]=h.z),t.tangent&&(a[c]=u.x,a[f]=u.y,a[p]=u.z),t.bitangent&&(s[c]=l.x,s[f]=l.y,s[p]=l.z),c+=3}return gI(t,{positions:e,normals:r,tangents:a,bitangents:s})}const yI=new g,vI=new g;function OI(e,t,n){const i=e.length,o=t.normal?new Float32Array(i):void 0,r=t.tangent?new Float32Array(i):void 0,a=t.bitangent?new Float32Array(i):void 0;let c=0,l=0,u=0,h=!0,d=dI,f=hI,p=uI;if(t.normal||t.tangent||t.bitangent)for(let m=0;m<i;m+=6){const _=g.fromArray(e,m,lI),b=g.fromArray(e,(m+6)%i,yI);if(h){const t=g.fromArray(e,(m+3)%i,vI);g.subtract(b,_,b),g.subtract(t,_,t),p=g.normalize(g.cross(t,b,p),p),h=!1}g.equalsEpsilon(b,_,s["a"].EPSILON10)&&(h=!0),(t.tangent||t.bitangent)&&(d=n.geodeticSurfaceNormal(_,d),t.tangent&&(f=g.normalize(g.cross(d,p,f),f))),t.normal&&(o[c++]=p.x,o[c++]=p.y,o[c++]=p.z,o[c++]=p.x,o[c++]=p.y,o[c++]=p.z),t.tangent&&(r[l++]=f.x,r[l++]=f.y,r[l++]=f.z,r[l++]=f.x,r[l++]=f.y,r[l++]=f.z),t.bitangent&&(a[u++]=d.x,a[u++]=d.y,a[u++]=d.z,a[u++]=d.x,a[u++]=d.y,a[u++]=d.z)}return gI(t,{positions:e,normals:o,tangents:r,bitangents:a})}function AI(e,t){const n=e._vertexFormat,i=e._ellipsoid,o=t.height,r=t.width,a=t.northCap,s=t.southCap;let c=0,l=o,u=o,h=0;a&&(c=1,u-=1,h+=1),s&&(l-=1,u-=1,h+=1),h+=r*u;const d=n.position?new Float64Array(3*h):void 0,f=n.st?new Float32Array(2*h):void 0;let p=0,m=0;const _=lI,g=pI;let b=Number.MAX_VALUE,y=Number.MAX_VALUE,v=-Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let S=c;S<l;++S)for(let e=0;e<r;++e)cI.computePosition(t,i,n.st,S,e,_,g),d[p++]=_.x,d[p++]=_.y,d[p++]=_.z,n.st&&(f[m++]=g.x,f[m++]=g.y,b=Math.min(b,g.x),y=Math.min(y,g.y),v=Math.max(v,g.x),O=Math.max(O,g.y));if(a&&(cI.computePosition(t,i,n.st,0,0,_,g),d[p++]=_.x,d[p++]=_.y,d[p++]=_.z,n.st&&(f[m++]=g.x,f[m++]=g.y,b=g.x,y=g.y,v=g.x,O=g.y)),s&&(cI.computePosition(t,i,n.st,o-1,0,_,g),d[p++]=_.x,d[p++]=_.y,d[p]=_.z,n.st&&(f[m++]=g.x,f[m]=g.y,b=Math.min(b,g.x),y=Math.min(y,g.y),v=Math.max(v,g.x),O=Math.max(O,g.y))),n.st&&(b<0||y<0||v>1||O>1))for(let S=0;S<f.length;S+=2)f[S]=(f[S]-b)/(v-b),f[S+1]=(f[S+1]-y)/(O-y);const A=bI(d,n,i,t.tangentRotationMatrix);let w=6*(r-1)*(u-1);a&&(w+=3*(r-1)),s&&(w+=3*(r-1));const T=ll.createTypedArray(h,w);let C,E=0,x=0;for(C=0;C<u-1;++C){for(let e=0;e<r-1;++e){const e=E,t=e+r,n=t+1,i=e+1;T[x++]=e,T[x++]=t,T[x++]=i,T[x++]=i,T[x++]=t,T[x++]=n,++E}++E}if(a||s){let e=h-1;const t=h-1;let n,i;if(a&&s&&(e=h-2),E=0,a)for(C=0;C<r-1;C++)n=E,i=n+1,T[x++]=e,T[x++]=n,T[x++]=i,++E;if(s)for(E=(u-1)*r,C=0;C<r-1;C++)n=E,i=n+1,T[x++]=n,T[x++]=t,T[x++]=i,++E}return A.indices=T,n.st&&(A.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:f})),A}function wI(e,t,n,i,o){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n+2],e[t++]=o[n],e[t++]=o[n+1],e[t]=o[n+2],e}function TI(e,t,n,i){return e[t++]=i[n],e[t++]=i[n+1],e[t++]=i[n],e[t]=i[n+1],e}const CI=new qu;function EI(e,t){const n=e._shadowVolume,i=e._offsetAttribute,o=e._vertexFormat,a=e._extrudedHeight,c=e._surfaceHeight,l=e._ellipsoid,u=t.height,h=t.width;let d;if(n){const t=qu.clone(o,CI);t.normal=!0,e._vertexFormat=t}const f=AI(e,t);n&&(e._vertexFormat=o);let p=x_.scaleToGeodeticHeight(f.attributes.position.values,c,l,!1);p=new Float64Array(p);let m=p.length;const _=2*m,b=new Float64Array(_);b.set(p);const y=x_.scaleToGeodeticHeight(f.attributes.position.values,a,l);b.set(y,m),f.attributes.position.values=b;const v=o.normal?new Float32Array(_):void 0,O=o.tangent?new Float32Array(_):void 0,A=o.bitangent?new Float32Array(_):void 0,w=o.st?new Float32Array(_/3*2):void 0;let T,C,E;if(o.normal){for(C=f.attributes.normal.values,v.set(C),d=0;d<m;d++)C[d]=-C[d];v.set(C,m),f.attributes.normal.values=v}if(n){C=f.attributes.normal.values,o.normal||(f.attributes.normal=void 0);const e=new Float32Array(_);for(d=0;d<m;d++)C[d]=-C[d];e.set(C,m),f.attributes.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:e})}const x=Object(r["a"])(i);if(x){const e=m/3*2;let t=new Uint8Array(e);i===Gu.TOP?t=t.fill(1,0,e/2):(E=i===Gu.NONE?0:1,t=t.fill(E)),f.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:t})}if(o.tangent){const e=f.attributes.tangent.values;for(O.set(e),d=0;d<m;d++)e[d]=-e[d];O.set(e,m),f.attributes.tangent.values=O}if(o.bitangent){const e=f.attributes.bitangent.values;A.set(e),A.set(e,m),f.attributes.bitangent.values=A}o.st&&(T=f.attributes.st.values,w.set(T),w.set(T,m/3*2),f.attributes.st.values=w);const S=f.indices,I=S.length,D=m/3,P=ll.createTypedArray(_/3,2*I);for(P.set(S),d=0;d<I;d+=3)P[d+I]=S[d+2]+D,P[d+1+I]=S[d+1]+D,P[d+2+I]=S[d]+D;f.indices=P;const j=t.northCap,R=t.southCap;let L=u,M=2,N=0,B=4,F=4;j&&(M-=1,L-=1,N+=1,B-=2,F-=1),R&&(M-=1,L-=1,N+=1,B-=2,F-=1),N+=M*h+2*L-B;const z=2*(N+F);let k=new Float64Array(3*z);const U=n?new Float32Array(3*z):void 0;let V=x?new Uint8Array(z):void 0,H=o.st?new Float32Array(2*z):void 0;const G=i===Gu.TOP;x&&!G&&(E=i===Gu.ALL?1:0,V=V.fill(E));let W=0,q=0,Y=0,X=0;const K=h*L;let $;for(d=0;d<K;d+=h)$=3*d,k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*d,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1);if(R){const e=j?K+1:K;for($=3*e,d=0;d<2;d++)k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*e,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1)}else for(d=K-h;d<K;d++)$=3*d,k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*d,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1);for(d=K-1;d>0;d-=h)$=3*d,k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*d,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1);if(j){const e=K;for($=3*e,d=0;d<2;d++)k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*e,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1)}else for(d=h-1;d>=0;d--)$=3*d,k=wI(k,W,$,p,y),W+=6,o.st&&(H=TI(H,q,2*d,T),q+=4),n&&(Y+=3,U[Y++]=C[$],U[Y++]=C[$+1],U[Y++]=C[$+2]),G&&(V[X++]=1,X+=1);let J=OI(k,o,l);o.st&&(J.attributes.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:H})),n&&(J.attributes.extrudeDirection=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:U})),x&&(J.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:V}));const Q=ll.createTypedArray(z,6*N);let Z,ee,te,ne;m=k.length/3;let ie=0;for(d=0;d<m-1;d+=2){Z=d,ne=(Z+2)%m;const e=g.fromArray(k,3*Z,yI),t=g.fromArray(k,3*ne,vI);g.equalsEpsilon(e,t,s["a"].EPSILON10)||(ee=(Z+1)%m,te=(ee+2)%m,Q[ie++]=Z,Q[ie++]=ee,Q[ie++]=ne,Q[ie++]=ne,Q[ie++]=ee,Q[ie++]=te)}return J.indices=Q,J=mp.combineInstances([new Sd({geometry:f}),new Sd({geometry:J})]),J[0]}const xI=[new g,new g,new g,new g],SI=new I,II=new I;function DI(e,t,n,i,o){if(0===n)return Fe.clone(e,o);const r=cI.computeOptions(e,t,n,0,fI,SI),a=r.height,s=r.width,c=xI;return cI.computePosition(r,i,!1,0,0,c[0]),cI.computePosition(r,i,!1,0,s-1,c[1]),cI.computePosition(r,i,!1,a-1,0,c[2]),cI.computePosition(r,i,!1,a-1,s-1,c[3]),Fe.fromCartesianArray(c,i,o)}function PI(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.rectangle;if(i["a"].typeOf.object("rectangle",t),Fe.validate(t),t.north<t.south)throw new a["a"]("options.rectangle.north must be greater than or equal to options.rectangle.south");const n=Object(o["a"])(e.height,0),r=Object(o["a"])(e.extrudedHeight,n);this._rectangle=Fe.clone(t),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._ellipsoid=k.clone(Object(o["a"])(e.ellipsoid,k.WGS84)),this._surfaceHeight=Math.max(n,r),this._rotation=Object(o["a"])(e.rotation,0),this._stRotation=Object(o["a"])(e.stRotation,0),this._vertexFormat=qu.clone(Object(o["a"])(e.vertexFormat,qu.DEFAULT)),this._extrudedHeight=Math.min(n,r),this._shadowVolume=Object(o["a"])(e.shadowVolume,!1),this._workerName="createRectangleGeometry",this._offsetAttribute=e.offsetAttribute,this._rotatedRectangle=void 0,this._textureCoordinateRotationPoints=void 0}PI.packedLength=Fe.packedLength+k.packedLength+qu.packedLength+7,PI.pack=function(e,t,n){return i["a"].typeOf.object("value",e),i["a"].defined("array",t),n=Object(o["a"])(n,0),Fe.pack(e._rectangle,t,n),n+=Fe.packedLength,k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const jI=new Fe,RI=k.clone(k.UNIT_SPHERE),LI={rectangle:jI,ellipsoid:RI,vertexFormat:CI,granularity:void 0,height:void 0,rotation:void 0,stRotation:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};PI.unpack=function(e,t,n){i["a"].defined("array",e),t=Object(o["a"])(t,0);const a=Fe.unpack(e,t,jI);t+=Fe.packedLength;const s=k.unpack(e,t,RI);t+=k.packedLength;const c=qu.unpack(e,t,CI);t+=qu.packedLength;const l=e[t++],u=e[t++],h=e[t++],d=e[t++],f=e[t++],p=1===e[t++],m=e[t];return Object(r["a"])(n)?(n._rectangle=Fe.clone(a,n._rectangle),n._ellipsoid=k.clone(s,n._ellipsoid),n._vertexFormat=qu.clone(c,n._vertexFormat),n._granularity=l,n._surfaceHeight=u,n._rotation=h,n._stRotation=d,n._extrudedHeight=f,n._shadowVolume=p,n._offsetAttribute=-1===m?void 0:m,n):(LI.granularity=l,LI.height=u,LI.rotation=h,LI.stRotation=d,LI.extrudedHeight=f,LI.shadowVolume=p,LI.offsetAttribute=-1===m?void 0:m,new PI(LI))},PI.computeRectangle=function(e,t){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const n=e.rectangle;if(i["a"].typeOf.object("rectangle",n),Fe.validate(n),n.north<n.south)throw new a["a"]("options.rectangle.north must be greater than or equal to options.rectangle.south");const r=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),c=Object(o["a"])(e.ellipsoid,k.WGS84),l=Object(o["a"])(e.rotation,0);return DI(n,r,l,c,t)};const MI=new ce,NI=new Kr,BI=new I;PI.createGeometry=function(e){if(s["a"].equalsEpsilon(e._rectangle.north,e._rectangle.south,s["a"].EPSILON10)||s["a"].equalsEpsilon(e._rectangle.east,e._rectangle.west,s["a"].EPSILON10))return;let t=e._rectangle;const n=e._ellipsoid,i=e._rotation,o=e._stRotation,a=e._vertexFormat,c=cI.computeOptions(t,e._granularity,i,o,fI,SI,II),l=MI;if(0!==o||0!==i){const e=Fe.center(t,BI),i=n.geodeticSurfaceNormalCartographic(e,yI);Kr.fromAxisAngle(i,-o,NI),ce.fromQuaternion(NI,l)}else ce.clone(ce.IDENTITY,l);const u=e._surfaceHeight,h=e._extrudedHeight,d=!s["a"].equalsEpsilon(u,h,0,s["a"].EPSILON2);let f,p;if(c.lonScalar=1/e._rectangle.width,c.latScalar=1/e._rectangle.height,c.tangentRotationMatrix=l,t=e._rectangle,d){f=EI(e,c);const i=Tt.fromRectangle3D(t,n,u,_I),o=Tt.fromRectangle3D(t,n,h,mI);p=Tt.union(i,o)}else{if(f=AI(e,c),f.attributes.position.values=x_.scaleToGeodeticHeight(f.attributes.position.values,u,n,!1),Object(r["a"])(e._offsetAttribute)){const t=f.attributes.position.values.length,n=e._offsetAttribute===Gu.NONE?0:1,i=new Uint8Array(t/3).fill(n);f.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}p=Tt.fromRectangle3D(t,n,u)}return a.position||delete f.attributes.position,new Fu({attributes:f.attributes,indices:f.indices,primitiveType:f.primitiveType,boundingSphere:p,offsetAttribute:e._offsetAttribute})},PI.createShadowVolume=function(e,t,n){const i=e._granularity,o=e._ellipsoid,r=t(i,o),a=n(i,o);return new PI({rectangle:e._rectangle,rotation:e._rotation,ellipsoid:o,stRotation:e._stRotation,granularity:i,extrudedHeight:a,height:r,vertexFormat:qu.POSITION_ONLY,shadowVolume:!0})};const FI=new Fe,zI=[new Gt,new Gt,new Gt],kI=new ic,UI=new I;function VI(e){if(0===e._stRotation)return[0,0,0,1,1,0];const t=Fe.clone(e._rectangle,FI),n=e._granularity,i=e._ellipsoid,o=e._rotation-e._stRotation,r=DI(t,n,o,i,FI),a=zI;a[0].x=r.west,a[0].y=r.south,a[1].x=r.west,a[1].y=r.north,a[2].x=r.east,a[2].y=r.south;const s=e.rectangle,c=ic.fromRotation(e._stRotation,kI),l=Fe.center(s,UI);for(let p=0;p<3;++p){const e=a[p];e.x-=l.longitude,e.y-=l.latitude,ic.multiplyByVector(c,e,e),e.x+=l.longitude,e.y+=l.latitude,e.x=(e.x-s.west)/s.width,e.y=(e.y-s.south)/s.height}const u=a[0],h=a[1],d=a[2],f=new Array(6);return Gt.pack(u,f),Gt.pack(h,f,2),Gt.pack(d,f,4),f}Object.defineProperties(PI.prototype,{rectangle:{get:function(){return Object(r["a"])(this._rotatedRectangle)||(this._rotatedRectangle=DI(this._rectangle,this._granularity,this._rotation,this._ellipsoid)),this._rotatedRectangle}},textureCoordinateRotationPoints:{get:function(){return Object(r["a"])(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=VI(this)),this._textureCoordinateRotationPoints}}});var HI=PI;const GI=new Tt,WI=new Tt,qI=new g,YI=new Fe;function XI(e,t){const n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,a=t.southCap;let s=i,c=2,l=0,u=4;r&&(c-=1,s-=1,l+=1,u-=2),a&&(c-=1,s-=1,l+=1,u-=2),l+=c*o+2*s-u;const h=new Float64Array(3*l);let d,f=0,p=0;const m=qI;if(r)cI.computePosition(t,n,!1,p,0,m),h[f++]=m.x,h[f++]=m.y,h[f++]=m.z;else for(d=0;d<o;d++)cI.computePosition(t,n,!1,p,d,m),h[f++]=m.x,h[f++]=m.y,h[f++]=m.z;for(d=o-1,p=1;p<i;p++)cI.computePosition(t,n,!1,p,d,m),h[f++]=m.x,h[f++]=m.y,h[f++]=m.z;if(p=i-1,!a)for(d=o-2;d>=0;d--)cI.computePosition(t,n,!1,p,d,m),h[f++]=m.x,h[f++]=m.y,h[f++]=m.z;for(d=0,p=i-2;p>0;p--)cI.computePosition(t,n,!1,p,d,m),h[f++]=m.x,h[f++]=m.y,h[f++]=m.z;const _=h.length/3*2,g=ll.createTypedArray(h.length/3,_);let b=0;for(let v=0;v<h.length/3-1;v++)g[b++]=v,g[b++]=v+1;g[b++]=h.length/3-1,g[b++]=0;const y=new Fu({attributes:new Vu,primitiveType:Eu.LINES});return y.attributes.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:h}),y.indices=g,y}function KI(e,t){const n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=i,a=n,s=XI(e,t),c=t.height,l=t.width,u=x_.scaleToGeodeticHeight(s.attributes.position.values,a,o,!1);let h=u.length;const d=new Float64Array(2*h);d.set(u);const f=x_.scaleToGeodeticHeight(s.attributes.position.values,r,o);d.set(f,h),s.attributes.position.values=d;const p=t.northCap,m=t.southCap;let _=4;p&&(_-=1),m&&(_-=1);const g=2*(d.length/3+_),b=ll.createTypedArray(d.length/3,g);h=d.length/6;let y,v=0;for(let O=0;O<h-1;O++)b[v++]=O,b[v++]=O+1,b[v++]=O+h,b[v++]=O+h+1;if(b[v++]=h-1,b[v++]=0,b[v++]=h+h-1,b[v++]=h,b[v++]=0,b[v++]=h,p)y=c-1;else{const e=l-1;b[v++]=e,b[v++]=e+h,y=l+c-2}if(b[v++]=y,b[v++]=y+h,!m){const e=l+y-1;b[v++]=e,b[v]=e+h}return s.indices=b,s}function $I(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.rectangle,n=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),i=Object(o["a"])(e.ellipsoid,k.WGS84),c=Object(o["a"])(e.rotation,0);if(!Object(r["a"])(t))throw new a["a"]("rectangle is required.");if(Fe.validate(t),t.north<t.south)throw new a["a"]("options.rectangle.north must be greater than options.rectangle.south");const l=Object(o["a"])(e.height,0),u=Object(o["a"])(e.extrudedHeight,l);this._rectangle=Fe.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(l,u),this._rotation=c,this._extrudedHeight=Math.min(l,u),this._offsetAttribute=e.offsetAttribute,this._workerName="createRectangleOutlineGeometry"}$I.packedLength=Fe.packedLength+k.packedLength+5,$I.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),Fe.pack(e._rectangle,t,n),n+=Fe.packedLength,k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=Object(o["a"])(e._offsetAttribute,-1),t};const JI=new Fe,QI=k.clone(k.UNIT_SPHERE),ZI={rectangle:JI,ellipsoid:QI,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};$I.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");t=Object(o["a"])(t,0);const i=Fe.unpack(e,t,JI);t+=Fe.packedLength;const s=k.unpack(e,t,QI);t+=k.packedLength;const c=e[t++],l=e[t++],u=e[t++],h=e[t++],d=e[t];return Object(r["a"])(n)?(n._rectangle=Fe.clone(i,n._rectangle),n._ellipsoid=k.clone(s,n._ellipsoid),n._surfaceHeight=l,n._rotation=u,n._extrudedHeight=h,n._offsetAttribute=-1===d?void 0:d,n):(ZI.granularity=c,ZI.height=l,ZI.rotation=u,ZI.extrudedHeight=h,ZI.offsetAttribute=-1===d?void 0:d,new $I(ZI))};const eD=new I;$I.createGeometry=function(e){const t=e._rectangle,n=e._ellipsoid,i=cI.computeOptions(t,e._granularity,e._rotation,0,YI,eD);let o,a;if(s["a"].equalsEpsilon(t.north,t.south,s["a"].EPSILON10)||s["a"].equalsEpsilon(t.east,t.west,s["a"].EPSILON10))return;const c=e._surfaceHeight,l=e._extrudedHeight,u=!s["a"].equalsEpsilon(c,l,0,s["a"].EPSILON2);let h;if(u){if(o=KI(e,i),Object(r["a"])(e._offsetAttribute)){const t=o.attributes.position.values.length/3;let n=new Uint8Array(t);e._offsetAttribute===Gu.TOP?n=n.fill(1,0,t/2):(h=e._offsetAttribute===Gu.NONE?0:1,n=n.fill(h)),o.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}const s=Tt.fromRectangle3D(t,n,c,WI),u=Tt.fromRectangle3D(t,n,l,GI);a=Tt.union(s,u)}else{if(o=XI(e,i),o.attributes.position.values=x_.scaleToGeodeticHeight(o.attributes.position.values,c,n,!1),Object(r["a"])(e._offsetAttribute)){const t=o.attributes.position.values.length;h=e._offsetAttribute===Gu.NONE?0:1;const n=new Uint8Array(t/3).fill(h);o.attributes.applyOffset=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}a=Tt.fromRectangle3D(t,n,c)}return new Fu({attributes:o.attributes,indices:o.indices,primitiveType:Eu.LINES,boundingSphere:a,offsetAttribute:e._offsetAttribute})};var tD=$I;const nD={FIXED:0,INERTIAL:1};var iD=Object.freeze(nD),oD=n("4ca2"),rD=n("75b2");const aD=30,sD=1<<aD,cD=1<<aD+1>>>0,lD=2*aD+1,uD=4,hD=[],dD=[],fD=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],pD=1,mD=2,_D=[pD,0,0,pD|mD];function gD(e){if(!Or.supportsBigInt())throw new ye["a"]("S2 required BigInt support");if(!Object(r["a"])(e))throw new a["a"]("cell ID is required.");if(!gD.isValidId(e))throw new a["a"]("cell ID is invalid.");this._cellId=e,this._level=gD.getLevel(e)}function bD(e,t){const n=vD(e,t);return AD(n[0],n[1],n[2])}function yD(e,t,n){const i=OD(e,t),o=ED([i[1],i[2]],t),r=n>>1&1;return wD(i[0],o[0][r^1&n],o[1][r])}function vD(e,t){const n=OD(e),i=n[0],o=n[1],r=n[2],a=30===t,s=!a&&(BigInt(o)^e>>BigInt(2))&BigInt(1),c=a?1:s?2:0,l=(o<<1)+c,u=(r<<1)+c;return[i,l,u]}function OD(e){0===hD.length&&DD();const t=Number(e>>BigInt(lD));let n=t&pD;const i=(1<<uD)-1;let o=0,r=0;for(let a=7;a>=0;a--){const t=7===a?aD-7*uD:uD,s=(1<<2*t)-1;n+=Number(e>>BigInt(2*a*uD+1)&BigInt(s))<<2,n=dD[n];const c=a*uD;o+=n>>uD+2<<c,r+=(n>>2&i)<<c,n&=pD|mD}return[t,o,r]}function AD(e,t,n){const i=CD(t),o=CD(n),r=TD(i),a=TD(o);return wD(e,r,a)}function wD(e,t,n){switch(e){case 0:return new g(1,t,n);case 1:return new g(-t,1,n);case 2:return new g(-t,-n,1);case 3:return new g(-1,-n,-t);case 4:return new g(n,-1,-t);default:return new g(n,t,-1)}}function TD(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function CD(e){return 1/cD*e}function ED(e,t){const n=[[],[]],i=xD(t);for(let o=0;o<2;++o){const t=e[o]&-i,r=t+i;n[o][0]=TD(SD(t)),n[o][1]=TD(SD(r))}return n}function xD(e){return 1<<aD-e>>>0}function SD(e){return 1/sD*e}function ID(e,t,n,i,o,r){if(e===uD){const e=(t<<uD)+n;hD[(e<<2)+i]=(o<<2)+r,dD[(o<<2)+i]=(e<<2)+r}else{e++,t<<=1,n<<=1,o<<=2;const a=fD[r];ID(e,t+(a[0]>>1),n+(1&a[0]),i,o,r^_D[0]),ID(e,t+(a[1]>>1),n+(1&a[1]),i,o+1,r^_D[1]),ID(e,t+(a[2]>>1),n+(1&a[2]),i,o+2,r^_D[2]),ID(e,t+(a[3]>>1),n+(1&a[3]),i,o+3,r^_D[3])}}function DD(){ID(0,0,0,0,0,0),ID(0,0,0,pD,0,pD),ID(0,0,0,mD,0,mD),ID(0,0,0,pD|mD,0,pD|mD)}function PD(e){return e&~e+BigInt(1)}function jD(e){return BigInt(1)<<BigInt(2*(aD-e))}gD.fromToken=function(e){if(i["a"].typeOf.string("token",e),!gD.isValidToken(e))throw new a["a"]("token is invalid.");return new gD(gD.getIdFromToken(e))},gD.isValidId=function(e){if(i["a"].typeOf.bigint("cellId",e),e<=0)return!1;if(e>>BigInt(lD)>5)return!1;const t=e&~e+BigInt(1);return!!(t&BigInt("0x1555555555555555"))},gD.isValidToken=function(e){return i["a"].typeOf.string("token",e),!!/^[0-9a-fA-F]{1,16}$/.test(e)&&gD.isValidId(gD.getIdFromToken(e))},gD.getIdFromToken=function(e){return i["a"].typeOf.string("token",e),BigInt("0x"+e+"0".repeat(16-e.length))},gD.getTokenFromId=function(e){i["a"].typeOf.bigint("cellId",e);const t=Math.floor(LD(e)/4),n=e.toString(16).replace(/0*$/,""),o=Array(17-t-n.length).join("0");return o+n},gD.getLevel=function(e){if(i["a"].typeOf.bigint("cellId",e),!gD.isValidId(e))throw new a["a"];let t=0;while(e!==BigInt(0)){if(e&BigInt(1))break;t++,e>>=BigInt(1)}return aD-(t>>1)},gD.prototype.getChild=function(e){if(i["a"].typeOf.number("index",e),e<0||e>3)throw new a["a"]("child index must be in the range [0-3].");if(30===this._level)throw new a["a"]("cannot get child of leaf cell.");const t=PD(this._cellId)>>BigInt(2),n=this._cellId+BigInt(2*e+1-4)*t;return new gD(n)},gD.prototype.getParent=function(){if(0===this._level)throw new a["a"]("cannot get parent of root cell.");const e=PD(this._cellId)<<BigInt(2);return new gD(this._cellId&~e+BigInt(1)|e)},gD.prototype.getParentAtLevel=function(e){if(0===this._level||e<0||this._level<e)throw new a["a"]("cannot get parent at invalid level.");const t=jD(e);return new gD(this._cellId&-t|t)},gD.prototype.getCenter=function(e){e=Object(o["a"])(e,k.WGS84);let t=bD(this._cellId,this._level);t=g.normalize(t,t);const n=new I.fromCartesian(t,k.UNIT_SPHERE);return I.toCartesian(n,e,new g)},gD.prototype.getVertex=function(e,t){if(i["a"].typeOf.number("index",e),e<0||e>3)throw new a["a"]("vertex index must be in the range [0-3].");t=Object(o["a"])(t,k.WGS84);let n=yD(this._cellId,this._level,e);n=g.normalize(n,n);const r=new I.fromCartesian(n,k.UNIT_SPHERE);return I.toCartesian(r,t,new g)},gD.fromFacePositionLevel=function(e,t,n){if(i["a"].typeOf.bigint("position",t),e<0||e>5)throw new a["a"]("Invalid S2 Face (must be within 0-5)");if(n<0||n>aD)throw new a["a"]("Invalid level (must be within 0-30)");if(t<0||t>=Math.pow(4,n))throw new a["a"]("Invalid Hilbert position for level");const o=(e<4?"0":"")+(e<2?"0":"")+e.toString(2),r=t.toString(2),s=Array(2*n-r.length+1).join("0"),c=Array(lD-2*n).join("0"),l=BigInt(`0b${o}${s}${r}1${c}`);return new gD(l)};const RD=[64,0,1,39,2,15,40,23,3,12,16,59,41,19,24,54,4,64,13,10,17,62,60,28,42,30,20,51,25,44,55,47,5,32,65,38,14,22,11,58,18,53,63,9,61,27,29,50,43,46,31,37,21,57,52,8,26,49,45,36,56,7,48,35,6,34,33,0];function LD(e){return RD[(-e&e)%BigInt(67)]}var MD=gD;const ND={LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19};var BD=Object.freeze(ND);function FD(e,t,n){const i=e._element;if(i===document)return n.x=t.clientX,n.y=t.clientY,n;const o=i.getBoundingClientRect();return n.x=t.clientX-o.left,n.y=t.clientY-o.top,n}function zD(e,t){let n=e;return Object(r["a"])(t)&&(n+=`+${t}`),n}function kD(e){return e.shiftKey?lE.SHIFT:e.ctrlKey?lE.CTRL:e.altKey?lE.ALT:void 0}const UD={LEFT:0,MIDDLE:1,RIGHT:2};function VD(e,t,n,i){function o(t){i(e,t)}Or.isInternetExplorer()?n.addEventListener(t,o,!1):n.addEventListener(t,o,{capture:!1,passive:!1}),e._removalFunctions.push((function(){n.removeEventListener(t,o,!1)}))}function HD(e){const t=e._element,n=Object(r["a"])(t.disableRootEvents)?t:document;let i;Or.supportsPointerEvents()?(VD(e,"pointerdown",t,gP),VD(e,"pointerup",t,bP),VD(e,"pointermove",t,yP),VD(e,"pointercancel",t,bP)):(VD(e,"mousedown",t,KD),VD(e,"mouseup",n,ZD),VD(e,"mousemove",n,tP),VD(e,"touchstart",t,rP),VD(e,"touchend",n,aP),VD(e,"touchmove",n,fP),VD(e,"touchcancel",n,aP)),VD(e,"dblclick",t,iP),i="onwheel"in t?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",VD(e,i,t,oP)}function GD(e){const t=e._removalFunctions;for(let n=0;n<t.length;++n)t[n]()}const WD={position:new Gt};function qD(e){e._lastSeenTouchEvent=bm()}function YD(e){return bm()-e._lastSeenTouchEvent>vP.mouseEmulationIgnoreMilliseconds}function XD(e,t,n){const i=e.x-t.x,o=e.y-t.y,r=Math.sqrt(i*i+o*o);return r<n}function KD(e,t){if(!YD(e))return;const n=t.button;let i;if(e._buttonDown[n]=!0,n===UD.LEFT)i=BD.LEFT_DOWN;else if(n===UD.MIDDLE)i=BD.MIDDLE_DOWN;else{if(n!==UD.RIGHT)return;i=BD.RIGHT_DOWN}const o=FD(e,t,e._primaryPosition);Gt.clone(o,e._primaryStartPosition),Gt.clone(o,e._primaryPreviousPosition);const a=kD(t),s=e.getInputAction(i,a);Object(r["a"])(s)&&(Gt.clone(o,WD.position),s(WD),t.preventDefault())}const $D={position:new Gt},JD={position:new Gt};function QD(e,t,n,i){const o=kD(i),a=e.getInputAction(t,o),s=e.getInputAction(n,o);if(Object(r["a"])(a)||Object(r["a"])(s)){const t=FD(e,i,e._primaryPosition);if(Object(r["a"])(a)&&(Gt.clone(t,$D.position),a($D)),Object(r["a"])(s)){const n=e._primaryStartPosition;XD(n,t,e._clickPixelTolerance)&&(Gt.clone(t,JD.position),s(JD))}}}function ZD(e,t){if(!YD(e))return;const n=t.button;n!==UD.LEFT&&n!==UD.MIDDLE&&n!==UD.RIGHT||(e._buttonDown[UD.LEFT]&&(QD(e,BD.LEFT_UP,BD.LEFT_CLICK,t),e._buttonDown[UD.LEFT]=!1),e._buttonDown[UD.MIDDLE]&&(QD(e,BD.MIDDLE_UP,BD.MIDDLE_CLICK,t),e._buttonDown[UD.MIDDLE]=!1),e._buttonDown[UD.RIGHT]&&(QD(e,BD.RIGHT_UP,BD.RIGHT_CLICK,t),e._buttonDown[UD.RIGHT]=!1))}const eP={startPosition:new Gt,endPosition:new Gt};function tP(e,t){if(!YD(e))return;const n=kD(t),i=FD(e,t,e._primaryPosition),o=e._primaryPreviousPosition,a=e.getInputAction(BD.MOUSE_MOVE,n);Object(r["a"])(a)&&(Gt.clone(o,eP.startPosition),Gt.clone(i,eP.endPosition),a(eP)),Gt.clone(i,o),(e._buttonDown[UD.LEFT]||e._buttonDown[UD.MIDDLE]||e._buttonDown[UD.RIGHT])&&t.preventDefault()}const nP={position:new Gt};function iP(e,t){const n=t.button;let i;if(n!==UD.LEFT)return;i=BD.LEFT_DOUBLE_CLICK;const o=kD(t),a=e.getInputAction(i,o);Object(r["a"])(a)&&(FD(e,t,nP.position),a(nP))}function oP(e,t){let n;if(Object(r["a"])(t.deltaY)){const e=t.deltaMode;n=e===t.DOM_DELTA_PIXEL?-t.deltaY:e===t.DOM_DELTA_LINE?40*-t.deltaY:120*-t.deltaY}else n=t.detail>0?-120*t.detail:t.wheelDelta;if(!Object(r["a"])(n))return;const i=kD(t),o=e.getInputAction(BD.WHEEL,i);Object(r["a"])(o)&&(o(n),t.preventDefault())}function rP(e,t){qD(e);const n=t.changedTouches;let i;const o=n.length;let r,a;const s=e._positions;for(i=0;i<o;++i)r=n[i],a=r.identifier,s.set(a,FD(e,r,new Gt));dP(e,t);const c=e._previousPositions;for(i=0;i<o;++i)r=n[i],a=r.identifier,c.set(a,Gt.clone(s.get(a)))}function aP(e,t){qD(e);const n=t.changedTouches;let i;const o=n.length;let r,a;const s=e._positions;for(i=0;i<o;++i)r=n[i],a=r.identifier,s.remove(a);dP(e,t);const c=e._previousPositions;for(i=0;i<o;++i)r=n[i],a=r.identifier,c.remove(a)}const sP={position:new Gt},cP={position1:new Gt,position2:new Gt},lP={position:new Gt},uP={position:new Gt},hP={position:new Gt};function dP(e,t){const n=kD(t),i=e._positions,o=i.length;let a,s;const c=e._isPinching;if(1!==o&&e._buttonDown[UD.LEFT]){if(e._buttonDown[UD.LEFT]=!1,Object(r["a"])(e._touchHoldTimer)&&(clearTimeout(e._touchHoldTimer),e._touchHoldTimer=void 0),a=e.getInputAction(BD.LEFT_UP,n),Object(r["a"])(a)&&(Gt.clone(e._primaryPosition,lP.position),a(lP)),0===o&&!e._isTouchHolding&&(s=e.getInputAction(BD.LEFT_CLICK,n),Object(r["a"])(s))){const t=e._primaryStartPosition,n=e._previousPositions.values[0];XD(t,n,e._clickPixelTolerance)&&(Gt.clone(e._primaryPosition,uP.position),s(uP))}e._isTouchHolding=!1}if(0===o&&c&&(e._isPinching=!1,a=e.getInputAction(BD.PINCH_END,n),Object(r["a"])(a)&&a()),1===o&&!c){const o=i.values[0];Gt.clone(o,e._primaryPosition),Gt.clone(o,e._primaryStartPosition),Gt.clone(o,e._primaryPreviousPosition),e._buttonDown[UD.LEFT]=!0,a=e.getInputAction(BD.LEFT_DOWN,n),Object(r["a"])(a)&&(Gt.clone(o,sP.position),a(sP)),e._touchHoldTimer=setTimeout((function(){if(!e.isDestroyed()&&(e._touchHoldTimer=void 0,e._isTouchHolding=!0,s=e.getInputAction(BD.RIGHT_CLICK,n),Object(r["a"])(s))){const t=e._primaryStartPosition,n=e._previousPositions.values[0];XD(t,n,e._holdPixelTolerance)&&(Gt.clone(e._primaryPosition,hP.position),s(hP))}}),vP.touchHoldDelayMilliseconds),t.preventDefault()}2!==o||c||(e._isPinching=!0,a=e.getInputAction(BD.PINCH_START,n),Object(r["a"])(a)&&(Gt.clone(i.values[0],cP.position1),Gt.clone(i.values[1],cP.position2),a(cP),t.preventDefault()))}function fP(e,t){qD(e);const n=t.changedTouches;let i;const o=n.length;let a,s;const c=e._positions;for(i=0;i<o;++i){a=n[i],s=a.identifier;const t=c.get(s);Object(r["a"])(t)&&FD(e,a,t)}_P(e,t);const l=e._previousPositions;for(i=0;i<o;++i)a=n[i],s=a.identifier,Gt.clone(c.get(s),l.get(s))}const pP={startPosition:new Gt,endPosition:new Gt},mP={distance:{startPosition:new Gt,endPosition:new Gt},angleAndHeight:{startPosition:new Gt,endPosition:new Gt}};function _P(e,t){const n=kD(t),i=e._positions,o=e._previousPositions,a=i.length;let s;if(1===a&&e._buttonDown[UD.LEFT]){const o=i.values[0];Gt.clone(o,e._primaryPosition);const a=e._primaryPreviousPosition;s=e.getInputAction(BD.MOUSE_MOVE,n),Object(r["a"])(s)&&(Gt.clone(a,pP.startPosition),Gt.clone(o,pP.endPosition),s(pP)),Gt.clone(o,a),t.preventDefault()}else if(2===a&&e._isPinching&&(s=e.getInputAction(BD.PINCH_MOVE,n),Object(r["a"])(s))){const e=i.values[0],t=i.values[1],n=o.values[0],r=o.values[1],a=t.x-e.x,c=t.y-e.y,l=.25*Math.sqrt(a*a+c*c),u=r.x-n.x,h=r.y-n.y,d=.25*Math.sqrt(u*u+h*h),f=.125*(t.y+e.y),p=.125*(r.y+n.y),m=Math.atan2(c,a),_=Math.atan2(h,u);Gt.fromElements(0,d,mP.distance.startPosition),Gt.fromElements(0,l,mP.distance.endPosition),Gt.fromElements(_,p,mP.angleAndHeight.startPosition),Gt.fromElements(m,f,mP.angleAndHeight.endPosition),s(mP)}}function gP(e,t){if(t.target.setPointerCapture(t.pointerId),"touch"===t.pointerType){const n=e._positions,i=t.pointerId;n.set(i,FD(e,t,new Gt)),dP(e,t);const o=e._previousPositions;o.set(i,Gt.clone(n.get(i)))}else KD(e,t)}function bP(e,t){if("touch"===t.pointerType){const n=e._positions,i=t.pointerId;n.remove(i),dP(e,t);const o=e._previousPositions;o.remove(i)}else ZD(e,t)}function yP(e,t){if("touch"===t.pointerType){const n=e._positions,i=t.pointerId,o=n.get(i);if(!Object(r["a"])(o))return;FD(e,t,o),_P(e,t);const a=e._previousPositions;Gt.clone(n.get(i),a.get(i))}else tP(e,t)}function vP(e){this._inputEvents={},this._buttonDown={LEFT:!1,MIDDLE:!1,RIGHT:!1},this._isPinching=!1,this._isTouchHolding=!1,this._lastSeenTouchEvent=-vP.mouseEmulationIgnoreMilliseconds,this._primaryStartPosition=new Gt,this._primaryPosition=new Gt,this._primaryPreviousPosition=new Gt,this._positions=new pu,this._previousPositions=new pu,this._removalFunctions=[],this._touchHoldTimer=void 0,this._clickPixelTolerance=5,this._holdPixelTolerance=25,this._element=Object(o["a"])(e,document),HD(this)}vP.prototype.setInputAction=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("action is required.");if(!Object(r["a"])(t))throw new a["a"]("type is required.");const i=zD(t,n);this._inputEvents[i]=e},vP.prototype.getInputAction=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=zD(e,t);return this._inputEvents[n]},vP.prototype.removeInputAction=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=zD(e,t);delete this._inputEvents[n]},vP.prototype.isDestroyed=function(){return!1},vP.prototype.destroy=function(){return GD(this),Wc(this)},vP.mouseEmulationIgnoreMilliseconds=800,vP.touchHoldDelayMilliseconds=1500;var OP=vP;function AP(e){e=Object(o["a"])(e,!0),this.value=AP.toValue(e)}Object.defineProperties(AP.prototype,{componentDatatype:{get:function(){return Ks.UNSIGNED_BYTE}},componentsPerAttribute:{get:function(){return 1}},normalize:{get:function(){return!1}}}),AP.toValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("show is required.");return Object(r["a"])(t)?(t[0]=e,t):new Uint8Array([e])};var wP=AP;const TP={};function CP(e){const t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}const EP=32.184,xP=2451545;function SP(e,t){t=mo.addSeconds(e,EP,t);const n=mo.totalDays(t)-xP;return t=mo.addSeconds(t,CP(n),t),t}const IP=new mo(2451545,0,qi.TAI),DP=1e3,PP=s["a"].RADIANS_PER_DEGREE,jP=s["a"].RADIANS_PER_ARCSECOND,RP=14959787e4,LP=new ce;function MP(e,t,n,i,o,c,l){if(n<0&&(n=-n,o+=s["a"].PI),n<0||n>s["a"].PI)throw new a["a"]("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.");const u=e*(1-t),h=i-o,d=o,f=BP(c-i,t),p=NP(t,0);if("Hyperbolic"===p&&Math.abs(s["a"].negativePiToPi(f))>=Math.acos(-1/t))throw new a["a"]("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.");VP(h,n,d,LP);const m=u*(1+t),_=Math.cos(f),b=Math.sin(f),y=1+t*_;if(y<=s["a"].Epsilon10)throw new a["a"]("elements cannot be converted to cartesian");const v=m/y;return Object(r["a"])(l)?(l.x=v*_,l.y=v*b,l.z=0):l=new g(v*_,v*b,0),ce.multiplyByVector(LP,l,l)}function NP(e,t){if(e<0)throw new a["a"]("eccentricity cannot be negative.");return e<=t?"Circular":e<1-t?"Elliptical":e<=1+t?"Parabolic":"Hyperbolic"}function BP(e,t){if(t<0||t>=1)throw new a["a"]("eccentricity out of range.");const n=kP(e,t);return UP(n,t)}const FP=50,zP=s["a"].EPSILON8;function kP(e,t){if(t<0||t>=1)throw new a["a"]("eccentricity out of range.");const n=Math.floor(e/s["a"].TWO_PI);e-=n*s["a"].TWO_PI;let i,o=e+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e)),r=Number.MAX_VALUE;for(i=0;i<FP&&Math.abs(r-o)>zP;++i){r=o;const n=r-t*Math.sin(r)-e,i=1-t*Math.cos(r);o=r-n/i}if(i>=FP)throw new a["a"]("Kepler equation did not converge");return r=o+n*s["a"].TWO_PI,r}function UP(e,t){if(t<0||t>=1)throw new a["a"]("eccentricity out of range.");const n=Math.floor(e/s["a"].TWO_PI);e-=n*s["a"].TWO_PI;const i=Math.cos(e)-t,o=Math.sin(e)*Math.sqrt(1-t*t);let r=Math.atan2(o,i);return r=s["a"].zeroToTwoPi(r),e<0&&(r-=s["a"].TWO_PI),r+=n*s["a"].TWO_PI,r}function VP(e,t,n,i){if(t<0||t>s["a"].PI)throw new a["a"]("inclination out of range");const o=Math.cos(e),c=Math.sin(e),l=Math.cos(t),u=Math.sin(t),h=Math.cos(n),d=Math.sin(n);return Object(r["a"])(i)?(i[0]=h*o-d*c*l,i[1]=d*o+h*c*l,i[2]=c*u,i[3]=-h*c-d*o*l,i[4]=-d*c+h*o*l,i[5]=o*u,i[6]=d*u,i[7]=-h*u,i[8]=l):i=new ce(h*o-d*c*l,-h*c-d*o*l,d*u,d*o+h*c*l,-d*c+h*o*l,-h*u,c*u,o*u,l),i}const HP=1.0000010178*RP,GP=100.46645683*PP,WP=1295977422.83429*jP,qP=16002,YP=21863,XP=32004,KP=10931,$P=14529,JP=16368,QP=15318,ZP=32794,ej=64e-7*RP,tj=-152e-7*RP,nj=62e-7*RP,ij=-8e-7*RP,oj=32e-7*RP,rj=-41e-7*RP,aj=19e-7*RP,sj=-11e-7*RP,cj=1e-7*-150*RP,lj=-46e-7*RP,uj=68*1e-7*RP,hj=54e-7*RP,dj=14e-7*RP,fj=24e-7*RP,pj=-28e-7*RP,mj=22e-7*RP,_j=10,gj=16002,bj=21863,yj=10931,vj=1473,Oj=32004,Aj=4387,wj=73,Tj=-325e-7,Cj=-322e-7,Ej=1e-7*-79,xj=232*1e-7,Sj=1e-7*-52,Ij=97e-7,Dj=55e-7,Pj=-41e-7,jj=-105e-7,Rj=-137e-7,Lj=258e-7,Mj=35e-7,Nj=1e-7*-116,Bj=-88e-7,Fj=-112e-7,zj=-8e-6,kj=new mo(0,0,qi.TAI);function Uj(e,t){SP(e,kj);const n=kj.dayNumber-IP.dayNumber+(kj.secondsOfDay-IP.secondsOfDay)/Gi.SECONDS_PER_DAY,i=n/(10*Gi.DAYS_PER_JULIAN_CENTURY),o=.3595362*i,r=HP+ej*Math.cos(qP*o)+cj*Math.sin(qP*o)+tj*Math.cos(YP*o)+lj*Math.sin(YP*o)+nj*Math.cos(XP*o)+uj*Math.sin(XP*o)+ij*Math.cos(KP*o)+hj*Math.sin(KP*o)+oj*Math.cos($P*o)+dj*Math.sin($P*o)+rj*Math.cos(JP*o)+fj*Math.sin(JP*o)+aj*Math.cos(QP*o)+pj*Math.sin(QP*o)+sj*Math.cos(ZP*o)+mj*Math.sin(ZP*o),a=GP+WP*i+Tj*Math.cos(_j*o)+jj*Math.sin(_j*o)+Cj*Math.cos(gj*o)+Rj*Math.sin(gj*o)+Ej*Math.cos(bj*o)+Lj*Math.sin(bj*o)+xj*Math.cos(yj*o)+Mj*Math.sin(yj*o)+Sj*Math.cos(vj*o)+Nj*Math.sin(vj*o)+Ij*Math.cos(Oj*o)+Bj*Math.sin(Oj*o)+Dj*Math.cos(Aj*o)+Fj*Math.sin(Aj*o)+Pj*Math.cos(wj*o)+zj*Math.sin(wj*o),s=.0167086342-.0004203654*i,c=102.93734808*PP+11612.3529*jP*i,l=469.97289*jP*i,u=174.87317577*PP-8679.27034*jP*i;return MP(r,s,l,c,u,a,t)}function Vj(e,t){SP(e,kj);const n=kj.dayNumber-IP.dayNumber+(kj.secondsOfDay-IP.secondsOfDay)/Gi.SECONDS_PER_DAY,i=n/Gi.DAYS_PER_JULIAN_CENTURY,o=i*i,r=o*i,a=r*i;let s=383397.7725+.004*i,c=.055545526-16e-9*i;const l=5.15668983*PP;let u=-8e-5*i+.02966*o-42e-6*r-13e-8*a;const h=83.35324312*PP;let d=14643420.2669*i-38.2702*o-.045047*r+21301e-8*a;const f=125.04455501*PP;let p=-6967919.3631*i+6.3602*o+.007625*r-3586e-8*a;const m=218.31664563*PP;let _=1732559343.4847*i-6.391*o+.006588*r-3169e-8*a;const g=297.85019547*PP+jP*(1602961601.209*i-6.3706*o+.006593*r-3169e-8*a),b=93.27209062*PP+jP*(1739527262.8478*i-12.7512*o-.001037*r+417e-8*a),y=134.96340251*PP+jP*(1717915923.2178*i+31.8792*o+.051635*r-2447e-7*a),v=357.52910918*PP+jP*(129596581.0481*i-.5532*o+136e-6*r-1149e-8*a),O=310.17137918*PP-jP*(6967051.436*i+6.2068*o+.007618*r-3219e-8*a),A=2*g,w=4*g,T=6*g,C=2*y,E=3*y,x=4*y,S=2*b;s+=3400.4*Math.cos(A)-635.6*Math.cos(A-y)-235.6*Math.cos(y)+218.1*Math.cos(A-v)+181*Math.cos(A+y),c+=.014216*Math.cos(A-y)+.008551*Math.cos(A-C)-.001383*Math.cos(y)+.001356*Math.cos(A+y)-.001147*Math.cos(w-E)-914e-6*Math.cos(w-C)+869e-6*Math.cos(A-v-y)-627e-6*Math.cos(A)-394e-6*Math.cos(w-x)+282e-6*Math.cos(A-v-C)-279e-6*Math.cos(g-y)-236e-6*Math.cos(C)+231e-6*Math.cos(w)+229e-6*Math.cos(T-x)-201e-6*Math.cos(C-S),u+=486.26*Math.cos(A-S)-40.13*Math.cos(A)+37.51*Math.cos(S)+25.73*Math.cos(C-S)+19.97*Math.cos(A-v-S),d+=-55609*Math.sin(A-y)-34711*Math.sin(A-C)-9792*Math.sin(y)+9385*Math.sin(w-E)+7505*Math.sin(w-C)+5318*Math.sin(A+y)+3484*Math.sin(w-x)-3417*Math.sin(A-v-y)-2530*Math.sin(T-x)-2376*Math.sin(A)-2075*Math.sin(A-E)-1883*Math.sin(C)-1736*Math.sin(T-5*y)+1626*Math.sin(v)-1370*Math.sin(T-E),p+=-5392*Math.sin(A-S)-540*Math.sin(v)-441*Math.sin(A)+423*Math.sin(S)-288*Math.sin(C-S),_+=-3332.9*Math.sin(A)+1197.4*Math.sin(A-y)-662.5*Math.sin(v)+396.3*Math.sin(y)-218*Math.sin(A-v);const I=2*O,D=3*O;u+=46.997*Math.cos(O)*i-.614*Math.cos(A-S+O)*i+.614*Math.cos(A-S-O)*i-.0297*Math.cos(I)*o-.0335*Math.cos(O)*o+.0012*Math.cos(A-S+I)*o-16e-5*Math.cos(O)*r+4e-5*Math.cos(D)*r+4e-5*Math.cos(I)*r;const P=2.116*Math.sin(O)*i-.111*Math.sin(A-S-O)*i-.0015*Math.sin(O)*o;d+=P,_+=P,p+=-520.77*Math.sin(O)*i+13.66*Math.sin(A-S+O)*i+1.12*Math.sin(A-O)*i-1.06*Math.sin(S-O)*i+.66*Math.sin(I)*o+.371*Math.sin(O)*o-.035*Math.sin(A-S+I)*o-.015*Math.sin(A-S+O)*o+.0014*Math.sin(O)*r-.0011*Math.sin(D)*r-9e-4*Math.sin(I)*r,s*=DP;const j=l+u*jP,R=h+d*jP,L=m+_*jP,M=f+p*jP;return MP(s,c,j,R,M,L,t)}const Hj=.012300034,Gj=Hj/(Hj+1)*-1;function Wj(e,t){return t=Vj(e,t),g.multiplyByScalar(t,Gj,t)}const qj=new ce(1.0000000000000002,5619723173785822e-31,4690511510146299e-34,-5154129427414611e-31,.9174820620691819,-.39777715593191376,-223970096136568e-30,.39777715593191376,.9174820620691819);let Yj=new g;TP.computeSunPositionInEarthInertialFrame=function(e,t){return Object(r["a"])(e)||(e=mo.now()),Object(r["a"])(t)||(t=new g),Yj=Uj(e,Yj),t=g.negate(Yj,t),Wj(e,Yj),g.subtract(t,Yj,t),ce.multiplyByVector(qj,t,t),t},TP.computeMoonPositionInEarthInertialFrame=function(e,t){return Object(r["a"])(e)||(e=mo.now()),t=Vj(e,t),ce.multiplyByVector(qj,t,t),t};var Xj=TP;function Kj(e,t,n,i,o,r,a){const s=ib.numberOfPoints(e,t,o);let c;const l=n.red,u=n.green,h=n.blue,d=n.alpha,f=i.red,p=i.green,m=i.blue,_=i.alpha;if(Dm.equals(n,i)){for(c=0;c<s;c++)r[a++]=Dm.floatToByte(l),r[a++]=Dm.floatToByte(u),r[a++]=Dm.floatToByte(h),r[a++]=Dm.floatToByte(d);return a}const g=(f-l)/s,b=(p-u)/s,y=(m-h)/s,v=(_-d)/s;let O=a;for(c=0;c<s;c++)r[O++]=Dm.floatToByte(l+c*g),r[O++]=Dm.floatToByte(u+c*b),r[O++]=Dm.floatToByte(h+c*y),r[O++]=Dm.floatToByte(d+c*v);return O}function $j(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.colors,i=Object(o["a"])(e.colorsPerVertex,!1);if(!Object(r["a"])(t)||t.length<2)throw new a["a"]("At least two positions are required.");if(Object(r["a"])(n)&&(i&&n.length<t.length||!i&&n.length<t.length-1))throw new a["a"]("colors has an invalid length.");this._positions=t,this._colors=n,this._colorsPerVertex=i,this._arcType=Object(o["a"])(e.arcType,uu.GEODESIC),this._granularity=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._workerName="createSimplePolylineGeometry";let c=1+t.length*g.packedLength;c+=Object(r["a"])(n)?1+n.length*Dm.packedLength:1,this.packedLength=c+k.packedLength+3}$j.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._colors;for(c=Object(r["a"])(l)?l.length:0,t[n++]=c,i=0;i<c;++i,n+=Dm.packedLength)Dm.pack(l[i],t,n);return k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n++]=e._colorsPerVertex?1:0,t[n++]=e._arcType,t[n]=e._granularity,t},$j.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);s=e[t++];const l=s>0?new Array(s):void 0;for(i=0;i<s;++i,t+=Dm.packedLength)l[i]=Dm.unpack(e,t);const u=k.unpack(e,t);t+=k.packedLength;const h=1===e[t++],d=e[t++],f=e[t];return Object(r["a"])(n)?(n._positions=c,n._colors=l,n._ellipsoid=u,n._colorsPerVertex=h,n._arcType=d,n._granularity=f,n):new $j({positions:c,colors:l,ellipsoid:u,colorsPerVertex:h,arcType:d,granularity:f})};const Jj=new Array(2),Qj=new Array(2),Zj={positions:Jj,height:Qj,ellipsoid:void 0,minDistance:void 0,granularity:void 0};$j.createGeometry=function(e){const t=e._positions,n=e._colors,i=e._colorsPerVertex,o=e._arcType,a=e._granularity,c=e._ellipsoid,l=s["a"].chordLength(a,c.maximumRadius),u=Object(r["a"])(n)&&!i;let h;const d=t.length;let f,p,m,_,b=0;if(o===uu.GEODESIC||o===uu.RHUMB){let e,i,p;o===uu.GEODESIC?(e=s["a"].chordLength(a,c.maximumRadius),i=ib.numberOfPoints,p=ib.generateArc):(e=a,i=ib.numberOfPointsRhumbLine,p=ib.generateRhumbArc);const g=ib.extractHeights(t,c),y=Zj;if(o===uu.GEODESIC?y.minDistance=l:y.granularity=a,y.ellipsoid=c,u){let o=0;for(h=0;h<d-1;h++)o+=i(t[h],t[h+1],e)+1;f=new Float64Array(3*o),m=new Uint8Array(4*o),y.positions=Jj,y.height=Qj;let a=0;for(h=0;h<d-1;++h){Jj[0]=t[h],Jj[1]=t[h+1],Qj[0]=g[h],Qj[1]=g[h+1];const e=p(y);if(Object(r["a"])(n)){const t=e.length/3;_=n[h];for(let e=0;e<t;++e)m[a++]=Dm.floatToByte(_.red),m[a++]=Dm.floatToByte(_.green),m[a++]=Dm.floatToByte(_.blue),m[a++]=Dm.floatToByte(_.alpha)}f.set(e,b),b+=e.length}}else if(y.positions=t,y.height=g,f=new Float64Array(p(y)),Object(r["a"])(n)){for(m=new Uint8Array(f.length/3*4),h=0;h<d-1;++h){const e=t[h],i=t[h+1],o=n[h],r=n[h+1];b=Kj(e,i,o,r,l,m,b)}const e=n[d-1];m[b++]=Dm.floatToByte(e.red),m[b++]=Dm.floatToByte(e.green),m[b++]=Dm.floatToByte(e.blue),m[b++]=Dm.floatToByte(e.alpha)}}else{p=u?2*d-2:d,f=new Float64Array(3*p),m=Object(r["a"])(n)?new Uint8Array(4*p):void 0;let e=0,i=0;for(h=0;h<d;++h){const o=t[h];if(u&&h>0&&(g.pack(o,f,e),e+=3,_=n[h-1],m[i++]=Dm.floatToByte(_.red),m[i++]=Dm.floatToByte(_.green),m[i++]=Dm.floatToByte(_.blue),m[i++]=Dm.floatToByte(_.alpha)),u&&h===d-1)break;g.pack(o,f,e),e+=3,Object(r["a"])(n)&&(_=n[h],m[i++]=Dm.floatToByte(_.red),m[i++]=Dm.floatToByte(_.green),m[i++]=Dm.floatToByte(_.blue),m[i++]=Dm.floatToByte(_.alpha))}}const y=new Vu;y.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:f}),Object(r["a"])(n)&&(y.color=new ku({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:4,values:m,normalize:!0})),p=f.length/3;const v=2*(p-1),O=ll.createTypedArray(p,v);let A=0;for(h=0;h<p-1;++h)O[A++]=h,O[A++]=h+1;return new Fu({attributes:y,indices:O,primitiveType:Eu.LINES,boundingSphere:Tt.fromPoints(t)})};var eR=$j;function tR(e){const t=Object(o["a"])(e.radius,1),n=new g(t,t,t),i={radii:n,stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,vertexFormat:e.vertexFormat};this._ellipsoidGeometry=new rO(i),this._workerName="createSphereGeometry"}tR.packedLength=rO.packedLength,tR.pack=function(e,t,n){return i["a"].typeOf.object("value",e),rO.pack(e._ellipsoidGeometry,t,n)};const nR=new rO,iR={radius:void 0,radii:new g,vertexFormat:new qu,stackPartitions:void 0,slicePartitions:void 0};tR.unpack=function(e,t,n){const i=rO.unpack(e,t,nR);return iR.vertexFormat=qu.clone(i._vertexFormat,iR.vertexFormat),iR.stackPartitions=i._stackPartitions,iR.slicePartitions=i._slicePartitions,Object(r["a"])(n)?(g.clone(i._radii,iR.radii),n._ellipsoidGeometry=new rO(iR),n):(iR.radius=i._radii.x,new tR(iR))},tR.createGeometry=function(e){return rO.createGeometry(e._ellipsoidGeometry)};var oR=tR;function rR(e){const t=Object(o["a"])(e.radius,1),n=new g(t,t,t),i={radii:n,stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,subdivisions:e.subdivisions};this._ellipsoidGeometry=new fO(i),this._workerName="createSphereOutlineGeometry"}rR.packedLength=fO.packedLength,rR.pack=function(e,t,n){return i["a"].typeOf.object("value",e),fO.pack(e._ellipsoidGeometry,t,n)};const aR=new fO,sR={radius:void 0,radii:new g,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0};rR.unpack=function(e,t,n){const i=fO.unpack(e,t,aR);return sR.stackPartitions=i._stackPartitions,sR.slicePartitions=i._slicePartitions,sR.subdivisions=i._subdivisions,Object(r["a"])(n)?(g.clone(i._radii,sR.radii),n._ellipsoidGeometry=new fO(sR),n):(sR.radius=i._radii.x,new rR(sR))},rR.createGeometry=function(e){return fO.createGeometry(e._ellipsoidGeometry)};var cR=rR;function lR(e,t,n){this.clock=Object(o["a"])(e,0),this.cone=Object(o["a"])(t,0),this.magnitude=Object(o["a"])(n,1)}lR.fromCartesian3=function(e,t){i["a"].typeOf.object("cartesian3",e);const n=e.x,o=e.y,a=e.z,s=n*n+o*o;return Object(r["a"])(t)||(t=new lR),t.clock=Math.atan2(o,n),t.cone=Math.atan2(Math.sqrt(s),a),t.magnitude=Math.sqrt(s+a*a),t},lR.clone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=e.magnitude,t):new lR(e.clock,e.cone,e.magnitude)},lR.normalize=function(e,t){return i["a"].typeOf.object("spherical",e),Object(r["a"])(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=1,t):new lR(e.clock,e.cone,1)},lR.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e.clock===t.clock&&e.cone===t.cone&&e.magnitude===t.magnitude},lR.equalsEpsilon=function(e,t,n){return n=Object(o["a"])(n,0),e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&Math.abs(e.clock-t.clock)<=n&&Math.abs(e.cone-t.cone)<=n&&Math.abs(e.magnitude-t.magnitude)<=n},lR.prototype.equals=function(e){return lR.equals(this,e)},lR.prototype.clone=function(e){return lR.clone(this,e)},lR.prototype.equalsEpsilon=function(e,t){return lR.equalsEpsilon(this,e,t)},lR.prototype.toString=function(){return`(${this.clock}, ${this.cone}, ${this.magnitude})`};var uR=lR;function hR(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.points,n=e.times;if(!Object(r["a"])(t)||!Object(r["a"])(n))throw new a["a"]("points and times are required.");if(t.length<2)throw new a["a"]("points.length must be greater than or equal to 2.");if(n.length!==t.length)throw new a["a"]("times.length must be equal to points.length.");this._times=n,this._points=t,this._pointType=uh.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(hR.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}}),hR.prototype.findTimeInterval=uh.prototype.findTimeInterval,hR.prototype.wrapTime=uh.prototype.wrapTime,hR.prototype.clampTime=uh.prototype.clampTime,hR.prototype.evaluate=function(e,t){const n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);const i=this._lastTimeIndex,o=this._pointType;return o===Number?n[i]:(Object(r["a"])(t)||(t=new o),o.clone(n[i],t))};var dR=hR;const fR={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7};var pR=fR;function mR(e){throw new a["a"]("This type should not be instantiated directly.  Instead, use WebMercatorTilingScheme or GeographicTilingScheme.")}Object.defineProperties(mR.prototype,{ellipsoid:{get:a["a"].throwInstantiationError},rectangle:{get:a["a"].throwInstantiationError},projection:{get:a["a"].throwInstantiationError}}),mR.prototype.getNumberOfXTilesAtLevel=a["a"].throwInstantiationError,mR.prototype.getNumberOfYTilesAtLevel=a["a"].throwInstantiationError,mR.prototype.rectangleToNativeRectangle=a["a"].throwInstantiationError,mR.prototype.tileXYToNativeRectangle=a["a"].throwInstantiationError,mR.prototype.tileXYToRectangle=a["a"].throwInstantiationError,mR.prototype.positionToTileXY=a["a"].throwInstantiationError;var _R=mR;function gR(e,t){return mo.compare(e.start,t.start)}function bR(e){if(this._intervals=[],this._changedEvent=new dn["a"],Object(r["a"])(e)){const t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(bR.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){const e=this._intervals;return 0===e.length?void 0:e[0].start}},isStartIncluded:{get:function(){const e=this._intervals;return 0!==e.length&&e[0].isStartIncluded}},stop:{get:function(){const e=this._intervals,t=e.length;return 0===t?void 0:e[t-1].stop}},isStopIncluded:{get:function(){const e=this._intervals,t=e.length;return 0!==t&&e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return 0===this._intervals.length}}}),bR.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof bR))return!1;const n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;r++)if(!ZC.equals(n[r],i[r],t))return!1;return!0},bR.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return this._intervals[e]},bR.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))},bR.prototype.findIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t]:void 0},bR.prototype.findDataForIntervalContainingDate=function(e){const t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0},bR.prototype.contains=function(e){return this.indexOf(e)>=0};const yR=new ZC;bR.prototype.indexOf=function(e){if(!Object(r["a"])(e))throw new a["a"]("date is required");const t=this._intervals;yR.start=e,yR.stop=e;let n=Li(t,yR,gR);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&ZC.contains(t[n-1],e)?n-1:~n)},bR.prototype.findInterval=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.start,n=e.stop,i=e.isStartIncluded,a=e.isStopIncluded,s=this._intervals;for(let o=0,c=s.length;o<c;o++){const e=s[o];if((!Object(r["a"])(t)||e.start.equals(t))&&(!Object(r["a"])(n)||e.stop.equals(n))&&(!Object(r["a"])(i)||e.isStartIncluded===i)&&(!Object(r["a"])(a)||e.isStopIncluded===a))return s[o]}},bR.prototype.addInterval=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("interval is required");if(e.isEmpty)return;const n=this._intervals;if(0===n.length||mo.greaterThan(e.start,n[n.length-1].stop))return n.push(e),void this._changedEvent.raiseEvent(this);let i,o=Li(n,e,gR);o<0?o=~o:o>0&&e.isStartIncluded&&n[o-1].isStartIncluded&&n[o-1].start.equals(e.start)?--o:o<n.length&&!e.isStartIncluded&&n[o].isStartIncluded&&n[o].start.equals(e.start)&&++o,o>0&&(i=mo.compare(n[o-1].stop,e.start),(i>0||0===i&&(n[o-1].isStopIncluded||e.isStartIncluded))&&((Object(r["a"])(t)?t(n[o-1].data,e.data):n[o-1].data===e.data)?(e=mo.greaterThan(e.stop,n[o-1].stop)?new ZC({start:n[o-1].start,stop:e.stop,isStartIncluded:n[o-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):new ZC({start:n[o-1].start,stop:n[o-1].stop,isStartIncluded:n[o-1].isStartIncluded,isStopIncluded:n[o-1].isStopIncluded||e.stop.equals(n[o-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(o-1,1),--o):(i=mo.compare(n[o-1].stop,e.stop),(i>0||0===i&&n[o-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(o,0,new ZC({start:e.stop,stop:n[o-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[o-1].isStopIncluded,data:n[o-1].data})),n[o-1]=new ZC({start:n[o-1].start,stop:e.start,isStartIncluded:n[o-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[o-1].data}))));while(o<n.length){if(i=mo.compare(e.stop,n[o].start),!(i>0||0===i&&(e.isStopIncluded||n[o].isStartIncluded)))break;if(Object(r["a"])(t)?t(n[o].data,e.data):n[o].data===e.data)e=new ZC({start:e.start,stop:mo.greaterThan(n[o].stop,e.stop)?n[o].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:mo.greaterThan(n[o].stop,e.stop)?n[o].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(o,1);else{if(n[o]=new ZC({start:e.stop,stop:n[o].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[o].isStopIncluded,data:n[o].data}),!n[o].isEmpty)break;n.splice(o,1)}}n.splice(o,0,e),this._changedEvent.raiseEvent(this)},bR.prototype.removeInterval=function(e){if(!Object(r["a"])(e))throw new a["a"]("interval is required");if(e.isEmpty)return!1;const t=this._intervals;let n=Li(t,e,gR);n<0&&(n=~n);let i=!1;n>0&&(mo.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(i=!0,(mo.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new ZC({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new ZC({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(i=!0,t.splice(n,0,new ZC({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);while(n<t.length&&mo.greaterThan(e.stop,t[n].stop))i=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(i=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new ZC({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new ZC({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(mo.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(i=!0,t[n]=new ZC({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),i&&this._changedEvent.raiseEvent(this),i},bR.prototype.intersect=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("other is required.");const i=new bR;let o=0,s=0;const c=this._intervals,l=e._intervals;while(o<c.length&&s<l.length){const e=c[o],a=l[s];if(mo.lessThan(e.stop,a.start))++o;else if(mo.lessThan(a.stop,e.start))++s;else{if(Object(r["a"])(n)||Object(r["a"])(t)&&t(e.data,a.data)||!Object(r["a"])(t)&&a.data===e.data){const o=ZC.intersect(e,a,new ZC,n);o.isEmpty||i.addInterval(o,t)}mo.lessThan(e.stop,a.stop)||e.stop.equals(a.stop)&&!e.isStopIncluded&&a.isStopIncluded?++o:++s}}return i},bR.fromJulianDateArray=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.julianDates))throw new a["a"]("options.iso8601Array is required.");Object(r["a"])(t)||(t=new bR);const n=e.julianDates,i=n.length,s=e.dataCallback,c=Object(o["a"])(e.isStartIncluded,!0),l=Object(o["a"])(e.isStopIncluded,!0),u=Object(o["a"])(e.leadingInterval,!1),h=Object(o["a"])(e.trailingInterval,!1);let d,f=0;u&&(++f,d=new ZC({start:oE.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!c}),d.data=Object(r["a"])(s)?s(d,t.length):t.length,t.addInterval(d));for(let o=0;o<i-1;++o){let e=n[o];const a=n[o+1];d=new ZC({start:e,stop:a,isStartIncluded:t.length!==f||c,isStopIncluded:o===i-2&&l}),d.data=Object(r["a"])(s)?s(d,t.length):t.length,t.addInterval(d),e=a}return h&&(d=new ZC({start:n[i-1],stop:oE.MAXIMUM_VALUE,isStartIncluded:!l,isStopIncluded:!0}),d.data=Object(r["a"])(s)?s(d,t.length):t.length,t.addInterval(d)),t};const vR=new Fi,OR=[0,31,28,31,30,31,30,31,31,30,31,30,31];function AR(e,t,n){Object(r["a"])(n)||(n=new mo),mo.toGregorianDate(e,vR);let i=vR.millisecond+t.millisecond,o=vR.second+t.second,a=vR.minute+t.minute,s=vR.hour+t.hour,c=vR.day+t.day,l=vR.month+t.month,u=vR.year+t.year;i>=1e3&&(o+=Math.floor(i/1e3),i%=1e3),o>=60&&(a+=Math.floor(o/60),o%=60),a>=60&&(s+=Math.floor(a/60),a%=60),s>=24&&(c+=Math.floor(s/24),s%=24),OR[2]=ki(u)?29:28;while(c>OR[l]||l>=13)c>OR[l]&&(c-=OR[l],++l),l>=13&&(--l,u+=Math.floor(l/12),l%=12,++l),OR[2]=ki(u)?29:28;return vR.millisecond=i,vR.second=o,vR.minute=a,vR.hour=s,vR.day=c,vR.month=l,vR.year=u,mo.fromGregorianDate(vR,n)}const wR=new mo,TR=/P(?:([\d.,]+)Y)?(?:([\d.,]+)M)?(?:([\d.,]+)W)?(?:([\d.,]+)D)?(?:T(?:([\d.,]+)H)?(?:([\d.,]+)M)?(?:([\d.,]+)S)?)?/;function CR(e,t){if(!Object(r["a"])(e)||0===e.length)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,"P"===e[0]){const n=e.match(TR);if(!Object(r["a"])(n))return!1;if(Object(r["a"])(n[1])&&(t.year=Number(n[1].replace(",","."))),Object(r["a"])(n[2])&&(t.month=Number(n[2].replace(",","."))),Object(r["a"])(n[3])&&(t.day=7*Number(n[3].replace(",","."))),Object(r["a"])(n[4])&&(t.day+=Number(n[4].replace(",","."))),Object(r["a"])(n[5])&&(t.hour=Number(n[5].replace(",","."))),Object(r["a"])(n[6])&&(t.minute=Number(n[6].replace(",","."))),Object(r["a"])(n[7])){const e=Number(n[7].replace(",","."));t.second=Math.floor(e),t.millisecond=e%1*1e3}}else"Z"!==e[e.length-1]&&(e+="Z"),mo.toGregorianDate(mo.fromIso8601(e,wR),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}const ER=new Fi;bR.fromIso8601=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.iso8601))throw new a["a"]("options.iso8601 is required.");const n=e.iso8601.split("/"),i=mo.fromIso8601(n[0]),o=mo.fromIso8601(n[1]),s=[];if(CR(n[2],ER)){let e=mo.clone(i);s.push(e);while(mo.compare(e,o)<0){e=AR(e,ER);const t=mo.compare(o,e)<=0;t&&mo.clone(o,e),s.push(e)}}else s.push(i,o);return bR.fromJulianDateArray({julianDates:s,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},bR.fromIso8601DateArray=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.iso8601Dates))throw new a["a"]("options.iso8601Dates is required.");return bR.fromJulianDateArray({julianDates:e.iso8601Dates.map((function(e){return mo.fromIso8601(e)})),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)},bR.fromIso8601DurationArray=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.epoch))throw new a["a"]("options.epoch is required.");if(!Object(r["a"])(e.iso8601Durations))throw new a["a"]("options.iso8601Durations is required.");const n=e.epoch,i=e.iso8601Durations,s=Object(o["a"])(e.relativeToPrevious,!1),c=[];let l,u;const h=i.length;for(let o=0;o<h;++o)(CR(i[o],ER)||0===o)&&(l=s&&Object(r["a"])(u)?AR(u,ER):AR(n,ER),c.push(l),u=l);return bR.fromJulianDateArray({julianDates:c,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};var xR=bR;const SR=new g(1,1,1),IR=g.ZERO,DR=Kr.IDENTITY;function PR(e,t,n){this.translation=g.clone(Object(o["a"])(e,IR)),this.rotation=Kr.clone(Object(o["a"])(t,DR)),this.scale=g.clone(Object(o["a"])(n,SR))}PR.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&g.equals(this.translation,e.translation)&&Kr.equals(this.rotation,e.rotation)&&g.equals(this.scale,e.scale)};var jR=PR,RR=n("3e44"),LR=n("2720");function MR(e,t){this.rectangle=e,this.maxLevel=t}function NR(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");const t=Et["a"].createIfNeeded(e.url);this._resource=t,this._errorEvent=new dn["a"],this._ready=!1,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0,lowestEncodedHeight:0,highestEncodedHeight:16777215};let n=e.credit;"string"===typeof n&&(n=new hn(n)),this._credit=n,this._tilingScheme=void 0,this._rectangles=[];const i=this;let c;const l=Object(o["a"])(e.ellipsoid,k.WGS84);function u(e){const t=e.getElementsByTagName("SRS")[0].textContent;if("EPSG:4326"!==t)return Promise.reject(new ye["a"](`SRS ${t} is not supported.`));i._tilingScheme=new qt({ellipsoid:l});const n=e.getElementsByTagName("TileFormat")[0];i._heightmapWidth=parseInt(n.getAttribute("width"),10),i._heightmapHeight=parseInt(n.getAttribute("height"),10),i._levelZeroMaximumGeometricError=gl.getEstimatedLevelZeroGeometricErrorForAHeightmap(l,Math.min(i._heightmapWidth,i._heightmapHeight),i._tilingScheme.getNumberOfXTilesAtLevel(0));const o=e.getElementsByTagName("DataExtent");for(let r=0;r<o.length;++r){const e=o[r],t=s["a"].toRadians(parseFloat(e.getAttribute("minx"))),n=s["a"].toRadians(parseFloat(e.getAttribute("miny"))),a=s["a"].toRadians(parseFloat(e.getAttribute("maxx"))),c=s["a"].toRadians(parseFloat(e.getAttribute("maxy"))),l=parseInt(e.getAttribute("maxlevel"),10);i._rectangles.push(new MR(new Fe(t,n,a,c),l))}return i._ready=!0,Promise.resolve(!0)}function h(e){const t=Object(o["a"])(Object(r["a"])(e)?e.message:void 0,`An error occurred while accessing ${i._resource.url}.`);return c=Zl.reportError(c,i,i._errorEvent,t),c.retry?d():Promise.reject(new ye["a"](t))}function d(){return i._resource.fetchXML().then(u).catch(h)}this._readyPromise=d()}Object.defineProperties(NR.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){if(!this.ready)throw new a["a"]("requestTileGeometry must not be called before ready returns true.");return this._tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),NR.prototype.requestTileGeometry=function(e,t,n,i){if(!this.ready)throw new a["a"]("requestTileGeometry must not be called before ready returns true.");const o=this._tilingScheme.getNumberOfYTilesAtLevel(n),s=this._resource.getDerivedResource({url:`${n}/${e}/${o-t-1}.tif`,queryParameters:{cesium:!0},request:i}),c=s.fetchImage({preferImageBitmap:!0});if(!Object(r["a"])(c))return;const l=this;return Promise.resolve(c).then((function(i){return new xl({buffer:Object(LR["a"])(i),width:l._heightmapWidth,height:l._heightmapHeight,childTileMask:FR(l,e,t,n),structure:l._terrainDataStructure})}))},NR.prototype.getLevelMaximumGeometricError=function(e){if(!this.ready)throw new a["a"]("requestTileGeometry must not be called before ready returns true.");return this._levelZeroMaximumGeometricError/(1<<e)};const BR=new Fe;function FR(e,t,n,i){const o=e._tilingScheme,a=e._rectangles,s=o.tileXYToRectangle(t,n,i);let c=0;for(let l=0;l<a.length&&15!==c;++l){const e=a[l];if(e.maxLevel<=i)continue;const u=e.rectangle,h=Fe.intersection(u,s,BR);Object(r["a"])(h)&&(zR(o,u,2*t,2*n,i+1)&&(c|=4),zR(o,u,2*t+1,2*n,i+1)&&(c|=8),zR(o,u,2*t,2*n+1,i+1)&&(c|=1),zR(o,u,2*t+1,2*n+1,i+1)&&(c|=2))}return c}function zR(e,t,n,i,o){const a=e.tileXYToRectangle(n,i,o);return Object(r["a"])(Fe.intersection(a,t,BR))}NR.prototype.getTileDataAvailable=function(e,t,n){},NR.prototype.loadTileDataAvailability=function(e,t,n){};var kR=NR;function UR(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._clock=void 0,this._element=void 0,this._clockSubscription=void 0,this._seekFunction=void 0,this._lastPlaybackRate=void 0,this.clock=e.clock,this.element=e.element,this.epoch=Object(o["a"])(e.epoch,oE.MINIMUM_VALUE),this.tolerance=Object(o["a"])(e.tolerance,1),this._seeking=!1,this._seekFunction=void 0,this._firstTickAfterSeek=!1}function VR(e){return function(){e._seeking=!1,e._firstTickAfterSeek=!0}}Object.defineProperties(UR.prototype,{clock:{get:function(){return this._clock},set:function(e){const t=this._clock;t!==e&&(Object(r["a"])(t)&&(this._clockSubscription(),this._clockSubscription=void 0),Object(r["a"])(e)&&(this._clockSubscription=e.onTick.addEventListener(UR.prototype._onTick,this)),this._clock=e)}},element:{get:function(){return this._element},set:function(e){const t=this._element;t!==e&&(Object(r["a"])(t)&&t.removeEventListener("seeked",this._seekFunction,!1),Object(r["a"])(e)&&(this._seeking=!1,this._seekFunction=VR(this),e.addEventListener("seeked",this._seekFunction,!1)),this._element=e,this._seeking=!1,this._firstTickAfterSeek=!1)}}}),UR.prototype.destroy=function(){return this.element=void 0,this.clock=void 0,Wc(this)},UR.prototype.isDestroyed=function(){return!1},UR.prototype._trySetPlaybackRate=function(e){if(this._lastPlaybackRate===e.multiplier)return;const t=this._element;try{t.playbackRate=e.multiplier}catch(n){t.playbackRate=0}this._lastPlaybackRate=e.multiplier},UR.prototype._onTick=function(e){const t=this._element;if(!Object(r["a"])(t)||t.readyState<2)return;const n=t.paused,i=e.shouldAnimate;if(i===n&&(i?t.play():t.pause()),this._seeking||this._firstTickAfterSeek)return void(this._firstTickAfterSeek=!1);this._trySetPlaybackRate(e);const a=e.currentTime,s=Object(o["a"])(this.epoch,oE.MINIMUM_VALUE);let c=mo.secondsDifference(a,s);const l=t.duration;let u;const h=t.currentTime;t.loop?(c%=l,c<0&&(c=l-c),u=c):u=c>l?l:c<0?0:c;const d=i?Object(o["a"])(this.tolerance,1):.001;Math.abs(u-h)>d&&(this._seeking=!0,t.currentTime=u)};var HR=UR;const GR={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033};var WR=Object.freeze(GR);const qR={};function YR(e,t){return s["a"].equalsEpsilon(e.latitude,t.latitude,s["a"].EPSILON10)&&s["a"].equalsEpsilon(e.longitude,t.longitude,s["a"].EPSILON10)}const XR=new I,KR=new I;function $R(e,t,n,i){t=zm(t,g.equalsEpsilon);const o=t.length;if(o<2)return;const a=Object(r["a"])(i),s=Object(r["a"])(n),c=new Array(o),l=new Array(o),u=new Array(o),h=t[0];c[0]=h;const d=e.cartesianToCartographic(h,XR);s&&(d.height=n[0]),l[0]=d.height,u[0]=a?i[0]:0;const f=l[0],p=u[0];let m=f===p,_=1;for(let r=1;r<o;++r){const o=t[r],h=e.cartesianToCartographic(o,KR);s&&(h.height=n[r]),m=m&&0===h.height,YR(d,h)?d.height<h.height&&(l[_-1]=h.height):(c[_]=o,l[_]=h.height,u[_]=a?i[r]:0,m=m&&l[_]===u[_],I.clone(h,d),++_)}return m||_<2?void 0:(c.length=_,l.length=_,u.length=_,{positions:c,topHeights:l,bottomHeights:u})}const JR=new Array(2),QR=new Array(2),ZR={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};qR.computePositions=function(e,t,n,i,o,a){const c=$R(e,t,n,i);if(!Object(r["a"])(c))return;t=c.positions,n=c.topHeights,i=c.bottomHeights;const l=t.length,u=l-2;let h,d;const f=s["a"].chordLength(o,e.maximumRadius),p=ZR;if(p.minDistance=f,p.ellipsoid=e,a){let e,o=0;for(e=0;e<l-1;e++)o+=ib.numberOfPoints(t[e],t[e+1],f)+1;h=new Float64Array(3*o),d=new Float64Array(3*o);const r=JR,a=QR;p.positions=r,p.height=a;let s=0;for(e=0;e<l-1;e++){r[0]=t[e],r[1]=t[e+1],a[0]=n[e],a[1]=n[e+1];const o=ib.generateArc(p);h.set(o,s),a[0]=i[e],a[1]=i[e+1],d.set(ib.generateArc(p),s),s+=o.length}}else p.positions=t,p.height=n,h=new Float64Array(ib.generateArc(p)),p.height=i,d=new Float64Array(ib.generateArc(p));return{bottomPositions:d,topPositions:h,numCorners:u}};var eL=qR;const tL=new g,nL=new g,iL=new g,oL=new g,rL=new g,aL=new g,sL=new g;function cL(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.maximumHeights,i=e.minimumHeights;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");if(Object(r["a"])(n)&&n.length!==t.length)throw new a["a"]("options.positions and options.maximumHeights must have the same length.");if(Object(r["a"])(i)&&i.length!==t.length)throw new a["a"]("options.positions and options.minimumHeights must have the same length.");const c=Object(o["a"])(e.vertexFormat,qu.DEFAULT),l=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),u=Object(o["a"])(e.ellipsoid,k.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._vertexFormat=qu.clone(c),this._granularity=l,this._ellipsoid=k.clone(u),this._workerName="createWallGeometry";let h=1+t.length*g.packedLength+2;Object(r["a"])(i)&&(h+=i.length),Object(r["a"])(n)&&(h+=n.length),this.packedLength=h+k.packedLength+qu.packedLength+1}cL.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._minimumHeights;if(c=Object(r["a"])(l)?l.length:0,t[n++]=c,Object(r["a"])(l))for(i=0;i<c;++i)t[n++]=l[i];const u=e._maximumHeights;if(c=Object(r["a"])(u)?u.length:0,t[n++]=c,Object(r["a"])(u))for(i=0;i<c;++i)t[n++]=u[i];return k.pack(e._ellipsoid,t,n),n+=k.packedLength,qu.pack(e._vertexFormat,t,n),n+=qu.packedLength,t[n]=e._granularity,t};const lL=k.clone(k.UNIT_SPHERE),uL=new qu,hL={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:lL,vertexFormat:uL,granularity:void 0};cL.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);let l,u;if(s=e[t++],s>0)for(l=new Array(s),i=0;i<s;++i)l[i]=e[t++];if(s=e[t++],s>0)for(u=new Array(s),i=0;i<s;++i)u[i]=e[t++];const h=k.unpack(e,t,lL);t+=k.packedLength;const d=qu.unpack(e,t,uL);t+=qu.packedLength;const f=e[t];return Object(r["a"])(n)?(n._positions=c,n._minimumHeights=l,n._maximumHeights=u,n._ellipsoid=k.clone(h,n._ellipsoid),n._vertexFormat=qu.clone(d,n._vertexFormat),n._granularity=f,n):(hL.positions=c,hL.minimumHeights=l,hL.maximumHeights=u,hL.granularity=f,new cL(hL))},cL.fromConstantHeights=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");let n,i;const s=e.minimumHeight,c=e.maximumHeight,l=Object(r["a"])(s),u=Object(r["a"])(c);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=s),u&&(i[t]=c)}const h={positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid,vertexFormat:e.vertexFormat};return new cL(h)},cL.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,i=e._maximumHeights,o=e._vertexFormat,a=e._granularity,c=e._ellipsoid,l=eL.computePositions(c,t,i,n,a,!0);if(!Object(r["a"])(l))return;const u=l.bottomPositions,h=l.topPositions,d=l.numCorners;let f=h.length,p=2*f;const m=o.position?new Float64Array(p):void 0,_=o.normal?new Float32Array(p):void 0,b=o.tangent?new Float32Array(p):void 0,y=o.bitangent?new Float32Array(p):void 0,v=o.st?new Float32Array(p/3*2):void 0;let O,A=0,w=0,T=0,C=0,E=0,x=sL,S=aL,I=rL,D=!0;f/=3;let P=0;const j=1/(f-d-1);for(O=0;O<f;++O){const e=3*O,t=g.fromArray(h,e,tL),n=g.fromArray(u,e,nL);if(o.position&&(m[A++]=n.x,m[A++]=n.y,m[A++]=n.z,m[A++]=t.x,m[A++]=t.y,m[A++]=t.z),o.st&&(v[E++]=P,v[E++]=0,v[E++]=P,v[E++]=1),o.normal||o.tangent||o.bitangent){let n=g.clone(g.ZERO,oL);const i=g.subtract(t,c.geodeticSurfaceNormal(t,nL),nL);if(O+1<f&&(n=g.fromArray(h,e+3,oL)),D){const e=g.subtract(n,t,iL),o=g.subtract(i,t,tL);x=g.normalize(g.cross(o,e,x),x),D=!1}g.equalsEpsilon(t,n,s["a"].EPSILON10)?D=!0:(P+=j,o.tangent&&(S=g.normalize(g.subtract(n,t,S),S)),o.bitangent&&(I=g.normalize(g.cross(x,S,I),I))),o.normal&&(_[w++]=x.x,_[w++]=x.y,_[w++]=x.z,_[w++]=x.x,_[w++]=x.y,_[w++]=x.z),o.tangent&&(b[C++]=S.x,b[C++]=S.y,b[C++]=S.z,b[C++]=S.x,b[C++]=S.y,b[C++]=S.z),o.bitangent&&(y[T++]=I.x,y[T++]=I.y,y[T++]=I.z,y[T++]=I.x,y[T++]=I.y,y[T++]=I.z)}}const R=new Vu;o.position&&(R.position=new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:m})),o.normal&&(R.normal=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:_})),o.tangent&&(R.tangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:b})),o.bitangent&&(R.bitangent=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:y})),o.st&&(R.st=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:v}));const L=p/3;p-=6*(d+1);const M=ll.createTypedArray(L,p);let N=0;for(O=0;O<L-2;O+=2){const e=O,t=O+2,n=g.fromArray(m,3*e,tL),i=g.fromArray(m,3*t,nL);if(g.equalsEpsilon(n,i,s["a"].EPSILON10))continue;const o=O+1,r=O+3;M[N++]=o,M[N++]=e,M[N++]=r,M[N++]=r,M[N++]=e,M[N++]=t}return new Fu({attributes:R,indices:M,primitiveType:Eu.TRIANGLES,boundingSphere:new Tt.fromVertices(m)})};var dL=cL;const fL=new g,pL=new g;function mL(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions,n=e.maximumHeights,i=e.minimumHeights;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");if(Object(r["a"])(n)&&n.length!==t.length)throw new a["a"]("options.positions and options.maximumHeights must have the same length.");if(Object(r["a"])(i)&&i.length!==t.length)throw new a["a"]("options.positions and options.minimumHeights must have the same length.");const c=Object(o["a"])(e.granularity,s["a"].RADIANS_PER_DEGREE),l=Object(o["a"])(e.ellipsoid,k.WGS84);this._positions=t,this._minimumHeights=i,this._maximumHeights=n,this._granularity=c,this._ellipsoid=k.clone(l),this._workerName="createWallOutlineGeometry";let u=1+t.length*g.packedLength+2;Object(r["a"])(i)&&(u+=i.length),Object(r["a"])(n)&&(u+=n.length),this.packedLength=u+k.packedLength+1}mL.pack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");let i;n=Object(o["a"])(n,0);const s=e._positions;let c=s.length;for(t[n++]=c,i=0;i<c;++i,n+=g.packedLength)g.pack(s[i],t,n);const l=e._minimumHeights;if(c=Object(r["a"])(l)?l.length:0,t[n++]=c,Object(r["a"])(l))for(i=0;i<c;++i)t[n++]=l[i];const u=e._maximumHeights;if(c=Object(r["a"])(u)?u.length:0,t[n++]=c,Object(r["a"])(u))for(i=0;i<c;++i)t[n++]=u[i];return k.pack(e._ellipsoid,t,n),n+=k.packedLength,t[n]=e._granularity,t};const _L=k.clone(k.UNIT_SPHERE),gL={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:_L,granularity:void 0};mL.unpack=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");let i;t=Object(o["a"])(t,0);let s=e[t++];const c=new Array(s);for(i=0;i<s;++i,t+=g.packedLength)c[i]=g.unpack(e,t);let l,u;if(s=e[t++],s>0)for(l=new Array(s),i=0;i<s;++i)l[i]=e[t++];if(s=e[t++],s>0)for(u=new Array(s),i=0;i<s;++i)u[i]=e[t++];const h=k.unpack(e,t,_L);t+=k.packedLength;const d=e[t];return Object(r["a"])(n)?(n._positions=c,n._minimumHeights=l,n._maximumHeights=u,n._ellipsoid=k.clone(h,n._ellipsoid),n._granularity=d,n):(gL.positions=c,gL.minimumHeights=l,gL.maximumHeights=u,gL.granularity=d,new mL(gL))},mL.fromConstantHeights=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.positions;if(!Object(r["a"])(t))throw new a["a"]("options.positions is required.");let n,i;const s=e.minimumHeight,c=e.maximumHeight,l=Object(r["a"])(s),u=Object(r["a"])(c);if(l||u){const e=t.length;n=l?new Array(e):void 0,i=u?new Array(e):void 0;for(let t=0;t<e;++t)l&&(n[t]=s),u&&(i[t]=c)}const h={positions:t,maximumHeights:i,minimumHeights:n,ellipsoid:e.ellipsoid};return new mL(h)},mL.createGeometry=function(e){const t=e._positions,n=e._minimumHeights,i=e._maximumHeights,o=e._granularity,a=e._ellipsoid,c=eL.computePositions(a,t,i,n,o,!1);if(!Object(r["a"])(c))return;const l=c.bottomPositions,u=c.topPositions;let h=u.length,d=2*h;const f=new Float64Array(d);let p,m=0;for(h/=3,p=0;p<h;++p){const e=3*p,t=g.fromArray(u,e,fL),n=g.fromArray(l,e,pL);f[m++]=n.x,f[m++]=n.y,f[m++]=n.z,f[m++]=t.x,f[m++]=t.y,f[m++]=t.z}const _=new Vu({position:new ku({componentDatatype:Ks.DOUBLE,componentsPerAttribute:3,values:f})}),b=d/3;d=2*b-4+b;const y=ll.createTypedArray(b,d);let v=0;for(p=0;p<b-2;p+=2){const e=p,t=p+2,n=g.fromArray(f,3*e,fL),i=g.fromArray(f,3*t,pL);if(g.equalsEpsilon(n,i,s["a"].EPSILON10))continue;const o=p+1,r=p+3;y[v++]=o,y[v++]=e,y[v++]=o,y[v++]=r,y[v++]=e,y[v++]=t}return y[v++]=b-2,y[v++]=b-1,new Fu({attributes:_,indices:y,primitiveType:Eu.LINES,boundingSphere:new Tt.fromVertices(f)})};var bL=mL;const yL={};function vL(e){const t=ll.createTypedArray(e,2*e),n=e;let i=0;for(let o=0;o<n;o+=3)t[i++]=o,t[i++]=o+1,t[i++]=o+1,t[i++]=o+2,t[i++]=o+2,t[i++]=o;return t}function OL(e,t){const n=t.length,i=ll.createTypedArray(e,2*n);let o=0;for(let r=0;r<n;r+=3){const e=t[r],n=t[r+1],a=t[r+2];i[o++]=e,i[o++]=n,i[o++]=n,i[o++]=a,i[o++]=a,i[o++]=e}return i}function AL(e){const t=e-2,n=2+4*t,i=ll.createTypedArray(e,n);let o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=r;return i}function wL(e,t){const n=t.length,i=n-2,o=2+4*i,r=ll.createTypedArray(e,o);let a=0;r[a++]=t[0],r[a++]=t[1];for(let s=0;s<i;s++){const e=t[s],n=t[s+1],i=t[s+2];r[a++]=n,r[a++]=i,r[a++]=i,r[a++]=e}return r}function TL(e){const t=e-2,n=2+4*t,i=ll.createTypedArray(e,n);let o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=0;return i}function CL(e,t){const n=t.length,i=n-2,o=2+4*i,r=ll.createTypedArray(e,o);let a=0;const s=t[0];r[a++]=s,r[a++]=t[1];for(let c=0;c<i;c++){const e=t[c+1],n=t[c+2];r[a++]=e,r[a++]=n,r[a++]=n,r[a++]=s}return r}yL.createWireframeIndices=function(e,t,n){const i=Object(r["a"])(n);return e===Eu.TRIANGLES?i?OL(t,n):vL(t):e===Eu.TRIANGLE_STRIP?i?wL(t,n):AL(t):e===Eu.TRIANGLE_FAN?i?CL(t,n):TL(t):void 0},yL.getWireframeIndicesCount=function(e,t){if(e===Eu.TRIANGLES)return 2*t;if(e===Eu.TRIANGLE_STRIP||e===Eu.TRIANGLE_FAN){const e=t-2;return 2+4*e}return t};var EL=yL,xL=n("de5b");function SL(e,t){if(!Object(r["a"])(e)||!Object(r["a"])(t))throw new a["a"]("identifier and message are required.");ab(e,t)}var IL=SL;let DL;function PL(e){IL("Cesium.cancelAnimationFrame","Cesium.cancelAnimationFrame was deprecated in CesiumJS 1.96 and will be removed in 1.99. Use the native cancelAnimationFrame method instead."),DL(e)}"undefined"!==typeof cancelAnimationFrame&&(DL=cancelAnimationFrame),function(){if(!Object(r["a"])(DL)&&"undefined"!==typeof window){const e=["webkit","moz","ms","o"];let t=0;const n=e.length;while(t<n&&!Object(r["a"])(DL))DL=window[`${e[t]}CancelAnimationFrame`],Object(r["a"])(DL)||(DL=window[`${e[t]}CancelRequestAnimationFrame`]),++t}Object(r["a"])(DL)||(DL=clearTimeout)}();var jL=PL,RL=n("dc1c");function LL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}var ML=LL;function NL(e){return e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),new dd({url:$C.fromAssetId(1),requestVertexNormals:Object(o["a"])(e.requestVertexNormals,!1),requestWaterMask:Object(o["a"])(e.requestWaterMask,!1)})}var BL=NL;const FL=1953029805,zL=2917034100;function kL(e,t){if(kL.passThroughDataForTesting)return t;i["a"].typeOf.object("key",e),i["a"].typeOf.object("data",t);const n=e.byteLength;if(0===n||n%4!==0)throw new ye["a"]("The length of key must be greater than 0 and a multiple of 4.");const o=new DataView(t),r=o.getUint32(0,!0);if(r===FL||r===zL)return t;const a=new DataView(e);let s=0;const c=t.byteLength,l=c-c%8,u=n;let h,d=8;while(s<l){d=(d+8)%24,h=d;while(s<l&&h<u)o.setUint32(s,o.getUint32(s,!0)^a.getUint32(h,!0),!0),o.setUint32(s+4,o.getUint32(s+4,!0)^a.getUint32(h+4,!0),!0),s+=8,h+=24}if(s<c){h>=u&&(d=(d+8)%24,h=d);while(s<c)o.setUint8(s,o.getUint8(s)^a.getUint8(h)),s++,h++}}kL.passThroughDataForTesting=!1;var UL=kL;const VL=32767,HL=new I,GL=new g;function WL(e,t,n,i,o){const r=e.length/3,a=e.subarray(0,r),c=e.subarray(r,2*r),l=e.subarray(2*r,3*r);pc.zigZagDeltaDecode(a,c,l);const u=new Float64Array(e.length);for(let h=0;h<r;++h){const e=a[h],r=c[h],d=l[h],f=s["a"].lerp(t.west,t.east,e/VL),p=s["a"].lerp(t.south,t.north,r/VL),m=s["a"].lerp(n,i,d/VL),_=I.fromRadians(f,p,m,HL),b=o.cartographicToCartesian(_,GL);g.pack(b,u,3*h)}return u}var qL=WL,YL=n("1a99"),XL=n("1f30");function KL(e){if(!Object(r["a"])(e))throw new a["a"]("uri is required.");const t=new Uc.a(e);t.normalize();let n=t.path();const i=n.lastIndexOf("/");return-1!==i&&(n=n.substr(i+1)),n}var $L=KL;function JL(e,t,n){const i=new Uint8ClampedArray(e.buffer),o=new ImageData(i,t,n),r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").putImageData(o,0,0),r}var QL=JL;function ZL(e,t){return t=Object(o["a"])(t,0),Nh(e,t,Math.min(4,e.length))}var eM=ZL,tM=n("96e8"),nM=n("166e");function iM(e){const t=e.uint8Array,n=e.format,a=e.request,s=Object(o["a"])(e.flipY,!1),c=Object(o["a"])(e.skipColorSpaceConversion,!1);i["a"].typeOf.object("uint8Array",t),i["a"].typeOf.string("format",n);const l=new Blob([t],{type:n});let u;return Et["a"].supportsImageBitmapOptions().then((function(e){if(e)return Promise.resolve(Et["a"].createImageBitmapFromBlob(l,{flipY:s,premultiplyAlpha:!1,skipColorSpaceConversion:c}));u=window.URL.createObjectURL(l);const t=new Et["a"]({url:u,request:a});return t.fetchImage({flipY:s,skipColorSpaceConversion:c})})).then((function(e){return Object(r["a"])(u)&&window.URL.revokeObjectURL(u),e})).catch((function(e){return Object(r["a"])(u)&&window.URL.revokeObjectURL(u),Promise.reject(e)}))}var oM=iM;let rM;function aM(e){let t;if(i["a"].defined("resourceOrUrlOrBuffer",e),e instanceof ArrayBuffer||ArrayBuffer.isView(e))t=Promise.resolve(e);else{const n=Et["a"].createIfNeeded(e);t=n.fetchArrayBuffer()}return t.then((function(e){return sE.transcode(e,rM)}))}aM.setKTX2SupportedFormats=function(e,t,n,i,o,r){rM={s3tc:e,pvrtc:t,astc:n,etc:i,etc1:o,bc7:r}};var sM=aM;const cM=[],lM=[];function uM(e,t,n,i,o,r){const a=o-i+1,s=r-o,c=cM,l=lM;let u,h;for(u=0;u<a;++u)c[u]=e[i+u];for(h=0;h<s;++h)l[h]=e[o+h+1];u=0,h=0;for(let d=i;d<=r;++d){const i=c[u],o=l[h];u<a&&(h>=s||t(i,o,n)<=0)?(e[d]=i,++u):h<s&&(e[d]=o,++h)}}function hM(e,t,n,i,o){if(i>=o)return;const r=Math.floor(.5*(i+o));hM(e,t,n,i,r),hM(e,t,n,r+1,o),uM(e,t,n,i,r,o)}function dM(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required.");if(!Object(r["a"])(t))throw new a["a"]("comparator is required.");const i=e.length,o=Math.ceil(.5*i);cM.length=o,lM.length=o,hM(e,t,n,0,i-1),cM.length=0,lM.length=0}var fM=dM,pM=n("0569"),mM=n("fa2f");const _M=new g;function gM(e,t,n,i){const o=Rd(e,t,n,i,_M);return!!Object(r["a"])(o)&&(o.x>0&&o.y>0&&o.z>0)}var bM=gM,yM=n("c0fd");let vM;function OM(e){return IL("Cesium.requestAnimationFrame","Cesium.requestAnimationFrame was deprecated in CesiumJS 1.96 and will be removed in 1.99. Use the native requestAnimationFrame method instead."),vM(e)}"undefined"!==typeof requestAnimationFrame&&(vM=requestAnimationFrame),function(){if(!Object(r["a"])(vM)&&"undefined"!==typeof window){const e=["webkit","moz","ms","o"];let t=0;const n=e.length;while(t<n&&!Object(r["a"])(vM))vM=window[`${e[t]}RequestAnimationFrame`],++t}if(!Object(r["a"])(vM)){const e=1e3/60;let t=0;vM=function(n){const i=bm(),o=Math.max(e-(i-t),0);return t=i+o,setTimeout((function(){n(t)}),o)}}}();var AM=OM;function wM(e){const t=document.createElement("canvas");t.width=s["a"].nextPowerOfTwo(e.width),t.height=s["a"].nextPowerOfTwo(e.height);const n=t.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}var TM=wM;function CM(e,t,n){return i["a"].typeOf.object("terrainProvider",e),i["a"].typeOf.number("level",t),i["a"].defined("positions",n),e.readyPromise.then((function(){return IM(e,t,n)}))}function EM(e,t){const n=e[0],i=n.terrainProvider.requestTileGeometry(n.x,n.y,n.level);if(!i)return!1;const o=i.then(PM(n)).catch(jM(n));return e.shift(),t.push(o),!0}function xM(e){return new Promise((function(t){setTimeout(t,e)}))}function SM(e,t){if(!e.length)return Promise.resolve();const n=EM(e,t);return n?SM(e,t):xM(100).then(()=>SM(e,t))}function IM(e,t,n){const i=e.tilingScheme;let o;const r=[],a={};for(o=0;o<n.length;++o){const s=i.positionToTileXY(n[o],t),c=s.toString();if(!a.hasOwnProperty(c)){const n={x:s.x,y:s.y,level:t,tilingScheme:i,terrainProvider:e,positions:[]};a[c]=n,r.push(n)}a[c].positions.push(n[o])}const s=[];return SM(r,s).then((function(){return Promise.all(s).then((function(){return n}))}))}function DM(e,t,n){const i=t.interpolateHeight(n,e.longitude,e.latitude);return void 0!==i&&(e.height=i,!0)}function PM(e){const t=e.positions,n=e.tilingScheme.tileXYToRectangle(e.x,e.y,e.level);return function(i){let o=!1;for(let e=0;e<t.length;++e){const r=t[e],a=DM(r,i,n);if(!a){o=!0;break}}return o?i.createMesh({tilingScheme:e.tilingScheme,x:e.x,y:e.y,level:e.level,throttle:!1}).then((function(){for(let e=0;e<t.length;++e){const o=t[e];DM(o,i,n)}})):Promise.resolve()}}function jM(e){const t=e.positions;return function(){for(let e=0;e<t.length;++e){const n=t[e];n.height=void 0}}}var RM=CM;const LM=new Gt;function MM(e,t){if(!Object(r["a"])(e))throw new a["a"]("terrainProvider is required.");if(!Object(r["a"])(t))throw new a["a"]("positions is required.");return e.readyPromise.then((function(){const n=[],i=[],o=e.availability;if(!Object(r["a"])(o))throw new a["a"]("sampleTerrainMostDetailed requires a terrain provider that has tile availability.");const s=[];for(let a=0;a<t.length;++a){const c=t[a],l=o.computeMaximumLevelAtPosition(c);if(i[a]=l,0===l){e.tilingScheme.positionToTileXY(c,1,LM);const t=e.loadTileDataAvailability(LM.x,LM.y,1);Object(r["a"])(t)&&s.push(t)}let u=n[l];Object(r["a"])(u)||(n[l]=u=[]),u.push(c)}return Promise.all(s).then((function(){return Promise.all(n.map((function(t,n){if(Object(r["a"])(t))return RM(e,n,t)})))})).then((function(){const n=[];for(let e=0;e<t.length;++e){const r=t[e],a=o.computeMaximumLevelAtPosition(r);a!==i[e]&&n.push(r)}if(n.length>0)return MM(e,n)})).then((function(){return t}))}))}var NM=MM;function BM(e,t){if(!Object(r["a"])(e))throw new a["a"]("array is required.");if(!Object(r["a"])(t)||t<1)throw new a["a"]("numberOfArrays must be greater than 0.");const n=[],i=e.length;let o=0;while(o<i){const r=Math.ceil((i-o)/t--);n.push(e.slice(o,o+r)),o+=r}return n}var FM=BM;function zM(e){switch(e){case Ys.FLOAT:return"float";case Ys.FLOAT_VEC2:return"vec2";case Ys.FLOAT_VEC3:return"vec3";case Ys.FLOAT_VEC4:return"vec4";case Ys.FLOAT_MAT2:return"mat2";case Ys.FLOAT_MAT3:return"mat3";case Ys.FLOAT_MAT4:return"mat4";case Ys.SAMPLER_2D:return"sampler2D";case Ys.BOOL:return"bool"}}var kM=zM;function UM(e,t,n){if("function"!==typeof t)throw new a["a"]("oldFunction is required to be a function.");if("function"!==typeof n)throw new a["a"]("oldFunction is required to be a function.");return function(){n.apply(e,arguments),t.apply(e,arguments)}}var VM=UM;function HM(e){this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new dn["a"],this.setValue(e)}Object.defineProperties(HM.prototype,{isConstant:{value:!0},definitionChanged:{get:function(){return this._definitionChanged}}}),HM.prototype.getValue=function(e,t){return this._hasClone?this._value.clone(t):this._value},HM.prototype.setValue=function(e){const t=this._value;if(t!==e){const n=Object(r["a"])(e),i=n&&"function"===typeof e.clone,o=n&&"function"===typeof e.equals,a=!o||!e.equals(t);a&&(this._hasClone=i,this._hasEquals=o,this._value=i?e.clone(this._value):e,this._definitionChanged.raiseEvent(this))}},HM.prototype.equals=function(e){return this===e||e instanceof HM&&(!this._hasEquals&&this._value===e._value||this._hasEquals&&this._value.equals(e._value))},HM.prototype.valueOf=function(){return this._value},HM.prototype.toString=function(){return String(this._value)};var GM=HM;function WM(e,t,n,i,o){return{configurable:i,get:function(){return this[t]},set:function(i){const a=this[t],s=this[n];Object(r["a"])(s)&&(s(),this[n]=void 0);const c=void 0!==i;!c||Object(r["a"])(i)&&Object(r["a"])(i.getValue)||!Object(r["a"])(o)||(i=o(i)),a!==i&&(this[t]=i,this._definitionChanged.raiseEvent(this,e,i,a)),Object(r["a"])(i)&&Object(r["a"])(i.definitionChanged)&&(this[n]=i.definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this,e,i,i)}),this))}}}function qM(e){return new GM(e)}function YM(e,t,n){return WM(e,`_${e.toString()}`,`_${e.toString()}Subscription`,Object(o["a"])(t,!1),Object(o["a"])(n,qM))}var XM=YM;function KM(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._image=void 0,this._imageSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._alignedAxis=void 0,this._alignedAxisSubscription=void 0,this._sizeInMeters=void 0,this._sizeInMetersSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._imageSubRegion=void 0,this._imageSubRegionSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(KM.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),image:XM("image"),scale:XM("scale"),pixelOffset:XM("pixelOffset"),eyeOffset:XM("eyeOffset"),horizontalOrigin:XM("horizontalOrigin"),verticalOrigin:XM("verticalOrigin"),heightReference:XM("heightReference"),color:XM("color"),rotation:XM("rotation"),alignedAxis:XM("alignedAxis"),sizeInMeters:XM("sizeInMeters"),width:XM("width"),height:XM("height"),scaleByDistance:XM("scaleByDistance"),translucencyByDistance:XM("translucencyByDistance"),pixelOffsetScaleByDistance:XM("pixelOffsetScaleByDistance"),imageSubRegion:XM("imageSubRegion"),distanceDisplayCondition:XM("distanceDisplayCondition"),disableDepthTestDistance:XM("disableDepthTestDistance")}),KM.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this._show,e.image=this._image,e.scale=this._scale,e.pixelOffset=this._pixelOffset,e.eyeOffset=this._eyeOffset,e.horizontalOrigin=this._horizontalOrigin,e.verticalOrigin=this._verticalOrigin,e.heightReference=this._heightReference,e.color=this._color,e.rotation=this._rotation,e.alignedAxis=this._alignedAxis,e.sizeInMeters=this._sizeInMeters,e.width=this._width,e.height=this._height,e.scaleByDistance=this._scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.pixelOffsetScaleByDistance=this._pixelOffsetScaleByDistance,e.imageSubRegion=this._imageSubRegion,e.distanceDisplayCondition=this._distanceDisplayCondition,e.disableDepthTestDistance=this._disableDepthTestDistance,e):new KM(this)},KM.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this._show,e.show),this.image=Object(o["a"])(this._image,e.image),this.scale=Object(o["a"])(this._scale,e.scale),this.pixelOffset=Object(o["a"])(this._pixelOffset,e.pixelOffset),this.eyeOffset=Object(o["a"])(this._eyeOffset,e.eyeOffset),this.horizontalOrigin=Object(o["a"])(this._horizontalOrigin,e.horizontalOrigin),this.verticalOrigin=Object(o["a"])(this._verticalOrigin,e.verticalOrigin),this.heightReference=Object(o["a"])(this._heightReference,e.heightReference),this.color=Object(o["a"])(this._color,e.color),this.rotation=Object(o["a"])(this._rotation,e.rotation),this.alignedAxis=Object(o["a"])(this._alignedAxis,e.alignedAxis),this.sizeInMeters=Object(o["a"])(this._sizeInMeters,e.sizeInMeters),this.width=Object(o["a"])(this._width,e.width),this.height=Object(o["a"])(this._height,e.height),this.scaleByDistance=Object(o["a"])(this._scaleByDistance,e.scaleByDistance),this.translucencyByDistance=Object(o["a"])(this._translucencyByDistance,e.translucencyByDistance),this.pixelOffsetScaleByDistance=Object(o["a"])(this._pixelOffsetScaleByDistance,e.pixelOffsetScaleByDistance),this.imageSubRegion=Object(o["a"])(this._imageSubRegion,e.imageSubRegion),this.distanceDisplayCondition=Object(o["a"])(this._distanceDisplayCondition,e.distanceDisplayCondition),this.disableDepthTestDistance=Object(o["a"])(this._disableDepthTestDistance,e.disableDepthTestDistance)};var $M=KM;const JM={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2};var QM=Object.freeze(JM);const ZM={CENTER:0,LEFT:1,RIGHT:-1};var eN=Object.freeze(ZM);const tN={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1};var nN=Object.freeze(tN);const iN={DONE:0,PENDING:1,FAILED:2};var oN=Object.freeze(iN);function rN(){a["a"].throwInstantiationError()}Object.defineProperties(rN.prototype,{isConstant:{get:a["a"].throwInstantiationError},definitionChanged:{get:a["a"].throwInstantiationError}}),rN.prototype.getValue=a["a"].throwInstantiationError,rN.prototype.equals=a["a"].throwInstantiationError,rN.equals=function(e,t){return e===t||Object(r["a"])(e)&&e.equals(t)},rN.arrayEquals=function(e,t){if(e===t)return!0;if(!Object(r["a"])(e)||!Object(r["a"])(t)||e.length!==t.length)return!1;const n=e.length;for(let i=0;i<n;i++)if(!rN.equals(e[i],t[i]))return!1;return!0},rN.isConstant=function(e){return!Object(r["a"])(e)||e.isConstant},rN.getValueOrUndefined=function(e,t,n){return Object(r["a"])(e)?e.getValue(t,n):void 0},rN.getValueOrDefault=function(e,t,n,i){return Object(r["a"])(e)?Object(o["a"])(e.getValue(t,i),n):n},rN.getValueOrClonedDefault=function(e,t,n,i){let o;return Object(r["a"])(e)&&(o=e.getValue(t,i)),Object(r["a"])(o)||(o=n.clone(o)),o};var aN=rN;const sN=Dm.WHITE,cN=g.ZERO,lN=QM.NONE,uN=Gt.ZERO,hN=1,dN=0,fN=g.ZERO,pN=eN.CENTER,mN=nN.CENTER,_N=!1,gN=new g,bN=new Dm,yN=new g,vN=new Gt,ON=new xE,AN=new xE,wN=new xE,TN=new Au,CN=new Sv;function EN(e){this.entity=e,this.billboard=void 0,this.textureValue=void 0}function xN(e,t){if(!Object(r["a"])(e))throw new a["a"]("entityCluster is required.");if(!Object(r["a"])(t))throw new a["a"]("entityCollection is required.");t.collectionChanged.addEventListener(xN.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new pu,this._onCollectionChanged(t,t.values,[],[])}function SN(e,t,n){Object(r["a"])(e)&&(e.billboard=void 0,n.removeBillboard(t))}xN.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.entity,s=a._billboard;let c,l,u=o.billboard,h=a.isShowing&&a.isAvailable(e)&&aN.getValueOrDefault(s._show,e,!0);if(h&&(l=aN.getValueOrUndefined(a._position,e,gN),c=aN.getValueOrUndefined(s._image,e),h=Object(r["a"])(l)&&Object(r["a"])(c)),!h){SN(o,a,n);continue}aN.isConstant(a._position)||(n._clusterDirty=!0),Object(r["a"])(u)||(u=n.getBillboard(a),u.id=a,u.image=void 0,o.billboard=u),u.show=h,Object(r["a"])(u.image)&&o.textureValue===c||(u.image=c,o.textureValue=c),u.position=l,u.color=aN.getValueOrDefault(s._color,e,sN,bN),u.eyeOffset=aN.getValueOrDefault(s._eyeOffset,e,cN,yN),u.heightReference=aN.getValueOrDefault(s._heightReference,e,lN),u.pixelOffset=aN.getValueOrDefault(s._pixelOffset,e,uN,vN),u.scale=aN.getValueOrDefault(s._scale,e,hN),u.rotation=aN.getValueOrDefault(s._rotation,e,dN),u.alignedAxis=aN.getValueOrDefault(s._alignedAxis,e,fN),u.horizontalOrigin=aN.getValueOrDefault(s._horizontalOrigin,e,pN),u.verticalOrigin=aN.getValueOrDefault(s._verticalOrigin,e,mN),u.width=aN.getValueOrUndefined(s._width,e),u.height=aN.getValueOrUndefined(s._height,e),u.scaleByDistance=aN.getValueOrUndefined(s._scaleByDistance,e,ON),u.translucencyByDistance=aN.getValueOrUndefined(s._translucencyByDistance,e,AN),u.pixelOffsetScaleByDistance=aN.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,wN),u.sizeInMeters=aN.getValueOrDefault(s._sizeInMeters,e,_N),u.distanceDisplayCondition=aN.getValueOrUndefined(s._distanceDisplayCondition,e,CN),u.disableDepthTestDistance=aN.getValueOrUndefined(s._disableDepthTestDistance,e);const d=aN.getValueOrUndefined(s._imageSubRegion,e,TN);Object(r["a"])(d)&&u.setImageSubRegion(u._imageId,d)}return!0},xN.prototype.getBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");if(!Object(r["a"])(t))throw new a["a"]("result is required.");const n=this._items.get(e.id);if(!Object(r["a"])(n)||!Object(r["a"])(n.billboard))return oN.FAILED;const i=n.billboard;if(i.heightReference===QM.NONE)t.center=g.clone(i.position,t.center);else{if(!Object(r["a"])(i._clampedPosition))return oN.PENDING;t.center=g.clone(i._clampedPosition,t.center)}return t.radius=0,oN.DONE},xN.prototype.isDestroyed=function(){return!1},xN.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(xN.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeBillboard(e[t]);return Wc(this)},xN.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._items,c=this._cluster;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._billboard)&&Object(r["a"])(a._position)&&s.set(a.id,new EN(a));for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._billboard)&&Object(r["a"])(a._position)?s.contains(a.id)||s.set(a.id,new EN(a)):(SN(s.get(a.id),a,c),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],SN(s.get(a.id),a,c),s.remove(a.id)};var IN=xN,DN="varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_bitangentEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",PN="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec3 tangent;\nattribute vec3 bitangent;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_bitangentEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates\n    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n",jN="varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",RN="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n",LN="varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",MN="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n";const NN={ADD:Ys.FUNC_ADD,SUBTRACT:Ys.FUNC_SUBTRACT,REVERSE_SUBTRACT:Ys.FUNC_REVERSE_SUBTRACT,MIN:Ys.MIN,MAX:Ys.MAX};var BN=Object.freeze(NN);const FN={ZERO:Ys.ZERO,ONE:Ys.ONE,SOURCE_COLOR:Ys.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:Ys.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:Ys.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:Ys.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:Ys.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:Ys.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:Ys.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:Ys.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:Ys.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:Ys.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:Ys.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:Ys.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:Ys.SRC_ALPHA_SATURATE};var zN=Object.freeze(FN);const kN={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.SOURCE_ALPHA,functionSourceAlpha:zN.ONE,functionDestinationRgb:zN.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:zN.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.ONE,functionSourceAlpha:zN.ONE,functionDestinationRgb:zN.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:zN.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.SOURCE_ALPHA,functionSourceAlpha:zN.ONE,functionDestinationRgb:zN.ONE,functionDestinationAlpha:zN.ONE})};var UN=Object.freeze(kN);const VN={FRONT:Ys.FRONT,BACK:Ys.BACK,FRONT_AND_BACK:Ys.FRONT_AND_BACK};var HN=Object.freeze(VN);function GN(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.material=e.material,this.translucent=Object(o["a"])(e.translucent,!0),this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=Object(o["a"])(e.closed,!1)}Object.defineProperties(GN.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}}),GN.prototype.getFragmentShaderSource=function(){const e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),Object(r["a"])(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join("\n")},GN.prototype.isTranslucent=function(){return Object(r["a"])(this.material)&&this.material.isTranslucent()||!Object(r["a"])(this.material)&&this.translucent},GN.prototype.getRenderState=function(){const e=this.isTranslucent(),t=Object(RL["a"])(this.renderState,!1);return e?(t.depthMask=!1,t.blending=UN.ALPHA_BLEND):t.depthMask=!0,t},GN.getDefaultRenderState=function(e,t,n){let i={depthTest:{enabled:!0}};return e&&(i.depthMask=!1,i.blending=UN.ALPHA_BLEND),t&&(i.cull={enabled:!0,face:HN.BACK}),Object(r["a"])(n)&&(i=Object(qE["a"])(n,i,!0)),i};var WN=GN;const qN={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(qN,{maximumCombinedTextureImageUnits:{get:function(){return qN._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return qN._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return qN._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return qN._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return qN._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return qN._maximumTextureSize}},maximumVaryingVectors:{get:function(){return qN._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return qN._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return qN._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return qN._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return qN._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return qN._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return qN._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return qN._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return qN._maximumViewportWidth}},maximumViewportHeight:{get:function(){return qN._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return qN._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return qN._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return qN._maximumColorAttachments}},maximumSamples:{get:function(){return qN._maximumSamples}},highpFloatSupported:{get:function(){return qN._highpFloatSupported}},highpIntSupported:{get:function(){return qN._highpIntSupported}}});var YN=qN;function XN(e,t,n,i,o,r,a,s,c,l,u){this._context=e,this._texture=t,this._textureTarget=n,this._targetFace=i,this._pixelDatatype=a,this._internalFormat=o,this._pixelFormat=r,this._size=s,this._preMultiplyAlpha=c,this._flipY=l,this._initialized=u}Object.defineProperties(XN.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}}),XN.prototype.copyFrom=function(e){i["a"].defined("options",e);const t=Object(o["a"])(e.xOffset,0),n=Object(o["a"])(e.yOffset,0);if(i["a"].defined("options.source",e.source),i["a"].typeOf.number.greaterThanOrEquals("xOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",n,0),t+e.source.width>this._size)throw new a["a"]("xOffset + options.source.width must be less than or equal to width.");if(n+e.source.height>this._size)throw new a["a"]("yOffset + options.source.height must be less than or equal to height.");const s=e.source,c=this._context._gl,l=this._textureTarget,u=this._targetFace;c.activeTexture(c.TEXTURE0),c.bindTexture(l,this._texture);const h=s.width,d=s.height;let f=s.arrayBufferView;const p=this._size,m=this._pixelFormat,_=this._internalFormat,g=this._pixelDatatype,b=this._preMultiplyAlpha,y=this._flipY,v=Object(o["a"])(e.skipColorSpaceConversion,!1);let O=4;Object(r["a"])(f)&&(O=fx.alignmentInBytes(m,g,h)),c.pixelStorei(c.UNPACK_ALIGNMENT,O),v?c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,c.NONE):c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,c.BROWSER_DEFAULT_WEBGL);let A=!1;if(!this._initialized){if(0===t&&0===n&&h===p&&d===p)Object(r["a"])(f)?(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),y&&(f=fx.flipY(f,m,g,p,p)),c.texImage2D(u,0,_,p,p,0,m,hx.toWebGLConstant(g,this._context),f)):(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,y),c.texImage2D(u,0,_,m,hx.toWebGLConstant(g,this._context),s)),A=!0;else{c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);const e=fx.createTypedArray(m,g,p,p);c.texImage2D(u,0,_,p,p,0,m,hx.toWebGLConstant(g,this._context),e)}this._initialized=!0}A||(Object(r["a"])(f)?(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),y&&(f=fx.flipY(f,m,g,h,d)),c.texSubImage2D(u,0,t,n,h,d,m,hx.toWebGLConstant(g,this._context),f)):(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,y),c.texSubImage2D(u,0,t,n,m,hx.toWebGLConstant(g,this._context),s))),c.bindTexture(l,null)},XN.prototype.copyFromFramebuffer=function(e,t,n,r,s,c){if(e=Object(o["a"])(e,0),t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),r=Object(o["a"])(r,0),s=Object(o["a"])(s,this._size),c=Object(o["a"])(c,this._size),i["a"].typeOf.number.greaterThanOrEquals("xOffset",e,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",n,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",r,0),e+s>this._size)throw new a["a"]("xOffset + source.width must be less than or equal to width.");if(t+c>this._size)throw new a["a"]("yOffset + source.height must be less than or equal to height.");if(this._pixelDatatype===hx.FLOAT)throw new a["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===hx.HALF_FLOAT)throw new a["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");const l=this._context._gl,u=this._textureTarget;l.activeTexture(l.TEXTURE0),l.bindTexture(u,this._texture),l.copyTexSubImage2D(this._targetFace,0,e,t,n,r,s,c),l.bindTexture(u,null),this._initialized=!0};var KN=XN;const $N={DONT_CARE:Ys.DONT_CARE,FASTEST:Ys.FASTEST,NICEST:Ys.NICEST,validate:function(e){return e===$N.DONT_CARE||e===$N.FASTEST||e===$N.NICEST}};var JN=Object.freeze($N);const QN={NEAREST:Ys.NEAREST,LINEAR:Ys.LINEAR,validate:function(e){return e===QN.NEAREST||e===QN.LINEAR}};var ZN=Object.freeze(QN);const eB={NEAREST:Ys.NEAREST,LINEAR:Ys.LINEAR,NEAREST_MIPMAP_NEAREST:Ys.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:Ys.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:Ys.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:Ys.LINEAR_MIPMAP_LINEAR,validate:function(e){return e===eB.NEAREST||e===eB.LINEAR||e===eB.NEAREST_MIPMAP_NEAREST||e===eB.LINEAR_MIPMAP_NEAREST||e===eB.NEAREST_MIPMAP_LINEAR||e===eB.LINEAR_MIPMAP_LINEAR}};var tB=Object.freeze(eB);const nB={CLAMP_TO_EDGE:Ys.CLAMP_TO_EDGE,REPEAT:Ys.REPEAT,MIRRORED_REPEAT:Ys.MIRRORED_REPEAT,validate:function(e){return e===nB.CLAMP_TO_EDGE||e===nB.REPEAT||e===nB.MIRRORED_REPEAT}};var iB=Object.freeze(nB);function oB(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.wrapS,iB.CLAMP_TO_EDGE),n=Object(o["a"])(e.wrapT,iB.CLAMP_TO_EDGE),s=Object(o["a"])(e.minificationFilter,tB.LINEAR),c=Object(o["a"])(e.magnificationFilter,ZN.LINEAR),l=Object(r["a"])(e.maximumAnisotropy)?e.maximumAnisotropy:1;if(!iB.validate(t))throw new a["a"]("Invalid sampler.wrapS.");if(!iB.validate(n))throw new a["a"]("Invalid sampler.wrapT.");if(!tB.validate(s))throw new a["a"]("Invalid sampler.minificationFilter.");if(!ZN.validate(c))throw new a["a"]("Invalid sampler.magnificationFilter.");i["a"].typeOf.number.greaterThanOrEquals("maximumAnisotropy",l,1),this._wrapS=t,this._wrapT=n,this._minificationFilter=s,this._magnificationFilter=c,this._maximumAnisotropy=l}Object.defineProperties(oB.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}}),oB.equals=function(e,t){return e===t||Object(r["a"])(e)&&Object(r["a"])(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy},oB.NEAREST=Object.freeze(new oB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.NEAREST,magnificationFilter:ZN.NEAREST}));var rB=oB;function aB(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context,n=e.source;let s,c;if(Object(r["a"])(n)){const e=[n.positiveX,n.negativeX,n.positiveY,n.negativeY,n.positiveZ,n.negativeZ];if(!e[0]||!e[1]||!e[2]||!e[3]||!e[4]||!e[5])throw new a["a"]("options.source requires positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ faces.");s=e[0].width,c=e[0].height;for(let t=1;t<6;++t)if(Number(e[t].width)!==s||Number(e[t].height)!==c)throw new a["a"]("Each face in options.source must have the same width and height.")}else s=e.width,c=e.height;const l=s,u=Object(o["a"])(e.pixelDatatype,hx.UNSIGNED_BYTE),h=Object(o["a"])(e.pixelFormat,fx.RGBA),d=fx.toInternalFormat(h,u,t);if(!Object(r["a"])(s)||!Object(r["a"])(c))throw new a["a"]("options requires a source field to create an initialized cube map or width and height fields to create a blank cube map.");if(s!==c)throw new a["a"]("Width must equal height.");if(l<=0)throw new a["a"]("Width and height must be greater than zero.");if(l>YN.maximumCubeMapSize)throw new a["a"](`Width and height must be less than or equal to the maximum cube map size (${YN.maximumCubeMapSize}).  Check maximumCubeMapSize.`);if(!fx.validate(h))throw new a["a"]("Invalid options.pixelFormat.");if(fx.isDepthFormat(h))throw new a["a"]("options.pixelFormat cannot be DEPTH_COMPONENT or DEPTH_STENCIL.");if(!hx.validate(u))throw new a["a"]("Invalid options.pixelDatatype.");if(u===hx.FLOAT&&!t.floatingPointTexture)throw new a["a"]("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.");if(u===hx.HALF_FLOAT&&!t.halfFloatingPointTexture)throw new a["a"]("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension.");const f=6*fx.textureSizeInBytes(h,u,l,l),p=e.preMultiplyAlpha||h===fx.RGB||h===fx.LUMINANCE,m=Object(o["a"])(e.flipY,!0),_=Object(o["a"])(e.skipColorSpaceConversion,!1),g=t._gl,b=g.TEXTURE_CUBE_MAP,y=g.createTexture();function v(e,n,i,o,a){let c=n.arrayBufferView;Object(r["a"])(c)||(c=n.bufferView);let f=4;Object(r["a"])(c)&&(f=fx.alignmentInBytes(h,u,s)),g.pixelStorei(g.UNPACK_ALIGNMENT,f),a?g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.NONE):g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.BROWSER_DEFAULT_WEBGL),Object(r["a"])(c)?(g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1),o&&(c=fx.flipY(c,h,u,l,l)),g.texImage2D(e,0,d,l,l,0,h,hx.toWebGLConstant(u,t),c)):(g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,o),g.texImage2D(e,0,d,h,hx.toWebGLConstant(u,t),n))}g.activeTexture(g.TEXTURE0),g.bindTexture(b,y),Object(r["a"])(n)?(v(g.TEXTURE_CUBE_MAP_POSITIVE_X,n.positiveX,p,m,_),v(g.TEXTURE_CUBE_MAP_NEGATIVE_X,n.negativeX,p,m,_),v(g.TEXTURE_CUBE_MAP_POSITIVE_Y,n.positiveY,p,m,_),v(g.TEXTURE_CUBE_MAP_NEGATIVE_Y,n.negativeY,p,m,_),v(g.TEXTURE_CUBE_MAP_POSITIVE_Z,n.positiveZ,p,m,_),v(g.TEXTURE_CUBE_MAP_NEGATIVE_Z,n.negativeZ,p,m,_)):(g.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null),g.texImage2D(g.TEXTURE_CUBE_MAP_NEGATIVE_X,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null),g.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_Y,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null),g.texImage2D(g.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null),g.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_Z,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null),g.texImage2D(g.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,d,l,l,0,h,hx.toWebGLConstant(u,t),null)),g.bindTexture(b,null),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=b,this._texture=y,this._pixelFormat=h,this._pixelDatatype=u,this._size=l,this._hasMipmap=!1,this._sizeInBytes=f,this._preMultiplyAlpha=p,this._flipY=m,this._sampler=void 0;const O=Object(r["a"])(n);this._positiveX=new KN(t,y,b,g.TEXTURE_CUBE_MAP_POSITIVE_X,d,h,u,l,p,m,O),this._negativeX=new KN(t,y,b,g.TEXTURE_CUBE_MAP_NEGATIVE_X,d,h,u,l,p,m,O),this._positiveY=new KN(t,y,b,g.TEXTURE_CUBE_MAP_POSITIVE_Y,d,h,u,l,p,m,O),this._negativeY=new KN(t,y,b,g.TEXTURE_CUBE_MAP_NEGATIVE_Y,d,h,u,l,p,m,O),this._positiveZ=new KN(t,y,b,g.TEXTURE_CUBE_MAP_POSITIVE_Z,d,h,u,l,p,m,O),this._negativeZ=new KN(t,y,b,g.TEXTURE_CUBE_MAP_NEGATIVE_Z,d,h,u,l,p,m,O),this.sampler=Object(r["a"])(e.sampler)?e.sampler:new rB}Object.defineProperties(aB.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,n=e.magnificationFilter;const i=t===tB.NEAREST_MIPMAP_NEAREST||t===tB.NEAREST_MIPMAP_LINEAR||t===tB.LINEAR_MIPMAP_NEAREST||t===tB.LINEAR_MIPMAP_LINEAR,o=this._context,a=this._pixelDatatype;(a===hx.FLOAT&&!o.textureFloatLinear||a===hx.HALF_FLOAT&&!o.textureHalfFloatLinear)&&(t=i?tB.NEAREST_MIPMAP_NEAREST:tB.NEAREST,n=ZN.NEAREST);const s=o._gl,c=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(c,this._texture),s.texParameteri(c,s.TEXTURE_MIN_FILTER,t),s.texParameteri(c,s.TEXTURE_MAG_FILTER,n),s.texParameteri(c,s.TEXTURE_WRAP_S,e.wrapS),s.texParameteri(c,s.TEXTURE_WRAP_T,e.wrapT),Object(r["a"])(this._textureFilterAnisotropic)&&s.texParameteri(c,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),s.bindTexture(c,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}}),aB.prototype.generateMipmap=function(e){if(e=Object(o["a"])(e,JN.DONT_CARE),this._size>1&&!s["a"].isPowerOfTwo(this._size))throw new a["a"]("width and height must be a power of two to call generateMipmap().");if(!JN.validate(e))throw new a["a"]("hint is invalid.");this._hasMipmap=!0;const t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)},aB.prototype.isDestroyed=function(){return!1},aB.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),this._positiveX=Wc(this._positiveX),this._negativeX=Wc(this._negativeX),this._positiveY=Wc(this._positiveY),this._negativeY=Wc(this._negativeY),this._positiveZ=Wc(this._positiveZ),this._negativeZ=Wc(this._negativeZ),Wc(this)};var sB=aB;function cB(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context;let n=e.width,s=e.height;const c=e.source;Object(r["a"])(c)&&(Object(r["a"])(n)||(n=Object(o["a"])(c.videoWidth,c.width)),Object(r["a"])(s)||(s=Object(o["a"])(c.videoHeight,c.height)));const l=Object(o["a"])(e.pixelFormat,fx.RGBA),u=Object(o["a"])(e.pixelDatatype,hx.UNSIGNED_BYTE),h=fx.toInternalFormat(l,u,t),d=fx.isCompressedFormat(h);if(!Object(r["a"])(n)||!Object(r["a"])(s))throw new a["a"]("options requires a source field to create an initialized texture or width and height fields to create a blank texture.");if(i["a"].typeOf.number.greaterThan("width",n,0),n>YN.maximumTextureSize)throw new a["a"](`Width must be less than or equal to the maximum texture size (${YN.maximumTextureSize}).  Check maximumTextureSize.`);if(i["a"].typeOf.number.greaterThan("height",s,0),s>YN.maximumTextureSize)throw new a["a"](`Height must be less than or equal to the maximum texture size (${YN.maximumTextureSize}).  Check maximumTextureSize.`);if(!fx.validate(l))throw new a["a"]("Invalid options.pixelFormat.");if(!d&&!hx.validate(u))throw new a["a"]("Invalid options.pixelDatatype.");if(l===fx.DEPTH_COMPONENT&&u!==hx.UNSIGNED_SHORT&&u!==hx.UNSIGNED_INT)throw new a["a"]("When options.pixelFormat is DEPTH_COMPONENT, options.pixelDatatype must be UNSIGNED_SHORT or UNSIGNED_INT.");if(l===fx.DEPTH_STENCIL&&u!==hx.UNSIGNED_INT_24_8)throw new a["a"]("When options.pixelFormat is DEPTH_STENCIL, options.pixelDatatype must be UNSIGNED_INT_24_8.");if(u===hx.FLOAT&&!t.floatingPointTexture)throw new a["a"]("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.");if(u===hx.HALF_FLOAT&&!t.halfFloatingPointTexture)throw new a["a"]("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension. Check context.halfFloatingPointTexture.");if(fx.isDepthFormat(l)){if(Object(r["a"])(c))throw new a["a"]("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, source cannot be provided.");if(!t.depthTexture)throw new a["a"]("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.")}if(d){if(!Object(r["a"])(c)||!Object(r["a"])(c.arrayBufferView))throw new a["a"]("When options.pixelFormat is compressed, options.source.arrayBufferView must be defined.");if(fx.isDXTFormat(h)&&!t.s3tc)throw new a["a"]("When options.pixelFormat is S3TC compressed, this WebGL implementation must support the WEBGL_compressed_texture_s3tc extension. Check context.s3tc.");if(fx.isPVRTCFormat(h)&&!t.pvrtc)throw new a["a"]("When options.pixelFormat is PVRTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_pvrtc extension. Check context.pvrtc.");if(fx.isASTCFormat(h)&&!t.astc)throw new a["a"]("When options.pixelFormat is ASTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_astc extension. Check context.astc.");if(fx.isETC2Format(h)&&!t.etc)throw new a["a"]("When options.pixelFormat is ETC2 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc extension. Check context.etc.");if(fx.isETC1Format(h)&&!t.etc1)throw new a["a"]("When options.pixelFormat is ETC1 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc1 extension. Check context.etc1.");if(fx.isBC7Format(h)&&!t.bc7)throw new a["a"]("When options.pixelFormat is BC7 compressed, this WebGL implementation must support the EXT_texture_compression_bptc extension. Check context.bc7.");if(fx.compressedTextureSizeInBytes(h,n,s)!==c.arrayBufferView.byteLength)throw new a["a"]("The byte length of the array buffer is invalid for the compressed texture with the given width and height.")}const f=e.preMultiplyAlpha||l===fx.RGB||l===fx.LUMINANCE,p=Object(o["a"])(e.flipY,!0),m=Object(o["a"])(e.skipColorSpaceConversion,!1);let _=!0;const g=t._gl,b=g.TEXTURE_2D,y=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(b,y);let v,O=4;if(Object(r["a"])(c)&&Object(r["a"])(c.arrayBufferView)&&!d&&(O=fx.alignmentInBytes(l,u,n)),g.pixelStorei(g.UNPACK_ALIGNMENT,O),m?g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.NONE):g.pixelStorei(g.UNPACK_COLORSPACE_CONVERSION_WEBGL,g.BROWSER_DEFAULT_WEBGL),Object(r["a"])(c))if(Object(r["a"])(c.arrayBufferView)){g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);let e,i,o,a=c.arrayBufferView;if(d){if(g.compressedTexImage2D(b,0,h,n,s,0,a),Object(r["a"])(c.mipLevels))for(i=n,o=s,e=0;e<c.mipLevels.length;++e)i=0|Math.floor(i/2),i<1&&(i=1),o=0|Math.floor(o/2),o<1&&(o=1),g.compressedTexImage2D(b,e+1,h,i,o,0,c.mipLevels[e])}else if(p&&(a=fx.flipY(a,l,u,n,s)),g.texImage2D(b,0,h,n,s,0,l,hx.toWebGLConstant(u,t),a),Object(r["a"])(c.mipLevels))for(i=n,o=s,e=0;e<c.mipLevels.length;++e)i=0|Math.floor(i/2),i<1&&(i=1),o=0|Math.floor(o/2),o<1&&(o=1),g.texImage2D(b,e+1,h,i,o,0,l,hx.toWebGLConstant(u,t),c.mipLevels[e])}else Object(r["a"])(c.framebuffer)?(g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1),c.framebuffer!==t.defaultFramebuffer&&c.framebuffer._bind(),g.copyTexImage2D(b,0,h,c.xOffset,c.yOffset,n,s,0),c.framebuffer!==t.defaultFramebuffer&&c.framebuffer._unBind()):(g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,p),g.texImage2D(b,0,h,l,hx.toWebGLConstant(u,t),c));else g.texImage2D(b,0,h,n,s,0,l,hx.toWebGLConstant(u,t),null),_=!1;g.bindTexture(b,null),v=d?fx.compressedTextureSizeInBytes(l,n,s):fx.textureSizeInBytes(l,u,n,s),this._id=ML(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=b,this._texture=y,this._internalFormat=h,this._pixelFormat=l,this._pixelDatatype=u,this._width=n,this._height=s,this._dimensions=new Gt(n,s),this._hasMipmap=!1,this._sizeInBytes=v,this._preMultiplyAlpha=f,this._flipY=p,this._initialized=_,this._sampler=void 0,this.sampler=Object(r["a"])(e.sampler)?e.sampler:new rB}cB.create=function(e){return new cB(e)},cB.fromFramebuffer=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context,n=t._gl,s=Object(o["a"])(e.pixelFormat,fx.RGB),c=Object(o["a"])(e.framebufferXOffset,0),l=Object(o["a"])(e.framebufferYOffset,0),u=Object(o["a"])(e.width,n.drawingBufferWidth),h=Object(o["a"])(e.height,n.drawingBufferHeight),d=e.framebuffer;if(!fx.validate(s))throw new a["a"]("Invalid pixelFormat.");if(fx.isDepthFormat(s)||fx.isCompressedFormat(s))throw new a["a"]("pixelFormat cannot be DEPTH_COMPONENT, DEPTH_STENCIL or a compressed format.");if(i["a"].defined("options.context",e.context),i["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",c,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",l,0),c+u>n.drawingBufferWidth)throw new a["a"]("framebufferXOffset + width must be less than or equal to drawingBufferWidth");if(l+h>n.drawingBufferHeight)throw new a["a"]("framebufferYOffset + height must be less than or equal to drawingBufferHeight.");const f=new cB({context:t,width:u,height:h,pixelFormat:s,source:{framebuffer:Object(r["a"])(d)?d:t.defaultFramebuffer,xOffset:c,yOffset:l,width:u,height:h}});return f},Object.defineProperties(cB.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,n=e.magnificationFilter;const i=this._context,o=this._pixelFormat,a=this._pixelDatatype,s=t===tB.NEAREST_MIPMAP_NEAREST||t===tB.NEAREST_MIPMAP_LINEAR||t===tB.LINEAR_MIPMAP_NEAREST||t===tB.LINEAR_MIPMAP_LINEAR;(a===hx.FLOAT&&!i.textureFloatLinear||a===hx.HALF_FLOAT&&!i.textureHalfFloatLinear)&&(t=s?tB.NEAREST_MIPMAP_NEAREST:tB.NEAREST,n=ZN.NEAREST),i.webgl2&&fx.isDepthFormat(o)&&(t=tB.NEAREST,n=ZN.NEAREST);const c=i._gl,l=this._textureTarget;c.activeTexture(c.TEXTURE0),c.bindTexture(l,this._texture),c.texParameteri(l,c.TEXTURE_MIN_FILTER,t),c.texParameteri(l,c.TEXTURE_MAG_FILTER,n),c.texParameteri(l,c.TEXTURE_WRAP_S,e.wrapS),c.texParameteri(l,c.TEXTURE_WRAP_T,e.wrapT),Object(r["a"])(this._textureFilterAnisotropic)&&c.texParameteri(l,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),c.bindTexture(l,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),cB.prototype.copyFrom=function(e){i["a"].defined("options",e);const t=Object(o["a"])(e.xOffset,0),n=Object(o["a"])(e.yOffset,0);if(i["a"].defined("options.source",e.source),fx.isDepthFormat(this._pixelFormat))throw new a["a"]("Cannot call copyFrom when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(fx.isCompressedFormat(this._pixelFormat))throw new a["a"]("Cannot call copyFrom with a compressed texture pixel format.");i["a"].typeOf.number.greaterThanOrEquals("xOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",n,0),i["a"].typeOf.number.lessThanOrEquals("xOffset + options.source.width",t+e.source.width,this._width),i["a"].typeOf.number.lessThanOrEquals("yOffset + options.source.height",n+e.source.height,this._height);const s=e.source,c=this._context,l=c._gl,u=this._textureTarget;l.activeTexture(l.TEXTURE0),l.bindTexture(u,this._texture);const h=s.width,d=s.height;let f=s.arrayBufferView;const p=this._width,m=this._height,_=this._internalFormat,g=this._pixelFormat,b=this._pixelDatatype,y=this._preMultiplyAlpha,v=this._flipY,O=Object(o["a"])(e.skipColorSpaceConversion,!1);let A=4;Object(r["a"])(f)&&(A=fx.alignmentInBytes(g,b,h)),l.pixelStorei(l.UNPACK_ALIGNMENT,A),O?l.pixelStorei(l.UNPACK_COLORSPACE_CONVERSION_WEBGL,l.NONE):l.pixelStorei(l.UNPACK_COLORSPACE_CONVERSION_WEBGL,l.BROWSER_DEFAULT_WEBGL);let w=!1;if(!this._initialized){if(0===t&&0===n&&h===p&&d===m)Object(r["a"])(f)?(l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1),v&&(f=fx.flipY(f,g,b,p,m)),l.texImage2D(u,0,_,p,m,0,g,hx.toWebGLConstant(b,c),f)):(l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,v),l.texImage2D(u,0,_,g,hx.toWebGLConstant(b,c),s)),w=!0;else{l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);const e=fx.createTypedArray(g,b,p,m);l.texImage2D(u,0,_,p,m,0,g,hx.toWebGLConstant(b,c),e)}this._initialized=!0}w||(Object(r["a"])(f)?(l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1),v&&(f=fx.flipY(f,g,b,h,d)),l.texSubImage2D(u,0,t,n,h,d,g,hx.toWebGLConstant(b,c),f)):(l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,v),l.texSubImage2D(u,0,t,n,g,hx.toWebGLConstant(b,c),s))),l.bindTexture(u,null)},cB.prototype.copyFromFramebuffer=function(e,t,n,r,s,c){if(e=Object(o["a"])(e,0),t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),r=Object(o["a"])(r,0),s=Object(o["a"])(s,this._width),c=Object(o["a"])(c,this._height),fx.isDepthFormat(this._pixelFormat))throw new a["a"]("Cannot call copyFromFramebuffer when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(this._pixelDatatype===hx.FLOAT)throw new a["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===hx.HALF_FLOAT)throw new a["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");if(fx.isCompressedFormat(this._pixelFormat))throw new a["a"]("Cannot call copyFrom with a compressed texture pixel format.");i["a"].typeOf.number.greaterThanOrEquals("xOffset",e,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",n,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",r,0),i["a"].typeOf.number.lessThanOrEquals("xOffset + width",e+s,this._width),i["a"].typeOf.number.lessThanOrEquals("yOffset + height",t+c,this._height);const l=this._context._gl,u=this._textureTarget;l.activeTexture(l.TEXTURE0),l.bindTexture(u,this._texture),l.copyTexSubImage2D(u,0,e,t,n,r,s,c),l.bindTexture(u,null),this._initialized=!0},cB.prototype.generateMipmap=function(e){if(e=Object(o["a"])(e,JN.DONT_CARE),fx.isDepthFormat(this._pixelFormat))throw new a["a"]("Cannot call generateMipmap when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(fx.isCompressedFormat(this._pixelFormat))throw new a["a"]("Cannot call generateMipmap with a compressed pixel format.");if(!this._context.webgl2){if(this._width>1&&!s["a"].isPowerOfTwo(this._width))throw new a["a"]("width must be a power of two to call generateMipmap() in a WebGL1 context.");if(this._height>1&&!s["a"].isPowerOfTwo(this._height))throw new a["a"]("height must be a power of two to call generateMipmap() in a WebGL1 context.")}if(!JN.validate(e))throw new a["a"]("hint is invalid.");this._hasMipmap=!0;const t=this._context._gl,n=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(n,this._texture),t.generateMipmap(n),t.bindTexture(n,null)},cB.prototype.isDestroyed=function(){return!1},cB.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),Wc(this)};var lB=cB,uB="uniform sampler2D image;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec4 rampColor = texture2D(image, vec2(materialInput.aspect / (2.0 * czm_pi), 0.5));\n    rampColor = czm_gammaCorrect(rampColor);\n    material.diffuse = rampColor.rgb;\n    material.alpha = rampColor.a;\n    return material;\n}\n",hB="uniform sampler2D image;\nuniform float strength;\nuniform vec2 repeat;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n\n    vec2 centerPixel = fract(repeat * st);\n    float centerBump = texture2D(image, centerPixel).channel;\n\n    float imageWidth = float(imageDimensions.x);\n    vec2 rightPixel = fract(repeat * (st + vec2(1.0 / imageWidth, 0.0)));\n    float rightBump = texture2D(image, rightPixel).channel;\n\n    float imageHeight = float(imageDimensions.y);\n    vec2 leftPixel = fract(repeat * (st + vec2(0.0, 1.0 / imageHeight)));\n    float topBump = texture2D(image, leftPixel).channel;\n\n    vec3 normalTangentSpace = normalize(vec3(centerBump - rightBump, centerBump - topBump, clamp(1.0 - strength, 0.1, 1.0)));\n    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;\n\n    material.normal = normalEC;\n    material.diffuse = vec3(0.01);\n\n    return material;\n}\n",dB="uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform vec2 repeat;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n\n    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\n    float b = mod(floor(repeat.s * st.s) + floor(repeat.t * st.t), 2.0);  // 0.0 or 1.0\n\n    // Find the distance from the closest separator (region between two colors)\n    float scaledWidth = fract(repeat.s * st.s);\n    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));\n    float scaledHeight = fract(repeat.t * st.t);\n    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));\n    float value = min(scaledWidth, scaledHeight);\n\n    vec4 currentColor = mix(lightColor, darkColor, b);\n    vec4 color = czm_antialias(lightColor, darkColor, currentColor, value, 0.03);\n\n    color = czm_gammaCorrect(color);\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n\n    return material;\n}\n",fB="uniform vec4 lightColor;\nuniform vec4 darkColor;\nuniform vec2 repeat;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights\n    float b = smoothstep(0.3, 0.32, length(fract(repeat * materialInput.st) - 0.5));  // 0.0 or 1.0\n\n    vec4 color = mix(lightColor, darkColor, b);\n    color = czm_gammaCorrect(color);\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n\n    return material;\n}\n",pB="uniform sampler2D heights;\nuniform sampler2D colors;\n\n// This material expects heights to be sorted from lowest to highest.\n\nfloat getHeight(int idx, float invTexSize)\n{\n    vec2 uv = vec2((float(idx) + 0.5) * invTexSize, 0.5);\n#ifdef OES_texture_float\n    return texture2D(heights, uv).x;\n#else\n    return czm_unpackFloat(texture2D(heights, uv));\n#endif\n}\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    float height = materialInput.height;\n    float invTexSize = 1.0 / float(heightsDimensions.x);\n\n    float minHeight = getHeight(0, invTexSize);\n    float maxHeight = getHeight(heightsDimensions.x - 1, invTexSize);\n\n    // early-out when outside the height range\n    if (height < minHeight || height > maxHeight) {\n        material.diffuse = vec3(0.0);\n        material.alpha = 0.0;\n        return material;\n    }\n\n    // Binary search to find heights above and below.\n    int idxBelow = 0;\n    int idxAbove = heightsDimensions.x;\n    float heightBelow = minHeight;\n    float heightAbove = maxHeight;\n\n    // while loop not allowed, so use for loop with max iterations.\n    // maxIterations of 16 supports a texture size up to 65536 (2^16).\n    const int maxIterations = 16;\n    for (int i = 0; i < maxIterations; i++) {\n        if (idxBelow >= idxAbove - 1) {\n            break;\n        }\n\n        int idxMid = (idxBelow + idxAbove) / 2;\n        float heightTex = getHeight(idxMid, invTexSize);\n\n        if (height > heightTex) {\n            idxBelow = idxMid;\n            heightBelow = heightTex;\n        } else {\n            idxAbove = idxMid;\n            heightAbove = heightTex;\n        }\n    }\n\n    float lerper = heightBelow == heightAbove ? 1.0 : (height - heightBelow) / (heightAbove - heightBelow);\n    vec2 colorUv = vec2(invTexSize * (float(idxBelow) + 0.5 + lerper), 0.5);\n    vec4 color = texture2D(colors, colorUv);\n\n    // undo preumultiplied alpha\n    if (color.a > 0.0) \n    {\n        color.rgb /= color.a;\n    }\n    \n    color.rgb = czm_gammaCorrect(color.rgb);\n\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n    return material;\n}\n",mB="#ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec4 color;\nuniform float spacing;\nuniform float width;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    float distanceToContour = mod(materialInput.height, spacing);\n\n#ifdef GL_OES_standard_derivatives\n    float dxc = abs(dFdx(materialInput.height));\n    float dyc = abs(dFdy(materialInput.height));\n    float dF = max(dxc, dyc) * czm_pixelRatio * width;\n    float alpha = (distanceToContour < dF) ? 1.0 : 0.0;\n#else\n    float alpha = (distanceToContour < (czm_pixelRatio * width)) ? 1.0 : 0.0;\n#endif\n\n    vec4 outColor = czm_gammaCorrect(vec4(color.rgb, alpha * color.a));\n    material.diffuse = outColor.rgb;\n    material.alpha = outColor.a;\n\n    return material;\n}\n",_B="uniform sampler2D image;\nuniform float minimumHeight;\nuniform float maximumHeight;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    float scaledHeight = clamp((materialInput.height - minimumHeight) / (maximumHeight - minimumHeight), 0.0, 1.0);\n    vec4 rampColor = texture2D(image, vec2(scaledHeight, 0.5));\n    rampColor = czm_gammaCorrect(rampColor);\n    material.diffuse = rampColor.rgb;\n    material.alpha = rampColor.a;\n    return material;\n}\n",gB="uniform vec4 fadeInColor;\nuniform vec4 fadeOutColor;\nuniform float maximumDistance;\nuniform bool repeat;\nuniform vec2 fadeDirection;\nuniform vec2 time;\n\nfloat getTime(float t, float coord)\n{\n    float scalar = 1.0 / maximumDistance;\n    float q  = distance(t, coord) * scalar;\n    if (repeat)\n    {\n        float r = distance(t, coord + 1.0) * scalar;\n        float s = distance(t, coord - 1.0) * scalar;\n        q = min(min(r, s), q);\n    }\n    return clamp(q, 0.0, 1.0);\n}\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n    float s = getTime(time.x, st.s) * fadeDirection.s;\n    float t = getTime(time.y, st.t) * fadeDirection.t;\n\n    float u = length(vec2(s, t));\n    vec4 color = mix(fadeInColor, fadeOutColor, u);\n\n    color = czm_gammaCorrect(color);\n    material.emission = color.rgb;\n    material.alpha = color.a;\n\n    return material;\n}\n",bB='#ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec4 color;\nuniform float cellAlpha;\nuniform vec2 lineCount;\nuniform vec2 lineThickness;\nuniform vec2 lineOffset;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n\n    float scaledWidth = fract(lineCount.s * st.s - lineOffset.s);\n    scaledWidth = abs(scaledWidth - floor(scaledWidth + 0.5));\n    float scaledHeight = fract(lineCount.t * st.t - lineOffset.t);\n    scaledHeight = abs(scaledHeight - floor(scaledHeight + 0.5));\n\n    float value;\n#ifdef GL_OES_standard_derivatives\n    // Fuzz Factor - Controls blurriness of lines\n    const float fuzz = 1.2;\n    vec2 thickness = (lineThickness * czm_pixelRatio) - 1.0;\n\n    // From "3D Engine Design for Virtual Globes" by Cozzi and Ring, Listing 4.13.\n    vec2 dx = abs(dFdx(st));\n    vec2 dy = abs(dFdy(st));\n    vec2 dF = vec2(max(dx.s, dy.s), max(dx.t, dy.t)) * lineCount;\n    value = min(\n        smoothstep(dF.s * thickness.s, dF.s * (fuzz + thickness.s), scaledWidth),\n        smoothstep(dF.t * thickness.t, dF.t * (fuzz + thickness.t), scaledHeight));\n#else\n    // Fuzz Factor - Controls blurriness of lines\n    const float fuzz = 0.05;\n\n    vec2 range = 0.5 - (lineThickness * 0.05);\n    value = min(\n        1.0 - smoothstep(range.s, range.s + fuzz, scaledWidth),\n        1.0 - smoothstep(range.t, range.t + fuzz, scaledHeight));\n#endif\n\n    // Edges taken from RimLightingMaterial.glsl\n    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html\n    float dRim = 1.0 - abs(dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC)));\n    float sRim = smoothstep(0.8, 1.0, dRim);\n    value *= (1.0 - sRim);\n\n    vec4 halfColor;\n    halfColor.rgb = color.rgb * 0.5;\n    halfColor.a = color.a * (1.0 - ((1.0 - cellAlpha) * value));\n    halfColor = czm_gammaCorrect(halfColor);\n    material.diffuse = halfColor.rgb;\n    material.emission = halfColor.rgb;\n    material.alpha = halfColor.a;\n\n    return material;\n}\n',yB="uniform sampler2D image;\nuniform float strength;\nuniform vec2 repeat;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    \n    vec4 textureValue = texture2D(image, fract(repeat * materialInput.st));\n    vec3 normalTangentSpace = textureValue.channels;\n    normalTangentSpace.xy = normalTangentSpace.xy * 2.0 - 1.0;\n    normalTangentSpace.z = clamp(1.0 - strength, 0.1, 1.0);\n    normalTangentSpace = normalize(normalTangentSpace);\n    vec3 normalEC = materialInput.tangentToEyeMatrix * normalTangentSpace;\n    \n    material.normal = normalEC;\n    \n    return material;\n}\n",vB="#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform vec4 color;\n\nfloat getPointOnLine(vec2 p0, vec2 p1, float x)\n{\n    float slope = (p0.y - p1.y) / (p0.x - p1.x);\n    return slope * (x - p0.x) + p0.y;\n}\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n\n#ifdef GL_OES_standard_derivatives\n    float base = 1.0 - abs(fwidth(st.s)) * 10.0 * czm_pixelRatio;\n#else\n    float base = 0.975; // 2.5% of the line will be the arrow head\n#endif\n\n    vec2 center = vec2(1.0, 0.5);\n    float ptOnUpperLine = getPointOnLine(vec2(base, 1.0), center, st.s);\n    float ptOnLowerLine = getPointOnLine(vec2(base, 0.0), center, st.s);\n\n    float halfWidth = 0.15;\n    float s = step(0.5 - halfWidth, st.t);\n    s *= 1.0 - step(0.5 + halfWidth, st.t);\n    s *= 1.0 - step(base, st.s);\n\n    float t = step(base, materialInput.st.s);\n    t *= 1.0 - step(ptOnUpperLine, st.t);\n    t *= step(ptOnLowerLine, st.t);\n\n    // Find the distance from the closest separator (region between two colors)\n    float dist;\n    if (st.s < base)\n    {\n        float d1 = abs(st.t - (0.5 - halfWidth));\n        float d2 = abs(st.t - (0.5 + halfWidth));\n        dist = min(d1, d2);\n    }\n    else\n    {\n        float d1 = czm_infinity;\n        if (st.t < 0.5 - halfWidth && st.t > 0.5 + halfWidth)\n        {\n            d1 = abs(st.s - base);\n        }\n        float d2 = abs(st.t - ptOnUpperLine);\n        float d3 = abs(st.t - ptOnLowerLine);\n        dist = min(min(d1, d2), d3);\n    }\n\n    vec4 outsideColor = vec4(0.0);\n    vec4 currentColor = mix(outsideColor, color, clamp(s + t, 0.0, 1.0));\n    vec4 outColor = czm_antialias(outsideColor, color, currentColor, dist);\n\n    outColor = czm_gammaCorrect(outColor);\n    material.diffuse = outColor.rgb;\n    material.alpha = outColor.a;\n    return material;\n}\n",OB="uniform vec4 color;\nuniform vec4 gapColor;\nuniform float dashLength;\nuniform float dashPattern;\nvarying float v_polylineAngle;\n\nconst float maskLength = 16.0;\n\nmat2 rotate(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat2(\n        c, s,\n        -s, c\n    );\n}\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;\n\n    // Get the relative position within the dash from 0 to 1\n    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));\n    // Figure out the mask index.\n    float maskIndex = floor(dashPosition * maskLength);\n    // Test the bit mask.\n    float maskTest = floor(dashPattern / pow(2.0, maskIndex));\n    vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;\n    if (fragColor.a < 0.005) {   // matches 0/255 and 1/255\n        discard;\n    }\n\n    fragColor = czm_gammaCorrect(fragColor);\n    material.emission = fragColor.rgb;\n    material.alpha = fragColor.a;\n    return material;\n}\n",AB="uniform vec4 color;\nuniform float glowPower;\nuniform float taperPower;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n    float glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);\n\n    if (taperPower <= 0.99999) {\n        glow *= min(1.0, taperPower / (0.5 - st.s * 0.5) - (taperPower / 0.5));\n    }\n\n    vec4 fragColor;\n    fragColor.rgb = max(vec3(glow - 1.0 + color.rgb), color.rgb);\n    fragColor.a = clamp(0.0, 1.0, glow) * color.a;\n    fragColor = czm_gammaCorrect(fragColor);\n\n    material.emission = fragColor.rgb;\n    material.alpha = fragColor.a;\n\n    return material;\n}\n",wB="uniform vec4 color;\nuniform vec4 outlineColor;\nuniform float outlineWidth;\n\nvarying float v_width;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    vec2 st = materialInput.st;\n    float halfInteriorWidth =  0.5 * (v_width - outlineWidth) / v_width;\n    float b = step(0.5 - halfInteriorWidth, st.t);\n    b *= 1.0 - step(0.5 + halfInteriorWidth, st.t);\n\n    // Find the distance from the closest separator (region between two colors)\n    float d1 = abs(st.t - (0.5 - halfInteriorWidth));\n    float d2 = abs(st.t - (0.5 + halfInteriorWidth));\n    float dist = min(d1, d2);\n\n    vec4 currentColor = mix(outlineColor, color, b);\n    vec4 outColor = czm_antialias(outlineColor, color, currentColor, dist);\n    outColor = czm_gammaCorrect(outColor);\n\n    material.diffuse = outColor.rgb;\n    material.alpha = outColor.a;\n\n    return material;\n}\n",TB="uniform vec4 color;\nuniform vec4 rimColor;\nuniform float width;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    // See http://www.fundza.com/rman_shaders/surface/fake_rim/fake_rim1.html\n    float d = 1.0 - dot(materialInput.normalEC, normalize(materialInput.positionToEyeEC));\n    float s = smoothstep(1.0 - width, 1.0, d);\n\n    vec4 outColor = czm_gammaCorrect(color);\n    vec4 outRimColor = czm_gammaCorrect(rimColor);\n\n    material.diffuse = outColor.rgb;\n    material.emission = outRimColor.rgb * s;\n    material.alpha = mix(outColor.a, outRimColor.a, s);\n\n    return material;\n}\n",CB="uniform sampler2D image;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    vec4 rampColor = texture2D(image, vec2(materialInput.slope / (czm_pi / 2.0), 0.5));\n    rampColor = czm_gammaCorrect(rampColor);\n    material.diffuse = rampColor.rgb;\n    material.alpha = rampColor.a;\n    return material;\n}\n",EB="uniform vec4 evenColor;\nuniform vec4 oddColor;\nuniform float offset;\nuniform float repeat;\nuniform bool horizontal;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    // Based on the Stripes Fragment Shader in the Orange Book (11.1.2)\n    float coord = mix(materialInput.st.s, materialInput.st.t, float(horizontal));\n    float value = fract((coord - offset) * (repeat * 0.5));\n    float dist = min(value, min(abs(value - 0.5), 1.0 - value));\n\n    vec4 currentColor = mix(evenColor, oddColor, step(0.5, value));\n    vec4 color = czm_antialias(evenColor, oddColor, currentColor, dist);\n    color = czm_gammaCorrect(color);\n\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n\n    return material;\n}\n",xB="// Thanks for the contribution Jonas\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\nuniform sampler2D specularMap;\nuniform sampler2D normalMap;\nuniform vec4 baseWaterColor;\nuniform vec4 blendColor;\nuniform float frequency;\nuniform float animationSpeed;\nuniform float amplitude;\nuniform float specularIntensity;\nuniform float fadeFactor;\n\nczm_material czm_getMaterial(czm_materialInput materialInput)\n{\n    czm_material material = czm_getDefaultMaterial(materialInput);\n\n    float time = czm_frameNumber * animationSpeed;\n\n    // fade is a function of the distance from the fragment and the frequency of the waves\n    float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);\n\n    float specularMapValue = texture2D(specularMap, materialInput.st).r;\n\n    // note: not using directional motion at this time, just set the angle to 0.0;\n    vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);\n    vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));\n\n    // fade out the normal perturbation as we move further from the water surface\n    normalTangentSpace.xy /= fade;\n\n    // attempt to fade out the normal perturbation as we approach non water areas (low specular map value)\n    normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);\n\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // get ratios for alignment of the new normal vector with a vector perpendicular to the tangent plane\n    float tsPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 1.0)), 0.0, 1.0);\n\n    // fade out water effect as specular map value decreases\n    material.alpha = mix(blendColor.a, baseWaterColor.a, specularMapValue) * specularMapValue;\n\n    // base color is a blend of the water and non-water color based on the value from the specular map\n    // may need a uniform blend factor to better control this\n    material.diffuse = mix(blendColor.rgb, baseWaterColor.rgb, specularMapValue);\n\n    // diffuse highlights are based on how perturbed the normal is\n    material.diffuse += (0.1 * tsPerturbationRatio);\n\n    material.diffuse = material.diffuse;\n\n    material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);\n\n    material.specular = specularIntensity;\n    material.shininess = 10.0;\n\n    return material;\n}\n";function SB(e){this.type=void 0,this.shaderSource=void 0,this.materials=void 0,this.uniforms=void 0,this._uniforms=void 0,this.translucent=void 0,this._minificationFilter=Object(o["a"])(e.minificationFilter,tB.LINEAR),this._magnificationFilter=Object(o["a"])(e.magnificationFilter,ZN.LINEAR),this._strict=void 0,this._template=void 0,this._count=void 0,this._texturePaths={},this._loadedImages=[],this._loadedCubeMaps=[],this._textures={},this._updateFunctions=[],this._defaultTexture=void 0,IB(e,this),Object.defineProperties(this,{type:{value:this.type,writable:!1}}),Object(r["a"])(SB._uniformList[this.type])||(SB._uniformList[this.type]=Object.keys(this._uniforms))}function IB(e,t){let n;e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),t._strict=Object(o["a"])(e.strict,!1),t._count=Object(o["a"])(e.count,0),t._template=Object(RL["a"])(Object(o["a"])(e.fabric,o["a"].EMPTY_OBJECT)),t._template.uniforms=Object(RL["a"])(Object(o["a"])(t._template.uniforms,o["a"].EMPTY_OBJECT)),t._template.materials=Object(RL["a"])(Object(o["a"])(t._template.materials,o["a"].EMPTY_OBJECT)),t.type=Object(r["a"])(t._template.type)?t._template.type:ML(),t.shaderSource="",t.materials={},t.uniforms={},t._uniforms={},t._translucentFunctions=[];const i=SB._materialCache.getMaterial(t.type);if(Object(r["a"])(i)){const e=Object(RL["a"])(i.fabric,!0);t._template=Object(qE["a"])(t._template,e,!0),n=i.translucent}MB(t),Object(r["a"])(i)||SB._materialCache.addMaterial(t.type,t),BB(t),VB(t),WB(t);const a=0===t._translucentFunctions.length||void 0;if(n=Object(o["a"])(n,a),n=Object(o["a"])(e.translucent,n),Object(r["a"])(n))if("function"===typeof n){const e=function(){return n(t)};t._translucentFunctions.push(e)}else t._translucentFunctions.push(n)}function DB(e,t,n,i){if(Object(r["a"])(e))for(const o in e)if(e.hasOwnProperty(o)){const e=-1!==t.indexOf(o);(i&&!e||!i&&e)&&n(o,t)}}function PB(e,t){let n=`fabric: property name '${e}' is not valid. It should be `;for(let i=0;i<t.length;i++){const e=`'${t[i]}'`;n+=i===t.length-1?`or ${e}.`:`${e}, `}throw new a["a"](n)}function jB(e,t){const n=`fabric: uniforms and materials cannot share the same property '${e}'`;throw new a["a"](n)}SB._uniformList={},SB.fromType=function(e,t){if(!Object(r["a"])(SB._materialCache.getMaterial(e)))throw new a["a"](`material with type '${e}' does not exist.`);const n=new SB({fabric:{type:e}});if(Object(r["a"])(t))for(const i in t)t.hasOwnProperty(i)&&(n.uniforms[i]=t[i]);return n},SB.prototype.isTranslucent=function(){if(Object(r["a"])(this.translucent))return"function"===typeof this.translucent?this.translucent():this.translucent;let e=!0;const t=this._translucentFunctions,n=t.length;for(let i=0;i<n;++i){const n=t[i];if(e="function"===typeof n?e&&n():e&&n,!e)break}return e},SB.prototype.update=function(e){let t,n;this._defaultTexture=e.defaultTexture;const i=this._loadedImages;let o=i.length;for(t=0;t<o;++t){const o=i[t];n=o.id;let a,s=o.image;Array.isArray(s)&&(a=s.slice(1,s.length).map((function(e){return e.bufferView})),s=s[0]);const c=new rB({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter});let l;l=Object(r["a"])(s.internalFormat)?new lB({context:e,pixelFormat:s.internalFormat,width:s.width,height:s.height,source:{arrayBufferView:s.bufferView,mipLevels:a},sampler:c}):new lB({context:e,source:s,sampler:c});const u=this._textures[n];Object(r["a"])(u)&&u!==this._defaultTexture&&u.destroy(),this._textures[n]=l;const h=`${n}Dimensions`;if(this.uniforms.hasOwnProperty(h)){const e=this.uniforms[h];e.x=l._width,e.y=l._height}}i.length=0;const a=this._loadedCubeMaps;for(o=a.length,t=0;t<o;++t){const i=a[t];n=i.id;const o=i.images,r=new sB({context:e,source:{positiveX:o[0],negativeX:o[1],positiveY:o[2],negativeY:o[3],positiveZ:o[4],negativeZ:o[5]},sampler:new rB({minificationFilter:this._minificationFilter,magnificationFilter:this._magnificationFilter})});this._textures[n]=r}a.length=0;const s=this._updateFunctions;for(o=s.length,t=0;t<o;++t)s[t](this,e);const c=this.materials;for(const r in c)c.hasOwnProperty(r)&&c[r].update(e)},SB.prototype.isDestroyed=function(){return!1},SB.prototype.destroy=function(){const e=this._textures;for(const n in e)if(e.hasOwnProperty(n)){const t=e[n];t!==this._defaultTexture&&t.destroy()}const t=this.materials;for(const n in t)t.hasOwnProperty(n)&&t[n].destroy();return Wc(this)};const RB=["type","materials","uniforms","components","source"],LB=["diffuse","specular","shininess","normal","emission","alpha"];function MB(e){const t=e._template,n=t.uniforms,i=t.materials,o=t.components;if(Object(r["a"])(o)&&Object(r["a"])(t.source))throw new a["a"]("fabric: cannot have source and components in the same template.");DB(t,RB,PB,!0),DB(o,LB,PB,!0);const s=[];for(const r in i)i.hasOwnProperty(r)&&s.push(r);DB(n,s,jB,!1)}function NB(e,t){const n=t._template.materials;for(const i in n)if(n.hasOwnProperty(i)&&e.indexOf(i)>-1)return!0;return!1}function BB(e){const t=e._template.components,n=e._template.source;if(Object(r["a"])(n))e.shaderSource+=`${n}\n`;else{if(e.shaderSource+="czm_material czm_getMaterial(czm_materialInput materialInput)\n{\n",e.shaderSource+="czm_material material = czm_getDefaultMaterial(materialInput);\n",Object(r["a"])(t)){const n=Object.keys(e._template.materials).length>0;for(const i in t)if(t.hasOwnProperty(i))if("diffuse"===i||"emission"===i){const o=n&&NB(t[i],e),r=o?t[i]:`czm_gammaCorrect(${t[i]})`;e.shaderSource+=`material.${i} = ${r}; \n`}else e.shaderSource+="alpha"===i?`material.alpha = ${t.alpha}; \n`:`material.${i} = ${t[i]};\n`}e.shaderSource+="return material;\n}\n"}}const FB={mat2:ic,mat3:ce,mat4:Me},zB=/\.ktx2$/i;function kB(e){let t;return function(n,i){const o=n.uniforms,a=o[e],s=t!==a,c=!Object(r["a"])(a)||a===SB.DefaultImageId;t=a;let l,u,h=n._textures[e];if(a instanceof HTMLVideoElement){if(a.readyState>=2){if(s&&Object(r["a"])(h)&&(h!==i.defaultTexture&&h.destroy(),h=void 0),!Object(r["a"])(h)||h===i.defaultTexture){const t=new rB({minificationFilter:n._minificationFilter,magnificationFilter:n._magnificationFilter});return h=new lB({context:i,source:a,sampler:t}),void(n._textures[e]=h)}h.copyFrom({source:a})}else Object(r["a"])(h)||(n._textures[e]=i.defaultTexture);return}if(a instanceof lB&&a!==h){n._texturePaths[e]=void 0;const t=n._textures[e];return Object(r["a"])(t)&&t!==n._defaultTexture&&t.destroy(),n._textures[e]=a,l=`${e}Dimensions`,void(o.hasOwnProperty(l)&&(u=o[l],u.x=a._width,u.y=a._height))}if(s&&Object(r["a"])(h)&&c&&(h!==n._defaultTexture&&h.destroy(),h=void 0),Object(r["a"])(h)||(n._texturePaths[e]=void 0,h=n._textures[e]=n._defaultTexture,l=`${e}Dimensions`,o.hasOwnProperty(l)&&(u=o[l],u.x=h._width,u.y=h._height)),c)return;const d=a instanceof Et["a"];if(!Object(r["a"])(n._texturePaths[e])||d&&a.url!==n._texturePaths[e].url||!d&&a!==n._texturePaths[e]){if("string"===typeof a||d){const t=d?a:Et["a"].createIfNeeded(a);let i;i=zB.test(t.url)?sM(t.url):t.fetchImage(),Promise.resolve(i).then((function(t){n._loadedImages.push({id:e,image:t})})).catch((function(){Object(r["a"])(h)&&h!==n._defaultTexture&&h.destroy(),n._textures[e]=n._defaultTexture}))}else(a instanceof HTMLCanvasElement||a instanceof HTMLImageElement)&&n._loadedImages.push({id:e,image:a});n._texturePaths[e]=a}}}function UB(e){return function(t,n){const i=t.uniforms[e];if(i instanceof sB){const n=t._textures[e];return n!==t._defaultTexture&&n.destroy(),t._texturePaths[e]=void 0,void(t._textures[e]=i)}if(Object(r["a"])(t._textures[e])||(t._texturePaths[e]=void 0,t._textures[e]=n.defaultCubeMap),i===SB.DefaultCubeMapId)return;const o=i.positiveX+i.negativeX+i.positiveY+i.negativeY+i.positiveZ+i.negativeZ;if(o!==t._texturePaths[e]){const n=[Et["a"].createIfNeeded(i.positiveX).fetchImage(),Et["a"].createIfNeeded(i.negativeX).fetchImage(),Et["a"].createIfNeeded(i.positiveY).fetchImage(),Et["a"].createIfNeeded(i.negativeY).fetchImage(),Et["a"].createIfNeeded(i.positiveZ).fetchImage(),Et["a"].createIfNeeded(i.negativeZ).fetchImage()];Promise.all(n).then((function(n){t._loadedCubeMaps.push({id:e,images:n})})),t._texturePaths[e]=o}}}function VB(e){const t=e._template.uniforms;for(const n in t)t.hasOwnProperty(n)&&HB(e,n)}function HB(e,t){const n=e._strict,i=e._template.uniforms,o=i[t],s=GB(o);if(!Object(r["a"])(s))throw new a["a"](`fabric: uniform '${t}' has invalid type.`);let c;if("channels"===s){if(c=qB(e,t,o,!1),0===c&&n)throw new a["a"](`strict: shader source does not use channels '${t}'.`)}else{if("sampler2D"===s){const n=`${t}Dimensions`;YB(e,n)>0&&(i[n]={type:"ivec3",x:1,y:1},HB(e,n))}const r=new RegExp(`uniform\\s+${s}\\s+${t}\\s*;`);if(!r.test(e.shaderSource)){const n=`uniform ${s} ${t};`;e.shaderSource=n+e.shaderSource}const l=`${t}_${e._count++}`;if(c=qB(e,t,l),1===c&&n)throw new a["a"](`strict: shader source does not use uniform '${t}'.`);if(e.uniforms[t]=o,"sampler2D"===s)e._uniforms[l]=function(){return e._textures[t]},e._updateFunctions.push(kB(t));else if("samplerCube"===s)e._uniforms[l]=function(){return e._textures[t]},e._updateFunctions.push(UB(t));else if(-1!==s.indexOf("mat")){const n=new FB[s];e._uniforms[l]=function(){return FB[s].fromColumnMajorArray(e.uniforms[t],n)}}else e._uniforms[l]=function(){return e.uniforms[t]}}}function GB(e){let t=e.type;if(!Object(r["a"])(t)){const n=typeof e;if("number"===n)t="float";else if("boolean"===n)t="bool";else if("string"===n||e instanceof Et["a"]||e instanceof HTMLCanvasElement||e instanceof HTMLImageElement)t=/^([rgba]){1,4}$/i.test(e)?"channels":e===SB.DefaultCubeMapId?"samplerCube":"sampler2D";else if("object"===n)if(Array.isArray(e))4!==e.length&&9!==e.length&&16!==e.length||(t=`mat${Math.sqrt(e.length)}`);else{let n=0;for(const t in e)e.hasOwnProperty(t)&&(n+=1);n>=2&&n<=4?t=`vec${n}`:6===n&&(t="samplerCube")}}return t}function WB(e){const t=e._strict,n=e._template.materials;for(const i in n)if(n.hasOwnProperty(i)){const o=new SB({strict:t,fabric:n[i],count:e._count});e._count=o._count,e._uniforms=Object(qE["a"])(e._uniforms,o._uniforms,!0),e.materials[i]=o,e._translucentFunctions=e._translucentFunctions.concat(o._translucentFunctions);const r="czm_getMaterial",s=`${r}_${e._count++}`;qB(o,r,s),e.shaderSource=o.shaderSource+e.shaderSource;const c=`${s}(materialInput)`,l=qB(e,i,c);if(0===l&&t)throw new a["a"](`strict: shader source does not use material '${i}'.`)}}function qB(e,t,n,i){i=Object(o["a"])(i,!0);let r=0;const a="([\\w])?",s=`([\\w${i?".":""}])?`,c=new RegExp(s+t+a,"g");return e.shaderSource=e.shaderSource.replace(c,(function(e,t,i){return t||i?e:(r+=1,n)})),r}function YB(e,t,n){return qB(e,t,t,n)}SB._materialCache={_materials:{},addMaterial:function(e,t){this._materials[e]=t},getMaterial:function(e){return this._materials[e]}},SB.DefaultImageId="czm_defaultImage",SB.DefaultCubeMapId="czm_defaultCubeMap",SB.ColorType="Color",SB._materialCache.addMaterial(SB.ColorType,{fabric:{type:SB.ColorType,uniforms:{color:new Dm(1,0,0,.5)},components:{diffuse:"color.rgb",alpha:"color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}}),SB.ImageType="Image",SB._materialCache.addMaterial(SB.ImageType,{fabric:{type:SB.ImageType,uniforms:{image:SB.DefaultImageId,repeat:new Gt(1,1),color:new Dm(1,1,1,1)},components:{diffuse:"texture2D(image, fract(repeat * materialInput.st)).rgb * color.rgb",alpha:"texture2D(image, fract(repeat * materialInput.st)).a * color.a"}},translucent:function(e){return e.uniforms.color.alpha<1}}),SB.DiffuseMapType="DiffuseMap",SB._materialCache.addMaterial(SB.DiffuseMapType,{fabric:{type:SB.DiffuseMapType,uniforms:{image:SB.DefaultImageId,channels:"rgb",repeat:new Gt(1,1)},components:{diffuse:"texture2D(image, fract(repeat * materialInput.st)).channels"}},translucent:!1}),SB.AlphaMapType="AlphaMap",SB._materialCache.addMaterial(SB.AlphaMapType,{fabric:{type:SB.AlphaMapType,uniforms:{image:SB.DefaultImageId,channel:"a",repeat:new Gt(1,1)},components:{alpha:"texture2D(image, fract(repeat * materialInput.st)).channel"}},translucent:!0}),SB.SpecularMapType="SpecularMap",SB._materialCache.addMaterial(SB.SpecularMapType,{fabric:{type:SB.SpecularMapType,uniforms:{image:SB.DefaultImageId,channel:"r",repeat:new Gt(1,1)},components:{specular:"texture2D(image, fract(repeat * materialInput.st)).channel"}},translucent:!1}),SB.EmissionMapType="EmissionMap",SB._materialCache.addMaterial(SB.EmissionMapType,{fabric:{type:SB.EmissionMapType,uniforms:{image:SB.DefaultImageId,channels:"rgb",repeat:new Gt(1,1)},components:{emission:"texture2D(image, fract(repeat * materialInput.st)).channels"}},translucent:!1}),SB.BumpMapType="BumpMap",SB._materialCache.addMaterial(SB.BumpMapType,{fabric:{type:SB.BumpMapType,uniforms:{image:SB.DefaultImageId,channel:"r",strength:.8,repeat:new Gt(1,1)},source:hB},translucent:!1}),SB.NormalMapType="NormalMap",SB._materialCache.addMaterial(SB.NormalMapType,{fabric:{type:SB.NormalMapType,uniforms:{image:SB.DefaultImageId,channels:"rgb",strength:.8,repeat:new Gt(1,1)},source:yB},translucent:!1}),SB.GridType="Grid",SB._materialCache.addMaterial(SB.GridType,{fabric:{type:SB.GridType,uniforms:{color:new Dm(0,1,0,1),cellAlpha:.1,lineCount:new Gt(8,8),lineThickness:new Gt(1,1),lineOffset:new Gt(0,0)},source:bB},translucent:function(e){const t=e.uniforms;return t.color.alpha<1||t.cellAlpha<1}}),SB.StripeType="Stripe",SB._materialCache.addMaterial(SB.StripeType,{fabric:{type:SB.StripeType,uniforms:{horizontal:!0,evenColor:new Dm(1,1,1,.5),oddColor:new Dm(0,0,1,.5),offset:0,repeat:5},source:EB},translucent:function(e){const t=e.uniforms;return t.evenColor.alpha<1||t.oddColor.alpha<1}}),SB.CheckerboardType="Checkerboard",SB._materialCache.addMaterial(SB.CheckerboardType,{fabric:{type:SB.CheckerboardType,uniforms:{lightColor:new Dm(1,1,1,.5),darkColor:new Dm(0,0,0,.5),repeat:new Gt(5,5)},source:dB},translucent:function(e){const t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}}),SB.DotType="Dot",SB._materialCache.addMaterial(SB.DotType,{fabric:{type:SB.DotType,uniforms:{lightColor:new Dm(1,1,0,.75),darkColor:new Dm(0,1,1,.75),repeat:new Gt(5,5)},source:fB},translucent:function(e){const t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}}),SB.WaterType="Water",SB._materialCache.addMaterial(SB.WaterType,{fabric:{type:SB.WaterType,uniforms:{baseWaterColor:new Dm(.2,.3,.6,1),blendColor:new Dm(0,1,.699,1),specularMap:SB.DefaultImageId,normalMap:SB.DefaultImageId,frequency:10,animationSpeed:.01,amplitude:1,specularIntensity:.5,fadeFactor:1},source:xB},translucent:function(e){const t=e.uniforms;return t.baseWaterColor.alpha<1||t.blendColor.alpha<1}}),SB.RimLightingType="RimLighting",SB._materialCache.addMaterial(SB.RimLightingType,{fabric:{type:SB.RimLightingType,uniforms:{color:new Dm(1,0,0,.7),rimColor:new Dm(1,1,1,.4),width:.3},source:TB},translucent:function(e){const t=e.uniforms;return t.color.alpha<1||t.rimColor.alpha<1}}),SB.FadeType="Fade",SB._materialCache.addMaterial(SB.FadeType,{fabric:{type:SB.FadeType,uniforms:{fadeInColor:new Dm(1,0,0,1),fadeOutColor:new Dm(0,0,0,0),maximumDistance:.5,repeat:!0,fadeDirection:{x:!0,y:!0},time:new Gt(.5,.5)},source:gB},translucent:function(e){const t=e.uniforms;return t.fadeInColor.alpha<1||t.fadeOutColor.alpha<1}}),SB.PolylineArrowType="PolylineArrow",SB._materialCache.addMaterial(SB.PolylineArrowType,{fabric:{type:SB.PolylineArrowType,uniforms:{color:new Dm(1,1,1,1)},source:vB},translucent:!0}),SB.PolylineDashType="PolylineDash",SB._materialCache.addMaterial(SB.PolylineDashType,{fabric:{type:SB.PolylineDashType,uniforms:{color:new Dm(1,0,1,1),gapColor:new Dm(0,0,0,0),dashLength:16,dashPattern:255},source:OB},translucent:!0}),SB.PolylineGlowType="PolylineGlow",SB._materialCache.addMaterial(SB.PolylineGlowType,{fabric:{type:SB.PolylineGlowType,uniforms:{color:new Dm(0,.5,1,1),glowPower:.25,taperPower:1},source:AB},translucent:!0}),SB.PolylineOutlineType="PolylineOutline",SB._materialCache.addMaterial(SB.PolylineOutlineType,{fabric:{type:SB.PolylineOutlineType,uniforms:{color:new Dm(1,1,1,1),outlineColor:new Dm(1,0,0,1),outlineWidth:1},source:wB},translucent:function(e){const t=e.uniforms;return t.color.alpha<1||t.outlineColor.alpha<1}}),SB.ElevationContourType="ElevationContour",SB._materialCache.addMaterial(SB.ElevationContourType,{fabric:{type:SB.ElevationContourType,uniforms:{spacing:100,color:new Dm(1,0,0,1),width:1},source:mB},translucent:!1}),SB.ElevationRampType="ElevationRamp",SB._materialCache.addMaterial(SB.ElevationRampType,{fabric:{type:SB.ElevationRampType,uniforms:{image:SB.DefaultImageId,minimumHeight:0,maximumHeight:1e4},source:_B},translucent:!1}),SB.SlopeRampMaterialType="SlopeRamp",SB._materialCache.addMaterial(SB.SlopeRampMaterialType,{fabric:{type:SB.SlopeRampMaterialType,uniforms:{image:SB.DefaultImageId},source:CB},translucent:!1}),SB.AspectRampMaterialType="AspectRamp",SB._materialCache.addMaterial(SB.AspectRampMaterialType,{fabric:{type:SB.AspectRampMaterialType,uniforms:{image:SB.DefaultImageId},source:uB},translucent:!1}),SB.ElevationBandType="ElevationBand",SB._materialCache.addMaterial(SB.ElevationBandType,{fabric:{type:SB.ElevationBandType,uniforms:{heights:SB.DefaultImageId,colors:SB.DefaultImageId},source:pB},translucent:!0});var XB=SB;function KB(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.translucent,!0),n=Object(o["a"])(e.closed,!1),i=Object(o["a"])(e.materialSupport,KB.MaterialSupport.TEXTURED);this.material=Object(r["a"])(e.material)?e.material:XB.fromType(XB.ColorType),this.translucent=t,this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,i.vertexShaderSource),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,i.fragmentShaderSource),this._renderState=WN.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=i,this._vertexFormat=i.vertexFormat,this._flat=Object(o["a"])(e.flat,!1),this._faceForward=Object(o["a"])(e.faceForward,!n)}Object.defineProperties(KB.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),KB.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,KB.prototype.isTranslucent=WN.prototype.isTranslucent,KB.prototype.getRenderState=WN.prototype.getRenderState,KB.MaterialSupport={BASIC:Object.freeze({vertexFormat:qu.POSITION_AND_NORMAL,vertexShaderSource:RN,fragmentShaderSource:jN}),TEXTURED:Object.freeze({vertexFormat:qu.POSITION_NORMAL_AND_ST,vertexShaderSource:MN,fragmentShaderSource:LN}),ALL:Object.freeze({vertexFormat:qu.ALL,vertexShaderSource:PN,fragmentShaderSource:DN})};var $B=KB,JB="varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec4 v_color;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    vec4 color = czm_gammaCorrect(v_color);\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n}\n",QB="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec4 color;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec4 v_color;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_color = color;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n",ZB="varying vec4 v_color;\n\nvoid main()\n{\n    gl_FragColor = czm_gammaCorrect(v_color);\n}\n",eF="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec4 color;\nattribute float batchId;\n\nvarying vec4 v_color;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_color = color;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n";function tF(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.translucent,!0),n=Object(o["a"])(e.closed,!1),i=Object(o["a"])(e.flat,!1),r=i?eF:QB,a=i?ZB:JB,s=i?tF.FLAT_VERTEX_FORMAT:tF.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,r),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,a),this._renderState=WN.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=s,this._flat=i,this._faceForward=Object(o["a"])(e.faceForward,!n)}Object.defineProperties(tF.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),tF.VERTEX_FORMAT=qu.POSITION_AND_NORMAL,tF.FLAT_VERTEX_FORMAT=qu.POSITION_ONLY,tF.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,tF.prototype.isTranslucent=WN.prototype.isTranslucent,tF.prototype.getRenderState=WN.prototype.getRenderState;var nF=tF;function iF(e){this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(iF.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color")}),iF.prototype.getType=function(e){return"Color"},iF.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Dm.WHITE,t.color),t},iF.prototype.equals=function(e){return this===e||e instanceof iF&&aN.equals(this._color,e._color)};var oF=iF;const rF={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function aF(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=Object(o["a"])(e.primitiveType,Eu.TRIANGLES),this._vertexArray=e.vertexArray,this._count=e.count,this._offset=Object(o["a"])(e.offset,0),this._instanceCount=Object(o["a"])(e.instanceCount,0),this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._flags=0,this.cull=Object(o["a"])(e.cull,!0),this.occlude=Object(o["a"])(e.occlude,!0),this.executeInClosestFrustum=Object(o["a"])(e.executeInClosestFrustum,!1),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.castShadows=Object(o["a"])(e.castShadows,!1),this.receiveShadows=Object(o["a"])(e.receiveShadows,!1),this.pickOnly=Object(o["a"])(e.pickOnly,!1),this.depthForTranslucentClassification=Object(o["a"])(e.depthForTranslucentClassification,!1),this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function sF(e,t){return(e._flags&t)===t}function cF(e,t,n){n?e._flags|=t:e._flags&=~t}Object.defineProperties(aF.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return sF(this,rF.CULL)},set:function(e){sF(this,rF.CULL)!==e&&(cF(this,rF.CULL,e),this.dirty=!0)}},occlude:{get:function(){return sF(this,rF.OCCLUDE)},set:function(e){sF(this,rF.OCCLUDE)!==e&&(cF(this,rF.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return sF(this,rF.CAST_SHADOWS)},set:function(e){sF(this,rF.CAST_SHADOWS)!==e&&(cF(this,rF.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return sF(this,rF.RECEIVE_SHADOWS)},set:function(e){sF(this,rF.RECEIVE_SHADOWS)!==e&&(cF(this,rF.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return sF(this,rF.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){sF(this,rF.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(cF(this,rF.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return sF(this,rF.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){sF(this,rF.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(cF(this,rF.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickOnly:{get:function(){return sF(this,rF.PICK_ONLY)},set:function(e){sF(this,rF.PICK_ONLY)!==e&&(cF(this,rF.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return sF(this,rF.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){sF(this,rF.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(cF(this,rF.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}}),aF.shallowClone=function(e,t){if(Object(r["a"])(e))return Object(r["a"])(t)||(t=new aF),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t},aF.prototype.execute=function(e,t){e.draw(this,t)};var lF=aF;const uF={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,OVERLAY:9,NUMBER_OF_PASSES:10};var hF=Object.freeze(uF);function dF(e){if("object"!==typeof e||null===e)return e;let t;const n=Object.keys(e);for(let i=0;i<n.length;i++)t=n[i],e.hasOwnProperty(t)&&"_applyFunctions"!==t&&(e[t]=dF(e[t]));return Object.freeze(e)}var fF=dF;function pF(e){return e===Ys.FUNC_ADD||e===Ys.FUNC_SUBTRACT||e===Ys.FUNC_REVERSE_SUBTRACT||e===Ys.MIN||e===Ys.MAX}function mF(e){return e===Ys.ZERO||e===Ys.ONE||e===Ys.SRC_COLOR||e===Ys.ONE_MINUS_SRC_COLOR||e===Ys.DST_COLOR||e===Ys.ONE_MINUS_DST_COLOR||e===Ys.SRC_ALPHA||e===Ys.ONE_MINUS_SRC_ALPHA||e===Ys.DST_ALPHA||e===Ys.ONE_MINUS_DST_ALPHA||e===Ys.CONSTANT_COLOR||e===Ys.ONE_MINUS_CONSTANT_COLOR||e===Ys.CONSTANT_ALPHA||e===Ys.ONE_MINUS_CONSTANT_ALPHA||e===Ys.SRC_ALPHA_SATURATE}function _F(e){return e===Ys.FRONT||e===Ys.BACK||e===Ys.FRONT_AND_BACK}function gF(e){return e===Ys.NEVER||e===Ys.LESS||e===Ys.EQUAL||e===Ys.LEQUAL||e===Ys.GREATER||e===Ys.NOTEQUAL||e===Ys.GEQUAL||e===Ys.ALWAYS}function bF(e){return e===Ys.NEVER||e===Ys.LESS||e===Ys.EQUAL||e===Ys.LEQUAL||e===Ys.GREATER||e===Ys.NOTEQUAL||e===Ys.GEQUAL||e===Ys.ALWAYS}function yF(e){return e===Ys.ZERO||e===Ys.KEEP||e===Ys.REPLACE||e===Ys.INCR||e===Ys.DECR||e===Ys.INVERT||e===Ys.INCR_WRAP||e===Ys.DECR_WRAP}function vF(e){const t=Object(o["a"])(e,o["a"].EMPTY_OBJECT),n=Object(o["a"])(t.cull,o["a"].EMPTY_OBJECT),i=Object(o["a"])(t.polygonOffset,o["a"].EMPTY_OBJECT),s=Object(o["a"])(t.scissorTest,o["a"].EMPTY_OBJECT),c=Object(o["a"])(s.rectangle,o["a"].EMPTY_OBJECT),l=Object(o["a"])(t.depthRange,o["a"].EMPTY_OBJECT),u=Object(o["a"])(t.depthTest,o["a"].EMPTY_OBJECT),h=Object(o["a"])(t.colorMask,o["a"].EMPTY_OBJECT),d=Object(o["a"])(t.blending,o["a"].EMPTY_OBJECT),f=Object(o["a"])(d.color,o["a"].EMPTY_OBJECT),p=Object(o["a"])(t.stencilTest,o["a"].EMPTY_OBJECT),m=Object(o["a"])(p.frontOperation,o["a"].EMPTY_OBJECT),_=Object(o["a"])(p.backOperation,o["a"].EMPTY_OBJECT),g=Object(o["a"])(t.sampleCoverage,o["a"].EMPTY_OBJECT),b=t.viewport;if(this.frontFace=Object(o["a"])(t.frontFace,c_.COUNTER_CLOCKWISE),this.cull={enabled:Object(o["a"])(n.enabled,!1),face:Object(o["a"])(n.face,Ys.BACK)},this.lineWidth=Object(o["a"])(t.lineWidth,1),this.polygonOffset={enabled:Object(o["a"])(i.enabled,!1),factor:Object(o["a"])(i.factor,0),units:Object(o["a"])(i.units,0)},this.scissorTest={enabled:Object(o["a"])(s.enabled,!1),rectangle:Au.clone(c)},this.depthRange={near:Object(o["a"])(l.near,0),far:Object(o["a"])(l.far,1)},this.depthTest={enabled:Object(o["a"])(u.enabled,!1),func:Object(o["a"])(u.func,Ys.LESS)},this.colorMask={red:Object(o["a"])(h.red,!0),green:Object(o["a"])(h.green,!0),blue:Object(o["a"])(h.blue,!0),alpha:Object(o["a"])(h.alpha,!0)},this.depthMask=Object(o["a"])(t.depthMask,!0),this.stencilMask=Object(o["a"])(t.stencilMask,-1),this.blending={enabled:Object(o["a"])(d.enabled,!1),color:new Dm(Object(o["a"])(f.red,0),Object(o["a"])(f.green,0),Object(o["a"])(f.blue,0),Object(o["a"])(f.alpha,0)),equationRgb:Object(o["a"])(d.equationRgb,Ys.FUNC_ADD),equationAlpha:Object(o["a"])(d.equationAlpha,Ys.FUNC_ADD),functionSourceRgb:Object(o["a"])(d.functionSourceRgb,Ys.ONE),functionSourceAlpha:Object(o["a"])(d.functionSourceAlpha,Ys.ONE),functionDestinationRgb:Object(o["a"])(d.functionDestinationRgb,Ys.ZERO),functionDestinationAlpha:Object(o["a"])(d.functionDestinationAlpha,Ys.ZERO)},this.stencilTest={enabled:Object(o["a"])(p.enabled,!1),frontFunction:Object(o["a"])(p.frontFunction,Ys.ALWAYS),backFunction:Object(o["a"])(p.backFunction,Ys.ALWAYS),reference:Object(o["a"])(p.reference,0),mask:Object(o["a"])(p.mask,-1),frontOperation:{fail:Object(o["a"])(m.fail,Ys.KEEP),zFail:Object(o["a"])(m.zFail,Ys.KEEP),zPass:Object(o["a"])(m.zPass,Ys.KEEP)},backOperation:{fail:Object(o["a"])(_.fail,Ys.KEEP),zFail:Object(o["a"])(_.zFail,Ys.KEEP),zPass:Object(o["a"])(_.zPass,Ys.KEEP)}},this.sampleCoverage={enabled:Object(o["a"])(g.enabled,!1),value:Object(o["a"])(g.value,1),invert:Object(o["a"])(g.invert,!1)},this.viewport=Object(r["a"])(b)?new Au(b.x,b.y,b.width,b.height):void 0,this.lineWidth<YN.minimumAliasedLineWidth||this.lineWidth>YN.maximumAliasedLineWidth)throw new a["a"]("renderState.lineWidth is out of range.  Check minimumAliasedLineWidth and maximumAliasedLineWidth.");if(!c_.validate(this.frontFace))throw new a["a"]("Invalid renderState.frontFace.");if(!_F(this.cull.face))throw new a["a"]("Invalid renderState.cull.face.");if(this.scissorTest.rectangle.width<0||this.scissorTest.rectangle.height<0)throw new a["a"]("renderState.scissorTest.rectangle.width and renderState.scissorTest.rectangle.height must be greater than or equal to zero.");if(this.depthRange.near>this.depthRange.far)throw new a["a"]("renderState.depthRange.near can not be greater than renderState.depthRange.far.");if(this.depthRange.near<0)throw new a["a"]("renderState.depthRange.near must be greater than or equal to zero.");if(this.depthRange.far>1)throw new a["a"]("renderState.depthRange.far must be less than or equal to one.");if(!gF(this.depthTest.func))throw new a["a"]("Invalid renderState.depthTest.func.");if(this.blending.color.red<0||this.blending.color.red>1||this.blending.color.green<0||this.blending.color.green>1||this.blending.color.blue<0||this.blending.color.blue>1||this.blending.color.alpha<0||this.blending.color.alpha>1)throw new a["a"]("renderState.blending.color components must be greater than or equal to zero and less than or equal to one.");if(!pF(this.blending.equationRgb))throw new a["a"]("Invalid renderState.blending.equationRgb.");if(!pF(this.blending.equationAlpha))throw new a["a"]("Invalid renderState.blending.equationAlpha.");if(!mF(this.blending.functionSourceRgb))throw new a["a"]("Invalid renderState.blending.functionSourceRgb.");if(!mF(this.blending.functionSourceAlpha))throw new a["a"]("Invalid renderState.blending.functionSourceAlpha.");if(!mF(this.blending.functionDestinationRgb))throw new a["a"]("Invalid renderState.blending.functionDestinationRgb.");if(!mF(this.blending.functionDestinationAlpha))throw new a["a"]("Invalid renderState.blending.functionDestinationAlpha.");if(!bF(this.stencilTest.frontFunction))throw new a["a"]("Invalid renderState.stencilTest.frontFunction.");if(!bF(this.stencilTest.backFunction))throw new a["a"]("Invalid renderState.stencilTest.backFunction.");if(!yF(this.stencilTest.frontOperation.fail))throw new a["a"]("Invalid renderState.stencilTest.frontOperation.fail.");if(!yF(this.stencilTest.frontOperation.zFail))throw new a["a"]("Invalid renderState.stencilTest.frontOperation.zFail.");if(!yF(this.stencilTest.frontOperation.zPass))throw new a["a"]("Invalid renderState.stencilTest.frontOperation.zPass.");if(!yF(this.stencilTest.backOperation.fail))throw new a["a"]("Invalid renderState.stencilTest.backOperation.fail.");if(!yF(this.stencilTest.backOperation.zFail))throw new a["a"]("Invalid renderState.stencilTest.backOperation.zFail.");if(!yF(this.stencilTest.backOperation.zPass))throw new a["a"]("Invalid renderState.stencilTest.backOperation.zPass.");if(Object(r["a"])(this.viewport)){if(this.viewport.width<0)throw new a["a"]("renderState.viewport.width must be greater than or equal to zero.");if(this.viewport.height<0)throw new a["a"]("renderState.viewport.height must be greater than or equal to zero.");if(this.viewport.width>YN.maximumViewportWidth)throw new a["a"](`renderState.viewport.width must be less than or equal to the maximum viewport width (${YN.maximumViewportWidth.toString()}).  Check maximumViewportWidth.`);if(this.viewport.height>YN.maximumViewportHeight)throw new a["a"](`renderState.viewport.height must be less than or equal to the maximum viewport height (${YN.maximumViewportHeight.toString()}).  Check maximumViewportHeight.`)}this.id=0,this._applyFunctions=[]}let OF=0,AF={};function wF(e,t,n){n?e.enable(t):e.disable(t)}function TF(e,t){e.frontFace(t.frontFace)}function CF(e,t){const n=t.cull,i=n.enabled;wF(e,e.CULL_FACE,i),i&&e.cullFace(n.face)}function EF(e,t){e.lineWidth(t.lineWidth)}function xF(e,t){const n=t.polygonOffset,i=n.enabled;wF(e,e.POLYGON_OFFSET_FILL,i),i&&e.polygonOffset(n.factor,n.units)}function SF(e,t,n){const i=t.scissorTest,o=Object(r["a"])(n.scissorTest)?n.scissorTest.enabled:i.enabled;if(wF(e,e.SCISSOR_TEST,o),o){const t=Object(r["a"])(n.scissorTest)?n.scissorTest.rectangle:i.rectangle;e.scissor(t.x,t.y,t.width,t.height)}}function IF(e,t){const n=t.depthRange;e.depthRange(n.near,n.far)}function DF(e,t){const n=t.depthTest,i=n.enabled;wF(e,e.DEPTH_TEST,i),i&&e.depthFunc(n.func)}function PF(e,t){const n=t.colorMask;e.colorMask(n.red,n.green,n.blue,n.alpha)}function jF(e,t){e.depthMask(t.depthMask)}function RF(e,t){e.stencilMask(t.stencilMask)}function LF(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function MF(e,t,n){const i=t.blending,o=Object(r["a"])(n.blendingEnabled)?n.blendingEnabled:i.enabled;wF(e,e.BLEND,o),o&&(LF(e,i.color),e.blendEquationSeparate(i.equationRgb,i.equationAlpha),e.blendFuncSeparate(i.functionSourceRgb,i.functionDestinationRgb,i.functionSourceAlpha,i.functionDestinationAlpha))}function NF(e,t){const n=t.stencilTest,i=n.enabled;if(wF(e,e.STENCIL_TEST,i),i){const t=n.frontFunction,i=n.backFunction,o=n.reference,r=n.mask;e.stencilFunc(t,o,r),e.stencilFuncSeparate(e.BACK,i,o,r),e.stencilFuncSeparate(e.FRONT,t,o,r);const a=n.frontOperation,s=a.fail,c=a.zFail,l=a.zPass;e.stencilOpSeparate(e.FRONT,s,c,l);const u=n.backOperation,h=u.fail,d=u.zFail,f=u.zPass;e.stencilOpSeparate(e.BACK,h,d,f)}}function BF(e,t){const n=t.sampleCoverage,i=n.enabled;wF(e,e.SAMPLE_COVERAGE,i),i&&e.sampleCoverage(n.value,n.invert)}vF.fromCache=function(e){const t=JSON.stringify(e);let n=AF[t];if(Object(r["a"])(n))return++n.referenceCount,n.state;let i=new vF(e);const o=JSON.stringify(i);return n=AF[o],Object(r["a"])(n)||(i.id=OF++,i=fF(i),n={referenceCount:0,state:i},AF[o]=n),++n.referenceCount,AF[t]={referenceCount:1,state:n.state},n.state},vF.removeFromCache=function(e){const t=new vF(e),n=JSON.stringify(t),i=AF[n],o=JSON.stringify(e),a=AF[o];Object(r["a"])(a)&&(--a.referenceCount,0===a.referenceCount&&(delete AF[o],Object(r["a"])(i)&&--i.referenceCount)),Object(r["a"])(i)&&0===i.referenceCount&&delete AF[n]},vF.getCache=function(){return AF},vF.clearCache=function(){AF={}};const FF=new Au;function zF(e,t,n){let i=Object(o["a"])(t.viewport,n.viewport);Object(r["a"])(i)||(i=FF,i.width=n.context.drawingBufferWidth,i.height=n.context.drawingBufferHeight),n.context.uniformState.viewport=i,e.viewport(i.x,i.y,i.width,i.height)}function kF(e,t){const n=[];return e.frontFace!==t.frontFace&&n.push(TF),e.cull.enabled===t.cull.enabled&&e.cull.face===t.cull.face||n.push(CF),e.lineWidth!==t.lineWidth&&n.push(EF),e.polygonOffset.enabled===t.polygonOffset.enabled&&e.polygonOffset.factor===t.polygonOffset.factor&&e.polygonOffset.units===t.polygonOffset.units||n.push(xF),e.depthRange.near===t.depthRange.near&&e.depthRange.far===t.depthRange.far||n.push(IF),e.depthTest.enabled===t.depthTest.enabled&&e.depthTest.func===t.depthTest.func||n.push(DF),e.colorMask.red===t.colorMask.red&&e.colorMask.green===t.colorMask.green&&e.colorMask.blue===t.colorMask.blue&&e.colorMask.alpha===t.colorMask.alpha||n.push(PF),e.depthMask!==t.depthMask&&n.push(jF),e.stencilMask!==t.stencilMask&&n.push(RF),e.stencilTest.enabled===t.stencilTest.enabled&&e.stencilTest.frontFunction===t.stencilTest.frontFunction&&e.stencilTest.backFunction===t.stencilTest.backFunction&&e.stencilTest.reference===t.stencilTest.reference&&e.stencilTest.mask===t.stencilTest.mask&&e.stencilTest.frontOperation.fail===t.stencilTest.frontOperation.fail&&e.stencilTest.frontOperation.zFail===t.stencilTest.frontOperation.zFail&&e.stencilTest.backOperation.fail===t.stencilTest.backOperation.fail&&e.stencilTest.backOperation.zFail===t.stencilTest.backOperation.zFail&&e.stencilTest.backOperation.zPass===t.stencilTest.backOperation.zPass||n.push(NF),e.sampleCoverage.enabled===t.sampleCoverage.enabled&&e.sampleCoverage.value===t.sampleCoverage.value&&e.sampleCoverage.invert===t.sampleCoverage.invert||n.push(BF),n}vF.apply=function(e,t,n){TF(e,t),CF(e,t),EF(e,t),xF(e,t),IF(e,t),DF(e,t),PF(e,t),jF(e,t),RF(e,t),NF(e,t),BF(e,t),SF(e,t,n),MF(e,t,n),zF(e,t,n)},vF.partialApply=function(e,t,n,i,o,a){if(t!==n){let i=n._applyFunctions[t.id];Object(r["a"])(i)||(i=kF(t,n),n._applyFunctions[t.id]=i);const o=i.length;for(let t=0;t<o;++t)i[t](e,n)}const s=Object(r["a"])(i.scissorTest)?i.scissorTest:t.scissorTest,c=Object(r["a"])(o.scissorTest)?o.scissorTest:n.scissorTest;(s!==c||a)&&SF(e,n,o);const l=Object(r["a"])(i.blendingEnabled)?i.blendingEnabled:t.blending.enabled,u=Object(r["a"])(o.blendingEnabled)?o.blendingEnabled:n.blending.enabled;(l!==u||u&&t.blending!==n.blending)&&MF(e,n,o),t===n&&i===o&&i.context===o.context||zF(e,n,o)},vF.getState=function(e){if(!Object(r["a"])(e))throw new a["a"]("renderState is required.");return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:Au.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:Dm.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:Object(r["a"])(e.viewport)?Au.clone(e.viewport):void 0}};var UF=vF;const VF=new g;function HF(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}const GF={};GF[Ys.FLOAT]="float",GF[Ys.FLOAT_VEC2]="vec2",GF[Ys.FLOAT_VEC3]="vec3",GF[Ys.FLOAT_VEC4]="vec4",GF[Ys.INT]="int",GF[Ys.INT_VEC2]="ivec2",GF[Ys.INT_VEC3]="ivec3",GF[Ys.INT_VEC4]="ivec4",GF[Ys.BOOL]="bool",GF[Ys.BOOL_VEC2]="bvec2",GF[Ys.BOOL_VEC3]="bvec3",GF[Ys.BOOL_VEC4]="bvec4",GF[Ys.FLOAT_MAT2]="mat2",GF[Ys.FLOAT_MAT3]="mat3",GF[Ys.FLOAT_MAT4]="mat4",GF[Ys.SAMPLER_2D]="sampler2D",GF[Ys.SAMPLER_CUBE]="samplerCube",HF.prototype.getDeclaration=function(e){let t=`uniform ${GF[this._datatype]} ${e}`;const n=this._size;return t+=1===n?";":`[${n.toString()}];`,t};const WF={czm_viewport:new HF({size:1,datatype:Ys.FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new HF({size:1,datatype:Ys.SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new HF({size:1,datatype:Ys.FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new HF({size:1,datatype:Ys.FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_entireFrustum:new HF({size:1,datatype:Ys.FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new HF({size:1,datatype:Ys.FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new HF({size:1,datatype:Ys.FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return Me.getTranslation(e.inverseView,VF)}}),czm_frameNumber:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new HF({size:1,datatype:Ys.FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new HF({size:1,datatype:Ys.SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new HF({size:1,datatype:Ys.SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new HF({size:1,datatype:Ys.SAMPLER_2D,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapSize:new HF({size:1,datatype:Ys.FLOAT_VEC2,getValue:function(e){return e.specularEnvironmentMapsDimensions}}),czm_specularEnvironmentMapsMaximumLOD:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new HF({size:9,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new HF({size:1,datatype:Ys.FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.fogDensity}}),czm_splitPosition:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.splitPosition}}),czm_geometricToleranceOverMeter:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new HF({size:1,datatype:Ys.FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new HF({size:1,datatype:Ys.FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new HF({size:1,datatype:Ys.FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})};var qF=WF;function YF(e,t,n,i){switch(t.type){case e.FLOAT:return new XF(e,t,n,i);case e.FLOAT_VEC2:return new KF(e,t,n,i);case e.FLOAT_VEC3:return new $F(e,t,n,i);case e.FLOAT_VEC4:return new JF(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new QF(e,t,n,i);case e.INT:case e.BOOL:return new ZF(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new ez(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new tz(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new nz(e,t,n,i);case e.FLOAT_MAT2:return new oz(e,t,n,i);case e.FLOAT_MAT3:return new az(e,t,n,i);case e.FLOAT_MAT4:return new cz(e,t,n,i);default:throw new ye["a"](`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function XF(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}function KF(e,t,n,i){this.name=n,this.value=void 0,this._value=new Gt,this._gl=e,this._location=i}function $F(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}function JF(e,t,n,i){this.name=n,this.value=void 0,this._value=void 0,this._gl=e,this._location=i}function QF(e,t,n,i){this.name=n,this.value=void 0,this._gl=e,this._location=i,this.textureUnitIndex=void 0}function ZF(e,t,n,i){this.name=n,this.value=void 0,this._value=0,this._gl=e,this._location=i}function ez(e,t,n,i){this.name=n,this.value=void 0,this._value=new Gt,this._gl=e,this._location=i}function tz(e,t,n,i){this.name=n,this.value=void 0,this._value=new g,this._gl=e,this._location=i}function nz(e,t,n,i){this.name=n,this.value=void 0,this._value=new be,this._gl=e,this._location=i}XF.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))},KF.prototype.set=function(){const e=this.value;Gt.equals(e,this._value)||(Gt.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))},$F.prototype.set=function(){const e=this.value;if(Object(r["a"])(e.red))Dm.equals(e,this._value)||(this._value=Dm.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue));else{if(!Object(r["a"])(e.x))throw new a["a"](`Invalid vec3 value for uniform "${this.name}".`);g.equals(e,this._value)||(this._value=g.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z))}},JF.prototype.set=function(){const e=this.value;if(Object(r["a"])(e.red))Dm.equals(e,this._value)||(this._value=Dm.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha));else{if(!Object(r["a"])(e.x))throw new a["a"](`Invalid vec4 value for uniform "${this.name}".`);be.equals(e,this._value)||(this._value=be.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w))}},QF.prototype.set=function(){const e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);const t=this.value;e.bindTexture(t._target,t._texture)},QF.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1},ZF.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))},ez.prototype.set=function(){const e=this.value;Gt.equals(e,this._value)||(Gt.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))},tz.prototype.set=function(){const e=this.value;g.equals(e,this._value)||(g.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))},nz.prototype.set=function(){const e=this.value;be.equals(e,this._value)||(be.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};const iz=new Float32Array(4);function oz(e,t,n,i){this.name=n,this.value=void 0,this._value=new ic,this._gl=e,this._location=i}oz.prototype.set=function(){if(!ic.equalsArray(this.value,this._value,0)){ic.clone(this.value,this._value);const e=ic.toArray(this.value,iz);this._gl.uniformMatrix2fv(this._location,!1,e)}};const rz=new Float32Array(9);function az(e,t,n,i){this.name=n,this.value=void 0,this._value=new ce,this._gl=e,this._location=i}az.prototype.set=function(){if(!ce.equalsArray(this.value,this._value,0)){ce.clone(this.value,this._value);const e=ce.toArray(this.value,rz);this._gl.uniformMatrix3fv(this._location,!1,e)}};const sz=new Float32Array(16);function cz(e,t,n,i){this.name=n,this.value=void 0,this._value=new Me,this._gl=e,this._location=i}cz.prototype.set=function(){if(!Me.equalsArray(this.value,this._value,0)){Me.clone(this.value,this._value);const e=Me.toArray(this.value,sz);this._gl.uniformMatrix4fv(this._location,!1,e)}};var lz=YF;function uz(e,t,n,i){switch(t.type){case e.FLOAT:return new hz(e,t,n,i);case e.FLOAT_VEC2:return new dz(e,t,n,i);case e.FLOAT_VEC3:return new fz(e,t,n,i);case e.FLOAT_VEC4:return new pz(e,t,n,i);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new mz(e,t,n,i);case e.INT:case e.BOOL:return new _z(e,t,n,i);case e.INT_VEC2:case e.BOOL_VEC2:return new gz(e,t,n,i);case e.INT_VEC3:case e.BOOL_VEC3:return new bz(e,t,n,i);case e.INT_VEC4:case e.BOOL_VEC4:return new yz(e,t,n,i);case e.FLOAT_MAT2:return new vz(e,t,n,i);case e.FLOAT_MAT3:return new Oz(e,t,n,i);case e.FLOAT_MAT4:return new Az(e,t,n,i);default:throw new ye["a"](`Unrecognized uniform type: ${t.type} for uniform "${n}".`)}}function hz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._location=i[0]}function dz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(2*o),this._gl=e,this._location=i[0]}function fz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(3*o),this._gl=e,this._location=i[0]}function pz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(4*o),this._gl=e,this._location=i[0]}function mz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(o),this._gl=e,this._locations=i,this.textureUnitIndex=void 0}function _z(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(o),this._gl=e,this._location=i[0]}function gz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(2*o),this._gl=e,this._location=i[0]}function bz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(3*o),this._gl=e,this._location=i[0]}function yz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Int32Array(4*o),this._gl=e,this._location=i[0]}function vz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(4*o),this._gl=e,this._location=i[0]}function Oz(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(9*o),this._gl=e,this._location=i[0]}function Az(e,t,n,i){const o=i.length;this.name=n,this.value=new Array(o),this._value=new Float32Array(16*o),this._gl=e,this._location=i[0]}hz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1;for(let o=0;o<t;++o){const t=e[o];t!==n[o]&&(n[o]=t,i=!0)}i&&this._gl.uniform1fv(this._location,n)},dz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];Gt.equalsArray(t,n,o)||(Gt.pack(t,n,o),i=!0),o+=2}i&&this._gl.uniform2fv(this._location,n)},fz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let s=0;s<t;++s){const t=e[s];if(Object(r["a"])(t.red))t.red===n[o]&&t.green===n[o+1]&&t.blue===n[o+2]||(n[o]=t.red,n[o+1]=t.green,n[o+2]=t.blue,i=!0);else{if(!Object(r["a"])(t.x))throw new a["a"]("Invalid vec3 value.");g.equalsArray(t,n,o)||(g.pack(t,n,o),i=!0)}o+=3}i&&this._gl.uniform3fv(this._location,n)},pz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let s=0;s<t;++s){const t=e[s];if(Object(r["a"])(t.red))Dm.equalsArray(t,n,o)||(Dm.pack(t,n,o),i=!0);else{if(!Object(r["a"])(t.x))throw new a["a"]("Invalid vec4 value.");be.equalsArray(t,n,o)||(be.pack(t,n,o),i=!0)}o+=4}i&&this._gl.uniform4fv(this._location,n)},mz.prototype.set=function(){const e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,n=this.value,i=n.length;for(let o=0;o<i;++o){const i=n[o];e.activeTexture(t+o),e.bindTexture(i._target,i._texture)}},mz.prototype._setSampler=function(e){this.textureUnitIndex=e;const t=this._locations,n=t.length;for(let i=0;i<n;++i){const n=e+i;this._gl.uniform1i(t[i],n)}return e+n},_z.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1;for(let o=0;o<t;++o){const t=e[o];t!==n[o]&&(n[o]=t,i=!0)}i&&this._gl.uniform1iv(this._location,n)},gz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];Gt.equalsArray(t,n,o)||(Gt.pack(t,n,o),i=!0),o+=2}i&&this._gl.uniform2iv(this._location,n)},bz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];g.equalsArray(t,n,o)||(g.pack(t,n,o),i=!0),o+=3}i&&this._gl.uniform3iv(this._location,n)},yz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];be.equalsArray(t,n,o)||(be.pack(t,n,o),i=!0),o+=4}i&&this._gl.uniform4iv(this._location,n)},vz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];ic.equalsArray(t,n,o)||(ic.pack(t,n,o),i=!0),o+=4}i&&this._gl.uniformMatrix2fv(this._location,!1,n)},Oz.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];ce.equalsArray(t,n,o)||(ce.pack(t,n,o),i=!0),o+=9}i&&this._gl.uniformMatrix3fv(this._location,!1,n)},Az.prototype.set=function(){const e=this.value,t=e.length,n=this._value;let i=!1,o=0;for(let r=0;r<t;++r){const t=e[r];Me.equalsArray(t,n,o)||(Me.pack(t,n,o),i=!0),o+=16}i&&this._gl.uniformMatrix4fv(this._location,!1,n)};var wz=uz;let Tz=0;function Cz(e){let t=e.vertexShaderText,n=e.fragmentShaderText;"undefined"!==typeof spector&&(t=t.replace(/^#line/gm,"//#line"),n=n.replace(/^#line/gm,"//#line"));const i=xz(t,n);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=i.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=i.fragmentShaderText,this.id=Tz++}function Ez(e){const t=[],n=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(Object(r["a"])(n)){const e=n.length;for(let i=0;i<e;i++){const e=n[i].trim(),o=e.slice(e.lastIndexOf(" ")+1);t.push(o)}}return t}function xz(e,t){const n={};if(!YN.highpFloatSupported||!YN.highpIntSupported){let i,o,r,a;const s=Ez(e),c=Ez(t),l=s.length,u=c.length;for(i=0;i<l;i++)for(o=0;o<u;o++)if(s[i]===c[o]){r=s[i],a=`czm_mediump_${r}`;const e=new RegExp(`${r}\\b`,"g");t=t.replace(e,a),n[a]=r}}return{fragmentShaderText:t,duplicateUniformNames:n}}Cz.fromCache=function(e){return e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context),e.context.shaderCache.getShaderProgram(e)},Cz.replaceCache=function(e){return e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context),e.context.shaderCache.replaceShaderProgram(e)},Object.defineProperties(Cz.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return Lz(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return Lz(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return Lz(this),this._uniformsByName}}});const Sz="[Cesium WebGL] ";function Iz(e,t){const n=t._vertexShaderText,i=t._fragmentShaderText,o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);const a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,i),e.compileShader(a);const s=e.createProgram();e.attachShader(s,o),e.attachShader(s,a);const c=t._attributeLocations;if(Object(r["a"])(c))for(const r in c)c.hasOwnProperty(r)&&e.bindAttribLocation(s,c[r],r);let l,u;if(e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS))return t._logShaderCompilation&&(l=e.getShaderInfoLog(o),Object(r["a"])(l)&&l.length>0&&console.log(`${Sz}Vertex shader compile log: ${l}`),l=e.getShaderInfoLog(a),Object(r["a"])(l)&&l.length>0&&console.log(`${Sz}Fragment shader compile log: ${l}`),l=e.getProgramInfoLog(s),Object(r["a"])(l)&&l.length>0&&console.log(`${Sz}Shader program link log: ${l}`)),e.deleteShader(o),e.deleteShader(a),s;const h=t._debugShaders;throw e.getShaderParameter(a,e.COMPILE_STATUS)?e.getShaderParameter(o,e.COMPILE_STATUS)?(l=e.getProgramInfoLog(s),console.error(`${Sz}Shader program link log: ${l}`),d(o,"vertex"),d(a,"fragment"),u=`Program failed to link.  Link log: ${l}`):(l=e.getShaderInfoLog(o),console.error(`${Sz}Vertex shader compile log: ${l}`),console.error(`${Sz} Vertex shader source:\n${n}`),u=`Vertex shader failed to compile.  Compile log: ${l}`):(l=e.getShaderInfoLog(a),console.error(`${Sz}Fragment shader compile log: ${l}`),console.error(`${Sz} Fragment shader source:\n${i}`),u=`Fragment shader failed to compile.  Compile log: ${l}`),e.deleteShader(o),e.deleteShader(a),e.deleteProgram(s),new ye["a"](u);function d(e,t){if(!Object(r["a"])(h))return;const n=h.getTranslatedShaderSource(e);""!==n?console.error(`${Sz}Translated ${t} shaderSource:\n${n}`):console.error(`${Sz}${t} shader translation failed.`)}}function Dz(e,t,n){const i={};for(let o=0;o<n;++o){const n=e.getActiveAttrib(t,o),r=e.getAttribLocation(t,n.name);i[n.name]={name:n.name,type:n.type,index:r}}return i}function Pz(e,t){const n={},i=[],o=[],a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<a;++s){const a=e.getActiveUniform(t,s),c="[0]",l=-1!==a.name.indexOf(c,a.name.length-c.length)?a.name.slice(0,a.name.length-3):a.name;if(0!==l.indexOf("gl_"))if(a.name.indexOf("[")<0){const r=e.getUniformLocation(t,l);if(null!==r){const t=lz(e,a,l,r);n[l]=t,i.push(t),t._setSampler&&o.push(t)}}else{let s,c,u,h;const d=l.indexOf("[");if(d>=0){if(s=n[l.slice(0,d)],!Object(r["a"])(s))continue;c=s._locations,c.length<=1&&(u=s.value,h=e.getUniformLocation(t,l),null!==h&&(c.push(h),u.push(e.getUniform(t,h))))}else{c=[];for(let n=0;n<a.size;++n)h=e.getUniformLocation(t,`${l}[${n}]`),null!==h&&c.push(h);s=wz(e,a,l,c),n[l]=s,i.push(s),s._setSampler&&o.push(s)}}}return{uniformsByName:n,uniforms:i,samplerUniforms:o}}function jz(e,t){const n=[],i=[];for(const o in t)if(t.hasOwnProperty(o)){const a=t[o];let s=o;const c=e._duplicateUniformNames[s];Object(r["a"])(c)&&(a.name=c,s=c);const l=qF[s];Object(r["a"])(l)?n.push({uniform:a,automaticUniform:l}):i.push(a)}return{automaticUniforms:n,manualUniforms:i}}function Rz(e,t,n){e.useProgram(t);let i=0;const o=n.length;for(let r=0;r<o;++r)i=n[r]._setSampler(i);return e.useProgram(null),i}function Lz(e){Object(r["a"])(e._program)||Mz(e)}function Mz(e){const t=e._program,n=e._gl,i=Iz(n,e,e._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),r=Pz(n,i),a=jz(e,r.uniformsByName);e._program=i,e._numberOfVertexAttributes=o,e._vertexAttributes=Dz(n,i,o),e._uniformsByName=r.uniformsByName,e._uniforms=r.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=Rz(n,i,r.samplerUniforms),t&&e._gl.deleteProgram(t),"undefined"!==typeof spector&&(e._program.__SPECTOR_rebuildProgram=function(t,n,i,o){const r=e._vertexShaderText,a=e._fragmentShaderText,s=/ ! = /g;e._vertexShaderText=t.replace(s," != "),e._fragmentShaderText=n.replace(s," != ");try{Mz(e),i(e._program)}catch(c){e._vertexShaderText=r,e._fragmentShaderText=a;const t=/(?:Compile|Link) error: ([^]*)/,n=t.exec(c.message);o(n?n[1]:c.message)}})}Cz.prototype._bind=function(){Lz(this),this._gl.useProgram(this._program)},Cz.prototype._setUniforms=function(e,t,n){let i,o;if(Object(r["a"])(e)){const t=this._manualUniforms;for(i=t.length,o=0;o<i;++o){const n=t[o];n.value=e[n.name]()}}const s=this._automaticUniforms;for(i=s.length,o=0;o<i;++o){const e=s[o];e.uniform.value=e.automaticUniform.getValue(t)}const c=this._uniforms;for(i=c.length,o=0;o<i;++o)c[o].set();if(n){const e=this._gl,t=this._program;if(e.validateProgram(t),!e.getProgramParameter(t,e.VALIDATE_STATUS))throw new a["a"](`Program validation failed.  Program info log: ${e.getProgramInfoLog(t)}`)}},Cz.prototype.isDestroyed=function(){return!1},Cz.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)},Cz.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),Wc(this)};var Nz=Cz;function Bz(e,t){const n=/#define OUTPUT_DECLARATION/,i=e.split("\n");if(/#version 300 es/g.test(e))return e;let o,r,s=-1;for(o=0;o<i.length;++o)if(r=i[o],n.test(r)){s=o;break}if(-1===s)throw new a["a"]("Could not find a #define OUTPUT_DECLARATION!");const c=[];for(o=0;o<10;o++){const t=`gl_FragData\\[${o}\\]`,n=`czm_out${o}`,r=new RegExp(t,"g");r.test(e)&&(Vz(n,c),Fz(t,n,i),i.splice(s,0,`layout(location = ${o}) out vec4 ${n};`),s+=1)}const l="czm_fragColor";kz("gl_FragColor",i)&&(Vz(l,c),Fz("gl_FragColor",l,i),i.splice(s,0,"layout(location = 0) out vec4 czm_fragColor;"),s+=1);const u=Hz(c,i),h={};for(o=0;o<i.length;o++){r=i[o];for(const e in u)if(u.hasOwnProperty(e)){const t=new RegExp(`(layout)[^]+(out)[^]+(${e})[^]+`,"g");t.test(r)&&(h[r]=e)}}for(const a in h)if(h.hasOwnProperty(a)){const e=h[a];let t=i.indexOf(a);const n=u[e],o=n.length;for(let r=0;r<o;r++)i.splice(t,0,n[r]);t+=o+1;for(let r=o-1;r>=0;r--)i.splice(t,0,`#endif //${n[r]}`)}const d="WEBGL_2",f=`#define ${d}`,p="#version 300 es";let m=!1;for(o=0;o<i.length;o++)if(/#version/.test(i[o])){i[o]=p,m=!0;break}return m||i.splice(0,0,p),i.splice(1,0,f),Gz("EXT_draw_buffers",d,i),Gz("EXT_frag_depth",d,i),Gz("OES_standard_derivatives",d,i),Fz("texture2D","texture",i),Fz("texture3D","texture",i),Fz("textureCube","texture",i),Fz("gl_FragDepthEXT","gl_FragDepth",i),t?Fz("varying","in",i):(Fz("attribute","in",i),Fz("varying","out",i)),Uz(i)}function Fz(e,t,n){const i=`(^|[^\\w])(${e})($|[^\\w])`,o=new RegExp(i,"g"),r=n.length;for(let a=0;a<r;++a){const e=n[a];n[a]=e.replace(o,`$1${t}$3`)}}function zz(e,t,n){const i=n.length;for(let o=0;o<i;++o){const i=n[o];n[o]=i.replace(e,t)}}function kz(e,t){const n=`(^|[^\\w])(${e})($|[^\\w])`,i=new RegExp(n,"g"),o=t.length;for(let r=0;r<o;++r){const e=t[r];if(i.test(e))return!0}return!1}function Uz(e){let t="";const n=e.length;for(let i=0;i<n;++i)t+=`${e[i]}\n`;return t}function Vz(e,t){-1===t.indexOf(e)&&t.push(e)}function Hz(e,t){const n={},i=e.length,o=[];for(let a=0;a<t.length;++a){const s=t[a],c=/(#ifdef|#if)/g.test(s),l=/#else/g.test(s),u=/#endif/g.test(s);if(c)o.push(s);else if(l){const e=o[o.length-1];let t=e.replace("ifdef","ifndef");/if/g.test(t)&&(t=t.replace(/(#if\s+)(\S*)([^]*)/,"$1!($2)$3")),o.pop(),o.push(t)}else if(u)o.pop();else if(!/layout/g.test(s))for(let t=0;t<i;++t){const i=e[t];-1!==s.indexOf(i)&&(Object(r["a"])(n[i])?n[i]=n[i].filter((function(e){return o.indexOf(e)>=0})):n[i]=o.slice())}}return n}function Gz(e,t,n){const i=`#extension\\s+GL_${e}\\s+:\\s+[a-zA-Z0-9]+\\s*$`;zz(new RegExp(i,"g"),"",n),Fz(`GL_${e}`,t,n)}var Wz=Bz,qz="/**\n * A built-in GLSL floating-point constant for converting radians to degrees.\n *\n * @alias czm_degreesPerRadian\n * @glslConstant\n *\n * @see CesiumMath.DEGREES_PER_RADIAN\n *\n * @example\n * // GLSL declaration\n * const float czm_degreesPerRadian = ...;\n *\n * // Example\n * float deg = czm_degreesPerRadian * rad;\n */\nconst float czm_degreesPerRadian = 57.29577951308232;\n",Yz="/**\n * A built-in GLSL vec2 constant for defining the depth range.\n * This is a workaround to a bug where IE11 does not implement gl_DepthRange.\n *\n * @alias czm_depthRange\n * @glslConstant\n *\n * @example\n * // GLSL declaration\n * float depthRangeNear = czm_depthRange.near;\n * float depthRangeFar = czm_depthRange.far;\n *\n */\nconst czm_depthRangeStruct czm_depthRange = czm_depthRangeStruct(0.0, 1.0);\n",Xz="/**\n * 0.1\n *\n * @name czm_epsilon1\n * @glslConstant\n */\nconst float czm_epsilon1 = 0.1;\n",Kz="/**\n * 0.01\n *\n * @name czm_epsilon2\n * @glslConstant\n */\nconst float czm_epsilon2 = 0.01;\n",$z="/**\n * 0.001\n *\n * @name czm_epsilon3\n * @glslConstant\n */\nconst float czm_epsilon3 = 0.001;\n",Jz="/**\n * 0.0001\n *\n * @name czm_epsilon4\n * @glslConstant\n */\nconst float czm_epsilon4 = 0.0001;\n",Qz="/**\n * 0.00001\n *\n * @name czm_epsilon5\n * @glslConstant\n */\nconst float czm_epsilon5 = 0.00001;\n",Zz="/**\n * 0.000001\n *\n * @name czm_epsilon6\n * @glslConstant\n */\nconst float czm_epsilon6 = 0.000001;\n",ek="/**\n * 0.0000001\n *\n * @name czm_epsilon7\n * @glslConstant\n */\nconst float czm_epsilon7 = 0.0000001;\n",tk="/**\n * DOC_TBA\n *\n * @name czm_infinity\n * @glslConstant\n */\nconst float czm_infinity = 5906376272000.0;  // Distance from the Sun to Pluto in meters.  TODO: What is best given lowp, mediump, and highp?\n",nk="/**\n * A built-in GLSL floating-point constant for <code>1/pi</code>.\n *\n * @alias czm_oneOverPi\n * @glslConstant\n *\n * @see CesiumMath.ONE_OVER_PI\n *\n * @example\n * // GLSL declaration\n * const float czm_oneOverPi = ...;\n *\n * // Example\n * float pi = 1.0 / czm_oneOverPi;\n */\nconst float czm_oneOverPi = 0.3183098861837907;\n",ik="/**\n * A built-in GLSL floating-point constant for <code>1/2pi</code>.\n *\n * @alias czm_oneOverTwoPi\n * @glslConstant\n *\n * @see CesiumMath.ONE_OVER_TWO_PI\n *\n * @example\n * // GLSL declaration\n * const float czm_oneOverTwoPi = ...;\n *\n * // Example\n * float pi = 2.0 * czm_oneOverTwoPi;\n */\nconst float czm_oneOverTwoPi = 0.15915494309189535;\n",ok="/**\n * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE}\n *\n * @name czm_passCesium3DTile\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passCesium3DTile = 4.0;\n",rk="/**\n * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION}\n *\n * @name czm_passCesium3DTileClassification\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passCesium3DTileClassification = 5.0;\n",ak="/**\n * The automatic GLSL constant for {@link Pass#CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW}\n *\n * @name czm_passCesium3DTileClassificationIgnoreShow\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passCesium3DTileClassificationIgnoreShow = 6.0;\n",sk="/**\n * The automatic GLSL constant for {@link Pass#CLASSIFICATION}\n *\n * @name czm_passClassification\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passClassification = 7.0;\n",ck="/**\n * The automatic GLSL constant for {@link Pass#COMPUTE}\n *\n * @name czm_passCompute\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passCompute = 1.0;\n",lk="/**\n * The automatic GLSL constant for {@link Pass#ENVIRONMENT}\n *\n * @name czm_passEnvironment\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passEnvironment = 0.0;\n",uk="/**\n * The automatic GLSL constant for {@link Pass#GLOBE}\n *\n * @name czm_passGlobe\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passGlobe = 2.0;\n",hk="/**\n * The automatic GLSL constant for {@link Pass#OPAQUE}\n *\n * @name czm_passOpaque\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passOpaque = 7.0;\n",dk="/**\n * The automatic GLSL constant for {@link Pass#OVERLAY}\n *\n * @name czm_passOverlay\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passOverlay = 9.0;\n",fk="/**\n * The automatic GLSL constant for {@link Pass#TERRAIN_CLASSIFICATION}\n *\n * @name czm_passTerrainClassification\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passTerrainClassification = 3.0;\n",pk="/**\n * The automatic GLSL constant for {@link Pass#TRANSLUCENT}\n *\n * @name czm_passTranslucent\n * @glslConstant\n *\n * @see czm_pass\n */\nconst float czm_passTranslucent = 8.0;\n",mk="/**\n * A built-in GLSL floating-point constant for <code>Math.PI</code>.\n *\n * @alias czm_pi\n * @glslConstant\n *\n * @see CesiumMath.PI\n *\n * @example\n * // GLSL declaration\n * const float czm_pi = ...;\n *\n * // Example\n * float twoPi = 2.0 * czm_pi;\n */\nconst float czm_pi = 3.141592653589793;\n",_k="/**\n * A built-in GLSL floating-point constant for <code>pi/4</code>.\n *\n * @alias czm_piOverFour\n * @glslConstant\n *\n * @see CesiumMath.PI_OVER_FOUR\n *\n * @example\n * // GLSL declaration\n * const float czm_piOverFour = ...;\n *\n * // Example\n * float pi = 4.0 * czm_piOverFour;\n */\nconst float czm_piOverFour = 0.7853981633974483;\n",gk="/**\n * A built-in GLSL floating-point constant for <code>pi/6</code>.\n *\n * @alias czm_piOverSix\n * @glslConstant\n *\n * @see CesiumMath.PI_OVER_SIX\n *\n * @example\n * // GLSL declaration\n * const float czm_piOverSix = ...;\n *\n * // Example\n * float pi = 6.0 * czm_piOverSix;\n */\nconst float czm_piOverSix = 0.5235987755982988;\n",bk="/**\n * A built-in GLSL floating-point constant for <code>pi/3</code>.\n *\n * @alias czm_piOverThree\n * @glslConstant\n *\n * @see CesiumMath.PI_OVER_THREE\n *\n * @example\n * // GLSL declaration\n * const float czm_piOverThree = ...;\n *\n * // Example\n * float pi = 3.0 * czm_piOverThree;\n */\nconst float czm_piOverThree = 1.0471975511965976;\n",yk="/**\n * A built-in GLSL floating-point constant for <code>pi/2</code>.\n *\n * @alias czm_piOverTwo\n * @glslConstant\n *\n * @see CesiumMath.PI_OVER_TWO\n *\n * @example\n * // GLSL declaration\n * const float czm_piOverTwo = ...;\n *\n * // Example\n * float pi = 2.0 * czm_piOverTwo;\n */\nconst float czm_piOverTwo = 1.5707963267948966;\n",vk="/**\n * A built-in GLSL floating-point constant for converting degrees to radians.\n *\n * @alias czm_radiansPerDegree\n * @glslConstant\n *\n * @see CesiumMath.RADIANS_PER_DEGREE\n *\n * @example\n * // GLSL declaration\n * const float czm_radiansPerDegree = ...;\n *\n * // Example\n * float rad = czm_radiansPerDegree * deg;\n */\nconst float czm_radiansPerDegree = 0.017453292519943295;\n",Ok="/**\n * The constant identifier for the 2D {@link SceneMode}\n *\n * @name czm_sceneMode2D\n * @glslConstant\n * @see czm_sceneMode\n * @see czm_sceneModeColumbusView\n * @see czm_sceneMode3D\n * @see czm_sceneModeMorphing\n */\nconst float czm_sceneMode2D = 2.0;\n",Ak="/**\n * The constant identifier for the 3D {@link SceneMode}\n *\n * @name czm_sceneMode3D\n * @glslConstant\n * @see czm_sceneMode\n * @see czm_sceneMode2D\n * @see czm_sceneModeColumbusView\n * @see czm_sceneModeMorphing\n */\nconst float czm_sceneMode3D = 3.0;\n",wk="/**\n * The constant identifier for the Columbus View {@link SceneMode}\n *\n * @name czm_sceneModeColumbusView\n * @glslConstant\n * @see czm_sceneMode\n * @see czm_sceneMode2D\n * @see czm_sceneMode3D\n * @see czm_sceneModeMorphing\n */\nconst float czm_sceneModeColumbusView = 1.0;\n",Tk="/**\n * The constant identifier for the Morphing {@link SceneMode}\n *\n * @name czm_sceneModeMorphing\n * @glslConstant\n * @see czm_sceneMode\n * @see czm_sceneMode2D\n * @see czm_sceneModeColumbusView\n * @see czm_sceneMode3D\n */\nconst float czm_sceneModeMorphing = 0.0;\n",Ck="/**\n * A built-in GLSL floating-point constant for one solar radius.\n *\n * @alias czm_solarRadius\n * @glslConstant\n *\n * @see CesiumMath.SOLAR_RADIUS\n *\n * @example\n * // GLSL declaration\n * const float czm_solarRadius = ...;\n */\nconst float czm_solarRadius = 695500000.0;\n",Ek="/**\n * A built-in GLSL floating-point constant for <code>3pi/2</code>.\n *\n * @alias czm_threePiOver2\n * @glslConstant\n *\n * @see CesiumMath.THREE_PI_OVER_TWO\n *\n * @example\n * // GLSL declaration\n * const float czm_threePiOver2 = ...;\n *\n * // Example\n * float pi = (2.0 / 3.0) * czm_threePiOver2;\n */\nconst float czm_threePiOver2 = 4.71238898038469;\n",xk="/**\n * A built-in GLSL floating-point constant for <code>2pi</code>.\n *\n * @alias czm_twoPi\n * @glslConstant\n *\n * @see CesiumMath.TWO_PI\n *\n * @example\n * // GLSL declaration\n * const float czm_twoPi = ...;\n *\n * // Example\n * float pi = czm_twoPi / 2.0;\n */\nconst float czm_twoPi = 6.283185307179586;\n",Sk="/**\n * The maximum latitude, in radians, both North and South, supported by a Web Mercator\n * (EPSG:3857) projection.  Technically, the Mercator projection is defined\n * for any latitude up to (but not including) 90 degrees, but it makes sense\n * to cut it off sooner because it grows exponentially with increasing latitude.\n * The logic behind this particular cutoff value, which is the one used by\n * Google Maps, Bing Maps, and Esri, is that it makes the projection\n * square.  That is, the rectangle is equal in the X and Y directions.\n *\n * The constant value is computed as follows:\n *   czm_pi * 0.5 - (2.0 * atan(exp(-czm_pi)))\n *\n * @name czm_webMercatorMaxLatitude\n * @glslConstant\n */\nconst float czm_webMercatorMaxLatitude = 1.4844222297453324;\n",Ik="/**\n * @name czm_depthRangeStruct\n * @glslStruct\n */\nstruct czm_depthRangeStruct\n{\n    float near;\n    float far;\n};\n",Dk="/**\n * Holds material information that can be used for lighting. Returned by all czm_getMaterial functions.\n *\n * @name czm_material\n * @glslStruct\n *\n * @property {vec3} diffuse Incoming light that scatters evenly in all directions.\n * @property {float} specular Intensity of incoming light reflecting in a single direction.\n * @property {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.\n * @property {vec3} normal Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.\n * @property {vec3} emission Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.\n * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.\n */\nstruct czm_material\n{\n    vec3 diffuse;\n    float specular;\n    float shininess;\n    vec3 normal;\n    vec3 emission;\n    float alpha;\n};\n",Pk="/**\n * Used as input to every material's czm_getMaterial function.\n *\n * @name czm_materialInput\n * @glslStruct\n *\n * @property {float} s 1D texture coordinates.\n * @property {vec2} st 2D texture coordinates.\n * @property {vec3} str 3D texture coordinates.\n * @property {vec3} normalEC Unperturbed surface normal in eye coordinates.\n * @property {mat3} tangentToEyeMatrix Matrix for converting a tangent space normal to eye space.\n * @property {vec3} positionToEyeEC Vector from the fragment to the eye in eye coordinates.  The magnitude is the distance in meters from the fragment to the eye.\n * @property {float} height The height of the terrain in meters above or below the WGS84 ellipsoid.  Only available for globe materials.\n * @property {float} slope The slope of the terrain in radians.  0 is flat; pi/2 is vertical.  Only available for globe materials.\n * @property {float} aspect The aspect of the terrain in radians.  0 is East, pi/2 is North, pi is West, 3pi/2 is South.  Only available for globe materials.\n */\nstruct czm_materialInput\n{\n    float s;\n    vec2 st;\n    vec3 str;\n    vec3 normalEC;\n    mat3 tangentToEyeMatrix;\n    vec3 positionToEyeEC;\n    float height;\n    float slope;\n    float aspect;\n};\n",jk="/**\n * Struct for representing a material for a {@link Model}. The model\n * rendering pipeline will pass this struct between material, custom shaders,\n * and lighting stages. This is not to be confused with {@link czm_material}\n * which is used by the older Fabric materials system, although they are similar.\n * <p>\n * All color values (diffuse, specular, emissive) are in linear color space.\n * </p>\n *\n * @name czm_modelMaterial\n * @glslStruct\n *\n * @property {vec3} diffuse Incoming light that scatters evenly in all directions.\n * @property {float} alpha Alpha of this material. 0.0 is completely transparent; 1.0 is completely opaque.\n * @property {vec3} specular Color of reflected light at normal incidence in PBR materials. This is sometimes referred to as f0 in the literature.\n * @property {float} roughness A number from 0.0 to 1.0 representing how rough the surface is. Values near 0.0 produce glossy surfaces, while values near 1.0 produce rough surfaces.\n * @property {vec3} normalEC Surface's normal in eye coordinates. It is used for effects such as normal mapping. The default is the surface's unmodified normal.\n * @property {float} occlusion Ambient occlusion recieved at this point on the material. 1.0 means fully lit, 0.0 means fully occluded.\n * @property {vec3} emissive Light emitted by the material equally in all directions. The default is vec3(0.0), which emits no light.\n */\nstruct czm_modelMaterial {\n    vec3 diffuse;\n    float alpha;\n    vec3 specular;\n    float roughness;\n    vec3 normalEC;\n    float occlusion;\n    vec3 emissive;\n};\n",Rk="/**\n * Struct for representing the output of a custom vertex shader.\n * \n * @name czm_modelVertexOutput\n * @glslStruct\n *\n * @see {@link CustomShader}\n * @see {@link Model}\n *\n * @property {vec3} positionMC The position of the vertex in model coordinates\n * @property {float} pointSize A custom value for gl_PointSize. This is only used for point primitives. \n */\nstruct czm_modelVertexOutput {\n  vec3 positionMC;\n  float pointSize;\n};\n",Lk="/**\n * Parameters for {@link czm_pbrLighting}\n *\n * @name czm_material\n * @glslStruct\n *\n * @property {vec3} diffuseColor the diffuse color of the material for the lambert term of the rendering equation\n * @property {float} roughness a value from 0.0 to 1.0 that indicates how rough the surface of the material is.\n * @property {vec3} f0 The reflectance of the material at normal incidence\n */\nstruct czm_pbrParameters\n{\n    vec3 diffuseColor;\n    float roughness;\n    vec3 f0;\n};\n",Mk="/**\n * DOC_TBA\n *\n * @name czm_ray\n * @glslStruct\n */\nstruct czm_ray\n{\n    vec3 origin;\n    vec3 direction;\n};\n",Nk="/**\n * DOC_TBA\n *\n * @name czm_raySegment\n * @glslStruct\n */\nstruct czm_raySegment\n{\n    float start;\n    float stop;\n};\n\n/**\n * DOC_TBA\n *\n * @name czm_emptyRaySegment\n * @glslConstant \n */\nconst czm_raySegment czm_emptyRaySegment = czm_raySegment(-czm_infinity, -czm_infinity);\n\n/**\n * DOC_TBA\n *\n * @name czm_fullRaySegment\n * @glslConstant \n */\nconst czm_raySegment czm_fullRaySegment = czm_raySegment(0.0, czm_infinity);\n",Bk="struct czm_shadowParameters\n{\n#ifdef USE_CUBE_MAP_SHADOW\n    vec3 texCoords;\n#else\n    vec2 texCoords;\n#endif\n\n    float depthBias;\n    float depth;\n    float nDotL;\n    vec2 texelStepSize;\n    float normalShadingSmooth;\n    float darkness;\n};\n",Fk="/**\n * Converts an HSB color (hue, saturation, brightness) to RGB\n * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}\n *\n * @name czm_HSBToRGB\n * @glslFunction\n * \n * @param {vec3} hsb The color in HSB.\n *\n * @returns {vec3} The color in RGB.\n *\n * @example\n * vec3 hsb = czm_RGBToHSB(rgb);\n * hsb.z *= 0.1;\n * rgb = czm_HSBToRGB(hsb);\n */\n\nconst vec4 K_HSB2RGB = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\nvec3 czm_HSBToRGB(vec3 hsb)\n{\n    vec3 p = abs(fract(hsb.xxx + K_HSB2RGB.xyz) * 6.0 - K_HSB2RGB.www);\n    return hsb.z * mix(K_HSB2RGB.xxx, clamp(p - K_HSB2RGB.xxx, 0.0, 1.0), hsb.y);\n}\n",zk="/**\n * Converts an HSL color (hue, saturation, lightness) to RGB\n * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}\n *\n * @name czm_HSLToRGB\n * @glslFunction\n * \n * @param {vec3} rgb The color in HSL.\n *\n * @returns {vec3} The color in RGB.\n *\n * @example\n * vec3 hsl = czm_RGBToHSL(rgb);\n * hsl.z *= 0.1;\n * rgb = czm_HSLToRGB(hsl);\n */\n\nvec3 hueToRGB(float hue)\n{\n    float r = abs(hue * 6.0 - 3.0) - 1.0;\n    float g = 2.0 - abs(hue * 6.0 - 2.0);\n    float b = 2.0 - abs(hue * 6.0 - 4.0);\n    return clamp(vec3(r, g, b), 0.0, 1.0);\n}\n\nvec3 czm_HSLToRGB(vec3 hsl)\n{\n    vec3 rgb = hueToRGB(hsl.x);\n    float c = (1.0 - abs(2.0 * hsl.z - 1.0)) * hsl.y;\n    return (rgb - 0.5) * c + hsl.z;\n}\n",kk="/**\n * Converts an RGB color to HSB (hue, saturation, brightness)\n * HSB <-> RGB conversion with minimal branching: {@link http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl}\n *\n * @name czm_RGBToHSB\n * @glslFunction\n * \n * @param {vec3} rgb The color in RGB.\n *\n * @returns {vec3} The color in HSB.\n *\n * @example\n * vec3 hsb = czm_RGBToHSB(rgb);\n * hsb.z *= 0.1;\n * rgb = czm_HSBToRGB(hsb);\n */\n\nconst vec4 K_RGB2HSB = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\nvec3 czm_RGBToHSB(vec3 rgb)\n{\n    vec4 p = mix(vec4(rgb.bg, K_RGB2HSB.wz), vec4(rgb.gb, K_RGB2HSB.xy), step(rgb.b, rgb.g));\n    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));\n\n    float d = q.x - min(q.w, q.y);\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + czm_epsilon7)), d / (q.x + czm_epsilon7), q.x);\n}\n",Uk="/**\n * Converts an RGB color to HSL (hue, saturation, lightness)\n * HSL <-> RGB conversion: {@link http://www.chilliant.com/rgb2hsv.html}\n *\n * @name czm_RGBToHSL\n * @glslFunction\n * \n * @param {vec3} rgb The color in RGB.\n *\n * @returns {vec3} The color in HSL.\n *\n * @example\n * vec3 hsl = czm_RGBToHSL(rgb);\n * hsl.z *= 0.1;\n * rgb = czm_HSLToRGB(hsl);\n */\n \nvec3 RGBtoHCV(vec3 rgb)\n{\n    // Based on work by Sam Hocevar and Emil Persson\n    vec4 p = (rgb.g < rgb.b) ? vec4(rgb.bg, -1.0, 2.0 / 3.0) : vec4(rgb.gb, 0.0, -1.0 / 3.0);\n    vec4 q = (rgb.r < p.x) ? vec4(p.xyw, rgb.r) : vec4(rgb.r, p.yzx);\n    float c = q.x - min(q.w, q.y);\n    float h = abs((q.w - q.y) / (6.0 * c + czm_epsilon7) + q.z);\n    return vec3(h, c, q.x);\n}\n\nvec3 czm_RGBToHSL(vec3 rgb)\n{\n    vec3 hcv = RGBtoHCV(rgb);\n    float l = hcv.z - hcv.y * 0.5;\n    float s = hcv.y / (1.0 - abs(l * 2.0 - 1.0) + czm_epsilon7);\n    return vec3(hcv.x, s, l);\n}\n",Vk="/**\n * Converts an RGB color to CIE Yxy.\n * <p>The conversion is described in\n * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}\n * </p>\n * \n * @name czm_RGBToXYZ\n * @glslFunction\n * \n * @param {vec3} rgb The color in RGB.\n *\n * @returns {vec3} The color in CIE Yxy.\n *\n * @example\n * vec3 xyz = czm_RGBToXYZ(rgb);\n * xyz.x = max(xyz.x - luminanceThreshold, 0.0);\n * rgb = czm_XYZToRGB(xyz);\n */\nvec3 czm_RGBToXYZ(vec3 rgb)\n{\n    const mat3 RGB2XYZ = mat3(0.4124, 0.2126, 0.0193,\n                              0.3576, 0.7152, 0.1192,\n                              0.1805, 0.0722, 0.9505);\n    vec3 xyz = RGB2XYZ * rgb;\n    vec3 Yxy;\n    Yxy.r = xyz.g;\n    float temp = dot(vec3(1.0), xyz);\n    Yxy.gb = xyz.rg / temp;\n    return Yxy;\n}\n",Hk="/**\n * Converts a CIE Yxy color to RGB.\n * <p>The conversion is described in\n * {@link http://content.gpwiki.org/index.php/D3DBook:High-Dynamic_Range_Rendering#Luminance_Transform|Luminance Transform}\n * </p>\n * \n * @name czm_XYZToRGB\n * @glslFunction\n * \n * @param {vec3} Yxy The color in CIE Yxy.\n *\n * @returns {vec3} The color in RGB.\n *\n * @example\n * vec3 xyz = czm_RGBToXYZ(rgb);\n * xyz.x = max(xyz.x - luminanceThreshold, 0.0);\n * rgb = czm_XYZToRGB(xyz);\n */\nvec3 czm_XYZToRGB(vec3 Yxy)\n{\n    const mat3 XYZ2RGB = mat3( 3.2405, -0.9693,  0.0556,\n                              -1.5371,  1.8760, -0.2040,\n                              -0.4985,  0.0416,  1.0572);\n    vec3 xyz;\n    xyz.r = Yxy.r * Yxy.g / Yxy.b;\n    xyz.g = Yxy.r;\n    xyz.b = Yxy.r * (1.0 - Yxy.g - Yxy.b) / Yxy.b;\n    \n    return XYZ2RGB * xyz;\n}\n",Gk="// See:\n//    https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\n\nvec3 czm_acesTonemapping(vec3 color) {\n    float g = 0.985;\n    float a = 0.065;\n    float b = 0.0001;\n    float c = 0.433;\n    float d = 0.238;\n\n    color = (color * (color + a) - b) / (color * (g * color + c) + d);\n\n    color = clamp(color, 0.0, 1.0);\n\n    return color;\n}\n",Wk="/**\n * @private\n */\nfloat czm_alphaWeight(float a)\n{\n    float z = (gl_FragCoord.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];\n\n    // See Weighted Blended Order-Independent Transparency for examples of different weighting functions:\n    // http://jcgt.org/published/0002/02/09/\n    return pow(a + 0.01, 4.0) + max(1e-2, min(3.0 * 1e3, 0.003 / (1e-5 + pow(abs(z) / 200.0, 4.0))));\n}\n",qk="/**\n * Procedural anti-aliasing by blurring two colors that meet at a sharp edge.\n *\n * @name czm_antialias\n * @glslFunction\n *\n * @param {vec4} color1 The color on one side of the edge.\n * @param {vec4} color2 The color on the other side of the edge.\n * @param {vec4} currentcolor The current color, either <code>color1</code> or <code>color2</code>.\n * @param {float} dist The distance to the edge in texture coordinates.\n * @param {float} [fuzzFactor=0.1] Controls the blurriness between the two colors.\n * @returns {vec4} The anti-aliased color.\n *\n * @example\n * // GLSL declarations\n * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor);\n * vec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist);\n *\n * // get the color for a material that has a sharp edge at the line y = 0.5 in texture space\n * float dist = abs(textureCoordinates.t - 0.5);\n * vec4 currentColor = mix(bottomColor, topColor, step(0.5, textureCoordinates.t));\n * vec4 color = czm_antialias(bottomColor, topColor, currentColor, dist, 0.1);\n */\nvec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist, float fuzzFactor)\n{\n    float val1 = clamp(dist / fuzzFactor, 0.0, 1.0);\n    float val2 = clamp((dist - 0.5) / fuzzFactor, 0.0, 1.0);\n    val1 = val1 * (1.0 - val2);\n    val1 = val1 * val1 * (3.0 - (2.0 * val1));\n    val1 = pow(val1, 0.5); //makes the transition nicer\n    \n    vec4 midColor = (color1 + color2) * 0.5;\n    return mix(midColor, currentColor, val1);\n}\n\nvec4 czm_antialias(vec4 color1, vec4 color2, vec4 currentColor, float dist)\n{\n    return czm_antialias(color1, color2, currentColor, dist, 0.1);\n}\n",Yk="/**\n * Approximately computes spherical coordinates given a normal.\n * Uses approximate inverse trigonometry for speed and consistency,\n * since inverse trigonometry can differ from vendor-to-vendor and when compared with the CPU.\n *\n * @name czm_approximateSphericalCoordinates\n * @glslFunction\n *\n * @param {vec3} normal arbitrary-length normal.\n *\n * @returns {vec2} Approximate latitude and longitude spherical coordinates.\n */\nvec2 czm_approximateSphericalCoordinates(vec3 normal) {\n    // Project into plane with vertical for latitude\n    float latitudeApproximation = czm_fastApproximateAtan(sqrt(normal.x * normal.x + normal.y * normal.y), normal.z);\n    float longitudeApproximation = czm_fastApproximateAtan(normal.x, normal.y);\n    return vec2(latitudeApproximation, longitudeApproximation);\n}\n",Xk="/**\n * Determines if the fragment is back facing\n *\n * @name czm_backFacing\n * @glslFunction \n * \n * @returns {bool} <code>true</code> if the fragment is back facing; otherwise, <code>false</code>.\n */\nbool czm_backFacing()\n{\n    // !gl_FrontFacing doesn't work as expected on Mac/Intel so use the more verbose form instead. See https://github.com/CesiumGS/cesium/pull/8494.\n    return gl_FrontFacing == false;\n}\n",Kk="/**\n * Branchless ternary operator to be used when it's inexpensive to explicitly\n * evaluate both possibilities for a float expression.\n *\n * @name czm_branchFreeTernary\n * @glslFunction\n *\n * @param {bool} comparison A comparison statement\n * @param {float} a Value to return if the comparison is true.\n * @param {float} b Value to return if the comparison is false.\n *\n * @returns {float} equivalent of comparison ? a : b\n */\nfloat czm_branchFreeTernary(bool comparison, float a, float b) {\n    float useA = float(comparison);\n    return a * useA + b * (1.0 - useA);\n}\n\n/**\n * Branchless ternary operator to be used when it's inexpensive to explicitly\n * evaluate both possibilities for a vec2 expression.\n *\n * @name czm_branchFreeTernary\n * @glslFunction\n *\n * @param {bool} comparison A comparison statement\n * @param {vec2} a Value to return if the comparison is true.\n * @param {vec2} b Value to return if the comparison is false.\n *\n * @returns {vec2} equivalent of comparison ? a : b\n */\nvec2 czm_branchFreeTernary(bool comparison, vec2 a, vec2 b) {\n    float useA = float(comparison);\n    return a * useA + b * (1.0 - useA);\n}\n\n/**\n * Branchless ternary operator to be used when it's inexpensive to explicitly\n * evaluate both possibilities for a vec3 expression.\n *\n * @name czm_branchFreeTernary\n * @glslFunction\n *\n * @param {bool} comparison A comparison statement\n * @param {vec3} a Value to return if the comparison is true.\n * @param {vec3} b Value to return if the comparison is false.\n *\n * @returns {vec3} equivalent of comparison ? a : b\n */\nvec3 czm_branchFreeTernary(bool comparison, vec3 a, vec3 b) {\n    float useA = float(comparison);\n    return a * useA + b * (1.0 - useA);\n}\n\n/**\n * Branchless ternary operator to be used when it's inexpensive to explicitly\n * evaluate both possibilities for a vec4 expression.\n *\n * @name czm_branchFreeTernary\n * @glslFunction\n *\n * @param {bool} comparison A comparison statement\n * @param {vec3} a Value to return if the comparison is true.\n * @param {vec3} b Value to return if the comparison is false.\n *\n * @returns {vec3} equivalent of comparison ? a : b\n */\nvec4 czm_branchFreeTernary(bool comparison, vec4 a, vec4 b) {\n    float useA = float(comparison);\n    return a * useA + b * (1.0 - useA);\n}\n",$k="\nvec4 czm_cascadeColor(vec4 weights)\n{\n    return vec4(1.0, 0.0, 0.0, 1.0) * weights.x +\n           vec4(0.0, 1.0, 0.0, 1.0) * weights.y +\n           vec4(0.0, 0.0, 1.0, 1.0) * weights.z +\n           vec4(1.0, 0.0, 1.0, 1.0) * weights.w;\n}\n",Jk="\nuniform vec4 shadowMap_cascadeDistances;\n\nfloat czm_cascadeDistance(vec4 weights)\n{\n    return dot(shadowMap_cascadeDistances, weights);\n}\n",Qk="\nuniform mat4 shadowMap_cascadeMatrices[4];\n\nmat4 czm_cascadeMatrix(vec4 weights)\n{\n    return shadowMap_cascadeMatrices[0] * weights.x +\n           shadowMap_cascadeMatrices[1] * weights.y +\n           shadowMap_cascadeMatrices[2] * weights.z +\n           shadowMap_cascadeMatrices[3] * weights.w;\n}\n",Zk="\nuniform vec4 shadowMap_cascadeSplits[2];\n\nvec4 czm_cascadeWeights(float depthEye)\n{\n    // One component is set to 1.0 and all others set to 0.0.\n    vec4 near = step(shadowMap_cascadeSplits[0], vec4(depthEye));\n    vec4 far = step(depthEye, shadowMap_cascadeSplits[1]);\n    return near * far;\n}\n",eU="/**\n * DOC_TBA\n *\n * @name czm_columbusViewMorph\n * @glslFunction\n */\nvec4 czm_columbusViewMorph(vec4 position2D, vec4 position3D, float time)\n{\n    // Just linear for now.\n    vec3 p = mix(position2D.xyz, position3D.xyz, time);\n    return vec4(p, 1.0);\n}\n",tU="/**\n * Returns a position in model coordinates relative to eye taking into\n * account the current scene mode: 3D, 2D, or Columbus view.\n * <p>\n * This uses standard position attributes, <code>position3DHigh</code>, \n * <code>position3DLow</code>, <code>position2DHigh</code>, and <code>position2DLow</code>, \n * and should be used when writing a vertex shader for an {@link Appearance}.\n * </p>\n *\n * @name czm_computePosition\n * @glslFunction\n *\n * @returns {vec4} The position relative to eye.\n *\n * @example\n * vec4 p = czm_computePosition();\n * v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n * gl_Position = czm_modelViewProjectionRelativeToEye * p;\n *\n * @see czm_translateRelativeToEye\n */\nvec4 czm_computePosition();\n",nU="/**\n * @private\n */\nvec2 cordic(float angle)\n{\n// Scale the vector by the appropriate factor for the 24 iterations to follow.\n    vec2 vector = vec2(6.0725293500888267e-1, 0.0);\n// Iteration 1\n    float sense = (angle < 0.0) ? -1.0 : 1.0;\n //   float factor = sense * 1.0;  // 2^-0\n    mat2 rotation = mat2(1.0, sense, -sense, 1.0);\n    vector = rotation * vector;\n    angle -= sense * 7.8539816339744828e-1;  // atan(2^-0)\n// Iteration 2\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    float factor = sense * 5.0e-1;  // 2^-1\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 4.6364760900080609e-1;  // atan(2^-1)\n// Iteration 3\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 2.5e-1;  // 2^-2\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 2.4497866312686414e-1;  // atan(2^-2)\n// Iteration 4\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.25e-1;  // 2^-3\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.2435499454676144e-1;  // atan(2^-3)\n// Iteration 5\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 6.25e-2;  // 2^-4\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 6.2418809995957350e-2;  // atan(2^-4)\n// Iteration 6\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 3.125e-2;  // 2^-5\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 3.1239833430268277e-2;  // atan(2^-5)\n// Iteration 7\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.5625e-2;  // 2^-6\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.5623728620476831e-2;  // atan(2^-6)\n// Iteration 8\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 7.8125e-3;  // 2^-7\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 7.8123410601011111e-3;  // atan(2^-7)\n// Iteration 9\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 3.90625e-3;  // 2^-8\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 3.9062301319669718e-3;  // atan(2^-8)\n// Iteration 10\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.953125e-3;  // 2^-9\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.9531225164788188e-3;  // atan(2^-9)\n// Iteration 11\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 9.765625e-4;  // 2^-10\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 9.7656218955931946e-4;  // atan(2^-10)\n// Iteration 12\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 4.8828125e-4;  // 2^-11\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 4.8828121119489829e-4;  // atan(2^-11)\n// Iteration 13\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 2.44140625e-4;  // 2^-12\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 2.4414062014936177e-4;  // atan(2^-12)\n// Iteration 14\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.220703125e-4;  // 2^-13\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.2207031189367021e-4;  // atan(2^-13)\n// Iteration 15\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 6.103515625e-5;  // 2^-14\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 6.1035156174208773e-5;  // atan(2^-14)\n// Iteration 16\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 3.0517578125e-5;  // 2^-15\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 3.0517578115526096e-5;  // atan(2^-15)\n// Iteration 17\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.52587890625e-5;  // 2^-16\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.5258789061315762e-5;  // atan(2^-16)\n// Iteration 18\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 7.62939453125e-6;  // 2^-17\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 7.6293945311019700e-6;  // atan(2^-17)\n// Iteration 19\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 3.814697265625e-6;  // 2^-18\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 3.8146972656064961e-6;  // atan(2^-18)\n// Iteration 20\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.9073486328125e-6;  // 2^-19\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 1.9073486328101870e-6;  // atan(2^-19)\n// Iteration 21\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 9.5367431640625e-7;  // 2^-20\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 9.5367431640596084e-7;  // atan(2^-20)\n// Iteration 22\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 4.76837158203125e-7;  // 2^-21\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 4.7683715820308884e-7;  // atan(2^-21)\n// Iteration 23\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 2.384185791015625e-7;  // 2^-22\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n    angle -= sense * 2.3841857910155797e-7;  // atan(2^-22)\n// Iteration 24\n    sense = (angle < 0.0) ? -1.0 : 1.0;\n    factor = sense * 1.1920928955078125e-7;  // 2^-23\n    rotation[0][1] = factor;\n    rotation[1][0] = -factor;\n    vector = rotation * vector;\n//    angle -= sense * 1.1920928955078068e-7;  // atan(2^-23)\n\n    return vector;\n}\n\n/**\n * Computes the cosine and sine of the provided angle using the CORDIC algorithm.\n *\n * @name czm_cosineAndSine\n * @glslFunction\n *\n * @param {float} angle The angle in radians.\n *\n * @returns {vec2} The resulting cosine of the angle (as the x coordinate) and sine of the angle (as the y coordinate).\n *\n * @example\n * vec2 v = czm_cosineAndSine(czm_piOverSix);\n * float cosine = v.x;\n * float sine = v.y;\n */\nvec2 czm_cosineAndSine(float angle)\n{\n    if (angle < -czm_piOverTwo || angle > czm_piOverTwo)\n    {\n        if (angle < 0.0)\n        {\n            return -cordic(angle + czm_pi);\n        }\n        else\n        {\n            return -cordic(angle - czm_pi);\n        }\n    }\n    else\n    {\n        return cordic(angle);\n    }\n}\n",iU="/**\n * Decompresses texture coordinates that were packed into a single float.\n *\n * @name czm_decompressTextureCoordinates\n * @glslFunction\n *\n * @param {float} encoded The compressed texture coordinates.\n * @returns {vec2} The decompressed texture coordinates.\n */\n vec2 czm_decompressTextureCoordinates(float encoded)\n {\n    float temp = encoded / 4096.0;\n    float xZeroTo4095 = floor(temp);\n    float stx = xZeroTo4095 / 4095.0;\n    float sty = (encoded - xZeroTo4095 * 4096.0) / 4095.0;\n    return vec2(stx, sty);\n }\n",oU="/**\n * Get default parameters for physically based rendering. These defaults\n * describe a rough dielectric (non-metal) surface (e.g. rough plastic).\n *\n * @return {czm_pbrParameters} Default parameters for {@link czm_pbrLighting}\n */\nczm_pbrParameters czm_defaultPbrMaterial()\n{\n    czm_pbrParameters results;\n    results.diffuseColor = vec3(1.0);\n    results.roughness = 1.0;\n\n    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);\n    results.f0 = REFLECTANCE_DIELECTRIC;\n    return results;\n}\n",rU="// emulated noperspective\n#if defined(GL_EXT_frag_depth) && !defined(LOG_DEPTH)\nvarying float v_WindowZ;\n#endif\n\n/**\n * Emulates GL_DEPTH_CLAMP, which is not available in WebGL 1 or 2.\n * GL_DEPTH_CLAMP clamps geometry that is outside the near and far planes, \n * capping the shadow volume. More information here: \n * https://www.khronos.org/registry/OpenGL/extensions/ARB/ARB_depth_clamp.txt.\n *\n * When GL_EXT_frag_depth is available we emulate GL_DEPTH_CLAMP by ensuring \n * no geometry gets clipped by setting the clip space z value to 0.0 and then\n * sending the unaltered screen space z value (using emulated noperspective\n * interpolation) to the frag shader where it is clamped to [0,1] and then\n * written with gl_FragDepth (see czm_writeDepthClamp). This technique is based on:\n * https://stackoverflow.com/questions/5960757/how-to-emulate-gl-depth-clamp-nv.\n *\n * When GL_EXT_frag_depth is not available, which is the case on some mobile \n * devices, we must attempt to fix this only in the vertex shader. \n * The approach is to clamp the z value to the far plane, which closes the \n * shadow volume but also distorts the geometry, so there can still be artifacts\n * on frustum seams.\n *\n * @name czm_depthClamp\n * @glslFunction\n *\n * @param {vec4} coords The vertex in clip coordinates.\n * @returns {vec4} The modified vertex.\n *\n * @example\n * gl_Position = czm_depthClamp(czm_modelViewProjection * vec4(position, 1.0));\n *\n * @see czm_writeDepthClamp\n */\nvec4 czm_depthClamp(vec4 coords)\n{\n#ifndef LOG_DEPTH\n#ifdef GL_EXT_frag_depth\n    v_WindowZ = (0.5 * (coords.z / coords.w) + 0.5) * coords.w;\n    coords.z = 0.0;\n#else\n    coords.z = min(coords.z, coords.w);\n#endif\n#endif\n    return coords;\n}\n",aU="/**\n * Computes a 3x3 rotation matrix that transforms vectors from an ellipsoid's east-north-up coordinate system \n * to eye coordinates.  In east-north-up coordinates, x points east, y points north, and z points along the \n * surface normal.  East-north-up can be used as an ellipsoid's tangent space for operations such as bump mapping.\n * <br /><br />\n * The ellipsoid is assumed to be centered at the model coordinate's origin.\n *\n * @name czm_eastNorthUpToEyeCoordinates\n * @glslFunction\n *\n * @param {vec3} positionMC The position on the ellipsoid in model coordinates.\n * @param {vec3} normalEC The normalized ellipsoid surface normal, at <code>positionMC</code>, in eye coordinates.\n *\n * @returns {mat3} A 3x3 rotation matrix that transforms vectors from the east-north-up coordinate system to eye coordinates.\n *\n * @example\n * // Transform a vector defined in the east-north-up coordinate \n * // system, (0, 0, 1) which is the surface normal, to eye \n * // coordinates.\n * mat3 m = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\n * vec3 normalEC = m * vec3(0.0, 0.0, 1.0);\n */\nmat3 czm_eastNorthUpToEyeCoordinates(vec3 positionMC, vec3 normalEC)\n{\n    vec3 tangentMC = normalize(vec3(-positionMC.y, positionMC.x, 0.0));  // normalized surface tangent in model coordinates\n    vec3 tangentEC = normalize(czm_normal3D * tangentMC);                // normalized surface tangent in eye coordiantes\n    vec3 bitangentEC = normalize(cross(normalEC, tangentEC));            // normalized surface bitangent in eye coordinates\n\n    return mat3(\n        tangentEC.x,   tangentEC.y,   tangentEC.z,\n        bitangentEC.x, bitangentEC.y, bitangentEC.z,\n        normalEC.x,    normalEC.y,    normalEC.z);\n}\n",sU="/**\n * DOC_TBA\n *\n * @name czm_ellipsoidContainsPoint\n * @glslFunction\n *\n */\nbool czm_ellipsoidContainsPoint(vec3 ellipsoid_inverseRadii, vec3 point)\n{\n    vec3 scaled = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(point, 1.0)).xyz;\n    return (dot(scaled, scaled) <= 1.0);\n}\n",cU="/**\n * DOC_TBA\n *\n * @name czm_ellipsoidWgs84TextureCoordinates\n * @glslFunction\n */\nvec2 czm_ellipsoidWgs84TextureCoordinates(vec3 normal)\n{\n    return vec2(atan(normal.y, normal.x) * czm_oneOverTwoPi + 0.5, asin(normal.z) * czm_oneOverPi + 0.5);\n}\n",lU="/**\n * Compares <code>left</code> and <code>right</code> componentwise. Returns <code>true</code>\n * if they are within <code>epsilon</code> and <code>false</code> otherwise. The inputs\n * <code>left</code> and <code>right</code> can be <code>float</code>s, <code>vec2</code>s,\n * <code>vec3</code>s, or <code>vec4</code>s.\n *\n * @name czm_equalsEpsilon\n * @glslFunction\n *\n * @param {} left The first vector.\n * @param {} right The second vector.\n * @param {float} epsilon The epsilon to use for equality testing.\n * @returns {bool} <code>true</code> if the components are within <code>epsilon</code> and <code>false</code> otherwise.\n *\n * @example\n * // GLSL declarations\n * bool czm_equalsEpsilon(float left, float right, float epsilon);\n * bool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon);\n * bool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon);\n * bool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon);\n */\nbool czm_equalsEpsilon(vec4 left, vec4 right, float epsilon) {\n    return all(lessThanEqual(abs(left - right), vec4(epsilon)));\n}\n\nbool czm_equalsEpsilon(vec3 left, vec3 right, float epsilon) {\n    return all(lessThanEqual(abs(left - right), vec3(epsilon)));\n}\n\nbool czm_equalsEpsilon(vec2 left, vec2 right, float epsilon) {\n    return all(lessThanEqual(abs(left - right), vec2(epsilon)));\n}\n\nbool czm_equalsEpsilon(float left, float right, float epsilon) {\n    return (abs(left - right) <= epsilon);\n}\n",uU="/**\n * DOC_TBA\n *\n * @name czm_eyeOffset\n * @glslFunction\n *\n * @param {vec4} positionEC DOC_TBA.\n * @param {vec3} eyeOffset DOC_TBA.\n *\n * @returns {vec4} DOC_TBA.\n */\nvec4 czm_eyeOffset(vec4 positionEC, vec3 eyeOffset)\n{\n    // This equation is approximate in x and y.\n    vec4 p = positionEC;\n    vec4 zEyeOffset = normalize(p) * eyeOffset.z;\n    p.xy += eyeOffset.xy + zEyeOffset.xy;\n    p.z += zEyeOffset.z;\n    return p;\n}\n",hU="/**\n * Transforms a position from eye to window coordinates.  The transformation\n * from eye to clip coordinates is done using {@link czm_projection}.\n * The transform from normalized device coordinates to window coordinates is\n * done using {@link czm_viewportTransformation}, which assumes a depth range\n * of <code>near = 0</code> and <code>far = 1</code>.\n * <br /><br />\n * This transform is useful when there is a need to manipulate window coordinates\n * in a vertex shader as done by {@link BillboardCollection}.\n *\n * @name czm_eyeToWindowCoordinates\n * @glslFunction\n *\n * @param {vec4} position The position in eye coordinates to transform.\n *\n * @returns {vec4} The transformed position in window coordinates.\n *\n * @see czm_modelToWindowCoordinates\n * @see czm_projection\n * @see czm_viewportTransformation\n * @see BillboardCollection\n *\n * @example\n * vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n */\nvec4 czm_eyeToWindowCoordinates(vec4 positionEC)\n{\n    vec4 q = czm_projection * positionEC;                        // clip coordinates\n    q.xyz /= q.w;                                                // normalized device coordinates\n    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates\n    return q;\n}\n",dU="/**\n * Approxiamtes atan over the range [0, 1]. Safe to flip output for negative input.\n *\n * Based on Michal Drobot's approximation from ShaderFastLibs, which in turn is based on\n * \"Efficient approximations for the arctangent function,\" Rajan, S. Sichun Wang Inkol, R. Joyal, A., May 2006.\n * Adapted from ShaderFastLibs under MIT License.\n *\n * Chosen for the following characteristics over range [0, 1]:\n * - basically no error at 0 and 1, important for getting around range limit (naive atan2 via atan requires infinite range atan)\n * - no visible artifacts from first-derivative discontinuities, unlike latitude via range-reduced sqrt asin approximations (at equator)\n *\n * The original code is x * (-0.1784 * abs(x) - 0.0663 * x * x + 1.0301);\n * Removed the abs() in here because it isn't needed, the input range is guaranteed as [0, 1] by how we're approximating atan2.\n *\n * @name czm_fastApproximateAtan\n * @glslFunction\n *\n * @param {float} x Value between 0 and 1 inclusive.\n *\n * @returns {float} Approximation of atan(x)\n */\nfloat czm_fastApproximateAtan(float x) {\n    return x * (-0.1784 * x - 0.0663 * x * x + 1.0301);\n}\n\n/**\n * Approximation of atan2.\n *\n * Range reduction math based on nvidia's cg reference implementation for atan2: http://developer.download.nvidia.com/cg/atan2.html\n * However, we replaced their atan curve with Michael Drobot's (see above).\n *\n * @name czm_fastApproximateAtan\n * @glslFunction\n *\n * @param {float} x Value between -1 and 1 inclusive.\n * @param {float} y Value between -1 and 1 inclusive.\n *\n * @returns {float} Approximation of atan2(x, y)\n */\nfloat czm_fastApproximateAtan(float x, float y) {\n    // atan approximations are usually only reliable over [-1, 1], or, in our case, [0, 1] due to modifications.\n    // So range-reduce using abs and by flipping whether x or y is on top.\n    float t = abs(x); // t used as swap and atan result.\n    float opposite = abs(y);\n    float adjacent = max(t, opposite);\n    opposite = min(t, opposite);\n\n    t = czm_fastApproximateAtan(opposite / adjacent);\n\n    // Undo range reduction\n    t = czm_branchFreeTernary(abs(y) > abs(x), czm_piOverTwo - t, t);\n    t = czm_branchFreeTernary(x < 0.0, czm_pi - t, t);\n    t = czm_branchFreeTernary(y < 0.0, -t, t);\n    return t;\n}\n",fU="/**\n * Gets the color with fog at a distance from the camera.\n *\n * @name czm_fog\n * @glslFunction\n *\n * @param {float} distanceToCamera The distance to the camera in meters.\n * @param {vec3} color The original color.\n * @param {vec3} fogColor The color of the fog.\n *\n * @returns {vec3} The color adjusted for fog at the distance from the camera.\n */\nvec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor)\n{\n    float scalar = distanceToCamera * czm_fogDensity;\n    float fog = 1.0 - exp(-(scalar * scalar));\n    return mix(color, fogColor, fog);\n}\n\n/**\n * Gets the color with fog at a distance from the camera.\n *\n * @name czm_fog\n * @glslFunction\n *\n * @param {float} distanceToCamera The distance to the camera in meters.\n * @param {vec3} color The original color.\n * @param {vec3} fogColor The color of the fog.\n * @param {float} fogModifierConstant A constant to modify the appearance of fog.\n *\n * @returns {vec3} The color adjusted for fog at the distance from the camera.\n */\nvec3 czm_fog(float distanceToCamera, vec3 color, vec3 fogColor, float fogModifierConstant)\n{\n    float scalar = distanceToCamera * czm_fogDensity;\n    float fog = 1.0 - exp(-((fogModifierConstant * scalar + fogModifierConstant) * (scalar * (1.0 + fogModifierConstant))));\n    return mix(color, fogColor, fog);\n}\n",pU="/**\n * Converts a color from RGB space to linear space.\n *\n * @name czm_gammaCorrect\n * @glslFunction\n *\n * @param {vec3} color The color in RGB space.\n * @returns {vec3} The color in linear space.\n */\nvec3 czm_gammaCorrect(vec3 color) {\n#ifdef HDR\n    color = pow(color, vec3(czm_gamma));\n#endif\n    return color;\n}\n\nvec4 czm_gammaCorrect(vec4 color) {\n#ifdef HDR\n    color.rgb = pow(color.rgb, vec3(czm_gamma));\n#endif\n    return color;\n}\n",mU="/**\n * DOC_TBA\n *\n * @name czm_geodeticSurfaceNormal\n * @glslFunction\n *\n * @param {vec3} positionOnEllipsoid DOC_TBA\n * @param {vec3} ellipsoidCenter DOC_TBA\n * @param {vec3} oneOverEllipsoidRadiiSquared DOC_TBA\n * \n * @returns {vec3} DOC_TBA.\n */\nvec3 czm_geodeticSurfaceNormal(vec3 positionOnEllipsoid, vec3 ellipsoidCenter, vec3 oneOverEllipsoidRadiiSquared)\n{\n    return normalize((positionOnEllipsoid - ellipsoidCenter) * oneOverEllipsoidRadiiSquared);\n}\n",_U="/**\n * An czm_material with default values. Every material's czm_getMaterial\n * should use this default material as a base for the material it returns.\n * The default normal value is given by materialInput.normalEC.\n *\n * @name czm_getDefaultMaterial\n * @glslFunction\n *\n * @param {czm_materialInput} input The input used to construct the default material.\n *\n * @returns {czm_material} The default material.\n *\n * @see czm_materialInput\n * @see czm_material\n * @see czm_getMaterial\n */\nczm_material czm_getDefaultMaterial(czm_materialInput materialInput)\n{\n    czm_material material;\n    material.diffuse = vec3(0.0);\n    material.specular = 0.0;\n    material.shininess = 1.0;\n    material.normal = materialInput.normalEC;\n    material.emission = vec3(0.0);\n    material.alpha = 1.0;\n    return material;\n}\n",gU="/**\n * Calculates the intensity of diffusely reflected light.\n *\n * @name czm_getLambertDiffuse\n * @glslFunction\n *\n * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.\n * @param {vec3} normalEC The surface normal in eye coordinates.\n *\n * @returns {float} The intensity of the diffuse reflection.\n *\n * @see czm_phong\n *\n * @example\n * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);\n * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);\n * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);\n */\nfloat czm_getLambertDiffuse(vec3 lightDirectionEC, vec3 normalEC)\n{\n    return max(dot(lightDirectionEC, normalEC), 0.0);\n}\n",bU="/**\n * Calculates the specular intensity of reflected light.\n *\n * @name czm_getSpecular\n * @glslFunction\n *\n * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.\n * @param {vec3} toEyeEC Unit vector pointing to the eye position in eye coordinates.\n * @param {vec3} normalEC The surface normal in eye coordinates.\n * @param {float} shininess The sharpness of the specular reflection.  Higher values create a smaller, more focused specular highlight.\n *\n * @returns {float} The intensity of the specular highlight.\n *\n * @see czm_phong\n *\n * @example\n * float diffuseIntensity = czm_getLambertDiffuse(lightDirectionEC, normalEC);\n * float specularIntensity = czm_getSpecular(lightDirectionEC, toEyeEC, normalEC, 200);\n * vec3 color = (diffuseColor * diffuseIntensity) + (specularColor * specularIntensity);\n */\nfloat czm_getSpecular(vec3 lightDirectionEC, vec3 toEyeEC, vec3 normalEC, float shininess)\n{\n    vec3 toReflectedLight = reflect(-lightDirectionEC, normalEC);\n    float specular = max(dot(toReflectedLight, toEyeEC), 0.0);\n\n    // pow has undefined behavior if both parameters <= 0.\n    // Prevent this by making sure shininess is at least czm_epsilon2.\n    return pow(specular, max(shininess, czm_epsilon2));\n}\n",yU="/**\n * @private\n */\nvec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)\n{\n    float cosAngle = cos(angleInRadians);\n    float sinAngle = sin(angleInRadians);\n\n    // time dependent sampling directions\n    vec2 s0 = vec2(1.0/17.0, 0.0);\n    vec2 s1 = vec2(-1.0/29.0, 0.0);\n    vec2 s2 = vec2(1.0/101.0, 1.0/59.0);\n    vec2 s3 = vec2(-1.0/109.0, -1.0/57.0);\n\n    // rotate sampling direction by specified angle\n    s0 = vec2((cosAngle * s0.x) - (sinAngle * s0.y), (sinAngle * s0.x) + (cosAngle * s0.y));\n    s1 = vec2((cosAngle * s1.x) - (sinAngle * s1.y), (sinAngle * s1.x) + (cosAngle * s1.y));\n    s2 = vec2((cosAngle * s2.x) - (sinAngle * s2.y), (sinAngle * s2.x) + (cosAngle * s2.y));\n    s3 = vec2((cosAngle * s3.x) - (sinAngle * s3.y), (sinAngle * s3.x) + (cosAngle * s3.y));\n\n    vec2 uv0 = (uv/103.0) + (time * s0);\n    vec2 uv1 = uv/107.0 + (time * s1) + vec2(0.23);\n    vec2 uv2 = uv/vec2(897.0, 983.0) + (time * s2) + vec2(0.51);\n    vec2 uv3 = uv/vec2(991.0, 877.0) + (time * s3) + vec2(0.71);\n\n    uv0 = fract(uv0);\n    uv1 = fract(uv1);\n    uv2 = fract(uv2);\n    uv3 = fract(uv3);\n    vec4 noise = (texture2D(normalMap, uv0)) +\n                 (texture2D(normalMap, uv1)) +\n                 (texture2D(normalMap, uv2)) +\n                 (texture2D(normalMap, uv3));\n\n    // average and scale to between -1 and 1\n    return ((noise / 4.0) - 0.5) * 2.0;\n}\n",vU="/**\n * Adjusts the hue of a color.\n * \n * @name czm_hue\n * @glslFunction\n * \n * @param {vec3} rgb The color.\n * @param {float} adjustment The amount to adjust the hue of the color in radians.\n *\n * @returns {float} The color with the hue adjusted.\n *\n * @example\n * vec3 adjustHue = czm_hue(color, czm_pi); // The same as czm_hue(color, -czm_pi)\n */\nvec3 czm_hue(vec3 rgb, float adjustment)\n{\n    const mat3 toYIQ = mat3(0.299,     0.587,     0.114,\n                            0.595716, -0.274453, -0.321263,\n                            0.211456, -0.522591,  0.311135);\n    const mat3 toRGB = mat3(1.0,  0.9563,  0.6210,\n                            1.0, -0.2721, -0.6474,\n                            1.0, -1.107,   1.7046);\n    \n    vec3 yiq = toYIQ * rgb;\n    float hue = atan(yiq.z, yiq.y) + adjustment;\n    float chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);\n    \n    vec3 color = vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));\n    return toRGB * color;\n}\n",OU="/**\n * Converts a color in linear space to RGB space.\n *\n * @name czm_inverseGamma\n * @glslFunction\n *\n * @param {vec3} color The color in linear space.\n * @returns {vec3} The color in RGB space.\n */\nvec3 czm_inverseGamma(vec3 color) {\n    return pow(color, vec3(1.0 / czm_gamma));\n}\n",AU="/**\n * Determines if a time interval is empty.\n *\n * @name czm_isEmpty\n * @glslFunction \n * \n * @param {czm_raySegment} interval The interval to test.\n * \n * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.\n *\n * @example\n * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true\n * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false\n * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.\n */\nbool czm_isEmpty(czm_raySegment interval)\n{\n    return (interval.stop < 0.0);\n}\n",wU="/**\n * Determines if a time interval is empty.\n *\n * @name czm_isFull\n * @glslFunction \n * \n * @param {czm_raySegment} interval The interval to test.\n * \n * @returns {bool} <code>true</code> if the time interval is empty; otherwise, <code>false</code>.\n *\n * @example\n * bool b0 = czm_isEmpty(czm_emptyRaySegment);      // true\n * bool b1 = czm_isEmpty(czm_raySegment(0.0, 1.0)); // false\n * bool b2 = czm_isEmpty(czm_raySegment(1.0, 1.0)); // false, contains 1.0.\n */\nbool czm_isFull(czm_raySegment interval)\n{\n    return (interval.start == 0.0 && interval.stop == czm_infinity);\n}\n",TU="/**\n * Computes the fraction of a Web Wercator rectangle at which a given geodetic latitude is located.\n *\n * @name czm_latitudeToWebMercatorFraction\n * @glslFunction\n *\n * @param {float} latitude The geodetic latitude, in radians.\n * @param {float} southMercatorY The Web Mercator coordinate of the southern boundary of the rectangle.\n * @param {float} oneOverMercatorHeight The total height of the rectangle in Web Mercator coordinates.\n *\n * @returns {float} The fraction of the rectangle at which the latitude occurs.  If the latitude is the southern\n *          boundary of the rectangle, the return value will be zero.  If it is the northern boundary, the return\n *          value will be 1.0.  Latitudes in between are mapped according to the Web Mercator projection.\n */ \nfloat czm_latitudeToWebMercatorFraction(float latitude, float southMercatorY, float oneOverMercatorHeight)\n{\n    float sinLatitude = sin(latitude);\n    float mercatorY = 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n    \n    return (mercatorY - southMercatorY) * oneOverMercatorHeight;\n}\n",CU="/**\n * Computes distance from an point in 2D to a line in 2D.\n *\n * @name czm_lineDistance\n * @glslFunction\n *\n * param {vec2} point1 A point along the line.\n * param {vec2} point2 A point along the line.\n * param {vec2} point A point that may or may not be on the line.\n * returns {float} The distance from the point to the line.\n */\nfloat czm_lineDistance(vec2 point1, vec2 point2, vec2 point) {\n    return abs((point2.y - point1.y) * point.x - (point2.x - point1.x) * point.y + point2.x * point1.y - point2.y * point1.x) / distance(point2, point1);\n}\n",EU="/**\n * Converts a linear RGB color to an sRGB color.\n *\n * @param {vec3|vec4} linearIn The color in linear color space.\n * @returns {vec3|vec4} The color in sRGB color space. The vector type matches the input.\n */\nvec3 czm_linearToSrgb(vec3 linearIn) \n{\n    return pow(linearIn, vec3(1.0/2.2));\n}\n\nvec4 czm_linearToSrgb(vec4 linearIn) \n{\n    vec3 srgbOut = pow(linearIn.rgb, vec3(1.0/2.2));\n    return vec4(srgbOut, linearIn.a);\n}\n",xU="/**\n * Computes the luminance of a color. \n *\n * @name czm_luminance\n * @glslFunction\n *\n * @param {vec3} rgb The color.\n * \n * @returns {float} The luminance.\n *\n * @example\n * float light = czm_luminance(vec3(0.0)); // 0.0\n * float dark = czm_luminance(vec3(1.0));  // ~1.0 \n */\nfloat czm_luminance(vec3 rgb)\n{\n    // Algorithm from Chapter 10 of Graphics Shaders.\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    return dot(rgb, W);\n}\n",SU="/**\n * Computes the size of a pixel in meters at a distance from the eye.\n * <p>\n * Use this version when passing in a custom pixel ratio. For example, passing in 1.0 will return meters per native device pixel.\n * </p>\n * @name czm_metersPerPixel\n * @glslFunction\n *\n * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.\n * @param {float} pixelRatio The scaling factor from pixel space to coordinate space\n *\n * @returns {float} The meters per pixel at positionEC.\n */\nfloat czm_metersPerPixel(vec4 positionEC, float pixelRatio)\n{\n    float width = czm_viewport.z;\n    float height = czm_viewport.w;\n    float pixelWidth;\n    float pixelHeight;\n\n    float top = czm_frustumPlanes.x;\n    float bottom = czm_frustumPlanes.y;\n    float left = czm_frustumPlanes.z;\n    float right = czm_frustumPlanes.w;\n\n    if (czm_sceneMode == czm_sceneMode2D || czm_orthographicIn3D == 1.0)\n    {\n        float frustumWidth = right - left;\n        float frustumHeight = top - bottom;\n        pixelWidth = frustumWidth / width;\n        pixelHeight = frustumHeight / height;\n    }\n    else\n    {\n        float distanceToPixel = -positionEC.z;\n        float inverseNear = 1.0 / czm_currentFrustum.x;\n        float tanTheta = top * inverseNear;\n        pixelHeight = 2.0 * distanceToPixel * tanTheta / height;\n        tanTheta = right * inverseNear;\n        pixelWidth = 2.0 * distanceToPixel * tanTheta / width;\n    }\n\n    return max(pixelWidth, pixelHeight) * pixelRatio;\n}\n\n/**\n * Computes the size of a pixel in meters at a distance from the eye.\n * <p>\n * Use this version when scaling by pixel ratio.\n * </p>\n * @name czm_metersPerPixel\n * @glslFunction\n *\n * @param {vec3} positionEC The position to get the meters per pixel in eye coordinates.\n *\n * @returns {float} The meters per pixel at positionEC.\n */\nfloat czm_metersPerPixel(vec4 positionEC)\n{\n    return czm_metersPerPixel(positionEC, czm_pixelRatio);\n}\n",IU="/**\n * Transforms a position from model to window coordinates.  The transformation\n * from model to clip coordinates is done using {@link czm_modelViewProjection}.\n * The transform from normalized device coordinates to window coordinates is\n * done using {@link czm_viewportTransformation}, which assumes a depth range\n * of <code>near = 0</code> and <code>far = 1</code>.\n * <br /><br />\n * This transform is useful when there is a need to manipulate window coordinates\n * in a vertex shader as done by {@link BillboardCollection}.\n * <br /><br />\n * This function should not be confused with {@link czm_viewportOrthographic},\n * which is an orthographic projection matrix that transforms from window \n * coordinates to clip coordinates.\n *\n * @name czm_modelToWindowCoordinates\n * @glslFunction\n *\n * @param {vec4} position The position in model coordinates to transform.\n *\n * @returns {vec4} The transformed position in window coordinates.\n *\n * @see czm_eyeToWindowCoordinates\n * @see czm_modelViewProjection\n * @see czm_viewportTransformation\n * @see czm_viewportOrthographic\n * @see BillboardCollection\n *\n * @example\n * vec4 positionWC = czm_modelToWindowCoordinates(positionMC);\n */\nvec4 czm_modelToWindowCoordinates(vec4 position)\n{\n    vec4 q = czm_modelViewProjection * position;                // clip coordinates\n    q.xyz /= q.w;                                                // normalized device coordinates\n    q.xyz = (czm_viewportTransformation * vec4(q.xyz, 1.0)).xyz; // window coordinates\n    return q;\n}\n",DU="/**\n * DOC_TBA\n *\n * @name czm_multiplyWithColorBalance\n * @glslFunction\n */\nvec3 czm_multiplyWithColorBalance(vec3 left, vec3 right)\n{\n    // Algorithm from Chapter 10 of Graphics Shaders.\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    \n    vec3 target = left * right;\n    float leftLuminance = dot(left, W);\n    float rightLuminance = dot(right, W);\n    float targetLuminance = dot(target, W);\n    \n    return ((leftLuminance + rightLuminance) / (2.0 * targetLuminance)) * target;\n}\n",PU="/**\n * Computes a value that scales with distance.  The scaling is clamped at the near and\n * far distances, and does not extrapolate.  This function works with the\n * {@link NearFarScalar} JavaScript class.\n *\n * @name czm_nearFarScalar\n * @glslFunction\n *\n * @param {vec4} nearFarScalar A vector with 4 components: Near distance (x), Near value (y), Far distance (z), Far value (w).\n * @param {float} cameraDistSq The square of the current distance from the camera.\n *\n * @returns {float} The value at this distance.\n */\nfloat czm_nearFarScalar(vec4 nearFarScalar, float cameraDistSq)\n{\n    float valueAtMin = nearFarScalar.y;\n    float valueAtMax = nearFarScalar.w;\n    float nearDistanceSq = nearFarScalar.x * nearFarScalar.x;\n    float farDistanceSq = nearFarScalar.z * nearFarScalar.z;\n\n    float t = (cameraDistSq - nearDistanceSq) / (farDistanceSq - nearDistanceSq);\n\n    t = pow(clamp(t, 0.0, 1.0), 0.2);\n\n    return mix(valueAtMin, valueAtMax, t);\n}\n",jU=" /**\n  * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.\n  * The 'oct' encoding is described in \"A Survey of Efficient Representations of Independent Unit Vectors\",\n  * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/\n  *\n  * @name czm_octDecode\n  * @param {vec2} encoded The oct-encoded, unit-length vector\n  * @param {float} range The maximum value of the SNORM range. The encoded vector is stored in log2(rangeMax+1) bits.\n  * @returns {vec3} The decoded and normalized vector\n  */\n  vec3 czm_octDecode(vec2 encoded, float range)\n  {\n      if (encoded.x == 0.0 && encoded.y == 0.0) {\n          return vec3(0.0, 0.0, 0.0);\n      }\n\n     encoded = encoded / range * 2.0 - 1.0;\n     vec3 v = vec3(encoded.x, encoded.y, 1.0 - abs(encoded.x) - abs(encoded.y));\n     if (v.z < 0.0)\n     {\n         v.xy = (1.0 - abs(v.yx)) * czm_signNotZero(v.xy);\n     }\n\n     return normalize(v);\n  }\n\n/**\n * Decodes a unit-length vector in 'oct' encoding to a normalized 3-component Cartesian vector.\n * The 'oct' encoding is described in \"A Survey of Efficient Representations of Independent Unit Vectors\",\n * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/\n *\n * @name czm_octDecode\n * @param {vec2} encoded The oct-encoded, unit-length vector\n * @returns {vec3} The decoded and normalized vector\n */\n vec3 czm_octDecode(vec2 encoded)\n {\n    return czm_octDecode(encoded, 255.0);\n }\n\n /**\n * Decodes a unit-length vector in 'oct' encoding packed into a floating-point number to a normalized 3-component Cartesian vector.\n * The 'oct' encoding is described in \"A Survey of Efficient Representations of Independent Unit Vectors\",\n * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/\n *\n * @name czm_octDecode\n * @param {float} encoded The oct-encoded, unit-length vector\n * @returns {vec3} The decoded and normalized vector\n */\n vec3 czm_octDecode(float encoded)\n {\n    float temp = encoded / 256.0;\n    float x = floor(temp);\n    float y = (temp - x) * 256.0;\n    return czm_octDecode(vec2(x, y));\n }\n\n/**\n * Decodes three unit-length vectors in 'oct' encoding packed into two floating-point numbers to normalized 3-component Cartesian vectors.\n * The 'oct' encoding is described in \"A Survey of Efficient Representations of Independent Unit Vectors\",\n * Cigolle et al 2014: http://jcgt.org/published/0003/02/01/\n *\n * @name czm_octDecode\n * @param {vec2} encoded The packed oct-encoded, unit-length vectors.\n * @param {vec3} vector1 One decoded and normalized vector.\n * @param {vec3} vector2 One decoded and normalized vector.\n * @param {vec3} vector3 One decoded and normalized vector.\n */\n  void czm_octDecode(vec2 encoded, out vec3 vector1, out vec3 vector2, out vec3 vector3)\n {\n    float temp = encoded.x / 65536.0;\n    float x = floor(temp);\n    float encodedFloat1 = (temp - x) * 65536.0;\n\n    temp = encoded.y / 65536.0;\n    float y = floor(temp);\n    float encodedFloat2 = (temp - y) * 65536.0;\n\n    vector1 = czm_octDecode(encodedFloat1);\n    vector2 = czm_octDecode(encodedFloat2);\n    vector3 = czm_octDecode(vec2(x, y));\n }\n\n",RU="/**\n * Packs a depth value into a vec3 that can be represented by unsigned bytes.\n *\n * @name czm_packDepth\n * @glslFunction\n *\n * @param {float} depth The floating-point depth.\n * @returns {vec3} The packed depth.\n */\nvec4 czm_packDepth(float depth)\n{\n    // See Aras Pranckevičius' post Encoding Floats to RGBA\n    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\n    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;\n    enc = fract(enc);\n    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n    return enc;\n}\n",LU="vec3 lambertianDiffuse(vec3 diffuseColor)\n{\n    return diffuseColor / czm_pi;\n}\n\nvec3 fresnelSchlick2(vec3 f0, vec3 f90, float VdotH)\n{\n    return f0 + (f90 - f0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\n}\n\nfloat smithVisibilityG1(float NdotV, float roughness)\n{\n    // this is the k value for direct lighting.\n    // for image based lighting it will be roughness^2 / 2\n    float k = (roughness + 1.0) * (roughness + 1.0) / 8.0;\n    return NdotV / (NdotV * (1.0 - k) + k);\n}\n\nfloat smithVisibilityGGX(float roughness, float NdotL, float NdotV)\n{\n    return (\n        smithVisibilityG1(NdotL, roughness) *\n        smithVisibilityG1(NdotV, roughness)\n    );\n}\n\nfloat GGX(float roughness, float NdotH)\n{\n    float roughnessSquared = roughness * roughness;\n    float f = (NdotH * roughnessSquared - NdotH) * NdotH + 1.0;\n    return roughnessSquared / (czm_pi * f * f);\n}\n\n/**\n * Compute the diffuse and specular contributions using physically based\n * rendering. This function only handles direct lighting.\n * <p>\n * This function only handles the lighting calculations. Metallic/roughness\n * and specular/glossy must be handled separately. See {@czm_pbrMetallicRoughnessMaterial}, {@czm_pbrSpecularGlossinessMaterial} and {@czm_defaultPbrMaterial}\n * </p>\n *\n * @name czm_pbrlighting\n * @glslFunction\n *\n * @param {vec3} positionEC The position of the fragment in eye coordinates\n * @param {vec3} normalEC The surface normal in eye coordinates\n * @param {vec3} lightDirectionEC Unit vector pointing to the light source in eye coordinates.\n * @param {vec3} lightColorHdr radiance of the light source. This is a HDR value.\n * @param {czm_pbrParameters} The computed PBR parameters.\n * @return {vec3} The computed HDR color\n *\n * @example\n * czm_pbrParameters pbrParameters = czm_pbrMetallicRoughnessMaterial(\n *  baseColor,\n *  metallic,\n *  roughness\n * );\n * vec3 color = czm_pbrlighting(\n *  positionEC,\n *  normalEC,\n *  lightDirectionEC,\n *  lightColorHdr,\n *  pbrParameters);\n */\nvec3 czm_pbrLighting(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n)\n{\n    vec3 v = -normalize(positionEC);\n    vec3 l = normalize(lightDirectionEC);\n    vec3 h = normalize(v + l);\n    vec3 n = normalEC;\n    float NdotL = clamp(dot(n, l), 0.001, 1.0);\n    float NdotV = abs(dot(n, v)) + 0.001;\n    float NdotH = clamp(dot(n, h), 0.0, 1.0);\n    float LdotH = clamp(dot(l, h), 0.0, 1.0);\n    float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n    vec3 f0 = pbrParameters.f0;\n    float reflectance = max(max(f0.r, f0.g), f0.b);\n    vec3 f90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));\n    vec3 F = fresnelSchlick2(f0, f90, VdotH);\n\n    float alpha = pbrParameters.roughness;\n    float G = smithVisibilityGGX(alpha, NdotL, NdotV);\n    float D = GGX(alpha, NdotH);\n    vec3 specularContribution = F * G * D / (4.0 * NdotL * NdotV);\n\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    // F here represents the specular contribution\n    vec3 diffuseContribution = (1.0 - F) * lambertianDiffuse(diffuseColor);\n\n    // Lo = (diffuse + specular) * Li * NdotL\n    return (diffuseContribution + specularContribution) * NdotL * lightColorHdr;\n}\n",MU="/**\n * Compute parameters for physically based rendering using the\n * metallic/roughness workflow. All inputs are linear; sRGB texture values must\n * be decoded beforehand\n *\n * @name czm_pbrMetallicRoughnessMaterial\n * @glslFunction\n *\n * @param {vec3} baseColor For dielectrics, this is the base color. For metals, this is the f0 value (reflectance at normal incidence)\n * @param {float} metallic 0.0 indicates dielectric. 1.0 indicates metal. Values in between are allowed (e.g. to model rust or dirt);\n * @param {float} roughness A value between 0.0 and 1.0\n * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}\n */\nczm_pbrParameters czm_pbrMetallicRoughnessMaterial(\n    vec3 baseColor,\n    float metallic,\n    float roughness\n) \n{\n    czm_pbrParameters results;\n\n    // roughness is authored as perceptual roughness\n    // square it to get material roughness\n    roughness = clamp(roughness, 0.0, 1.0);\n    results.roughness = roughness * roughness;\n\n    // dielectrics use f0 = 0.04, metals use albedo as f0\n    metallic = clamp(metallic, 0.0, 1.0);\n    const vec3 REFLECTANCE_DIELECTRIC = vec3(0.04);\n    vec3 f0 = mix(REFLECTANCE_DIELECTRIC, baseColor, metallic);\n    results.f0 = f0;\n\n    // diffuse only applies to dielectrics.\n    results.diffuseColor = baseColor * (1.0 - f0) * (1.0 - metallic);\n\n    return results;\n}\n",NU="/**\n * Compute parameters for physically based rendering using the\n * specular/glossy workflow. All inputs are linear; sRGB texture values must\n * be decoded beforehand\n *\n * @name czm_pbrSpecularGlossinessMaterial\n * @glslFunction\n *\n * @param {vec3} diffuse The diffuse color for dielectrics (non-metals)\n * @param {vec3} specular The reflectance at normal incidence (f0)\n * @param {float} glossiness A number from 0.0 to 1.0 indicating how smooth the surface is.\n * @return {czm_pbrParameters} parameters to pass into {@link czm_pbrLighting}\n */\nczm_pbrParameters czm_pbrSpecularGlossinessMaterial(\n    vec3 diffuse,\n    vec3 specular,\n    float glossiness\n) \n{\n    czm_pbrParameters results;\n\n    // glossiness is the opposite of roughness, but easier for artists to use.\n    float roughness = 1.0 - glossiness;\n    results.roughness = roughness * roughness;\n\n    results.diffuseColor = diffuse * (1.0 - max(max(specular.r, specular.g), specular.b));\n    results.f0 = specular;\n\n    return results;\n}\n",BU="float czm_private_getLambertDiffuseOfMaterial(vec3 lightDirectionEC, czm_material material)\n{\n    return czm_getLambertDiffuse(lightDirectionEC, material.normal);\n}\n\nfloat czm_private_getSpecularOfMaterial(vec3 lightDirectionEC, vec3 toEyeEC, czm_material material)\n{\n    return czm_getSpecular(lightDirectionEC, toEyeEC, material.normal, material.shininess);\n}\n\n/**\n * Computes a color using the Phong lighting model.\n *\n * @name czm_phong\n * @glslFunction\n *\n * @param {vec3} toEye A normalized vector from the fragment to the eye in eye coordinates.\n * @param {czm_material} material The fragment's material.\n *\n * @returns {vec4} The computed color.\n *\n * @example\n * vec3 positionToEyeEC = // ...\n * czm_material material = // ...\n * vec3 lightDirectionEC = // ...\n * gl_FragColor = czm_phong(normalize(positionToEyeEC), material, lightDirectionEC);\n *\n * @see czm_getMaterial\n */\nvec4 czm_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)\n{\n    // Diffuse from directional light sources at eye (for top-down)\n    float diffuse = czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 0.0, 1.0), material);\n    if (czm_sceneMode == czm_sceneMode3D) {\n        // (and horizon views in 3D)\n        diffuse += czm_private_getLambertDiffuseOfMaterial(vec3(0.0, 1.0, 0.0), material);\n    }\n\n    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);\n\n    // Temporary workaround for adding ambient.\n    vec3 materialDiffuse = material.diffuse * 0.5;\n\n    vec3 ambient = materialDiffuse;\n    vec3 color = ambient + material.emission;\n    color += materialDiffuse * diffuse * czm_lightColor;\n    color += material.specular * specular * czm_lightColor;\n\n    return vec4(color, material.alpha);\n}\n\nvec4 czm_private_phong(vec3 toEye, czm_material material, vec3 lightDirectionEC)\n{\n    float diffuse = czm_private_getLambertDiffuseOfMaterial(lightDirectionEC, material);\n    float specular = czm_private_getSpecularOfMaterial(lightDirectionEC, toEye, material);\n\n    vec3 ambient = vec3(0.0);\n    vec3 color = ambient + material.emission;\n    color += material.diffuse * diffuse * czm_lightColor;\n    color += material.specular * specular * czm_lightColor;\n\n    return vec4(color, material.alpha);\n}\n",FU="/**\n * Computes distance from a point to a plane.\n *\n * @name czm_planeDistance\n * @glslFunction\n *\n * param {vec4} plane A Plane in Hessian Normal Form. See Plane.js\n * param {vec3} point A point in the same space as the plane.\n * returns {float} The distance from the point to the plane.\n */\nfloat czm_planeDistance(vec4 plane, vec3 point) {\n    return (dot(plane.xyz, point) + plane.w);\n}\n\n/**\n * Computes distance from a point to a plane.\n *\n * @name czm_planeDistance\n * @glslFunction\n *\n * param {vec3} planeNormal Normal for a plane in Hessian Normal Form. See Plane.js\n * param {float} planeDistance Distance for a plane in Hessian Normal form. See Plane.js\n * param {vec3} point A point in the same space as the plane.\n * returns {float} The distance from the point to the plane.\n */\nfloat czm_planeDistance(vec3 planeNormal, float planeDistance, vec3 point) {\n    return (dot(planeNormal, point) + planeDistance);\n}\n",zU="/**\n * Computes the point along a ray at the given time.  <code>time</code> can be positive, negative, or zero.\n *\n * @name czm_pointAlongRay\n * @glslFunction\n *\n * @param {czm_ray} ray The ray to compute the point along.\n * @param {float} time The time along the ray.\n * \n * @returns {vec3} The point along the ray at the given time.\n * \n * @example\n * czm_ray ray = czm_ray(vec3(0.0), vec3(1.0, 0.0, 0.0)); // origin, direction\n * vec3 v = czm_pointAlongRay(ray, 2.0); // (2.0, 0.0, 0.0)\n */\nvec3 czm_pointAlongRay(czm_ray ray, float time)\n{\n    return ray.origin + (time * ray.direction);\n}\n",kU="/**\n * DOC_TBA\n *\n * @name czm_rayEllipsoidIntersectionInterval\n * @glslFunction\n */\nczm_raySegment czm_rayEllipsoidIntersectionInterval(czm_ray ray, vec3 ellipsoid_center, vec3 ellipsoid_inverseRadii)\n{\n   // ray and ellipsoid center in eye coordinates.  radii in model coordinates.\n    vec3 q = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.origin, 1.0)).xyz;\n    vec3 w = ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ray.direction, 0.0)).xyz;\n\n    q = q - ellipsoid_inverseRadii * (czm_inverseModelView * vec4(ellipsoid_center, 1.0)).xyz;\n\n    float q2 = dot(q, q);\n    float qw = dot(q, w);\n\n    if (q2 > 1.0) // Outside ellipsoid.\n    {\n        if (qw >= 0.0) // Looking outward or tangent (0 intersections).\n        {\n            return czm_emptyRaySegment;\n        }\n        else // qw < 0.0.\n        {\n            float qw2 = qw * qw;\n            float difference = q2 - 1.0; // Positively valued.\n            float w2 = dot(w, w);\n            float product = w2 * difference;\n\n            if (qw2 < product) // Imaginary roots (0 intersections).\n            {\n                return czm_emptyRaySegment;\n            }\n            else if (qw2 > product) // Distinct roots (2 intersections).\n            {\n                float discriminant = qw * qw - product;\n                float temp = -qw + sqrt(discriminant); // Avoid cancellation.\n                float root0 = temp / w2;\n                float root1 = difference / temp;\n                if (root0 < root1)\n                {\n                    czm_raySegment i = czm_raySegment(root0, root1);\n                    return i;\n                }\n                else\n                {\n                    czm_raySegment i = czm_raySegment(root1, root0);\n                    return i;\n                }\n            }\n            else // qw2 == product.  Repeated roots (2 intersections).\n            {\n                float root = sqrt(difference / w2);\n                czm_raySegment i = czm_raySegment(root, root);\n                return i;\n            }\n        }\n    }\n    else if (q2 < 1.0) // Inside ellipsoid (2 intersections).\n    {\n        float difference = q2 - 1.0; // Negatively valued.\n        float w2 = dot(w, w);\n        float product = w2 * difference; // Negatively valued.\n        float discriminant = qw * qw - product;\n        float temp = -qw + sqrt(discriminant); // Positively valued.\n        czm_raySegment i = czm_raySegment(0.0, temp / w2);\n        return i;\n    }\n    else // q2 == 1.0. On ellipsoid.\n    {\n        if (qw < 0.0) // Looking inward.\n        {\n            float w2 = dot(w, w);\n            czm_raySegment i = czm_raySegment(0.0, -qw / w2);\n            return i;\n        }\n        else // qw >= 0.0.  Looking outward or tangent.\n        {\n            return czm_emptyRaySegment;\n        }\n    }\n}\n",UU="/**\n * Compute the intersection interval of a ray with a sphere.\n *\n * @name czm_raySphereIntersectionInterval\n * @glslFunction\n *\n * @param {czm_ray} ray The ray.\n * @param {vec3} center The center of the sphere.\n * @param {float} radius The radius of the sphere.\n * @return {czm_raySegment} The intersection interval of the ray with the sphere.\n */\nczm_raySegment czm_raySphereIntersectionInterval(czm_ray ray, vec3 center, float radius)\n{\n    vec3 o = ray.origin;\n    vec3 d = ray.direction;\n\n    vec3 oc = o - center;\n\n    float a = dot(d, d);\n    float b = 2.0 * dot(d, oc);\n    float c = dot(oc, oc) - (radius * radius);\n\n    float det = (b * b) - (4.0 * a * c);\n\n    if (det < 0.0) {\n        return czm_emptyRaySegment;\n    }\n\n    float sqrtDet = sqrt(det);\n\n    float t0 = (-b - sqrtDet) / (2.0 * a);\n    float t1 = (-b + sqrtDet) / (2.0 * a);\n\n    czm_raySegment result = czm_raySegment(t0, t1);\n    return result;\n}\n",VU="float czm_readDepth(sampler2D depthTexture, vec2 texCoords)\n{\n    return czm_reverseLogDepth(texture2D(depthTexture, texCoords).r);\n}\n",HU="/**\n * Reads a value previously transformed with {@link czm_writeNonPerspective}\n * by dividing it by `w`, the value used in the perspective divide.\n * This function is intended to be called in a fragment shader to access a\n * `varying` that should not be subject to perspective interpolation.\n * For example, screen-space texture coordinates. The value should have been\n * previously written in the vertex shader with a call to\n * {@link czm_writeNonPerspective}.\n *\n * @name czm_readNonPerspective\n * @glslFunction\n *\n * @param {float|vec2|vec3|vec4} value The non-perspective value to be read.\n * @param {float} oneOverW One over the perspective divide value, `w`. Usually this is simply `gl_FragCoord.w`.\n * @returns {float|vec2|vec3|vec4} The usable value.\n */\nfloat czm_readNonPerspective(float value, float oneOverW) {\n    return value * oneOverW;\n}\n\nvec2 czm_readNonPerspective(vec2 value, float oneOverW) {\n    return value * oneOverW;\n}\n\nvec3 czm_readNonPerspective(vec3 value, float oneOverW) {\n    return value * oneOverW;\n}\n\nvec4 czm_readNonPerspective(vec4 value, float oneOverW) {\n    return value * oneOverW;\n}\n",GU="float czm_reverseLogDepth(float logZ)\n{\n#ifdef LOG_DEPTH\n    float near = czm_currentFrustum.x;\n    float far = czm_currentFrustum.y;\n    float log2Depth = logZ * czm_log2FarDepthFromNearPlusOne;\n    float depthFromNear = pow(2.0, log2Depth) - 1.0;\n    return far * (1.0 - near / (depthFromNear + near)) / (far - near);\n#endif\n    return logZ;\n}\n",WU="/**\n * Round a floating point value. This function exists because round() doesn't\n * exist in GLSL 1.00. \n *\n * @param {float|vec2|vec3|vec4} value The value to round\n * @param {float|vec2|vec3|vec3} The rounded value. The type matches the input.\n */\nfloat czm_round(float value) {\n  return floor(value + 0.5);\n}\n\nvec2 czm_round(vec2 value) {\n  return floor(value + 0.5);\n}\n\nvec3 czm_round(vec3 value) {\n  return floor(value + 0.5);\n}\n\nvec4 czm_round(vec4 value) {\n  return floor(value + 0.5);\n}\n",qU="/**\n * Samples the 4 neighboring pixels and return the weighted average.\n *\n * @private\n */\nvec3 czm_sampleOctahedralProjectionWithFiltering(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod)\n{\n    direction /= dot(vec3(1.0), abs(direction));\n    vec2 rev = abs(direction.zx) - vec2(1.0);\n    vec2 neg = vec2(direction.x < 0.0 ? rev.x : -rev.x,\n                    direction.z < 0.0 ? rev.y : -rev.y);\n    vec2 uv = direction.y < 0.0 ? neg : direction.xz;\n    vec2 coord = 0.5 * uv + vec2(0.5);\n    vec2 pixel = 1.0 / textureSize;\n\n    if (lod > 0.0)\n    {\n        // Each subseqeuent mip level is half the size\n        float scale = 1.0 / pow(2.0, lod);\n        float offset = ((textureSize.y + 1.0) / textureSize.x);\n\n        coord.x *= offset;\n        coord *= scale;\n\n        coord.x += offset + pixel.x;\n        coord.y += (1.0 - (1.0 / pow(2.0, lod - 1.0))) + pixel.y * (lod - 1.0) * 2.0;\n    }\n    else\n    {\n        coord.x *= (textureSize.y / textureSize.x);\n    }\n\n    // Do bilinear filtering\n    #ifndef OES_texture_float_linear\n        vec3 color1 = texture2D(projectedMap, coord + vec2(0.0, pixel.y)).rgb;\n        vec3 color2 = texture2D(projectedMap, coord + vec2(pixel.x, 0.0)).rgb;\n        vec3 color3 = texture2D(projectedMap, coord + pixel).rgb;\n        vec3 color4 = texture2D(projectedMap, coord).rgb;\n\n        vec2 texturePosition = coord * textureSize;\n\n        float fu = fract(texturePosition.x);\n        float fv = fract(texturePosition.y);\n\n        vec3 average1 = mix(color4, color2, fu);\n        vec3 average2 = mix(color1, color3, fu);\n\n        vec3 color = mix(average1, average2, fv);\n    #else\n        vec3 color = texture2D(projectedMap, coord).rgb;\n    #endif\n\n    return color;\n}\n\n\n/**\n * Samples from a cube map that has been projected using an octahedral projection from the given direction.\n *\n * @name czm_sampleOctahedralProjection\n * @glslFunction\n *\n * @param {sampler2D} projectedMap The texture with the octahedral projected cube map.\n * @param {vec2} textureSize The width and height dimensions in pixels of the projected map.\n * @param {vec3} direction The normalized direction used to sample the cube map.\n * @param {float} lod The level of detail to sample.\n * @param {float} maxLod The maximum level of detail.\n * @returns {vec3} The color of the cube map at the direction.\n */\nvec3 czm_sampleOctahedralProjection(sampler2D projectedMap, vec2 textureSize, vec3 direction, float lod, float maxLod) {\n    float currentLod = floor(lod + 0.5);\n    float nextLod = min(currentLod + 1.0, maxLod);\n\n    vec3 colorCurrentLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, currentLod);\n    vec3 colorNextLod = czm_sampleOctahedralProjectionWithFiltering(projectedMap, textureSize, direction, nextLod);\n\n    return mix(colorNextLod, colorCurrentLod, nextLod - lod);\n}\n",YU="/**\n * Adjusts the saturation of a color.\n * \n * @name czm_saturation\n * @glslFunction\n * \n * @param {vec3} rgb The color.\n * @param {float} adjustment The amount to adjust the saturation of the color.\n *\n * @returns {float} The color with the saturation adjusted.\n *\n * @example\n * vec3 greyScale = czm_saturation(color, 0.0);\n * vec3 doubleSaturation = czm_saturation(color, 2.0);\n */\nvec3 czm_saturation(vec3 rgb, float adjustment)\n{\n    // Algorithm from Chapter 16 of OpenGL Shading Language\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, adjustment);\n}\n",XU="\nfloat czm_sampleShadowMap(highp samplerCube shadowMap, vec3 d)\n{\n    return czm_unpackDepth(textureCube(shadowMap, d));\n}\n\nfloat czm_sampleShadowMap(highp sampler2D shadowMap, vec2 uv)\n{\n#ifdef USE_SHADOW_DEPTH_TEXTURE\n    return texture2D(shadowMap, uv).r;\n#else\n    return czm_unpackDepth(texture2D(shadowMap, uv));\n#endif\n}\n\nfloat czm_shadowDepthCompare(samplerCube shadowMap, vec3 uv, float depth)\n{\n    return step(depth, czm_sampleShadowMap(shadowMap, uv));\n}\n\nfloat czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth)\n{\n    return step(depth, czm_sampleShadowMap(shadowMap, uv));\n}\n",KU="\nfloat czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness)\n{\n#ifdef USE_NORMAL_SHADING\n#ifdef USE_NORMAL_SHADING_SMOOTH\n    float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);\n#else\n    float strength = step(0.0, nDotL);\n#endif\n    visibility *= strength;\n#endif\n\n    visibility = max(visibility, darkness);\n    return visibility;\n}\n\n#ifdef USE_CUBE_MAP_SHADOW\nfloat czm_shadowVisibility(samplerCube shadowMap, czm_shadowParameters shadowParameters)\n{\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec3 uvw = shadowParameters.texCoords;\n\n    depth -= depthBias;\n    float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);\n    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);\n}\n#else\nfloat czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters)\n{\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n\n    depth -= depthBias;\n#ifdef USE_SOFT_SHADOWS\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility = (\n        czm_shadowDepthCompare(shadowMap, uv, depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n        czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0);\n#else\n    float visibility = czm_shadowDepthCompare(shadowMap, uv, depth);\n#endif\n\n    return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);\n}\n#endif\n",$U="/**\n * Returns 1.0 if the given value is positive or zero, and -1.0 if it is negative.  This is similar to the GLSL\n * built-in function <code>sign</code> except that returns 1.0 instead of 0.0 when the input value is 0.0.\n * \n * @name czm_signNotZero\n * @glslFunction\n *\n * @param {} value The value for which to determine the sign.\n * @returns {} 1.0 if the value is positive or zero, -1.0 if the value is negative.\n */\nfloat czm_signNotZero(float value)\n{\n    return value >= 0.0 ? 1.0 : -1.0;\n}\n\nvec2 czm_signNotZero(vec2 value)\n{\n    return vec2(czm_signNotZero(value.x), czm_signNotZero(value.y));\n}\n\nvec3 czm_signNotZero(vec3 value)\n{\n    return vec3(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z));\n}\n\nvec4 czm_signNotZero(vec4 value)\n{\n    return vec4(czm_signNotZero(value.x), czm_signNotZero(value.y), czm_signNotZero(value.z), czm_signNotZero(value.w));\n}\n",JU="/**\n * Computes a color from the third order spherical harmonic coefficients and a normalized direction vector.\n * <p>\n * The order of the coefficients is [L00, L1_1, L10, L11, L2_2, L2_1, L20, L21, L22].\n * </p>\n *\n * @name czm_sphericalHarmonics\n * @glslFunction\n *\n * @param {vec3} normal The normalized direction.\n * @param {vec3[9]} coefficients The third order spherical harmonic coefficients.\n * @returns {vec3} The color at the direction.\n *\n * @see https://graphics.stanford.edu/papers/envmap/envmap.pdf\n */\nvec3 czm_sphericalHarmonics(vec3 normal, vec3 coefficients[9])\n{\n    vec3 L00 = coefficients[0];\n    vec3 L1_1 = coefficients[1];\n    vec3 L10 = coefficients[2];\n    vec3 L11 = coefficients[3];\n    vec3 L2_2 = coefficients[4];\n    vec3 L2_1 = coefficients[5];\n    vec3 L20 = coefficients[6];\n    vec3 L21 = coefficients[7];\n    vec3 L22 = coefficients[8];\n\n    float x = normal.x;\n    float y = normal.y;\n    float z = normal.z;\n\n    return\n          L00\n        + L1_1 * y\n        + L10 * z\n        + L11 * x\n        + L2_2 * (y * x)\n        + L2_1 * (y * z)\n        + L20 * (3.0 * z * z - 1.0)\n        + L21 * (z * x)\n        + L22 * (x * x - y * y);\n}\n",QU="/**\n * Converts an sRGB color to a linear RGB color.\n *\n * @param {vec3|vec4} srgbIn The color in sRGB space\n * @returns {vec3|vec4} The color in linear color space. The vector type matches the input.\n */\nvec3 czm_srgbToLinear(vec3 srgbIn)\n{\n    return pow(srgbIn, vec3(2.2));\n}\n\nvec4 czm_srgbToLinear(vec4 srgbIn) \n{\n    vec3 linearOut = pow(srgbIn.rgb, vec3(2.2));\n    return vec4(linearOut, srgbIn.a);\n}\n",ZU="/**\n * Creates a matrix that transforms vectors from tangent space to eye space.\n *\n * @name czm_tangentToEyeSpaceMatrix\n * @glslFunction\n *\n * @param {vec3} normalEC The normal vector in eye coordinates.\n * @param {vec3} tangentEC The tangent vector in eye coordinates.\n * @param {vec3} bitangentEC The bitangent vector in eye coordinates.\n *\n * @returns {mat3} The matrix that transforms from tangent space to eye space.\n *\n * @example\n * mat3 tangentToEye = czm_tangentToEyeSpaceMatrix(normalEC, tangentEC, bitangentEC);\n * vec3 normal = tangentToEye * texture2D(normalMap, st).xyz;\n */\nmat3 czm_tangentToEyeSpaceMatrix(vec3 normalEC, vec3 tangentEC, vec3 bitangentEC)\n{\n    vec3 normal = normalize(normalEC);\n    vec3 tangent = normalize(tangentEC);\n    vec3 bitangent = normalize(bitangentEC);\n    return mat3(tangent.x  , tangent.y  , tangent.z,\n                bitangent.x, bitangent.y, bitangent.z,\n                normal.x   , normal.y   , normal.z);\n}\n",eV="/**\n * Transforms a plane.\n * \n * @name czm_transformPlane\n * @glslFunction\n *\n * @param {vec4} plane The plane in Hessian Normal Form.\n * @param {mat4} transform The inverse-transpose of a transformation matrix.\n */\nvec4 czm_transformPlane(vec4 plane, mat4 transform) {\n    vec4 transformedPlane = transform * plane;\n    // Convert the transformed plane to Hessian Normal Form\n    float normalMagnitude = length(transformedPlane.xyz);\n    return transformedPlane / normalMagnitude;\n}\n",tV="/**\n * Translates a position (or any <code>vec3</code>) that was encoded with {@link EncodedCartesian3},\n * and then provided to the shader as separate <code>high</code> and <code>low</code> bits to\n * be relative to the eye.  As shown in the example, the position can then be transformed in eye\n * or clip coordinates using {@link czm_modelViewRelativeToEye} or {@link czm_modelViewProjectionRelativeToEye},\n * respectively.\n * <p>\n * This technique, called GPU RTE, eliminates jittering artifacts when using large coordinates as\n * described in {@link http://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm|Precisions, Precisions}.\n * </p>\n *\n * @name czm_translateRelativeToEye\n * @glslFunction\n *\n * @param {vec3} high The position's high bits.\n * @param {vec3} low The position's low bits.\n * @returns {vec3} The position translated to be relative to the camera's position.\n *\n * @example\n * attribute vec3 positionHigh;\n * attribute vec3 positionLow;\n *\n * void main()\n * {\n *   vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n *   gl_Position = czm_modelViewProjectionRelativeToEye * p;\n * }\n *\n * @see czm_modelViewRelativeToEye\n * @see czm_modelViewProjectionRelativeToEye\n * @see czm_computePosition\n * @see EncodedCartesian3\n */\nvec4 czm_translateRelativeToEye(vec3 high, vec3 low)\n{\n    vec3 highDifference = high - czm_encodedCameraPositionMCHigh;\n    vec3 lowDifference = low - czm_encodedCameraPositionMCLow;\n\n    return vec4(highDifference + lowDifference, 1.0);\n}\n",nV="/**\n * @private\n */\nvec4 czm_translucentPhong(vec3 toEye, czm_material material, vec3 lightDirectionEC)\n{\n    // Diffuse from directional light sources at eye (for top-down and horizon views)\n    float diffuse = czm_getLambertDiffuse(vec3(0.0, 0.0, 1.0), material.normal);\n\n    if (czm_sceneMode == czm_sceneMode3D) {\n        // (and horizon views in 3D)\n        diffuse += czm_getLambertDiffuse(vec3(0.0, 1.0, 0.0), material.normal);\n    }\n\n    diffuse = clamp(diffuse, 0.0, 1.0);\n\n    float specular = czm_getSpecular(lightDirectionEC, toEye, material.normal, material.shininess);\n\n    // Temporary workaround for adding ambient.\n    vec3 materialDiffuse = material.diffuse * 0.5;\n\n    vec3 ambient = materialDiffuse;\n    vec3 color = ambient + material.emission;\n    color += materialDiffuse * diffuse * czm_lightColor;\n    color += material.specular * specular * czm_lightColor;\n\n    return vec4(color, material.alpha);\n}\n",iV="/**\n * Returns the transpose of the matrix.  The input <code>matrix</code> can be\n * a <code>mat2</code>, <code>mat3</code>, or <code>mat4</code>.\n *\n * @name czm_transpose\n * @glslFunction\n *\n * @param {} matrix The matrix to transpose.\n *\n * @returns {} The transposed matrix.\n *\n * @example\n * // GLSL declarations\n * mat2 czm_transpose(mat2 matrix);\n * mat3 czm_transpose(mat3 matrix);\n * mat4 czm_transpose(mat4 matrix);\n *\n * // Transpose a 3x3 rotation matrix to find its inverse.\n * mat3 eastNorthUpToEye = czm_eastNorthUpToEyeCoordinates(\n *     positionMC, normalEC);\n * mat3 eyeToEastNorthUp = czm_transpose(eastNorthUpToEye);\n */\nmat2 czm_transpose(mat2 matrix)\n{\n    return mat2(\n        matrix[0][0], matrix[1][0],\n        matrix[0][1], matrix[1][1]);\n}\n\nmat3 czm_transpose(mat3 matrix)\n{\n    return mat3(\n        matrix[0][0], matrix[1][0], matrix[2][0],\n        matrix[0][1], matrix[1][1], matrix[2][1],\n        matrix[0][2], matrix[1][2], matrix[2][2]);\n}\n\nmat4 czm_transpose(mat4 matrix)\n{\n    return mat4(\n        matrix[0][0], matrix[1][0], matrix[2][0], matrix[3][0],\n        matrix[0][1], matrix[1][1], matrix[2][1], matrix[3][1],\n        matrix[0][2], matrix[1][2], matrix[2][2], matrix[3][2],\n        matrix[0][3], matrix[1][3], matrix[2][3], matrix[3][3]);\n}\n",oV="/**\n * Unpacks a vec4 depth value to a float in [0, 1) range.\n *\n * @name czm_unpackDepth\n * @glslFunction\n *\n * @param {vec4} packedDepth The packed depth.\n *\n * @returns {float} The floating-point depth in [0, 1) range.\n */\n float czm_unpackDepth(vec4 packedDepth)\n {\n    // See Aras Pranckevičius' post Encoding Floats to RGBA\n    // http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\n    return dot(packedDepth, vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0));\n }\n",rV="/**\n * Unpack an IEEE 754 single-precision float that is packed as a little-endian unsigned normalized vec4.\n *\n * @name czm_unpackFloat\n * @glslFunction\n *\n * @param {vec4} packedFloat The packed float.\n *\n * @returns {float} The floating-point depth in arbitrary range.\n */\nfloat czm_unpackFloat(vec4 packedFloat)\n{\n    // Convert to [0.0, 255.0] and round to integer\n    packedFloat = floor(packedFloat * 255.0 + 0.5);\n    float sign = 1.0 - step(128.0, packedFloat[3]) * 2.0;\n    float exponent = 2.0 * mod(packedFloat[3], 128.0) + step(128.0, packedFloat[2]) - 127.0;    \n    if (exponent == -127.0)\n    {\n        return 0.0;\n    }\n    float mantissa = mod(packedFloat[2], 128.0) * 65536.0 + packedFloat[1] * 256.0 + packedFloat[0] + float(0x800000);\n    float result = sign * exp2(exponent - 23.0) * mantissa;\n    return result;\n}\n",aV="/**\n * Unpack unsigned integers of 1-4 bytes. in WebGL 1, there is no uint type,\n * so the return value is an int.\n * <p>\n * There are also precision limitations in WebGL 1. highp int is still limited\n * to 24 bits. Above the value of 2^24 = 16777216, precision loss may occur.\n * </p>\n *\n * @param {float|vec2|vec3|vec4} packed The packed value. For vectors, the components are listed in little-endian order.\n *\n * @return {int} The unpacked value.\n */\n int czm_unpackUint(float packedValue) {\n   float rounded = czm_round(packedValue * 255.0);\n   return int(rounded);\n }\n\n int czm_unpackUint(vec2 packedValue) {\n   vec2 rounded = czm_round(packedValue * 255.0);\n   return int(dot(rounded, vec2(1.0, 256.0)));\n }\n\n int czm_unpackUint(vec3 packedValue) {\n   vec3 rounded = czm_round(packedValue * 255.0);\n   return int(dot(rounded, vec3(1.0, 256.0, 65536.0)));\n }\n\n int czm_unpackUint(vec4 packedValue) {\n   vec4 rounded = czm_round(packedValue * 255.0);\n   return int(dot(rounded, vec4(1.0, 256.0, 65536.0, 16777216.0)));\n }\n",sV="/**\n * Transform metadata values following the EXT_structural_metadata spec\n * by multiplying by scale and adding the offset. Operations are always\n * performed component-wise, even for matrices.\n * \n * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} offset The offset to add\n * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} scale The scale factor to multiply\n * @param {float|vec2|vec3|vec4|mat2|mat3|mat4} value The original value.\n *\n * @return {float|vec2|vec3|vec4|mat2|mat3|mat4} The transformed value of the same scalar/vector/matrix type as the input.\n */\nfloat czm_valueTransform(float offset, float scale, float value) {\n  return scale * value + offset;\n}\n\nvec2 czm_valueTransform(vec2 offset, vec2 scale, vec2 value) {\n  return scale * value + offset;\n}\n\nvec3 czm_valueTransform(vec3 offset, vec3 scale, vec3 value) {\n  return scale * value + offset;\n}\n\nvec4 czm_valueTransform(vec4 offset, vec4 scale, vec4 value) {\n  return scale * value + offset;\n}\n\nmat2 czm_valueTransform(mat2 offset, mat2 scale, mat2 value) {\n  return matrixCompMult(scale, value) + offset;\n}\n\nmat3 czm_valueTransform(mat3 offset, mat3 scale, mat3 value) {\n  return matrixCompMult(scale, value) + offset;\n}\n\nmat4 czm_valueTransform(mat4 offset, mat4 scale, mat4 value) {\n  return matrixCompMult(scale, value) + offset;\n}\n",cV="#ifdef LOG_DEPTH\n// 1.0 at the near plane, increasing linearly from there.\nvarying float v_depthFromNearPlusOne;\n#ifdef SHADOW_MAP\nvarying vec3 v_logPositionEC;\n#endif\n#endif\n\nvec4 czm_updatePositionDepth(vec4 coords) {\n#if defined(LOG_DEPTH)\n\n#ifdef SHADOW_MAP\n    vec3 logPositionEC = (czm_inverseProjection * coords).xyz;\n    v_logPositionEC = logPositionEC;\n#endif\n\n    // With the very high far/near ratios used with the logarithmic depth\n    // buffer, floating point rounding errors can cause linear depth values\n    // to end up on the wrong side of the far plane, even for vertices that\n    // are really nowhere near it. Since we always write a correct logarithmic\n    // depth value in the fragment shader anyway, we just need to make sure\n    // such errors don't cause the primitive to be clipped entirely before\n    // we even get to the fragment shader.\n    coords.z = clamp(coords.z / coords.w, -1.0, 1.0) * coords.w;\n#endif\n\n    return coords;\n}\n\n/**\n * Writes the logarithmic depth to gl_Position using the already computed gl_Position.\n *\n * @name czm_vertexLogDepth\n * @glslFunction\n */\nvoid czm_vertexLogDepth()\n{\n#ifdef LOG_DEPTH\n    v_depthFromNearPlusOne = (gl_Position.w - czm_currentFrustum.x) + 1.0;\n    gl_Position = czm_updatePositionDepth(gl_Position);\n#endif\n}\n\n/**\n * Writes the logarithmic depth to gl_Position using the provided clip coordinates.\n * <p>\n * An example use case for this function would be moving the vertex in window coordinates\n * before converting back to clip coordinates. Use the original vertex clip coordinates.\n * </p>\n * @name czm_vertexLogDepth\n * @glslFunction\n *\n * @param {vec4} clipCoords The vertex in clip coordinates.\n *\n * @example\n * czm_vertexLogDepth(czm_projection * vec4(positionEyeCoordinates, 1.0));\n */\nvoid czm_vertexLogDepth(vec4 clipCoords)\n{\n#ifdef LOG_DEPTH\n    v_depthFromNearPlusOne = (clipCoords.w - czm_currentFrustum.x) + 1.0;\n    czm_updatePositionDepth(clipCoords);\n#endif\n}\n",lV="/**\n * Transforms a position from window to eye coordinates.\n * The transform from window to normalized device coordinates is done using components\n * of (@link czm_viewport} and {@link czm_viewportTransformation} instead of calculating\n * the inverse of <code>czm_viewportTransformation</code>. The transformation from\n * normalized device coordinates to clip coordinates is done using <code>fragmentCoordinate.w</code>,\n * which is expected to be the scalar used in the perspective divide. The transformation\n * from clip to eye coordinates is done using {@link czm_inverseProjection}.\n *\n * @name czm_windowToEyeCoordinates\n * @glslFunction\n *\n * @param {vec4} fragmentCoordinate The position in window coordinates to transform.\n *\n * @returns {vec4} The transformed position in eye coordinates.\n *\n * @see czm_modelToWindowCoordinates\n * @see czm_eyeToWindowCoordinates\n * @see czm_inverseProjection\n * @see czm_viewport\n * @see czm_viewportTransformation\n *\n * @example\n * vec4 positionEC = czm_windowToEyeCoordinates(gl_FragCoord);\n */\nvec4 czm_windowToEyeCoordinates(vec4 fragmentCoordinate)\n{\n    // Reconstruct NDC coordinates\n    float x = 2.0 * (fragmentCoordinate.x - czm_viewport.x) / czm_viewport.z - 1.0;\n    float y = 2.0 * (fragmentCoordinate.y - czm_viewport.y) / czm_viewport.w - 1.0;\n    float z = (fragmentCoordinate.z - czm_viewportTransformation[3][2]) / czm_viewportTransformation[2][2];\n    vec4 q = vec4(x, y, z, 1.0);\n\n    // Reverse the perspective division to obtain clip coordinates.\n    q /= fragmentCoordinate.w;\n\n    // Reverse the projection transformation to obtain eye coordinates.\n    if (!(czm_inverseProjection == mat4(0.0))) // IE and Edge sometimes do something weird with != between mat4s\n    {\n        q = czm_inverseProjection * q;\n    }\n    else\n    {\n        float top = czm_frustumPlanes.x;\n        float bottom = czm_frustumPlanes.y;\n        float left = czm_frustumPlanes.z;\n        float right = czm_frustumPlanes.w;\n\n        float near = czm_currentFrustum.x;\n        float far = czm_currentFrustum.y;\n\n        q.x = (q.x * (right - left) + left + right) * 0.5;\n        q.y = (q.y * (top - bottom) + bottom + top) * 0.5;\n        q.z = (q.z * (near - far) - near - far) * 0.5;\n        q.w = 1.0;\n    }\n\n    return q;\n}\n\n/**\n * Transforms a position given as window x/y and a depth or a log depth from window to eye coordinates.\n * This function produces more accurate results for window positions with log depth than\n * conventionally unpacking the log depth using czm_reverseLogDepth and using the standard version\n * of czm_windowToEyeCoordinates.\n *\n * @name czm_windowToEyeCoordinates\n * @glslFunction\n *\n * @param {vec2} fragmentCoordinateXY The XY position in window coordinates to transform.\n * @param {float} depthOrLogDepth A depth or log depth for the fragment.\n *\n * @see czm_modelToWindowCoordinates\n * @see czm_eyeToWindowCoordinates\n * @see czm_inverseProjection\n * @see czm_viewport\n * @see czm_viewportTransformation\n *\n * @returns {vec4} The transformed position in eye coordinates.\n */\nvec4 czm_windowToEyeCoordinates(vec2 fragmentCoordinateXY, float depthOrLogDepth)\n{\n    // See reverseLogDepth.glsl. This is separate to re-use the pow.\n#ifdef LOG_DEPTH\n    float near = czm_currentFrustum.x;\n    float far = czm_currentFrustum.y;\n    float log2Depth = depthOrLogDepth * czm_log2FarDepthFromNearPlusOne;\n    float depthFromNear = pow(2.0, log2Depth) - 1.0;\n    float depthFromCamera = depthFromNear + near;\n    vec4 windowCoord = vec4(fragmentCoordinateXY, far * (1.0 - near / depthFromCamera) / (far - near), 1.0);\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(windowCoord);\n    eyeCoordinate.w = 1.0 / depthFromCamera; // Better precision\n    return eyeCoordinate;\n#else\n    vec4 windowCoord = vec4(fragmentCoordinateXY, depthOrLogDepth, 1.0);\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(windowCoord);\n#endif\n    return eyeCoordinate;\n}\n",uV="// emulated noperspective\n#if defined(GL_EXT_frag_depth) && !defined(LOG_DEPTH)\nvarying float v_WindowZ;\n#endif\n\n/**\n * Emulates GL_DEPTH_CLAMP. Clamps a fragment to the near and far plane\n * by writing the fragment's depth. See czm_depthClamp for more details.\n * <p>\n * The shader must enable the GL_EXT_frag_depth extension.\n * </p>\n *\n * @name czm_writeDepthClamp\n * @glslFunction\n *\n * @example\n * gl_FragColor = color;\n * czm_writeDepthClamp();\n *\n * @see czm_depthClamp\n */\nvoid czm_writeDepthClamp()\n{\n#if defined(GL_EXT_frag_depth) && !defined(LOG_DEPTH)\n    gl_FragDepthEXT = clamp(v_WindowZ * gl_FragCoord.w, 0.0, 1.0);\n#endif\n}\n",hV="#ifdef LOG_DEPTH\nvarying float v_depthFromNearPlusOne;\n\n#ifdef POLYGON_OFFSET\nuniform vec2 u_polygonOffset;\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n#endif\n\n#endif\n\n/**\n * Writes the fragment depth to the logarithmic depth buffer.\n * <p>\n * Use this when the vertex shader does not call {@link czm_vertexlogDepth}, for example, when\n * ray-casting geometry using a full screen quad.\n * </p>\n * @name czm_writeLogDepth\n * @glslFunction\n *\n * @param {float} depth The depth coordinate, where 1.0 is on the near plane and\n *                      depth increases in eye-space units from there\n *\n * @example\n * czm_writeLogDepth((czm_projection * v_positionEyeCoordinates).w + 1.0);\n */\nvoid czm_writeLogDepth(float depth)\n{\n#if defined(GL_EXT_frag_depth) && defined(LOG_DEPTH)\n    // Discard the vertex if it's not between the near and far planes.\n    // We allow a bit of epsilon on the near plane comparison because a 1.0\n    // from the vertex shader (indicating the vertex should be _on_ the near\n    // plane) will not necessarily come here as exactly 1.0.\n    if (depth <= 0.9999999 || depth > czm_farDepthFromNearPlusOne) {\n        discard;\n    }\n\n#ifdef POLYGON_OFFSET\n    // Polygon offset: m * factor + r * units\n    float factor = u_polygonOffset[0];\n    float units = u_polygonOffset[1];\n\n// If we can't compute derivatives, just leave out the factor I guess?\n#ifdef GL_OES_standard_derivatives\n    if (factor != 0.0) {\n        // m = sqrt(dZdX^2 + dZdY^2);\n        float x = dFdx(depth);\n        float y = dFdy(depth);\n        float m = sqrt(x * x + y * y);\n\n        // Apply the factor before computing the log depth.\n        depth += m * factor;\n    }\n#endif\n\n#endif\n\n    gl_FragDepthEXT = log2(depth) * czm_oneOverLog2FarDepthFromNearPlusOne;\n\n#ifdef POLYGON_OFFSET\n    // Apply the units after the log depth.\n    gl_FragDepthEXT += czm_epsilon7 * units;\n#endif\n\n#endif\n}\n\n/**\n * Writes the fragment depth to the logarithmic depth buffer.\n * <p>\n * Use this when the vertex shader calls {@link czm_vertexlogDepth}.\n * </p>\n *\n * @name czm_writeLogDepth\n * @glslFunction\n */\nvoid czm_writeLogDepth() {\n#ifdef LOG_DEPTH\n    czm_writeLogDepth(v_depthFromNearPlusOne);\n#endif\n}\n",dV="/**\n * Transforms a value for non-perspective interpolation by multiplying\n * it by w, the value used in the perspective divide. This function is\n * intended to be called in a vertex shader to compute the value of a\n * `varying` that should not be subject to perspective interpolation.\n * For example, screen-space texture coordinates. The fragment shader\n * must call {@link czm_readNonPerspective} to retrieve the final\n * non-perspective value.\n *\n * @name czm_writeNonPerspective\n * @glslFunction\n *\n * @param {float|vec2|vec3|vec4} value The value to be interpolated without accounting for perspective.\n * @param {float} w The perspective divide value. Usually this is the computed `gl_Position.w`.\n * @returns {float|vec2|vec3|vec4} The transformed value, intended to be stored in a `varying` and read in the\n *          fragment shader with {@link czm_readNonPerspective}.\n */\nfloat czm_writeNonPerspective(float value, float w) {\n    return value * w;\n}\n\nvec2 czm_writeNonPerspective(vec2 value, float w) {\n    return value * w;\n}\n\nvec3 czm_writeNonPerspective(vec3 value, float w) {\n    return value * w;\n}\n\nvec4 czm_writeNonPerspective(vec4 value, float w) {\n    return value * w;\n}\n",fV={czm_degreesPerRadian:qz,czm_depthRange:Yz,czm_epsilon1:Xz,czm_epsilon2:Kz,czm_epsilon3:$z,czm_epsilon4:Jz,czm_epsilon5:Qz,czm_epsilon6:Zz,czm_epsilon7:ek,czm_infinity:tk,czm_oneOverPi:nk,czm_oneOverTwoPi:ik,czm_passCesium3DTile:ok,czm_passCesium3DTileClassification:rk,czm_passCesium3DTileClassificationIgnoreShow:ak,czm_passClassification:sk,czm_passCompute:ck,czm_passEnvironment:lk,czm_passGlobe:uk,czm_passOpaque:hk,czm_passOverlay:dk,czm_passTerrainClassification:fk,czm_passTranslucent:pk,czm_pi:mk,czm_piOverFour:_k,czm_piOverSix:gk,czm_piOverThree:bk,czm_piOverTwo:yk,czm_radiansPerDegree:vk,czm_sceneMode2D:Ok,czm_sceneMode3D:Ak,czm_sceneModeColumbusView:wk,czm_sceneModeMorphing:Tk,czm_solarRadius:Ck,czm_threePiOver2:Ek,czm_twoPi:xk,czm_webMercatorMaxLatitude:Sk,czm_depthRangeStruct:Ik,czm_material:Dk,czm_materialInput:Pk,czm_modelMaterial:jk,czm_modelVertexOutput:Rk,czm_pbrParameters:Lk,czm_ray:Mk,czm_raySegment:Nk,czm_shadowParameters:Bk,czm_HSBToRGB:Fk,czm_HSLToRGB:zk,czm_RGBToHSB:kk,czm_RGBToHSL:Uk,czm_RGBToXYZ:Vk,czm_XYZToRGB:Hk,czm_acesTonemapping:Gk,czm_alphaWeight:Wk,czm_antialias:qk,czm_approximateSphericalCoordinates:Yk,czm_backFacing:Xk,czm_branchFreeTernary:Kk,czm_cascadeColor:$k,czm_cascadeDistance:Jk,czm_cascadeMatrix:Qk,czm_cascadeWeights:Zk,czm_columbusViewMorph:eU,czm_computePosition:tU,czm_cosineAndSine:nU,czm_decompressTextureCoordinates:iU,czm_defaultPbrMaterial:oU,czm_depthClamp:rU,czm_eastNorthUpToEyeCoordinates:aU,czm_ellipsoidContainsPoint:sU,czm_ellipsoidWgs84TextureCoordinates:cU,czm_equalsEpsilon:lU,czm_eyeOffset:uU,czm_eyeToWindowCoordinates:hU,czm_fastApproximateAtan:dU,czm_fog:fU,czm_gammaCorrect:pU,czm_geodeticSurfaceNormal:mU,czm_getDefaultMaterial:_U,czm_getLambertDiffuse:gU,czm_getSpecular:bU,czm_getWaterNoise:yU,czm_hue:vU,czm_inverseGamma:OU,czm_isEmpty:AU,czm_isFull:wU,czm_latitudeToWebMercatorFraction:TU,czm_lineDistance:CU,czm_linearToSrgb:EU,czm_luminance:xU,czm_metersPerPixel:SU,czm_modelToWindowCoordinates:IU,czm_multiplyWithColorBalance:DU,czm_nearFarScalar:PU,czm_octDecode:jU,czm_packDepth:RU,czm_pbrLighting:LU,czm_pbrMetallicRoughnessMaterial:MU,czm_pbrSpecularGlossinessMaterial:NU,czm_phong:BU,czm_planeDistance:FU,czm_pointAlongRay:zU,czm_rayEllipsoidIntersectionInterval:kU,czm_raySphereIntersectionInterval:UU,czm_readDepth:VU,czm_readNonPerspective:HU,czm_reverseLogDepth:GU,czm_round:WU,czm_sampleOctahedralProjection:qU,czm_saturation:YU,czm_shadowDepthCompare:XU,czm_shadowVisibility:KU,czm_signNotZero:$U,czm_sphericalHarmonics:JU,czm_srgbToLinear:QU,czm_tangentToEyeSpaceMatrix:ZU,czm_transformPlane:eV,czm_translateRelativeToEye:tV,czm_translucentPhong:nV,czm_transpose:iV,czm_unpackDepth:oV,czm_unpackFloat:rV,czm_unpackUint:aV,czm_valueTransform:sV,czm_vertexLogDepth:cV,czm_windowToEyeCoordinates:lV,czm_writeDepthClamp:uV,czm_writeLogDepth:hV,czm_writeNonPerspective:dV};function pV(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,(function(e){const t=e.match(/\n/gm).length;let n="";for(let i=0;i<t;++i)n+="\n";return n}))}function mV(e,t,n){let i;for(let o=0;o<n.length;++o)n[o].name===e&&(i=n[o]);return Object(r["a"])(i)||(t=pV(t),i={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},n.push(i)),i}function _V(e,t){if(e.evaluated)return;e.evaluated=!0;let n=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);Object(r["a"])(n)&&null!==n&&(n=n.filter((function(e,t){return n.indexOf(e)===t})),n.forEach((function(n){if(n!==e.name&&vV._czmBuiltinsAndUniforms.hasOwnProperty(n)){const i=mV(n,vV._czmBuiltinsAndUniforms[n],t);e.dependsOn.push(i),i.requiredBy.push(e),_V(i,t)}})))}function gV(e){const t=[],n=[];while(e.length>0){const i=e.pop();n.push(i),0===i.requiredBy.length&&t.push(i)}while(t.length>0){const n=t.shift();e.push(n);for(let e=0;e<n.dependsOn.length;++e){const i=n.dependsOn[e],o=i.requiredBy.indexOf(n);i.requiredBy.splice(o,1),0===i.requiredBy.length&&t.push(i)}}const i=[];for(let o=0;o<n.length;++o)0!==n[o].requiredBy.length&&i.push(n[o]);if(0!==i.length){let e="A circular dependency was found in the following built-in functions/structs/constants: \n";for(let t=0;t<i.length;++t)e=`${e+i[t].name}\n`;throw new a["a"](e)}}function bV(e){const t=[],n=mV("main",e,t);_V(n,t),gV(t);let i="";for(let o=t.length-1;o>=0;--o)i=`${i+t[o].glslSource}\n`;return i.replace(n.glslSource,"")}function yV(e,t,n){let i,o,s="";const c=e.sources;if(Object(r["a"])(c))for(i=0,o=c.length;i<o;++i)s+=`\n#line 0\n${c[i]}`;let l;s=pV(s),s=s.replace(/#version\s+(.*?)\n/gm,(function(e,t){if(Object(r["a"])(l)&&l!==t)throw new a["a"](`inconsistent versions found: ${l} and ${t}`);return l=t,"\n"}));const u=[];s=s.replace(/#extension.*\n/gm,(function(e){return u.push(e),"\n"})),s=s.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");const h=e.pickColorQualifier;Object(r["a"])(h)&&(s=vV.createPickFragmentShaderSource(s,h));let d="";Object(r["a"])(l)&&(d=`#version ${l}\n`);const f=u.length;for(i=0;i<f;i++)d+=u[i];t&&(d+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    precision highp int;\n#else\n    precision mediump float;\n    precision mediump int;\n    #define highp mediump\n#endif\n\n");const p=e.defines;if(Object(r["a"])(p))for(i=0,o=p.length;i<o;++i){const e=p[i];0!==e.length&&(d+=`#define ${e}\n`)}return n.webgl2&&(d+="#define OUTPUT_DECLARATION\n\n"),n.textureFloatLinear&&(d+="#define OES_texture_float_linear\n\n"),n.floatingPointTexture&&(d+="#define OES_texture_float\n\n"),e.includeBuiltIns&&(d+=bV(s)),d+="\n#line 0\n",d+=s,n.webgl2&&(d=Wz(d,t,!0)),d}function vV(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.pickColorQualifier;if(Object(r["a"])(t)&&"uniform"!==t&&"varying"!==t)throw new a["a"]("options.pickColorQualifier must be 'uniform' or 'varying'.");this.defines=Object(r["a"])(e.defines)?e.defines.slice(0):[],this.sources=Object(r["a"])(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=Object(o["a"])(e.includeBuiltIns,!0)}vV.prototype.clone=function(){return new vV({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},vV.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)},vV.prototype.getCacheKey=function(){const e=this.defines.slice().sort(),t=e.join(","),n=this.pickColorQualifier,i=this.includeBuiltIns,o=this.sources.join("\n");return`${t}:${n}:${i}:${o}`},vV.prototype.createCombinedVertexShader=function(e){return yV(this,!1,e)},vV.prototype.createCombinedFragmentShader=function(e){return yV(this,!0,e)},vV._czmBuiltinsAndUniforms={};for(const Set in fV)fV.hasOwnProperty(Set)&&(vV._czmBuiltinsAndUniforms[Set]=fV[Set]);for(const Set in qF)if(qF.hasOwnProperty(Set)){const e=qF[Set];"function"===typeof e.getDeclaration&&(vV._czmBuiltinsAndUniforms[Set]=e.getDeclaration(Set))}function OV(e,t){const n=e.defines,i=n.length;for(let o=0;o<i;++o)if(n[o]===t)return!0;return!1}function AV(e,t){const n=e.sources,i=n.length;for(let o=0;o<i;++o)if(-1!==n[o].indexOf(t))return!0;return!1}function wV(e,t){const n=t.length;for(let i=0;i<n;++i){const n=t[i];if(AV(e,n))return n}}vV.createPickVertexShaderSource=function(e){const t=vV.replaceMain(e,"czm_old_main"),n="attribute vec4 pickColor; \nvarying vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    czm_pickColor = pickColor; \n}";return`${t}\n${n}`},vV.createPickFragmentShaderSource=function(e,t){const n=vV.replaceMain(e,"czm_old_main"),i=`${t} vec4 czm_pickColor; \n`+"void main() \n{ \n    czm_old_main(); \n    if (gl_FragColor.a == 0.0) { \n       discard; \n    } \n    gl_FragColor = czm_pickColor; \n}";return`${n}\n${i}`};const TV=["v_normalEC","v_normal"];vV.findNormalVarying=function(e){return AV(e,"#ifdef HAS_NORMALS")?OV(e,"HAS_NORMALS")?"v_normalEC":void 0:wV(e,TV)};const CV=["v_positionEC"];vV.findPositionVarying=function(e){return wV(e,CV)};var EV=vV,xV='attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute float batchId;\n\n#ifdef EXTRUDED_GEOMETRY\nattribute vec3 extrudeDirection;\n\nuniform float u_globeMinimumAltitude;\n#endif // EXTRUDED_GEOMETRY\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#endif // PER_INSTANCE_COLOR\n\n#ifdef TEXTURE_COORDINATES\n#ifdef SPHERICAL\nvarying vec4 v_sphericalExtents;\n#else // SPHERICAL\nvarying vec2 v_inversePlaneExtents;\nvarying vec4 v_westPlane;\nvarying vec4 v_southPlane;\n#endif // SPHERICAL\nvarying vec3 v_uvMinAndSphericalLongitudeRotation;\nvarying vec3 v_uMaxAndInverseDistance;\nvarying vec3 v_vMaxAndInverseDistance;\n#endif // TEXTURE_COORDINATES\n\nvoid main()\n{\n    vec4 position = czm_computePosition();\n\n#ifdef EXTRUDED_GEOMETRY\n    float delta = min(u_globeMinimumAltitude, czm_geometricToleranceOverMeter * length(position.xyz));\n    delta *= czm_sceneMode == czm_sceneMode3D ? 1.0 : 0.0;\n\n    //extrudeDirection is zero for the top layer\n    position = position + vec4(extrudeDirection * delta, 0.0);\n#endif\n\n#ifdef TEXTURE_COORDINATES\n#ifdef SPHERICAL\n    v_sphericalExtents = czm_batchTable_sphericalExtents(batchId);\n    v_uvMinAndSphericalLongitudeRotation.z = czm_batchTable_longitudeRotation(batchId);\n#else // SPHERICAL\n#ifdef COLUMBUS_VIEW_2D\n    vec4 planes2D_high = czm_batchTable_planes2D_HIGH(batchId);\n    vec4 planes2D_low = czm_batchTable_planes2D_LOW(batchId);\n\n    // If the primitive is split across the IDL (planes2D_high.x > planes2D_high.w):\n    // - If this vertex is on the east side of the IDL (position3DLow.y > 0.0, comparison with position3DHigh may produce artifacts)\n    // - existing "east" is on the wrong side of the world, far away (planes2D_high/low.w)\n    // - so set "east" as beyond the eastmost extent of the projection (idlSplitNewPlaneHiLow)\n    vec2 idlSplitNewPlaneHiLow = vec2(EAST_MOST_X_HIGH - (WEST_MOST_X_HIGH - planes2D_high.w), EAST_MOST_X_LOW - (WEST_MOST_X_LOW - planes2D_low.w));\n    bool idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y > 0.0;\n    planes2D_high.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.w);\n    planes2D_low.w = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.w);\n\n    // - else, if this vertex is on the west side of the IDL (position3DLow.y < 0.0)\n    // - existing "west" is on the wrong side of the world, far away (planes2D_high/low.x)\n    // - so set "west" as beyond the westmost extent of the projection (idlSplitNewPlaneHiLow)\n    idlSplit = planes2D_high.x > planes2D_high.w && position3DLow.y < 0.0;\n    idlSplitNewPlaneHiLow = vec2(WEST_MOST_X_HIGH - (EAST_MOST_X_HIGH - planes2D_high.x), WEST_MOST_X_LOW - (EAST_MOST_X_LOW - planes2D_low.x));\n    planes2D_high.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.x, planes2D_high.x);\n    planes2D_low.x = czm_branchFreeTernary(idlSplit, idlSplitNewPlaneHiLow.y, planes2D_low.x);\n\n    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.xy), vec3(0.0, planes2D_low.xy))).xyz;\n    vec3 northWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.x, planes2D_high.z), vec3(0.0, planes2D_low.x, planes2D_low.z))).xyz;\n    vec3 southEastCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, planes2D_high.w, planes2D_high.y), vec3(0.0, planes2D_low.w, planes2D_low.y))).xyz;\n#else // COLUMBUS_VIEW_2D\n    // 3D case has smaller "plane extents," so planes encoded as a 64 bit position and 2 vec3s for distances/direction\n    vec3 southWestCorner = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(czm_batchTable_southWest_HIGH(batchId), czm_batchTable_southWest_LOW(batchId))).xyz;\n    vec3 northWestCorner = czm_normal * czm_batchTable_northward(batchId) + southWestCorner;\n    vec3 southEastCorner = czm_normal * czm_batchTable_eastward(batchId) + southWestCorner;\n#endif // COLUMBUS_VIEW_2D\n\n    vec3 eastWard = southEastCorner - southWestCorner;\n    float eastExtent = length(eastWard);\n    eastWard /= eastExtent;\n\n    vec3 northWard = northWestCorner - southWestCorner;\n    float northExtent = length(northWard);\n    northWard /= northExtent;\n\n    v_westPlane = vec4(eastWard, -dot(eastWard, southWestCorner));\n    v_southPlane = vec4(northWard, -dot(northWard, southWestCorner));\n    v_inversePlaneExtents = vec2(1.0 / eastExtent, 1.0 / northExtent);\n#endif // SPHERICAL\n    vec4 uvMinAndExtents = czm_batchTable_uvMinAndExtents(batchId);\n    vec4 uMaxVmax = czm_batchTable_uMaxVmax(batchId);\n\n    v_uMaxAndInverseDistance = vec3(uMaxVmax.xy, uvMinAndExtents.z);\n    v_vMaxAndInverseDistance = vec3(uMaxVmax.zw, uvMinAndExtents.w);\n    v_uvMinAndSphericalLongitudeRotation.xy = uvMinAndExtents.xy;\n#endif // TEXTURE_COORDINATES\n\n#ifdef PER_INSTANCE_COLOR\n    v_color = czm_batchTable_color(batchId);\n#endif\n\n    gl_Position = czm_depthClamp(czm_modelViewProjectionRelativeToEye * position);\n}\n',SV="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#ifdef VECTOR_TILE\nuniform vec4 u_highlightColor;\n#endif\n\nvoid main(void)\n{\n#ifdef VECTOR_TILE\n    gl_FragColor = czm_gammaCorrect(u_highlightColor);\n#else\n    gl_FragColor = vec4(1.0);\n#endif\n    czm_writeDepthClamp();\n}\n";const IV={TERRAIN:0,CESIUM_3D_TILE:1,BOTH:2,NUMBER_OF_CLASSIFICATION_TYPES:3};var DV=Object.freeze(IV);const PV={NEVER:Ys.NEVER,LESS:Ys.LESS,EQUAL:Ys.EQUAL,LESS_OR_EQUAL:Ys.LEQUAL,GREATER:Ys.GREATER,NOT_EQUAL:Ys.NOTEQUAL,GREATER_OR_EQUAL:Ys.GEQUAL,ALWAYS:Ys.ALWAYS};var jV=Object.freeze(PV);const RV={STREAM_DRAW:Ys.STREAM_DRAW,STATIC_DRAW:Ys.STATIC_DRAW,DYNAMIC_DRAW:Ys.DYNAMIC_DRAW,validate:function(e){return e===RV.STREAM_DRAW||e===RV.STATIC_DRAW||e===RV.DYNAMIC_DRAW}};var LV=Object.freeze(RV);function MV(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context),!Object(r["a"])(e.typedArray)&&!Object(r["a"])(e.sizeInBytes))throw new a["a"]("Either options.sizeInBytes or options.typedArray is required.");if(Object(r["a"])(e.typedArray)&&Object(r["a"])(e.sizeInBytes))throw new a["a"]("Cannot pass in both options.sizeInBytes and options.typedArray.");if(Object(r["a"])(e.typedArray)&&(i["a"].typeOf.object("options.typedArray",e.typedArray),i["a"].typeOf.number("options.typedArray.byteLength",e.typedArray.byteLength)),!LV.validate(e.usage))throw new a["a"]("usage is invalid.");const t=e.context._gl,n=e.bufferTarget,s=e.typedArray;let c=e.sizeInBytes;const l=e.usage,u=Object(r["a"])(s);u&&(c=s.byteLength),i["a"].typeOf.number.greaterThan("sizeInBytes",c,0);const h=t.createBuffer();t.bindBuffer(n,h),t.bufferData(n,u?s:c,l),t.bindBuffer(n,null),this._id=ML(),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=n,this._sizeInBytes=c,this._usage=l,this._buffer=h,this.vertexArrayDestroyable=!0}MV.createVertexBuffer=function(e){return i["a"].defined("options.context",e.context),new MV({context:e.context,bufferTarget:Ys.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})},MV.createIndexBuffer=function(e){if(i["a"].defined("options.context",e.context),!ll.validate(e.indexDatatype))throw new a["a"]("Invalid indexDatatype.");if(e.indexDatatype===ll.UNSIGNED_INT&&!e.context.elementIndexUint)throw new a["a"]("IndexDatatype.UNSIGNED_INT requires OES_element_index_uint, which is not supported on this system.  Check context.elementIndexUint.");const t=e.context,n=e.indexDatatype,o=ll.getSizeInBytes(n),r=new MV({context:t,bufferTarget:Ys.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),s=r.sizeInBytes/o;return Object.defineProperties(r,{indexDatatype:{get:function(){return n}},bytesPerIndex:{get:function(){return o}},numberOfIndices:{get:function(){return s}}}),r},Object.defineProperties(MV.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),MV.prototype._getBuffer=function(){return this._buffer},MV.prototype.copyFromArrayView=function(e,t){t=Object(o["a"])(t,0),i["a"].defined("arrayView",e),i["a"].typeOf.number.lessThanOrEquals("offsetInBytes + arrayView.byteLength",t+e.byteLength,this._sizeInBytes);const n=this._gl,r=this._bufferTarget;n.bindBuffer(r,this._buffer),n.bufferSubData(r,t,e),n.bindBuffer(r,null)},MV.prototype.copyFromBuffer=function(e,t,n,i){if(!this._webgl2)throw new a["a"]("A WebGL 2 context is required.");if(!Object(r["a"])(e))throw new a["a"]("readBuffer must be defined.");if(!Object(r["a"])(i)||i<=0)throw new a["a"]("sizeInBytes must be defined and be greater than zero.");if(!Object(r["a"])(t)||t<0||t+i>e._sizeInBytes)throw new a["a"]("readOffset must be greater than or equal to zero and readOffset + sizeInBytes must be less than of equal to readBuffer.sizeInBytes.");if(!Object(r["a"])(n)||n<0||n+i>this._sizeInBytes)throw new a["a"]("writeOffset must be greater than or equal to zero and writeOffset + sizeInBytes must be less than of equal to this.sizeInBytes.");if(this._buffer===e._buffer&&(n>=t&&n<t+i||t>n&&t<n+i))throw new a["a"]("When readBuffer is equal to this, the ranges [readOffset + sizeInBytes) and [writeOffset, writeOffset + sizeInBytes) must not overlap.");if(this._bufferTarget===Ys.ELEMENT_ARRAY_BUFFER&&e._bufferTarget!==Ys.ELEMENT_ARRAY_BUFFER||this._bufferTarget!==Ys.ELEMENT_ARRAY_BUFFER&&e._bufferTarget===Ys.ELEMENT_ARRAY_BUFFER)throw new a["a"]("Can not copy an index buffer into another buffer type.");const o=Ys.COPY_READ_BUFFER,s=Ys.COPY_WRITE_BUFFER,c=this._gl;c.bindBuffer(s,this._buffer),c.bindBuffer(o,e._buffer),c.copyBufferSubData(o,s,t,n,i),c.bindBuffer(s,null),c.bindBuffer(o,null)},MV.prototype.getBufferData=function(e,t,n,i){if(t=Object(o["a"])(t,0),n=Object(o["a"])(n,0),!this._webgl2)throw new a["a"]("A WebGL 2 context is required.");if(!Object(r["a"])(e))throw new a["a"]("arrayView is required.");let s,c,l=e.byteLength;if(Object(r["a"])(i)?(s=i,Object(r["a"])(l)?c=1:(l=e.length,c=e.BYTES_PER_ELEMENT)):Object(r["a"])(l)?(s=l-n,c=1):(l=e.length,s=l-n,c=e.BYTES_PER_ELEMENT),n<0||n>l)throw new a["a"]("destinationOffset must be greater than zero and less than the arrayView length.");if(n+s>l)throw new a["a"]("destinationOffset + length must be less than or equal to the arrayViewLength.");if(t<0||t>this._sizeInBytes)throw new a["a"]("sourceOffset must be greater than zero and less than the buffers size.");if(t+s*c>this._sizeInBytes)throw new a["a"]("sourceOffset + length must be less than the buffers size.");const u=this._gl,h=Ys.COPY_READ_BUFFER;u.bindBuffer(h,this._buffer),u.getBufferSubData(h,t,e,n,i),u.bindBuffer(h,null)},MV.prototype.isDestroyed=function(){return!1},MV.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),Wc(this)};var NV=MV;function BV(e,t,n,i){const s=Object(r["a"])(t.vertexBuffer),c=Object(r["a"])(t.value),l=t.value?t.value.length:t.componentsPerAttribute;if(!s&&!c)throw new a["a"]("attribute must have a vertexBuffer or a value.");if(s&&c)throw new a["a"]("attribute cannot have both a vertexBuffer and a value.  It must have either a vertexBuffer property defining per-vertex data or a value property defining data for all vertices.");if(1!==l&&2!==l&&3!==l&&4!==l){if(c)throw new a["a"]("attribute.value.length must be in the range [1, 4].");throw new a["a"]("attribute.componentsPerAttribute must be in the range [1, 4].")}if(Object(r["a"])(t.componentDatatype)&&!Ks.validate(t.componentDatatype))throw new a["a"]("attribute must have a valid componentDatatype or not specify it.");if(Object(r["a"])(t.strideInBytes)&&t.strideInBytes>255)throw new a["a"]("attribute must have a strideInBytes less than or equal to 255 or not specify it.");if(Object(r["a"])(t.instanceDivisor)&&t.instanceDivisor>0&&!i.instancedArrays)throw new a["a"]("instanced arrays is not supported");if(Object(r["a"])(t.instanceDivisor)&&t.instanceDivisor<0)throw new a["a"]("attribute must have an instanceDivisor greater than or equal to zero");if(Object(r["a"])(t.instanceDivisor)&&c)throw new a["a"]("attribute cannot have have an instanceDivisor if it is not backed by a buffer");if(Object(r["a"])(t.instanceDivisor)&&t.instanceDivisor>0&&0===t.index)throw new a["a"]("attribute zero cannot have an instanceDivisor greater than 0");const u={index:Object(o["a"])(t.index,n),enabled:Object(o["a"])(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:c?t.value.slice(0):void 0,componentsPerAttribute:l,componentDatatype:Object(o["a"])(t.componentDatatype,Ks.FLOAT),normalize:Object(o["a"])(t.normalize,!1),offsetInBytes:Object(o["a"])(t.offsetInBytes,0),strideInBytes:Object(o["a"])(t.strideInBytes,0),instanceDivisor:Object(o["a"])(t.instanceDivisor,0)};if(s)u.vertexAttrib=function(e){const t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(i.glVertexAttribDivisor(t,this.instanceDivisor),i._vertexAttribDivisors[t]=this.instanceDivisor,i._previousDrawInstanced=!0)},u.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&i.glVertexAttribDivisor(n,0)};else{switch(u.componentsPerAttribute){case 1:u.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:u.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:u.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:u.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)};break}u.disableVertexAttribArray=function(e){}}e.push(u)}function FV(e,t,n){for(let i=0;i<t.length;++i){const n=t[i];n.enabled&&n.vertexAttrib(e)}Object(r["a"])(n)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n._getBuffer())}function zV(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context),i["a"].defined("options.attributes",e.attributes);const t=e.context,n=t._gl,s=e.attributes,c=e.indexBuffer;let l;const u=[];let h=1,d=!1,f=!1,p=s.length;for(l=0;l<p;++l)BV(u,s[l],l,t);for(p=u.length,l=0;l<p;++l){const e=u[l];if(Object(r["a"])(e.vertexBuffer)&&0===e.instanceDivisor){const t=e.strideInBytes||e.componentsPerAttribute*Ks.getSizeInBytes(e.componentDatatype);h=e.vertexBuffer.sizeInBytes/t;break}}for(l=0;l<p;++l)u[l].instanceDivisor>0&&(d=!0),Object(r["a"])(u[l].value)&&(f=!0);const m={};for(l=0;l<p;++l){const e=u[l].index;if(m[e])throw new a["a"](`Index ${e} is used by more than one attribute.`);m[e]=!0}let _;t.vertexArrayObject&&(_=t.glCreateVertexArray(),t.glBindVertexArray(_),FV(n,u,c),t.glBindVertexArray(null)),this._numberOfVertices=h,this._hasInstancedAttributes=d,this._hasConstantAttributes=f,this._context=t,this._gl=n,this._vao=_,this._attributes=u,this._indexBuffer=c}function kV(e){return e.values.length/e.componentsPerAttribute}function UV(e){return Ks.getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function VV(e){let t,n,i;const o=[];for(n in e)e.hasOwnProperty(n)&&Object(r["a"])(e[n])&&Object(r["a"])(e[n].values)&&(o.push(n),e[n].componentDatatype===Ks.DOUBLE&&(e[n].componentDatatype=Ks.FLOAT,e[n].values=Ks.createTypedArray(Ks.FLOAT,e[n].values)));let a;const s=o.length;if(s>0)for(a=kV(e[o[0]]),t=1;t<s;++t){const n=kV(e[o[t]]);if(n!==a)throw new ye["a"](`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices `+`(${n.toString()})`+` than attribute ${o[0]} (${a.toString()}).`)}o.sort((function(t,n){return Ks.getSizeInBytes(e[n].componentDatatype)-Ks.getSizeInBytes(e[t].componentDatatype)}));let c=0;const l={};for(t=0;t<s;++t)n=o[t],i=e[n],l[n]=c,c+=UV(i);if(c>0){const r=Ks.getSizeInBytes(e[o[0]].componentDatatype),u=c%r;0!==u&&(c+=r-u);const h=a*c,d=new ArrayBuffer(h),f={};for(t=0;t<s;++t){n=o[t];const i=Ks.getSizeInBytes(e[n].componentDatatype);f[n]={pointer:Ks.createTypedArray(e[n].componentDatatype,d),index:l[n]/i,strideInComponentType:c/i}}for(t=0;t<a;++t)for(let r=0;r<s;++r){n=o[r],i=e[n];const a=i.values,s=f[n],c=s.pointer,l=i.componentsPerAttribute;for(let e=0;e<l;++e)c[s.index+e]=a[t*l+e];s.index+=s.strideInComponentType}return{buffer:d,offsetsInBytes:l,vertexSizeInBytes:c}}}function HV(e){const t=e._context,n=e._hasInstancedAttributes;if(!n&&!t._previousDrawInstanced)return;t._previousDrawInstanced=n;const i=t._vertexAttribDivisors,o=e._attributes,r=YN.maximumVertexAttributes;let a;if(n){const e=o.length;for(a=0;a<e;++a){const e=o[a];if(e.enabled){const n=e.instanceDivisor,o=e.index;n!==i[o]&&(t.glVertexAttribDivisor(o,n),i[o]=n)}}}else for(a=0;a<r;++a)i[a]>0&&(t.glVertexAttribDivisor(a,0),i[a]=0)}function GV(e,t){const n=e._attributes,i=n.length;for(let o=0;o<i;++o){const e=n[o];e.enabled&&Object(r["a"])(e.value)&&e.vertexAttrib(t)}}zV.fromGeometry=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context,n=Object(o["a"])(e.geometry,o["a"].EMPTY_OBJECT),a=Object(o["a"])(e.bufferUsage,LV.DYNAMIC_DRAW),c=Object(o["a"])(e.attributeLocations,o["a"].EMPTY_OBJECT),l=Object(o["a"])(e.interleave,!1),u=e.vertexArrayAttributes;let h,d,f;const p=Object(r["a"])(u)?u:[],m=n.attributes;if(l){const e=VV(m);if(Object(r["a"])(e)){f=NV.createVertexBuffer({context:t,typedArray:e.buffer,usage:a});const n=e.offsetsInBytes,i=e.vertexSizeInBytes;for(h in m)m.hasOwnProperty(h)&&Object(r["a"])(m[h])&&(d=m[h],Object(r["a"])(d.values)?p.push({index:c[h],vertexBuffer:f,componentDatatype:d.componentDatatype,componentsPerAttribute:d.componentsPerAttribute,normalize:d.normalize,offsetInBytes:n[h],strideInBytes:i}):p.push({index:c[h],value:d.value,componentDatatype:d.componentDatatype,normalize:d.normalize}))}}else for(h in m)if(m.hasOwnProperty(h)&&Object(r["a"])(m[h])){d=m[h];let e=d.componentDatatype;e===Ks.DOUBLE&&(e=Ks.FLOAT),f=void 0,Object(r["a"])(d.values)&&(f=NV.createVertexBuffer({context:t,typedArray:Ks.createTypedArray(e,d.values),usage:a})),p.push({index:c[h],vertexBuffer:f,value:d.value,componentDatatype:e,componentsPerAttribute:d.componentsPerAttribute,normalize:d.normalize})}let _;const g=n.indices;return Object(r["a"])(g)&&(_=Fu.computeNumberOfVertices(n)>=s["a"].SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?NV.createIndexBuffer({context:t,typedArray:new Uint32Array(g),usage:a,indexDatatype:ll.UNSIGNED_INT}):NV.createIndexBuffer({context:t,typedArray:new Uint16Array(g),usage:a,indexDatatype:ll.UNSIGNED_SHORT})),new zV({context:t,attributes:p,indexBuffer:_})},Object.defineProperties(zV.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),zV.prototype.getAttribute=function(e){return i["a"].defined("index",e),this._attributes[e]},zV.prototype._bind=function(){Object(r["a"])(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&HV(this),this._hasConstantAttributes&&GV(this,this._gl)):FV(this._gl,this._attributes,this._indexBuffer)},zV.prototype._unBind=function(){if(Object(r["a"])(this._vao))this._context.glBindVertexArray(null);else{const e=this._attributes,t=this._gl;for(let n=0;n<e.length;++n){const i=e[n];i.enabled&&i.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},zV.prototype.isDestroyed=function(){return!1},zV.prototype.destroy=function(){const e=this._attributes;for(let n=0;n<e.length;++n){const t=e[n].vertexBuffer;Object(r["a"])(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy()}const t=this._indexBuffer;return Object(r["a"])(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),Object(r["a"])(this._vao)&&this._context.glDeleteVertexArray(this._vao),Wc(this)};var WV=zV;function qV(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("context is required");if(!Object(r["a"])(t))throw new a["a"]("attributes is required");if(!Object(r["a"])(n))throw new a["a"]("numberOfInstances is required");if(this._attributes=t,this._numberOfInstances=n,0===t.length)return;const i=YV(t),o=e.floatingPointTexture,s=i===hx.FLOAT&&!o,c=KV(t,s),l=$V(c,t,s),u=Math.floor(YN.maximumTextureSize/l),h=Math.min(n,u),d=l*h,f=Math.ceil(n/h),p=1/d,m=.5*p,_=1/f,g=.5*_;this._textureDimensions=new Gt(d,f),this._textureStep=new be(p,m,_,g),this._pixelDatatype=s?hx.UNSIGNED_BYTE:i,this._packFloats=s,this._offsets=c,this._stride=l,this._texture=void 0;const b=4*d*f;this._batchValues=i!==hx.FLOAT||s?new Uint8Array(b):new Float32Array(b),this._batchValuesDirty=!1}function YV(e){let t=!1;const n=e.length;for(let i=0;i<n;++i)if(e[i].componentDatatype!==Ks.UNSIGNED_BYTE){t=!0;break}return t?hx.FLOAT:hx.UNSIGNED_BYTE}function XV(e,t){const n=e[t].componentsPerAttribute;return 2===n?Gt:3===n?g:4===n?be:Number}function KV(e,t){const n=new Array(e.length);let i=0;const o=e.length;for(let r=0;r<o;++r){const o=e[r],a=o.componentDatatype;n[r]=i,a!==Ks.UNSIGNED_BYTE&&t?i+=4:++i}return n}function $V(e,t,n){const i=e.length,o=e[i-1],r=t[i-1],a=r.componentDatatype;return a!==Ks.UNSIGNED_BYTE&&n?o+4:o+1}Object.defineProperties(qV.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});const JV=new be;function QV(e,t,n){let i=be.unpack(e,t,JV);const o=be.unpackFloat(i);i=be.unpack(e,t+4,JV);const r=be.unpackFloat(i);i=be.unpack(e,t+8,JV);const a=be.unpackFloat(i);i=be.unpack(e,t+12,JV);const s=be.unpackFloat(i);return be.fromElements(o,r,a,s,n)}function ZV(e,t,n){let i=be.packFloat(e.x,JV);be.pack(i,t,n),i=be.packFloat(e.y,i),be.pack(i,t,n+4),i=be.packFloat(e.z,i),be.pack(i,t,n+8),i=be.packFloat(e.w,i),be.pack(i,t,n+12)}const eH=new be;qV.prototype.getBatchedAttribute=function(e,t,n){if(e<0||e>=this._numberOfInstances)throw new a["a"]("instanceIndex is out of range.");if(t<0||t>=this._attributes.length)throw new a["a"]("attributeIndex is out of range");const i=this._attributes,o=this._offsets[t],s=this._stride,c=4*s*e+4*o;let l;l=this._packFloats&&i[t].componentDatatype!==hx.UNSIGNED_BYTE?QV(this._batchValues,c,eH):be.unpack(this._batchValues,c,eH);const u=XV(i,t);return Object(r["a"])(u.fromCartesian4)?u.fromCartesian4(l,n):Object(r["a"])(u.clone)?u.clone(l,n):l.x};const tH=[void 0,void 0,new Gt,new g,new be],nH=new be;function iH(e,t){const n=e._textureDimensions;e._texture=new lB({context:t,pixelFormat:fx.RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:rB.NEAREST,flipY:!1})}function oH(e){const t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}function rH(e){const t=e._stride;return 1===e._textureDimensions.y?`uniform vec4 batchTextureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float numberOfAttributes = float(${t}); \n`+"    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); \n} \n":`uniform vec4 batchTextureStep; \nuniform vec2 batchTextureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float stepY = batchTextureStep.z; \n    float centerY = batchTextureStep.w; \n    float numberOfAttributes = float(${t}); \n`+"    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); \n    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}function aH(e){return 1===e?"float":`vec${e}`}function sH(e){return 1===e?".x":2===e?".xy":3===e?".xyz":""}function cH(e,t){const n=e._attributes,i=n[t],o=i.componentsPerAttribute,r=i.functionName,a=aH(o),s=sH(o),c=e._offsets[t];let l=`${a} ${r}(float batchId) \n`+"{ \n    vec2 st = computeSt(batchId); \n"+`    st.x += batchTextureStep.x * float(${c}); \n`;return e._packFloats&&i.componentDatatype!==hx.UNSIGNED_BYTE?l+="vec4 textureValue; \ntextureValue.x = czm_unpackFloat(texture2D(batchTexture, st)); \ntextureValue.y = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x, 0.0))); \ntextureValue.z = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); \ntextureValue.w = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); \n":l+="    vec4 textureValue = texture2D(batchTexture, st); \n",l+=`    ${a} value = textureValue${s}; \n`,e._pixelDatatype!==hx.UNSIGNED_BYTE||i.componentDatatype!==Ks.UNSIGNED_BYTE||i.normalize?e._pixelDatatype===hx.FLOAT&&i.componentDatatype===Ks.UNSIGNED_BYTE&&i.normalize&&(l+="value /= 255.0; \n"):l+="value *= 255.0; \n",l+="    return value; \n} \n",l}qV.prototype.setBatchedAttribute=function(e,t,n){if(e<0||e>=this._numberOfInstances)throw new a["a"]("instanceIndex is out of range.");if(t<0||t>=this._attributes.length)throw new a["a"]("attributeIndex is out of range");if(!Object(r["a"])(n))throw new a["a"]("value is required.");const i=this._attributes,o=tH[i[t].componentsPerAttribute],s=this.getBatchedAttribute(e,t,o),c=XV(this._attributes,t),l=Object(r["a"])(c.equals)?c.equals(s,n):s===n;if(l)return;const u=nH;u.x=Object(r["a"])(n.x)?n.x:n,u.y=Object(r["a"])(n.y)?n.y:0,u.z=Object(r["a"])(n.z)?n.z:0,u.w=Object(r["a"])(n.w)?n.w:0;const h=this._offsets[t],d=this._stride,f=4*d*e+4*h;this._packFloats&&i[t].componentDatatype!==hx.UNSIGNED_BYTE?ZV(u,this._batchValues,f):be.pack(u,this._batchValues,f),this._batchValuesDirty=!0},qV.prototype.update=function(e){Object(r["a"])(this._texture)&&!this._batchValuesDirty||0===this._attributes.length||(this._batchValuesDirty=!1,Object(r["a"])(this._texture)||iH(this,e.context),oH(this))},qV.prototype.getUniformMapCallback=function(){const e=this;return function(t){if(0===e._attributes.length)return t;const n={batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}};return Object(qE["a"])(t,n)}},qV.prototype.getVertexShaderCallback=function(){const e=this._attributes;if(0===e.length)return function(e){return e};let t="uniform highp sampler2D batchTexture; \n";t+=`${rH(this)}\n`;const n=e.length;for(let i=0;i<n;++i)t+=cH(this,i);return function(e){const n=e.indexOf("void main"),i=e.substring(0,n),o=e.substring(n);return`${i}\n${t}\n${o}`}},qV.prototype.isDestroyed=function(){return!1},qV.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),Wc(this)};var lH=qV;function uH(e,t,n){let i=!n;const o=e.length;let a;if(!i&&o>1){const t=e[0].modelMatrix;for(a=1;a<o;++a)if(!Me.equals(t,e[a].modelMatrix)){i=!0;break}}if(i)for(a=0;a<o;++a)Object(r["a"])(e[a].geometry)&&mp.transformToWorldCoordinates(e[a]);else Me.multiplyTransformation(t,e[0].modelMatrix,t)}function hH(e,t){const n=e.attributes,i=n.position,o=i.values.length/i.componentsPerAttribute;n.batchId=new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:1,values:new Float32Array(o)});const r=n.batchId.values;for(let a=0;a<o;++a)r[a]=t}function dH(e){const t=e.length;for(let n=0;n<t;++n){const t=e[n];Object(r["a"])(t.geometry)?hH(t.geometry,n):Object(r["a"])(t.westHemisphereGeometry)&&Object(r["a"])(t.eastHemisphereGeometry)&&(hH(t.westHemisphereGeometry,n),hH(t.eastHemisphereGeometry,n))}}function fH(e){const t=e.instances,n=e.projection,i=e.elementIndexUintSupported,o=e.scene3DOnly,s=e.vertexCacheOptimize,c=e.compressVertices,l=e.modelMatrix;let u,h,d,f=t.length;for(u=0;u<f;++u)if(Object(r["a"])(t[u].geometry)){d=t[u].geometry.primitiveType;break}for(u=1;u<f;++u)if(Object(r["a"])(t[u].geometry)&&t[u].geometry.primitiveType!==d)throw new a["a"]("All instance geometries must have the same primitiveType.");if(uH(t,l,o),!o)for(u=0;u<f;++u)Object(r["a"])(t[u].geometry)&&mp.splitLongitude(t[u]);if(dH(t),s)for(u=0;u<f;++u){const e=t[u];Object(r["a"])(e.geometry)?(mp.reorderForPostVertexCache(e.geometry),mp.reorderForPreVertexCache(e.geometry)):Object(r["a"])(e.westHemisphereGeometry)&&Object(r["a"])(e.eastHemisphereGeometry)&&(mp.reorderForPostVertexCache(e.westHemisphereGeometry),mp.reorderForPreVertexCache(e.westHemisphereGeometry),mp.reorderForPostVertexCache(e.eastHemisphereGeometry),mp.reorderForPreVertexCache(e.eastHemisphereGeometry))}let p=mp.combineInstances(t);for(f=p.length,u=0;u<f;++u){h=p[u];const e=h.attributes;if(o)for(const t in e)e.hasOwnProperty(t)&&e[t].componentDatatype===Ks.DOUBLE&&mp.encodeAttribute(h,t,`${t}3DHigh`,`${t}3DLow`);else for(const t in e)if(e.hasOwnProperty(t)&&e[t].componentDatatype===Ks.DOUBLE){const e=`${t}3D`,i=`${t}2D`;mp.projectTo2D(h,t,e,i,n),Object(r["a"])(h.boundingSphere)&&"position"===t&&(h.boundingSphereCV=Tt.fromVertices(h.attributes.position2D.values)),mp.encodeAttribute(h,e,`${e}High`,`${e}Low`),mp.encodeAttribute(h,i,`${i}High`,`${i}Low`)}c&&mp.compressVertices(h)}if(!i){let e=[];for(f=p.length,u=0;u<f;++u)h=p[u],e=e.concat(mp.fitToUnsignedShortIndices(h));p=e}return p}function pH(e,t,n,i){let o,a,s;const c=i.length-1;if(c>=0){const e=i[c];o=e.offset+e.count,s=e.index,a=n[s].indices.length}else o=0,s=0,a=n[s].indices.length;const l=e.length;for(let u=0;u<l;++u){const c=e[u],l=c[t];if(!Object(r["a"])(l))continue;const h=l.indices.length;o+h>a&&(o=0,a=n[++s].indices.length),i.push({index:s,offset:o,count:h}),o+=h}}function mH(e,t){const n=[];return pH(e,"geometry",t,n),pH(e,"westHemisphereGeometry",t,n),pH(e,"eastHemisphereGeometry",t,n),n}const _H={};function gH(e,t){const n=e.attributes;for(const i in n)if(n.hasOwnProperty(i)){const e=n[i];Object(r["a"])(e)&&Object(r["a"])(e.values)&&t.push(e.values.buffer)}Object(r["a"])(e.indices)&&t.push(e.indices.buffer)}function bH(e,t){const n=e.length;for(let i=0;i<n;++i)gH(e[i],t)}function yH(e){let t=1;const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(++t,!Object(r["a"])(n))continue;const o=n.attributes;t+=7+2*Tt.packedLength+(Object(r["a"])(n.indices)?n.indices.length:0);for(const e in o)if(o.hasOwnProperty(e)&&Object(r["a"])(o[e])){const n=o[e];t+=5+n.values.length}}return t}function vH(e,t){const n=e.length,i=new Float64Array(1+19*n);let o=0;i[o++]=n;for(let a=0;a<n;a++){const t=e[a];if(Me.pack(t.modelMatrix,i,o),o+=Me.packedLength,Object(r["a"])(t.attributes)&&Object(r["a"])(t.attributes.offset)){const e=t.attributes.offset.value;i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2]}o+=3}return t.push(i.buffer),i}function OH(e){const t=e,n=new Array(t[0]);let i=0,o=1;while(o<t.length){const e=Me.unpack(t,o);let a;o+=Me.packedLength,Object(r["a"])(t[o])&&(a={offset:new WE(t[o],t[o+1],t[o+2])}),o+=3,n[i++]={modelMatrix:e,attributes:a}}return n}function AH(e){const t=e.length,n=1+(Tt.packedLength+1)*t,i=new Float32Array(n);let o=0;i[o++]=t;for(let a=0;a<t;++a){const t=e[a];Object(r["a"])(t)?(i[o++]=1,Tt.pack(e[a],i,o)):i[o++]=0,o+=Tt.packedLength}return i}function wH(e){const t=new Array(e[0]);let n=0,i=1;while(i<e.length)1===e[i++]&&(t[n]=Tt.unpack(e,i)),++n,i+=Tt.packedLength;return t}_H.combineGeometry=function(e){let t,n;const i=e.instances,o=i.length;let a,s,c=!1;o>0&&(t=fH(e),t.length>0&&(n=mp.createAttributeLocations(t[0]),e.createPickOffsets&&(a=mH(i,t))),Object(r["a"])(i[0].attributes)&&Object(r["a"])(i[0].attributes.offset)&&(s=new Array(o),c=!0));const l=new Array(o),u=new Array(o);for(let h=0;h<o;++h){const e=i[h],t=e.geometry;Object(r["a"])(t)&&(l[h]=t.boundingSphere,u[h]=t.boundingSphereCV,c&&(s[h]=e.geometry.offsetAttribute));const n=e.eastHemisphereGeometry,o=e.westHemisphereGeometry;Object(r["a"])(n)&&Object(r["a"])(o)&&(Object(r["a"])(n.boundingSphere)&&Object(r["a"])(o.boundingSphere)&&(l[h]=Tt.union(n.boundingSphere,o.boundingSphere)),Object(r["a"])(n.boundingSphereCV)&&Object(r["a"])(o.boundingSphereCV)&&(u[h]=Tt.union(n.boundingSphereCV,o.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:n,pickOffsets:a,offsetInstanceExtend:s,boundingSpheres:l,boundingSpheresCV:u}},_H.packCreateGeometryResults=function(e,t){const n=new Float64Array(yH(e)),i=[],a={},s=e.length;let c=0;n[c++]=s;for(let l=0;l<s;l++){const t=e[l],s=Object(r["a"])(t);if(n[c++]=s?1:0,!s)continue;n[c++]=t.primitiveType,n[c++]=t.geometryType,n[c++]=Object(o["a"])(t.offsetAttribute,-1);const u=Object(r["a"])(t.boundingSphere)?1:0;n[c++]=u,u&&Tt.pack(t.boundingSphere,n,c),c+=Tt.packedLength;const h=Object(r["a"])(t.boundingSphereCV)?1:0;n[c++]=h,h&&Tt.pack(t.boundingSphereCV,n,c),c+=Tt.packedLength;const d=t.attributes,f=[];for(const e in d)d.hasOwnProperty(e)&&Object(r["a"])(d[e])&&(f.push(e),Object(r["a"])(a[e])||(a[e]=i.length,i.push(e)));n[c++]=f.length;for(let e=0;e<f.length;e++){const t=f[e],i=d[t];n[c++]=a[t],n[c++]=i.componentDatatype,n[c++]=i.componentsPerAttribute,n[c++]=i.normalize?1:0,n[c++]=i.values.length,n.set(i.values,c),c+=i.values.length}const p=Object(r["a"])(t.indices)?t.indices.length:0;n[c++]=p,p>0&&(n.set(t.indices,c),c+=p)}return t.push(n.buffer),{stringTable:i,packedData:n}},_H.unpackCreateGeometryResults=function(e){const t=e.stringTable,n=e.packedData;let i;const o=new Array(n[0]);let r=0,a=1;while(a<n.length){const e=1===n[a++];if(!e){o[r++]=void 0;continue}const s=n[a++],c=n[a++];let l,u,h=n[a++];-1===h&&(h=void 0);const d=1===n[a++];d&&(l=Tt.unpack(n,a)),a+=Tt.packedLength;const f=1===n[a++];let p,m,_;f&&(u=Tt.unpack(n,a)),a+=Tt.packedLength;const g=new Vu,b=n[a++];for(i=0;i<b;i++){const e=t[n[a++]],i=n[a++];_=n[a++];const o=0!==n[a++];p=n[a++],m=Ks.createTypedArray(i,p);for(let t=0;t<p;t++)m[t]=n[a++];g[e]=new ku({componentDatatype:i,componentsPerAttribute:_,normalize:o,values:m})}let y;if(p=n[a++],p>0){const e=m.length/_;for(y=ll.createTypedArray(e,p),i=0;i<p;i++)y[i]=n[a++]}o[r++]=new Fu({primitiveType:s,geometryType:c,boundingSphere:l,boundingSphereCV:u,indices:y,attributes:g,offsetAttribute:h})}return o},_H.packCombineGeometryParameters=function(e,t){const n=e.createGeometryResults,i=n.length;for(let o=0;o<i;o++)t.push(n[o].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:vH(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof V,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},_H.unpackCombineGeometryParameters=function(e){const t=OH(e.packedInstances),n=e.createGeometryResults,i=n.length;let o=0;for(let s=0;s<i;s++){const e=_H.unpackCreateGeometryResults(n[s]),i=e.length;for(let n=0;n<i;n++){const i=e[n],r=t[o];r.geometry=i,++o}}const r=k.clone(e.ellipsoid),a=e.isGeographic?new V(r):new Rc(r);return{instances:t,ellipsoid:r,projection:a,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:Me.clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},_H.packCombineGeometryResults=function(e,t){Object(r["a"])(e.geometries)&&bH(e.geometries,t);const n=AH(e.boundingSpheres),i=AH(e.boundingSpheresCV);return t.push(n.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:n,boundingSpheresCV:i}},_H.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:wH(e.boundingSpheres),boundingSpheresCV:wH(e.boundingSpheresCV)}};var TH=_H;const CH={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6};var EH=Object.freeze(CH);const xH={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(e){return e===xH.SCENE3D?1:e!==xH.MORPHING?0:void 0}};var SH=Object.freeze(xH);const IH={DISABLED:0,ENABLED:1,CAST_ONLY:2,RECEIVE_ONLY:3,NUMBER_OF_SHADOW_MODES:4,castShadows:function(e){return e===IH.ENABLED||e===IH.CAST_ONLY},receiveShadows:function(e){return e===IH.ENABLED||e===IH.RECEIVE_ONLY},fromCastReceive:function(e,t){return e&&t?IH.ENABLED:e?IH.CAST_ONLY:t?IH.RECEIVE_ONLY:IH.DISABLED}};var DH=Object.freeze(IH);function PH(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=new Me,this.show=Object(o["a"])(e.show,!0),this._vertexCacheOptimize=Object(o["a"])(e.vertexCacheOptimize,!1),this._interleave=Object(o["a"])(e.interleave,!1),this._releaseGeometryInstances=Object(o["a"])(e.releaseGeometryInstances,!0),this._allowPicking=Object(o["a"])(e.allowPicking,!0),this._asynchronous=Object(o["a"])(e.asynchronous,!0),this._compressVertices=Object(o["a"])(e.compressVertices,!0),this.cull=Object(o["a"])(e.cull,!0),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,Object(r["a"])(this.rtcCenter)&&(!Object(r["a"])(this.geometryInstances)||Array.isArray(this.geometryInstances)&&1!==this.geometryInstances.length))throw new a["a"]("Relative-to-center rendering only supports one geometry instance.");this.shadows=Object(o["a"])(e.shadows,DH.DISABLED),this._translucent=void 0,this._state=EH.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=[],this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1;const t=this;this._readyPromise=new Promise((e,n)=>{t._completeLoad=(i,o,a)=>{this._error=a,this._state=o,i.afterRender.push((function(){t._ready=t._state===EH.COMPLETE||t._state===EH.FAILED,Object(r["a"])(a)?n(a):e(t)}))}}),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}function jH(e){const t=e.length,n=[],i=e[0].attributes;let o;for(o in i)if(i.hasOwnProperty(o)&&Object(r["a"])(i[o])){const a=i[o];let s=!0;for(let n=1;n<t;++n){const t=e[n].attributes[o];if(!Object(r["a"])(t)||a.componentDatatype!==t.componentDatatype||a.componentsPerAttribute!==t.componentsPerAttribute||a.normalize!==t.normalize){s=!1;break}}s&&n.push(o)}return n}Object.defineProperties(PH.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}}});const RH=new Gt,LH=new g,MH=new be;function NH(e){const t=e.length;return 1===t?e[0]:2===t?Gt.unpack(e,0,RH):3===t?g.unpack(e,0,LH):4===t?be.unpack(e,0,MH):void 0}function BH(e,t){const n=e.geometryInstances,i=Array.isArray(n)?n:[n],a=i.length;if(0===a)return;const s=jH(i),c=s.length,l=[],u={},h={};let d;const f=i[0];let p,m,_,g=f.attributes;for(p=0;p<c;++p)m=s[p],_=g[m],u[m]=p,l.push({functionName:`czm_batchTable_${m}`,componentDatatype:_.componentDatatype,componentsPerAttribute:_.componentsPerAttribute,normalize:_.normalize});-1!==s.indexOf("distanceDisplayCondition")&&(l.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:Ks.FLOAT,componentsPerAttribute:1}),h.center3DHigh=l.length-5,h.center3DLow=l.length-4,h.center2DHigh=l.length-3,h.center2DLow=l.length-2,h.radius=l.length-1),-1!==s.indexOf("offset")&&(l.push({functionName:"czm_batchTable_offset2D",componentDatatype:Ks.FLOAT,componentsPerAttribute:3}),d=l.length-1),l.push({functionName:"czm_batchTable_pickColor",componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});const b=l.length,y=new lH(t,l,a);for(p=0;p<a;++p){const n=i[p];g=n.attributes;for(let e=0;e<c;++e){m=s[e],_=g[m];const t=NH(_.value),n=u[m];y.setBatchedAttribute(p,n,t)}const a={primitive:Object(o["a"])(n.pickPrimitive,e)};Object(r["a"])(n.id)&&(a.id=n.id);const l=t.createPickId(a);e._pickIds.push(l);const h=l.color,d=MH;d.x=Dm.floatToByte(h.red),d.y=Dm.floatToByte(h.green),d.z=Dm.floatToByte(h.blue),d.w=Dm.floatToByte(h.alpha),y.setBatchedAttribute(p,b-1,d)}e._batchTable=y,e._batchTableAttributeIndices=u,e._batchTableBoundingSphereAttributeIndices=h,e._batchTableOffsetAttribute2DIndex=d}function FH(e){let t;return t=Array.isArray(e.values)?e.values.slice(0):new e.values.constructor(e.values),new ku({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function zH(e){const t=e.attributes,n=new Vu;for(const o in t)t.hasOwnProperty(o)&&Object(r["a"])(t[o])&&(n[o]=FH(t[o]));let i;if(Object(r["a"])(e.indices)){const t=e.indices;i=Array.isArray(t)?t.slice(0):new t.constructor(t)}return new Fu({attributes:n,indices:i,primitiveType:e.primitiveType,boundingSphere:Tt.clone(e.boundingSphere)})}function kH(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:Me.clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}const UH=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g;function VH(e){const t=EV.replaceMain(e,"czm_non_pick_main"),n="varying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}";return`${t}\n${n}`}function HH(e){return`varying vec4 v_pickColor;\n${e}`}function GH(e,t){if(!e.compressVertices)return t;const n=-1!==t.search(/attribute\s+vec3\s+normal;/g),i=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!n&&!i)return t;const o=-1!==t.search(/attribute\s+vec3\s+tangent;/g),r=-1!==t.search(/attribute\s+vec3\s+bitangent;/g);let a=i&&n?2:1;a+=o||r?1:0;const s=a>1?`vec${a}`:"float",c="compressedAttributes",l=`attribute ${s} ${c};`;let u="",h="";if(i){u+="vec2 st;\n";const e=a>1?`${c}.x`:c;h+=`    st = czm_decompressTextureCoordinates(${e});\n`}n&&o&&r?(u+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",h+=`    czm_octDecode(${c}.${i?"yz":"xy"}, normal, tangent, bitangent);\n`):(n&&(u+="vec3 normal;\n",h+=`    normal = czm_octDecode(${c}${a>1?`.${i?"y":"x"}`:""});\n`),o&&(u+="vec3 tangent;\n",h+=`    tangent = czm_octDecode(${c}.${i&&n?"z":"y"});\n`),r&&(u+="vec3 bitangent;\n",h+=`    bitangent = czm_octDecode(${c}.${i&&n?"z":"y"});\n`));let d=t;d=d.replace(/attribute\s+vec3\s+normal;/g,""),d=d.replace(/attribute\s+vec2\s+st;/g,""),d=d.replace(/attribute\s+vec3\s+tangent;/g,""),d=d.replace(/attribute\s+vec3\s+bitangent;/g,""),d=EV.replaceMain(d,"czm_non_compressed_main");const f=`void main() \n{ \n${h}    czm_non_compressed_main(); \n`+"}";return[l,u,d,f].join("\n")}function WH(e){let t=EV.replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n    gl_Position = czm_depthClamp(gl_Position);}\n",t}function qH(e){let t=EV.replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth)\n    #if defined(LOG_DEPTH)\n        czm_writeLogDepth();\n    #else\n        czm_writeDepthClamp();\n    #endif\n#endif\n}\n",t=`#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n${t}`,t}function YH(e,t){const n=e.vertexAttributes;for(const i in n)if(n.hasOwnProperty(i)&&!Object(r["a"])(t[i]))throw new a["a"](`Appearance/Geometry mismatch.  The appearance requires vertex shader attribute input '${i}', which was not computed as part of the Geometry.  Use the appearance's vertexFormat property when constructing the geometry.`)}function XH(e,t){return function(){return e[t]}}PH._modifyShaderPosition=function(e,t,n){let i,o="",a="",s="";while(null!==(i=UH.exec(t))){const c=i[1],l=`vec4 czm_compute${c[0].toUpperCase()}${c.substr(1)}()`;"vec4 czm_computePosition()"!==l&&(o+=`${l};\n`),Object(r["a"])(e.rtcCenter)?(t=t.replace(/attribute\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/attribute\s+vec(?:3|4)\s+position3DLow;/g,""),o+="uniform mat4 u_modifiedModelView;\n",a+="attribute vec4 position;\n",s+=`${l}\n`+"{\n    return u_modifiedModelView * position;\n}\n\n",t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):n?s+=`${l}\n`+"{\n"+`    return czm_translateRelativeToEye(${c}3DHigh, ${c}3DLow);\n`+"}\n\n":(a+=`attribute vec3 ${c}2DHigh;\n`+`attribute vec3 ${c}2DLow;\n`,s+=`${l}\n`+"{\n    vec4 p;\n    if (czm_morphTime == 1.0)\n    {\n"+`        p = czm_translateRelativeToEye(${c}3DHigh, ${c}3DLow);\n`+"    }\n    else if (czm_morphTime == 0.0)\n    {\n"+`        p = czm_translateRelativeToEye(${c}2DHigh.zxy, ${c}2DLow.zxy);\n`+"    }\n    else\n    {\n        p = czm_columbusViewMorph(\n"+`                czm_translateRelativeToEye(${c}2DHigh.zxy, ${c}2DLow.zxy),\n`+`                czm_translateRelativeToEye(${c}3DHigh, ${c}3DLow),\n`+"                czm_morphTime);\n    }\n    return p;\n}\n\n")}return[o,a,t,s].join("\n")},PH._appendShowToShader=function(e,t){if(!Object(r["a"])(e._batchTableAttributeIndices.show))return t;const n=EV.replaceMain(t,"czm_non_show_main"),i="void main() \n{ \n    czm_non_show_main(); \n    gl_Position *= czm_batchTable_show(batchId); \n}";return`${n}\n${i}`},PH._updateColorAttribute=function(e,t,n){if(!Object(r["a"])(e._batchTableAttributeIndices.color)&&!Object(r["a"])(e._batchTableAttributeIndices.depthFailColor))return t;if(-1===t.search(/attribute\s+vec4\s+color;/g))return t;if(n&&!Object(r["a"])(e._batchTableAttributeIndices.depthFailColor))throw new a["a"]("A depthFailColor per-instance attribute is required when using a depth fail appearance that uses a color attribute.");let i=t;return i=i.replace(/attribute\s+vec4\s+color;/g,""),i=n?i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i},PH._updatePickColorAttribute=function(e){let t=e.replace(/attribute\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t},PH._appendOffsetToShader=function(e,t){if(!Object(r["a"])(e._batchTableAttributeIndices.offset))return t;let n="attribute float batchId;\n";n+="attribute float applyOffset;";let i=t.replace(/attribute\s+float\s+batchId;/g,n),o="vec4 $1 = czm_computePosition();\n";return o+="    if (czm_sceneMode == czm_sceneMode3D)\n",o+="    {\n",o+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",o+="    }\n",o+="    else\n",o+="    {\n",o+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",o+="    }\n",i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,o),i},PH._appendDistanceDisplayConditionToShader=function(e,t,n){if(!Object(r["a"])(e._batchTableAttributeIndices.distanceDisplayCondition))return t;const i=EV.replaceMain(t,"czm_non_distanceDisplayCondition_main");let o="void main() \n{ \n    czm_non_distanceDisplayCondition_main(); \n    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);\n    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);\n    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);\n    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);\n";return o+=n?"    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n":"    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);\n    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);\n    vec4 centerRTE;\n    if (czm_morphTime == 1.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);\n    }\n    else\n    {\n        centerRTE = czm_columbusViewMorph(\n                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),\n                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),\n                czm_morphTime);\n    }\n",o+="    float radiusSq = boundingSphereRadius * boundingSphereRadius; \n    float distanceSq; \n    if (czm_sceneMode == czm_sceneMode2D) \n    { \n        distanceSq = czm_eyeHeight2D.y - radiusSq; \n    } \n    else \n    { \n        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; \n    } \n    distanceSq = max(distanceSq, 0.0); \n    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; \n    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; \n    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; \n    gl_Position *= show; \n}",`${i}\n${o}`};const KH=Math.max(Or.hardwareConcurrency-1,1);let $H;const JH=new il("combineGeometry");function QH(e,t){let n,i,s,c;const l=e._instanceIds;if(e._state===EH.READY){n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];const u=e._numberOfInstances=n.length,h=[];let d,f=[];for(s=0;s<u;++s){if(i=n[s].geometry,l.push(n[s].id),!Object(r["a"])(i._workerName))throw new a["a"]("_workerName must be defined for asynchronous geometry.");f.push({moduleName:i._workerName,geometry:i})}if(!Object(r["a"])($H))for($H=new Array(KH),s=0;s<KH;s++)$H[s]=new il("createGeometry");for(f=FM(f,KH),s=0;s<f.length;s++){let e=0;const t=f[s],n=t.length;for(c=0;c<n;++c)d=t[c],i=d.geometry,Object(r["a"])(i.constructor.pack)&&(d.offset=e,e+=Object(o["a"])(i.constructor.packedLength,i.packedLength));let a;if(e>0){const o=new Float64Array(e);for(a=[o.buffer],c=0;c<n;++c)d=t[c],i=d.geometry,Object(r["a"])(i.constructor.pack)&&(i.constructor.pack(i,o,d.offset),d.geometry=o)}h.push($H[s].scheduleTask({subTasks:f[s]},a))}e._state=EH.CREATING,Promise.all(h).then((function(t){e._createGeometryResults=t,e._state=EH.CREATED})).catch((function(n){CG(e,t,EH.FAILED,n)}))}else if(e._state===EH.CREATED){const i=[];n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];const o=t.scene3DOnly,a=t.mapProjection,s=JH.scheduleTask(TH.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:n,ellipsoid:a.ellipsoid,projection:a,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:o,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},i),i);e._createGeometryResults=void 0,e._state=EH.COMBINING,Promise.resolve(s).then((function(n){const i=TH.unpackCombineGeometryResults(n);e._geometries=i.geometries,e._attributeLocations=i.attributeLocations,e.modelMatrix=Me.clone(i.modelMatrix,e.modelMatrix),e._pickOffsets=i.pickOffsets,e._offsetInstanceExtend=i.offsetInstanceExtend,e._instanceBoundingSpheres=i.boundingSpheres,e._instanceBoundingSpheresCV=i.boundingSpheresCV,Object(r["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=EH.COMBINED):CG(e,t,EH.FAILED,void 0)})).catch((function(n){CG(e,t,EH.FAILED,n)}))}}function ZH(e,t){const n=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],i=e._numberOfInstances=n.length,o=new Array(i),a=e._instanceIds;let s,c,l=0;for(c=0;c<i;c++){s=n[c];const e=s.geometry;let t;t=Object(r["a"])(e.attributes)&&Object(r["a"])(e.primitiveType)?zH(e):e.constructor.createGeometry(e),o[l++]=kH(s,t),a.push(s.id)}o.length=l;const u=t.scene3DOnly,h=t.mapProjection,d=TH.combineGeometry({instances:o,ellipsoid:h.ellipsoid,projection:h,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:u,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=d.geometries,e._attributeLocations=d.attributeLocations,e.modelMatrix=Me.clone(d.modelMatrix,e.modelMatrix),e._pickOffsets=d.pickOffsets,e._offsetInstanceExtend=d.offsetInstanceExtend,e._instanceBoundingSpheres=d.boundingSpheres,e._instanceBoundingSpheresCV=d.boundingSpheresCV,Object(r["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=EH.COMBINED):CG(e,t,EH.FAILED,void 0)}function eG(e,t){const n=e._batchTableAttributeIndices.offset;if(!e._recomputeBoundingSpheres||!Object(r["a"])(n))return void(e._recomputeBoundingSpheres=!1);let i;const o=e._offsetInstanceExtend,a=e._instanceBoundingSpheres,s=a.length;let c=e._tempBoundingSpheres;if(!Object(r["a"])(c)){for(c=new Array(s),i=0;i<s;i++)c[i]=new Tt;e._tempBoundingSpheres=c}for(i=0;i<s;++i){let t=c[i];const r=e._batchTable.getBatchedAttribute(i,n,new g);t=a[i].clone(t),yG(t,r,o[i])}const l=[],u=[],h=[];for(i=0;i<s;++i){const e=c[i],t=e.center.x-e.radius;t>0||Tt.intersectPlane(e,ji.ORIGIN_ZX_PLANE)!==G.INTERSECTING?l.push(e):(u.push(e),h.push(e))}let d=l[0],f=h[0],p=u[0];for(i=1;i<l.length;i++)d=Tt.union(d,l[i]);for(i=1;i<h.length;i++)f=Tt.union(f,h[i]);for(i=1;i<u.length;i++)p=Tt.union(p,u[i]);const m=[];for(Object(r["a"])(d)&&m.push(d),Object(r["a"])(f)&&m.push(f),Object(r["a"])(p)&&m.push(p),i=0;i<m.length;i++){const n=m[i].clone(e._boundingSpheres[i]);e._boundingSpheres[i]=n,e._boundingSphereCV[i]=Tt.projectTo2D(n,t.mapProjection,e._boundingSphereCV[i])}PH._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}const tG=new Bd,nG=new I,iG=new g,oG=new Tt;function rG(e,t){const n=Object(r["a"])(e._batchTableAttributeIndices.distanceDisplayCondition);if(!n||e._batchTableBoundingSpheresUpdated)return;const i=e._batchTableBoundingSphereAttributeIndices,o=i.center3DHigh,a=i.center3DLow,s=i.center2DHigh,c=i.center2DLow,l=i.radius,u=t.mapProjection,h=u.ellipsoid,d=e._batchTable,f=e._instanceBoundingSpheres,p=f.length;for(let m=0;m<p;++m){let n=f[m];if(!Object(r["a"])(n))continue;const i=e.modelMatrix;Object(r["a"])(i)&&(n=Tt.transform(n,i,oG));const p=n.center,_=n.radius;let g=Bd.fromCartesian(p,tG);if(d.setBatchedAttribute(m,o,g.high),d.setBatchedAttribute(m,a,g.low),!t.scene3DOnly){const e=h.cartesianToCartographic(p,nG),t=u.project(e,iG);g=Bd.fromCartesian(t,tG),d.setBatchedAttribute(m,s,g.high),d.setBatchedAttribute(m,c,g.low)}d.setBatchedAttribute(m,l,_)}e._batchTableBoundingSpheresUpdated=!0}const aG=new g,sG=new g;function cG(e,t){const n=Object(r["a"])(e._batchTableAttributeIndices.offset);if(!n||e._batchTableOffsetsUpdated||t.scene3DOnly)return;const i=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,a=o.ellipsoid,s=e._batchTable,c=e._instanceBoundingSpheres,l=c.length;for(let u=0;u<l;++u){let t=c[u];if(!Object(r["a"])(t))continue;const n=s.getBatchedAttribute(u,e._batchTableAttributeIndices.offset);if(g.equals(n,g.ZERO)){s.setBatchedAttribute(u,i,g.ZERO);continue}const l=e.modelMatrix;Object(r["a"])(l)&&(t=Tt.transform(t,l,oG));let h=t.center;h=a.scaleToGeodeticSurface(h,sG);let d=a.cartesianToCartographic(h,nG);const f=o.project(d,iG),p=g.add(n,h,aG);d=a.cartesianToCartographic(p,d);const m=o.project(d,aG),_=g.subtract(m,f,aG),b=_.x;_.x=_.z,_.z=_.y,_.y=b,s.setBatchedAttribute(u,i,_)}e._batchTableOffsetsUpdated=!0}function lG(e,t){const n=e._attributeLocations,i=e._geometries,o=t.scene3DOnly,a=t.context,s=[],c=i.length;for(let l=0;l<c;++l){const c=i[l];if(s.push(WV.fromGeometry({context:a,geometry:c,attributeLocations:n,bufferUsage:LV.STATIC_DRAW,interleave:e._interleave})),Object(r["a"])(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,c);else if(e._boundingSpheres.push(Tt.clone(c.boundingSphere)),e._boundingSphereWC.push(new Tt),!o){const t=c.boundingSphereCV.center,n=t.x,i=t.y,o=t.z;t.x=o,t.y=n,t.z=i,e._boundingSphereCV.push(Tt.clone(c.boundingSphereCV)),e._boundingSphere2D.push(new Tt),e._boundingSphereMorph.push(new Tt)}}e._va=s,e._primitiveType=i[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,CG(e,t,EH.COMPLETE,void 0)}function uG(e,t,n,i){let o,a=n.getRenderState();i?(o=Object(RL["a"])(a,!1),o.cull={enabled:!0,face:HN.BACK},e._frontFaceRS=UF.fromCache(o),o.cull.face=HN.FRONT,e._backFaceRS=UF.fromCache(o)):(e._frontFaceRS=UF.fromCache(a),e._backFaceRS=e._frontFaceRS),o=Object(RL["a"])(a,!1),Object(r["a"])(e._depthFailAppearance)&&(o.depthTest.enabled=!1),Object(r["a"])(e._depthFailAppearance)&&(a=e._depthFailAppearance.getRenderState(),o=Object(RL["a"])(a,!1),o.depthTest.func=jV.GREATER,i?(o.cull={enabled:!0,face:HN.BACK},e._frontFaceDepthFailRS=UF.fromCache(o),o.cull.face=HN.FRONT,e._backFaceDepthFailRS=UF.fromCache(o)):(e._frontFaceDepthFailRS=UF.fromCache(o),e._backFaceDepthFailRS=e._frontFaceRS))}function hG(e,t,n){const i=t.context,o=e._attributeLocations;let a=e._batchTable.getVertexShaderCallback()(n.vertexShaderSource);a=PH._appendOffsetToShader(e,a),a=PH._appendShowToShader(e,a),a=PH._appendDistanceDisplayConditionToShader(e,a,t.scene3DOnly),a=VH(a),a=PH._updateColorAttribute(e,a,!1),a=GH(e,a),a=PH._modifyShaderPosition(e,a,t.scene3DOnly);let s=n.getFragmentShaderSource();s=HH(s),e._sp=Nz.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:a,fragmentShaderSource:s,attributeLocations:o}),YH(e._sp,o),Object(r["a"])(e._depthFailAppearance)&&(a=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),a=PH._appendShowToShader(e,a),a=PH._appendDistanceDisplayConditionToShader(e,a,t.scene3DOnly),a=VH(a),a=PH._updateColorAttribute(e,a,!0),a=GH(e,a),a=PH._modifyShaderPosition(e,a,t.scene3DOnly),a=WH(a),s=e._depthFailAppearance.getFragmentShaderSource(),s=HH(s),s=qH(s),e._spDepthFail=Nz.replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:a,fragmentShaderSource:s,attributeLocations:o}),YH(e._spDepthFail,o))}const dG=new Me,fG=new g;function pG(e,t,n,i){const o=Object(r["a"])(n)?n._uniforms:void 0,s={},c=t.uniforms;if(Object(r["a"])(c))for(const u in c)if(c.hasOwnProperty(u)){if(Object(r["a"])(o)&&Object(r["a"])(o[u]))throw new a["a"](`Appearance and material have a uniform with the same name: ${u}`);s[u]=XH(c,u)}let l=Object(qE["a"])(s,o);return l=e._batchTable.getUniformMapCallback()(l),Object(r["a"])(e.rtcCenter)&&(l.u_modifiedModelView=function(){const t=i.context.uniformState.view;return Me.multiply(t,e._modelMatrix,dG),Me.multiplyByPoint(dG,e.rtcCenter,fG),Me.setTranslation(dG,fG,dG),dG}),l}function mG(e,t,n,i,o,a,s,c){const l=pG(e,t,n,c);let u;Object(r["a"])(e._depthFailAppearance)&&(u=pG(e,e._depthFailAppearance,e._depthFailAppearance.material,c));const h=i?hF.TRANSLUCENT:hF.OPAQUE;let d=o?2:1;d*=Object(r["a"])(e._depthFailAppearance)?2:1,a.length=e._va.length*d;const f=a.length;let p=0;for(let m=0;m<f;++m){let t;o&&(t=a[m],Object(r["a"])(t)||(t=a[m]=new lF({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[p],t.renderState=e._backFaceRS,t.shaderProgram=e._sp,t.uniformMap=l,t.pass=h,++m),t=a[m],Object(r["a"])(t)||(t=a[m]=new lF({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[p],t.renderState=e._frontFaceRS,t.shaderProgram=e._sp,t.uniformMap=l,t.pass=h,Object(r["a"])(e._depthFailAppearance)&&(o&&(++m,t=a[m],Object(r["a"])(t)||(t=a[m]=new lF({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[p],t.renderState=e._backFaceDepthFailRS,t.shaderProgram=e._spDepthFail,t.uniformMap=u,t.pass=h),++m,t=a[m],Object(r["a"])(t)||(t=a[m]=new lF({owner:e,primitiveType:e._primitiveType})),t.vertexArray=e._va[p],t.renderState=e._frontFaceDepthFailRS,t.shaderProgram=e._spDepthFail,t.uniformMap=u,t.pass=h),++p}}function _G(e,t,n,i,o,s,c,l){if(t.mode!==SH.SCENE3D&&!Me.equals(o,Me.IDENTITY))throw new a["a"]("Primitive.modelMatrix is only supported in 3D mode.");let u;PH._updateBoundingVolumes(e,t,o),t.mode===SH.SCENE3D?u=e._boundingSphereWC:t.mode===SH.COLUMBUS_VIEW?u=e._boundingSphereCV:t.mode===SH.SCENE2D&&Object(r["a"])(e._boundingSphere2D)?u=e._boundingSphere2D:Object(r["a"])(e._boundingSphereMorph)&&(u=e._boundingSphereMorph);const h=t.commandList,d=t.passes;if(d.render||d.pick){const t=e.allowPicking,i=DH.castShadows(e.shadows),a=DH.receiveShadows(e.shadows),d=n.length;let f=l?2:1;f*=Object(r["a"])(e._depthFailAppearance)?2:1;for(let e=0;e<d;++e){const r=Math.floor(e/f),l=n[e];l.modelMatrix=o,l.boundingVolume=u[r],l.cull=s,l.debugShowBoundingVolume=c,l.castShadows=i,l.receiveShadows=a,l.pickId=t?"v_pickColor":void 0,h.push(l)}}}PH._updateBoundingVolumes=function(e,t,n,i){let o,a,s;if(i||!Me.equals(n,e._modelMatrix))for(Me.clone(n,e._modelMatrix),a=e._boundingSpheres.length,o=0;o<a;++o)s=e._boundingSpheres[o],Object(r["a"])(s)&&(e._boundingSphereWC[o]=Tt.transform(s,n,e._boundingSphereWC[o]),t.scene3DOnly||(e._boundingSphere2D[o]=Tt.clone(e._boundingSphereCV[o],e._boundingSphere2D[o]),e._boundingSphere2D[o].center.x=0,e._boundingSphereMorph[o]=Tt.union(e._boundingSphereWC[o],e._boundingSphereCV[o])));const c=e.appearance.pixelSize;if(Object(r["a"])(c))for(a=e._boundingSpheres.length,o=0;o<a;++o){s=e._boundingSpheres[o];const n=e._boundingSphereWC[o],i=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight),r=i*c;n.radius=s.radius+r}},PH.prototype.update=function(e){if(!Object(r["a"])(this.geometryInstances)&&0===this._va.length||Object(r["a"])(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&0===this.geometryInstances.length||!Object(r["a"])(this.appearance)||e.mode!==SH.SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)return;if(Object(r["a"])(this._error))throw this._error;if(Object(r["a"])(this.rtcCenter)&&!e.scene3DOnly)throw new a["a"]("RTC rendering is only available for 3D only scenes.");if(this._state===EH.FAILED)return;const t=e.context;if(Object(r["a"])(this._batchTable)||BH(this,t),this._batchTable.attributes.length>0){if(0===YN.maximumVertexTextureImageUnits)throw new ye["a"]("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==EH.COMPLETE&&this._state!==EH.COMBINED&&(this.asynchronous?QH(this,e):ZH(this,e)),this._state===EH.COMBINED&&(rG(this,e),cG(this,e),lG(this,e)),!this.show||this._state!==EH.COMPLETE)return;this._batchTableOffsetsUpdated||cG(this,e),this._recomputeBoundingSpheres&&eG(this,e);const n=this.appearance,i=n.material;let s=!1,c=!1;this._appearance!==n?(this._appearance=n,this._material=i,s=!0,c=!0):this._material!==i&&(this._material=i,c=!0);const l=this.depthFailAppearance,u=Object(r["a"])(l)?l.material:void 0;this._depthFailAppearance!==l?(this._depthFailAppearance=l,this._depthFailMaterial=u,s=!0,c=!0):this._depthFailMaterial!==u&&(this._depthFailMaterial=u,c=!0);const h=this._appearance.isTranslucent();this._translucent!==h&&(this._translucent=h,s=!0),Object(r["a"])(this._material)&&this._material.update(t);const d=n.closed&&h;if(s){const e=Object(o["a"])(this._createRenderStatesFunction,uG);e(this,t,n,d)}if(c){const t=Object(o["a"])(this._createShaderProgramFunction,hG);t(this,e,n)}if(s||c){const t=Object(o["a"])(this._createCommandsFunction,mG);t(this,n,i,h,d,this._colorCommands,this._pickCommands,e)}const f=Object(o["a"])(this._updateAndQueueCommandsFunction,_G);f(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,d)};const gG=new Tt,bG=new Tt;function yG(e,t,n){if(n===Gu.TOP){const n=Tt.clone(e,gG),i=Tt.clone(e,bG);i.center=g.add(i.center,t,i.center),e=Tt.union(n,i,e)}else n===Gu.ALL&&(e.center=g.add(e.center,t,e.center));return e}function vG(e,t,n){return function(){const i=e.getBatchedAttribute(t,n),o=e.attributes[n],a=o.componentsPerAttribute,s=Ks.createTypedArray(o.componentDatatype,a);return Object(r["a"])(i.constructor.pack)?i.constructor.pack(i,s,0):s[0]=i,s}}function OG(e,t,n,i,o){return function(s){if(!Object(r["a"])(s)||!Object(r["a"])(s.length)||s.length<1||s.length>4)throw new a["a"]("value must be and array with length between 1 and 4.");const c=NH(s);e.setBatchedAttribute(t,n,c),"offset"===o&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}const AG=new g;function wG(e,t,n){t.boundingSphere={get:function(){let i=e._instanceBoundingSpheres[n];if(Object(r["a"])(i)){i=i.clone();const o=e.modelMatrix,a=t.offset;Object(r["a"])(a)&&yG(i,g.fromArray(a.get(),0,AG),e._offsetInstanceExtend[n]),Object(r["a"])(o)&&(i=Tt.transform(i,o))}return i}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[n]}}}function TG(e,t,n){t.pickId={get:function(){return e._pickIds[n]}}}function CG(e,t,n,i){e._completeLoad(t,n,i)}PH.prototype.getGeometryInstanceAttributes=function(e){if(!Object(r["a"])(e))throw new a["a"]("id is required");if(!Object(r["a"])(this._batchTable))throw new a["a"]("must call update before calling getGeometryInstanceAttributes");let t=-1;const n=this._lastPerInstanceAttributeIndex,i=this._instanceIds,o=i.length;for(let r=0;r<o;++r){const a=(n+r)%o;if(e===i[a]){t=a;break}}if(-1===t)return;let s=this._perInstanceAttributeCache[t];if(Object(r["a"])(s))return s;const c=this._batchTable,l=this._batchTableAttributeIndices;s={};const u={};for(const r in l)if(l.hasOwnProperty(r)){const e=l[r];u[r]={get:vG(c,t,e),set:OG(c,t,e,this,r)}}return wG(this,u,t),TG(this,u,t),Object.defineProperties(s,u),this._lastPerInstanceAttributeIndex=t,this._perInstanceAttributeCache[t]=s,s},PH.prototype.isDestroyed=function(){return!1},PH.prototype.destroy=function(){let e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();const n=this._va;for(e=n.length,t=0;t<e;++t)n[t].destroy();this._va=void 0;const i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,Wc(this)};var EG=PH,xG="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#ifdef TEXTURE_COORDINATES\n#ifdef SPHERICAL\nvarying vec4 v_sphericalExtents;\n#else // SPHERICAL\nvarying vec2 v_inversePlaneExtents;\nvarying vec4 v_westPlane;\nvarying vec4 v_southPlane;\n#endif // SPHERICAL\nvarying vec3 v_uvMinAndSphericalLongitudeRotation;\nvarying vec3 v_uMaxAndInverseDistance;\nvarying vec3 v_vMaxAndInverseDistance;\n#endif // TEXTURE_COORDINATES\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#endif\n\n#ifdef NORMAL_EC\nvec3 getEyeCoordinate3FromWindowCoordinate(vec2 fragCoord, float logDepthOrDepth) {\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);\n    return eyeCoordinate.xyz / eyeCoordinate.w;\n}\n\nvec3 vectorFromOffset(vec4 eyeCoordinate, vec2 positiveOffset) {\n    vec2 glFragCoordXY = gl_FragCoord.xy;\n    // Sample depths at both offset and negative offset\n    float upOrRightLogDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));\n    float downOrLeftLogDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));\n    // Explicitly evaluate both paths\n    // Necessary for multifrustum and for edges of the screen\n    bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);\n    float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);\n    float useDownOrLeft = float(useUpOrRight == 0.0);\n    vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY + positiveOffset, upOrRightLogDepth);\n    vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY - positiveOffset, downOrLeftLogDepth);\n    return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;\n}\n#endif // NORMAL_EC\n\nvoid main(void)\n{\n#ifdef REQUIRES_EC\n    float logDepthOrDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw));\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n#endif\n\n#ifdef REQUIRES_WC\n    vec4 worldCoordinate4 = czm_inverseView * eyeCoordinate;\n    vec3 worldCoordinate = worldCoordinate4.xyz / worldCoordinate4.w;\n#endif\n\n#ifdef TEXTURE_COORDINATES\n    vec2 uv;\n#ifdef SPHERICAL\n    // Treat world coords as a sphere normal for spherical coordinates\n    vec2 sphericalLatLong = czm_approximateSphericalCoordinates(worldCoordinate);\n    sphericalLatLong.y += v_uvMinAndSphericalLongitudeRotation.z;\n    sphericalLatLong.y = czm_branchFreeTernary(sphericalLatLong.y < czm_pi, sphericalLatLong.y, sphericalLatLong.y - czm_twoPi);\n    uv.x = (sphericalLatLong.y - v_sphericalExtents.y) * v_sphericalExtents.w;\n    uv.y = (sphericalLatLong.x - v_sphericalExtents.x) * v_sphericalExtents.z;\n#else // SPHERICAL\n    // Unpack planes and transform to eye space\n    uv.x = czm_planeDistance(v_westPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.x;\n    uv.y = czm_planeDistance(v_southPlane, eyeCoordinate.xyz / eyeCoordinate.w) * v_inversePlaneExtents.y;\n#endif // SPHERICAL\n#endif // TEXTURE_COORDINATES\n\n#ifdef PICK\n#ifdef CULL_FRAGMENTS\n    // When classifying translucent geometry, logDepthOrDepth == 0.0\n    // indicates a region that should not be classified, possibly due to there\n    // being opaque pixels there in another buffer.\n    // Check for logDepthOrDepth != 0.0 to make sure this should be classified.\n    if (0.0 <= uv.x && uv.x <= 1.0 && 0.0 <= uv.y && uv.y <= 1.0 || logDepthOrDepth != 0.0) {\n        gl_FragColor.a = 1.0; // 0.0 alpha leads to discard from ShaderSource.createPickFragmentShaderSource\n        czm_writeDepthClamp();\n    }\n#else // CULL_FRAGMENTS\n        gl_FragColor.a = 1.0;\n#endif // CULL_FRAGMENTS\n#else // PICK\n\n#ifdef CULL_FRAGMENTS\n    // When classifying translucent geometry, logDepthOrDepth == 0.0\n    // indicates a region that should not be classified, possibly due to there\n    // being opaque pixels there in another buffer.\n    if (uv.x <= 0.0 || 1.0 <= uv.x || uv.y <= 0.0 || 1.0 <= uv.y || logDepthOrDepth == 0.0) {\n        discard;\n    }\n#endif\n\n#ifdef NORMAL_EC\n    // Compute normal by sampling adjacent pixels in 2x2 block in screen space\n    vec3 downUp = vectorFromOffset(eyeCoordinate, vec2(0.0, 1.0));\n    vec3 leftRight = vectorFromOffset(eyeCoordinate, vec2(1.0, 0.0));\n    vec3 normalEC = normalize(cross(leftRight, downUp));\n#endif\n\n\n#ifdef PER_INSTANCE_COLOR\n\n    vec4 color = czm_gammaCorrect(v_color);\n#ifdef FLAT\n    gl_FragColor = color;\n#else // FLAT\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = -eyeCoordinate.xyz;\n    czm_material material = czm_getDefaultMaterial(materialInput);\n    material.diffuse = color.rgb;\n    material.alpha = color.a;\n\n    gl_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);\n#endif // FLAT\n\n    // Premultiply alpha. Required for classification primitives on translucent globe.\n    gl_FragColor.rgb *= gl_FragColor.a;\n\n#else // PER_INSTANCE_COLOR\n\n    // Material support.\n    // USES_ is distinct from REQUIRES_, because some things are dependencies of each other or\n    // dependencies for culling but might not actually be used by the material.\n\n    czm_materialInput materialInput;\n\n#ifdef USES_NORMAL_EC\n    materialInput.normalEC = normalEC;\n#endif\n\n#ifdef USES_POSITION_TO_EYE_EC\n    materialInput.positionToEyeEC = -eyeCoordinate.xyz;\n#endif\n\n#ifdef USES_TANGENT_TO_EYE\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(worldCoordinate, normalEC);\n#endif\n\n#ifdef USES_ST\n    // Remap texture coordinates from computed (approximately aligned with cartographic space) to the desired\n    // texture coordinate system, which typically forms a tight oriented bounding box around the geometry.\n    // Shader is provided a set of reference points for remapping.\n    materialInput.st.x = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_uMaxAndInverseDistance.xy, uv) * v_uMaxAndInverseDistance.z;\n    materialInput.st.y = czm_lineDistance(v_uvMinAndSphericalLongitudeRotation.xy, v_vMaxAndInverseDistance.xy, uv) * v_vMaxAndInverseDistance.z;\n#endif\n\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else // FLAT\n    gl_FragColor = czm_phong(normalize(-eyeCoordinate.xyz), material, czm_lightDirectionEC);\n#endif // FLAT\n\n    // Premultiply alpha. Required for classification primitives on translucent globe.\n    gl_FragColor.rgb *= gl_FragColor.a;\n\n#endif // PER_INSTANCE_COLOR\n    czm_writeDepthClamp();\n#endif // PICK\n}\n";function SG(e,t,n){i["a"].typeOf.bool("extentsCulling",e),i["a"].typeOf.bool("planarExtents",t),i["a"].typeOf.object("appearance",n),this._projectionExtentDefines={eastMostYhighDefine:"",eastMostYlowDefine:"",westMostYhighDefine:"",westMostYlowDefine:""};const o=new RG;o.requiresTextureCoordinates=e,o.requiresEC=!n.flat;const r=new RG;if(r.requiresTextureCoordinates=e,n instanceof nF)o.requiresNormalEC=!n.flat;else{const e=`${n.material.shaderSource}\n${n.fragmentShaderSource}`;o.normalEC=-1!==e.indexOf("materialInput.normalEC")||-1!==e.indexOf("czm_getDefaultMaterial"),o.positionToEyeEC=-1!==e.indexOf("materialInput.positionToEyeEC"),o.tangentToEyeMatrix=-1!==e.indexOf("materialInput.tangentToEyeMatrix"),o.st=-1!==e.indexOf("materialInput.st")}this._colorShaderDependencies=o,this._pickShaderDependencies=r,this._appearance=n,this._extentsCulling=e,this._planarExtents=t}SG.prototype.createFragmentShader=function(e){i["a"].typeOf.bool("columbusView2D",e);const t=this._appearance,n=this._colorShaderDependencies,o=[];e||this._planarExtents||o.push("SPHERICAL"),n.requiresEC&&o.push("REQUIRES_EC"),n.requiresWC&&o.push("REQUIRES_WC"),n.requiresTextureCoordinates&&o.push("TEXTURE_COORDINATES"),this._extentsCulling&&o.push("CULL_FRAGMENTS"),n.requiresNormalEC&&o.push("NORMAL_EC"),t instanceof nF&&o.push("PER_INSTANCE_COLOR"),n.normalEC&&o.push("USES_NORMAL_EC"),n.positionToEyeEC&&o.push("USES_POSITION_TO_EYE_EC"),n.tangentToEyeMatrix&&o.push("USES_TANGENT_TO_EYE"),n.st&&o.push("USES_ST"),t.flat&&o.push("FLAT");let r="";return t instanceof nF||(r=t.material.shaderSource),new EV({defines:o,sources:[r,xG]})},SG.prototype.createPickFragmentShader=function(e){i["a"].typeOf.bool("columbusView2D",e);const t=this._pickShaderDependencies,n=["PICK"];return e||this._planarExtents||n.push("SPHERICAL"),t.requiresEC&&n.push("REQUIRES_EC"),t.requiresWC&&n.push("REQUIRES_WC"),t.requiresTextureCoordinates&&n.push("TEXTURE_COORDINATES"),this._extentsCulling&&n.push("CULL_FRAGMENTS"),new EV({defines:n,sources:[xG],pickColorQualifier:"varying"})},SG.prototype.createVertexShader=function(e,t,n,o){return i["a"].defined("defines",e),i["a"].typeOf.string("vertexShaderSource",t),i["a"].typeOf.bool("columbusView2D",n),i["a"].defined("mapProjection",o),jG(this._colorShaderDependencies,this._planarExtents,n,e,t,this._appearance,o,this._projectionExtentDefines)},SG.prototype.createPickVertexShader=function(e,t,n,o){return i["a"].defined("defines",e),i["a"].typeOf.string("vertexShaderSource",t),i["a"].typeOf.bool("columbusView2D",n),i["a"].defined("mapProjection",o),jG(this._pickShaderDependencies,this._planarExtents,n,e,t,void 0,o,this._projectionExtentDefines)};const IG=new g,DG=new I,PG={high:0,low:0};function jG(e,t,n,i,o,a,c,l){const u=i.slice();if(""===l.eastMostYhighDefine){const e=DG;e.longitude=s["a"].PI,e.latitude=0,e.height=0;const t=c.project(e,IG);let n=Bd.encode(t.x,PG);l.eastMostYhighDefine=`EAST_MOST_X_HIGH ${n.high.toFixed(`${n.high}`.length+1)}`,l.eastMostYlowDefine=`EAST_MOST_X_LOW ${n.low.toFixed(`${n.low}`.length+1)}`;const i=DG;i.longitude=-s["a"].PI,i.latitude=0,i.height=0;const o=c.project(i,IG);n=Bd.encode(o.x,PG),l.westMostYhighDefine=`WEST_MOST_X_HIGH ${n.high.toFixed(`${n.high}`.length+1)}`,l.westMostYlowDefine=`WEST_MOST_X_LOW ${n.low.toFixed(`${n.low}`.length+1)}`}return n&&(u.push(l.eastMostYhighDefine),u.push(l.eastMostYlowDefine),u.push(l.westMostYhighDefine),u.push(l.westMostYlowDefine)),Object(r["a"])(a)&&a instanceof nF&&u.push("PER_INSTANCE_COLOR"),e.requiresTextureCoordinates&&(u.push("TEXTURE_COORDINATES"),t||n||u.push("SPHERICAL"),n&&u.push("COLUMBUS_VIEW_2D")),new EV({defines:u,sources:[o]})}function RG(){this._requiresEC=!1,this._requiresWC=!1,this._requiresNormalEC=!1,this._requiresTextureCoordinates=!1,this._usesNormalEC=!1,this._usesPositionToEyeEC=!1,this._usesTangentToEyeMat=!1,this._usesSt=!1}function LG(e,t,n){return Math.abs((t.y-e.y)*n.x-(t.x-e.x)*n.y+t.x*e.y-t.y*e.x)/Gt.distance(t,e)}Object.defineProperties(RG.prototype,{requiresEC:{get:function(){return this._requiresEC},set:function(e){this._requiresEC=e||this._requiresEC}},requiresWC:{get:function(){return this._requiresWC},set:function(e){this._requiresWC=e||this._requiresWC,this.requiresEC=this._requiresWC}},requiresNormalEC:{get:function(){return this._requiresNormalEC},set:function(e){this._requiresNormalEC=e||this._requiresNormalEC,this.requiresEC=this._requiresNormalEC}},requiresTextureCoordinates:{get:function(){return this._requiresTextureCoordinates},set:function(e){this._requiresTextureCoordinates=e||this._requiresTextureCoordinates,this.requiresWC=this._requiresTextureCoordinates}},normalEC:{set:function(e){this.requiresNormalEC=e,this._usesNormalEC=e},get:function(){return this._usesNormalEC}},tangentToEyeMatrix:{set:function(e){this.requiresWC=e,this.requiresNormalEC=e,this._usesTangentToEyeMat=e},get:function(){return this._usesTangentToEyeMat}},positionToEyeEC:{set:function(e){this.requiresEC=e,this._usesPositionToEyeEC=e},get:function(){return this._usesPositionToEyeEC}},st:{set:function(e){this.requiresTextureCoordinates=e,this._usesSt=e},get:function(){return this._usesSt}}});const MG=[new Gt,new Gt,new Gt,new Gt];function NG(e,t){const n=MG,i=Gt.unpack(t,0,n[0]),o=Gt.unpack(t,2,n[1]),r=Gt.unpack(t,4,n[2]);e.uMaxVmax=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,value:[o.x,o.y,r.x,r.y]});const a=1/LG(i,o,r),s=1/LG(i,r,o);e.uvMinAndExtents=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,value:[i.x,i.y,a,s]})}const BG=new I,FG=new g,zG=new g,kG=new g,UG={high:0,low:0};function VG(e,t,n){const i=BG;i.height=0,i.longitude=e.west,i.latitude=e.south;const o=t.project(i,FG);i.latitude=e.north;const r=t.project(i,zG);i.longitude=e.east,i.latitude=e.south;const a=t.project(i,kG),s=[0,0,0,0],c=[0,0,0,0];let l=Bd.encode(o.x,UG);s[0]=l.high,c[0]=l.low,l=Bd.encode(o.y,UG),s[1]=l.high,c[1]=l.low,l=Bd.encode(r.y,UG),s[2]=l.high,c[2]=l.low,l=Bd.encode(a.x,UG),s[3]=l.high,c[3]=l.low,n.planes2D_HIGH=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,value:s}),n.planes2D_LOW=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,value:c})}const HG=new Me,GG=new Me,WG=new g,qG=new I,YG=[new I,new I,new I,new I,new I,new I,new I,new I];function XG(e,t,n,i,o,r){const a=Fe.center(e,qG);a.height=n;const s=I.toCartesian(a,t,WG),c=ka.eastNorthUpToFixedFrame(s,t,HG),l=Me.inverse(c,GG),u=e.west,h=e.east,d=e.north,f=e.south,p=YG;p[0].latitude=f,p[0].longitude=u,p[1].latitude=d,p[1].longitude=u,p[2].latitude=d,p[2].longitude=h,p[3].latitude=f,p[3].longitude=h;const m=.5*(u+h),_=.5*(d+f);p[4].latitude=f,p[4].longitude=m,p[5].latitude=d,p[5].longitude=m,p[6].latitude=_,p[6].longitude=u,p[7].latitude=_,p[7].longitude=h;let b=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,O=Number.NEGATIVE_INFINITY;for(let g=0;g<8;g++){p[g].height=n;const e=I.toCartesian(p[g],t,WG);Me.multiplyByPoint(l,e,e),e.z=0,b=Math.min(b,e.x),y=Math.max(y,e.x),v=Math.min(v,e.y),O=Math.max(O,e.y)}const A=i;A.x=b,A.y=v,A.z=0,Me.multiplyByPoint(c,A,A);const w=o;w.x=y,w.y=v,w.z=0,Me.multiplyByPoint(c,w,w),g.subtract(w,A,o);const T=r;T.x=b,T.y=O,T.z=0,Me.multiplyByPoint(c,T,T),g.subtract(T,A,r)}const KG=new g,$G=new g,JG=new Bd;SG.getPlanarTextureCoordinateAttributes=function(e,t,n,r,a){i["a"].typeOf.object("boundingRectangle",e),i["a"].defined("textureCoordinateRotationPoints",t),i["a"].typeOf.object("ellipsoid",n),i["a"].typeOf.object("projection",r);const s=FG,c=KG,l=$G;XG(e,n,Object(o["a"])(a,0),s,c,l);const u={};NG(u,t);const h=Bd.fromCartesian(s,JG);return u.southWest_HIGH=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,normalize:!1,value:g.pack(h.high,[0,0,0])}),u.southWest_LOW=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,normalize:!1,value:g.pack(h.low,[0,0,0])}),u.eastward=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,normalize:!1,value:g.pack(c,[0,0,0])}),u.northward=new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,normalize:!1,value:g.pack(l,[0,0,0])}),VG(e,r,u),u};const QG=new g;function ZG(e,t,n,i){const o=BG;o.latitude=e,o.longitude=t,o.height=0;const r=I.toCartesian(o,n,QG),a=Math.sqrt(r.x*r.x+r.y*r.y),c=s["a"].fastApproximateAtan2(a,r.z),l=s["a"].fastApproximateAtan2(r.x,r.y);return i.x=c,i.y=l,i}const eW=new Gt;function tW(e){return Math.max(e.width,e.height)>SG.MAX_WIDTH_FOR_PLANAR_EXTENTS}SG.getSphericalExtentGeometryInstanceAttributes=function(e,t,n,o){i["a"].typeOf.object("boundingRectangle",e),i["a"].defined("textureCoordinateRotationPoints",t),i["a"].typeOf.object("ellipsoid",n),i["a"].typeOf.object("projection",o);const r=ZG(e.south,e.west,n,eW);let a=r.x,c=r.y;const l=ZG(e.north,e.east,n,eW);let u=l.x,h=l.y,d=0;c>h&&(d=s["a"].PI-c,c=-s["a"].PI,h+=d),a-=s["a"].EPSILON5,c-=s["a"].EPSILON5,u+=s["a"].EPSILON5,h+=s["a"].EPSILON5;const f=1/(h-c),p=1/(u-a),m={sphericalExtents:new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:4,normalize:!1,value:[a,c,p,f]}),longitudeRotation:new wA({componentDatatype:Ks.FLOAT,componentsPerAttribute:1,normalize:!1,value:[d]})};return NG(m,t),VG(e,o,m),m},SG.hasAttributesForTextureCoordinatePlanes=function(e){return Object(r["a"])(e.southWest_HIGH)&&Object(r["a"])(e.southWest_LOW)&&Object(r["a"])(e.northward)&&Object(r["a"])(e.eastward)&&Object(r["a"])(e.planes2D_HIGH)&&Object(r["a"])(e.planes2D_LOW)&&Object(r["a"])(e.uMaxVmax)&&Object(r["a"])(e.uvMinAndExtents)},SG.hasAttributesForSphericalExtents=function(e){return Object(r["a"])(e.sphericalExtents)&&Object(r["a"])(e.longitudeRotation)&&Object(r["a"])(e.planes2D_HIGH)&&Object(r["a"])(e.planes2D_LOW)&&Object(r["a"])(e.uMaxVmax)&&Object(r["a"])(e.uvMinAndExtents)},SG.shouldUseSphericalCoordinates=function(e){return i["a"].typeOf.object("rectangle",e),tW(e)},SG.MAX_WIDTH_FOR_PLANAR_EXTENTS=s["a"].toRadians(1);var nW=SG;const iW={NEVER:Ys.NEVER,LESS:Ys.LESS,EQUAL:Ys.EQUAL,LESS_OR_EQUAL:Ys.LEQUAL,GREATER:Ys.GREATER,NOT_EQUAL:Ys.NOTEQUAL,GREATER_OR_EQUAL:Ys.GEQUAL,ALWAYS:Ys.ALWAYS};var oW=Object.freeze(iW);const rW={ZERO:Ys.ZERO,KEEP:Ys.KEEP,REPLACE:Ys.REPLACE,INCREMENT:Ys.INCR,DECREMENT:Ys.DECR,INVERT:Ys.INVERT,INCREMENT_WRAP:Ys.INCR_WRAP,DECREMENT_WRAP:Ys.DECR_WRAP};var aW=Object.freeze(rW);const sW={CESIUM_3D_TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15,setCesium3DTileBit:function(){return{enabled:!0,frontFunction:oW.ALWAYS,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.REPLACE},backFunction:oW.ALWAYS,backOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.REPLACE},reference:sW.CESIUM_3D_TILE_MASK,mask:sW.CESIUM_3D_TILE_MASK}}};var cW=Object.freeze(sW);function lW(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.geometryInstances;this.geometryInstances=t,this.show=Object(o["a"])(e.show,!0),this.classificationType=Object(o["a"])(e.classificationType,DV.BOTH),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=Object(o["a"])(e.debugShowShadowVolume,!1),this._debugShowShadowVolume=!1,this._extruded=Object(o["a"])(e._extruded,!1),this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1;const n=this;this._readyPromise=new Promise((e,t)=>{n._completeLoad=()=>{if(this._ready)return;this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0);const n=this._error;Object(r["a"])(n)?t(n):e(this)}}),this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:Object(o["a"])(e.vertexCacheOptimize,!1),interleave:Object(o["a"])(e.interleave,!1),releaseGeometryInstances:Object(o["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(o["a"])(e.allowPicking,!0),asynchronous:Object(o["a"])(e.asynchronous,!0),compressVertices:Object(o["a"])(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}function uW(e,t){const n=t?oW.EQUAL:oW.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:n,frontOperation:{fail:aW.KEEP,zFail:aW.DECREMENT_WRAP,zPass:aW.KEEP},backFunction:n,backOperation:{fail:aW.KEEP,zFail:aW.INCREMENT_WRAP,zPass:aW.KEEP},reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:jV.LESS_OR_EQUAL},depthMask:!1}}function hW(e){return{stencilTest:{enabled:e,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:UN.PRE_MULTIPLIED_ALPHA_BLEND}}Object.defineProperties(lW.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}}),lW.isSupported=function(e){return e.context.stencilBuffer};const dW={stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function fW(e,t,n,i){if(Object(r["a"])(e._rsStencilDepthPass))return;const o=!e.debugShowShadowVolume;e._rsStencilDepthPass=UF.fromCache(uW(o,!1)),e._rsStencilDepthPass3DTiles=UF.fromCache(uW(o,!0)),e._rsColorPass=UF.fromCache(hW(o,!1)),e._rsPickPass=UF.fromCache(dW)}function pW(e,t){if(!e.compressVertices)return t;if(-1!==t.search(/attribute\s+vec3\s+extrudeDirection;/g)){const e="compressedAttributes",n=`attribute vec2 ${e};`,i="vec3 extrudeDirection;\n",o=`    extrudeDirection = czm_octDecode(${e}, 65535.0);\n`;let r=t;r=r.replace(/attribute\s+vec3\s+extrudeDirection;/g,""),r=EV.replaceMain(r,"czm_non_compressed_main");const a=`void main() \n{ \n${o}    czm_non_compressed_main(); \n`+"}";return[n,i,r,a].join("\n")}}function mW(e,t){const n=t.context,i=e._primitive;let o=xV;o=e._primitive._batchTable.getVertexShaderCallback()(o),o=EG._appendDistanceDisplayConditionToShader(i,o),o=EG._modifyShaderPosition(e,o,t.scene3DOnly),o=EG._updateColorAttribute(i,o);const a=e._hasPlanarExtentsAttributes,s=a||e._hasSphericalExtentsAttribute;e._extruded&&(o=pW(i,o));const c=e._extruded?"EXTRUDED_GEOMETRY":"";let l=new EV({defines:[c],sources:[o]});const u=new EV({sources:[SV]}),h=e._primitive._attributeLocations,d=new nW(s,a,e.appearance);if(e._spStencil=Nz.replaceCache({context:n,shaderProgram:e._spStencil,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:h}),e._primitive.allowPicking){let a=EV.createPickVertexShaderSource(o);a=EG._appendShowToShader(i,a),a=EG._updatePickColorAttribute(a);const l=d.createPickFragmentShader(!1),u=d.createPickVertexShader([c],a,!1,t.mapProjection);if(e._spPick=Nz.replaceCache({context:n,shaderProgram:e._spPick,vertexShaderSource:u,fragmentShaderSource:l,attributeLocations:h}),s){let i=n.shaderCache.getDerivedShaderProgram(e._spPick,"2dPick");if(!Object(r["a"])(i)){const o=d.createPickFragmentShader(!0),r=d.createPickVertexShader([c],a,!0,t.mapProjection);i=n.shaderCache.createDerivedShaderProgram(e._spPick,"2dPick",{vertexShaderSource:r,fragmentShaderSource:o,attributeLocations:h})}e._spPick2D=i}}else e._spPick=Nz.fromCache({context:n,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:h});o=EG._appendShowToShader(i,o),l=new EV({defines:[c],sources:[o]}),e._sp=Nz.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:h});const f=d.createFragmentShader(!1),p=d.createVertexShader([c],o,!1,t.mapProjection);if(e._spColor=Nz.replaceCache({context:n,shaderProgram:e._spColor,vertexShaderSource:p,fragmentShaderSource:f,attributeLocations:h}),s){let i=n.shaderCache.getDerivedShaderProgram(e._spColor,"2dColor");if(!Object(r["a"])(i)){const r=d.createFragmentShader(!0),a=d.createVertexShader([c],o,!0,t.mapProjection);i=n.shaderCache.createDerivedShaderProgram(e._spColor,"2dColor",{vertexShaderSource:a,fragmentShaderSource:r,attributeLocations:h})}e._spColor2D=i}}function _W(e,t){const n=e._primitive;let i,o,a,s=2*n._va.length;t.length=s;let c=0,l=n._batchTable.getUniformMapCallback()(e._uniformMap);const u=e._needs2DShader;for(i=0;i<s;i+=2){const s=n._va[c++];o=t[i],Object(r["a"])(o)||(o=t[i]=new lF({owner:e,primitiveType:n._primitiveType})),o.vertexArray=s,o.renderState=e._rsStencilDepthPass,o.shaderProgram=e._sp,o.uniformMap=l,o.pass=hF.TERRAIN_CLASSIFICATION,a=lF.shallowClone(o,o.derivedCommands.tileset),a.renderState=e._rsStencilDepthPass3DTiles,a.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,o.derivedCommands.tileset=a,o=t[i+1],Object(r["a"])(o)||(o=t[i+1]=new lF({owner:e,primitiveType:n._primitiveType})),o.vertexArray=s,o.renderState=e._rsColorPass,o.shaderProgram=e._spColor,o.pass=hF.TERRAIN_CLASSIFICATION;const h=e.appearance,d=h.material;if(Object(r["a"])(d)&&(l=Object(qE["a"])(l,d._uniforms)),o.uniformMap=l,a=lF.shallowClone(o,o.derivedCommands.tileset),a.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,o.derivedCommands.tileset=a,u){let t=lF.shallowClone(o,o.derivedCommands.appearance2D);t.shaderProgram=e._spColor2D,o.derivedCommands.appearance2D=t,t=lF.shallowClone(a,a.derivedCommands.appearance2D),t.shaderProgram=e._spColor2D,a.derivedCommands.appearance2D=t}}const h=e._commandsIgnoreShow,d=e._spStencil;let f=0;s=h.length=s/2;for(let r=0;r<s;++r){const e=h[r]=lF.shallowClone(t[f],h[r]);e.shaderProgram=d,e.pass=hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,f+=2}}function gW(e,t){const n=e._usePickOffsets,i=e._primitive;let o,a,s,c,l,u=2*i._va.length,h=0;n&&(o=i._pickOffsets,u=2*o.length),t.length=u;let d=0;const f=i._batchTable.getUniformMapCallback()(e._uniformMap),p=e._needs2DShader;for(s=0;s<u;s+=2){let u=i._va[d++];if(n&&(a=o[h++],u=i._va[a.index]),c=t[s],Object(r["a"])(c)||(c=t[s]=new lF({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),c.vertexArray=u,c.renderState=e._rsStencilDepthPass,c.shaderProgram=e._sp,c.uniformMap=f,c.pass=hF.TERRAIN_CLASSIFICATION,n&&(c.offset=a.offset,c.count=a.count),l=lF.shallowClone(c,c.derivedCommands.tileset),l.renderState=e._rsStencilDepthPass3DTiles,l.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,c.derivedCommands.tileset=l,c=t[s+1],Object(r["a"])(c)||(c=t[s+1]=new lF({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),c.vertexArray=u,c.renderState=e._rsPickPass,c.shaderProgram=e._spPick,c.uniformMap=f,c.pass=hF.TERRAIN_CLASSIFICATION,n&&(c.offset=a.offset,c.count=a.count),l=lF.shallowClone(c,c.derivedCommands.tileset),l.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,c.derivedCommands.tileset=l,p){let t=lF.shallowClone(c,c.derivedCommands.pick2D);t.shaderProgram=e._spPick2D,c.derivedCommands.pick2D=t,t=lF.shallowClone(l,l.derivedCommands.pick2D),t.shaderProgram=e._spPick2D,l.derivedCommands.pick2D=t}}}function bW(e,t,n,i,o,r,a){_W(e,r),gW(e,a)}function yW(e,t){return Math.floor(e%t/2)}function vW(e,t,n,i,o,r){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,e.debugShowBoundingVolume=r,t.commandList.push(e)}function OW(e,t,n,i,o){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,t.commandList.push(e)}function AW(e,t,n,i,o,a,s,c){const l=e._primitive;let u;EG._updateBoundingVolumes(l,t,o),t.mode===SH.SCENE3D?u=l._boundingSphereWC:t.mode===SH.COLUMBUS_VIEW?u=l._boundingSphereCV:t.mode===SH.SCENE2D&&Object(r["a"])(l._boundingSphere2D)?u=l._boundingSphere2D:Object(r["a"])(l._boundingSphereMorph)&&(u=l._boundingSphereMorph);const h=e.classificationType,d=h!==DV.CESIUM_3D_TILE,f=h!==DV.TERRAIN,p=t.passes;let m,_,g;if(p.render){const i=n.length;for(m=0;m<i;++m)_=u[yW(m,i)],d&&(g=n[m],vW(g,t,o,a,_,s)),f&&(g=n[m].derivedCommands.tileset,vW(g,t,o,a,_,s));if(t.invertClassification){const n=e._commandsIgnoreShow,i=n.length;for(m=0;m<i;++m)_=u[m],g=n[m],vW(g,t,o,a,_,s)}}if(p.pick){const e=i.length,n=l._pickOffsets;for(m=0;m<e;++m){const r=n[yW(m,e)];_=u[r.index],d&&(g=i[m],OW(g,t,o,a,_)),f&&(g=i[m].derivedCommands.tileset,OW(g,t,o,a,_))}}}lW.prototype.update=function(e){if(!Object(r["a"])(this._primitive)&&!Object(r["a"])(this.geometryInstances))return;let t=this.appearance;Object(r["a"])(t)&&Object(r["a"])(t.material)&&t.material.update(e.context);const n=this,i=this._primitiveOptions;if(!Object(r["a"])(this._primitive)){const e=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],s=e.length;let c,l,u,h,d=!1,f=!0,p=!1,m=!1;for(s>0&&(u=e[0].attributes,p=nW.hasAttributesForSphericalExtents(u),m=nW.hasAttributesForTextureCoordinatePlanes(u),h=u.color),c=0;c<s;c++){l=e[c];const t=l.attributes.color;if(Object(r["a"])(t))d=!0;else if(d)throw new a["a"]("All GeometryInstances must have color attributes to use per-instance color.");f=f&&Object(r["a"])(t)&&jm.equals(h,t)}if(!f&&!p&&!m)throw new a["a"]("All GeometryInstances must have the same color attribute except via GroundPrimitives");if(d&&!Object(r["a"])(t)&&(t=new nF({flat:!0}),this.appearance=t),!d&&t instanceof nF)throw new a["a"]("PerInstanceColorAppearance requires color GeometryInstanceAttributes on all GeometryInstances");if(Object(r["a"])(t.material)&&!p&&!m)throw new a["a"]("Materials on ClassificationPrimitives are not supported except via GroundPrimitives");this._usePickOffsets=!p&&!m,this._hasSphericalExtentsAttribute=p,this._hasPlanarExtentsAttributes=m,this._hasPerColorAttribute=d;const _=new Array(s);for(c=0;c<s;++c)l=e[c],_[c]=new Sd({geometry:l.geometry,attributes:l.attributes,modelMatrix:l.modelMatrix,id:l.id,pickPrimitive:Object(o["a"])(this._pickPrimitive,n)});i.appearance=t,i.geometryInstances=_,Object(r["a"])(this._createBoundingVolumeFunction)&&(i._createBoundingVolumeFunction=function(e,t){n._createBoundingVolumeFunction(e,t)}),i._createRenderStatesFunction=function(e,t,i,o){fW(n,t)},i._createShaderProgramFunction=function(e,t,i){mW(n,t)},i._createCommandsFunction=function(e,t,i,o,r,a,s){bW(n,void 0,void 0,!0,!1,a,s)},Object(r["a"])(this._updateAndQueueCommandsFunction)?i._updateAndQueueCommandsFunction=function(e,t,i,o,r,a,s,c){n._updateAndQueueCommandsFunction(e,t,i,o,r,a,s,c)}:i._updateAndQueueCommandsFunction=function(e,t,i,o,r,a,s,c){AW(n,t,i,o,r,a,s,c)},this._primitive=new EG(i)}if(this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=UF.fromCache(uW(!1,!1)),this._rsStencilDepthPass3DTiles=UF.fromCache(uW(!1,!0)),this._rsColorPass=UF.fromCache(hW(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=UF.fromCache(uW(!0,!1)),this._rsStencilDepthPass3DTiles=UF.fromCache(uW(!0,!0)),this._rsColorPass=UF.fromCache(hW(!0))),this._primitive.appearance!==t){if(!this._hasSphericalExtentsAttribute&&!this._hasPlanarExtentsAttributes&&Object(r["a"])(t.material))throw new a["a"]("Materials on ClassificationPrimitives are not supported except via GroundPrimitive");if(!this._hasPerColorAttribute&&t instanceof nF)throw new a["a"]("PerInstanceColorAppearance requires color GeometryInstanceAttribute");this._primitive.appearance=t}this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{Object(r["a"])(this._primitive)&&this._primitive.ready&&this._completeLoad()})},lW.prototype.getGeometryInstanceAttributes=function(e){if(!Object(r["a"])(this._primitive))throw new a["a"]("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},lW.prototype.isDestroyed=function(){return!1},lW.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,Wc(this)};var wW=lW;const TW={u_globeMinimumAltitude:function(){return 55e3}};function CW(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=e.appearance;const n=e.geometryInstances;if(!Object(r["a"])(t)&&Object(r["a"])(n)){const e=Array.isArray(n)?n:[n],i=e.length;for(let n=0;n<i;n++){const i=e[n].attributes;if(Object(r["a"])(i)&&Object(r["a"])(i.color)){t=new nF({flat:!0});break}}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=Object(o["a"])(e.show,!0),this.classificationType=Object(o["a"])(e.classificationType,DV.BOTH),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=Object(o["a"])(e.debugShowShadowVolume,!1),this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1;const i=this;this._readyPromise=new Promise((e,t)=>{i._completeLoad=()=>{if(this._ready)return;this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0);const n=this._error;Object(r["a"])(n)?t(n):e(this)}}),this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=rn._defaultMaxTerrainHeight,this._minTerrainHeight=rn._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;const a=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:Object(o["a"])(e.vertexCacheOptimize,!1),interleave:Object(o["a"])(e.interleave,!1),releaseGeometryInstances:Object(o["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(o["a"])(e.allowPicking,!0),asynchronous:Object(o["a"])(e.asynchronous,!0),compressVertices:Object(o["a"])(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:a,_extruded:!0,_uniformMap:TW}}function EW(e){return function(t,n){const i=n.maximumRadius,o=i/Math.cos(.5*t)-i;return e._maxHeight+o}}function xW(e){return function(t,n){return e._minHeight}}Object.defineProperties(CW.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}}}),CW.isSupported=wW.isSupported;const SW=new g,IW=new g,DW=new g,PW=new I,jW=new Fe;function RW(e,t){const n=e.mapProjection.ellipsoid;if(!Object(r["a"])(t.attributes)||!Object(r["a"])(t.attributes.position3DHigh))return Object(r["a"])(t.rectangle)?t.rectangle:void 0;const i=t.attributes.position3DHigh.values,o=t.attributes.position3DLow.values,a=i.length;let s=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(let r=0;r<a;r+=3){const e=g.unpack(i,r,SW),t=g.unpack(o,r,IW),a=g.add(e,t,DW),h=n.cartesianToCartographic(a,PW),d=h.latitude,f=h.longitude;s=Math.min(s,d),c=Math.min(c,f),l=Math.max(l,d),u=Math.max(u,f)}const h=jW;return h.north=l,h.south=s,h.east=u,h.west=c,h}function LW(e,t,n){const i=rn.getMinimumMaximumHeights(t,n);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function MW(e,t,n){const i=t.mapProjection.ellipsoid,o=RW(t,n),r=Ws.fromRectangle(o,e._minHeight,e._maxHeight,i);if(e._boundingVolumes.push(r),!t.scene3DOnly){const n=t.mapProjection,i=Tt.fromRectangleWithHeights2D(o,n,e._maxHeight,e._minHeight);g.fromElements(i.center.z,i.center.x,i.center.y,i.center),e._boundingVolumes2D.push(i)}}function NW(e,t){return Math.floor(e%t/2)}function BW(e,t,n,i,o,r,a){const s=e._primitive;n.mode!==SH.SCENE3D&&t.shaderProgram===s._spColor&&s._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function FW(e,t,n,i,o,r){const a=e._primitive;n.mode!==SH.SCENE3D&&t.shaderProgram===a._spPick&&a._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,n.commandList.push(t)}function zW(e,t,n,i,o,r,a,s){let c;c=t.mode===SH.SCENE3D?e._boundingVolumes:e._boundingVolumes2D;const l=e.classificationType,u=l!==DV.CESIUM_3D_TILE,h=l!==DV.TERRAIN,d=t.passes,f=e._primitive;let p,m,_;if(d.render){const i=n.length;for(p=0;p<i;++p)m=c[NW(p,i)],u&&(_=n[p],BW(e,_,t,o,r,m,a)),h&&(_=n[p].derivedCommands.tileset,BW(e,_,t,o,r,m,a));if(t.invertClassification){const n=f._commandsIgnoreShow,i=n.length;for(p=0;p<i;++p)m=c[p],_=n[p],BW(e,_,t,o,r,m,a)}}if(d.pick){const n=i.length;let a;for(e._useFragmentCulling||(a=f._primitive._pickOffsets),p=0;p<n;++p){if(m=c[NW(p,n)],!e._useFragmentCulling){const e=a[NW(p,n)];m=c[e.index]}u&&(_=i[p],FW(e,_,t,o,r,m)),h&&(_=i[p].derivedCommands.tileset,FW(e,_,t,o,r,m))}}}CW.initializeTerrainHeights=function(){return rn.initialize()},CW.prototype.update=function(e){if(!Object(r["a"])(this._primitive)&&!Object(r["a"])(this.geometryInstances))return;if(!rn.initialized){if(!this.asynchronous)throw new a["a"]("For synchronous GroundPrimitives, you must call GroundPrimitive.initializeTerrainHeights() and wait for the returned promise to resolve.");return void CW.initializeTerrainHeights()}const t=this,n=this._classificationPrimitiveOptions;if(!Object(r["a"])(this._primitive)){const i=e.mapProjection.ellipsoid;let o,s,c;const l=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],u=l.length,h=new Array(u);let d,f;for(d=0;d<u;++d){o=l[d],s=o.geometry;const t=RW(e,s);Object(r["a"])(f)?Object(r["a"])(t)&&Fe.union(f,t,f):f=Fe.clone(t);const n=o.id;if(Object(r["a"])(n)&&Object(r["a"])(t)){const e=rn.getBoundingSphere(t,i);this._boundingSpheresKeys.push(n),this._boundingSpheres.push(e)}if(c=s.constructor,!Object(r["a"])(c)||!Object(r["a"])(c.createShadowVolume))throw new a["a"]("Not all of the geometry instances have GroundPrimitive support.")}LW(this,f,i);const p=e.terrainExaggeration,m=e.terrainExaggerationRelativeHeight;this._minHeight=gc.getHeight(this._minTerrainHeight,p,m),this._maxHeight=gc.getHeight(this._maxTerrainHeight,p,m);const _=CW._supportsMaterials(e.context);if(this._useFragmentCulling=_,_){let t,n=!0;for(d=0;d<u;++d)if(o=l[d],s=o.geometry,f=RW(e,s),nW.shouldUseSphericalCoordinates(f)){n=!1;break}for(d=0;d<u;++d){o=l[d],s=o.geometry,c=s.constructor;const r=RW(e,s),a=s.textureCoordinateRotationPoints;t=n?nW.getPlanarTextureCoordinateAttributes(r,a,i,e.mapProjection,this._maxHeight):nW.getSphericalExtentGeometryInstanceAttributes(r,a,i,e.mapProjection);const u=o.attributes;for(const e in u)u.hasOwnProperty(e)&&(t[e]=u[e]);h[d]=new Sd({geometry:c.createShadowVolume(s,xW(this),EW(this)),attributes:t,id:o.id})}}else for(d=0;d<u;++d)o=l[d],s=o.geometry,c=s.constructor,h[d]=new Sd({geometry:c.createShadowVolume(s,xW(this),EW(this)),attributes:o.attributes,id:o.id});n.geometryInstances=h,n.appearance=this.appearance,n._createBoundingVolumeFunction=function(e,n){MW(t,e,n)},n._updateAndQueueCommandsFunction=function(e,n,i,o,r,a,s,c){zW(t,n,i,o,r,a,s,c)},this._primitive=new wW(n)}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{Object(r["a"])(this._primitive)&&this._primitive.ready&&this._completeLoad()})},CW.prototype.getBoundingSphere=function(e){const t=this._boundingSpheresKeys.indexOf(e);if(-1!==t)return this._boundingSpheres[t]},CW.prototype.getGeometryInstanceAttributes=function(e){if(!Object(r["a"])(this._primitive))throw new a["a"]("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},CW.prototype.isDestroyed=function(){return!1},CW.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Wc(this)},CW._supportsMaterials=function(e){return e.depthTexture},CW.supportsMaterials=function(e){return i["a"].typeOf.object("scene",e),CW._supportsMaterials(e.frameState.context)};var kW=CW;function UW(){a["a"].throwInstantiationError()}Object.defineProperties(UW.prototype,{isConstant:{get:a["a"].throwInstantiationError},definitionChanged:{get:a["a"].throwInstantiationError}}),UW.prototype.getType=a["a"].throwInstantiationError,UW.prototype.getValue=a["a"].throwInstantiationError,UW.prototype.equals=a["a"].throwInstantiationError,UW.getValue=function(e,t,n){let i;return Object(r["a"])(t)&&(i=t.getType(e),Object(r["a"])(i))?(Object(r["a"])(n)&&n.type===i||(n=XB.fromType(i)),t.getValue(e,n.uniforms),n):(Object(r["a"])(n)&&n.type===XB.ColorType||(n=XB.fromType(XB.ColorType)),Dm.clone(Dm.WHITE,n.uniforms.color),n)};var VW=UW;function HW(e,t,n){i["a"].defined("geometryUpdater",e),i["a"].defined("primitives",t),i["a"].defined("orderedGroundPrimitives",n),this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}HW.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!aN.getValueOrDefault(t.show,n,!0)},HW.prototype._setOptions=a["a"].throwInstantiationError,HW.prototype.update=function(e){i["a"].defined("time",e);const t=this._geometryUpdater,n=t._onTerrain,o=this._primitives,a=this._orderedGroundPrimitives;n?a.remove(this._primitive):(o.removeAndDestroy(this._primitive),o.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;const s=this._entity,c=s[this._geometryUpdater._geometryPropertyName];if(this._setOptions(s,c,e),this._isHidden(s,c,e))return;const l=this._geometryUpdater.shadowsProperty.getValue(e),u=this._options;if(!Object(r["a"])(c.fill)||c.fill.getValue(e)){const i=t.fillMaterialProperty,r=i instanceof oF;let s;const c=t._getIsClosed(u);if(r)s=new nF({closed:c,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{const t=VW.getValue(e,i,this._material);this._material=t,s=new $B({material:t,translucent:t.isTranslucent(),closed:c})}if(n)u.vertexFormat=nF.VERTEX_FORMAT,this._primitive=a.add(new kW({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:s,asynchronous:!1,shadows:l,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),aN.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{u.vertexFormat=s.vertexFormat;const t=this._geometryUpdater.createFillGeometryInstance(e);r&&(s.translucent=255!==t.attributes.color.value[3]),this._primitive=o.add(new EG({geometryInstances:t,appearance:s,asynchronous:!1,shadows:l}))}}if(!n&&Object(r["a"])(c.outline)&&c.outline.getValue(e)){const n=this._geometryUpdater.createOutlineGeometryInstance(e),i=aN.getValueOrDefault(c.outlineWidth,e,1);this._outlinePrimitive=o.add(new EG({geometryInstances:n,appearance:new nF({flat:!0,translucent:255!==n.attributes.color.value[3],renderState:{lineWidth:t._scene.clampLineWidth(i)}}),asynchronous:!1,shadows:l}))}},HW.prototype.getBoundingSphere=function(e){if(!Object(r["a"])(e))throw new a["a"]("result is required.");const t=this._entity,n=this._primitive,i=this._outlinePrimitive;let o;return Object(r["a"])(n)&&n.show&&n.ready&&(o=n.getGeometryInstanceAttributes(t),Object(r["a"])(o)&&Object(r["a"])(o.boundingSphere))||Object(r["a"])(i)&&i.show&&i.ready&&(o=i.getGeometryInstanceAttributes(t),Object(r["a"])(o)&&Object(r["a"])(o.boundingSphere))?(Tt.clone(o.boundingSphere,e),oN.DONE):Object(r["a"])(n)&&!n.ready||Object(r["a"])(i)&&!i.ready?oN.PENDING:oN.FAILED},HW.prototype.isDestroyed=function(){return!1},HW.prototype.destroy=function(){const e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),Wc(this)};var GW=HW,WW='#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n\nvarying vec4 v_startPlaneNormalEcAndHalfWidth;\nvarying vec4 v_endPlaneNormalEcAndBatchId;\nvarying vec4 v_rightPlaneEC; // Technically can compute distance for this here\nvarying vec4 v_endEcAndStartEcX;\nvarying vec4 v_texcoordNormalizationAndStartEcYZ;\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#endif\n\nvoid main(void)\n{\n    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture2D(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));\n    vec3 ecStart = vec3(v_endEcAndStartEcX.w, v_texcoordNormalizationAndStartEcYZ.zw);\n\n    // Discard for sky\n    if (logDepthOrDepth == 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float halfMaxWidth = v_startPlaneNormalEcAndHalfWidth.w * czm_metersPerPixel(eyeCoordinate);\n    // Check distance of the eye coordinate against the right-facing plane\n    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);\n\n    // Check eye coordinate against the mitering planes\n    float distanceFromStart = czm_planeDistance(v_startPlaneNormalEcAndHalfWidth.xyz, -dot(ecStart, v_startPlaneNormalEcAndHalfWidth.xyz), eyeCoordinate.xyz);\n    float distanceFromEnd = czm_planeDistance(v_endPlaneNormalEcAndBatchId.xyz, -dot(v_endEcAndStartEcX.xyz, v_endPlaneNormalEcAndBatchId.xyz), eyeCoordinate.xyz);\n\n    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    // Check distance of the eye coordinate against start and end planes with normals in the right plane.\n    // For computing unskewed lengthwise texture coordinate.\n    // Can also be used for clipping extremely pointy miters, but in practice unnecessary because of miter breaking.\n\n    // aligned plane: cross the right plane normal with miter plane normal, then cross the result with right again to point it more "forward"\n    vec3 alignedPlaneNormal;\n\n    // start aligned plane\n    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_startPlaneNormalEcAndHalfWidth.xyz);\n    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));\n    distanceFromStart = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, ecStart), eyeCoordinate.xyz);\n\n    // end aligned plane\n    alignedPlaneNormal = cross(v_rightPlaneEC.xyz, v_endPlaneNormalEcAndBatchId.xyz);\n    alignedPlaneNormal = normalize(cross(alignedPlaneNormal, v_rightPlaneEC.xyz));\n    distanceFromEnd = czm_planeDistance(alignedPlaneNormal, -dot(alignedPlaneNormal, v_endEcAndStartEcX.xyz), eyeCoordinate.xyz);\n\n#ifdef PER_INSTANCE_COLOR\n    gl_FragColor = czm_gammaCorrect(v_color);\n#else // PER_INSTANCE_COLOR\n    // Clamp - distance to aligned planes may be negative due to mitering,\n    // so fragment texture coordinate might be out-of-bounds.\n    float s = clamp(distanceFromStart / (distanceFromStart + distanceFromEnd), 0.0, 1.0);\n    s = (s * v_texcoordNormalizationAndStartEcYZ.x) + v_texcoordNormalizationAndStartEcYZ.y;\n    float t = (widthwiseDistance + halfMaxWidth) / (2.0 * halfMaxWidth);\n\n    czm_materialInput materialInput;\n\n    materialInput.s = s;\n    materialInput.st = vec2(s, t);\n    materialInput.str = vec3(s, t, 0.0);\n\n    czm_material material = czm_getMaterial(materialInput);\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#endif // PER_INSTANCE_COLOR\n\n    // Premultiply alpha. Required for classification primitives on translucent globe.\n    gl_FragColor.rgb *= gl_FragColor.a;\n\n    czm_writeDepthClamp();\n}\n',qW="varying vec3 v_forwardDirectionEC;\nvarying vec3 v_texcoordNormalizationAndHalfWidth;\nvarying float v_batchId;\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#else\nvarying vec2 v_alignedPlaneDistances;\nvarying float v_texcoordT;\n#endif\n\nfloat rayPlaneDistanceUnsafe(vec3 origin, vec3 direction, vec3 planeNormal, float planeDistance) {\n    // We don't expect the ray to ever be parallel to the plane\n    return (-planeDistance - dot(planeNormal, origin)) / dot(planeNormal, direction);\n}\n\nvoid main(void)\n{\n    vec4 eyeCoordinate = gl_FragCoord;\n    eyeCoordinate /= eyeCoordinate.w;\n\n#ifdef PER_INSTANCE_COLOR\n    gl_FragColor = czm_gammaCorrect(v_color);\n#else // PER_INSTANCE_COLOR\n    // Use distances for planes aligned with segment to prevent skew in dashing\n    float distanceFromStart = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, -v_forwardDirectionEC, v_forwardDirectionEC.xyz, v_alignedPlaneDistances.x);\n    float distanceFromEnd = rayPlaneDistanceUnsafe(eyeCoordinate.xyz, v_forwardDirectionEC, -v_forwardDirectionEC.xyz, v_alignedPlaneDistances.y);\n\n    // Clamp - distance to aligned planes may be negative due to mitering\n    distanceFromStart = max(0.0, distanceFromStart);\n    distanceFromEnd = max(0.0, distanceFromEnd);\n\n    float s = distanceFromStart / (distanceFromStart + distanceFromEnd);\n    s = (s * v_texcoordNormalizationAndHalfWidth.x) + v_texcoordNormalizationAndHalfWidth.y;\n\n    czm_materialInput materialInput;\n\n    materialInput.s = s;\n    materialInput.st = vec2(s, v_texcoordT);\n    materialInput.str = vec3(s, v_texcoordT, 0.0);\n\n    czm_material material = czm_getMaterial(materialInput);\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#endif // PER_INSTANCE_COLOR\n}\n",YW='attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\n\nattribute vec4 startHiAndForwardOffsetX;\nattribute vec4 startLoAndForwardOffsetY;\nattribute vec4 startNormalAndForwardOffsetZ;\nattribute vec4 endNormalAndTextureCoordinateNormalizationX;\nattribute vec4 rightNormalAndTextureCoordinateNormalizationY;\nattribute vec4 startHiLo2D;\nattribute vec4 offsetAndRight2D;\nattribute vec4 startEndNormals2D;\nattribute vec2 texcoordNormalization2D;\n\nattribute float batchId;\n\nvarying vec3 v_forwardDirectionEC;\nvarying vec3 v_texcoordNormalizationAndHalfWidth;\nvarying float v_batchId;\n\n// For materials\n#ifdef WIDTH_VARYING\nvarying float v_width;\n#endif\n#ifdef ANGLE_VARYING\nvarying float v_polylineAngle;\n#endif\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#else\nvarying vec2 v_alignedPlaneDistances;\nvarying float v_texcoordT;\n#endif\n\n// Morphing planes using SLERP or NLERP doesn\'t seem to work, so instead draw the material directly on the shadow volume.\n// Morph views are from very far away and aren\'t meant to be used precisely, so this should be sufficient.\nvoid main()\n{\n    v_batchId = batchId;\n\n    // Start position\n    vec4 posRelativeToEye2D = czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw));\n    vec4 posRelativeToEye3D = czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz);\n    vec4 posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);\n    vec3 posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;\n    vec3 posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;\n    vec3 startEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;\n\n    // Start plane\n    vec4 startPlane2D;\n    vec4 startPlane3D;\n    startPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.xy);\n    startPlane3D.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;\n    startPlane2D.w = -dot(startPlane2D.xyz, posEc2D);\n    startPlane3D.w = -dot(startPlane3D.xyz, posEc3D);\n\n    // Right plane\n    vec4 rightPlane2D;\n    vec4 rightPlane3D;\n    rightPlane2D.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);\n    rightPlane3D.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;\n    rightPlane2D.w = -dot(rightPlane2D.xyz, posEc2D);\n    rightPlane3D.w = -dot(rightPlane3D.xyz, posEc3D);\n\n    // End position\n    posRelativeToEye2D = posRelativeToEye2D + vec4(0.0, offsetAndRight2D.xy, 0.0);\n    posRelativeToEye3D = posRelativeToEye3D + vec4(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w, 0.0);\n    posRelativeToEye = czm_columbusViewMorph(posRelativeToEye2D, posRelativeToEye3D, czm_morphTime);\n    posEc2D = (czm_modelViewRelativeToEye * posRelativeToEye2D).xyz;\n    posEc3D = (czm_modelViewRelativeToEye * posRelativeToEye3D).xyz;\n    vec3 endEC = (czm_modelViewRelativeToEye * posRelativeToEye).xyz;\n    vec3 forwardEc3D = czm_normal * normalize(vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w));\n    vec3 forwardEc2D = czm_normal * normalize(vec3(0.0, offsetAndRight2D.xy));\n\n    // End plane\n    vec4 endPlane2D;\n    vec4 endPlane3D;\n    endPlane2D.xyz = czm_normal * vec3(0.0, startEndNormals2D.zw);\n    endPlane3D.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;\n    endPlane2D.w = -dot(endPlane2D.xyz, posEc2D);\n    endPlane3D.w = -dot(endPlane3D.xyz, posEc3D);\n\n    // Forward direction\n    v_forwardDirectionEC = normalize(endEC - startEC);\n\n    vec2 cleanTexcoordNormalization2D;\n    cleanTexcoordNormalization2D.x = abs(texcoordNormalization2D.x);\n    cleanTexcoordNormalization2D.y = czm_branchFreeTernary(texcoordNormalization2D.y > 1.0, 0.0, abs(texcoordNormalization2D.y));\n    vec2 cleanTexcoordNormalization3D;\n    cleanTexcoordNormalization3D.x = abs(endNormalAndTextureCoordinateNormalizationX.w);\n    cleanTexcoordNormalization3D.y = rightNormalAndTextureCoordinateNormalizationY.w;\n    cleanTexcoordNormalization3D.y = czm_branchFreeTernary(cleanTexcoordNormalization3D.y > 1.0, 0.0, abs(cleanTexcoordNormalization3D.y));\n\n    v_texcoordNormalizationAndHalfWidth.xy = mix(cleanTexcoordNormalization2D, cleanTexcoordNormalization3D, czm_morphTime);\n\n#ifdef PER_INSTANCE_COLOR\n    v_color = czm_batchTable_color(batchId);\n#else // PER_INSTANCE_COLOR\n    // For computing texture coordinates\n\n    v_alignedPlaneDistances.x = -dot(v_forwardDirectionEC, startEC);\n    v_alignedPlaneDistances.y = -dot(-v_forwardDirectionEC, endEC);\n#endif // PER_INSTANCE_COLOR\n\n#ifdef WIDTH_VARYING\n    float width = czm_batchTable_width(batchId);\n    float halfWidth = width * 0.5;\n    v_width = width;\n    v_texcoordNormalizationAndHalfWidth.z = halfWidth;\n#else\n    float halfWidth = 0.5 * czm_batchTable_width(batchId);\n    v_texcoordNormalizationAndHalfWidth.z = halfWidth;\n#endif\n\n    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.\n    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.\n    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.\n    // Since this is morphing, compute both 3D and 2D positions and then blend.\n\n    // ****** 3D ******\n    // Check distance to the end plane and start plane, pick the plane that is closer\n    vec4 positionEc3D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position3DHigh, position3DLow); // w = 1.0, see czm_computePosition\n    float absStartPlaneDistance = abs(czm_planeDistance(startPlane3D, positionEc3D.xyz));\n    float absEndPlaneDistance = abs(czm_planeDistance(endPlane3D, positionEc3D.xyz));\n    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane3D.xyz, endPlane3D.xyz);\n    vec3 upOrDown = normalize(cross(rightPlane3D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.\n    vec3 normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.\n\n    // Nudge the top vertex upwards to prevent flickering\n    vec3 geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc3D));\n    geodeticSurfaceNormal *= float(0.0 <= rightNormalAndTextureCoordinateNormalizationY.w && rightNormalAndTextureCoordinateNormalizationY.w <= 1.0);\n    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;\n    positionEc3D.xyz += geodeticSurfaceNormal;\n\n    // Determine if this vertex is on the "left" or "right"\n    normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);\n\n    // A "perfect" implementation would push along normals according to the angle against forward.\n    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.\n    positionEc3D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc3D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)\n\n    // ****** 2D ******\n    // Check distance to the end plane and start plane, pick the plane that is closer\n    vec4 positionEc2D = czm_modelViewRelativeToEye * czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy); // w = 1.0, see czm_computePosition\n    absStartPlaneDistance = abs(czm_planeDistance(startPlane2D, positionEc2D.xyz));\n    absEndPlaneDistance = abs(czm_planeDistance(endPlane2D, positionEc2D.xyz));\n    planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlane2D.xyz, endPlane2D.xyz);\n    upOrDown = normalize(cross(rightPlane2D.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.\n    normalEC = normalize(cross(planeDirection, upOrDown));         // In practice, the opposite seems to work too.\n\n    // Nudge the top vertex upwards to prevent flickering\n    geodeticSurfaceNormal = normalize(cross(normalEC, forwardEc2D));\n    geodeticSurfaceNormal *= float(0.0 <= texcoordNormalization2D.y && texcoordNormalization2D.y <= 1.0);\n    geodeticSurfaceNormal *= MAX_TERRAIN_HEIGHT;\n    positionEc2D.xyz += geodeticSurfaceNormal;\n\n    // Determine if this vertex is on the "left" or "right"\n    normalEC *= sign(texcoordNormalization2D.x);\n#ifndef PER_INSTANCE_COLOR\n    // Use vertex\'s sidedness to compute its texture coordinate.\n    v_texcoordT = clamp(sign(texcoordNormalization2D.x), 0.0, 1.0);\n#endif\n\n    // A "perfect" implementation would push along normals according to the angle against forward.\n    // In practice, just pushing the normal out by halfWidth is sufficient for morph views.\n    positionEc2D.xyz += halfWidth * max(0.0, czm_metersPerPixel(positionEc2D)) * normalEC; // prevent artifacts when czm_metersPerPixel is negative (behind camera)\n\n    // Blend for actual position\n    gl_Position = czm_projection * mix(positionEc2D, positionEc3D, czm_morphTime);\n\n#ifdef ANGLE_VARYING\n    // Approximate relative screen space direction of the line.\n    vec2 approxLineDirection = normalize(vec2(v_forwardDirectionEC.x, -v_forwardDirectionEC.y));\n    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);\n    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);\n#endif\n}\n',XW='attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\n\n// In 2D and in 3D, texture coordinate normalization component signs encodes:\n// * X sign - sidedness relative to right plane\n// * Y sign - is negative OR magnitude is greater than 1.0 if vertex is on bottom of volume\n#ifndef COLUMBUS_VIEW_2D\nattribute vec4 startHiAndForwardOffsetX;\nattribute vec4 startLoAndForwardOffsetY;\nattribute vec4 startNormalAndForwardOffsetZ;\nattribute vec4 endNormalAndTextureCoordinateNormalizationX;\nattribute vec4 rightNormalAndTextureCoordinateNormalizationY;\n#else\nattribute vec4 startHiLo2D;\nattribute vec4 offsetAndRight2D;\nattribute vec4 startEndNormals2D;\nattribute vec2 texcoordNormalization2D;\n#endif\n\nattribute float batchId;\n\nvarying vec4 v_startPlaneNormalEcAndHalfWidth;\nvarying vec4 v_endPlaneNormalEcAndBatchId;\nvarying vec4 v_rightPlaneEC;\nvarying vec4 v_endEcAndStartEcX;\nvarying vec4 v_texcoordNormalizationAndStartEcYZ;\n\n// For materials\n#ifdef WIDTH_VARYING\nvarying float v_width;\n#endif\n#ifdef ANGLE_VARYING\nvarying float v_polylineAngle;\n#endif\n\n#ifdef PER_INSTANCE_COLOR\nvarying vec4 v_color;\n#endif\n\nvoid main()\n{\n#ifdef COLUMBUS_VIEW_2D\n    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(vec3(0.0, startHiLo2D.xy), vec3(0.0, startHiLo2D.zw))).xyz;\n\n    vec3 forwardDirectionEC = czm_normal * vec3(0.0, offsetAndRight2D.xy);\n    vec3 ecEnd = forwardDirectionEC + ecStart;\n    forwardDirectionEC = normalize(forwardDirectionEC);\n\n    // Right plane\n    v_rightPlaneEC.xyz = czm_normal * vec3(0.0, offsetAndRight2D.zw);\n    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);\n\n    // start plane\n    vec4 startPlaneEC;\n    startPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.xy);\n    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);\n\n    // end plane\n    vec4 endPlaneEC;\n    endPlaneEC.xyz =  czm_normal * vec3(0.0, startEndNormals2D.zw);\n    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);\n\n    v_texcoordNormalizationAndStartEcYZ.x = abs(texcoordNormalization2D.x);\n    v_texcoordNormalizationAndStartEcYZ.y = texcoordNormalization2D.y;\n\n#else // COLUMBUS_VIEW_2D\n    vec3 ecStart = (czm_modelViewRelativeToEye * czm_translateRelativeToEye(startHiAndForwardOffsetX.xyz, startLoAndForwardOffsetY.xyz)).xyz;\n    vec3 offset = czm_normal * vec3(startHiAndForwardOffsetX.w, startLoAndForwardOffsetY.w, startNormalAndForwardOffsetZ.w);\n    vec3 ecEnd = ecStart + offset;\n\n    vec3 forwardDirectionEC = normalize(offset);\n\n    // start plane\n    vec4 startPlaneEC;\n    startPlaneEC.xyz = czm_normal * startNormalAndForwardOffsetZ.xyz;\n    startPlaneEC.w = -dot(startPlaneEC.xyz, ecStart);\n\n    // end plane\n    vec4 endPlaneEC;\n    endPlaneEC.xyz = czm_normal * endNormalAndTextureCoordinateNormalizationX.xyz;\n    endPlaneEC.w = -dot(endPlaneEC.xyz, ecEnd);\n\n    // Right plane\n    v_rightPlaneEC.xyz = czm_normal * rightNormalAndTextureCoordinateNormalizationY.xyz;\n    v_rightPlaneEC.w = -dot(v_rightPlaneEC.xyz, ecStart);\n\n    v_texcoordNormalizationAndStartEcYZ.x = abs(endNormalAndTextureCoordinateNormalizationX.w);\n    v_texcoordNormalizationAndStartEcYZ.y = rightNormalAndTextureCoordinateNormalizationY.w;\n\n#endif // COLUMBUS_VIEW_2D\n\n    v_endEcAndStartEcX.xyz = ecEnd;\n    v_endEcAndStartEcX.w = ecStart.x;\n    v_texcoordNormalizationAndStartEcYZ.zw = ecStart.yz;\n\n#ifdef PER_INSTANCE_COLOR\n    v_color = czm_batchTable_color(batchId);\n#endif // PER_INSTANCE_COLOR\n\n    // Compute a normal along which to "push" the position out, extending the miter depending on view distance.\n    // Position has already been "pushed" by unit length along miter normal, and miter normals are encoded in the planes.\n    // Decode the normal to use at this specific vertex, push the position back, and then push to where it needs to be.\n    vec4 positionRelativeToEye = czm_computePosition();\n\n    // Check distance to the end plane and start plane, pick the plane that is closer\n    vec4 positionEC = czm_modelViewRelativeToEye * positionRelativeToEye; // w = 1.0, see czm_computePosition\n    float absStartPlaneDistance = abs(czm_planeDistance(startPlaneEC, positionEC.xyz));\n    float absEndPlaneDistance = abs(czm_planeDistance(endPlaneEC, positionEC.xyz));\n    vec3 planeDirection = czm_branchFreeTernary(absStartPlaneDistance < absEndPlaneDistance, startPlaneEC.xyz, endPlaneEC.xyz);\n    vec3 upOrDown = normalize(cross(v_rightPlaneEC.xyz, planeDirection)); // Points "up" for start plane, "down" at end plane.\n    vec3 normalEC = normalize(cross(planeDirection, upOrDown));           // In practice, the opposite seems to work too.\n\n    // Extrude bottom vertices downward for far view distances, like for GroundPrimitives\n    upOrDown = cross(forwardDirectionEC, normalEC);\n    upOrDown = float(czm_sceneMode == czm_sceneMode3D) * upOrDown;\n    upOrDown = float(v_texcoordNormalizationAndStartEcYZ.y > 1.0 || v_texcoordNormalizationAndStartEcYZ.y < 0.0) * upOrDown;\n    upOrDown = min(GLOBE_MINIMUM_ALTITUDE, czm_geometricToleranceOverMeter * length(positionRelativeToEye.xyz)) * upOrDown;\n    positionEC.xyz += upOrDown;\n\n    v_texcoordNormalizationAndStartEcYZ.y = czm_branchFreeTernary(v_texcoordNormalizationAndStartEcYZ.y > 1.0, 0.0, abs(v_texcoordNormalizationAndStartEcYZ.y));\n\n    // Determine distance along normalEC to push for a volume of appropriate width.\n    // Make volumes about double pixel width for a conservative fit - in practice the\n    // extra cost here is minimal compared to the loose volume heights.\n    //\n    // N = normalEC (guaranteed "right-facing")\n    // R = rightEC\n    // p = angle between N and R\n    // w = distance to push along R if R == N\n    // d = distance to push along N\n    //\n    //   N   R\n    //  {  p| }      * cos(p) = dot(N, R) = w / d\n    //  d  |  |w    * d = w / dot(N, R)\n    //    { | }\n    //       o---------- polyline segment ----\x3e\n    //\n    float width = czm_batchTable_width(batchId);\n#ifdef WIDTH_VARYING\n    v_width = width;\n#endif\n\n    v_startPlaneNormalEcAndHalfWidth.xyz = startPlaneEC.xyz;\n    v_startPlaneNormalEcAndHalfWidth.w = width * 0.5;\n\n    v_endPlaneNormalEcAndBatchId.xyz = endPlaneEC.xyz;\n    v_endPlaneNormalEcAndBatchId.w = batchId;\n\n    width = width * max(0.0, czm_metersPerPixel(positionEC)); // width = distance to push along R\n    width = width / dot(normalEC, v_rightPlaneEC.xyz); // width = distance to push along N\n\n    // Determine if this vertex is on the "left" or "right"\n#ifdef COLUMBUS_VIEW_2D\n        normalEC *= sign(texcoordNormalization2D.x);\n#else\n        normalEC *= sign(endNormalAndTextureCoordinateNormalizationX.w);\n#endif\n\n    positionEC.xyz += width * normalEC;\n    gl_Position = czm_depthClamp(czm_projection * positionEC);\n\n#ifdef ANGLE_VARYING\n    // Approximate relative screen space direction of the line.\n    vec2 approxLineDirection = normalize(vec2(forwardDirectionEC.x, -forwardDirectionEC.y));\n    approxLineDirection.y = czm_branchFreeTernary(approxLineDirection.x == 0.0 && approxLineDirection.y == 0.0, -1.0, approxLineDirection.y);\n    v_polylineAngle = czm_fastApproximateAtan(approxLineDirection.x, approxLineDirection.y);\n#endif\n}\n',KW="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec2 expandAndWidth;\nattribute vec4 color;\nattribute float batchId;\n\nvarying vec4 v_color;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = czm_computePosition();\n    vec4 prev = czm_computePrevPosition();\n    vec4 next = czm_computeNextPosition();\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n\n    v_color = color;\n}\n",$W="void clipLineSegmentToNearPlane(\n    vec3 p0,\n    vec3 p1,\n    out vec4 positionWC,\n    out bool clipped,\n    out bool culledByNearPlane,\n    out vec4 clippedPositionEC)\n{\n    culledByNearPlane = false;\n    clipped = false;\n\n    vec3 p0ToP1 = p1 - p0;\n    float magnitude = length(p0ToP1);\n    vec3 direction = normalize(p0ToP1);\n\n    // Distance that p0 is behind the near plane. Negative means p0 is\n    // in front of the near plane.\n    float endPoint0Distance =  czm_currentFrustum.x + p0.z;\n\n    // Camera looks down -Z.\n    // When moving a point along +Z: LESS VISIBLE\n    //   * Points in front of the camera move closer to the camera.\n    //   * Points behind the camrea move farther away from the camera.\n    // When moving a point along -Z: MORE VISIBLE\n    //   * Points in front of the camera move farther away from the camera.\n    //   * Points behind the camera move closer to the camera.\n\n    // Positive denominator: -Z, becoming more visible\n    // Negative denominator: +Z, becoming less visible\n    // Nearly zero: parallel to near plane\n    float denominator = -direction.z;\n\n    if (endPoint0Distance > 0.0 && abs(denominator) < czm_epsilon7)\n    {\n        // p0 is behind the near plane and the line to p1 is nearly parallel to\n        // the near plane, so cull the segment completely.\n        culledByNearPlane = true;\n    }\n    else if (endPoint0Distance > 0.0)\n    {\n        // p0 is behind the near plane, and the line to p1 is moving distinctly\n        // toward or away from it.\n\n        // t = (-plane distance - dot(plane normal, ray origin)) / dot(plane normal, ray direction)\n        float t = endPoint0Distance / denominator;\n        if (t < 0.0 || t > magnitude)\n        {\n            // Near plane intersection is not between the two points.\n            // We already confirmed p0 is behind the naer plane, so now\n            // we know the entire segment is behind it.\n            culledByNearPlane = true;\n        }\n        else\n        {\n            // Segment crosses the near plane, update p0 to lie exactly on it.\n            p0 = p0 + t * direction;\n\n            // Numerical noise might put us a bit on the wrong side of the near plane.\n            // Don't let that happen.\n            p0.z = min(p0.z, -czm_currentFrustum.x);\n\n            clipped = true;\n        }\n    }\n\n    clippedPositionEC = vec4(p0, 1.0);\n    positionWC = czm_eyeToWindowCoordinates(clippedPositionEC);\n}\n\nvec4 getPolylineWindowCoordinatesEC(vec4 positionEC, vec4 prevEC, vec4 nextEC, float expandDirection, float width, bool usePrevious, out float angle)\n{\n    // expandDirection +1 is to the _left_ when looking from positionEC toward nextEC.\n\n#ifdef POLYLINE_DASH\n    // Compute the window coordinates of the points.\n    vec4 positionWindow = czm_eyeToWindowCoordinates(positionEC);\n    vec4 previousWindow = czm_eyeToWindowCoordinates(prevEC);\n    vec4 nextWindow = czm_eyeToWindowCoordinates(nextEC);\n\n    // Determine the relative screen space direction of the line.\n    vec2 lineDir;\n    if (usePrevious) {\n        lineDir = normalize(positionWindow.xy - previousWindow.xy);\n    }\n    else {\n        lineDir = normalize(nextWindow.xy - positionWindow.xy);\n    }\n    angle = atan(lineDir.x, lineDir.y) - 1.570796327; // precomputed atan(1,0)\n\n    // Quantize the angle so it doesn't change rapidly between segments.\n    angle = floor(angle / czm_piOverFour + 0.5) * czm_piOverFour;\n#endif\n\n    vec4 clippedPrevWC, clippedPrevEC;\n    bool prevSegmentClipped, prevSegmentCulled;\n    clipLineSegmentToNearPlane(prevEC.xyz, positionEC.xyz, clippedPrevWC, prevSegmentClipped, prevSegmentCulled, clippedPrevEC);\n\n    vec4 clippedNextWC, clippedNextEC;\n    bool nextSegmentClipped, nextSegmentCulled;\n    clipLineSegmentToNearPlane(nextEC.xyz, positionEC.xyz, clippedNextWC, nextSegmentClipped, nextSegmentCulled, clippedNextEC);\n\n    bool segmentClipped, segmentCulled;\n    vec4 clippedPositionWC, clippedPositionEC;\n    clipLineSegmentToNearPlane(positionEC.xyz, usePrevious ? prevEC.xyz : nextEC.xyz, clippedPositionWC, segmentClipped, segmentCulled, clippedPositionEC);\n\n    if (segmentCulled)\n    {\n        return vec4(0.0, 0.0, 0.0, 1.0);\n    }\n\n    vec2 directionToPrevWC = normalize(clippedPrevWC.xy - clippedPositionWC.xy);\n    vec2 directionToNextWC = normalize(clippedNextWC.xy - clippedPositionWC.xy);\n\n    // If a segment was culled, we can't use the corresponding direction\n    // computed above. We should never see both of these be true without\n    // `segmentCulled` above also being true.\n    if (prevSegmentCulled)\n    {\n        directionToPrevWC = -directionToNextWC;\n    }\n    else if (nextSegmentCulled)\n    {\n        directionToNextWC = -directionToPrevWC;\n    }\n\n    vec2 thisSegmentForwardWC, otherSegmentForwardWC;\n    if (usePrevious)\n    {\n        thisSegmentForwardWC = -directionToPrevWC;\n        otherSegmentForwardWC = directionToNextWC;\n    }\n    else\n    {\n        thisSegmentForwardWC = directionToNextWC;\n        otherSegmentForwardWC =  -directionToPrevWC;\n    }\n\n    vec2 thisSegmentLeftWC = vec2(-thisSegmentForwardWC.y, thisSegmentForwardWC.x);\n\n    vec2 leftWC = thisSegmentLeftWC;\n    float expandWidth = width * 0.5;\n\n    // When lines are split at the anti-meridian, the position may be at the\n    // same location as the next or previous position, and we need to handle\n    // that to avoid producing NaNs.\n    if (!czm_equalsEpsilon(prevEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1) && !czm_equalsEpsilon(nextEC.xyz - positionEC.xyz, vec3(0.0), czm_epsilon1))\n    {\n        vec2 otherSegmentLeftWC = vec2(-otherSegmentForwardWC.y, otherSegmentForwardWC.x);\n\n        vec2 leftSumWC = thisSegmentLeftWC + otherSegmentLeftWC;\n        float leftSumLength = length(leftSumWC);\n        leftWC = leftSumLength < czm_epsilon6 ? thisSegmentLeftWC : (leftSumWC / leftSumLength);\n\n        // The sine of the angle between the two vectors is given by the formula\n        //         |a x b| = |a||b|sin(theta)\n        // which is\n        //     float sinAngle = length(cross(vec3(leftWC, 0.0), vec3(-thisSegmentForwardWC, 0.0)));\n        // Because the z components of both vectors are zero, the x and y coordinate will be zero.\n        // Therefore, the sine of the angle is just the z component of the cross product.\n        vec2 u = -thisSegmentForwardWC;\n        vec2 v = leftWC;\n        float sinAngle = abs(u.x * v.y - u.y * v.x);\n        expandWidth = clamp(expandWidth / sinAngle, 0.0, width * 2.0);\n    }\n\n    vec2 offset = leftWC * expandDirection * expandWidth * czm_pixelRatio;\n    return vec4(clippedPositionWC.xy + offset, -clippedPositionWC.z, 1.0) * (czm_projection * clippedPositionEC).w;\n}\n\nvec4 getPolylineWindowCoordinates(vec4 position, vec4 previous, vec4 next, float expandDirection, float width, bool usePrevious, out float angle)\n{\n    vec4 positionEC = czm_modelViewRelativeToEye * position;\n    vec4 prevEC = czm_modelViewRelativeToEye * previous;\n    vec4 nextEC = czm_modelViewRelativeToEye * next;\n    return getPolylineWindowCoordinatesEC(positionEC, prevEC, nextEC, expandDirection, width, usePrevious, angle);\n}\n";let JW=`${$W}\n${KW}`;const QW=ZB;function ZW(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.translucent,!0),n=!1,i=ZW.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,JW),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,QW),this._renderState=WN.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Or.isInternetExplorer()||(JW=`#define CLIP_POLYLINE \n${JW}`),Object.defineProperties(ZW.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),ZW.VERTEX_FORMAT=qu.POSITION_ONLY,ZW.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,ZW.prototype.isTranslucent=WN.prototype.isTranslucent,ZW.prototype.getRenderState=WN.prototype.getRenderState;var eq=ZW,tq="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec2 expandAndWidth;\nattribute vec2 st;\nattribute float batchId;\n\nvarying float v_width;\nvarying vec2 v_st;\nvarying float v_polylineAngle;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = czm_computePosition();\n    vec4 prev = czm_computePrevPosition();\n    vec4 next = czm_computeNextPosition();\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n\n    v_width = width;\n    v_st.s = st.s;\n    v_st.t = czm_writeNonPerspective(st.t, gl_Position.w);\n    v_polylineAngle = angle;\n}\n",nq="#ifdef VECTOR_TILE\nuniform vec4 u_highlightColor;\n#endif\n\nvarying vec2 v_st;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n\n    vec2 st = v_st;\n    st.t = czm_readNonPerspective(st.t, gl_FragCoord.w);\n\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = vec3(st, 0.0);\n\n    czm_material material = czm_getMaterial(materialInput);\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#ifdef VECTOR_TILE\n    gl_FragColor *= u_highlightColor;\n#endif\n\n    czm_writeLogDepth();\n}\n";let iq=`${$W}\n${tq}`;const oq=nq;function rq(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.translucent,!0),n=!1,i=rq.VERTEX_FORMAT;this.material=Object(r["a"])(e.material)?e.material:XB.fromType(XB.ColorType),this.translucent=t,this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,iq),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,oq),this._renderState=WN.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}Or.isInternetExplorer()||(iq=`#define CLIP_POLYLINE \n${iq}`),Object.defineProperties(rq.prototype,{vertexShaderSource:{get:function(){let e=this._vertexShaderSource;return-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&(e=`#define POLYLINE_DASH\n${e}`),e}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),rq.VERTEX_FORMAT=qu.POSITION_AND_ST,rq.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,rq.prototype.isTranslucent=WN.prototype.isTranslucent,rq.prototype.getRenderState=WN.prototype.getRenderState;var aq=rq;function sq(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;let t=e.appearance;Object(r["a"])(t)||(t=new aq),this.appearance=t,this.show=Object(o["a"])(e.show,!0),this.classificationType=Object(o["a"])(e.classificationType,DV.BOTH),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this._debugShowShadowVolume=Object(o["a"])(e.debugShowShadowVolume,!1),this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:Object(o["a"])(e.interleave,!1),releaseGeometryInstances:Object(o["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(o["a"])(e.allowPicking,!0),asynchronous:Object(o["a"])(e.asynchronous,!0),compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1;const n=this;this._readyPromise=new Promise((e,t)=>{n._completeLoad=()=>{this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0);const n=this._error;Object(r["a"])(n)?t(n):e(this)}}),this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=lq(!1),this._renderState3DTiles=lq(!0),this._renderStateMorph=UF.fromCache({cull:{enabled:!0,face:HN.FRONT},depthTest:{enabled:!0},blending:UN.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1})}function cq(e,t,n){const i=t.context,o=e._primitive,a=o._attributeLocations;let s=o._batchTable.getVertexShaderCallback()(XW);s=EG._appendShowToShader(o,s),s=EG._appendDistanceDisplayConditionToShader(o,s),s=EG._modifyShaderPosition(e,s,t.scene3DOnly);let c=o._batchTable.getVertexShaderCallback()(YW);c=EG._appendShowToShader(o,c),c=EG._appendDistanceDisplayConditionToShader(o,c),c=EG._modifyShaderPosition(e,c,t.scene3DOnly);let l=o._batchTable.getVertexShaderCallback()(WW);const u=[`GLOBE_MINIMUM_ALTITUDE ${t.mapProjection.ellipsoid.minimumRadius.toFixed(1)}`];let h="",d="";Object(r["a"])(n.material)?(d=Object(r["a"])(n.material)?n.material.shaderSource:"",-1!==d.search(/varying\s+float\s+v_polylineAngle;/g)&&u.push("ANGLE_VARYING"),-1!==d.search(/varying\s+float\s+v_width;/g)&&u.push("WIDTH_VARYING")):h="PER_INSTANCE_COLOR",u.push(h);const f=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",h]:[h],p=new EV({defines:u,sources:[s]}),m=new EV({defines:f,sources:[d,l]});e._sp=Nz.replaceCache({context:i,shaderProgram:o._sp,vertexShaderSource:p,fragmentShaderSource:m,attributeLocations:a});let _=i.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!Object(r["a"])(_)){const t=new EV({defines:u.concat(["COLUMBUS_VIEW_2D"]),sources:[s]});_=i.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:i,shaderProgram:e._sp2D,vertexShaderSource:t,fragmentShaderSource:m,attributeLocations:a})}e._sp2D=_;let g=i.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!Object(r["a"])(g)){const t=new EV({defines:u.concat([`MAX_TERRAIN_HEIGHT ${rn._defaultMaxTerrainHeight.toFixed(1)}`]),sources:[c]});l=o._batchTable.getVertexShaderCallback()(qW);const n=new EV({defines:f,sources:[d,l]});g=i.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:i,shaderProgram:e._spMorph,vertexShaderSource:t,fragmentShaderSource:n,attributeLocations:a})}e._spMorph=g}function lq(e){return UF.fromCache({cull:{enabled:!0},blending:UN.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:oW.EQUAL,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},backFunction:oW.EQUAL,backOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK}})}function uq(e,t,n,i,o,a){const s=e._primitive,c=s._va.length;o.length=c,a.length=c;const l=t instanceof eq,u=l?{}:n._uniforms,h=s._batchTable.getUniformMapCallback()(u);for(let d=0;d<c;d++){const t=s._va[d];let n=o[d];Object(r["a"])(n)||(n=o[d]=new lF({owner:e,primitiveType:s._primitiveType})),n.vertexArray=t,n.renderState=e._renderState,n.shaderProgram=e._sp,n.uniformMap=h,n.pass=hF.TERRAIN_CLASSIFICATION,n.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";const i=lF.shallowClone(n,n.derivedCommands.tileset);i.renderState=e._renderState3DTiles,i.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=i;const a=lF.shallowClone(n,n.derivedCommands.color2D);a.shaderProgram=e._sp2D,n.derivedCommands.color2D=a;const c=lF.shallowClone(i,i.derivedCommands.color2D);c.shaderProgram=e._sp2D,i.derivedCommands.color2D=c;const l=lF.shallowClone(n,n.derivedCommands.colorMorph);l.renderState=e._renderStateMorph,l.shaderProgram=e._spMorph,l.pickId="czm_batchTable_pickColor(v_batchId)",n.derivedCommands.colorMorph=l}}function hq(e,t,n,i,o,r,a){n.mode===SH.MORPHING?t=t.derivedCommands.colorMorph:n.mode!==SH.SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=a,n.commandList.push(t)}function dq(e,t,n,i,o,a,s){const c=e._primitive;let l;EG._updateBoundingVolumes(c,t,o),t.mode===SH.SCENE3D?l=c._boundingSphereWC:t.mode===SH.COLUMBUS_VIEW?l=c._boundingSphereCV:t.mode===SH.SCENE2D&&Object(r["a"])(c._boundingSphere2D)?l=c._boundingSphere2D:Object(r["a"])(c._boundingSphereMorph)&&(l=c._boundingSphereMorph);const u=t.mode===SH.MORPHING,h=e.classificationType,d=h!==DV.CESIUM_3D_TILE,f=h!==DV.TERRAIN&&!u;let p;const m=t.passes;if(m.render||m.pick&&c.allowPicking){const i=n.length;for(let r=0;r<i;++r){const i=l[r];d&&(p=n[r],hq(e,p,t,o,a,i,s)),f&&(p=n[r].derivedCommands.tileset,hq(e,p,t,o,a,i,s))}}}Object.defineProperties(sq.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}}),sq.initializeTerrainHeights=function(){return rn.initialize()},sq.prototype.update=function(e){if(!Object(r["a"])(this._primitive)&&!Object(r["a"])(this.geometryInstances))return;if(!rn.initialized){if(!this.asynchronous)throw new a["a"]("For synchronous GroundPolylinePrimitives, you must call GroundPolylinePrimitives.initializeTerrainHeights() and wait for the returned promise to resolve.");return void sq.initializeTerrainHeights()}let t;const n=this,i=this._primitiveOptions;if(!Object(r["a"])(this._primitive)){const o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],a=o.length,s=new Array(a);let c;for(t=0;t<a;++t)if(c=o[t].attributes,!Object(r["a"])(c)||!Object(r["a"])(c.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<a;++t){const i=o[t];c={};const a=i.attributes;for(const e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);Object(r["a"])(c.width)||(c.width=new wA({componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:1,value:[i.geometry.width]})),i.geometry._scene3DOnly=e.scene3DOnly,KT.setProjectionAndEllipsoid(i.geometry,e.mapProjection),s[t]=new Sd({geometry:i.geometry,attributes:c,id:i.id,pickPrimitive:n})}i.geometryInstances=s,i.appearance=this.appearance,i._createShaderProgramFunction=function(e,t,i){cq(n,t,i)},i._createCommandsFunction=function(e,t,i,o,r,a,s){uq(n,t,i,o,a,s)},i._updateAndQueueCommandsFunction=function(e,t,i,o,r,a,s,c){dq(n,t,i,o,r,a,s)},this._primitive=new EG(i),this._primitive.readyPromise.then(this._completeLoad)}if(this.appearance instanceof eq&&!this._hasPerInstanceColors)throw new a["a"]("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)},sq.prototype.getGeometryInstanceAttributes=function(e){if(!Object(r["a"])(this._primitive))throw new a["a"]("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},sq.isSupported=function(e){return e.frameState.context.depthTexture},sq.prototype.isDestroyed=function(){return!1},sq.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,Wc(this)};var fq=sq;const pq=new Gt(1,1),mq=!1,_q=Dm.WHITE;function gq(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=e.image,this.repeat=e.repeat,this.color=e.color,this.transparent=e.transparent}Object.defineProperties(gq.prototype,{isConstant:{get:function(){return aN.isConstant(this._image)&&aN.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:XM("image"),repeat:XM("repeat"),color:XM("color"),transparent:XM("transparent")}),gq.prototype.getType=function(e){return"Image"},gq.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.image=aN.getValueOrUndefined(this._image,e),t.repeat=aN.getValueOrClonedDefault(this._repeat,e,pq,t.repeat),t.color=aN.getValueOrClonedDefault(this._color,e,_q,t.color),aN.getValueOrDefault(this._transparent,e,mq)&&(t.color.alpha=Math.min(.99,t.color.alpha)),t},gq.prototype.equals=function(e){return this===e||e instanceof gq&&aN.equals(this._image,e._image)&&aN.equals(this._repeat,e._repeat)&&aN.equals(this._color,e._color)&&aN.equals(this._transparent,e._transparent)};var bq=gq;function yq(e){if(e instanceof Dm)return new oF(e);if("string"===typeof e||e instanceof Et["a"]||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){const t=new bq;return t.image=e,t}throw new a["a"](`Unable to infer material type: ${e}`)}function vq(e,t){return XM(e,t,yq)}var Oq=vq;function Aq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Aq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),dimensions:XM("dimensions"),heightReference:XM("heightReference"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),Aq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.dimensions=this.dimensions,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new Aq(this)},Aq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.dimensions=Object(o["a"])(this.dimensions,e.dimensions),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var wq=Aq;function Tq(){a["a"].throwInstantiationError()}Object.defineProperties(Tq.prototype,{isConstant:{get:a["a"].throwInstantiationError},definitionChanged:{get:a["a"].throwInstantiationError},referenceFrame:{get:a["a"].throwInstantiationError}}),Tq.prototype.getValue=a["a"].throwInstantiationError,Tq.prototype.getValueInReferenceFrame=a["a"].throwInstantiationError,Tq.prototype.equals=a["a"].throwInstantiationError;const Cq=new ce;Tq.convertToReferenceFrame=function(e,t,n,i,o){if(!Object(r["a"])(t))return t;if(Object(r["a"])(o)||(o=new g),n===i)return g.clone(t,o);let a=ka.computeIcrfToFixedMatrix(e,Cq);return Object(r["a"])(a)||(a=ka.computeTemeToPseudoFixedMatrix(e,Cq)),n===iD.INERTIAL?ce.multiplyByVector(a,t,o):n===iD.FIXED?ce.multiplyByVector(ce.transpose(a,Cq),t,o):void 0};var Eq=Tq;function xq(e,t){this._definitionChanged=new dn["a"],this._value=g.clone(e),this._referenceFrame=Object(o["a"])(t,iD.FIXED)}Object.defineProperties(xq.prototype,{isConstant:{get:function(){return!Object(r["a"])(this._value)||this._referenceFrame===iD.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),xq.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},xq.prototype.setValue=function(e,t){let n=!1;g.equals(this._value,e)||(n=!0,this._value=g.clone(e)),Object(r["a"])(t)&&this._referenceFrame!==t&&(n=!0,this._referenceFrame=t),n&&this._definitionChanged.raiseEvent(this)},xq.prototype.getValueInReferenceFrame=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceFrame is required.");return Eq.convertToReferenceFrame(e,this._value,this._referenceFrame,t,n)},xq.prototype.equals=function(e){return this===e||e instanceof xq&&g.equals(this._value,e._value)&&this._referenceFrame===e._referenceFrame};var Sq=xq;function Iq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Iq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),positions:XM("positions"),width:XM("width"),height:XM("height"),heightReference:XM("heightReference"),extrudedHeight:XM("extrudedHeight"),extrudedHeightReference:XM("extrudedHeightReference"),cornerType:XM("cornerType"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition"),classificationType:XM("classificationType"),zIndex:XM("zIndex")}),Iq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new Iq(this)},Iq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.positions=Object(o["a"])(this.positions,e.positions),this.width=Object(o["a"])(this.width,e.width),this.height=Object(o["a"])(this.height,e.height),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.extrudedHeight=Object(o["a"])(this.extrudedHeight,e.extrudedHeight),this.extrudedHeightReference=Object(o["a"])(this.extrudedHeightReference,e.extrudedHeightReference),this.cornerType=Object(o["a"])(this.cornerType,e.cornerType),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.classificationType=Object(o["a"])(this.classificationType,e.classificationType),this.zIndex=Object(o["a"])(this.zIndex,e.zIndex)};var Dq=Iq;function Pq(e){return e}function jq(e,t){return XM(e,t,Pq)}var Rq=jq;function Lq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._length=void 0,this._lengthSubscription=void 0,this._topRadius=void 0,this._topRadiusSubscription=void 0,this._bottomRadius=void 0,this._bottomRadiusSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._slices=void 0,this._slicesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Lq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),length:XM("length"),topRadius:XM("topRadius"),bottomRadius:XM("bottomRadius"),heightReference:XM("heightReference"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),numberOfVerticalLines:XM("numberOfVerticalLines"),slices:XM("slices"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),Lq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.length=this.length,e.topRadius=this.topRadius,e.bottomRadius=this.bottomRadius,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.slices=this.slices,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new Lq(this)},Lq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.length=Object(o["a"])(this.length,e.length),this.topRadius=Object(o["a"])(this.topRadius,e.topRadius),this.bottomRadius=Object(o["a"])(this.bottomRadius,e.bottomRadius),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.numberOfVerticalLines=Object(o["a"])(this.numberOfVerticalLines,e.numberOfVerticalLines),this.slices=Object(o["a"])(this.slices,e.slices),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var Mq=Lq;function Nq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Nq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),semiMajorAxis:XM("semiMajorAxis"),semiMinorAxis:XM("semiMinorAxis"),height:XM("height"),heightReference:XM("heightReference"),extrudedHeight:XM("extrudedHeight"),extrudedHeightReference:XM("extrudedHeightReference"),rotation:XM("rotation"),stRotation:XM("stRotation"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),numberOfVerticalLines:XM("numberOfVerticalLines"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition"),classificationType:XM("classificationType"),zIndex:XM("zIndex")}),Nq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.semiMajorAxis=this.semiMajorAxis,e.semiMinorAxis=this.semiMinorAxis,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.numberOfVerticalLines=this.numberOfVerticalLines,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new Nq(this)},Nq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.semiMajorAxis=Object(o["a"])(this.semiMajorAxis,e.semiMajorAxis),this.semiMinorAxis=Object(o["a"])(this.semiMinorAxis,e.semiMinorAxis),this.height=Object(o["a"])(this.height,e.height),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.extrudedHeight=Object(o["a"])(this.extrudedHeight,e.extrudedHeight),this.extrudedHeightReference=Object(o["a"])(this.extrudedHeightReference,e.extrudedHeightReference),this.rotation=Object(o["a"])(this.rotation,e.rotation),this.stRotation=Object(o["a"])(this.stRotation,e.stRotation),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.numberOfVerticalLines=Object(o["a"])(this.numberOfVerticalLines,e.numberOfVerticalLines),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.classificationType=Object(o["a"])(this.classificationType,e.classificationType),this.zIndex=Object(o["a"])(this.zIndex,e.zIndex)};var Bq=Nq;function Fq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Fq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),radii:XM("radii"),innerRadii:XM("innerRadii"),minimumClock:XM("minimumClock"),maximumClock:XM("maximumClock"),minimumCone:XM("minimumCone"),maximumCone:XM("maximumCone"),heightReference:XM("heightReference"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),stackPartitions:XM("stackPartitions"),slicePartitions:XM("slicePartitions"),subdivisions:XM("subdivisions"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),Fq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.radii=this.radii,e.innerRadii=this.innerRadii,e.minimumClock=this.minimumClock,e.maximumClock=this.maximumClock,e.minimumCone=this.minimumCone,e.maximumCone=this.maximumCone,e.heightReference=this.heightReference,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.stackPartitions=this.stackPartitions,e.slicePartitions=this.slicePartitions,e.subdivisions=this.subdivisions,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new Fq(this)},Fq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.radii=Object(o["a"])(this.radii,e.radii),this.innerRadii=Object(o["a"])(this.innerRadii,e.innerRadii),this.minimumClock=Object(o["a"])(this.minimumClock,e.minimumClock),this.maximumClock=Object(o["a"])(this.maximumClock,e.maximumClock),this.minimumCone=Object(o["a"])(this.minimumCone,e.minimumCone),this.maximumCone=Object(o["a"])(this.maximumCone,e.maximumCone),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.stackPartitions=Object(o["a"])(this.stackPartitions,e.stackPartitions),this.slicePartitions=Object(o["a"])(this.slicePartitions,e.slicePartitions),this.subdivisions=Object(o["a"])(this.subdivisions,e.subdivisions),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var zq=Fq;function kq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._showBackground=void 0,this._showBackgroundSubscription=void 0,this._backgroundColor=void 0,this._backgroundColorSubscription=void 0,this._backgroundPadding=void 0,this._backgroundPaddingSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(kq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),text:XM("text"),font:XM("font"),style:XM("style"),scale:XM("scale"),showBackground:XM("showBackground"),backgroundColor:XM("backgroundColor"),backgroundPadding:XM("backgroundPadding"),pixelOffset:XM("pixelOffset"),eyeOffset:XM("eyeOffset"),horizontalOrigin:XM("horizontalOrigin"),verticalOrigin:XM("verticalOrigin"),heightReference:XM("heightReference"),fillColor:XM("fillColor"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),translucencyByDistance:XM("translucencyByDistance"),pixelOffsetScaleByDistance:XM("pixelOffsetScaleByDistance"),scaleByDistance:XM("scaleByDistance"),distanceDisplayCondition:XM("distanceDisplayCondition"),disableDepthTestDistance:XM("disableDepthTestDistance")}),kq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.text=this.text,e.font=this.font,e.style=this.style,e.scale=this.scale,e.showBackground=this.showBackground,e.backgroundColor=this.backgroundColor,e.backgroundPadding=this.backgroundPadding,e.pixelOffset=this.pixelOffset,e.eyeOffset=this.eyeOffset,e.horizontalOrigin=this.horizontalOrigin,e.verticalOrigin=this.verticalOrigin,e.heightReference=this.heightReference,e.fillColor=this.fillColor,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.translucencyByDistance=this.translucencyByDistance,e.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance,e.scaleByDistance=this.scaleByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e):new kq(this)},kq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.text=Object(o["a"])(this.text,e.text),this.font=Object(o["a"])(this.font,e.font),this.style=Object(o["a"])(this.style,e.style),this.scale=Object(o["a"])(this.scale,e.scale),this.showBackground=Object(o["a"])(this.showBackground,e.showBackground),this.backgroundColor=Object(o["a"])(this.backgroundColor,e.backgroundColor),this.backgroundPadding=Object(o["a"])(this.backgroundPadding,e.backgroundPadding),this.pixelOffset=Object(o["a"])(this.pixelOffset,e.pixelOffset),this.eyeOffset=Object(o["a"])(this.eyeOffset,e.eyeOffset),this.horizontalOrigin=Object(o["a"])(this.horizontalOrigin,e.horizontalOrigin),this.verticalOrigin=Object(o["a"])(this.verticalOrigin,e.verticalOrigin),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.fillColor=Object(o["a"])(this.fillColor,e.fillColor),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.translucencyByDistance=Object(o["a"])(this.translucencyByDistance,e.translucencyByDistance),this.pixelOffsetScaleByDistance=Object(o["a"])(this.pixelOffsetScaleByDistance,e.pixelOffsetScaleByDistance),this.scaleByDistance=Object(o["a"])(this.scaleByDistance,e.scaleByDistance),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.disableDepthTestDistance=Object(o["a"])(this.disableDepthTestDistance,e.disableDepthTestDistance)};var Uq=kq;const Vq=new jR;function Hq(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._translation=void 0,this._translationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this.translation=e.translation,this.rotation=e.rotation,this.scale=e.scale}Object.defineProperties(Hq.prototype,{isConstant:{get:function(){return aN.isConstant(this._translation)&&aN.isConstant(this._rotation)&&aN.isConstant(this._scale)}},definitionChanged:{get:function(){return this._definitionChanged}},translation:XM("translation"),rotation:XM("rotation"),scale:XM("scale")}),Hq.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t=new jR),t.translation=aN.getValueOrClonedDefault(this._translation,e,Vq.translation,t.translation),t.rotation=aN.getValueOrClonedDefault(this._rotation,e,Vq.rotation,t.rotation),t.scale=aN.getValueOrClonedDefault(this._scale,e,Vq.scale,t.scale),t},Hq.prototype.equals=function(e){return this===e||e instanceof Hq&&aN.equals(this._translation,e._translation)&&aN.equals(this._rotation,e._rotation)&&aN.equals(this._scale,e._scale)};var Gq=Hq;function Wq(e,t){this._propertyNames=[],this._definitionChanged=new dn["a"],Object(r["a"])(e)&&this.merge(e,t)}function qq(e){return new GM(e)}function Yq(e,t){const n=e._propertyNames,i=t._propertyNames,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;++r){const o=n[r],a=i.indexOf(o);if(-1===a)return!1;if(!aN.equals(e[o],t[o]))return!1}return!0}Object.defineProperties(Wq.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){const e=this._propertyNames;for(let t=0,n=e.length;t<n;t++)if(!aN.isConstant(this[e[t]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),Wq.prototype.hasProperty=function(e){return-1!==this._propertyNames.indexOf(e)},Wq.prototype.addProperty=function(e,t,n){const i=this._propertyNames;if(!Object(r["a"])(e))throw new a["a"]("propertyName is required.");if(-1!==i.indexOf(e))throw new a["a"](`${e} is already a registered property.`);i.push(e),Object.defineProperty(this,e,XM(e,!0,Object(o["a"])(n,qq))),Object(r["a"])(t)&&(this[e]=t),this._definitionChanged.raiseEvent(this)},Wq.prototype.removeProperty=function(e){const t=this._propertyNames,n=t.indexOf(e);if(!Object(r["a"])(e))throw new a["a"]("propertyName is required.");if(-1===n)throw new a["a"](`${e} is not a registered property.`);this._propertyNames.splice(n,1),delete this[e],this._definitionChanged.raiseEvent(this)},Wq.prototype.getValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("time is required.");Object(r["a"])(t)||(t={});const n=this._propertyNames;for(let i=0,o=n.length;i<o;i++){const o=n[i];t[o]=aN.getValueOrUndefined(this[o],e,t[o])}return t},Wq.prototype.merge=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("source is required.");const n=this._propertyNames,i=Object(r["a"])(e._propertyNames)?e._propertyNames:Object.keys(e);for(let o=0,a=i.length;o<a;o++){const a=i[o],s=this[a],c=e[a];void 0===s&&-1===n.indexOf(a)&&this.addProperty(a,void 0,t),void 0!==c&&(void 0!==s?Object(r["a"])(s)&&Object(r["a"])(s.merge)&&s.merge(c):Object(r["a"])(c)&&Object(r["a"])(c.merge)&&Object(r["a"])(c.clone)?this[a]=c.clone():this[a]=c)}},Wq.prototype.equals=function(e){return this===e||e instanceof Wq&&Yq(this,e)};var Xq=Wq;function Kq(e){return new Gq(e)}function $q(e){return new Xq(e,Kq)}function Jq(e){return new Xq(e)}function Qq(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._maximumScale=void 0,this._maximumScaleSubscription=void 0,this._incrementallyLoadTextures=void 0,this._incrementallyLoadTexturesSubscription=void 0,this._runAnimations=void 0,this._runAnimationsSubscription=void 0,this._clampAnimations=void 0,this._clampAnimationsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._silhouetteColor=void 0,this._silhouetteColorSubscription=void 0,this._silhouetteSize=void 0,this._silhouetteSizeSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._colorBlendMode=void 0,this._colorBlendModeSubscription=void 0,this._colorBlendAmount=void 0,this._colorBlendAmountSubscription=void 0,this._imageBasedLightingFactor=void 0,this._imageBasedLightingFactorSubscription=void 0,this._lightColor=void 0,this._lightColorSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._nodeTransformations=void 0,this._nodeTransformationsSubscription=void 0,this._articulations=void 0,this._articulationsSubscription=void 0,this._clippingPlanes=void 0,this._clippingPlanesSubscription=void 0,this._customShader=void 0,this._customShaderSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(Qq.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),uri:XM("uri"),scale:XM("scale"),minimumPixelSize:XM("minimumPixelSize"),maximumScale:XM("maximumScale"),incrementallyLoadTextures:XM("incrementallyLoadTextures"),runAnimations:XM("runAnimations"),clampAnimations:XM("clampAnimations"),shadows:XM("shadows"),heightReference:XM("heightReference"),silhouetteColor:XM("silhouetteColor"),silhouetteSize:XM("silhouetteSize"),color:XM("color"),colorBlendMode:XM("colorBlendMode"),colorBlendAmount:XM("colorBlendAmount"),imageBasedLightingFactor:XM("imageBasedLightingFactor"),lightColor:XM("lightColor"),distanceDisplayCondition:XM("distanceDisplayCondition"),nodeTransformations:XM("nodeTransformations",void 0,$q),articulations:XM("articulations",void 0,Jq),clippingPlanes:XM("clippingPlanes"),customShader:XM("customShader")}),Qq.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.uri=this.uri,e.scale=this.scale,e.minimumPixelSize=this.minimumPixelSize,e.maximumScale=this.maximumScale,e.incrementallyLoadTextures=this.incrementallyLoadTextures,e.runAnimations=this.runAnimations,e.clampAnimations=this.clampAnimations,e.heightReference=this._heightReference,e.silhouetteColor=this.silhouetteColor,e.silhouetteSize=this.silhouetteSize,e.color=this.color,e.colorBlendMode=this.colorBlendMode,e.colorBlendAmount=this.colorBlendAmount,e.imageBasedLightingFactor=this.imageBasedLightingFactor,e.lightColor=this.lightColor,e.distanceDisplayCondition=this.distanceDisplayCondition,e.nodeTransformations=this.nodeTransformations,e.articulations=this.articulations,e.clippingPlanes=this.clippingPlanes,e.customShader=this.customShader,e):new Qq(this)},Qq.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.uri=Object(o["a"])(this.uri,e.uri),this.scale=Object(o["a"])(this.scale,e.scale),this.minimumPixelSize=Object(o["a"])(this.minimumPixelSize,e.minimumPixelSize),this.maximumScale=Object(o["a"])(this.maximumScale,e.maximumScale),this.incrementallyLoadTextures=Object(o["a"])(this.incrementallyLoadTextures,e.incrementallyLoadTextures),this.runAnimations=Object(o["a"])(this.runAnimations,e.runAnimations),this.clampAnimations=Object(o["a"])(this.clampAnimations,e.clampAnimations),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.silhouetteColor=Object(o["a"])(this.silhouetteColor,e.silhouetteColor),this.silhouetteSize=Object(o["a"])(this.silhouetteSize,e.silhouetteSize),this.color=Object(o["a"])(this.color,e.color),this.colorBlendMode=Object(o["a"])(this.colorBlendMode,e.colorBlendMode),this.colorBlendAmount=Object(o["a"])(this.colorBlendAmount,e.colorBlendAmount),this.imageBasedLightingFactor=Object(o["a"])(this.imageBasedLightingFactor,e.imageBasedLightingFactor),this.lightColor=Object(o["a"])(this.lightColor,e.lightColor),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.clippingPlanes=Object(o["a"])(this.clippingPlanes,e.clippingPlanes),this.customShader=Object(o["a"])(this.customShader,e.customShader);const t=e.nodeTransformations;if(Object(r["a"])(t)){const e=this.nodeTransformations;Object(r["a"])(e)?e.merge(t):this.nodeTransformations=new Xq(t,Kq)}const n=e.articulations;if(Object(r["a"])(n)){const e=this.articulations;Object(r["a"])(e)?e.merge(n):this.articulations=new Xq(n)}};var Zq=Qq;function eY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._maximumScreenSpaceError=void 0,this._maximumScreenSpaceErrorSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(eY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),uri:XM("uri"),maximumScreenSpaceError:XM("maximumScreenSpaceError")}),eY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.uri=this.uri,e.maximumScreenSpaceError=this.maximumScreenSpaceError,e):new eY(this)},eY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.uri=Object(o["a"])(this.uri,e.uri),this.maximumScreenSpaceError=Object(o["a"])(this.maximumScreenSpaceError,e.maximumScreenSpaceError)};var tY=eY;function nY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(nY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),leadTime:XM("leadTime"),trailTime:XM("trailTime"),width:XM("width"),resolution:XM("resolution"),material:Oq("material"),distanceDisplayCondition:XM("distanceDisplayCondition")}),nY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.leadTime=this.leadTime,e.trailTime=this.trailTime,e.width=this.width,e.resolution=this.resolution,e.material=this.material,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new nY(this)},nY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.leadTime=Object(o["a"])(this.leadTime,e.leadTime),this.trailTime=Object(o["a"])(this.trailTime,e.trailTime),this.width=Object(o["a"])(this.width,e.width),this.resolution=Object(o["a"])(this.resolution,e.resolution),this.material=Object(o["a"])(this.material,e.material),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var iY=nY;function oY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(oY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),plane:XM("plane"),dimensions:XM("dimensions"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),oY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.plane=this.plane,e.dimensions=this.dimensions,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new oY(this)},oY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.plane=Object(o["a"])(this.plane,e.plane),this.dimensions=Object(o["a"])(this.dimensions,e.dimensions),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var rY=oY;function aY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(aY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),pixelSize:XM("pixelSize"),heightReference:XM("heightReference"),color:XM("color"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),scaleByDistance:XM("scaleByDistance"),translucencyByDistance:XM("translucencyByDistance"),distanceDisplayCondition:XM("distanceDisplayCondition"),disableDepthTestDistance:XM("disableDepthTestDistance")}),aY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.pixelSize=this.pixelSize,e.heightReference=this.heightReference,e.color=this.color,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.scaleByDistance=this.scaleByDistance,e.translucencyByDistance=this._translucencyByDistance,e.distanceDisplayCondition=this.distanceDisplayCondition,e.disableDepthTestDistance=this.disableDepthTestDistance,e):new aY(this)},aY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.pixelSize=Object(o["a"])(this.pixelSize,e.pixelSize),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.color=Object(o["a"])(this.color,e.color),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.scaleByDistance=Object(o["a"])(this.scaleByDistance,e.scaleByDistance),this.translucencyByDistance=Object(o["a"])(this._translucencyByDistance,e.translucencyByDistance),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.disableDepthTestDistance=Object(o["a"])(this.disableDepthTestDistance,e.disableDepthTestDistance)};var sY=aY;function cY(e){return Array.isArray(e)&&(e=new aS(e)),new GM(e)}function lY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._hierarchy=void 0,this._hierarchySubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this._textureCoordinates=void 0,this._textureCoordinatesSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(lY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),hierarchy:XM("hierarchy",void 0,cY),height:XM("height"),heightReference:XM("heightReference"),extrudedHeight:XM("extrudedHeight"),extrudedHeightReference:XM("extrudedHeightReference"),stRotation:XM("stRotation"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),perPositionHeight:XM("perPositionHeight"),closeTop:XM("closeTop"),closeBottom:XM("closeBottom"),arcType:XM("arcType"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition"),classificationType:XM("classificationType"),zIndex:XM("zIndex"),textureCoordinates:XM("textureCoordinates")}),lY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.hierarchy=this.hierarchy,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.perPositionHeight=this.perPositionHeight,e.closeTop=this.closeTop,e.closeBottom=this.closeBottom,e.arcType=this.arcType,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e.textureCoordinates=this.textureCoordinates,e):new lY(this)},lY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.hierarchy=Object(o["a"])(this.hierarchy,e.hierarchy),this.height=Object(o["a"])(this.height,e.height),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.extrudedHeight=Object(o["a"])(this.extrudedHeight,e.extrudedHeight),this.extrudedHeightReference=Object(o["a"])(this.extrudedHeightReference,e.extrudedHeightReference),this.stRotation=Object(o["a"])(this.stRotation,e.stRotation),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.perPositionHeight=Object(o["a"])(this.perPositionHeight,e.perPositionHeight),this.closeTop=Object(o["a"])(this.closeTop,e.closeTop),this.closeBottom=Object(o["a"])(this.closeBottom,e.closeBottom),this.arcType=Object(o["a"])(this.arcType,e.arcType),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.classificationType=Object(o["a"])(this.classificationType,e.classificationType),this.zIndex=Object(o["a"])(this.zIndex,e.zIndex),this.textureCoordinates=Object(o["a"])(this.textureCoordinates,e.textureCoordinates)};var uY=lY;function hY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._depthFailMaterial=void 0,this._depthFailMaterialSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._clampToGround=void 0,this._clampToGroundSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(hY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),positions:XM("positions"),width:XM("width"),granularity:XM("granularity"),material:Oq("material"),depthFailMaterial:Oq("depthFailMaterial"),arcType:XM("arcType"),clampToGround:XM("clampToGround"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition"),classificationType:XM("classificationType"),zIndex:XM("zIndex")}),hY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.positions=this.positions,e.width=this.width,e.granularity=this.granularity,e.material=this.material,e.depthFailMaterial=this.depthFailMaterial,e.arcType=this.arcType,e.clampToGround=this.clampToGround,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new hY(this)},hY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.positions=Object(o["a"])(this.positions,e.positions),this.width=Object(o["a"])(this.width,e.width),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.material=Object(o["a"])(this.material,e.material),this.depthFailMaterial=Object(o["a"])(this.depthFailMaterial,e.depthFailMaterial),this.arcType=Object(o["a"])(this.arcType,e.arcType),this.clampToGround=Object(o["a"])(this.clampToGround,e.clampToGround),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.classificationType=Object(o["a"])(this.classificationType,e.classificationType),this.zIndex=Object(o["a"])(this.zIndex,e.zIndex)};var dY=hY;function fY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._shape=void 0,this._shapeSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubsription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(fY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),positions:XM("positions"),shape:XM("shape"),cornerType:XM("cornerType"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),fY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.positions=this.positions,e.shape=this.shape,e.cornerType=this.cornerType,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new fY(this)},fY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.positions=Object(o["a"])(this.positions,e.positions),this.shape=Object(o["a"])(this.shape,e.shape),this.cornerType=Object(o["a"])(this.cornerType,e.cornerType),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var pY=fY;function mY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(mY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),coordinates:XM("coordinates"),height:XM("height"),heightReference:XM("heightReference"),extrudedHeight:XM("extrudedHeight"),extrudedHeightReference:XM("extrudedHeightReference"),rotation:XM("rotation"),stRotation:XM("stRotation"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition"),classificationType:XM("classificationType"),zIndex:XM("zIndex")}),mY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.coordinates=this.coordinates,e.height=this.height,e.heightReference=this.heightReference,e.extrudedHeight=this.extrudedHeight,e.extrudedHeightReference=this.extrudedHeightReference,e.rotation=this.rotation,e.stRotation=this.stRotation,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e.classificationType=this.classificationType,e.zIndex=this.zIndex,e):new mY(this)},mY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.coordinates=Object(o["a"])(this.coordinates,e.coordinates),this.height=Object(o["a"])(this.height,e.height),this.heightReference=Object(o["a"])(this.heightReference,e.heightReference),this.extrudedHeight=Object(o["a"])(this.extrudedHeight,e.extrudedHeight),this.extrudedHeightReference=Object(o["a"])(this.extrudedHeightReference,e.extrudedHeightReference),this.rotation=Object(o["a"])(this.rotation,e.rotation),this.stRotation=Object(o["a"])(this.stRotation,e.stRotation),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition),this.classificationType=Object(o["a"])(this.classificationType,e.classificationType),this.zIndex=Object(o["a"])(this.zIndex,e.zIndex)};var _Y=mY;function gY(e){this._definitionChanged=new dn["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(o["a"])(e,o["a"].EMPTY_OBJECT))}Object.defineProperties(gY.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:XM("show"),positions:XM("positions"),minimumHeights:XM("minimumHeights"),maximumHeights:XM("maximumHeights"),granularity:XM("granularity"),fill:XM("fill"),material:Oq("material"),outline:XM("outline"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth"),shadows:XM("shadows"),distanceDisplayCondition:XM("distanceDisplayCondition")}),gY.prototype.clone=function(e){return Object(r["a"])(e)?(e.show=this.show,e.positions=this.positions,e.minimumHeights=this.minimumHeights,e.maximumHeights=this.maximumHeights,e.granularity=this.granularity,e.fill=this.fill,e.material=this.material,e.outline=this.outline,e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.shadows=this.shadows,e.distanceDisplayCondition=this.distanceDisplayCondition,e):new gY(this)},gY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.show=Object(o["a"])(this.show,e.show),this.positions=Object(o["a"])(this.positions,e.positions),this.minimumHeights=Object(o["a"])(this.minimumHeights,e.minimumHeights),this.maximumHeights=Object(o["a"])(this.maximumHeights,e.maximumHeights),this.granularity=Object(o["a"])(this.granularity,e.granularity),this.fill=Object(o["a"])(this.fill,e.fill),this.material=Object(o["a"])(this.material,e.material),this.outline=Object(o["a"])(this.outline,e.outline),this.outlineColor=Object(o["a"])(this.outlineColor,e.outlineColor),this.outlineWidth=Object(o["a"])(this.outlineWidth,e.outlineWidth),this.shadows=Object(o["a"])(this.shadows,e.shadows),this.distanceDisplayCondition=Object(o["a"])(this.distanceDisplayCondition,e.distanceDisplayCondition)};var bY=gY;const yY=new I;function vY(e){return new Sq(e)}function OY(e){return XM(e,void 0,vY)}function AY(e,t){return XM(e,void 0,(function(e){return e instanceof t?e:new t(e)}))}function wY(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=e.id;Object(r["a"])(t)||(t=ML()),this._availability=void 0,this._id=t,this._definitionChanged=new dn["a"],this._name=e.name,this._show=Object(o["a"])(e.show,!0),this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=e.parent,this.merge(e)}function TY(e,t,n){const i=t.length;for(let o=0;o<i;o++){const e=t[o],i=e._show,r=!n&&i,a=n&&i;r!==a&&TY(e,e._children,n)}e._definitionChanged.raiseEvent(e,"isShowing",n,!n)}Object.defineProperties(wY.prototype,{availability:Rq("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Rq("name"),show:{get:function(){return this._show},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(e===this._show)return;const t=this.isShowing;this._show=e;const n=this.isShowing;t!==n&&TY(this,this._children,n),this._definitionChanged.raiseEvent(this,"show",e,!e)}},isShowing:{get:function(){return this._show&&(!Object(r["a"])(this.entityCollection)||this.entityCollection.show)&&(!Object(r["a"])(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(e){const t=this._parent;if(t===e)return;const n=this.isShowing;if(Object(r["a"])(t)){const e=t._children.indexOf(this);t._children.splice(e,1)}this._parent=e,Object(r["a"])(e)&&e._children.push(this);const i=this.isShowing;n!==i&&TY(this,this._children,i),this._definitionChanged.raiseEvent(this,"parent",e,t)}},propertyNames:{get:function(){return this._propertyNames}},billboard:AY("billboard",$M),box:AY("box",wq),corridor:AY("corridor",Dq),cylinder:AY("cylinder",Mq),description:XM("description"),ellipse:AY("ellipse",Bq),ellipsoid:AY("ellipsoid",zq),label:AY("label",Uq),model:AY("model",Zq),tileset:AY("tileset",tY),orientation:XM("orientation"),path:AY("path",iY),plane:AY("plane",rY),point:AY("point",sY),polygon:AY("polygon",uY),polyline:AY("polyline",dY),polylineVolume:AY("polylineVolume",pY),properties:AY("properties",Xq),position:OY("position"),rectangle:AY("rectangle",_Y),viewFrom:XM("viewFrom"),wall:AY("wall",bY)}),wY.prototype.isAvailable=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._availability;return!Object(r["a"])(t)||t.contains(e)},wY.prototype.addProperty=function(e){const t=this._propertyNames;if(!Object(r["a"])(e))throw new a["a"]("propertyName is required.");if(-1!==t.indexOf(e))throw new a["a"](`${e} is already a registered property.`);if(e in this)throw new a["a"](`${e} is a reserved property name.`);t.push(e),Object.defineProperty(this,e,Rq(e,!0))},wY.prototype.removeProperty=function(e){const t=this._propertyNames,n=t.indexOf(e);if(!Object(r["a"])(e))throw new a["a"]("propertyName is required.");if(-1===n)throw new a["a"](`${e} is not a registered property.`);this._propertyNames.splice(n,1),delete this[e]},wY.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.name=Object(o["a"])(this.name,e.name),this.availability=Object(o["a"])(this.availability,e.availability);const t=this._propertyNames,n=Object(r["a"])(e._propertyNames)?e._propertyNames:Object.keys(e),i=n.length;for(let o=0;o<i;o++){const i=n[o];if("parent"===i||"name"===i||"availability"===i)continue;const a=this[i],s=e[i];Object(r["a"])(a)||-1!==t.indexOf(i)||this.addProperty(i),Object(r["a"])(s)&&(Object(r["a"])(a)?Object(r["a"])(a.merge)&&a.merge(s):Object(r["a"])(s.merge)&&Object(r["a"])(s.clone)?this[i]=s.clone():this[i]=s)}};const CY=new ce,EY=new g,xY=new Kr;wY.prototype.computeModelMatrix=function(e,t){i["a"].typeOf.object("time",e);const n=aN.getValueOrUndefined(this._position,e,EY);if(!Object(r["a"])(n))return;const o=aN.getValueOrUndefined(this._orientation,e,xY);return t=Object(r["a"])(o)?Me.fromRotationTranslation(ce.fromQuaternion(o,CY),n,t):ka.eastNorthUpToFixedFrame(n,void 0,t),t},wY.prototype.computeModelMatrixForHeightReference=function(e,t,n,o,a){i["a"].typeOf.object("time",e);const c=aN.getValueOrDefault(t,e,QM.NONE);let l=aN.getValueOrUndefined(this._position,e,EY);if(c===QM.NONE||!Object(r["a"])(l)||g.equalsEpsilon(l,g.ZERO,s["a"].EPSILON8))return this.computeModelMatrix(e,a);const u=o.cartesianToCartographic(l,yY);c===QM.CLAMP_TO_GROUND?u.height=n:u.height+=n,l=o.cartographicToCartesian(u,l);const h=aN.getValueOrUndefined(this._orientation,e,xY);return a=Object(r["a"])(h)?Me.fromRotationTranslation(ce.fromQuaternion(h,CY),l,a):ka.eastNorthUpToFixedFrame(l,void 0,a),a},wY.supportsMaterialsforEntitiesOnTerrain=function(e){return kW.supportsMaterials(e)},wY.supportsPolylinesOnTerrain=function(e){return fq.isSupported(e)};var SY=wY;const IY=new oF(Dm.WHITE),DY=new GM(!0),PY=new GM(!0),jY=new GM(!1),RY=new GM(Dm.BLACK),LY=new GM(DH.DISABLED),MY=new GM(new Sv),NY=new GM(DV.BOTH);function BY(e){i["a"].defined("options.entity",e.entity),i["a"].defined("options.scene",e.scene),i["a"].defined("options.geometryOptions",e.geometryOptions),i["a"].defined("options.geometryPropertyName",e.geometryPropertyName),i["a"].defined("options.observedPropertyNames",e.observedPropertyNames);const t=e.entity,n=e.geometryPropertyName;this._entity=t,this._scene=e.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new dn["a"],this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=e.geometryOptions,this._geometryPropertyName=n,this._id=`${n}-${t.id}`,this._observedPropertyNames=e.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=SY.supportsMaterialsforEntitiesOnTerrain(e.scene)}Object.defineProperties(BY.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!Object(r["a"])(this._entity.availability)&&aN.isConstant(this._showProperty)&&aN.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!Object(r["a"])(this._entity.availability)&&aN.isConstant(this._showProperty)&&aN.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),BY.prototype.isOutlineVisible=function(e){const t=this._entity,n=this._outlineEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e);return Object(o["a"])(n,!1)},BY.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e);return Object(o["a"])(n,!1)},BY.prototype.createFillGeometryInstance=a["a"].throwInstantiationError,BY.prototype.createOutlineGeometryInstance=a["a"].throwInstantiationError,BY.prototype.isDestroyed=function(){return!1},BY.prototype.destroy=function(){Wc(this)},BY.prototype._isHidden=function(e,t){const n=t.show;return Object(r["a"])(n)&&n.isConstant&&!n.getValue(oE.MINIMUM_VALUE)},BY.prototype._isOnTerrain=function(e,t){return!1},BY.prototype._getIsClosed=function(e){return!0},BY.prototype._isDynamic=a["a"].throwInstantiationError,BY.prototype._setStaticOptions=a["a"].throwInstantiationError,BY.prototype._onEntityPropertyChanged=function(e,t,n,i){if(-1===this._observedPropertyNames.indexOf(t))return;const a=this._entity[this._geometryPropertyName];if(!Object(r["a"])(a))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const s=a.fill,c=!Object(r["a"])(s)||!s.isConstant||s.getValue(oE.MINIMUM_VALUE),l=a.outline;let u=Object(r["a"])(l);if(u&&l.isConstant&&(u=l.getValue(oE.MINIMUM_VALUE)),!c&&!u)return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));const h=a.show;if(this._isHidden(e,a))return void((this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this)));this._materialProperty=Object(o["a"])(a.material,IY),this._fillProperty=Object(o["a"])(s,PY),this._showProperty=Object(o["a"])(h,DY),this._showOutlineProperty=Object(o["a"])(a.outline,jY),this._outlineColorProperty=u?Object(o["a"])(a.outlineColor,RY):void 0,this._shadowsProperty=Object(o["a"])(a.shadows,LY),this._distanceDisplayConditionProperty=Object(o["a"])(a.distanceDisplayCondition,MY),this._classificationTypeProperty=Object(o["a"])(a.classificationType,NY),this._fillEnabled=c;const d=this._isOnTerrain(e,a)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof oF);if(u&&d&&(ab(ab.geometryOutlines),u=!1),this._onTerrain=d,this._outlineEnabled=u,this._isDynamic(e,a))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(e,a),this._isClosed=this._getIsClosed(this._options);const t=a.outlineWidth;this._outlineWidth=Object(r["a"])(t)?t.getValue(oE.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}},BY.prototype.createDynamicUpdater=function(e,t){if(i["a"].defined("primitives",e),i["a"].defined("groundPrimitives",t),!this._dynamic)throw new a["a"]("This instance does not represent dynamic geometry.");return new this.constructor.DynamicGeometryUpdater(this,e,t)};var FY=BY;function zY(e,t){this._callback=void 0,this._isConstant=void 0,this._definitionChanged=new dn["a"],this.setCallback(e,t)}Object.defineProperties(zY.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}}),zY.prototype.getValue=function(e,t){return this._callback(e,t)},zY.prototype.setCallback=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("callback is required.");if(!Object(r["a"])(t))throw new a["a"]("isConstant is required.");const n=this._callback!==e||this._isConstant!==t;this._callback=e,this._isConstant=t,n&&this._definitionChanged.raiseEvent(this)},zY.prototype.equals=function(e){return this===e||e instanceof zY&&this._callback===e._callback&&this._isConstant===e._isConstant};var kY=zY;const UY=new g,VY=new I;function HY(e,t,n,o){i["a"].defined("scene",e),i["a"].defined("positionProperty",t),this._scene=e,this._heightReference=n,this._extrudedHeightReference=o,this._positionProperty=t,this._position=new g,this._cartographicPosition=new I,this._normal=new g,this._definitionChanged=new dn["a"],this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;const a=this;if(Object(r["a"])(e.globe)&&(this._removeEventListener=e.terrainProviderChanged.addEventListener((function(){a._updateClamping()})),this._removeModeListener=e.morphComplete.addEventListener((function(){a._updateClamping()}))),t.isConstant){const n=t.getValue(oE.MINIMUM_VALUE,UY);if(!Object(r["a"])(n)||g.equals(n,g.ZERO)||!Object(r["a"])(e.globe))return;this._position=g.clone(n,this._position),this._updateClamping(),this._normal=e.globe.ellipsoid.geodeticSurfaceNormal(n,this._normal)}}Object.defineProperties(HY.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),HY.prototype._updateClamping=function(){Object(r["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc();const e=this._scene,t=e.globe,n=this._position;if(!Object(r["a"])(t)||g.equals(n,g.ZERO))return void(this._terrainHeight=0);const i=t.ellipsoid,o=t._surface,a=this,s=i.cartesianToCartographic(n,this._cartographicPosition),c=t.getHeight(s);function l(t){if(e.mode===SH.SCENE3D){const e=i.cartesianToCartographic(t,VY);a._terrainHeight=e.height}else a._terrainHeight=t.x;a.definitionChanged.raiseEvent()}Object(r["a"])(c)?this._terrainHeight=c:this._terrainHeight=0,this._removeCallbackFunc=o.updateHeight(s,l)},HY.prototype.getValue=function(e,t){const n=aN.getValueOrDefault(this._heightReference,e,QM.NONE),i=aN.getValueOrDefault(this._extrudedHeightReference,e,QM.NONE);if(n===QM.NONE&&i!==QM.RELATIVE_TO_GROUND)return this._position=g.clone(g.ZERO,this._position),g.clone(g.ZERO,t);if(this._positionProperty.isConstant)return g.multiplyByScalar(this._normal,this._terrainHeight,t);const o=this._scene,a=this._positionProperty.getValue(e,UY);if(!Object(r["a"])(a)||g.equals(a,g.ZERO)||!Object(r["a"])(o.globe))return g.clone(g.ZERO,t);if(g.equalsEpsilon(this._position,a,s["a"].EPSILON10))return g.multiplyByScalar(this._normal,this._terrainHeight,t);this._position=g.clone(a,this._position),this._updateClamping();const c=o.globe.ellipsoid.geodeticSurfaceNormal(a,this._normal);return g.multiplyByScalar(c,this._terrainHeight,t)},HY.prototype.isDestroyed=function(){return!1},HY.prototype.destroy=function(){return Object(r["a"])(this._removeEventListener)&&this._removeEventListener(),Object(r["a"])(this._removeModeListener)&&this._removeModeListener(),Object(r["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc(),Wc(this)};var GY=HY;function WY(e,t,n,i){if(FY.prototype._onEntityPropertyChanged.call(this,e,t,n,i),-1===this._observedPropertyNames.indexOf(t))return;const o=this._entity[this._geometryPropertyName];if(!Object(r["a"])(o))return;Object(r["a"])(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const a=o.heightReference;if(Object(r["a"])(a)){const e=new kY(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new GY(this._scene,e,a)}}var qY=WY;const YY=g.ZERO,XY=new g,KY=new g,$Y=new Dm;function JY(e){this.id=e,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function QY(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new JY(e),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(e,"box",e.box,void 0)}function ZY(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(QY.prototype=Object.create(FY.prototype),QY.prototype.constructor=QY),Object.defineProperties(QY.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),QY.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),s=this._distanceDisplayConditionProperty.getValue(e),c=Dv.fromDistanceDisplayCondition(s),l={show:o,distanceDisplayCondition:c,color:void 0,offset:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,$Y)),Object(r["a"])(t)||(t=Dm.WHITE),l.color=jm.fromColor(t)}return Object(r["a"])(this._options.offsetAttribute)&&(l.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,YY,XY))),new Sd({id:t,geometry:eh.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:l})},QY.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,$Y),s=this._distanceDisplayConditionProperty.getValue(e),c={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(s),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(c.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,YY,XY))),new Sd({id:t,geometry:ah.fromDimensions(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:c})},QY.prototype._computeCenter=function(e,t){return aN.getValueOrUndefined(this._entity.position,e,t)},QY.prototype._isHidden=function(e,t){return!Object(r["a"])(t.dimensions)||!Object(r["a"])(e.position)||FY.prototype._isHidden.call(this,e,t)},QY.prototype._isDynamic=function(e,t){return!e.position.isConstant||!aN.isConstant(e.orientation)||!t.dimensions.isConstant||!aN.isConstant(t.outlineWidth)},QY.prototype._setStaticOptions=function(e,t){const n=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof oF?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,i.dimensions=t.dimensions.getValue(oE.MINIMUM_VALUE,i.dimensions),i.offsetAttribute=n!==QM.NONE?Gu.ALL:void 0},QY.prototype._onEntityPropertyChanged=qY,QY.DynamicGeometryUpdater=ZY,Object(r["a"])(Object.create)&&(ZY.prototype=Object.create(GW.prototype),ZY.prototype.constructor=ZY),ZY.prototype._isHidden=function(e,t,n){const i=aN.getValueOrUndefined(e.position,n,KY),o=this._options.dimensions;return!Object(r["a"])(i)||!Object(r["a"])(o)||GW.prototype._isHidden.call(this,e,t,n)},ZY.prototype._setOptions=function(e,t,n){const i=aN.getValueOrDefault(t.heightReference,n,QM.NONE),o=this._options;o.dimensions=aN.getValueOrUndefined(t.dimensions,n,o.dimensions),o.offsetAttribute=i!==QM.NONE?Gu.ALL:void 0};var eX=QY;function tX(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=Object(o["a"])(e.persists,!1),this.pass=hF.COMPUTE,this.owner=e.owner}tX.prototype.execute=function(e){e.execute(this)};var nX=tX,iX="varying vec2 v_textureCoordinates;\n\nuniform float originalSize;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D texture3;\nuniform sampler2D texture4;\nuniform sampler2D texture5;\n\nconst float yMipLevel1 = 1.0 - (1.0 / pow(2.0, 1.0));\nconst float yMipLevel2 = 1.0 - (1.0 / pow(2.0, 2.0));\nconst float yMipLevel3 = 1.0 - (1.0 / pow(2.0, 3.0));\nconst float yMipLevel4 = 1.0 - (1.0 / pow(2.0, 4.0));\n\nvoid main()\n{\n    vec2 uv = v_textureCoordinates;\n    vec2 textureSize = vec2(originalSize * 1.5 + 2.0, originalSize);\n    vec2 pixel = 1.0 / textureSize;\n\n    float mipLevel = 0.0;\n\n    if (uv.x - pixel.x > (textureSize.y / textureSize.x))\n    {\n        mipLevel = 1.0;\n        if (uv.y - pixel.y > yMipLevel1)\n        {\n            mipLevel = 2.0;\n            if (uv.y - pixel.y * 3.0 > yMipLevel2)\n            {\n                mipLevel = 3.0;\n                if (uv.y - pixel.y * 5.0 > yMipLevel3)\n                {\n                    mipLevel = 4.0;\n                    if (uv.y - pixel.y * 7.0 > yMipLevel4)\n                    {\n                        mipLevel = 5.0;\n                    }\n                }\n            }\n        }\n    }\n\n    if (mipLevel > 0.0)\n    {\n        float scale = pow(2.0, mipLevel);\n\n        uv.y -= (pixel.y * (mipLevel - 1.0) * 2.0);\n        uv.x *= ((textureSize.x - 2.0) / textureSize.y);\n\n        uv.x -= 1.0 + pixel.x;\n        uv.y -= (1.0 - (1.0 / pow(2.0, mipLevel - 1.0)));\n        uv *= scale;\n    }\n    else\n    {\n        uv.x *= (textureSize.x / textureSize.y);\n    }\n\n    if(mipLevel == 0.0)\n    {\n        gl_FragColor = texture2D(texture0, uv);\n    }\n    else if(mipLevel == 1.0)\n    {\n        gl_FragColor = texture2D(texture1, uv);\n    }\n    else if(mipLevel == 2.0)\n    {\n        gl_FragColor = texture2D(texture2, uv);\n    }\n    else if(mipLevel == 3.0)\n    {\n        gl_FragColor = texture2D(texture3, uv);\n    }\n    else if(mipLevel == 4.0)\n    {\n        gl_FragColor = texture2D(texture4, uv);\n    }\n    else if(mipLevel == 5.0)\n    {\n        gl_FragColor = texture2D(texture5, uv);\n    }\n    else\n    {\n        gl_FragColor = vec4(0.0);\n    }\n}\n",oX="varying vec3 v_cubeMapCoordinates;\nuniform samplerCube cubeMap;\n\nvoid main()\n{\n    vec4 rgba = textureCube(cubeMap, v_cubeMapCoordinates);\n    #ifdef RGBA_NORMALIZED\n        gl_FragColor = vec4(rgba.rgb, 1.0);\n    #else\n        float m = rgba.a * 16.0;\n        vec3 r = rgba.rgb * m;\n        gl_FragColor = vec4(r * r, 1.0);\n    #endif\n}\n",rX="attribute vec4 position;\nattribute vec3 cubeMapCoordinates;\n\nvarying vec3 v_cubeMapCoordinates;\n\nvoid main()\n{\n    gl_Position = position;\n    v_cubeMapCoordinates = cubeMapCoordinates;\n}\n";function aX(e){this._url=e,this._cubeMapBuffers=void 0,this._cubeMaps=void 0,this._texture=void 0,this._mipTextures=void 0,this._va=void 0,this._sp=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1;const t=this;this._readyPromise=new Promise((e,n)=>{t._completeLoadFromCache=t=>{OX(this),this._texture=t,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0,e()},t._failLoad=e=>{n(e)},t._completeLoad=()=>{this._ready=!0,e()}})}Object.defineProperties(aX.prototype,{url:{get:function(){return this._url}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}}}),aX.isSupported=function(e){return e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat};const sX=new g(1,0,0),cX=new g(0,0,1),lX=new g(-1,0,0),uX=new g(0,0,-1),hX=new g(0,1,0),dX=new g(0,-1,0),fX=[hX,lX,cX,dX,sX,hX,uX,hX,hX],pX=fX.length,mX=new Float32Array(3*pX);let _X=0;for(let Set=0;Set<pX;++Set,_X+=3)g.pack(fX[Set],mX,_X);const gX=new Float32Array([-1,1,-1,0,0,1,0,0,1,0,1,1,0,-1,-1,-1,1,-1]),bX=new Uint16Array([0,1,2,2,3,1,7,6,1,3,6,1,2,5,4,3,4,2,4,8,6,3,4,6]);function yX(e){const t=NV.createVertexBuffer({context:e,typedArray:gX,usage:LV.STATIC_DRAW}),n=NV.createVertexBuffer({context:e,typedArray:mX,usage:LV.STATIC_DRAW}),i=NV.createIndexBuffer({context:e,typedArray:bX,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),o=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:Ks.FLOAT},{index:1,vertexBuffer:n,componentsPerAttribute:3,componentDatatype:Ks.FLOAT}];return new WV({context:e,attributes:o,indexBuffer:i})}function vX(e){return function(){return e}}function OX(e){let t,n;e._va=e._va&&e._va.destroy(),e._sp=e._sp&&e._sp.destroy();const i=e._cubeMaps;if(Object(r["a"])(i))for(n=i.length,t=0;t<n;++t)i[t].destroy();const o=e._mipTextures;if(Object(r["a"])(o))for(n=o.length,t=0;t<n;++t)o[t].destroy();e._va=void 0,e._sp=void 0,e._cubeMaps=void 0,e._cubeMapBuffers=void 0,e._mipTextures=void 0}aX.prototype.update=function(e){const t=e.context;if(!aX.isSupported(t))return;if(Object(r["a"])(this._texture)&&Object(r["a"])(this._va)&&OX(this),Object(r["a"])(this._texture))return;if(!Object(r["a"])(this._texture)&&!this._loading){const t=e.context.textureCache.getTexture(this._url);Object(r["a"])(t)&&this._completeLoadFromCache(t)}const n=this._cubeMapBuffers;if(!Object(r["a"])(n)&&!this._loading){const e=this;sM(this._url).then((function(t){e._cubeMapBuffers=t,e._loading=!1})).catch((function(t){e._failLoad(t)})),this._loading=!0}if(!Object(r["a"])(this._cubeMapBuffers))return;const i=[];let o=n[0].positiveX.pixelDatatype;Object(r["a"])(o)?i.push("RGBA_NORMALIZED"):o=t.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT;const a=fx.RGBA,s=new EV({defines:i,sources:[oX]});this._va=yX(t),this._sp=Nz.fromCache({context:t,vertexShaderSource:rX,fragmentShaderSource:s,attributeLocations:{position:0,cubeMapCoordinates:1}});const c=Math.min(n.length,6);this._maximumMipmapLevel=c-1;const l=this._cubeMaps=new Array(c),u=this._mipTextures=new Array(c),h=2*n[0].positiveX.width,d={originalSize:function(){return h}};for(let r=0;r<c;++r){const i=n[r].positiveY;n[r].positiveY=n[r].negativeY,n[r].negativeY=i;const s=l[r]=new sB({context:t,source:n[r],pixelDatatype:o}),c=2*l[r].width,h=u[r]=new lB({context:t,width:c,height:c,pixelDatatype:o,pixelFormat:a}),f=new nX({vertexArray:this._va,shaderProgram:this._sp,uniformMap:{cubeMap:vX(s)},outputTexture:h,persists:!0,owner:this});e.commandList.push(f),d[`texture${r}`]=vX(h)}this._texture=new lB({context:t,width:1.5*h+2,height:h,pixelDatatype:o,pixelFormat:a}),this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture);const f=new nX({fragmentShaderSource:iX,uniformMap:d,outputTexture:this._texture,persists:!1,owner:this});e.commandList.push(f),this._completeLoad()},aX.prototype.isDestroyed=function(){return!1},aX.prototype.destroy=function(){return OX(this),this._texture=this._texture&&this._texture.destroy(),Wc(this)};var AX=aX;function wX(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(r["a"])(e.imageBasedLightingFactor)?Gt.clone(e.imageBasedLightingFactor):new Gt(1,1);i["a"].typeOf.object("options.imageBasedLightingFactor",t),i["a"].typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.x",t.x,0),i["a"].typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.x",t.x,1),i["a"].typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.y",t.y,0),i["a"].typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.y",t.y,1),this._imageBasedLightingFactor=t;const n=Object(o["a"])(e.luminanceAtZenith,.2);i["a"].typeOf.number("options.luminanceAtZenith",n),this._luminanceAtZenith=n;const s=e.sphericalHarmonicCoefficients;if(Object(r["a"])(s)&&(!Array.isArray(s)||9!==s.length))throw new a["a"]("options.sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._sphericalHarmonicCoefficients=s,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapAtlas=void 0,this._specularEnvironmentMapAtlasDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousImageBasedLightingFactor=Gt.clone(t),this._previousLuminanceAtZenith=n,this._previousSphericalHarmonicCoefficients=s}function TX(e,t){if(AX.isSupported(t)){if(e._specularEnvironmentMapAtlas=e._specularEnvironmentMapAtlas&&e._specularEnvironmentMapAtlas.destroy(),Object(r["a"])(e._specularEnvironmentMaps)){const t=new AX(e._specularEnvironmentMaps);e._specularEnvironmentMapAtlas=t,t.readyPromise.then((function(){e._specularEnvironmentMapLoaded=!0})).catch((function(e){console.error(`Error loading specularEnvironmentMaps: ${e}`)}))}e._shouldRegenerateShaders=!0}}Object.defineProperties(wX.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){i["a"].typeOf.object("imageBasedLightingFactor",e),i["a"].typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),i["a"].typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),i["a"].typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),i["a"].typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),this._previousImageBasedLightingFactor=Gt.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=Gt.clone(e,this._imageBasedLightingFactor)}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){this._previousLuminanceAtZenith=this._luminanceAtZenith,this._luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if(Object(r["a"])(e)&&(!Array.isArray(e)||9!==e.length))throw new a["a"]("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentMapAtlasDirty=this._specularEnvironmentMapAtlasDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useSphericalHarmonicCoefficients:{get:function(){return Object(r["a"])(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics}},specularEnvironmentMapAtlas:{get:function(){return this._specularEnvironmentMapAtlas}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps}}}),wX.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber)return;this._previousFrameNumber=e.frameNumber;const t=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const n=this._imageBasedLightingFactor,i=this._previousImageBasedLightingFactor;Gt.equals(n,i)||(this._shouldRegenerateShaders=n.x>0&&0===i.x||0===n.x&&i.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||n.y>0&&0===i.y||0===n.y&&i.y>0,this._previousImageBasedLightingFactor=Gt.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._luminanceAtZenith!==this._previousLuminanceAtZenith&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||Object(r["a"])(this._luminanceAtZenith)!==Object(r["a"])(this._previousLuminanceAtZenith),this._previousLuminanceAtZenith=this._luminanceAtZenith),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||Object(r["a"])(this._previousSphericalHarmonicCoefficients)!==Object(r["a"])(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentMapAtlasDirty&&(TX(this,t),this._specularEnvironmentMapAtlasDirty=!1),Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e);const o=!Object(r["a"])(this._specularEnvironmentMapAtlas)&&Object(r["a"])(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,a=!Object(r["a"])(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,s=!Object(r["a"])(this._sphericalHarmonicCoefficients)&&Object(r["a"])(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,c=!Object(r["a"])(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||o||a||s||c,this._useDefaultSpecularMaps=!Object(r["a"])(this._specularEnvironmentMapAtlas)&&Object(r["a"])(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!Object(r["a"])(this._sphericalHarmonicCoefficients)&&Object(r["a"])(e.sphericalHarmonicCoefficients)},wX.prototype.isDestroyed=function(){return!1},wX.prototype.destroy=function(){return this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),Wc(this)};var CX=wX;function EX(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}EX.ALL=Object.freeze(new EX({color:new Dm(0,0,0,0),depth:1,stencil:0})),EX.prototype.execute=function(e,t){e.clear(this,t)};var xX=EX;const SX={X:0,Y:1,Z:2};SX.Y_UP_TO_Z_UP=Me.fromRotationTranslation(ce.fromRotationX(s["a"].PI_OVER_TWO)),SX.Z_UP_TO_Y_UP=Me.fromRotationTranslation(ce.fromRotationX(-s["a"].PI_OVER_TWO)),SX.X_UP_TO_Z_UP=Me.fromRotationTranslation(ce.fromRotationY(-s["a"].PI_OVER_TWO)),SX.Z_UP_TO_X_UP=Me.fromRotationTranslation(ce.fromRotationY(s["a"].PI_OVER_TWO)),SX.X_UP_TO_Y_UP=Me.fromRotationTranslation(ce.fromRotationZ(s["a"].PI_OVER_TWO)),SX.Y_UP_TO_X_UP=Me.fromRotationTranslation(ce.fromRotationZ(-s["a"].PI_OVER_TWO)),SX.fromName=function(e){return i["a"].typeOf.string("name",e),SX[e]};var IX=Object.freeze(SX);function DX(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.metadata",e.metadata),this._metadata=e.metadata}Object.defineProperties(DX.prototype,{metadata:{get:function(){return this._metadata}}});var PX=DX;function jX(e,t,n,i,o,r){this._tileset=e,this._tile=t,this._resource=n,this._contents=[],this._metadata=void 0,this._group=void 0,this._readyPromise=LX(this,i,o,r)}Object.defineProperties(jX.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].group=e}}});const RX=Uint32Array.BYTES_PER_ELEMENT;function LX(e,t,n,i){n=Object(o["a"])(n,0);const a=new Uint8Array(t),s=new DataView(t);n+=RX;const c=s.getUint32(n,!0);if(1!==c)throw new ye["a"](`Only Composite Tile version 1 is supported. Version ${c} is not.`);n+=RX,n+=RX;const l=s.getUint32(n,!0);n+=RX;const u=[],h=e._resource;let d=h.queryParameters.compositeIndex;d=Object(r["a"])(d)?`${d}_`:"";for(let o=0;o<l;++o){const c=eM(a,n),l=s.getUint32(n+2*RX,!0),f=i[c],p=`${d}${o}`,m=h.getDerivedResource({queryParameters:{compositeIndex:p}});if(!Object(r["a"])(f))throw new ye["a"](`Unknown tile content type, ${c}, inside Composite tile`);{const i=f(e._tileset,e._tile,m,t,n);e._contents.push(i),u.push(i.readyPromise)}n+=l}return Promise.all(u).then((function(){return e}))}jX.prototype.hasProperty=function(e,t){return!1},jX.prototype.getFeature=function(e){},jX.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},jX.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},jX.prototype.update=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].update(e,t)},jX.prototype.isDestroyed=function(){return!1},jX.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return Wc(this)};var MX=jX;function NX(e){i["a"].typeOf.number("options.featuresLength",e.featuresLength),i["a"].typeOf.object("options.owner",e.owner),this._id=ML();const t=e.featuresLength;let n,o;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],t>0){const e=Math.min(t,YN.maximumTextureSize),i=Math.ceil(t/YN.maximumTextureSize),r=1/e,a=.5*r,s=1/i,c=.5*s;n=new Gt(e,i),o=new be(r,a,s,c)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=o,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}function BX(e){const t=e._textureDimensions;return t.x*t.y*4}function FX(e){if(!Object(r["a"])(e._batchValues)){const t=BX(e),n=new Uint8Array(t).fill(255);e._batchValues=n}return e._batchValues}function zX(e){if(!Object(r["a"])(e._showAlphaProperties)){const t=2*e._featuresLength,n=new Uint8Array(t).fill(255);e._showAlphaProperties=n}return e._showAlphaProperties}function kX(e,t){if(!Object(r["a"])(e)||e<0||e>=t)throw new a["a"](`batchId is required and between zero and featuresLength - 1 (${t}`-NaN)}Object.defineProperties(NX.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},byteLength:{get:function(){let e=0;return Object(r["a"])(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),Object(r["a"])(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),NX.DEFAULT_COLOR_VALUE=Dm.WHITE,NX.DEFAULT_SHOW_VALUE=!0,NX.prototype.setShow=function(e,t){if(kX(e,this._featuresLength),i["a"].typeOf.bool("show",t),t&&!Object(r["a"])(this._showAlphaProperties))return;const n=zX(this),o=2*e,a=t?255:0;if(n[o]!==a){n[o]=a;const i=FX(this),r=4*e+3;i[r]=t?n[o+1]:0,this._batchValuesDirty=!0}},NX.prototype.setAllShow=function(e){i["a"].typeOf.bool("show",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)},NX.prototype.getShow=function(e){if(kX(e,this._featuresLength),!Object(r["a"])(this._showAlphaProperties))return!0;const t=2*e;return 255===this._showAlphaProperties[t]};const UX=new Array(4);function VX(e,t,n){const i=e._textureDimensions;return new lB({context:t,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,source:{width:i.x,height:i.y,arrayBufferView:n},flipY:!1,sampler:rB.NEAREST})}function HX(e,t){const n=e._featuresLength;if(!Object(r["a"])(e._pickTexture)&&n>0){const i=e._pickIds,o=BX(e),a=new Uint8Array(o),s=e._owner,c=e._statistics;for(let e=0;e<n;++e){const n=t.createPickId(s.getFeature(e));i.push(n);const o=n.color,r=4*e;a[r]=Dm.floatToByte(o.red),a[r+1]=Dm.floatToByte(o.green),a[r+2]=Dm.floatToByte(o.blue),a[r+3]=Dm.floatToByte(o.alpha)}e._pickTexture=VX(e,t,a),Object(r["a"])(c)&&(c.batchTableByteLength+=e._pickTexture.sizeInBytes)}}function GX(e){const t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}NX.prototype.setColor=function(e,t){if(kX(e,this._featuresLength),i["a"].typeOf.object("color",t),Dm.equals(t,NX.DEFAULT_COLOR_VALUE)&&!Object(r["a"])(this._batchValues))return;const n=t.toBytes(UX),o=n[3],a=FX(this),s=4*e,c=zX(this),l=2*e;if(a[s]!==n[0]||a[s+1]!==n[1]||a[s+2]!==n[2]||c[l+1]!==o){a[s]=n[0],a[s+1]=n[1],a[s+2]=n[2];const i=255!==c[l+1],u=0!==c[l];a[s+3]=u?o:0,c[l+1]=o;const h=255!==o;h&&!i?++this._translucentFeaturesLength:!h&&i&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,Object(r["a"])(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}},NX.prototype.setAllColor=function(e){i["a"].typeOf.object("color",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)},NX.prototype.getColor=function(e,t){if(kX(e,this._featuresLength),i["a"].typeOf.object("result",t),!Object(r["a"])(this._batchValues))return Dm.clone(NX.DEFAULT_COLOR_VALUE,t);const n=this._batchValues,o=4*e,a=this._showAlphaProperties,s=2*e;return Dm.fromBytes(n[o],n[o+1],n[o+2],a[s+1],t)},NX.prototype.getPickColor=function(e){return kX(e,this._featuresLength),this._pickIds[e]},NX.prototype.update=function(e,t){const n=t.context;this._defaultTexture=n.defaultTexture;const i=t.passes;(i.pick||i.postProcess)&&HX(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,Object(r["a"])(this._batchTexture)||(this._batchTexture=VX(this,n,this._batchValues),Object(r["a"])(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),GX(this))},NX.prototype.isDestroyed=function(){return!1},NX.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return Wc(this)};var WX=NX;const qX={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YX={SCALAR:void 0,VEC2:Gt,VEC3:g,VEC4:be,MAT2:ic,MAT3:ce,MAT4:Me};function XX(e){const t=e.componentType;let n;n="string"===typeof t?Ks.fromName(t):t;const i=qX[e.type],o=YX[e.type];return{componentsPerAttribute:i,classType:o,createArrayBufferView:function(e,t,o){return Ks.createArrayBufferView(n,e,t,i*o)}}}var KX=XX;function $X(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,this._byteLength=0,i["a"].typeOf.object("options.extension",e.extension),JX(this,e.extension,e.binaryBody),tK(this)}function JX(e,t,n){let i,a,s;const c=t.instancesLength,l=t.classes;let u,h=t.classIds,d=t.parentCounts,f=t.parentIds,p=c,m=0;if(Object(r["a"])(h.byteOffset)&&(h.componentType=Object(o["a"])(h.componentType,Ks.UNSIGNED_SHORT),h.type=rc.SCALAR,s=KX(h),h=s.createArrayBufferView(n.buffer,n.byteOffset+h.byteOffset,c),m+=h.byteLength),Object(r["a"])(d)){for(Object(r["a"])(d.byteOffset)&&(d.componentType=Object(o["a"])(d.componentType,Ks.UNSIGNED_SHORT),d.type=rc.SCALAR,s=KX(d),d=s.createArrayBufferView(n.buffer,n.byteOffset+d.byteOffset,c),m+=d.byteLength),u=new Uint16Array(c),p=0,i=0;i<c;++i)u[i]=p,p+=d[i];m+=u.byteLength}Object(r["a"])(f)&&Object(r["a"])(f.byteOffset)&&(f.componentType=Object(o["a"])(f.componentType,Ks.UNSIGNED_SHORT),f.type=rc.SCALAR,s=KX(f),f=s.createArrayBufferView(n.buffer,n.byteOffset+f.byteOffset,p),m+=f.byteLength);const _=l.length;for(i=0;i<_;++i){const e=l[i].length,t=l[i].instances,o=QX(e,t,n);m+=ZX(o),l[i].instances=Object(qE["a"])(o,t)}const g=new Array(_).fill(0),b=new Uint16Array(c);for(i=0;i<c;++i)a=h[i],b[i]=g[a],++g[a];m+=b.byteLength,e._classes=l,e._classIds=h,e._classIndexes=b,e._parentCounts=d,e._parentIndexes=u,e._parentIds=f,e._byteLength=m}function QX(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const a=t[o],s=a.byteOffset;if(Object(r["a"])(s)){const t=a.componentType,c=a.type;if(!Object(r["a"])(t))throw new ye["a"]("componentType is required.");if(!Object(r["a"])(c))throw new ye["a"]("type is required.");if(!Object(r["a"])(n))throw new ye["a"](`Property ${o} requires a batch table binary.`);const l=KX(a),u=l.componentsPerAttribute,h=l.classType,d=l.createArrayBufferView(n.buffer,n.byteOffset+s,e);Object(r["a"])(i)||(i={}),i[o]={typedArray:d,componentCount:u,type:h}}}return i}function ZX(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}Object.defineProperties($X.prototype,{byteLength:{get:function(){return this._byteLength}}});const eK=[];function tK(e){const t=eK;t.length=0;const n=e._classIds,i=n.length;for(let o=0;o<i;++o)nK(e,o,t)}function nK(e,t,n){const i=e._parentCounts,o=e._parentIds,s=e._parentIndexes,c=e._classIds,l=c.length;if(!Object(r["a"])(o))return;if(t>=l)throw new a["a"](`Parent index ${t} exceeds the total number of instances: ${l}`);if(n.indexOf(t)>-1)throw new a["a"]("Circular dependency detected in the batch table hierarchy.");n.push(t);const u=Object(r["a"])(i)?i[t]:1,h=Object(r["a"])(i)?s[t]:t;for(let r=0;r<u;++r){const i=o[h+r];i!==t&&nK(e,i,n)}n.pop(t)}const iK=[],oK=[];let rK=0;function aK(e,t,n){const i=e._classIds,o=e._parentCounts,a=e._parentIds,s=e._parentIndexes,c=i.length,l=iK;l.length=Math.max(l.length,c);const u=++rK,h=oK;h.length=0,h.push(t);while(h.length>0){if(t=h.pop(),l[t]===u)continue;l[t]=u;const i=n(e,t);if(Object(r["a"])(i))return i;const c=o[t],d=s[t];for(let e=0;e<c;++e){const n=a[d+e];n!==t&&h.push(n)}}}function sK(e,t,n){let i=!0;while(i){const o=n(e,t);if(Object(r["a"])(o))return o;const a=e._parentIds[t];i=a!==t,t=a}}function cK(e,t,n){const i=e._parentCounts,o=e._parentIds;return Object(r["a"])(o)?Object(r["a"])(i)?aK(e,t,n):sK(e,t,n):n(e,t)}function lK(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}function uK(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}$X.prototype.hasProperty=function(e,t){const n=cK(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;if(Object(r["a"])(o[t]))return!0}));return Object(r["a"])(n)},$X.prototype.propertyExists=function(e){const t=this._classes,n=t.length;for(let i=0;i<n;++i){const n=t[i].instances;if(Object(r["a"])(n[e]))return!0}return!1},$X.prototype.getPropertyIds=function(e,t){return t=Object(r["a"])(t)?t:[],t.length=0,cK(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i].instances;for(const r in o)o.hasOwnProperty(r)&&-1===t.indexOf(r)&&t.push(r)})),t},$X.prototype.getProperty=function(e,t){return cK(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i],a=e._classIndexes[n],s=o.instances[t];if(Object(r["a"])(s))return Object(r["a"])(s.typedArray)?lK(s,a):Object(RL["a"])(s[a],!0)}))},$X.prototype.setProperty=function(e,t,n){const i=cK(this,e,(function(i,o){const s=i._classIds[o],c=i._classes[s],l=i._classIndexes[o],u=c.instances[t];if(Object(r["a"])(u)){if(o!==e)throw new a["a"](`Inherited property "${t}" is read-only.`);return Object(r["a"])(u.typedArray)?uK(u,l,n):u[l]=Object(RL["a"])(n,!0),!0}}));return Object(r["a"])(i)},$X.prototype.isClass=function(e,t){const n=cK(this,e,(function(e,n){const i=e._classIds[n],o=e._classes[i];if(o.name===t)return!0}));return Object(r["a"])(n)},$X.prototype.getClassName=function(e){const t=this._classIds[e],n=this._classes[t];return n.name};var hK=$X;const dK={HIGHLIGHT:0,REPLACE:1,MIX:2};var fK=Object.freeze(dK);const pK=WX.DEFAULT_COLOR_VALUE,mK=WX.DEFAULT_SHOW_VALUE;function _K(e,t,n,i,a){let s;this.featuresLength=t,Object(r["a"])(n)&&(s=n.extensions),this._extensions=Object(o["a"])(s,{});const c=gK(n);this._properties=c,this._batchTableHierarchy=bK(this,n,i);const l=yK(t,c,i);this._binaryPropertiesByteLength=vK(l),this._batchTableBinaryProperties=l,this._content=e,this._batchTexture=new WX({featuresLength:t,colorChangedCallback:a,owner:e,statistics:e.tileset.statistics})}function gK(e){const t={};if(!Object(r["a"])(e))return t;for(const n in e)e.hasOwnProperty(n)&&"HIERARCHY"!==n&&"extensions"!==n&&"extras"!==n&&(t[n]=Object(RL["a"])(e[n],!0));return t}function bK(e,t,n){if(!Object(r["a"])(t))return;let i=e._extensions["3DTILES_batch_table_hierarchy"];const o=t.HIERARCHY;return Object(r["a"])(o)&&(_K._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=o,i=o),Object(r["a"])(i)?new hK({extension:i,binaryBody:n}):void 0}function yK(e,t,n){let i;for(const o in t)if(t.hasOwnProperty(o)){const a=t[o],s=a.byteOffset;if(Object(r["a"])(s)){const t=a.componentType,c=a.type;if(!Object(r["a"])(t))throw new ye["a"]("componentType is required.");if(!Object(r["a"])(c))throw new ye["a"]("type is required.");if(!Object(r["a"])(n))throw new ye["a"](`Property ${o} requires a batch table binary.`);const l=KX(a),u=l.componentsPerAttribute,h=l.classType,d=l.createArrayBufferView(n.buffer,n.byteOffset+s,e);Object(r["a"])(i)||(i={}),i[o]={typedArray:d,componentCount:u,type:h}}}return i}function vK(e){if(!Object(r["a"])(e))return 0;let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].typedArray.byteLength);return t}_K._deprecationWarning=IL,Object.defineProperties(_K.prototype,{batchTableByteLength:{get:function(){let e=this._binaryPropertiesByteLength;return Object(r["a"])(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e+=this._batchTexture.byteLength,e}}}),_K.getBinaryProperties=function(e,t,n){return yK(e,t,n)},_K.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},_K.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},_K.prototype.getShow=function(e){return this._batchTexture.getShow(e)},_K.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},_K.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},_K.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},_K.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};const OK=new Dm;function AK(e,t){const n=e.typedArray,i=e.componentCount;return 1===i?n[t]:e.type.unpack(n,t*i)}function wK(e,t,n){const i=e.typedArray,o=e.componentCount;1===o?i[t]=n:e.type.pack(n,i,t*o)}function TK(e,t){if(!Object(r["a"])(e)||e<0||e>=t)throw new a["a"](`batchId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}function CK(e){return 1===e._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}function EK(e,t){return e=EV.replaceMain(e,"tile_main"),t?`${e}uniform float tile_colorBlend; \n`+"void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n":`${e}void tile_color(vec4 tile_featureColor) \n`+"{ \n    tile_main(); \n} \n"}function xK(e,t){const n=`texture2D(${t}`;let i,o=0,r=e.indexOf(n,o);while(r>-1){let t=0;for(let n=r;n<e.length;++n){const o=e.charAt(n);if("("===o)++t;else if(")"===o&&(--t,0===t)){i=n+1;break}}const a=e.slice(r,i),s=`tile_diffuse_final(${a}, tile_diffuse)`;e=e.slice(0,r)+s+e.slice(i),o=r+s.length,r=e.indexOf(n,o)}return e}function SK(e,t,n){if(!Object(r["a"])(t))return EK(e,n);let i=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${t};`);const o=e.match(i);if(!Object(r["a"])(o))return EK(e,n);const a=o[0],s=o[2];e=EV.replaceMain(e,"tile_main"),e=e.replace(a,"");const c="bool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n",l="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n";let u;if("vec3"===s||"vec4"===s){const n="vec3"===s?`vec4(${t}, 1.0)`:t,o="vec3"===s?"tile_diffuse.xyz":"tile_diffuse";i=new RegExp(t,"g"),e=e.replace(i,o),u=`    vec4 source = ${n}; \n`+"    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n"}else"sampler2D"===s&&(e=xK(e,t),u="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return e=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \n${c}${a}\n${e}\n`+"void tile_color(vec4 tile_featureColor) \n"+`{ \n${u}`,n&&(e+=l),e+="} \n",e}function IK(e){const t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===fK.HIGHLIGHT)return 0;if(n===fK.REPLACE)return 1;if(n===fK.MIX)return s["a"].clamp(i,s["a"].EPSILON4,1);throw new a["a"](`Invalid color blend mode "${n}".`)}_K.prototype.applyStyle=function(e){if(!Object(r["a"])(e))return this.setAllColor(pK),void this.setAllShow(mK);const t=this._content,n=this.featuresLength;for(let i=0;i<n;++i){const n=t.getFeature(i),a=Object(r["a"])(e.color)?Object(o["a"])(e.color.evaluateColor(n,OK),pK):pK,s=Object(r["a"])(e.show)?Object(o["a"])(e.show.evaluate(n),mK):mK;this.setColor(i,a),this.setShow(i,s)}},_K.prototype.isClass=function(e,t){TK(e,this.featuresLength),i["a"].typeOf.string("className",t);const n=this._batchTableHierarchy;return!!Object(r["a"])(n)&&n.isClass(e,t)},_K.prototype.isExactClass=function(e,t){return i["a"].typeOf.string("className",t),this.getExactClassName(e)===t},_K.prototype.getExactClassName=function(e){TK(e,this.featuresLength);const t=this._batchTableHierarchy;if(Object(r["a"])(t))return t.getClassName(e)},_K.prototype.hasProperty=function(e,t){return TK(e,this.featuresLength),i["a"].typeOf.string("name",t),Object(r["a"])(this._properties[t])||Object(r["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)},_K.prototype.hasPropertyBySemantic=function(){return!1},_K.prototype.getPropertyIds=function(e,t){TK(e,this.featuresLength),t=Object(r["a"])(t)?t:[],t.length=0;const n=Object.keys(this._properties);return t.push.apply(t,n),Object(r["a"])(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,n)),t},_K.prototype.getPropertyBySemantic=function(e,t){},_K.prototype.getProperty=function(e,t){if(TK(e,this.featuresLength),i["a"].typeOf.string("name",t),Object(r["a"])(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[t];if(Object(r["a"])(n))return AK(n,e)}const n=this._properties[t];if(Object(r["a"])(n))return Object(RL["a"])(n[e],!0);if(Object(r["a"])(this._batchTableHierarchy)){const n=this._batchTableHierarchy.getProperty(e,t);if(Object(r["a"])(n))return n}},_K.prototype.setProperty=function(e,t,n){const o=this.featuresLength;if(TK(e,o),i["a"].typeOf.string("name",t),Object(r["a"])(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[t];if(Object(r["a"])(i))return void wK(i,e,n)}if(Object(r["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))return;let a=this._properties[t];Object(r["a"])(a)||(this._properties[t]=new Array(o),a=this._properties[t]),a[e]=Object(RL["a"])(n,!0)},_K.prototype.getVertexShaderCallback=function(e,t,n){if(0===this.featuresLength)return;const i=this;return function(o){const r=SK(o,n,!1);let a;return YN.maximumVertexTextureImageUnits>0?(a="",e&&(a+="uniform bool tile_translucentCommand; \n"),a+=`uniform sampler2D tile_batchTexture; \nvarying vec4 tile_featureColor; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${t}); \n`+"    vec4 featureProperties = texture2D(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n",e&&(a+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),a+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):a=`varying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${t}); \n`+"}",`${r}\n${CK(i)}${a}`}},_K.prototype.getFragmentShaderCallback=function(e,t,n){if(0!==this.featuresLength)return function(i){return i=SK(i,t,!0),YN.maximumVertexTextureImageUnits>0?(i+="uniform sampler2D tile_pickTexture; \nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",n&&(i+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),i+="}"):(e&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",e&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n",n&&(i+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),i+="} \n"),i}},_K.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(e){return e=EV.replaceMain(e,"tile_main"),YN.maximumVertexTextureImageUnits>0?e+="uniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    gl_FragColor = tile_featureColor; \n    gl_FragColor.rgb *= gl_FragColor.a; \n}":e+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = featureProperties; \n    gl_FragColor.rgb *= gl_FragColor.a; \n} \n",e}},_K.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const e=this;return function(t){const n={tile_batchTexture:function(){return Object(o["a"])(e._batchTexture.batchTexture,e._batchTexture.defaultTexture)},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return IK(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}};return Object(qE["a"])(t,n)}},_K.prototype.getPickId=function(){return"texture2D(tile_pickTexture, tile_featureSt)"};const DK={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};function PK(e){const t=e._batchTexture.translucentFeaturesLength;return 0===t?DK.ALL_OPAQUE:t===e.featuresLength?DK.ALL_TRANSLUCENT:DK.OPAQUE_AND_TRANSLUCENT}function jK(e){const t=lF.shallowClone(e),n=t.pass===hF.TRANSLUCENT;return t.uniformMap=Object(r["a"])(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function RK(e){const t=lF.shallowClone(e);return t.pass=hF.TRANSLUCENT,t.renderState=zK(e.renderState),t}function LK(e){const t=lF.shallowClone(e);return t.renderState=kK(e.renderState),t}function MK(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!Object(r["a"])(n)){const i=t.fragmentShaderSource.clone();i.defines=Object(r["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("POLYGON_OFFSET"),i.sources.unshift("#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n"),n=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}function NK(e,t){const n=lF.shallowClone(t),i=Object(RL["a"])(n.renderState,!0);i.cull.enabled=!0,i.cull.face=HN.FRONT,i.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i.polygonOffset={enabled:!0,factor:5,units:5},i.stencilTest=cW.setCesium3DTileBit(),i.stencilMask=cW.CESIUM_3D_TILE_MASK,n.renderState=UF.fromCache(i),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=Object(RL["a"])(t.uniformMap);const o=new Gt(5,5);return n.uniformMap.u_polygonOffset=function(){return o},n.shaderProgram=MK(e,t.shaderProgram),n}function BK(e,t){const n=lF.shallowClone(e),i=Object(RL["a"])(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=cW.SKIP_LOD_MASK,i.stencilTest.reference=cW.CESIUM_3D_TILE_MASK|t<<cW.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=oW.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=aW.REPLACE,i.stencilTest.backFunction=oW.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=aW.REPLACE,i.stencilMask=cW.CESIUM_3D_TILE_MASK|cW.SKIP_LOD_MASK,n.renderState=UF.fromCache(i),n}function FK(e){const t=e.renderState.stencilTest.reference;return(t&cW.SKIP_LOD_MASK)>>>cW.SKIP_LOD_BIT_SHIFT}function zK(e){const t=Object(RL["a"])(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=UN.ALPHA_BLEND,t.stencilTest=cW.setCesium3DTileBit(),t.stencilMask=cW.CESIUM_3D_TILE_MASK,UF.fromCache(t)}function kK(e){const t=Object(RL["a"])(e,!0);return t.stencilTest=cW.setCesium3DTileBit(),t.stencilMask=cW.CESIUM_3D_TILE_MASK,UF.fromCache(t)}_K.prototype.addDerivedCommands=function(e,t){const n=e.commandList,i=n.length,o=this._content._tile,a=o._finalResolution,s=o.tileset,c=s._skipLevelOfDetail&&s._hasMixedContent&&e.context.stencilBuffer,l=PK(this);for(let u=t;u<i;++u){const t=n[u];if(t.pass===hF.COMPUTE)continue;let i=t.derivedCommands.tileset;Object(r["a"])(i)&&!t.dirty||(i={},t.derivedCommands.tileset=i,i.originalCommand=jK(t),t.dirty=!1);const h=i.originalCommand;l!==DK.ALL_OPAQUE&&t.pass!==hF.TRANSLUCENT&&(Object(r["a"])(i.translucent)||(i.translucent=RK(h))),l!==DK.ALL_TRANSLUCENT&&t.pass!==hF.TRANSLUCENT&&(Object(r["a"])(i.opaque)||(i.opaque=LK(h)),c&&(a||(Object(r["a"])(i.zback)||(i.zback=NK(e.context,h)),s._backfaceCommands.push(i.zback)),Object(r["a"])(i.stencil)&&o._selectionDepth===FK(i.stencil)||(t.renderState.depthMask?i.stencil=BK(h,o._selectionDepth):i.stencil=i.opaque)));const d=c?i.stencil:i.opaque,f=i.translucent;t.pass!==hF.TRANSLUCENT?(l===DK.ALL_OPAQUE&&(n[u]=d),l===DK.ALL_TRANSLUCENT&&(n[u]=f),l===DK.OPAQUE_AND_TRANSLUCENT&&(n[u]=d,n.push(f))):n[u]=h}},_K.prototype.update=function(e,t){this._batchTexture.update(e,t)},_K.prototype.isDestroyed=function(){return!1},_K.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),Wc(this)};var UK=_K;function VK(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}var HK=VK,GK="attribute vec3 position;\nattribute float a_batchId;\n\nuniform mat4 u_modifiedModelViewProjection;\n\nvoid main()\n{\n    gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0));\n}\n";function WK(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(WK.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return Object(r["a"])(this._color)||(this._color=new Dm),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if(Object(r["a"])(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),WK.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},WK.prototype.getPropertyNames=function(e){return IL("Cesium3DTileFeature.getPropertyNames","Cesium3DTileFeature.getPropertyNames was deprecated in CesiumJS 1.95 and will be removed in 1.98. Use Cesium3DTileFeature.getPropertyIds instead"),this._content.batchTable.getPropertyIds(this._batchId,e)},WK.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},WK.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},WK.getPropertyInherited=function(e,t,n){const i=e.batchTable;if(Object(r["a"])(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}const o=e.metadata;if(Object(r["a"])(o)){if(o.hasPropertyBySemantic(n))return o.getPropertyBySemantic(n);if(o.hasProperty(n))return o.getProperty(n)}const a=e.tile,s=a.metadata;if(Object(r["a"])(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let c;if(Object(r["a"])(a.implicitSubtree)&&(c=a.implicitSubtree.metadata),Object(r["a"])(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}const l=Object(r["a"])(e.group)?e.group.metadata:void 0;if(Object(r["a"])(l)){if(l.hasPropertyBySemantic(n))return l.getPropertyBySemantic(n);if(l.hasProperty(n))return l.getProperty(n)}const u=e.tileset.metadata;if(Object(r["a"])(u)){if(u.hasPropertyBySemantic(n))return u.getPropertyBySemantic(n);if(u.hasProperty(n))return u.getProperty(n)}},WK.prototype.getPropertyInherited=function(e){return WK.getPropertyInherited(this._content,this._batchId,e)},WK.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},WK.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},WK.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},WK.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var qK=WK,YK=n("160b"),XK=n.n(YK);const KK={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18};var $K=Object.freeze(KK);function JK(e,t){let n;i["a"].typeOf.string("expression",e),this._expression=e,e=O$(e,t),e=T$(A$(e)),XK.a.addBinaryOp("=~",0),XK.a.addBinaryOp("!~",0);try{n=XK()(e)}catch(o){throw new ye["a"](o)}this._runtimeAst=M$(this,n)}Object.defineProperties(JK.prototype,{expression:{get:function(){return this._expression}}});const QK={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new Gt],cartesian3Array:[new g],cartesian4Array:[new be],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new Gt),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new g),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new be),this.cartesian4Array[this.cartesian4Index++]}};JK.prototype.evaluate=function(e,t){QK.reset();const n=this._runtimeAst.evaluate(e);return t instanceof Dm&&n instanceof be?Dm.fromCartesian4(n,t):n instanceof Gt||n instanceof g||n instanceof be?n.clone(t):n},JK.prototype.evaluateColor=function(e,t){QK.reset();const n=this._runtimeAst.evaluate(e);return Dm.fromCartesian4(n,t)},JK.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e}\n`+"{\n"+`    return ${o};\n`+"}\n",o},JK.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},JK.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,n){return n.indexOf(e)===t})),e};const ZK=["!","-","+"],e$=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],t$=/\${(.*?)}/g,n$=/\\/g,i$="@#%",o$=/@#%/g,r$=new Dm,a$={abs:d$(Math.abs),sqrt:d$(Math.sqrt),cos:d$(Math.cos),sin:d$(Math.sin),tan:d$(Math.tan),acos:d$(Math.acos),asin:d$(Math.asin),atan:d$(Math.atan),radians:d$(s["a"].toRadians),degrees:d$(s["a"].toDegrees),sign:d$(s["a"].sign),floor:d$(Math.floor),ceil:d$(Math.ceil),round:d$(Math.round),exp:d$(Math.exp),exp2:d$(u$),log:d$(Math.log),log2:d$(h$),fract:d$(l$),length:m$,normalize:_$},s$={atan2:f$(Math.atan2,!1),pow:f$(Math.pow,!1),min:f$(Math.min,!0),max:f$(Math.max,!0),distance:g$,dot:b$,cross:y$},c$={clamp:p$(s["a"].clamp,!0),mix:p$(s["a"].lerp,!0)};function l$(e){return e-Math.floor(e)}function u$(e){return Math.pow(2,e)}function h$(e){return s["a"].log2(e)}function d$(e){return function(t,n){if("number"===typeof n)return e(n);if(n instanceof Gt)return Gt.fromElements(e(n.x),e(n.y),QK.getCartesian2());if(n instanceof g)return g.fromElements(e(n.x),e(n.y),e(n.z),QK.getCartesian3());if(n instanceof be)return be.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),QK.getCartesian4());throw new ye["a"](`Function "${t}" requires a vector or number argument. Argument is ${n}.`)}}function f$(e,t){return function(n,i,o){if(t&&"number"===typeof o){if("number"===typeof i)return e(i,o);if(i instanceof Gt)return Gt.fromElements(e(i.x,o),e(i.y,o),QK.getCartesian2());if(i instanceof g)return g.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),QK.getCartesian3());if(i instanceof be)return be.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),e(i.w,o),QK.getCartesian4())}if("number"===typeof i&&"number"===typeof o)return e(i,o);if(i instanceof Gt&&o instanceof Gt)return Gt.fromElements(e(i.x,o.x),e(i.y,o.y),QK.getCartesian2());if(i instanceof g&&o instanceof g)return g.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),QK.getCartesian3());if(i instanceof be&&o instanceof be)return be.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),e(i.w,o.w),QK.getCartesian4());throw new ye["a"](`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i} and ${o}.`)}}function p$(e,t){return function(n,i,o,r){if(t&&"number"===typeof r){if("number"===typeof i&&"number"===typeof o)return e(i,o,r);if(i instanceof Gt&&o instanceof Gt)return Gt.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),QK.getCartesian2());if(i instanceof g&&o instanceof g)return g.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),QK.getCartesian3());if(i instanceof be&&o instanceof be)return be.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),e(i.w,o.w,r),QK.getCartesian4())}if("number"===typeof i&&"number"===typeof o&&"number"===typeof r)return e(i,o,r);if(i instanceof Gt&&o instanceof Gt&&r instanceof Gt)return Gt.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),QK.getCartesian2());if(i instanceof g&&o instanceof g&&r instanceof g)return g.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),QK.getCartesian3());if(i instanceof be&&o instanceof be&&r instanceof be)return be.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),e(i.w,o.w,r.w),QK.getCartesian4());throw new ye["a"](`Function "${n}" requires vector or number arguments of matching types. Arguments are ${i}, ${o}, and ${r}.`)}}function m$(e,t){if("number"===typeof t)return Math.abs(t);if(t instanceof Gt)return Gt.magnitude(t);if(t instanceof g)return g.magnitude(t);if(t instanceof be)return be.magnitude(t);throw new ye["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function _$(e,t){if("number"===typeof t)return 1;if(t instanceof Gt)return Gt.normalize(t,QK.getCartesian2());if(t instanceof g)return g.normalize(t,QK.getCartesian3());if(t instanceof be)return be.normalize(t,QK.getCartesian4());throw new ye["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function g$(e,t,n){if("number"===typeof t&&"number"===typeof n)return Math.abs(t-n);if(t instanceof Gt&&n instanceof Gt)return Gt.distance(t,n);if(t instanceof g&&n instanceof g)return g.distance(t,n);if(t instanceof be&&n instanceof be)return be.distance(t,n);throw new ye["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function b$(e,t,n){if("number"===typeof t&&"number"===typeof n)return t*n;if(t instanceof Gt&&n instanceof Gt)return Gt.dot(t,n);if(t instanceof g&&n instanceof g)return g.dot(t,n);if(t instanceof be&&n instanceof be)return be.dot(t,n);throw new ye["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function y$(e,t,n){if(t instanceof g&&n instanceof g)return g.cross(t,n,QK.getCartesian3());throw new ye["a"](`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${n}.`)}function v$(e,t,n,i,o){this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,N$(this)}function O$(e,t){if(!Object(r["a"])(t))return e;for(const n in t)if(t.hasOwnProperty(n)){const i=new RegExp(`\\$\\{${n}\\}`,"g"),o=`(${t[n]})`;Object(r["a"])(o)&&(e=e.replace(i,o))}return e}function A$(e){return e.replace(n$,i$)}function w$(e){return e.replace(o$,"\\")}function T$(e){let t=e,n="",i=t.indexOf("${");while(i>=0){const e=t.indexOf("'"),o=t.indexOf('"');let r;if(e>=0&&e<i)r=t.indexOf("'",e+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else if(o>=0&&o<i)r=t.indexOf('"',o+1),n+=t.substr(0,r+1),t=t.substr(r+1),i=t.indexOf("${");else{n+=t.substr(0,i);const e=t.indexOf("}");if(e<0)throw new ye["a"]("Unmatched {.");n+=`czm_${t.substr(i+2,e-(i+2))}`,t=t.substr(e+1),i=t.indexOf("${")}}return n+=t,n}function C$(e){const t=typeof e.value;return null===e.value?new v$($K.LITERAL_NULL,null):"boolean"===t?new v$($K.LITERAL_BOOLEAN,e.value):"number"===t?new v$($K.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new v$($K.VARIABLE_IN_STRING,e.value):new v$($K.LITERAL_STRING,w$(e.value)):void 0}function E$(e,t){const n=t.arguments,i=n.length;let o,a,s,c;if("MemberExpression"===t.callee.type){o=t.callee.property.name;const r=t.callee.object;if("test"===o||"exec"===o){if("regExp"!==r.callee.name)throw new ye["a"](`${o} is not a function.`);return 0===i?"test"===o?new v$($K.LITERAL_BOOLEAN,!1):new v$($K.LITERAL_NULL,null):(s=M$(e,r),c=M$(e,n[0]),new v$($K.FUNCTION_CALL,o,s,c))}if("toString"===o)return a=M$(e,r),new v$($K.FUNCTION_CALL,o,a);throw new ye["a"](`Unexpected function call "${o}".`)}if(o=t.callee.name,"color"===o){if(0===i)return new v$($K.LITERAL_COLOR,o);if(a=M$(e,n[0]),Object(r["a"])(n[1])){const t=M$(e,n[1]);return new v$($K.LITERAL_COLOR,o,[a,t])}return new v$($K.LITERAL_COLOR,o,[a])}if("rgb"===o||"hsl"===o){if(i<3)throw new ye["a"](`${o} requires three arguments.`);return a=[M$(e,n[0]),M$(e,n[1]),M$(e,n[2])],new v$($K.LITERAL_COLOR,o,a)}if("rgba"===o||"hsla"===o){if(i<4)throw new ye["a"](`${o} requires four arguments.`);return a=[M$(e,n[0]),M$(e,n[1]),M$(e,n[2]),M$(e,n[3])],new v$($K.LITERAL_COLOR,o,a)}if("vec2"===o||"vec3"===o||"vec4"===o){a=new Array(i);for(let t=0;t<i;++t)a[t]=M$(e,n[t]);return new v$($K.LITERAL_VECTOR,o,a)}if("isNaN"===o||"isFinite"===o)return 0===i?new v$($K.LITERAL_BOOLEAN,"isNaN"===o):(a=M$(e,n[0]),new v$($K.UNARY,o,a));if("isExactClass"===o||"isClass"===o){if(i<1||i>1)throw new ye["a"](`${o} requires exactly one argument.`);return a=M$(e,n[0]),new v$($K.UNARY,o,a)}if("getExactClassName"===o){if(i>0)throw new ye["a"](`${o} does not take any argument.`);return new v$($K.UNARY,o)}if(Object(r["a"])(a$[o])){if(1!==i)throw new ye["a"](`${o} requires exactly one argument.`);return a=M$(e,n[0]),new v$($K.UNARY,o,a)}if(Object(r["a"])(s$[o])){if(2!==i)throw new ye["a"](`${o} requires exactly two arguments.`);return s=M$(e,n[0]),c=M$(e,n[1]),new v$($K.BINARY,o,s,c)}if(Object(r["a"])(c$[o])){if(3!==i)throw new ye["a"](`${o} requires exactly three arguments.`);s=M$(e,n[0]),c=M$(e,n[1]);const t=M$(e,n[2]);return new v$($K.TERNARY,o,s,c,t)}if("Boolean"===o)return 0===i?new v$($K.LITERAL_BOOLEAN,!1):(a=M$(e,n[0]),new v$($K.UNARY,o,a));if("Number"===o)return 0===i?new v$($K.LITERAL_NUMBER,0):(a=M$(e,n[0]),new v$($K.UNARY,o,a));if("String"===o)return 0===i?new v$($K.LITERAL_STRING,""):(a=M$(e,n[0]),new v$($K.UNARY,o,a));if("regExp"===o)return x$(e,t);throw new ye["a"](`Unexpected function call "${o}".`)}function x$(e,t){const n=t.arguments;if(0===n.length)return new v$($K.LITERAL_REGEX,new RegExp);const i=M$(e,n[0]);let o;if(n.length>1){const t=M$(e,n[1]);if(j$(i)&&j$(t)){try{o=new RegExp(w$(String(i._value)),t._value)}catch(r){throw new ye["a"](r)}return new v$($K.LITERAL_REGEX,o)}return new v$($K.REGEX,i,t)}if(j$(i)){try{o=new RegExp(w$(String(i._value)))}catch(r){throw new ye["a"](r)}return new v$($K.LITERAL_REGEX,o)}return new v$($K.REGEX,i)}function S$(e){if(R$(e.name)){const t=L$(e.name);return"tiles3d_"===t.substr(0,8)?new v$($K.BUILTIN_VARIABLE,t):new v$($K.VARIABLE,t)}if("NaN"===e.name)return new v$($K.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new v$($K.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new v$($K.LITERAL_UNDEFINED,void 0);throw new ye["a"](`${e.name} is not defined.`)}function I$(e){const t=e.property.name;return"PI"===t?new v$($K.LITERAL_NUMBER,Math.PI):"E"===t?new v$($K.LITERAL_NUMBER,Math.E):void 0}function D$(e){const t=e.property.name;if("POSITIVE_INFINITY"===t)return new v$($K.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function P$(e,t){if("Math"===t.object.name)return I$(t);if("Number"===t.object.name)return D$(t);let n;const i=M$(e,t.object);return t.computed?(n=M$(e,t.property),new v$($K.MEMBER,"brackets",i,n)):(n=new v$($K.LITERAL_STRING,t.property.name),new v$($K.MEMBER,"dot",i,n))}function j$(e){return e._type>=$K.LITERAL_NULL}function R$(e){return"czm_"===e.substr(0,4)}function L$(e){return e.substr(4)}function M$(e,t){let n,i,o,r;if("Literal"===t.type)n=C$(t);else if("CallExpression"===t.type)n=E$(e,t);else if("Identifier"===t.type)n=S$(t);else if("UnaryExpression"===t.type){i=t.operator;const o=M$(e,t.argument);if(!(ZK.indexOf(i)>-1))throw new ye["a"](`Unexpected operator "${i}".`);n=new v$($K.UNARY,i,o)}else if("BinaryExpression"===t.type){if(i=t.operator,o=M$(e,t.left),r=M$(e,t.right),!(e$.indexOf(i)>-1))throw new ye["a"](`Unexpected operator "${i}".`);n=new v$($K.BINARY,i,o,r)}else if("LogicalExpression"===t.type)i=t.operator,o=M$(e,t.left),r=M$(e,t.right),e$.indexOf(i)>-1&&(n=new v$($K.BINARY,i,o,r));else if("ConditionalExpression"===t.type){const i=M$(e,t.test);o=M$(e,t.consequent),r=M$(e,t.alternate),n=new v$($K.CONDITIONAL,"?",o,r,i)}else if("MemberExpression"===t.type)n=P$(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new ye["a"]("Provide exactly one expression."):new ye["a"]("Cannot parse expression.");{const i=[];for(let n=0;n<t.elements.length;n++)i[n]=M$(e,t.elements[n]);n=new v$($K.ARRAY,i)}}return n}function N$(e){e._type===$K.CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===$K.FUNCTION_CALL?"test"===e._value?e.evaluate=e._evaluateRegExpTest:"exec"===e._value?e.evaluate=e._evaluateRegExpExec:"toString"===e._value&&(e.evaluate=e._evaluateToString):e._type===$K.UNARY?"!"===e._value?e.evaluate=e._evaluateNot:"-"===e._value?e.evaluate=e._evaluateNegative:"+"===e._value?e.evaluate=e._evaluatePositive:"isNaN"===e._value?e.evaluate=e._evaluateNaN:"isFinite"===e._value?e.evaluate=e._evaluateIsFinite:"isExactClass"===e._value?e.evaluate=e._evaluateIsExactClass:"isClass"===e._value?e.evaluate=e._evaluateIsClass:"getExactClassName"===e._value?e.evaluate=e._evaluateGetExactClassName:"Boolean"===e._value?e.evaluate=e._evaluateBooleanConversion:"Number"===e._value?e.evaluate=e._evaluateNumberConversion:"String"===e._value?e.evaluate=e._evaluateStringConversion:Object(r["a"])(a$[e._value])&&(e.evaluate=F$(e._value)):e._type===$K.BINARY?"+"===e._value?e.evaluate=e._evaluatePlus:"-"===e._value?e.evaluate=e._evaluateMinus:"*"===e._value?e.evaluate=e._evaluateTimes:"/"===e._value?e.evaluate=e._evaluateDivide:"%"===e._value?e.evaluate=e._evaluateMod:"==="===e._value?e.evaluate=e._evaluateEqualsStrict:"!=="===e._value?e.evaluate=e._evaluateNotEqualsStrict:"<"===e._value?e.evaluate=e._evaluateLessThan:"<="===e._value?e.evaluate=e._evaluateLessThanOrEquals:">"===e._value?e.evaluate=e._evaluateGreaterThan:">="===e._value?e.evaluate=e._evaluateGreaterThanOrEquals:"&&"===e._value?e.evaluate=e._evaluateAnd:"||"===e._value?e.evaluate=e._evaluateOr:"=~"===e._value?e.evaluate=e._evaluateRegExpMatch:"!~"===e._value?e.evaluate=e._evaluateRegExpNotMatch:Object(r["a"])(s$[e._value])&&(e.evaluate=z$(e._value)):e._type===$K.TERNARY?e.evaluate=k$(e._value):e._type===$K.MEMBER?"brackets"===e._value?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===$K.ARRAY?e.evaluate=e._evaluateArray:e._type===$K.VARIABLE?e.evaluate=e._evaluateVariable:e._type===$K.VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===$K.LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===$K.LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===$K.LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===$K.REGEX?e.evaluate=e._evaluateRegExp:e._type===$K.BUILTIN_VARIABLE?"tiles3d_tileset_time"===e._value&&(e.evaluate=B$):e.evaluate=e._evaluateLiteral}function B$(e){return Object(r["a"])(e)?e.content.tileset.timeSinceLoad:0}function F$(e){const t=a$[e];return function(n){const i=this._left.evaluate(n);return t(e,i)}}function z$(e){const t=s$[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n);return t(e,i,o)}}function k$(e){const t=c$[e];return function(n){const i=this._left.evaluate(n),o=this._right.evaluate(n),r=this._test.evaluate(n);return t(e,i,o,r)}}function U$(e,t){if(Object(r["a"])(e))return e.getPropertyInherited(t)}function V$(e){return"feature"===e._value}function H$(e){const t=e._left,n=t.length;for(let s=0;s<n;++s)if(t[s]._type!==$K.LITERAL_NUMBER)return;const i=t[0]._value,o=t[1]._value,r=t[2]._value,a=4===n?t[3]._value:1;return Dm.fromHsl(i,o,r,a,r$)}function G$(e){const t=e._left,n=t.length;for(let o=0;o<n;++o)if(t[o]._type!==$K.LITERAL_NUMBER)return;const i=r$;return i.red=t[0]._value/255,i.green=t[1]._value/255,i.blue=t[2]._value/255,i.alpha=4===n?t[3]._value:1,i}function W$(e){return e%1===0?e.toFixed(1):e.toString()}function q$(e){const t=W$(e.red),n=W$(e.green),i=W$(e.blue);return`vec3(${t}, ${n}, ${i})`}function Y$(e){const t=W$(e.red),n=W$(e.green),i=W$(e.blue),o=W$(e.alpha);return`vec4(${t}, ${n}, ${i}, ${o})`}function X$(e,t,n,i){const o=e.length,r=new Array(o);for(let a=0;a<o;++a)r[a]=e[a].getShaderExpression(t,n,i);return r}function K$(e,t){return Object(r["a"])(t[e])?t[e]:JK.NULL_SENTINEL}v$.prototype._evaluateLiteral=function(){return this._value},v$.prototype._evaluateLiteralColor=function(e){const t=r$,n=this._left;if("color"===this._value)Object(r["a"])(n)?n.length>1?(Dm.fromCssColorString(n[0].evaluate(e),t),t.alpha=n[1].evaluate(e)):Dm.fromCssColorString(n[0].evaluate(e),t):Dm.fromBytes(255,255,255,255,t);else if("rgb"===this._value)Dm.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),255,t);else if("rgba"===this._value){const i=255*n[3].evaluate(e);Dm.fromBytes(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),i,t)}else"hsl"===this._value?Dm.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),1,t):"hsla"===this._value&&Dm.fromHsl(n[0].evaluate(e),n[1].evaluate(e),n[2].evaluate(e),n[3].evaluate(e),t);return be.fromColor(t,QK.getCartesian4())},v$.prototype._evaluateLiteralVector=function(e){const t=QK.getArray(),n=this._value,i=this._left,o=i.length;for(let s=0;s<o;++s){const o=i[s].evaluate(e);if("number"===typeof o)t.push(o);else if(o instanceof Gt)t.push(o.x,o.y);else if(o instanceof g)t.push(o.x,o.y,o.z);else{if(!(o instanceof be))throw new ye["a"](`${n} argument must be a vector or number. Argument is ${o}.`);t.push(o.x,o.y,o.z,o.w)}}const r=t.length,a=parseInt(n.charAt(3));if(0===r)throw new ye["a"](`Invalid ${n} constructor. No valid arguments.`);if(r<a&&r>1)throw new ye["a"](`Invalid ${n} constructor. Not enough arguments.`);if(r>a&&o>1)throw new ye["a"](`Invalid ${n} constructor. Too many arguments.`);if(1===r){const e=t[0];t.push(e,e,e)}return"vec2"===n?Gt.fromArray(t,0,QK.getCartesian2()):"vec3"===n?g.fromArray(t,0,QK.getCartesian3()):"vec4"===n?be.fromArray(t,0,QK.getCartesian4()):void 0},v$.prototype._evaluateLiteralString=function(){return this._value},v$.prototype._evaluateVariableString=function(e){let t=this._value,n=t$.exec(t);while(null!==n){const i=n[0],o=n[1];let a=U$(e,o);Object(r["a"])(a)||(a=""),t=t.replace(i,a),n=t$.exec(t)}return t},v$.prototype._evaluateVariable=function(e){return U$(e,this._value)},v$.prototype._evaluateMemberDot=function(e){if(V$(this._left))return U$(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(r["a"])(t))return;const n=this._right.evaluate(e);if(t instanceof Gt||t instanceof g||t instanceof be){if("r"===n)return t.x;if("g"===n)return t.y;if("b"===n)return t.z;if("a"===n)return t.w}return t[n]},v$.prototype._evaluateMemberBrackets=function(e){if(V$(this._left))return U$(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(r["a"])(t))return;const n=this._right.evaluate(e);if(t instanceof Gt||t instanceof g||t instanceof be){if(0===n||"r"===n)return t.x;if(1===n||"g"===n)return t.y;if(2===n||"b"===n)return t.z;if(3===n||"a"===n)return t.w}return t[n]},v$.prototype._evaluateArray=function(e){const t=[];for(let n=0;n<this._value.length;n++)t[n]=this._value[n].evaluate(e);return t},v$.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new ye["a"](`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},v$.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof Gt)return Gt.negate(t,QK.getCartesian2());if(t instanceof g)return g.negate(t,QK.getCartesian3());if(t instanceof be)return be.negate(t,QK.getCartesian4());if("number"===typeof t)return-t;throw new ye["a"](`Operator "-" requires a vector or number argument. Argument is ${t}.`)},v$.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof Gt||t instanceof g||t instanceof be||"number"===typeof t))throw new ye["a"](`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},v$.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof n)throw new ye["a"](`Operator "<" requires number arguments. Arguments are ${t} and ${n}.`);return t<n},v$.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof n)throw new ye["a"](`Operator "<=" requires number arguments. Arguments are ${t} and ${n}.`);return t<=n},v$.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof n)throw new ye["a"](`Operator ">" requires number arguments. Arguments are ${t} and ${n}.`);return t>n},v$.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof n)throw new ye["a"](`Operator ">=" requires number arguments. Arguments are ${t} and ${n}.`);return t>=n},v$.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new ye["a"](`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const n=this._right.evaluate(e);if("boolean"!==typeof n)throw new ye["a"](`Operator "||" requires boolean arguments. Second argument is ${n}.`);return t||n},v$.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new ye["a"](`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const n=this._right.evaluate(e);if("boolean"!==typeof n)throw new ye["a"](`Operator "&&" requires boolean arguments. Second argument is ${n}.`);return t&&n},v$.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof Gt&&t instanceof Gt)return Gt.add(t,n,QK.getCartesian2());if(n instanceof g&&t instanceof g)return g.add(t,n,QK.getCartesian3());if(n instanceof be&&t instanceof be)return be.add(t,n,QK.getCartesian4());if("string"===typeof t||"string"===typeof n)return t+n;if("number"===typeof t&&"number"===typeof n)return t+n;throw new ye["a"](`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof Gt&&t instanceof Gt)return Gt.subtract(t,n,QK.getCartesian2());if(n instanceof g&&t instanceof g)return g.subtract(t,n,QK.getCartesian3());if(n instanceof be&&t instanceof be)return be.subtract(t,n,QK.getCartesian4());if("number"===typeof t&&"number"===typeof n)return t-n;throw new ye["a"](`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof Gt&&t instanceof Gt)return Gt.multiplyComponents(t,n,QK.getCartesian2());if(n instanceof Gt&&"number"===typeof t)return Gt.multiplyByScalar(n,t,QK.getCartesian2());if(t instanceof Gt&&"number"===typeof n)return Gt.multiplyByScalar(t,n,QK.getCartesian2());if(n instanceof g&&t instanceof g)return g.multiplyComponents(t,n,QK.getCartesian3());if(n instanceof g&&"number"===typeof t)return g.multiplyByScalar(n,t,QK.getCartesian3());if(t instanceof g&&"number"===typeof n)return g.multiplyByScalar(t,n,QK.getCartesian3());if(n instanceof be&&t instanceof be)return be.multiplyComponents(t,n,QK.getCartesian4());if(n instanceof be&&"number"===typeof t)return be.multiplyByScalar(n,t,QK.getCartesian4());if(t instanceof be&&"number"===typeof n)return be.multiplyByScalar(t,n,QK.getCartesian4());if("number"===typeof t&&"number"===typeof n)return t*n;throw new ye["a"](`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof Gt&&t instanceof Gt)return Gt.divideComponents(t,n,QK.getCartesian2());if(t instanceof Gt&&"number"===typeof n)return Gt.divideByScalar(t,n,QK.getCartesian2());if(n instanceof g&&t instanceof g)return g.divideComponents(t,n,QK.getCartesian3());if(t instanceof g&&"number"===typeof n)return g.divideByScalar(t,n,QK.getCartesian3());if(n instanceof be&&t instanceof be)return be.divideComponents(t,n,QK.getCartesian4());if(t instanceof be&&"number"===typeof n)return be.divideByScalar(t,n,QK.getCartesian4());if("number"===typeof t&&"number"===typeof n)return t/n;throw new ye["a"](`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(n instanceof Gt&&t instanceof Gt)return Gt.fromElements(t.x%n.x,t.y%n.y,QK.getCartesian2());if(n instanceof g&&t instanceof g)return g.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,QK.getCartesian3());if(n instanceof be&&t instanceof be)return be.fromElements(t.x%n.x,t.y%n.y,t.z%n.z,t.w%n.w,QK.getCartesian4());if("number"===typeof t&&"number"===typeof n)return t%n;throw new ye["a"](`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof Gt&&t instanceof Gt||n instanceof g&&t instanceof g||n instanceof be&&t instanceof be?t.equals(n):t===n},v$.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);return n instanceof Gt&&t instanceof Gt||n instanceof g&&t instanceof g||n instanceof be&&t instanceof be?!t.equals(n):t!==n},v$.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!==typeof t)throw new ye["a"](`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},v$.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},v$.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},v$.prototype._evaluateIsExactClass=function(e){return!!Object(r["a"])(e)&&e.isExactClass(this._left.evaluate(e))},v$.prototype._evaluateIsClass=function(e){return!!Object(r["a"])(e)&&e.isClass(this._left.evaluate(e))},v$.prototype._evaluateGetExactClassName=function(e){if(Object(r["a"])(e))return e.getExactClassName()},v$.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},v$.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},v$.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},v$.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let n,i="";Object(r["a"])(this._left)&&(i=this._left.evaluate(e));try{n=new RegExp(t,i)}catch(o){throw new ye["a"](o)}return n},v$.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof n))throw new ye["a"](`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);return t.test(n)},v$.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof n)return t.test(n);if(n instanceof RegExp&&"string"===typeof t)return n.test(t);throw new ye["a"](`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof n)return!t.test(n);if(n instanceof RegExp&&"string"===typeof t)return!n.test(t);throw new ye["a"](`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${n}.`)},v$.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),n=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof n))throw new ye["a"](`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${n}.`);const i=t.exec(n);return Object(r["a"])(i)?i[1]:null},v$.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof Gt||t instanceof g||t instanceof be)return String(t);throw new ye["a"](`Unexpected function call "${this._value}".`)},JK.NULL_SENTINEL="czm_infinity",v$.prototype.getShaderExpression=function(e,t,n){let i,o,s,c;const l=this._type;let u,h,d,f=this._value;switch(Object(r["a"])(this._left)&&(o=Array.isArray(this._left)?X$(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),Object(r["a"])(this._right)&&(s=this._right.getShaderExpression(e,t,this)),Object(r["a"])(this._test)&&(c=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(f=X$(this._value,e,t,this)),l){case $K.VARIABLE:if(V$(this))return;return K$(f,e);case $K.UNARY:if("Boolean"===f)return`bool(${o})`;if("Number"===f)return`float(${o})`;if("round"===f)return`floor(${o} + 0.5)`;if(Object(r["a"])(a$[f]))return`${f}(${o})`;if("isNaN"===f)return`(${o} != ${o})`;if("isFinite"===f)return`(abs(${o}) < czm_infinity)`;if("String"===f||"isExactClass"===f||"isClass"===f||"getExactClassName"===f)throw new ye["a"](`Error generating style shader: "${f}" is not supported.`);return f+o;case $K.BINARY:return"%"===f?`mod(${o}, ${s})`:"==="===f?`(${o} == ${s})`:"!=="===f?`(${o} != ${s})`:"atan2"===f?`atan(${o}, ${s})`:Object(r["a"])(s$[f])?`${f}(${o}, ${s})`:`(${o} ${f} ${s})`;case $K.TERNARY:if(Object(r["a"])(c$[f]))return`${f}(${o}, ${s}, ${c})`;break;case $K.CONDITIONAL:return`(${c} ? ${o} : ${s})`;case $K.MEMBER:return V$(this._left)?K$(s,e):"r"===s||"x"===s||"0.0"===s?`${o}[0]`:"g"===s||"y"===s||"1.0"===s?`${o}[1]`:"b"===s||"z"===s||"2.0"===s?`${o}[2]`:"a"===s||"w"===s||"3.0"===s?`${o}[3]`:`${o}[int(${s})]`;case $K.FUNCTION_CALL:throw new ye["a"](`Error generating style shader: "${f}" is not supported.`);case $K.ARRAY:if(4===f.length)return`vec4(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`;if(3===f.length)return`vec3(${f[0]}, ${f[1]}, ${f[2]})`;if(2===f.length)return`vec2(${f[0]}, ${f[1]})`;throw new ye["a"]("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case $K.REGEX:throw new ye["a"]("Error generating style shader: Regular expressions are not supported.");case $K.VARIABLE_IN_STRING:throw new ye["a"]("Error generating style shader: Converting a variable to a string is not supported.");case $K.LITERAL_NULL:return JK.NULL_SENTINEL;case $K.LITERAL_BOOLEAN:return f?"true":"false";case $K.LITERAL_NUMBER:return W$(f);case $K.LITERAL_STRING:if(Object(r["a"])(n)&&n._type===$K.MEMBER&&("r"===f||"g"===f||"b"===f||"a"===f||"x"===f||"y"===f||"z"===f||"w"===f||V$(n._left)))return f;if(i=Dm.fromCssColorString(f,r$),Object(r["a"])(i))return q$(i);throw new ye["a"]("Error generating style shader: String literals are not supported.");case $K.LITERAL_COLOR:if(u=o,"color"===f){if(!Object(r["a"])(u))return"vec4(1.0)";if(u.length>1){const e=u[0],n=u[1];return"1.0"!==n&&(t.translucent=!0),`vec4(${e}, ${n})`}return`vec4(${u[0]}, 1.0)`}if("rgb"===f)return i=G$(this),Object(r["a"])(i)?Y$(i):`vec4(${u[0]} / 255.0, ${u[1]} / 255.0, ${u[2]} / 255.0, 1.0)`;if("rgba"===f)return"1.0"!==u[3]&&(t.translucent=!0),i=G$(this),Object(r["a"])(i)?Y$(i):`vec4(${u[0]} / 255.0, ${u[1]} / 255.0, ${u[2]} / 255.0, ${u[3]})`;if("hsl"===f)return i=H$(this),Object(r["a"])(i)?Y$(i):`vec4(czm_HSLToRGB(vec3(${u[0]}, ${u[1]}, ${u[2]})), 1.0)`;if("hsla"===f)return i=H$(this),Object(r["a"])(i)?(1!==i.alpha&&(t.translucent=!0),Y$(i)):("1.0"!==u[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${u[0]}, ${u[1]}, ${u[2]})), ${u[3]})`);break;case $K.LITERAL_VECTOR:if(!Object(r["a"])(o))throw new a["a"]("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");h=o.length,d=`${f}(`;for(let e=0;e<h;++e)d+=o[e],e<h-1&&(d+=", ");return d+=")",d;case $K.LITERAL_REGEX:throw new ye["a"]("Error generating style shader: Regular expressions are not supported.");case $K.LITERAL_UNDEFINED:return JK.NULL_SENTINEL;case $K.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===f)return f}},v$.prototype.getVariables=function(e,t){let n,i,o;const a=this._type,s=this._value;if(Object(r["a"])(this._left))if(Array.isArray(this._left))for(n=this._left,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);else this._left.getVariables(e,this);if(Object(r["a"])(this._right)&&this._right.getVariables(e,this),Object(r["a"])(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(n=this._value,i=n.length,o=0;o<i;++o)n[o].getVariables(e,this);let c;switch(a){case $K.VARIABLE:V$(this)||e.push(s);break;case $K.VARIABLE_IN_STRING:c=t$.exec(s);while(null!==c)e.push(c[1]),c=t$.exec(s);break;case $K.LITERAL_STRING:Object(r["a"])(t)&&t._type===$K.MEMBER&&V$(t._left)&&e.push(s);break}};var $$=JK;function J$(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=Object(o["a"])(e.center,g.ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=Dm.clone(Dm.WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=Object(o["a"])(e.classificationType,DV.BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};const t=this._batchIds.length;for(let n=0;n<t;++n){const e=this._batchIds[n];this._batchIdLookUp[e]=n}}Object.defineProperties(J$.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});const Q$={position:0,a_batchId:1};function Z$(e,t){if(Object(r["a"])(e._va))return;const n=NV.createVertexBuffer({context:t,typedArray:e._positions,usage:LV.STATIC_DRAW}),i=NV.createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:LV.STATIC_DRAW}),o=NV.createIndexBuffer({context:t,typedArray:e._indices,usage:LV.DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?ll.UNSIGNED_SHORT:ll.UNSIGNED_INT}),a=[{index:0,vertexBuffer:n,componentDatatype:Ks.fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:i,componentDatatype:Ks.fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new WV({context:t,attributes:a,indexBuffer:o}),t.webgl2&&(e._vaSwap=new WV({context:t,attributes:a,indexBuffer:NV.createIndexBuffer({context:t,sizeInBytes:o.sizeInBytes,usage:LV.DYNAMIC_DRAW,indexDatatype:o.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._verticesPromise=void 0}function eJ(e,t){if(Object(r["a"])(e._sp))return;const n=e._batchTable,i=Object(o["a"])(e._attributeLocations,Q$);let a=e._pickId;const s=e._vertexShaderSource;let c=e._fragmentShaderSource;if(Object(r["a"])(s))return e._sp=Nz.fromCache({context:t,vertexShaderSource:s,fragmentShaderSource:c,attributeLocations:i}),e._spStencil=e._sp,c=EV.replaceMain(c,"czm_non_pick_main"),c=`${c}void main() \n`+"{ \n    czm_non_pick_main(); \n"+`    gl_FragColor = ${a}; \n`+"} \n",void(e._spPick=Nz.fromCache({context:t,vertexShaderSource:s,fragmentShaderSource:c,attributeLocations:i}));const l=n.getVertexShaderCallback(!1,"a_batchId",void 0)(GK);let u=n.getFragmentShaderCallback(!1,void 0,!0)(SV);a=n.getPickId();let h=new EV({sources:[l]}),d=new EV({defines:["VECTOR_TILE"],sources:[u]});e._sp=Nz.fromCache({context:t,vertexShaderSource:h,fragmentShaderSource:d,attributeLocations:i}),h=new EV({sources:[GK]}),d=new EV({defines:["VECTOR_TILE"],sources:[SV]}),e._spStencil=Nz.fromCache({context:t,vertexShaderSource:h,fragmentShaderSource:d,attributeLocations:i}),u=EV.replaceMain(u,"czm_non_pick_main"),u=`${u}\n`+"void main() \n{ \n    czm_non_pick_main(); \n"+`    gl_FragColor = ${a}; \n`+"} \n";const f=new EV({sources:[l]}),p=new EV({defines:["VECTOR_TILE"],sources:[u]});e._spPick=Nz.fromCache({context:t,vertexShaderSource:f,fragmentShaderSource:p,attributeLocations:i})}function tJ(e){const t=e?oW.EQUAL:oW.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:aW.KEEP,zFail:aW.DECREMENT_WRAP,zPass:aW.KEEP},backFunction:t,backOperation:{fail:aW.KEEP,zFail:aW.INCREMENT_WRAP,zPass:aW.KEEP},reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:jV.LESS_OR_EQUAL},depthMask:!1}}const nJ={stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:UN.PRE_MULTIPLIED_ALPHA_BLEND},iJ={stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function oJ(e){Object(r["a"])(e._rsStencilDepthPass)||(e._rsStencilDepthPass=UF.fromCache(tJ(!1)),e._rsStencilDepthPass3DTiles=UF.fromCache(tJ(!0)),e._rsColorPass=UF.fromCache(nJ),e._rsPickPass=UF.fromCache(iJ))}const rJ=new Me,aJ=new g;function sJ(e,t){if(Object(r["a"])(e._uniformMap))return;const n={u_modifiedModelViewProjection:function(){const n=t.uniformState.view,i=t.uniformState.projection;return Me.clone(n,rJ),Me.multiplyByPoint(rJ,e._center,aJ),Me.setTranslation(rJ,aJ,rJ),Me.multiply(i,rJ,rJ),rJ},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(n)}function cJ(e,t,n,i,o,r,a){const s=e.constructor.BYTES_PER_ELEMENT,c=r.length;for(let l=0;l<c;++l){const c=r[l],u=a[c],h=i[u],d=o[u],f=new e.constructor(e.buffer,s*h,d);t.set(f,n),i[u]=n,n+=d}return n}function lJ(e,t){const n=e._indices,i=e._indexOffsets,o=e._indexCounts,r=e._batchIdLookUp,a=new n.constructor(n.length);let s=t.pop();const c=[s];let l=cJ(n,a,0,i,o,s.batchIds,r);s.offset=0,s.count=l;while(t.length>0){const e=t.pop();if(Dm.equals(e.color,s.color))l=cJ(n,a,l,i,o,e.batchIds,r),s.batchIds=s.batchIds.concat(e.batchIds),s.count=l-s.offset;else{const t=l;l=cJ(n,a,l,i,o,e.batchIds,r),e.offset=t,e.count=l-t,c.push(e),s=e}}e._va.indexBuffer.copyFromArrayView(a),e._indices=a,e._batchedIndices=c}function uJ(e,t,n,i,o,r,a){const s=e.bytesPerIndex,c=r.length;for(let l=0;l<c;++l){const c=r[l],u=a[c],h=i[u],d=o[u];t.copyFromBuffer(e,h*s,n*s,d*s),i[u]=n,n+=d}return n}function hJ(e,t){const n=e._indexOffsets,i=e._indexCounts,o=e._batchIdLookUp;let r=t.pop();const a=[r],s=e._va.indexBuffer,c=e._vaSwap.indexBuffer;let l=uJ(s,c,0,n,i,r.batchIds,o);r.offset=0,r.count=l;while(t.length>0){const e=t.pop();if(Dm.equals(e.color,r.color))l=uJ(s,c,l,n,i,e.batchIds,o),r.batchIds=r.batchIds.concat(e.batchIds),r.count=l-r.offset;else{const t=l;l=uJ(s,c,l,n,i,e.batchIds,o),e.offset=t,e.count=l-t,a.push(e),r=e}}const u=e._va;e._va=e._vaSwap,e._vaSwap=u,e._batchedIndices=a}function dJ(e,t){return t.color.toRgba()-e.color.toRgba()}function fJ(e,t){if(!e._batchDirty)return!1;const n=e._batchedIndices,i=n.length;let o=!1;const a={};for(let s=0;s<i;++s){const e=n[s].color,t=e.toRgba();if(Object(r["a"])(a[t])){o=!0;break}a[t]=!0}return o?o&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(n.sort(dJ),t.webgl2?hJ(e,n):lJ(e,n),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}function pJ(e,t){const n=fJ(e,t),i=e._commands,a=e._batchedIndices,s=a.length,c=2*s;if(Object(r["a"])(i)&&!n&&i.length===c)return;i.length=c;const l=e._va,u=e._sp,h=Object(o["a"])(e._modelMatrix,Me.IDENTITY),d=e._uniformMap,f=e._boundingVolume;for(let o=0;o<s;++o){const t=a[o].offset,n=a[o].count;let s=i[2*o];Object(r["a"])(s)||(s=i[2*o]=new lF({owner:e})),s.vertexArray=l,s.modelMatrix=h,s.offset=t,s.count=n,s.renderState=e._rsStencilDepthPass,s.shaderProgram=u,s.uniformMap=d,s.boundingVolume=f,s.cull=!1,s.pass=hF.TERRAIN_CLASSIFICATION;const c=lF.shallowClone(s,s.derivedCommands.tileset);c.renderState=e._rsStencilDepthPass3DTiles,c.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,s.derivedCommands.tileset=c;let p=i[2*o+1];Object(r["a"])(p)||(p=i[2*o+1]=new lF({owner:e})),p.vertexArray=l,p.modelMatrix=h,p.offset=t,p.count=n,p.renderState=e._rsColorPass,p.shaderProgram=u,p.uniformMap=d,p.boundingVolume=f,p.cull=!1,p.pass=hF.TERRAIN_CLASSIFICATION;const m=lF.shallowClone(p,p.derivedCommands.tileset);m.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,p.derivedCommands.tileset=m}e._commandsDirty=!0}function mJ(e,t){if(e.classificationType===DV.TERRAIN||!t.invertClassification||Object(r["a"])(e._commandsIgnoreShow)&&!e._commandsDirty)return;const n=e._commands,i=e._commandsIgnoreShow,o=e._spStencil,a=n.length,s=i.length=a/2;let c=0;for(let r=0;r<s;++r){const e=i[r]=lF.shallowClone(n[c],i[r]);e.shaderProgram=o,e.pass=hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}function _J(e){if(!e._pickCommandsDirty)return;const t=e._indexOffsets.length,n=e._pickCommands;n.length=2*t;const i=e._va,a=e._spStencil,s=e._spPick,c=Object(o["a"])(e._modelMatrix,Me.IDENTITY),l=e._uniformMap;for(let o=0;o<t;++o){const t=e._indexOffsets[o],u=e._indexCounts[o],h=Object(r["a"])(e._boundingVolumes)?e._boundingVolumes[o]:e.boundingVolume;let d=n[2*o];Object(r["a"])(d)||(d=n[2*o]=new lF({owner:e,pickOnly:!0})),d.vertexArray=i,d.modelMatrix=c,d.offset=t,d.count=u,d.renderState=e._rsStencilDepthPass,d.shaderProgram=a,d.uniformMap=l,d.boundingVolume=h,d.pass=hF.TERRAIN_CLASSIFICATION;const f=lF.shallowClone(d,d.derivedCommands.tileset);f.renderState=e._rsStencilDepthPass3DTiles,f.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,d.derivedCommands.tileset=f;let p=n[2*o+1];Object(r["a"])(p)||(p=n[2*o+1]=new lF({owner:e,pickOnly:!0})),p.vertexArray=i,p.modelMatrix=c,p.offset=t,p.count=u,p.renderState=e._rsPickPass,p.shaderProgram=s,p.uniformMap=l,p.boundingVolume=h,p.pass=hF.TERRAIN_CLASSIFICATION;const m=lF.shallowClone(p,p.derivedCommands.tileset);m.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,p.derivedCommands.tileset=m}e._pickCommandsDirty=!1}function gJ(e,t){e._updatingAllCommands=!0;const n=e._batchIds;let i,o=n.length;for(i=0;i<o;++i){const e=n[i],o=t[e];o.show=!0,o.color=Dm.WHITE}const r=e._batchedIndices;for(o=r.length,i=0;i<o;++i)r[i].color=Dm.clone(Dm.WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}J$.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new qK(e,i)}},J$.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const bJ=new Dm,yJ=Dm.WHITE,vJ=!0,OJ=/\$/;function AJ(e,t,n,i){const o=e.classificationType,a=o!==DV.CESIUM_3D_TILE,s=o!==DV.TERRAIN,c=t.commandList;let l,u,h=n.length;for(u=0;u<h;++u)a&&(l=n[u],l.pass=hF.TERRAIN_CLASSIFICATION,c.push(l)),s&&(l=n[u].derivedCommands.tileset,l.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,c.push(l));if(t.invertClassification&&Object(r["a"])(i))for(h=i.length,u=0;u<h;++u)c.push(i[u])}function wJ(e,t){const n=e.commandList,i=t.length;for(let o=0;o<i;o+=2){const e=t[o+1];e.pass=hF.OPAQUE,n.push(e)}}function TJ(e){let t,n,i=e.debugWireframe===e._debugWireframe;if(i=i&&!(e.debugWireframe&&e._wireframeDirty),i)return;Object(r["a"])(e._rsWireframe)||(e._rsWireframe=UF.fromCache({})),e.debugWireframe?(t=e._rsWireframe,n=Eu.LINES):(t=e._rsColorPass,n=Eu.TRIANGLES);const o=e._commands,a=o.length;for(let r=0;r<a;r+=2){const e=o[r+1];e.renderState=t,e.primitiveType=n}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}J$.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void gJ(this,t);const n=e.color,i=n instanceof $$&&!OJ.test(n.expression);this._updatingAllCommands=i;const o=this._batchIds;let a,s=o.length;for(a=0;a<s;++a){const n=o[a],i=t[n];i.color=Object(r["a"])(e.color)?e.color.evaluateColor(i,bJ):yJ,i.show=Object(r["a"])(e.show)?e.show.evaluate(i):vJ}if(i){const e=this._batchedIndices;for(s=e.length,a=0;a<s;++a)e[a].color=Dm.clone(Dm.WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}},J$.prototype.updateCommands=function(e,t){if(this._updatingAllCommands)return;const n=this._batchIdLookUp,i=n[e];if(!Object(r["a"])(i))return;const o=this._indexOffsets,a=this._indexCounts,s=o[i],c=a[i],l=this._batchedIndices,u=l.length;let h;for(h=0;h<u;++h){const e=l[h].offset,t=l[h].count;if(s>=e&&s<e+t)break}l.push(new HK({color:Dm.clone(t),offset:s,count:c,batchIds:[e]}));const d=[],f=[],p=l[h].batchIds,m=p.length;for(let r=0;r<m;++r){const t=p[r];if(t===e)continue;const i=n[t];o[i]<s?d.push(t):f.push(t)}0!==f.length&&l.push(new HK({color:Dm.clone(l[h].color),offset:s+c,count:l[h].offset+l[h].count-(s+c),batchIds:f})),0!==d.length?(l[h].count=s-l[h].offset,l[h].batchIds=d):l.splice(h,1),this._batchDirty=!0},J$.prototype.update=function(e){const t=e.context;Z$(this,t),eJ(this,t),oJ(this),sJ(this,t);const n=e.passes;n.render&&(pJ(this,t),mJ(this,e),TJ(this),this._debugWireframe?wJ(e,this._commands):AJ(this,e,this._commands,this._commandsIgnoreShow)),n.pick&&(_J(this),AJ(this,e,this._pickCommands))},J$.prototype.isDestroyed=function(){return!1},J$.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),Wc(this)};var CJ=J$;function EJ(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,Object(r["a"])(this._center)||(Object(r["a"])(this._boundingVolume)?this._center=g.clone(this._boundingVolume.center):this._center=g.clone(g.ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=RJ(this),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=DV.BOTH}function xJ(e){const t=new Float64Array(Me.packedLength+g.packedLength);let n=0;return g.pack(e._center,t,n),n+=g.packedLength,Me.pack(e._modelMatrix,t,n),t}function SJ(e,t){let n=0;const i=t[n++],o=t[n++],r=e._boundingVolumes=new Array(o);for(let c=0;c<o;++c)r[c]=Tt.unpack(t,n),n+=Tt.packedLength;const a=t[n++],s=e._batchedIndices=new Array(a);for(let c=0;c<a;++c){const e=Dm.unpack(t,n);n+=Dm.packedLength;const i=t[n++],o=t[n++],r=t[n++],a=new Array(r);for(let s=0;s<r;++s)a[s]=t[n++];s[c]=new HK({color:e,offset:i,count:o,batchIds:a})}return i}Object.defineProperties(EJ.prototype,{trianglesLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise}}}),EJ.packedBoxLength=Me.packedLength+g.packedLength,EJ.packedCylinderLength=Me.packedLength+2,EJ.packedEllipsoidLength=Me.packedLength+g.packedLength,EJ.packedSphereLength=g.packedLength+1;const IJ=new il("createVectorTileGeometries",5),DJ=new Dm;function PJ(e){if(!Object(r["a"])(e._primitive)&&!Object(r["a"])(e._verticesPromise)){let t=e._boxes,n=e._boxBatchIds,i=e._cylinders,o=e._cylinderBatchIds,a=e._ellipsoids,s=e._ellipsoidBatchIds,c=e._spheres,l=e._sphereBatchIds,u=e._batchTableColors,h=e._packedBuffer;if(!Object(r["a"])(u)){let d=0;Object(r["a"])(e._boxes)&&(t=e._boxes=t.slice(),n=e._boxBatchIds=n.slice(),d+=n.length),Object(r["a"])(e._cylinders)&&(i=e._cylinders=i.slice(),o=e._cylinderBatchIds=o.slice(),d+=o.length),Object(r["a"])(e._ellipsoids)&&(a=e._ellipsoids=a.slice(),s=e._ellipsoidBatchIds=s.slice(),d+=s.length),Object(r["a"])(e._spheres)&&(c=e._sphere=c.slice(),l=e._sphereBatchIds=l.slice(),d+=l.length),u=e._batchTableColors=new Uint32Array(d);const f=e._batchTable;for(let e=0;e<d;++e){const t=f.getColor(e,DJ);u[e]=t.toRgba()}h=e._packedBuffer=xJ(e)}const d=[];Object(r["a"])(t)&&d.push(t.buffer,n.buffer),Object(r["a"])(i)&&d.push(i.buffer,o.buffer),Object(r["a"])(a)&&d.push(a.buffer,s.buffer),Object(r["a"])(c)&&d.push(c.buffer,l.buffer),d.push(u.buffer,h.buffer);const f={boxes:Object(r["a"])(t)?t.buffer:void 0,boxBatchIds:Object(r["a"])(t)?n.buffer:void 0,cylinders:Object(r["a"])(i)?i.buffer:void 0,cylinderBatchIds:Object(r["a"])(i)?o.buffer:void 0,ellipsoids:Object(r["a"])(a)?a.buffer:void 0,ellipsoidBatchIds:Object(r["a"])(a)?s.buffer:void 0,spheres:Object(r["a"])(c)?c.buffer:void 0,sphereBatchIds:Object(r["a"])(c)?l.buffer:void 0,batchTableColors:u.buffer,packedBuffer:h.buffer},p=e._verticesPromise=IJ.scheduleTask(f,d);if(!Object(r["a"])(p))return;return p.then((function(t){const n=new Float64Array(t.packedBuffer),i=SJ(e,n);e._indices=2===i?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),e._ready=!0}))}}function jJ(e){e._ready&&!Object(r["a"])(e._primitive)&&(e._primitive=new CJ({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:Object(o["a"])(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0)}function RJ(e){return new Promise((function(t,n){e._update=function(e,i){const o=PJ(e);e._ready&&(e._primitive.debugWireframe=e.debugWireframe,e._primitive.forceRebatch=e.forceRebatch,e._primitive.classificationType=e.classificationType,e._primitive.update(i)),Object(r["a"])(o)&&o.then((function(){jJ(e),t(e)})).catch((function(e){n(e)}))}}))}EJ.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},EJ.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},EJ.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},EJ.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},EJ.prototype.update=function(e){this._update(this,e)},EJ.prototype.isDestroyed=function(){return!1},EJ.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Wc(this)};var LJ=EJ;function MJ(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._readyPromise=zJ(this,i,o)}function NJ(e){return function(t,n){Object(r["a"])(e._geometries)&&e._geometries.updateCommands(t,n)}}function BJ(e,t){let n,i,a,s,c;const l=Object(o["a"])(e.BOXES_LENGTH,0),u=Object(o["a"])(e.CYLINDERS_LENGTH,0),h=Object(o["a"])(e.ELLIPSOIDS_LENGTH,0),d=Object(o["a"])(e.SPHERES_LENGTH,0);if(l>0&&Object(r["a"])(e.BOX_BATCH_IDS)){const i=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,l)}if(u>0&&Object(r["a"])(e.CYLINDER_BATCH_IDS)){const n=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,u)}if(h>0&&Object(r["a"])(e.ELLIPSOID_BATCH_IDS)){const n=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,n,h)}if(d>0&&Object(r["a"])(e.SPHERE_BATCH_IDS)){const n=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,n,d)}const f=Object(r["a"])(n)||Object(r["a"])(i)||Object(r["a"])(a)||Object(r["a"])(s),p=l>0&&!Object(r["a"])(n)||u>0&&!Object(r["a"])(i)||h>0&&!Object(r["a"])(a)||d>0&&!Object(r["a"])(s);if(f&&p)throw new ye["a"]("If one group of batch ids is defined, then all batch ids must be defined.");const m=!Object(r["a"])(n)&&!Object(r["a"])(i)&&!Object(r["a"])(a)&&!Object(r["a"])(s);if(m){let e=0;if(!Object(r["a"])(n)&&l>0)for(n=new Uint16Array(l),c=0;c<l;++c)n[c]=e++;if(!Object(r["a"])(i)&&u>0)for(i=new Uint16Array(u),c=0;c<u;++c)i[c]=e++;if(!Object(r["a"])(a)&&h>0)for(a=new Uint16Array(h),c=0;c<h;++c)a[c]=e++;if(!Object(r["a"])(s)&&d>0)for(s=new Uint16Array(d),c=0;c<d;++c)s[c]=e++}return{boxes:n,cylinders:i,ellipsoids:a,spheres:s}}Object.defineProperties(MJ.prototype,{featuresLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return Object(r["a"])(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return Object(r["a"])(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const FJ=Uint32Array.BYTES_PER_ELEMENT;function zJ(e,t,n){n=Object(o["a"])(n,0);const i=new Uint8Array(t),a=new DataView(t);n+=FJ;const s=a.getUint32(n,!0);if(1!==s)throw new ye["a"](`Only Geometry tile version 1 is supported.  Version ${s} is not.`);n+=FJ;const c=a.getUint32(n,!0);if(n+=FJ,0===c)return void e._readyPromise.resolve(e);const l=a.getUint32(n,!0);if(n+=FJ,0===l)throw new ye["a"]("Feature table must have a byte length greater than zero");const u=a.getUint32(n,!0);n+=FJ;const h=a.getUint32(n,!0);n+=FJ;const d=a.getUint32(n,!0);n+=FJ;const f=Fh(i,n,l);n+=l;const p=new Uint8Array(t,n,u);let m,_;n+=u,h>0&&(m=Fh(i,n,h),n+=h,d>0&&(_=new Uint8Array(t,n,d),_=new Uint8Array(_)));const b=Object(o["a"])(f.BOXES_LENGTH,0),y=Object(o["a"])(f.CYLINDERS_LENGTH,0),v=Object(o["a"])(f.ELLIPSOIDS_LENGTH,0),O=Object(o["a"])(f.SPHERES_LENGTH,0),A=b+y+v+O,w=new UK(e,A,m,_,NJ(e));if(e._batchTable=w,0===A)return;const T=e.tile.computedTransform;let C;Object(r["a"])(f.RTC_CENTER)&&(C=g.unpack(f.RTC_CENTER),Me.multiplyByPoint(T,C,C));const E=BJ(f,p);if(b>0||y>0||v>0||O>0){let t,n,i,o;if(b>0){const e=p.byteOffset+f.BOXES.byteOffset;t=new Float32Array(p.buffer,e,LJ.packedBoxLength*b)}if(y>0){const e=p.byteOffset+f.CYLINDERS.byteOffset;n=new Float32Array(p.buffer,e,LJ.packedCylinderLength*y)}if(v>0){const e=p.byteOffset+f.ELLIPSOIDS.byteOffset;i=new Float32Array(p.buffer,e,LJ.packedEllipsoidLength*v)}if(O>0){const e=p.byteOffset+f.SPHERES.byteOffset;o=new Float32Array(p.buffer,e,LJ.packedSphereLength*O)}return e._geometries=new LJ({boxes:t,boxBatchIds:E.boxes,cylinders:n,cylinderBatchIds:E.cylinders,ellipsoids:i,ellipsoidBatchIds:E.ellipsoids,spheres:o,sphereBatchIds:E.spheres,center:C,modelMatrix:T,batchTable:w,boundingVolume:e.tile.boundingVolume.boundingVolume}),e._geometries.readyPromise.then((function(){return e}))}return Promise.resolve(e)}function kJ(e){const t=e.featuresLength;if(!Object(r["a"])(e._features)&&t>0){const n=new Array(t);Object(r["a"])(e._geometries)&&e._geometries.createFeatures(e,n),e._features=n}}MJ.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},MJ.prototype.getFeature=function(e){const t=this.featuresLength;if(!Object(r["a"])(e)||e<0||e>=t)throw new a["a"](`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return kJ(this),this._features[e]},MJ.prototype.applyDebugSettings=function(e,t){Object(r["a"])(this._geometries)&&this._geometries.applyDebugSettings(e,t)},MJ.prototype.applyStyle=function(e){kJ(this),Object(r["a"])(this._geometries)&&this._geometries.applyStyle(e,this._features)},MJ.prototype.update=function(e,t){Object(r["a"])(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),Object(r["a"])(this._batchTable)&&this._geometries._ready&&this._batchTable.update(e,t)},MJ.prototype.isDestroyed=function(){return!1},MJ.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Wc(this)};var UJ=MJ;function VJ(e,t){return Object(r["a"])(e)&&Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions[t])}var HJ=VJ;function GJ(e){const t=e.lengthBits;let n=e.availableCount;i["a"].typeOf.number("options.lengthBits",t);const a=e.constant,s=e.bitstream;if(Object(r["a"])(a))n=t;else{const i=Math.ceil(t/8);if(s.length!==i)throw new ye["a"](`Availability bitstream must be exactly ${i} bytes long to store ${t} bits. Actual bitstream was ${s.length} bytes long.`);const a=Object(o["a"])(e.computeAvailableCountEnabled,!1);!Object(r["a"])(n)&&a&&(n=WJ(s,t))}this._lengthBits=t,this._availableCount=n,this._constant=a,this._bitstream=s}function WJ(e,t){let n=0;for(let i=0;i<t;i++){const t=i>>3,o=i%8;n+=e[t]>>o&1}return n}Object.defineProperties(GJ.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),GJ.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new a["a"]("Bit index out of bounds.");if(Object(r["a"])(this._constant))return this._constant;const t=e>>3,n=e%8;return 1===(this._bitstream[t]>>n&1)};var qJ=GJ;function YJ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.metadataTable,n=e.class,r=e.entityId,a=e.propertyTableJson;i["a"].typeOf.object("options.metadataTable",t),i["a"].typeOf.object("options.class",n),i["a"].typeOf.number("options.entityId",r),i["a"].typeOf.object("options.propertyTableJson",a),this._class=n,this._metadataTable=t,this._entityId=r,this._extensions=a.extensions,this._extras=a.extras}Object.defineProperties(YJ.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),YJ.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},YJ.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},YJ.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},YJ.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},YJ.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},YJ.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},YJ.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};var XJ=YJ;const KJ={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case KJ.OCTREE:return 8;case KJ.QUADTREE:return 4;default:throw new a["a"]("subdivisionScheme is not a valid value.")}}};var $J=Object.freeze(KJ);function JJ(){}Object.defineProperties(JJ.prototype,{class:{get:function(){a["a"].throwInstantiationError()}}}),JJ.prototype.hasProperty=function(e){a["a"].throwInstantiationError()},JJ.prototype.hasPropertyBySemantic=function(e){a["a"].throwInstantiationError()},JJ.prototype.getPropertyIds=function(e){a["a"].throwInstantiationError()},JJ.prototype.getProperty=function(e){a["a"].throwInstantiationError()},JJ.prototype.setProperty=function(e,t){a["a"].throwInstantiationError()},JJ.prototype.getPropertyBySemantic=function(e){a["a"].throwInstantiationError()},JJ.prototype.setPropertyBySemantic=function(e,t){a["a"].throwInstantiationError()},JJ.hasProperty=function(e,t,n){if(i["a"].typeOf.string("propertyId",e),i["a"].typeOf.object("properties",t),i["a"].typeOf.object("classDefinition",n),Object(r["a"])(t[e]))return!0;const o=n.properties;if(!Object(r["a"])(o))return!1;const a=o[e];return!(!Object(r["a"])(a)||!Object(r["a"])(a.default))},JJ.hasPropertyBySemantic=function(e,t,n){i["a"].typeOf.string("semantic",e),i["a"].typeOf.object("properties",t),i["a"].typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!Object(r["a"])(o))return!1;const a=o[e];return Object(r["a"])(a)},JJ.getPropertyIds=function(e,t,n){i["a"].typeOf.object("properties",e),i["a"].typeOf.object("classDefinition",t),n=Object(r["a"])(n)?n:[],n.length=0;for(const i in e)e.hasOwnProperty(i)&&Object(r["a"])(e[i])&&n.push(i);const o=t.properties;if(Object(r["a"])(o))for(const i in o)o.hasOwnProperty(i)&&!Object(r["a"])(e[i])&&Object(r["a"])(o[i].default)&&n.push(i);return n},JJ.getProperty=function(e,t,n){if(i["a"].typeOf.string("propertyId",e),i["a"].typeOf.object("properties",t),i["a"].typeOf.object("classDefinition",n),!Object(r["a"])(n.properties[e]))throw new a["a"](`Class definition missing property ${e}`);const o=n.properties[e];let s=t[e];Array.isArray(s)&&(s=s.slice());const c=!0;return s=o.handleNoData(s),!Object(r["a"])(s)&&Object(r["a"])(o.default)?(s=Object(RL["a"])(o.default,!0),o.unpackVectorAndMatrixTypes(s,c)):Object(r["a"])(s)?(s=o.normalize(s),s=o.applyValueTransform(s),o.unpackVectorAndMatrixTypes(s,c)):void 0},JJ.setProperty=function(e,t,n,o){if(i["a"].typeOf.string("propertyId",e),i["a"].defined("value",t),i["a"].typeOf.object("properties",n),i["a"].typeOf.object("classDefinition",o),!Object(r["a"])(n[e]))return!1;let a;Array.isArray(t)&&(t=t.slice());const s=o.properties;Object(r["a"])(s)&&(a=s[e]);const c=!0;return Object(r["a"])(a)&&(t=a.packVectorAndMatrixTypes(t,c),t=a.unapplyValueTransform(t),t=a.unnormalize(t)),n[e]=t,!0},JJ.getPropertyBySemantic=function(e,t,n){i["a"].typeOf.string("semantic",e),i["a"].typeOf.object("properties",t),i["a"].typeOf.object("classDefinition",n);const o=n.propertiesBySemantic;if(!Object(r["a"])(o))return;const a=o[e];return Object(r["a"])(a)?JJ.getProperty(a.id,t,n):void 0},JJ.setPropertyBySemantic=function(e,t,n,o){i["a"].typeOf.string("semantic",e),i["a"].defined("value",t),i["a"].typeOf.object("properties",n),i["a"].typeOf.object("classDefinition",o);const a=o.propertiesBySemantic;if(!Object(r["a"])(a))return!1;const s=o.propertiesBySemantic[e];return!!Object(r["a"])(s)&&JJ.setProperty(s.id,t,n,o)};var QJ=JJ;function ZJ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.subtreeMetadata,n=e.class;i["a"].typeOf.object("options.subtreeMetadata",t),i["a"].typeOf.object("options.class",n);const a=Object(r["a"])(t.properties)?t.properties:{};this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(ZJ.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),ZJ.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},ZJ.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},ZJ.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},ZJ.prototype.getProperty=function(e){return QJ.getProperty(e,this._properties,this._class)},ZJ.prototype.setProperty=function(e,t){return QJ.setProperty(e,t,this._properties,this._class)},ZJ.prototype.getPropertyBySemantic=function(e){return QJ.getPropertyBySemantic(e,this._properties,this._class)},ZJ.prototype.setPropertyBySemantic=function(e,t){return QJ.setPropertyBySemantic(e,t,this._properties,this._class)};var eQ=ZJ;const tQ={INT8:"INT8",UINT8:"UINT8",INT16:"INT16",UINT16:"UINT16",INT32:"INT32",UINT32:"UINT32",INT64:"INT64",UINT64:"UINT64",FLOAT32:"FLOAT32",FLOAT64:"FLOAT64",getMinimum:function(e){if(!tQ.isNumericType(e))throw new a["a"]("type must be a numeric type");switch(e){case tQ.INT8:return-128;case tQ.UINT8:return 0;case tQ.INT16:return-32768;case tQ.UINT16:return 0;case tQ.INT32:return-2147483648;case tQ.UINT32:return 0;case tQ.INT64:return Or.supportsBigInt()?BigInt("-9223372036854775808"):-Math.pow(2,63);case tQ.UINT64:return Or.supportsBigInt()?BigInt(0):0;case tQ.FLOAT32:return-34028234663852886e22;case tQ.FLOAT64:return-Number.MAX_VALUE}},getMaximum:function(e){if(!tQ.isNumericType(e))throw new a["a"]("type must be a numeric type");switch(e){case tQ.INT8:return 127;case tQ.UINT8:return 255;case tQ.INT16:return 32767;case tQ.UINT16:return 65535;case tQ.INT32:return 2147483647;case tQ.UINT32:return 4294967295;case tQ.INT64:return Or.supportsBigInt()?BigInt("9223372036854775807"):Math.pow(2,63)-1;case tQ.UINT64:return Or.supportsBigInt()?BigInt("18446744073709551615"):Math.pow(2,64)-1;case tQ.FLOAT32:return 34028234663852886e22;case tQ.FLOAT64:return Number.MAX_VALUE}},isNumericType:function(e){switch(i["a"].typeOf.string("type",e),e){case tQ.INT8:case tQ.UINT8:case tQ.INT16:case tQ.UINT16:case tQ.INT32:case tQ.UINT32:case tQ.INT64:case tQ.UINT64:case tQ.FLOAT32:case tQ.FLOAT64:return!0;default:return!1}},isIntegerType:function(e){switch(i["a"].typeOf.string("type",e),e){case tQ.INT8:case tQ.UINT8:case tQ.INT16:case tQ.UINT16:case tQ.INT32:case tQ.UINT32:case tQ.INT64:case tQ.UINT64:return!0;default:return!1}},isUnsignedIntegerType:function(e){switch(i["a"].typeOf.string("type",e),e){case tQ.UINT8:case tQ.UINT16:case tQ.UINT32:case tQ.UINT64:return!0;default:return!1}},isVectorCompatible:function(e){switch(i["a"].typeOf.string("type",e),e){case tQ.INT8:case tQ.UINT8:case tQ.INT16:case tQ.UINT16:case tQ.INT32:case tQ.UINT32:case tQ.FLOAT32:case tQ.FLOAT64:return!0;default:return!1}},normalize:function(e,t){if("number"!==typeof e&&"bigint"!==typeof e)throw new a["a"]("value must be a number or a BigInt");if(!tQ.isIntegerType(t))throw new a["a"]("type must be an integer type");return Math.max(Number(e)/Number(tQ.getMaximum(t)),-1)},unnormalize:function(e,t){if(i["a"].typeOf.number("value",e),!tQ.isIntegerType(t))throw new a["a"]("type must be an integer type");const n=tQ.getMaximum(t),o=tQ.isUnsignedIntegerType(t)?0:-n;return e=s["a"].sign(e)*Math.round(Math.abs(e)*Number(n)),t!==tQ.INT64&&t!==tQ.UINT64||!Or.supportsBigInt()||(e=BigInt(e)),e>n?n:e<o?o:e},applyValueTransform:function(e,t,n){return n*e+t},unapplyValueTransform:function(e,t,n){return 0===n?0:(e-t)/n},getSizeInBytes:function(e){if(!tQ.isNumericType(e))throw new a["a"]("type must be a numeric type");switch(e){case tQ.INT8:case tQ.UINT8:return 1;case tQ.INT16:case tQ.UINT16:return 2;case tQ.INT32:case tQ.UINT32:return 4;case tQ.INT64:case tQ.UINT64:return 8;case tQ.FLOAT32:return 4;case tQ.FLOAT64:return 8}}};var nQ=Object.freeze(tQ);const iQ={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",BOOLEAN:"BOOLEAN",STRING:"STRING",ENUM:"ENUM",isVectorType:function(e){switch(i["a"].typeOf.string("type",e),e){case iQ.VEC2:case iQ.VEC3:case iQ.VEC4:return!0;default:return!1}},isMatrixType:function(e){switch(i["a"].typeOf.string("type",e),e){case iQ.MAT2:case iQ.MAT3:case iQ.MAT4:return!0;default:return!1}},getComponentCount:function(e){switch(i["a"].typeOf.string("type",e),e){case iQ.SCALAR:case iQ.STRING:case iQ.ENUM:case iQ.BOOLEAN:return 1;case iQ.VEC2:return 2;case iQ.VEC3:return 3;case iQ.VEC4:return 4;case iQ.MAT2:return 4;case iQ.MAT3:return 9;case iQ.MAT4:return 16;default:throw new a["a"](`Invalid metadata type ${e}`)}},getMathType:function(e){switch(e){case iQ.VEC2:return Gt;case iQ.VEC3:return g;case iQ.VEC4:return be;case iQ.MAT2:return ic;case iQ.MAT3:return ce;case iQ.MAT4:return Me;default:return}}};var oQ=Object.freeze(iQ);function rQ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.id,n=e.property;i["a"].typeOf.string("options.id",t),i["a"].typeOf.object("options.property",n),i["a"].typeOf.string("options.property.type",n.type);const a=aQ(n),s=sQ(n,e.enums),c=s.componentType,l=Object(r["a"])(c)&&nQ.isIntegerType(c)&&Object(o["a"])(n.normalized,!1);this._id=t,this._name=n.name,this._description=n.description,this._semantic=n.semantic,this._isLegacyExtension=a,this._type=s.type,this._componentType=c,this._enumType=s.enumType,this._valueType=s.valueType,this._isArray=s.isArray,this._isVariableLengthArray=s.isVariableLengthArray,this._arrayLength=s.arrayLength,this._min=n.min,this._max=n.max,this._normalized=l;let u=n.offset,h=n.scale;const d=Object(r["a"])(u)||Object(r["a"])(h),f=!0;let p;Object(r["a"])(u)||(u=this.expandConstant(0,f)),Object(r["a"])(h)||(h=this.expandConstant(1,f)),this._offset=u,this._scale=h,this._hasValueTransform=d,this._noData=n.noData,this._default=n.default,p=!!Object(r["a"])(a)&&(a?!Object(r["a"])(n.optional)||!n.optional:Object(o["a"])(n.required,!1)),this._required=p,this._extras=n.extras,this._extensions=n.extensions}function aQ(e){if("ARRAY"===e.type)return!0;const t=e.type;return t!==oQ.SCALAR&&!oQ.isMatrixType(t)&&!oQ.isVectorType(t)&&(!!nQ.isNumericType(t)||!(Object(r["a"])(e.noData)||Object(r["a"])(e.scale)||Object(r["a"])(e.offset)||Object(r["a"])(e.required)||Object(r["a"])(e.count)||Object(r["a"])(e.array))&&(!Object(r["a"])(e.optional)&&void 0))}function sQ(e,t){const n=e.type,i=e.componentType,o="ARRAY"===n;let s,c,l,u;if(o?(s=!0,c=e.componentCount,l=!Object(r["a"])(c)):e.array?(s=!0,c=e.count,l=!Object(r["a"])(e.count)):(s=!1,c=void 0,l=!1),Object(r["a"])(e.enumType)&&(u=t[e.enumType]),n===oQ.ENUM)return{type:n,componentType:void 0,enumType:u,valueType:u.valueType,isArray:s,isVariableLengthArray:l,arrayLength:c};if(o&&i===oQ.ENUM)return{type:i,componentType:void 0,enumType:u,valueType:u.valueType,isArray:s,isVariableLengthArray:l,arrayLength:c};if(n===oQ.SCALAR||oQ.isMatrixType(n)||oQ.isVectorType(n))return{type:n,componentType:i,enumType:void 0,valueType:i,isArray:s,isVariableLengthArray:l,arrayLength:c};if(n===oQ.BOOLEAN||n===oQ.STRING)return{type:n,componentType:void 0,enumType:void 0,valueType:void 0,isArray:s,isVariableLengthArray:l,arrayLength:c};if(o&&(i===oQ.BOOLEAN||i===oQ.STRING))return{type:i,componentType:void 0,enumType:void 0,valueType:void 0,isArray:s,isVariableLengthArray:l,arrayLength:c};if(Object(r["a"])(i)&&nQ.isNumericType(i))return{type:oQ.SCALAR,componentType:i,enumType:void 0,valueType:i,isArray:s,isVariableLengthArray:l,arrayLength:c};if(nQ.isNumericType(n))return{type:oQ.SCALAR,componentType:n,enumType:void 0,valueType:n,isArray:s,isVariableLengthArray:l,arrayLength:c};throw new a["a"](`unknown metadata type {type: ${n}, componentType: ${i})`)}function cQ(e,t){if(!Array.isArray(e))return e===t;if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!cQ(e[n],t[n]))return!1;return!0}function lQ(e,t){if(!Array.isArray(t))return`value ${t} must be an array`;const n=t.length;if(!e._isVariableLengthArray&&n!==e._arrayLength)return"Array length does not match property.arrayLength";for(let i=0;i<n;i++){const n=uQ(e,t[i]);if(Object(r["a"])(n))return n}}function uQ(e,t){const n=e._type,i=e._componentType,o=e._enumType,r=e._normalized;return oQ.isVectorType(n)?hQ(t,n,i):oQ.isMatrixType(n)?dQ(t,n,i):n===oQ.STRING?fQ(t):n===oQ.BOOLEAN?pQ(t):n===oQ.ENUM?mQ(t,o):_Q(t,i,r)}function hQ(e,t,n){return nQ.isVectorCompatible(n)?t!==oQ.VEC2||e instanceof Gt?t!==oQ.VEC3||e instanceof g?t!==oQ.VEC4||e instanceof be?void 0:`vector value ${e} must be a Cartesian4`:`vector value ${e} must be a Cartesian3`:`vector value ${e} must be a Cartesian2`:`componentType ${n} is incompatible with vector type ${t}`}function dQ(e,t,n){return nQ.isVectorCompatible(n)?t!==oQ.MAT2||e instanceof ic?t!==oQ.MAT3||e instanceof ce?t!==oQ.MAT4||e instanceof Me?void 0:`matrix value ${e} must be a Matrix4`:`matrix value ${e} must be a Matrix3`:`matrix value ${e} must be a Matrix2`:`componentType ${n} is incompatible with matrix type ${t}`}function fQ(e){if("string"!==typeof e)return gQ(e,oQ.STRING)}function pQ(e){if("boolean"!==typeof e)return gQ(e,oQ.BOOLEAN)}function mQ(e,t){const n=typeof e;if(Object(r["a"])(t))return"string"===n&&Object(r["a"])(t.valuesByName[e])?void 0:`value ${e} is not a valid enum name for ${t.id}`}function _Q(e,t,n){const i=typeof e;switch(t){case nQ.INT8:case nQ.UINT8:case nQ.INT16:case nQ.UINT16:case nQ.INT32:case nQ.UINT32:case nQ.FLOAT32:case nQ.FLOAT64:return"number"!==i?gQ(e,t):isFinite(e)?yQ(e,t,n):vQ(e,t);case nQ.INT64:case nQ.UINT64:return"number"!==i&&"bigint"!==i?gQ(e,t):"number"!==i||isFinite(e)?yQ(e,t,n):vQ(e,t)}}function gQ(e,t){return`value ${e} does not match type ${t}`}function bQ(e,t,n){let i=`value ${e} is out of range for type ${t}`;return n&&(i+=" (normalized)"),i}function yQ(e,t,n){if(n){const i=nQ.isUnsignedIntegerType(t)?0:-1,o=1;return e<i||e>o?bQ(e,t,n):void 0}if(e<nQ.getMinimum(t)||e>nQ.getMaximum(t))return bQ(e,t,n)}function vQ(e,t){return`value ${e} of type ${t} must be finite`}function OQ(e,t,n){if(!Array.isArray(e))return n(e,t);for(let i=0;i<e.length;i++)e[i]=OQ(e[i],t,n);return e}Object.defineProperties(rQ.prototype,{id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},type:{get:function(){return this._type}},enumType:{get:function(){return this._enumType}},componentType:{get:function(){return this._componentType}},valueType:{get:function(){return this._valueType}},isArray:{get:function(){return this._isArray}},isVariableLengthArray:{get:function(){return this._isVariableLengthArray}},arrayLength:{get:function(){return this._arrayLength}},normalized:{get:function(){return this._normalized}},max:{get:function(){return this._max}},min:{get:function(){return this._min}},noData:{get:function(){return this._noData}},default:{get:function(){return this._default}},required:{get:function(){return this._required}},semantic:{get:function(){return this._semantic}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),rQ.prototype.normalize=function(e){return this._normalized?OQ(e,this._valueType,nQ.normalize):e},rQ.prototype.unnormalize=function(e){return this._normalized?OQ(e,this._valueType,nQ.unnormalize):e},rQ.prototype.applyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:rQ.valueTransformInPlace(e,this._offset,this._scale,nQ.applyValueTransform)},rQ.prototype.unapplyValueTransform=function(e){return!this._hasValueTransform||this._isVariableLengthArray?e:rQ.valueTransformInPlace(e,this._offset,this._scale,nQ.unapplyValueTransform)},rQ.prototype.expandConstant=function(e,t){t=Object(o["a"])(t,!1);const n=this._isArray,i=this._arrayLength,r=oQ.getComponentCount(this._type),a=n&&r>1;if(!n&&1===r)return e;if(!n)return new Array(r).fill(e);if(!a)return new Array(i).fill(e);if(!t)return new Array(this._arrayLength*r).fill(e);const s=new Array(r).fill(e);return new Array(this._arrayLength).fill(s)},rQ.prototype.handleNoData=function(e){const t=this._noData;return Object(r["a"])(t)&&cQ(e,t)?void 0:e},rQ.prototype.unpackVectorAndMatrixTypes=function(e,t){t=Object(o["a"])(t,!1);const n=oQ.getMathType(this._type),i=this._isArray,a=oQ.getComponentCount(this._type),s=i&&a>1;return Object(r["a"])(n)?t&&s?e.map((function(e){return n.unpack(e)})):i?n.unpackArray(e):n.unpack(e):e},rQ.prototype.packVectorAndMatrixTypes=function(e,t){t=Object(o["a"])(t,!1);const n=oQ.getMathType(this._type),i=this._isArray,a=oQ.getComponentCount(this._type),s=i&&a>1;return Object(r["a"])(n)?t&&s?e.map((function(e){return n.pack(e,[])})):i?n.packArray(e,[]):n.pack(e,[]):e},rQ.prototype.validate=function(e){if(Object(r["a"])(e)||!Object(r["a"])(this._default))return this._required&&!Object(r["a"])(e)?"required property must have a value":this._isArray?lQ(this,e):uQ(this,e)},rQ.valueTransformInPlace=function(e,t,n,i){if(!Array.isArray(e))return i(e,t,n);for(let o=0;o<e.length;o++)e[o]=rQ.valueTransformInPlace(e[o],t[o],n[o],i);return e};var AQ=rQ;function wQ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.count,n=e.property,a=e.classProperty,s=e.bufferViews;i["a"].typeOf.number.greaterThan("options.count",t,0),i["a"].typeOf.object("options.property",n),i["a"].typeOf.object("options.classProperty",a),i["a"].typeOf.object("options.bufferViews",s);const c=a.type,l=a.isArray,u=a.isVariableLengthArray;let h=a.valueType;const d=a.enumType,f=c===oQ.STRING,p=c===oQ.BOOLEAN;let m,_=0;if(u){let e=Object(o["a"])(n.arrayOffsetType,n.offsetType);e=Object(o["a"])(nQ[e],nQ.UINT32);const i=Object(o["a"])(n.arrayOffsets,n.arrayOffsetBufferView);m=new HQ(s[i],e,t+1),_+=m.typedArray.byteLength}const g=oQ.getComponentCount(c);let b;b=u?m.get(t)-m.get(0):l?t*a.arrayLength:t;const y=g*b;let v,O;if(f){let e=Object(o["a"])(n.stringOffsetType,n.offsetType);e=Object(o["a"])(nQ[e],nQ.UINT32);const t=Object(o["a"])(n.stringOffsets,n.stringOffsetBufferView);v=new HQ(s[t],e,y+1),_+=v.typedArray.byteLength}(f||p)&&(h=nQ.UINT8),O=f?v.get(y)-v.get(0):p?Math.ceil(y/8):y;const A=Object(o["a"])(n.values,n.bufferView),w=new HQ(s[A],h,O);_+=w.typedArray.byteLength;let T=n.offset,C=n.scale;const E=a.hasValueTransform||Object(r["a"])(T)||Object(r["a"])(C);let x,S;T=Object(o["a"])(T,a.offset),C=Object(o["a"])(C,a.scale),T=TQ(T),C=TQ(C);const I=this;f?x=function(e){return IQ(e,I._values,I._stringOffsets)}:p?(x=function(e){return DQ(e,I._values)},S=function(e,t){PQ(e,I._values,t)}):Object(r["a"])(d)?(x=function(e){const t=I._values.get(e);return d.namesByValue[t]},S=function(e,t){const n=d.valuesByName[t];I._values.set(e,n)}):(x=function(e){return I._values.get(e)},S=function(e,t){I._values.set(e,t)}),this._arrayOffsets=m,this._stringOffsets=v,this._values=w,this._classProperty=a,this._count=t,this._vectorComponentCount=g,this._min=n.min,this._max=n.max,this._offset=T,this._scale=C,this._hasValueTransform=E,this._getValue=x,this._setValue=S,this._unpackedValues=void 0,this._extras=n.extras,this._extensions=n.extensions,this._byteLength=_}function TQ(e){if(!Array.isArray(e))return e;const t=[];for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}function CQ(e,t){const n=e._count;if(!Object(r["a"])(t)||t<0||t>=n){const e=n-1;throw new a["a"](`index is required and between zero and count - 1. Actual value: ${e}`)}}function EQ(e,t){BQ(e)&&zQ(e);const n=e._classProperty,i=n.isArray,o=n.type,a=oQ.getComponentCount(o);if(Object(r["a"])(e._unpackedValues)){const n=e._unpackedValues[t];return i?Object(RL["a"])(n,!0):n}return i||1!==a?xQ(e,n,t):e._getValue(t)}function xQ(e,t,n){let i,r;if(t.isVariableLengthArray){i=e._arrayOffsets.get(n),r=e._arrayOffsets.get(n+1)-i;const o=oQ.getComponentCount(t.type);i*=o,r*=o}else{const a=Object(o["a"])(t.arrayLength,1),s=a*e._vectorComponentCount;i=n*s,r=s}const a=new Array(r);for(let o=0;o<r;o++)a[o]=e._getValue(i+o);return a}function SQ(e,t,n){FQ(e,t,n)&&zQ(e);const i=e._classProperty,a=i.isArray,s=i.type,c=oQ.getComponentCount(s);if(Object(r["a"])(e._unpackedValues))return i.isArray&&(n=Object(RL["a"])(n,!0)),void(e._unpackedValues[t]=n);if(!a&&1===c)return void e._setValue(t,n);let l,u;if(i.isVariableLengthArray)l=e._arrayOffsets.get(t),u=e._arrayOffsets.get(t+1)-l;else{const n=Object(o["a"])(i.arrayLength,1),r=n*e._vectorComponentCount;l=t*r,u=r}for(let o=0;o<u;++o)e._setValue(l+o,n[o])}function IQ(e,t,n){const i=n.get(e),o=n.get(e+1)-i;return Nh(t.typedArray,i,o)}function DQ(e,t){const n=e>>3,i=e%8;return 1===(t.typedArray[n]>>i&1)}function PQ(e,t,n){const i=e>>3,o=e%8;n?t.typedArray[i]|=1<<o:t.typedArray[i]&=~(1<<o)}function jQ(e,t){const n=t.dataView,i=8*e;let o=0;const r=(128&n.getUint8(i+7))>0;let a=!0;for(let s=0;s<8;++s){let e=n.getUint8(i+s);r&&(a?0!==e&&(e=255&~(e-1),a=!1):e=255&~e),o+=e*Math.pow(256,s)}return r&&(o=-o),o}function RQ(e,t){const n=t.dataView,i=8*e;let o=BigInt(0);const r=(128&n.getUint8(i+7))>0;let a=!0;for(let s=0;s<8;++s){let e=n.getUint8(i+s);r&&(a?0!==e&&(e=255&~(e-1),a=!1):e=255&~e),o+=BigInt(e)*(BigInt(1)<<BigInt(8*s))}return r&&(o=-o),o}function LQ(e,t){const n=t.dataView,i=8*e,o=n.getUint32(i,!0),r=n.getUint32(i+4,!0),a=o+4294967296*r;return a}function MQ(e,t){const n=t.dataView,i=8*e,o=BigInt(n.getUint32(i,!0)),r=BigInt(n.getUint32(i+4,!0)),a=o+BigInt(4294967296)*r;return a}function NQ(e){switch(e){case nQ.INT8:return Ks.BYTE;case nQ.UINT8:return Ks.UNSIGNED_BYTE;case nQ.INT16:return Ks.SHORT;case nQ.UINT16:return Ks.UNSIGNED_SHORT;case nQ.INT32:return Ks.INT;case nQ.UINT32:return Ks.UNSIGNED_INT;case nQ.FLOAT32:return Ks.FLOAT;case nQ.FLOAT64:return Ks.DOUBLE}}function BQ(e){if(Object(r["a"])(e._unpackedValues))return!1;const t=e._classProperty,n=t.type,i=t.valueType;return n===oQ.STRING||(i===nQ.INT64&&!Or.supportsBigInt64Array()||i===nQ.UINT64&&!Or.supportsBigUint64Array())}function FQ(e,t,n){if(BQ(e))return!0;const i=e._arrayOffsets;if(Object(r["a"])(i)){const e=i.get(t+1)-i.get(t),o=n.length;if(e!==o)return!0}return!1}function zQ(e){e._unpackedValues=kQ(e),e._arrayOffsets=void 0,e._stringOffsets=void 0,e._values=void 0}function kQ(e){const t=e._count,n=new Array(t),i=e._classProperty,o=i.isArray,r=i.type,a=oQ.getComponentCount(r);if(!o&&1===a){for(let i=0;i<t;++i)n[i]=e._getValue(i);return n}for(let s=0;s<t;s++)n[s]=xQ(e,i,s);return n}function UQ(e,t){const n=e._classProperty,i=n.isVariableLengthArray;return!e._hasValueTransform||i?t:AQ.valueTransformInPlace(t,e._offset,e._scale,nQ.applyValueTransform)}function VQ(e,t){const n=e._classProperty,i=n.isVariableLengthArray;return!e._hasValueTransform||i?t:AQ.valueTransformInPlace(t,e._offset,e._scale,nQ.unapplyValueTransform)}function HQ(e,t,n){const i=this;let o,a,s;if(t===nQ.INT64)Or.supportsBigInt()?Or.supportsBigInt64Array()?(o=new BigInt64Array(e.buffer,e.byteOffset,n),s=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return RQ(e,i)}):(ab("INT64 type is not fully supported on this platform. Values greater than 2^53 - 1 or less than -(2^53 - 1) may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return jQ(e,i)});else if(t===nQ.UINT64)Or.supportsBigInt()?Or.supportsBigUint64Array()?(o=new BigUint64Array(e.buffer,e.byteOffset,n),s=function(e,t){i.typedArray[e]=BigInt(t)}):(o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return MQ(e,i)}):(ab("UINT64 type is not fully supported on this platform. Values greater than 2^53 - 1 may lose precision when read."),o=new Uint8Array(e.buffer,e.byteOffset,8*n),a=function(e){return LQ(e,i)});else{const r=NQ(t);o=Ks.createArrayBufferView(r,e.buffer,e.byteOffset,n),s=function(e,t){i.typedArray[e]=t}}Object(r["a"])(a)||(a=function(e){return i.typedArray[e]}),this.typedArray=o,this.dataView=new DataView(o.buffer,o.byteOffset),this.get=a,this.set=s,this._componentType=t}Object.defineProperties(wQ.prototype,{hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){return this._byteLength}}}),wQ.prototype.get=function(e){CQ(this,e);let t=EQ(this,e);return t=this._classProperty.handleNoData(t),Object(r["a"])(t)?(t=this._classProperty.normalize(t),t=UQ(this,t),this._classProperty.unpackVectorAndMatrixTypes(t)):(t=this._classProperty.default,this._classProperty.unpackVectorAndMatrixTypes(t))},wQ.prototype.set=function(e,t){const n=this._classProperty;i["a"].defined("value",t),CQ(this,e);const o=n.validate(t);if(Object(r["a"])(o))throw new a["a"](o);t=n.packVectorAndMatrixTypes(t),t=VQ(this,t),t=n.unnormalize(t),SQ(this,e,t)},wQ.prototype.getTypedArray=function(){if(Object(r["a"])(this._values))return this._values.typedArray};var GQ=wQ;function WQ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.count,n=e.class;i["a"].typeOf.number.greaterThan("options.count",t,0),i["a"].typeOf.object("options.class",n);let a=0;const s={};if(Object(r["a"])(e.properties))for(const i in e.properties)if(e.properties.hasOwnProperty(i)){const o=new GQ({count:t,property:e.properties[i],classProperty:n.properties[i],bufferViews:e.bufferViews});s[i]=o,a+=o.byteLength}this._count=t,this._class=n,this._properties=s,this._byteLength=a}function qQ(e,t){const n=e.properties;if(!Object(r["a"])(n))return;const i=n[t];if(Object(r["a"])(i)&&Object(r["a"])(i.default)){let e=i.default;return i.isArray&&(e=Object(RL["a"])(e,!0)),e=i.normalize(e),i.unpackVectorAndMatrixTypes(e)}}Object.defineProperties(WQ.prototype,{count:{get:function(){return this._count}},class:{get:function(){return this._class}},byteLength:{get:function(){return this._byteLength}}}),WQ.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},WQ.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},WQ.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},WQ.prototype.getProperty=function(e,t){i["a"].typeOf.string("propertyId",t);const n=this._properties[t];let o;return o=Object(r["a"])(n)?n.get(e):qQ(this._class,t),o},WQ.prototype.setProperty=function(e,t,n){i["a"].typeOf.string("propertyId",t);const o=this._properties[t];return!!Object(r["a"])(o)&&(o.set(e,n),!0)},WQ.prototype.getPropertyBySemantic=function(e,t){let n;i["a"].typeOf.string("semantic",t);const o=this._class.propertiesBySemantic;if(Object(r["a"])(o)&&(n=o[t]),Object(r["a"])(n))return this.getProperty(e,n.id)},WQ.prototype.setPropertyBySemantic=function(e,t,n){let o;i["a"].typeOf.string("semantic",t);const a=this._class.propertiesBySemantic;return Object(r["a"])(a)&&(o=a[t]),!!Object(r["a"])(o)&&this.setProperty(e,o.id,n)},WQ.prototype.getPropertyTypedArray=function(e){i["a"].typeOf.string("propertyId",e);const t=this._properties[e];if(Object(r["a"])(t))return t.getTypedArray()},WQ.prototype.getPropertyTypedArrayBySemantic=function(e){let t;i["a"].typeOf.string("semantic",e);const n=this._class.propertiesBySemantic;if(Object(r["a"])(n)&&(t=n[e]),Object(r["a"])(t))return this.getPropertyTypedArray(t.id)};var YQ=WQ;function XQ(){}Object.defineProperties(XQ.prototype,{promise:{get:function(){a["a"].throwInstantiationError()}},cacheKey:{get:function(){a["a"].throwInstantiationError()}}}),XQ.prototype.load=function(){a["a"].throwInstantiationError()},XQ.prototype.unload=function(){},XQ.prototype.process=function(e){},XQ.prototype.getError=function(e,t){i["a"].typeOf.string("errorMessage",e),Object(r["a"])(t)&&(e+=`\n${t.message}`);const n=new ye["a"](e);return Object(r["a"])(t)&&(n.stack=`Original stack:\n${t.stack}\nHandler stack:\n${n.stack}`),n},XQ.prototype.isDestroyed=function(){return!1},XQ.prototype.destroy=function(){return this.unload(),Wc(this)};var KQ=XQ;const $Q={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,FAILED:4};var JQ=Object.freeze($Q);function QQ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.typedArray,n=e.resource,i=e.cacheKey;if(Object(r["a"])(t)===Object(r["a"])(n))throw new a["a"]("One of options.typedArray and options.resource must be defined.");this._typedArray=t,this._resource=n,this._cacheKey=i,this._state=JQ.UNLOADED,this._promise=void 0}function ZQ(e){const t=e._resource;return e._state=JQ.LOADING,QQ._fetchArrayBuffer(t).then((function(t){if(!e.isDestroyed())return e._typedArray=new Uint8Array(t),e._state=JQ.READY,e})).catch((function(n){if(e.isDestroyed())return;e._state=JQ.FAILED;const i=`Failed to load external buffer: ${t.url}`;return Promise.reject(e.getError(i,n))}))}Object(r["a"])(Object.create)&&(QQ.prototype=Object.create(KQ.prototype),QQ.prototype.constructor=QQ),Object.defineProperties(QQ.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),QQ.prototype.load=function(){return Object(r["a"])(this._typedArray)?this._promise=Promise.resolve(this):this._promise=ZQ(this),this._promise},QQ._fetchArrayBuffer=function(e){return e.fetchArrayBuffer()},QQ.prototype.unload=function(){this._typedArray=void 0};var eZ=QQ,tZ=(function(){var e,t="B9h79tEBBBENQ9gEUEU9gEUB9gBB9gVUUUUUEU9gDUUEU9gLUUUUEU9gIUUUEU9gVUUUUUB9gLUUUUB9gD99UE99Ie8aDILEVOLEVLRRRRRWWVBOOBEdddLVE9wEIIVIEBEOWEUEC+Q/KEKR/QIhO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwvBE8f9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwv9C9v919u9kBDe9tw79o9v9wT9fw9u9j9v9kw9WwvTw949Wwv79p9v9uBIy9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwvBL8e9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwv9C9v919u9kBO8a9tw79o9v9wT9fw9u9j9v9kw69u9kw949Wwv79p9v9uBRe9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jwBWA9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jw9C9v919u9kBdl9tw79o9v9wT9fw9u9j9v9kws9p2Twv9P9jTBQk9tw79o9v9wT9fw9u9j9v9kws9p2Twv9R919hTBKl9tw79o9v9wT9fw9u9j9v9kws9p2Twvt949wBXe9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9owBSA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9ow9TTv9p9wBZA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBhL79iv9rBodWEBCEKDqxQ+f9Q8aDBK/EpE8jU8jJJJJBCJO9rGV8kJJJJBCBHODNALCEFAE0MBABCBrBJ+KJJBC+gEv86BBAVCJDFCBCJDZnJJJB8aDNAItMBAVCJDFADALZ+TJJJB8aKABAEFHRABCEFHEAVALFCBCBCJDAL9rALCfE0eZnJJJB8aAVAVCJDFALZ+TJJJBHWCJ/ABAL9uHODNAItMBAOC/wfBgGOCJDAOCJD6eHdCBHQINAWCJLFCBCJDZnJJJB8aAdAIAQ9rAQAdFAI6eHKADAQAL2FHXDNALtMBAKCSFGOC9wgHMAOCL4CIFCD4HpCBHSAXHZAEHhINDNAKtMBAWASFrBBHoCBHEAZHOINAWCJLFAEFAOrBBGaAo9rGoCETAoCkTCk91CR4786BBAOALFHOAaHoAECEFGEAK9HMBKKDNARAh9rAp6MBAhCBApZnJJJBGcApFHEDNAMtMBCBHxAWCJLFHqINARAE9rCk6MDAWCJLFAxFGlrBDHoCUHODNAlrBEGaAlrBBGkvCfEgMBCBHaAoCfEgMBCBHoDNAlrBIMBAlrBLMBAlrBVMBAlrBOMBAlrBRMBAlrBWMBAlrBdMBAlrBQMBAlrBKMBAlrBXMBAlrBMMBCBHaAlrBpMECBHoCUCBAlrBSeHOKCBHaKDNDNDNDNCLCDCECWAOCZ6GheAkCfEgGkCD0CLvAaCfEgGaCD0FAoCfEgGoCD0FAlrBIGyCD0FAlrBLG8aCD0FAlrBVGeCD0FAlrBOG3CD0FAlrBRG5CD0FAlrBWG8eCD0FAlrBdG8fCD0FAlrBQGACD0FAlrBKGHCD0FAlrBXGGCD0FAlrBMG8jCD0FAlrBpG8kCD0FAlrBSG8lCD0FG8mAOCZAheG8n6GOeAkCp0CWvAaCp0FAoCp0FAyCp0FA8aCp0FAeCp0FA3Cp0FA5Cp0FA8eCp0FA8fCp0FAACp0FAHCp0FAGCp0FA8jCp0FA8kCp0FA8lCp0FA8mA8nAOe6GoeGyCUFpDIEBKAcAxCO4FGaAarBBCDCIAoeAxCI4COgTv86BBAyCW9HMEAEAl8pBB83BBAECWFAlCWF8pBB83BBAECZFHEXDKAcAxCO4FGaAarBBCEAxCI4COgTv86BBKCDCLCWCEAheAOeAoeH8aCUAyTCU7HaCBH5AqHeINAEH3A8aHoAeHECBHOINAErBBGhAaAhAaCfEgGk6eAOCfEgAyTvHOAECEFHEAoCUFGoMBKA3AO86BBAeA8aFHeA3CEFHEA5A8aFG5CZ6MBKDNAlrBBGOAk6MBA3AO86BEA3CDFHEKDNAlrBEGOAk6MBAEAO86BBAECEFHEKDNAlrBDGOAk6MBAEAO86BBAECEFHEKDNAlrBIGOAk6MBAEAO86BBAECEFHEKDNAlrBLGOAk6MBAEAO86BBAECEFHEKDNAlrBVGOAk6MBAEAO86BBAECEFHEKDNAlrBOGOAk6MBAEAO86BBAECEFHEKDNAlrBRGOAk6MBAEAO86BBAECEFHEKDNAlrBWGOAk6MBAEAO86BBAECEFHEKDNAlrBdGOAk6MBAEAO86BBAECEFHEKDNAlrBQGOAk6MBAEAO86BBAECEFHEKDNAlrBKGOAk6MBAEAO86BBAECEFHEKDNAlrBXGOAk6MBAEAO86BBAECEFHEKDNAlrBMGOAk6MBAEAO86BBAECEFHEKDNAlrBpGOAk6MBAEAO86BBAECEFHEKAlrBSGOAk6MBAEAO86BBAECEFHEKAqCZFHqAxCZFGxAM6MBKKAEtMBAZCEFHZAEHhASCEFGSALsMDXEKKCBHOXIKAWAXAKCUFAL2FALZ+TJJJB8aAKAQFGQAI6MBKKCBHOARAE9rCAALALCA6e6MBDNALC8f0MBAECBCAAL9rGOZnJJJBAOFHEKAEAWCJDFALZ+TJJJBALFAB9rHOKAVCJOF8kJJJJBAOK9HEEUAECAAECA0eABCJ/ABAE9uC/wfBgGDCJDADCJD6eGDFCUFAD9uAE2ADCL4CIFCD4ADv2FCEFKMBCBABbDJ+KJJBK/pSEeU8jJJJJBC/AE9rGL8kJJJJBCBHVDNAICI9uGOChFAE0MBABCBYD+E+KJJBGRC/gEv86BBALC/ABFCfECJEZnJJJB8aALCuFGW9CU83IBALC8wFGd9CU83IBALCYFGQ9CU83IBALCAFGK9CU83IBALCkFGX9CU83IBALCZFGM9CU83IBAL9CU83IWAL9CU83IBABAEFC9wFGpABCEFGSAOFGE6HODNAItMBCMCSARCB9KeHZCBHhCBHoCBHaCBHcCBHxINDNAOCEgtMBCBHVXIKCDHqADAaCDTFGOYDBHlAOCWFYDBHkAOCLFYDBHyCBH8aCBHODNDNDNDNDNDNDNDNDNINALC/ABFAOCU7AxFCSgCITFGVYDLHeDNAVYDBGVAl9HMBAeAy9HMBAqC9+FHqXDKDNAVAy9HMBAeAk9HMBAqCUFHqXDKDNAVAk9HMBAeAlsMDKAqCLFHqA8aCZFH8aAOCEFGOCZ9HMBXDKKAqC870MBADAqCIgCX2GVC+E1JJBFYDBAaFCDTFYDBHqADAVCJ1JJBFYDBAaFCDTFYDBHyALADAVC11JJBFYDBAaFCDTFYDBGVAcZ+FJJJBGeCBCSAVAhsGkeAeCB9KAeAZ9IgGleHeAkAlCE7gHkDNARCE9IMBAeCS9HMBAVAVAoAVCEFAosGeeGoCEFsMDCMCSAeeHeKASAeA8av86BBAeCS9HMDAVAo9rGOCETAOC8f917HOINAEAOCfB0CRTAOCfBgv86BBAECEFHEAOCR4GOMBKAVHoXIKADCEAkAhsCETAyAhseCX2GOC11JJBFYDBAaFCDTFYDBHqADAOC+E1JJBFYDBAaFCDTFYDBHeADAOCJ1JJBFYDBAaFCDTFYDBHVCBHlDNARCE9IMBAhtMBAVMBAeCE9HMBAqCD9HMBAW9CU83IBAd9CU83IBAQ9CU83IBAK9CU83IBAX9CU83IBAM9CU83IBAL9CU83IWAL9CU83IBCBHhCEHlKAhAVAhsGOFH8aALAeAcZ+FJJJBHyALAqAcZ+FJJJBHkAyCM0MLAyCEFHyXVKCpHeASAOCLTCpv86BBAVHoKAetMBAeAZ9IMEKALAcCDTFAVbDBAcCEFCSgHcKAhAkFHhALC/ABFAxCITFGOAqbDLAOAVbDBALC/ABFAxCEFCSgGOCITFGeAVbDLAeAybDBAOCEFHVXDKCBCSAeA8asG3eHyA8aA3FH8aKDNDNAkCM0MBAkCEFHkXEKCBCSAqA8asG3eHkA8aA3FH8aKDNDNDNDNDNDNDNDNDNDNDNDNDNDNDNDNDNAkAyCLTvG3CfEgG5C+qUFp9UISSSSSSSSSSSSSSWSLQMSSSSSSSSSSSSESVSSSSSSSSSSSSSRDSdSSSSSSSSSSSSSSKSSSSSSSSSSSSSSSSOBKC/wEH8eA5pDMKpKC/xEH8eXXKC/yEH8eXKKC/zEH8eXQKC/0EH8eXdKC/1EH8eXWKC/2EH8eXRKC/3EH8eXOKC/4EH8eXVKC/5EH8eXLKC/6EH8eXIKC/7EH8eXDKC/8EH8eXEKCPEH8eKAlAVAh9HvMBASA8e86BBXEKASC9+CUAOe86BBAEA386BBAECEFHEKDNAOMBAVAo9rGOCETAOC8f917HOINAEAOCfB0CRTAOCfBgv86BBAECEFHEAOCR4GOMBKAVHoKDNAyCS9HMBAeAo9rGOCETAOC8f917HOINAEAOCfB0CRTAOCfBgv86BBAECEFHEAOCR4GOMBKAeHoKDNAkCS9HMBAqAo9rGOCETAOC8f917HOINAEAOCfB0CRTAOCfBgv86BBAECEFHEAOCR4GOMBKAqHoKALAcCDTFAVbDBAcCEFCSgHODNDNAypZBEEEEEEEEEEEEEEBEKALAOCDTFAebDBAcCDFCSgHOKDNDNAkpZBEEEEEEEEEEEEEEBEKALAOCDTFAqbDBAOCEFCSgHOKALC/ABFAxCITFGyAVbDLAyAebDBALC/ABFAxCEFCSgCITFGyAebDLAyAqbDBALC/ABFAxCDFCSgCITFGeAqbDLAeAVbDBAxCIFHVAOHcA8aHhKApAE6HOASCEFHSAVCSgHxAaCIFGaAI6MBKKCBHVAOMBAE9C/lm+i/D+Z+g8a83BWAE9CJ/s+d+0/1+M/e/U+GU83BBAEAB9rCZFHVKALC/AEF8kJJJJBAVK+mIEEUCBHIDNABADCUFCSgCDTFYDBAEsMBCEHIABADCpFCSgCDTFYDBAEsMBCDHIABADCMFCSgCDTFYDBAEsMBCIHIABADCXFCSgCDTFYDBAEsMBCLHIABADCKFCSgCDTFYDBAEsMBCVHIABADCQFCSgCDTFYDBAEsMBCOHIABADCdFCSgCDTFYDBAEsMBCRHIABADCWFCSgCDTFYDBAEsMBCWHIABADCRFCSgCDTFYDBAEsMBCdHIABADCOFCSgCDTFYDBAEsMBCQHIABADCVFCSgCDTFYDBAEsMBCKHIABADCLFCSgCDTFYDBAEsMBCXHIABADCIFCSgCDTFYDBAEsMBCMHIABADCDFCSgCDTFYDBAEsMBCpHIABADCEFCSgCDTFYDBAEsMBCSCUABADCSgCDTFYDBAEseSKAIKjEIUCRHDDNINADCEFHIADC96FGLC8f0MEAIHDCEALTAE6MBKKAICR9uCI2CDFABCI9u2ChFKMBCBABbD+E+KJJBK+YDERU8jJJJJBCZ9rHLCBHVDNAICVFAE0MBCBHVABCBrB+E+KJJBC/QEv86BBAL9CB83IWABCEFHOABAEFC98FHRDNAItMBCBHWINDNARAO0MBCBSKAVADAWCDTFYDBGdALCWFAVCDTFYDB9rGEAEC8f91GEFAE7C59K7GVAdALCWFAVCDTFGQYDB9rGEC8f91CETAECDT7vHEINAOAECfB0CRTAECfBgv86BBAOCEFHOAECR4GEMBKAQAdbDBAWCEFGWAI9HMBKKCBHVARAO6MBAOCBbBBAOAB9rCLFHVKAVK86EIUCWHDDNINADCEFHIADC95FGLC8f0MEAIHDCEALTAE6MBKKAICR9uAB2CVFK+yWDEUO99DNAEtMBADCLsHVCUADCETCUFTCU7HDDNDNCUAICUFTCU7+yGOjBBBzmGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKAD+yHWDNAVMBABCOFHDINALCLFiDBGRjBBBBjBBJzALiDBGd+LAR+LmALCWFiDBGQ+LmGR+VARjBBBB9beGRnHKAdARnHRALCXFiDBHdDNDNAQjBBBB9gtMBAKHQXEKjBBJzAR+L+TGQAQ+MAKjBBBB9geHQjBBJzAK+L+TGKAK+MARjBBBB9geHRKADC9+FAI87EBDNDNjBBBzjBBB+/AdjBBBB9geAdjBBJ+/AdjBBJ+/9geGdjBBJzAdjBBJz9feAWnmGd+LjBBB9P9dtMBAd+oHBXEKCJJJJ94HBKADAB87EBDNDNjBBBzjBBB+/AQjBBBB9geAQjBBJ+/AQjBBJ+/9geGdjBBJzAdjBBJz9feAOnmGd+LjBBB9P9dtMBAd+oHBXEKCJJJJ94HBKADC98FAB87EBDNDNjBBBzjBBB+/ARjBBBB9geARjBBJ+/ARjBBJ+/9geGRjBBJzARjBBJz9feAOnmGR+LjBBB9P9dtMBAR+oHBXEKCJJJJ94HBKADC96FAB87EBALCZFHLADCWFHDAECUFGEMBXDKKABCIFHDINALCLFiDBGRjBBBBjBBJzALiDBGd+LAR+LmALCWFiDBGQ+LmGR+VARjBBBB9beGRnHKAdARnHRALCXFiDBHdDNDNAQjBBBB9gtMBAKHQXEKjBBJzAR+L+TGQAQ+MAKjBBBB9geHQjBBJzAK+L+TGKAK+MARjBBBB9geHRKADCUFAI86BBDNDNjBBBzjBBB+/AdjBBBB9geAdjBBJ+/AdjBBJ+/9geGdjBBJzAdjBBJz9feAWnmGd+LjBBB9P9dtMBAd+oHBXEKCJJJJ94HBKADAB86BBDNDNjBBBzjBBB+/AQjBBBB9geAQjBBJ+/AQjBBJ+/9geGdjBBJzAdjBBJz9feAOnmGd+LjBBB9P9dtMBAd+oHBXEKCJJJJ94HBKADC9+FAB86BBDNDNjBBBzjBBB+/ARjBBBB9geARjBBJ+/ARjBBJ+/9geGRjBBJzARjBBJz9feAOnmGR+LjBBB9P9dtMBAR+oHBXEKCJJJJ94HBKADC99FAB86BBALCZFHLADCLFHDAECUFGEMBKKK/KLLD99EUE99EUDNAEtMBDNDNCUAICUFTCU7+yGVjBBBzmGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKAIC/8fIgHRINABCOFCICDALCLFiDB+LALiDB+L9eGIALCWFiDB+LALAICDTFiDB+L9eeGIALCXFiDB+LALAICDTFiDB+L9eeGIARv87EBDNDNjBBBzjBBB+/ALAICEFCIgCDTFiDBj/zL+1znjBBJ+/jBBJzALAICDTFiDBjBBBB9deGOnGWjBBBB9geAWjBBJ+/AWjBBJ+/9geGWjBBJzAWjBBJz9feAVnmGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKABAd87EBDNDNjBBBzjBBB+/AOALAICDFCIgCDTFiDBj/zL+1znnGWjBBBB9geAWjBBJ+/AWjBBJ+/9geGWjBBJzAWjBBJz9feAVnmGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKABCDFAd87EBDNDNjBBBzjBBB+/AOALAICUFCIgCDTFiDBj/zL+1znnGOjBBBB9geAOjBBJ+/AOjBBJ+/9geGOjBBJzAOjBBJz9feAVnmGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKABCLFAI87EBABCWFHBALCZFHLAECUFGEMBKKK+tDDWUE998jJJJJBCZ9rGV8kJJJJBDNAEtMBADCD4GOtMBCEAI9rHRAOCDTHWCBHdINC+cUHDALHIAOHQINAIiDBAVCXFZ+YJJJB8aAVYDXGKADADAK9IeHDAICLFHIAQCUFGQMBKARADFGICkTHKCBHDCBAI9rHXAOHIINDNDNALADFiDBGMAXZ+XJJJBjBBBzjBBB+/AMjBBBB9gemGM+LjBBB9P9dtMBAM+oHQXEKCJJJJ94HQKABADFAQCfffRgAKvbDBADCLFHDAICUFGIMBKABAWFHBALAWFHLAdCEFGdAE9HMBKKAVCZF8kJJJJBK+iMDlUI998jJJJJBC+QD9rGV8kJJJJBAVC+oEFCBC/kBZnJJJB8aCBHODNADtMBCBHOAItMBDNABAE9HMBAVCUADCDTGRADCffffI0eCBYD/4+JJJBhJJJJBBGEbD+oEAVCEbD1DAEABARZ+TJJJB8aKAVC+YEFCWFCBbDBAV9CB83I+YEAVC+YEFAEADAIAVC+oEFZ+OJJJBCUAICDTGWAICffffI0eGdCBYD/4+JJJBhJJJJBBHRAVC+oEFAVYD1DGOCDTFARbDBAVAOCEFGQbD1DARAVYD+YEGKAWZ+TJJJBHXAVC+oEFAQCDTFADCI9uGMCBYD/4+JJJBhJJJJBBGRbDBAVAOCDFGWbD1DARCBAMZnJJJBHpAVC+oEFAWCDTFAdCBYD/4+JJJBhJJJJBBGSbDBAVAOCIFGQbD1DAXHRASHWINAWALiDBALARYDBGdCWAdCW6eCDTFC/EBFiDBmuDBARCLFHRAWCLFHWAICUFGIMBKCBHIAVC+oEFAQCDTFCUAMCDTADCffff970eCBYD/4+JJJBhJJJJBBGQbDBAVAOCLFGObD1DDNADCI6MBAEHRAQHWINAWASARYDBCDTFiDBASARCLFYDBCDTFiDBmASARCWFYDBCDTFiDBmuDBARCXFHRAWCLFHWAICEFGIAM6MBKKAVC/MBFHZAVYD+cEHhAVYD+gEHoAVHRCBHdCBHWCBHaCEHcINARHxAEAWCX2FGqCWFGlYDBHDAqYDBHkABAaCX2FGRCLFAqCLFGyYDBG8abDBARAkbDBARCWFADbDBApAWFCE86BBAZADbDWAZA8abDLAZAkbDBAQAWCDTFCBbDBCIHeDNAdtMBAxHRINDNARYDBGIADsMBAIAksMBAIA8asMBAZAeCDTFAIbDBAeCEFHeKARCLFHRAdCUFGdMBKKAXAkCDTFGRARYDBCUFbDBAXA8aCDTFGRARYDBCUFbDBAXADCDTFGRARYDBCUFbDBAoAhAqYDBCDTGIFYDBCDTFGkHRAKAIFGDYDBGdHIDNAdtMBDNINARYDBAWsMEARCLFHRAICUFGItMDXBKKARAdCDTAkFC98FYDBbDBADADYDBCUFbDBKAoAhAyYDBCDTGIFYDBCDTFGkHRAKAIFGDYDBGdHIDNAdtMBDNINARYDBAWsMEARCLFHRAICUFGIMBXDKKARAdCDTAkFC98FYDBbDBADADYDBCUFbDBKDNAKAlYDBCDTGRFGDYDBGdtMBAoAhARFYDBCDTFGkHRAdHIDNINARYDBAWsMEARCLFHRAICUFGIMBXDKKARAdCDTAkFC98FYDBbDBADADYDBCUFbDBKDNDNAetMBCUHWjBBBBH3CBHRINASAZARCDTFYDBCDTGIFGdiDBH5AdALCBARCEFGkARCS0eCDTFiDBALAXAIFYDBGRCWARCW6eCDTFC/EBFiDBmG8euDBDNAKAIFYDBGdtMBA8eA5+TH8eAoAhAIFYDBCDTFHRAdCDTHIINAQARYDBGdCDTFGDA8eADiDBmG5uDBA5A3A3A59dGDeH3AdAWADeHWARCLFHRAIC98FGIMBKKAkHRAkAe9HMBKAWCU9HMEKAcAM9PMDINDNApAcFrBBMBAcHWXDKAMAcCEFGc9HMBXIKKAaCEFHaAeCZAeCZ6eHdAZHRAxHZAWCU9HMBKKAOCDTAVC+oEFFC98FHRDNINAOtMEARYDBCBYD/0+JJJBh+BJJJBBARC98FHRAOCUFHOXBKKAVC+QDF8kJJJJBK/iLEVUCUAICDTGVAICffffI0eGOCBYD/4+JJJBhJJJJBBHRALALYD9gGWCDTFARbDBALAWCEFbD9gABARbDBAOCBYD/4+JJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDLCUADCDTADCffffI0eCBYD/4+JJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDWABYDBCBAVZnJJJB8aADCI9uHdDNADtMBABYDBHOAEHLADHRINAOALYDBCDTFGVAVYDBCEFbDBALCLFHLARCUFGRMBKKDNAItMBABYDBHLABYDLHRCBHVAIHOINARAVbDBARCLFHRALYDBAVFHVALCLFHLAOCUFGOMBKKDNADCI6MBABYDLHRABYDWHVCBHLINAECWFYDBHOAECLFYDBHDARAEYDBCDTFGWAWYDBGWCEFbDBAVAWCDTFALbDBARADCDTFGDADYDBGDCEFbDBAVADCDTFALbDBARAOCDTFGOAOYDBGOCEFbDBAVAOCDTFALbDBAECXFHEALCEFGLAd6MBKKDNAItMBABYDLHEABYDBHLINAEAEYDBALYDB9rbDBALCLFHLAECLFHEAICUFGIMBKKKqBABAEADAIC+k1JJBZ+NJJJBKqBABAEADAIC+M+JJJBZ+NJJJBK9dEEUABCfEAICDTZnJJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD/8+JJJBGEABCIFC98gFGBbD/8+JJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD/8+JJJBGEABCIFC98gFGBbD/8+JJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD/8+JJJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD/8+JJJBFGDbD/8+JJJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKKXBABAEZ+ZJJJBK+BEEIUDNAB+8GDCl4GICfEgGLCfEsMBDNALMBDNABjBBBB9cMBAECBbDBABSKABjBBJ9fnAEZ+YJJJBHBAEAEYDBCNFbDBABSKAEAICfEgC+CUFbDBADCfff+D94gCJJJ/4Iv++HBKABK+gEBDNDNAECJE9IMBABjBBBUnHBDNAECfE9OMBAEC+BUFHEXDKABjBBBUnHBAECPDAECPD9IeC+C9+FHEXEKAEC+BU9KMBABjBBJXnHBDNAEC+b9+9MMBAEC/mBFHEXEKABjBBJXnHBAEC+299AEC+2999KeC/MEFHEKABAEClTCJJJ/8IF++nKK+ODDBCJWK/0EBBBBEBBBDBBBEBBBDBBBBBBBDBBBBBBBEBBBBBBB+L29Hz/69+9Kz/n/76z/RG97z/Z/O9Xz8j/b85z/+/U9Yz/B/K9hz+2/z9dz9E+L9Mz59a8kz+R/t3z+a+Zyz79ohz/J4++8++y+d9v8+BBBB9S+49+z8r+Hbz9m9m/m8+l/Z/O8+/8+pg89Q/X+j878r+Hq8++m+b/E87BBBBBBJzBBJzBBJz+e/v/n8++y+dSz9I/h/68+XD/r8+/H0838+/w+nOzBBBB+wv9o8+UF888+9I/h/68+9C9g/l89/N/M9M89/d8kO8+BBBBF+8Tz9M836zs+2azl/Zpzz818ez9E+LXz/u98f8+819e/68+BC/0dKXEBBBDBBBZwBB",n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!==typeof WebAssembly)return{supported:!1};var i=WebAssembly.instantiate(o(t),{}).then((function(t){e=t.instance,e.exports.__wasm_call_ctors(),e.exports.meshopt_encodeVertexVersion(0),e.exports.meshopt_encodeIndexVersion(1)}));function o(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;++i){var o=e.charCodeAt(i);t[i]=o>96?o-71:o>64?o-65:o>47?o+4:o>46?63:62}var r=0;for(i=0;i<e.length;++i)t[r++]=t[i]<60?n[t[i]]:64*(t[i]-60)+t[++i];return t.buffer.slice(0,r)}function r(e){if(!e)throw new Error("Assertion failed")}function a(t,n,i){var o=e.exports.sbrk,r=o(4*t.length),a=o(4*n),s=new Uint8Array(e.exports.memory.buffer),c=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);s.set(c,r),i&&i(r,r,t.length,n);var l=e.exports.meshopt_optimizeVertexFetchRemap(a,r,t.length,n);s=new Uint8Array(e.exports.memory.buffer);var u=new Uint32Array(n);new Uint8Array(u.buffer).set(s.subarray(a,a+4*n)),c.set(s.subarray(r,r+4*t.length)),o(r-o(0));for(var h=0;h<t.length;++h)t[h]=u[t[h]];return[u,l]}function s(t,n,i,o,r){var a=e.exports.sbrk,s=a(n),c=a(o*r),l=new Uint8Array(e.exports.memory.buffer);l.set(new Uint8Array(i.buffer,i.byteOffset,i.byteLength),c);var u=t(s,n,c,o,r),h=new Uint8Array(u);return h.set(l.subarray(s,s+u)),a(s-a(0)),h}function c(e){for(var t=0,n=0;n<e.length;++n){var i=e[n];t=t<i?i:t}return t}function l(e,t){if(r(2==t||4==t),4==t)return new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4);var n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);return new Uint32Array(n)}function u(t,n,i,o,r,a){var s=e.exports.sbrk,c=s(i*o),l=s(i*a),u=new Uint8Array(e.exports.memory.buffer);u.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),l),t(c,i,o,r,l);var h=new Uint8Array(i*o);return h.set(u.subarray(c,c+i*o)),s(c-s(0)),h}}(),function(){var e="B9h79tEBBBE8fV9gBB9gVUUUUUEU9gIUUUB9gEUEU9gIUUUEUIKQBEEEDDDILLLVE9wEEEVIEBEOWEUEC+Q/IEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBEy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBDe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBIl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBLk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBOL79iv9rBRQ+x8yQDBK/qMEZU8jJJJJBCJ/EB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rADZ1JJJBHWCJ/ABAD9uC/wfBgGOCJDAOCJD6eHdAICEFHLCBHQDNINAQAE9PMEAdAEAQ9rAQAdFAE6eHKDNDNADtMBAKCSFGOC9wgHXAOCL4CIFCD4HMAWCJDFHpCBHSALHZINDNARAZ9rAM9PMBCBHLXIKAZAMFHLDNAXtMBCBHhCBHIINDNARAL9rCk9PMBCBHLXVKAWCJ/CBFAIFHODNDNDNDNDNAZAICO4FrBBAhCOg4CIgpLBEDIBKAO9CB83IBAOCWF9CB83IBXIKAOALrBLALrBBGoCO4GaAaCIsGae86BBAOCEFALCLFAaFGarBBAoCL4CIgGcAcCIsGce86BBAOCDFAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOCIFAaAcFGarBBAoCIgGoAoCIsGoe86BBAOCLFAaAoFGarBBALrBEGoCO4GcAcCIsGce86BBAOCVFAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOCOFAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOCRFAaAcFGarBBAoCIgGoAoCIsGoe86BBAOCWFAaAoFGarBBALrBDGoCO4GcAcCIsGce86BBAOCdFAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOCQFAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOCKFAaAcFGarBBAoCIgGoAoCIsGoe86BBAOCXFAaAoFGorBBALrBIGLCO4GaAaCIsGae86BBAOCMFAoAaFGorBBALCL4CIgGaAaCIsGae86BBAOCpFAoAaFGorBBALCD4CIgGaAaCIsGae86BBAOCSFAoAaFGOrBBALCIgGLALCIsGLe86BBAOALFHLXDKAOALrBWALrBBGoCL4GaAaCSsGae86BBAOCEFALCWFAaFGarBBAoCSgGoAoCSsGoe86BBAOCDFAaAoFGorBBALrBEGaCL4GcAcCSsGce86BBAOCIFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCLFAoAaFGorBBALrBDGaCL4GcAcCSsGce86BBAOCVFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCOFAoAaFGorBBALrBIGaCL4GcAcCSsGce86BBAOCRFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCWFAoAaFGorBBALrBLGaCL4GcAcCSsGce86BBAOCdFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCQFAoAaFGorBBALrBVGaCL4GcAcCSsGce86BBAOCKFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCXFAoAaFGorBBALrBOGaCL4GcAcCSsGce86BBAOCMFAoAcFGorBBAaCSgGaAaCSsGae86BBAOCpFAoAaFGorBBALrBRGLCL4GaAaCSsGae86BBAOCSFAoAaFGOrBBALCSgGLALCSsGLe86BBAOALFHLXEKAOAL8pBB83BBAOCWFALCWF8pBB83BBALCZFHLKAhCDFHhAICZFGIAX6MBKKDNALMBCBHLXIKDNAKtMBAWASFrBBHhCBHOApHIINAIAWCJ/CBFAOFrBBGZCE4CBAZCEg9r7AhFGh86BBAIADFHIAOCEFGOAK9HMBKKApCEFHpALHZASCEFGSAD9HMBKKABAQAD2FAWCJDFAKAD2Z1JJJB8aAWAWCJDFAKCUFAD2FADZ1JJJB8aKAKCBALeAQFHQALMBKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/EBF8kJJJJBAOK+OoEZU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJEZ+JJJJB8aAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHKDNAEtMBCMCSAdCEseHXABHICBHdCBHMCBHpCBHLCBHOINDNAKAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFARCL4CU7AOFCSgCITFGSYDLHZASYDBHhDNARCSgGSAX9PMBAVARCU7ALFCSgCDTFYDBAdASeHRAStHSDNDNADCD9HMBABAh87EBABCLFAR87EBABCDFAZ87EBXEKAIAhbDBAICWFARbDBAICLFAZbDBKAdASFHdAVC/ABFAOCITFGoARbDBAoAZbDLAVALCDTFARbDBAVC/ABFAOCEFCSgGOCITFGZAhbDBAZARbDLALASFHLAOCEFHOXDKDNDNASCSsMBAMASFASC987FCEFHMXEKAK8sBBGSCfEgHRDNDNASCU9MMBAKCEFHKXEKAK8sBEGSCfBgCRTARCfBgvHRDNASCU9MMBAKCDFHKXEKAK8sBDGSCfBgCpTARvHRDNASCU9MMBAKCIFHKXEKAK8sBIGSCfBgCxTARvHRDNASCU9MMBAKCLFHKXEKAKrBLC3TARvHRAKCVFHKKARCE4CBARCEg9r7AMFHMKDNDNADCD9HMBABAh87EBABCLFAM87EBABCDFAZ87EBXEKAIAhbDBAICWFAMbDBAICLFAZbDBKAVC/ABFAOCITFGRAMbDBARAZbDLAVALCDTFAMbDBAVC/ABFAOCEFCSgGOCITFGRAhbDBARAMbDLALCEFHLAOCEFHOXEKDNARCPE0MBAVALAQARCSgFrBBGSCL4GZ9rCSgCDTFYDBAdCEFGhAZeHRAVALAS9rCSgCDTFYDBAhAZtGoFGhASCSgGZeHSAZtHZDNDNADCD9HMBABAd87EBABCLFAS87EBABCDFAR87EBXEKAIAdbDBAICWFASbDBAICLFARbDBKAVALCDTFAdbDBAVC/ABFAOCITFGaARbDBAaAdbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALAoFCSgGLCDTFASbDBAVC/ABFAOCDFCSgGOCITFGRAdbDBARASbDLAOCEFHOALAZFHLAhAZFHdXEKAdCBAKrBBGaeGZARC/+EsGcFHRAaCSgHhDNDNAaCL4GoMBARCEFHSXEKARHSAVALAo9rCSgCDTFYDBHRKDNDNAhMBASCEFHdXEKASHdAVALAa9rCSgCDTFYDBHSKDNDNActMBAKCEFHaXEKAK8sBEGaCfEgHZDNDNAaCU9MMBAKCDFHaXEKAK8sBDGaCfBgCRTAZCfBgvHZDNAaCU9MMBAKCIFHaXEKAK8sBIGaCfBgCpTAZvHZDNAaCU9MMBAKCLFHaXEKAK8sBLGaCfBgCxTAZvHZDNAaCU9MMBAKCVFHaXEKAKCOFHaAKrBVC3TAZvHZKAZCE4CBAZCEg9r7AMFGMHZKDNDNAoCSsMBAaHcXEKAa8sBBGKCfEgHRDNDNAKCU9MMBAaCEFHcXEKAa8sBEGKCfBgCRTARCfBgvHRDNAKCU9MMBAaCDFHcXEKAa8sBDGKCfBgCpTARvHRDNAKCU9MMBAaCIFHcXEKAa8sBIGKCfBgCxTARvHRDNAKCU9MMBAaCLFHcXEKAaCVFHcAarBLC3TARvHRKARCE4CBARCEg9r7AMFGMHRKDNDNAhCSsMBAcHKXEKAc8sBBGKCfEgHSDNDNAKCU9MMBAcCEFHKXEKAc8sBEGKCfBgCRTASCfBgvHSDNAKCU9MMBAcCDFHKXEKAc8sBDGKCfBgCpTASvHSDNAKCU9MMBAcCIFHKXEKAc8sBIGKCfBgCxTASvHSDNAKCU9MMBAcCLFHKXEKAcCVFHKAcrBLC3TASvHSKASCE4CBASCEg9r7AMFGMHSKDNDNADCD9HMBABAZ87EBABCLFAS87EBABCDFAR87EBXEKAIAZbDBAICWFASbDBAICLFARbDBKAVC/ABFAOCITFGaARbDBAaAZbDLAVALCDTFAZbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCDFCSgCITFGRAZbDBARASbDLAVALAotAoCSsvFGLCSgCDTFASbDBALAhtAhCSsvFHLAOCIFHOKAWCEFHWABCOFHBAICXFHIAOCSgHOALCSgHLApCIFGpAE6MBKKCBC99AKAQseHOKAVC/AEF8kJJJJBAOK/tLEDU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHOAIALFC98FHIDNAEtMBDNADCDsMBINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKAVCWFALCEgCDTvGDALCD4CBALCE4CEg9r7ADYDBFGLbDBABALbDBABCLFHBAECUFGEMBXDKKINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKABALCD4CBALCE4CEg9r7AVCWFALCEgCDTvGLYDBFGD87EBALADbDBABCDFHBAECUFGEMBKKCBC99AOAIseHOKAOK+lVOEUE99DUD99EUD99DNDNADCL9HMBAEtMEINDNDNjBBBzjBBB+/ABCDFGD8sBB+yAB8sBBGI+yGL+L+TABCEFGV8sBBGO+yGR+L+TGWjBBBB9gGdeAWjBB/+9CAWAWnjBBBBAWAdeGQAQ+MGKAICU9KeALmGLALnAQAKAOCU9KeARmGQAQnmm+R+VGRnmGW+LjBBB9P9dtMBAW+oHIXEKCJJJJ94HIKADAI86BBDNDNjBBBzjBBB+/AQjBBBB9geAQARnmGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKAVAD86BBDNDNjBBBzjBBB+/ALjBBBB9geALARnmGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD86BBABCLFHBAECUFGEMBXDKKAEtMBINDNDNjBBBzjBBB+/ABCLFGD8uEB+yAB8uEBGI+yGL+L+TABCDFGV8uEBGO+yGR+L+TGWjBBBB9gGdeAWjB/+fsAWAWnjBBBBAWAdeGQAQ+MGKAICU9KeALmGLALnAQAKAOCU9KeARmGQAQnmm+R+VGRnmGW+LjBBB9P9dtMBAW+oHIXEKCJJJJ94HIKADAI87EBDNDNjBBBzjBBB+/AQjBBBB9geAQARnmGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKAVAD87EBDNDNjBBBzjBBB+/ALjBBBB9geALARnmGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD87EBABCWFHBAECUFGEMBKKK/SILIUI99IUE99DNAEtMBCBHIABHLINDNDNj/zL81zALCOF8uEBGVCIv+y+VGOAL8uEB+ynGRjB/+fsnjBBBzjBBB+/ARjBBBB9gemGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKALCLF8uEBHQALCDF8uEBHKABAVCEFCIgAIvCETFAd87EBDNDNAOAK+ynGWjB/+fsnjBBBzjBBB+/AWjBBBB9gemGX+LjBBB9P9dtMBAX+oHKXEKCJJJJ94HKKABAVCDFCIgAIvCETFAK87EBDNDNAOAQ+ynGOjB/+fsnjBBBzjBBB+/AOjBBBB9gemGX+LjBBB9P9dtMBAX+oHQXEKCJJJJ94HQKABAVCUFCIgAIvCETFAQ87EBDNDNjBBJzARARn+TAWAWn+TAOAOn+TGRjBBBBARjBBBB9ge+RjB/+fsnjBBBzmGR+LjBBB9P9dtMBAR+oHQXEKCJJJJ94HQKABAVCIgAIvCETFAQ87EBALCWFHLAICLFHIAECUFGEMBKKK6BDNADCD4AE2GEtMBINABABYDBGDCWTCW91+yADCk91ClTCJJJ/8IF++nuDBABCLFHBAECUFGEMBKKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABKKKEBCJWKLZ9kBB",t="B9h79tEBBBE5V9gBB9gVUUUUUEU9gIUUUB9gDUUB9gEUEUIMXBBEBEEDIDIDLLVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBWl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBQL79iv9rBKQ/j6XLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK1HLSUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uC/wfBgGOCJDAOCJD6eHWAICEFHOCBHdDNINAdAE9PMEAWAEAd9rAdAWFAE6eHQDNDNADtMBAQCSFGLC9wgGKCI2HXAKCETHMALCL4CIFCD4HpCBHSINAOHZCBHhDNINDNARAZ9rAp9PMBCBHOXVKAVCJ/CBFAhAK2FHoAZApFHOCBHIDNAKC/AB6MBARAO9rC/gB6MBCBHLINAoALFHIDNDNDNDNDNAZALCO4FrBBGaCIgpLBEDIBKAICBPhPKLBXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLBAOCZFHOKDNDNDNDNDNAaCD4CIgpLBEDIBKAICBPhPKLZXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLZAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLZAOCZFHOKDNDNDNDNDNAaCL4CIgpLBEDIBKAICBPhPKLAXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLAAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAIAOPBBBPKLAAOCZFHOKDNDNDNDNDNAaCO4pLBEDIBKAICBPhPKL8wXIKAIAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCLFAlPqBFAaC+Q+YJJBFrBBFHOXDKAIAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBAaC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGaCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKL8wAOCWFAlPqBFAaC+Q+YJJBFrBBFHOXEKAIAOPBBBPKL8wAOCZFHOKALC/ABFHIALCJEFAK0MEAIHLARAO9rC/fB0MBKKDNAIAK9PMBAICI4HLINDNARAO9rCk9PMBCBHOXRKAoAIFHaDNDNDNDNDNAZAICO4FrBBALCOg4CIgpLBEDIBKAaCBPhPKLBXIKAaAOPBBLAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlGcCDP+MEAcPMBZEhDoIaLcVxOqRlC+D+G+MkPhP9OGxCIPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCLFAlPqBFAqC+Q+YJJBFrBBFHOXDKAaAOPBBWAOPBBBGcCLP+MEAcPMBZEhDoIaLcVxOqRlC+P+e+8/4BPhP9OGxCSPSP8jGcP5B9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBAqC+Q+YJJBFPBBBGlAlPMBBBBBBBBBBBBBBBBAcP5E9CJf/8/4/w/g/AB9+9Cu1+nGqCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAxAcP9SPKLBAOCWFAlPqBFAqC+Q+YJJBFrBBFHOXEKAaAOPBBBPKLBAOCZFHOKALCDFHLAICZFGIAK6MBKKDNAOtMBAOHZAhCEFGhCLsMDXEKKCBHOXIKDNAKtMBAVCJDFASFHIAVASFPBDBHlCBHaINAIAVCJ/CBFAaFGLPBLBGxCEP9tAxCEPSGcP9OP9hP9RGxALAKFPBLBGkCEP9tAkAcP9OP9hP9RGkPMBZEhDoIaLcVxOqRlGyALAMFPBLBG8aCEP9tA8aAcP9OP9hP9RG8aALAXFPBLBGeCEP9tAeAcP9OP9hP9RGePMBZEhDoIaLcVxOqRlG3PMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIAlP9uGlPeBbDBAIADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAyA3PMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWkdyQ8aKeX3M5p8eS8fGxA8aAePMWkdyQ8aKeX3M5p8eS8fGkPMBEZhDIoaLVcxORqlGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFGLAlAxAkPMWdkyQK8aeXM35pS8e8fGcAcPMBEDIBEDIBEDIBEDIP9uGlPeBbDBALADFGLAlAcAcPMLVORLVORLVORLVORP9uGlPeBbDBALADFGLAlAcAcPMWdQKWdQKWdQKWdQKP9uGlPeBbDBALADFGLAlAcAcPMXMpSXMpSXMpSXMpSP9uGlPeBbDBALADFHIAaCZFGaAK6MBKKASCLFGSAD6MBKKABAdAD2FAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBKAQCBAOeAdFHdAOMBKC9+HOXEKCBC99ARAO9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK+KoEZU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHKDNAEtMBCMCSAdCEseHXABHICBHdCBHMCBHpCBHLCBHOINDNAKAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFARCL4CU7AOFCSgCITFGSYDLHZASYDBHhDNARCSgGSAX9PMBAVARCU7ALFCSgCDTFYDBAdASeHRAStHSDNDNADCD9HMBABAh87EBABCLFAR87EBABCDFAZ87EBXEKAIAhbDBAICWFARbDBAICLFAZbDBKAdASFHdAVC/ABFAOCITFGoARbDBAoAZbDLAVALCDTFARbDBAVC/ABFAOCEFCSgGOCITFGZAhbDBAZARbDLALASFHLAOCEFHOXDKDNDNASCSsMBAMASFASC987FCEFHMXEKAK8sBBGSCfEgHRDNDNASCU9MMBAKCEFHKXEKAK8sBEGSCfBgCRTARCfBgvHRDNASCU9MMBAKCDFHKXEKAK8sBDGSCfBgCpTARvHRDNASCU9MMBAKCIFHKXEKAK8sBIGSCfBgCxTARvHRDNASCU9MMBAKCLFHKXEKAKrBLC3TARvHRAKCVFHKKARCE4CBARCEg9r7AMFHMKDNDNADCD9HMBABAh87EBABCLFAM87EBABCDFAZ87EBXEKAIAhbDBAICWFAMbDBAICLFAZbDBKAVC/ABFAOCITFGRAMbDBARAZbDLAVALCDTFAMbDBAVC/ABFAOCEFCSgGOCITFGRAhbDBARAMbDLALCEFHLAOCEFHOXEKDNARCPE0MBAVALAQARCSgFrBBGSCL4GZ9rCSgCDTFYDBAdCEFGhAZeHRAVALAS9rCSgCDTFYDBAhAZtGoFGhASCSgGZeHSAZtHZDNDNADCD9HMBABAd87EBABCLFAS87EBABCDFAR87EBXEKAIAdbDBAICWFASbDBAICLFARbDBKAVALCDTFAdbDBAVC/ABFAOCITFGaARbDBAaAdbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALAoFCSgGLCDTFASbDBAVC/ABFAOCDFCSgGOCITFGRAdbDBARASbDLAOCEFHOALAZFHLAhAZFHdXEKAdCBAKrBBGaeGZARC/+EsGcFHRAaCSgHhDNDNAaCL4GoMBARCEFHSXEKARHSAVALAo9rCSgCDTFYDBHRKDNDNAhMBASCEFHdXEKASHdAVALAa9rCSgCDTFYDBHSKDNDNActMBAKCEFHaXEKAK8sBEGaCfEgHZDNDNAaCU9MMBAKCDFHaXEKAK8sBDGaCfBgCRTAZCfBgvHZDNAaCU9MMBAKCIFHaXEKAK8sBIGaCfBgCpTAZvHZDNAaCU9MMBAKCLFHaXEKAK8sBLGaCfBgCxTAZvHZDNAaCU9MMBAKCVFHaXEKAKCOFHaAKrBVC3TAZvHZKAZCE4CBAZCEg9r7AMFGMHZKDNDNAoCSsMBAaHcXEKAa8sBBGKCfEgHRDNDNAKCU9MMBAaCEFHcXEKAa8sBEGKCfBgCRTARCfBgvHRDNAKCU9MMBAaCDFHcXEKAa8sBDGKCfBgCpTARvHRDNAKCU9MMBAaCIFHcXEKAa8sBIGKCfBgCxTARvHRDNAKCU9MMBAaCLFHcXEKAaCVFHcAarBLC3TARvHRKARCE4CBARCEg9r7AMFGMHRKDNDNAhCSsMBAcHKXEKAc8sBBGKCfEgHSDNDNAKCU9MMBAcCEFHKXEKAc8sBEGKCfBgCRTASCfBgvHSDNAKCU9MMBAcCDFHKXEKAc8sBDGKCfBgCpTASvHSDNAKCU9MMBAcCIFHKXEKAc8sBIGKCfBgCxTASvHSDNAKCU9MMBAcCLFHKXEKAcCVFHKAcrBLC3TASvHSKASCE4CBASCEg9r7AMFGMHSKDNDNADCD9HMBABAZ87EBABCLFAS87EBABCDFAR87EBXEKAIAZbDBAICWFASbDBAICLFARbDBKAVC/ABFAOCITFGaARbDBAaAZbDLAVALCDTFAZbDBAVC/ABFAOCEFCSgCITFGaASbDBAaARbDLAVALCEFGLCSgCDTFARbDBAVC/ABFAOCDFCSgCITFGRAZbDBARASbDLAVALAotAoCSsvFGLCSgCDTFASbDBALAhtAhCSsvFHLAOCIFHOKAWCEFHWABCOFHBAICXFHIAOCSgHOALCSgHLApCIFGpAE6MBKKCBC99AKAQseHOKAVC/AEF8kJJJJBAOK/tLEDU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHOAIALFC98FHIDNAEtMBDNADCDsMBINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKAVCWFALCEgCDTvGDALCD4CBALCE4CEg9r7ADYDBFGLbDBABALbDBABCLFHBAECUFGEMBXDKKINDNAOAI6MBC9+SKAO8sBBGDCfEgHLDNDNADCU9MMBAOCEFHOXEKAO8sBEGDCfBgCRTALCfBgvHLDNADCU9MMBAOCDFHOXEKAO8sBDGDCfBgCpTALvHLDNADCU9MMBAOCIFHOXEKAO8sBIGDCfBgCxTALvHLDNADCU9MMBAOCLFHOXEKAOrBLC3TALvHLAOCVFHOKABALCD4CBALCE4CEg9r7AVCWFALCEgCDTvGLYDBFGD87EBALADbDBABCDFHBAECUFGEMBKKCBC99AOAIseHOKAOK/xVDIUO978jJJJJBCA9rGI8kJJJJBDNDNADCL9HMBDNAEC98gGLtMBABHDCBHVINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdCBPhP+2EGQARCJJJJ94PhGKP9OP9RP/kEGRjBB/+9CPaARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGQP/kECfEPhP9OAOCJJJ94PhP9OP9QARAWP/mEAQP/kECWP+rECJ/+IPhP9OP9QAdAWP/mEAQP/kECZP+rECJJ/8RPhP9OP9QPKLBKALAIAD/8QBBXEKABAEC98gGDZ+HJJJBADAE9PMBAIAECIgGLCITGVFCBCAAV9r/8KBAIABADCITFGDAV/8QBBAIALZ+HJJJBADAIAV/8QBBKAICAF8kJJJJBK+yIDDUR97DNAEtMBCBHDINABCZFGIAIPBBBGLCBPhGVCJJ98P3ECJJ98P3IGOP9OABPBBBGRALPMLVORXMpScxql358e8fCffEPhP9OP/6EARALPMBEDIWdQKZhoaky8aeGLCZP+sEP/6EGWP/gEALCZP+rECZP+sEP/6EGdP/gEP/kEP/lEGLjB/+fsPaAdALAVP+2EGVAdCJJJJ94PhGQP9OP9RP/kEGdAdP/mEALALP/mEAWAVAWAQP9OP9RP/kEGLALP/mEP/kEP/kEP/jEP/nEGWP/mEjBBN0PaGVP/kECZP+rEAdAWP/mEAVP/kECffIPhP9OP9QGdALAWP/mEAVP/kECUPSCBPlDCBPlICBPlOCBPlRCBPlQCBPlKCBPlpCBPlSP9OGLPMWdkyQK8aeXM35pS8e8fP9QPKBBABARAOP9OAdALPMBEZhDIoaLVcxORqlP9QPKBBABCAFHBADCLFGDAE6MBKKK94EIU8jJJJJBCA9rGI8kJJJJBABAEC98gGLZ+JJJJBDNALAE9PMBAIAECIgGVCITGEFCBCAAE9r/8KBAIABALCITFGBAE/8QBBAIAVZ+JJJJBABAIAE/8QBBKAICAF8kJJJJBK/hILDUE97EUV978jJJJJBCZ9rHDDNAEtMBCBHIINADABPBBBGLABCZFGVPBBBGOPMLVORXMpScxql358e8fGRCZP+sEGWCLP+rEPKLBABjBBJzPaj/zL81zPaAWCIPhP9QP/6EP/nEGWALAOPMBEDIWdQKZhoaky8aeGLCZP+rECZP+sEP/6EP/mEGOAOP/mEAWALCZP+sEP/6EP/mEGdAdP/mEAWARCZP+rECZP+sEP/6EP/mEGRARP/mEP/kEP/kEP/lECBPhP+4EP/jEjB/+fsPaGWP/mEjBBN0PaGLP/kECffIPhGQP9OAdAWP/mEALP/kECZP+rEP9QGdARAWP/mEALP/kECZP+rEAOAWP/mEALP/kEAQP9OP9QGWPMBEZhDIoaLVcxORqlGLP5BADPBLBPeB+t+J83IBABCWFALP5EADPBLBPeE+t+J83IBAVAdAWPMWdkyQK8aeXM35pS8e8fGWP5BADPBLBPeD+t+J83IBABCkFAWP5EADPBLBPeI+t+J83IBABCAFHBAICLFGIAE6MBKKK/3EDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCkP+sEClP+rECJJJ/8IPhP+uEP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!==typeof WebAssembly)return{supported:!1};var o,r=e;WebAssembly.validate(n)&&(r=t);var a=WebAssembly.instantiate(s(r),{}).then((function(e){o=e.instance,o.exports.__wasm_call_ctors()}));function s(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;++n){var o=e.charCodeAt(n);t[n]=o>96?o-71:o>64?o-65:o>47?o+4:o>46?63:62}var r=0;for(n=0;n<e.length;++n)t[r++]=t[n]<60?i[t[n]]:64*(t[n]-60)+t[++n];return t.buffer.slice(0,r)}function c(e,t,n,i,r,a){var s=o.exports.sbrk,c=n+3&-4,l=s(c*i),u=s(r.length),h=new Uint8Array(o.exports.memory.buffer);h.set(r,u);var d=e(l,n,i,u,r.length);if(0==d&&a&&a(l,c,i),t.set(h.subarray(l,l+n*i)),s(l-s(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:a,supported:!0,decodeVertexBuffer:function(e,t,n,i,r){c(o.exports.meshopt_decodeVertexBuffer,e,t,n,i,o.exports[l[r]])},decodeIndexBuffer:function(e,t,n,i){c(o.exports.meshopt_decodeIndexBuffer,e,t,n,i)},decodeIndexSequence:function(e,t,n,i){c(o.exports.meshopt_decodeIndexSequence,e,t,n,i)},decodeGltfBuffer:function(e,t,n,i,r,a){c(o.exports[u[r]],e,t,n,i,o.exports[l[a]])}}}());function nZ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,r=e.bufferViewId,a=e.gltfResource,s=e.baseResource,c=e.cacheKey;i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.number("options.bufferViewId",r),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const l=n.bufferViews[r];let u,h,d,f,p=l.buffer,m=l.byteOffset,_=l.byteLength,g=!1;if(HJ(l,"EXT_meshopt_compression")){const e=l.extensions.EXT_meshopt_compression;p=e.buffer,m=Object(o["a"])(e.byteOffset,0),_=e.byteLength,g=!0,u=e.byteStride,h=e.count,d=e.mode,f=Object(o["a"])(e.filter,"NONE")}const b=n.buffers[p];this._hasMeshopt=g,this._meshoptByteStride=u,this._meshoptCount=h,this._meshoptMode=d,this._meshoptFilter=f,this._resourceCache=t,this._gltfResource=a,this._baseResource=s,this._buffer=b,this._bufferId=p,this._byteOffset=m,this._byteLength=_,this._cacheKey=c,this._bufferLoader=void 0,this._typedArray=void 0,this._state=JQ.UNLOADED,this._promise=void 0,this._process=function(e,t){}}function iZ(e){const t=e._resourceCache,n=e._buffer;if(Object(r["a"])(n.uri)){const i=e._baseResource,o=i.getDerivedResource({url:n.uri});return t.loadExternalBuffer({resource:o})}return t.loadEmbeddedBuffer({parentResource:e._gltfResource,bufferId:e._bufferId})}Object(r["a"])(Object.create)&&(nZ.prototype=Object.create(KQ.prototype),nZ.prototype.constructor=nZ),Object.defineProperties(nZ.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),nZ.prototype.load=function(){const e=iZ(this);this._bufferLoader=e,this._state=JQ.LOADING;const t=this,n=new Promise((function(e){t._process=function(t,n){if(!t._hasMeshopt)return;if(!Object(r["a"])(t._typedArray))return;if(t._state!==JQ.PROCESSING)return;const i=t._meshoptCount,o=t._meshoptByteStride,a=new Uint8Array(i*o);tZ.decodeGltfBuffer(a,i,o,t._typedArray,t._meshoptMode,t._meshoptFilter),t._typedArray=a,t._state=JQ.READY,e(t)}}));return this._promise=e.promise.then((function(){if(t.isDestroyed())return;const i=e.typedArray,o=new Uint8Array(i.buffer,i.byteOffset+t._byteOffset,t._byteLength);return t.unload(),t._typedArray=o,t._hasMeshopt?(t._state=JQ.PROCESSING,n):(t._state=JQ.READY,t)})).catch((function(e){if(t.isDestroyed())return;t.unload(),t._state=JQ.FAILED;const n="Failed to load buffer view";return Promise.reject(t.getError(n,e))})),this._promise},nZ.prototype.process=function(e){return i["a"].typeOf.object("frameState",e),this._process(this,e)},nZ.prototype.unload=function(){Object(r["a"])(this._bufferLoader)&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0};var oZ=nZ;function rZ(){}rZ._maxDecodingConcurrency=Math.max(Or.hardwareConcurrency-1,1),rZ._decoderTaskProcessor=void 0,rZ._taskProcessorReady=!1,rZ._getDecoderTaskProcessor=function(){if(!Object(r["a"])(rZ._decoderTaskProcessor)){const e=new il("decodeDraco",rZ._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){rZ._taskProcessorReady=!0})),rZ._decoderTaskProcessor=e}return rZ._decoderTaskProcessor},rZ.decodePointCloud=function(e){const t=rZ._getDecoderTaskProcessor();if(rZ._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},rZ.decodeBufferView=function(e){const t=rZ._getDecoderTaskProcessor();if(rZ._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])};var aZ=rZ;function sZ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,r=e.draco,a=e.gltfResource,s=e.baseResource,c=e.cacheKey;i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.object("options.draco",r),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s),this._resourceCache=t,this._gltfResource=a,this._baseResource=s,this._gltf=n,this._draco=r,this._cacheKey=c,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=JQ.UNLOADED,this._promise=void 0,this._process=function(e,t){}}function cZ(e,t){e.unload(),e._state=JQ.FAILED;const n="Failed to load Draco";return Promise.reject(e.getError(n,t))}Object(r["a"])(Object.create)&&(sZ.prototype=Object.create(KQ.prototype),sZ.prototype.constructor=sZ),Object.defineProperties(sZ.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),sZ.prototype.load=function(){const e=this._resourceCache,t=e.loadBufferView({gltf:this._gltf,bufferViewId:this._draco.bufferView,gltfResource:this._gltfResource,baseResource:this._baseResource});this._bufferViewLoader=t,this._state=JQ.LOADING;const n=this,i=new Promise((function(e,t){n._process=function(n,i){if(!Object(r["a"])(n._bufferViewTypedArray))return;if(Object(r["a"])(n._decodePromise))return;const o=n._draco,a=n._gltf,s=a.bufferViews,c=o.bufferView,l=s[c],u=o.attributes,h={array:new Uint8Array(n._bufferViewTypedArray),bufferView:l,compressedAttributes:u,dequantizeInShader:!0},d=aZ.decodeBufferView(h);Object(r["a"])(d)&&(n._decodePromise=d.then((function(t){n.isDestroyed()?e():(n.unload(),n._decodedData={indices:t.indexArray,vertexAttributes:t.attributeData},n._state=JQ.READY,e(n))})).catch((function(i){n.isDestroyed()?e():t(i)})))}}));return this._promise=t.promise.then((function(){if(!n.isDestroyed())return n._bufferViewTypedArray=t.typedArray,n._state=JQ.PROCESSING,i})).catch((function(e){if(!n.isDestroyed())return cZ(n,e)})),this._promise},sZ.prototype.process=function(e){return i["a"].typeOf.object("frameState",e),this._process(this,e)},sZ.prototype.unload=function(){Object(r["a"])(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0};var lZ=sZ;function uZ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,r=e.imageId,a=e.gltfResource,s=e.baseResource,c=e.cacheKey;i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.number("options.imageId",r),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const l=n.images[r],u=l.bufferView,h=l.uri;this._resourceCache=t,this._gltfResource=a,this._baseResource=s,this._gltf=n,this._bufferViewId=u,this._uri=h,this._cacheKey=c,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=JQ.UNLOADED,this._promise=void 0}function hZ(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map((function(e){return e.bufferView})),e=e[0]),{image:e,mipLevels:t}}function dZ(e){const t=e._resourceCache,n=t.loadBufferView({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,e._state=JQ.LOADING,n.promise.then((function(){if(e.isDestroyed())return;const t=n.typedArray;return _Z(t).then((function(t){if(e.isDestroyed())return;const n=hZ(t);return e.unload(),e._image=n.image,e._mipLevels=n.mipLevels,e._state=JQ.READY,e}))})).catch((function(t){if(!e.isDestroyed())return pZ(e,t,"Failed to load embedded image")}))}function fZ(e){const t=e._baseResource,n=e._uri,i=t.getDerivedResource({url:n});return e._state=JQ.LOADING,bZ(i).then((function(t){if(e.isDestroyed())return;const n=hZ(t);return e.unload(),e._image=n.image,e._mipLevels=n.mipLevels,e._state=JQ.READY,e})).catch((function(t){if(!e.isDestroyed())return pZ(e,t,`Failed to load image: ${n}`)}))}function pZ(e,t,n){return e.unload(),e._state=JQ.FAILED,Promise.reject(e.getError(n,t))}function mZ(e){const t=e.subarray(0,2),n=e.subarray(0,4),i=e.subarray(8,12);if(255===t[0]&&216===t[1])return"image/jpeg";if(137===t[0]&&80===t[1])return"image/png";if(171===t[0]&&75===t[1])return"image/ktx2";if(82===n[0]&&73===n[1]&&70===n[2]&&70===n[3]&&87===i[0]&&69===i[1]&&66===i[2]&&80===i[3])return"image/webp";throw new ye["a"]("Image format is not recognized")}function _Z(e){const t=mZ(e);if("image/ktx2"===t){const t=new Uint8Array(e);return sM(t)}return uZ._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}Object(r["a"])(Object.create)&&(uZ.prototype=Object.create(KQ.prototype),uZ.prototype.constructor=uZ),Object.defineProperties(uZ.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}}),uZ.prototype.load=function(){return Object(r["a"])(this._bufferViewId)?(this._promise=dZ(this),this._promise):(this._promise=fZ(this),this._promise)};const gZ=/(^data:image\/ktx2)|(\.ktx2$)/i;function bZ(e){const t=e.url;return gZ.test(t)?sM(e):e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}uZ.prototype.unload=function(){Object(r["a"])(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0},uZ._loadImageFromTypedArray=oM;var yZ=uZ;const vZ={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3};var OZ=Object.freeze(vZ);function AZ(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,r=e.accessorId,s=e.gltfResource,c=e.baseResource,l=e.draco,u=e.cacheKey,h=Object(o["a"])(e.asynchronous,!0),d=Object(o["a"])(e.loadBuffer,!1),f=Object(o["a"])(e.loadTypedArray,!1);if(i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.number("options.accessorId",r),i["a"].typeOf.object("options.gltfResource",s),i["a"].typeOf.object("options.baseResource",c),!d&&!f)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");const p=n.accessors[r].componentType;this._resourceCache=t,this._gltfResource=s,this._baseResource=c,this._gltf=n,this._accessorId=r,this._indexDatatype=p,this._draco=l,this._cacheKey=u,this._asynchronous=h,this._loadBuffer=d,this._loadTypedArray=f,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=JQ.UNLOADED,this._promise=void 0,this._process=function(e,t){}}Object(r["a"])(Object.create)&&(AZ.prototype=Object.create(KQ.prototype),AZ.prototype.constructor=AZ),Object.defineProperties(AZ.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});const wZ=new SZ;function TZ(e){const t=e._resourceCache,n=t.loadDraco({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,e._state=JQ.LOADING,n.promise.then((function(){if(e.isDestroyed())return;const t=n.decodedData.indices.typedArray;return e._typedArray=t,e._indexDatatype=Ks.fromTypedArray(t),e._state=JQ.PROCESSING,e}))}function CZ(e){const t=e._gltf,n=e._accessorId,i=t.accessors[n],o=i.bufferView,r=e._resourceCache,a=r.loadBufferView({gltf:t,bufferViewId:o,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._state=JQ.LOADING,e._bufferViewLoader=a,a.promise.then((function(){if(e.isDestroyed())return;const t=a.typedArray;return e._typedArray=EZ(e,t),e._state=JQ.PROCESSING,e}))}function EZ(e,t){const n=e._gltf,i=e._accessorId,o=n.accessors[i],r=o.count,a=o.componentType,s=t.buffer,c=t.byteOffset+o.byteOffset;let l;return a===ll.UNSIGNED_BYTE?l=new Uint8Array(s,c,r):a===ll.UNSIGNED_SHORT?l=new Uint16Array(s,c,r):a===ll.UNSIGNED_INT&&(l=new Uint32Array(s,c,r)),l}function xZ(e,t){e.unload(),e._state=JQ.FAILED;const n="Failed to load index buffer";return t=e.getError(n,t),Promise.reject(t)}function SZ(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}function IZ(e,t,n){const i=NV.createIndexBuffer({typedArray:e,context:n,usage:LV.STATIC_DRAW,indexDatatype:t});return i.vertexArrayDestroyable=!1,i}AZ.prototype.load=function(){let e;e=Object(r["a"])(this._draco)?TZ(this):CZ(this);const t=this,n=new Promise((function(e){t._process=function(t,n){if(t._state===JQ.READY)return;const i=t._typedArray,o=t._indexDatatype;if(Object(r["a"])(t._dracoLoader)&&t._dracoLoader.process(n),Object(r["a"])(t._bufferViewLoader)&&t._bufferViewLoader.process(n),!Object(r["a"])(i))return;let a;if(t._loadBuffer&&t._asynchronous){const e=wZ;e.set(i,o,n.context);const t=n.jobScheduler;if(!t.execute(e,OZ.BUFFER))return;a=e.buffer}else t._loadBuffer&&(a=IZ(i,o,n.context));t.unload(),t._buffer=a,t._typedArray=t._loadTypedArray?i:void 0,t._state=JQ.READY,e(t)}}));return this._promise=e.then((function(){if(!t.isDestroyed())return n})).catch((function(e){if(!t.isDestroyed())return xZ(t,e)})),this._promise},SZ.prototype.set=function(e,t,n){this.typedArray=e,this.indexDatatype=t,this.context=n},SZ.prototype.execute=function(){this.buffer=IZ(this.typedArray,this.indexDatatype,this.context)},AZ.prototype.process=function(e){return i["a"].typeOf.object("frameState",e),this._process(this,e)},AZ.prototype.unload=function(){Object(r["a"])(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;Object(r["a"])(this._bufferViewLoader)&&e.unload(this._bufferViewLoader),Object(r["a"])(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};var DZ=AZ;function PZ(e,t,n){if(n=Object(o["a"])(n,!1),n){const n=e.indexOf(t);if(n>-1)return n}return e.push(t),e.length-1}var jZ=PZ;function RZ(e,t){return Object(r["a"])(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}var LZ=RZ;function MZ(){}MZ.objectLegacy=function(e,t){if(Object(r["a"])(e))for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n],o=t(i,n);if(Object(r["a"])(o))return o}},MZ.object=function(e,t){if(Object(r["a"])(e)){const n=e.length;for(let i=0;i<n;i++){const n=e[i],o=t(n,i);if(Object(r["a"])(o))return o}}},MZ.topLevel=function(e,t,n){const i=e[t];return Object(r["a"])(i)&&!Array.isArray(i)?MZ.objectLegacy(i,n):MZ.object(i,n)},MZ.accessor=function(e,t){return MZ.topLevel(e,"accessors",t)},MZ.accessorWithSemantic=function(e,t,n){const i={};return MZ.mesh(e,(function(e){return MZ.meshPrimitive(e,(function(e){const o=MZ.meshPrimitiveAttribute(e,(function(e,o){if(0===o.indexOf(t)&&!Object(r["a"])(i[e])){i[e]=!0;const t=n(e);if(Object(r["a"])(t))return t}}));return Object(r["a"])(o)?o:MZ.meshPrimitiveTarget(e,(function(e){return MZ.meshPrimitiveTargetAttribute(e,(function(e,o){if(0===o.indexOf(t)&&!Object(r["a"])(i[e])){i[e]=!0;const t=n(e);if(Object(r["a"])(t))return t}}))}))}))}))},MZ.accessorContainingVertexAttributeData=function(e,t){const n={};return MZ.mesh(e,(function(e){return MZ.meshPrimitive(e,(function(e){const i=MZ.meshPrimitiveAttribute(e,(function(e){if(!Object(r["a"])(n[e])){n[e]=!0;const i=t(e);if(Object(r["a"])(i))return i}}));return Object(r["a"])(i)?i:MZ.meshPrimitiveTarget(e,(function(e){return MZ.meshPrimitiveTargetAttribute(e,(function(e){if(!Object(r["a"])(n[e])){n[e]=!0;const i=t(e);if(Object(r["a"])(i))return i}}))}))}))}))},MZ.accessorContainingIndexData=function(e,t){const n={};return MZ.mesh(e,(function(e){return MZ.meshPrimitive(e,(function(e){const i=e.indices;if(Object(r["a"])(i)&&!Object(r["a"])(n[i])){n[i]=!0;const e=t(i);if(Object(r["a"])(e))return e}}))}))},MZ.animation=function(e,t){return MZ.topLevel(e,"animations",t)},MZ.animationChannel=function(e,t){const n=e.channels;return MZ.object(n,t)},MZ.animationSampler=function(e,t){const n=e.samplers;return MZ.object(n,t)},MZ.buffer=function(e,t){return MZ.topLevel(e,"buffers",t)},MZ.bufferView=function(e,t){return MZ.topLevel(e,"bufferViews",t)},MZ.camera=function(e,t){return MZ.topLevel(e,"cameras",t)},MZ.image=function(e,t){return MZ.topLevel(e,"images",t)},MZ.material=function(e,t){return MZ.topLevel(e,"materials",t)},MZ.materialValue=function(e,t){let n=e.values;Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.KHR_techniques_webgl)&&(n=e.extensions.KHR_techniques_webgl.values);for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const e=t(n[i],i);if(Object(r["a"])(e))return e}},MZ.mesh=function(e,t){return MZ.topLevel(e,"meshes",t)},MZ.meshPrimitive=function(e,t){const n=e.primitives;if(Object(r["a"])(n)){const e=n.length;for(let i=0;i<e;i++){const e=n[i],o=t(e,i);if(Object(r["a"])(o))return o}}},MZ.meshPrimitiveAttribute=function(e,t){const n=e.attributes;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const e=t(n[i],i);if(Object(r["a"])(e))return e}},MZ.meshPrimitiveTarget=function(e,t){const n=e.targets;if(Object(r["a"])(n)){const e=n.length;for(let i=0;i<e;++i){const e=t(n[i],i);if(Object(r["a"])(e))return e}}},MZ.meshPrimitiveTargetAttribute=function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n],o=t(i,n);if(Object(r["a"])(o))return o}},MZ.node=function(e,t){return MZ.topLevel(e,"nodes",t)},MZ.nodeInTree=function(e,t,n){const i=e.nodes;if(Object(r["a"])(i)){const o=t.length;for(let a=0;a<o;a++){const o=t[a],s=i[o];if(Object(r["a"])(s)){let t=n(s,o);if(Object(r["a"])(t))return t;const i=s.children;if(Object(r["a"])(i)&&(t=MZ.nodeInTree(e,i,n),Object(r["a"])(t)))return t}}}},MZ.nodeInScene=function(e,t,n){const i=t.nodes;if(Object(r["a"])(i))return MZ.nodeInTree(e,i,n)},MZ.program=function(e,t){return LZ(e,"KHR_techniques_webgl")?MZ.object(e.extensions.KHR_techniques_webgl.programs,t):MZ.topLevel(e,"programs",t)},MZ.sampler=function(e,t){return MZ.topLevel(e,"samplers",t)},MZ.scene=function(e,t){return MZ.topLevel(e,"scenes",t)},MZ.shader=function(e,t){return LZ(e,"KHR_techniques_webgl")?MZ.object(e.extensions.KHR_techniques_webgl.shaders,t):MZ.topLevel(e,"shaders",t)},MZ.skin=function(e,t){return MZ.topLevel(e,"skins",t)},MZ.skinJoint=function(e,t){const n=e.joints;if(Object(r["a"])(n)){const e=n.length;for(let i=0;i<e;i++){const e=n[i],o=t(e);if(Object(r["a"])(o))return o}}},MZ.techniqueAttribute=function(e,t){const n=e.attributes;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const e=t(n[i],i);if(Object(r["a"])(e))return e}},MZ.techniqueUniform=function(e,t){const n=e.uniforms;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const e=t(n[i],i);if(Object(r["a"])(e))return e}},MZ.techniqueParameter=function(e,t){const n=e.parameters;for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const e=t(n[i],i);if(Object(r["a"])(e))return e}},MZ.technique=function(e,t){return LZ(e,"KHR_techniques_webgl")?MZ.object(e.extensions.KHR_techniques_webgl.techniques,t):MZ.topLevel(e,"techniques",t)},MZ.texture=function(e,t){return MZ.topLevel(e,"textures",t)};var NZ=MZ;function BZ(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}var FZ=BZ;function zZ(e,t){const n=t.bufferView;if(Object(r["a"])(n)){const t=e.bufferViews[n];if(Object(r["a"])(t.byteStride)&&t.byteStride>0)return t.byteStride}return Ks.getSizeInBytes(t.componentType)*FZ(t.type)}var kZ=zZ;function UZ(e){NZ.accessor(e,(function(e){Object(r["a"])(e.bufferView)&&(e.byteOffset=Object(o["a"])(e.byteOffset,0))})),NZ.bufferView(e,(function(e){Object(r["a"])(e.buffer)&&(e.byteOffset=Object(o["a"])(e.byteOffset,0))})),NZ.mesh(e,(function(t){NZ.meshPrimitive(t,(function(t){if(t.mode=Object(o["a"])(t.mode,Ys.TRIANGLES),!Object(r["a"])(t.material)){Object(r["a"])(e.materials)||(e.materials=[]);const n={name:"default"};t.material=jZ(e.materials,n)}}))})),NZ.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t],i=n.bufferView;if(n.normalized=Object(o["a"])(n.normalized,!1),Object(r["a"])(i)){const t=e.bufferViews[i];t.byteStride=kZ(e,n),t.target=Ys.ARRAY_BUFFER}})),NZ.accessorContainingIndexData(e,(function(t){const n=e.accessors[t],i=n.bufferView;if(Object(r["a"])(i)){const t=e.bufferViews[i];t.target=Ys.ELEMENT_ARRAY_BUFFER}})),NZ.material(e,(function(e){const t=Object(o["a"])(e.extensions,o["a"].EMPTY_OBJECT),n=t.KHR_materials_common;if(Object(r["a"])(n)){const e=n.technique,t=Object(r["a"])(n.values)?n.values:{};return n.values=t,t.ambient=Object(r["a"])(t.ambient)?t.ambient:[0,0,0,1],t.emission=Object(r["a"])(t.emission)?t.emission:[0,0,0,1],t.transparency=Object(o["a"])(t.transparency,1),"CONSTANT"!==e&&(t.diffuse=Object(r["a"])(t.diffuse)?t.diffuse:[0,0,0,1],"LAMBERT"!==e&&(t.specular=Object(r["a"])(t.specular)?t.specular:[0,0,0,1],t.shininess=Object(o["a"])(t.shininess,0))),n.transparent=Object(o["a"])(n.transparent,!1),void(n.doubleSided=Object(o["a"])(n.doubleSided,!1))}e.emissiveFactor=Object(o["a"])(e.emissiveFactor,[0,0,0]),e.alphaMode=Object(o["a"])(e.alphaMode,"OPAQUE"),e.doubleSided=Object(o["a"])(e.doubleSided,!1),"MASK"===e.alphaMode&&(e.alphaCutoff=Object(o["a"])(e.alphaCutoff,.5));const i=t.KHR_techniques_webgl;Object(r["a"])(i)&&NZ.materialValue(e,(function(e){Object(r["a"])(e.index)&&HZ(e)})),HZ(e.emissiveTexture),HZ(e.normalTexture),HZ(e.occlusionTexture);const a=e.pbrMetallicRoughness;Object(r["a"])(a)&&(a.baseColorFactor=Object(o["a"])(a.baseColorFactor,[1,1,1,1]),a.metallicFactor=Object(o["a"])(a.metallicFactor,1),a.roughnessFactor=Object(o["a"])(a.roughnessFactor,1),HZ(a.baseColorTexture),HZ(a.metallicRoughnessTexture));const s=t.KHR_materials_pbrSpecularGlossiness;Object(r["a"])(s)&&(s.diffuseFactor=Object(o["a"])(s.diffuseFactor,[1,1,1,1]),s.specularFactor=Object(o["a"])(s.specularFactor,[1,1,1]),s.glossinessFactor=Object(o["a"])(s.glossinessFactor,1),HZ(s.specularGlossinessTexture))})),NZ.animation(e,(function(e){NZ.animationSampler(e,(function(e){e.interpolation=Object(o["a"])(e.interpolation,"LINEAR")}))}));const t=VZ(e);return NZ.node(e,(function(e,n){const i=Object(r["a"])(t[n]);i||Object(r["a"])(e.translation)||Object(r["a"])(e.rotation)||Object(r["a"])(e.scale)?(e.translation=Object(o["a"])(e.translation,[0,0,0]),e.rotation=Object(o["a"])(e.rotation,[0,0,0,1]),e.scale=Object(o["a"])(e.scale,[1,1,1])):e.matrix=Object(o["a"])(e.matrix,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])})),NZ.sampler(e,(function(e){e.wrapS=Object(o["a"])(e.wrapS,Ys.REPEAT),e.wrapT=Object(o["a"])(e.wrapT,Ys.REPEAT)})),Object(r["a"])(e.scenes)&&!Object(r["a"])(e.scene)&&(e.scene=0),e}function VZ(e){const t={};return NZ.animation(e,(function(e){NZ.animationChannel(e,(function(e){const n=e.target,i=n.node,o=n.path;"translation"!==o&&"rotation"!==o&&"scale"!==o||(t[i]=!0)}))})),t}function HZ(e){Object(r["a"])(e)&&(e.texCoord=Object(o["a"])(e.texCoord,0))}var GZ=UZ;function WZ(e){return NZ.shader(e,(function(e){qZ(e)})),NZ.buffer(e,(function(e){qZ(e)})),NZ.image(e,(function(e){qZ(e)})),qZ(e),e}function qZ(e){e.extras=Object(r["a"])(e.extras)?e.extras:{},e.extras._pipeline=Object(r["a"])(e.extras._pipeline)?e.extras._pipeline:{}}var YZ=WZ;function XZ(e,t){const n=e.extensionsRequired;if(Object(r["a"])(n)){const i=n.indexOf(t);i>=0&&n.splice(i,1),0===n.length&&delete e.extensionsRequired}}var KZ=XZ;function $Z(e,t){const n=e.extensionsUsed;if(Object(r["a"])(n)){const i=n.indexOf(t);i>=0&&n.splice(i,1),KZ(e,t),0===n.length&&delete e.extensionsUsed}}var JZ=$Z;const QZ=4;function ZZ(e){const t=eM(e);if("glTF"!==t)throw new ye["a"]("File is not valid binary glTF");const n=e0(e,0,5),i=n[1];if(1!==i&&2!==i)throw new ye["a"]("Binary glTF version is not 1 or 2");return 1===i?t0(e,n):n0(e,n)}function e0(e,t,n){const i=new DataView(e.buffer),o=new Array(n);for(let r=0;r<n;++r)o[r]=i.getUint32(e.byteOffset+t+r*QZ,!0);return o}function t0(e,t){const n=t[2],i=t[3],a=t[4];if(0!==a)throw new ye["a"]("Binary glTF scene format is not JSON");const s=20,c=s+i,l=Nh(e,s,i),u=JSON.parse(l);YZ(u);const h=e.subarray(c,n),d=u.buffers;if(Object(r["a"])(d)&&Object.keys(d).length>0){const e=Object(o["a"])(d.binary_glTF,d.KHR_binary_glTF);Object(r["a"])(e)&&(e.extras._pipeline.source=h,delete e.uri)}return JZ(u,"KHR_binary_glTF"),u}function n0(e,t){const n=t[2];let i,o,a=12;while(a<n){const t=e0(e,a,2),n=t[0],r=t[1];a+=8;const s=e.subarray(a,a+n);if(a+=n,1313821514===r){const e=Nh(s);i=JSON.parse(e),YZ(i)}else 5130562===r&&(o=s)}if(Object(r["a"])(i)&&Object(r["a"])(o)){const e=i.buffers;if(Object(r["a"])(e)&&e.length>0){const t=e[0];t.extras._pipeline.source=o}}return i}var i0=ZZ;function o0(e){return NZ.shader(e,(function(e){r0(e)})),NZ.buffer(e,(function(e){r0(e)})),NZ.image(e,(function(e){r0(e)})),r0(e),e}function r0(e){Object(r["a"])(e.extras)&&(Object(r["a"])(e.extras._pipeline)&&delete e.extras._pipeline,0===Object.keys(e.extras).length&&delete e.extras)}var a0=o0;function s0(e,t){let n=e.extensionsUsed;Object(r["a"])(n)||(n=[],e.extensionsUsed=n),jZ(n,t,!0)}var c0=s0;function l0(e){switch(e){case Ks.BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt8(t+r*i)};case Ks.UNSIGNED_BYTE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint8(t+r*i)};case Ks.SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt16(t+r*i,!0)};case Ks.UNSIGNED_SHORT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint16(t+r*i,!0)};case Ks.INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getInt32(t+r*i,!0)};case Ks.UNSIGNED_INT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getUint32(t+r*i,!0)};case Ks.FLOAT:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat32(t+r*i,!0)};case Ks.DOUBLE:return function(e,t,n,i,o){for(let r=0;r<n;++r)o[r]=e.getFloat64(t+r*i,!0)}}}var u0=l0;function h0(e,t){const n=e.bufferViews,i=e.buffers,o=t.bufferView,a=FZ(t.type);if(!Object(r["a"])(t.bufferView))return{min:new Array(a).fill(0),max:new Array(a).fill(0)};const s=new Array(a).fill(Number.POSITIVE_INFINITY),c=new Array(a).fill(Number.NEGATIVE_INFINITY),l=n[o],u=l.buffer,h=i[u],d=h.extras._pipeline.source,f=t.count,p=kZ(e,t);let m=t.byteOffset+l.byteOffset+d.byteOffset;const _=t.componentType,g=Ks.getSizeInBytes(_),b=new DataView(d.buffer),y=new Array(a),v=u0(_);for(let r=0;r<f;r++){v(b,m,a,g,y);for(let e=0;e<a;e++){const t=y[e];s[e]=Math.min(s[e],t),c[e]=Math.max(c[e],t)}m+=p}return{min:s,max:c}}var d0=h0;const f0=[Ys.FUNC_ADD,Ys.FUNC_ADD],p0=[Ys.ONE,Ys.ZERO,Ys.ONE,Ys.ZERO];function m0(e,t){const n=e.enable;return!!Object(r["a"])(n)&&n.indexOf(t)>-1}const _0=[Ys.ZERO,Ys.ONE,Ys.SRC_COLOR,Ys.ONE_MINUS_SRC_COLOR,Ys.SRC_ALPHA,Ys.ONE_MINUS_SRC_ALPHA,Ys.DST_ALPHA,Ys.ONE_MINUS_DST_ALPHA,Ys.DST_COLOR,Ys.ONE_MINUS_DST_COLOR];function g0(e,t){if(!Object(r["a"])(e))return t;for(let n=0;n<4;n++)if(-1===_0.indexOf(e[n]))return t;return e}function b0(e){const t={},n={},i=e.techniques;return Object(r["a"])(i)?(NZ.technique(e,(function(e,i){const a=e.states;if(Object(r["a"])(a)){const s=n[i]={};if(m0(a,Ys.BLEND)){s.alphaMode="BLEND";const e=a.functions;Object(r["a"])(e)&&(Object(r["a"])(e.blendEquationSeparate)||Object(r["a"])(e.blendFuncSeparate))&&(t[i]={blendEquation:Object(o["a"])(e.blendEquationSeparate,f0),blendFactors:g0(e.blendFuncSeparate,p0)})}m0(a,Ys.CULL_FACE)||(s.doubleSided=!0),delete e.states}})),Object.keys(t).length>0&&(Object(r["a"])(e.extensions)||(e.extensions={}),c0(e,"KHR_blend")),NZ.material(e,(function(e){if(Object(r["a"])(e.technique)){const i=n[e.technique];NZ.objectLegacy(i,(function(t,n){e[n]=t}));const o=t[e.technique];Object(r["a"])(o)&&(Object(r["a"])(e.extensions)||(e.extensions={}),e.extensions.KHR_blend=o)}})),e):e}var y0=b0;function v0(e,t){let n=e.extensionsRequired;Object(r["a"])(n)||(n=[],e.extensionsRequired=n),jZ(n,t,!0),c0(e,t)}var O0=v0;function A0(e){const t=e.techniques,n={},i={},o={};if(Object(r["a"])(t)){const t={programs:[],shaders:[],techniques:[]},a=e.glExtensionsUsed;delete e.glExtensionsUsed,NZ.technique(e,(function(s,c){const l={name:s.name,program:void 0,attributes:{},uniforms:{}};let u;if(NZ.techniqueAttribute(s,(function(e,t){u=s.parameters[e],l.attributes[t]={semantic:u.semantic}})),NZ.techniqueUniform(s,(function(e,t){u=s.parameters[e],l.uniforms[t]={count:u.count,node:u.node,type:u.type,semantic:u.semantic,value:u.value},Object(r["a"])(n[c])||(n[c]={}),n[c][e]=t})),Object(r["a"])(o[s.program]))l.program=o[s.program];else{const n=e.programs[s.program],i={name:n.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:a},r=e.shaders[n.fragmentShader];i.fragmentShader=jZ(t.shaders,r,!0);const c=e.shaders[n.vertexShader];i.vertexShader=jZ(t.shaders,c,!0),l.program=jZ(t.programs,i),o[s.program]=l.program}i[c]=jZ(t.techniques,l)})),t.techniques.length>0&&(Object(r["a"])(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t,c0(e,"KHR_techniques_webgl"),O0(e,"KHR_techniques_webgl"))}return NZ.material(e,(function(e){if(Object(r["a"])(e.technique)){const t={technique:i[e.technique]};NZ.objectLegacy(e.values,(function(i,o){Object(r["a"])(t.values)||(t.values={});const a=n[e.technique][o];Object(r["a"])(a)&&(t.values[a]=i)})),Object(r["a"])(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t}delete e.technique,delete e.values})),delete e.techniques,delete e.programs,delete e.shaders,e}var w0=A0;function T0(e,t){i["a"].typeOf.object("material",e),i["a"].defined("handler",t);const n=e.pbrMetallicRoughness;if(Object(r["a"])(n)){if(Object(r["a"])(n.baseColorTexture)){const e=n.baseColorTexture,i=t(e.index,e);if(Object(r["a"])(i))return i}if(Object(r["a"])(n.metallicRoughnessTexture)){const e=n.metallicRoughnessTexture,i=t(e.index,e);if(Object(r["a"])(i))return i}}if(Object(r["a"])(e.extensions)){const n=e.extensions.KHR_materials_pbrSpecularGlossiness;if(Object(r["a"])(n)){if(Object(r["a"])(n.diffuseTexture)){const e=n.diffuseTexture,i=t(e.index,e);if(Object(r["a"])(i))return i}if(Object(r["a"])(n.specularGlossinessTexture)){const e=n.specularGlossinessTexture,i=t(e.index,e);if(Object(r["a"])(i))return i}}const i=e.extensions.KHR_materials_common;if(Object(r["a"])(i)&&Object(r["a"])(i.values)){const e=i.values.diffuse,n=i.values.ambient,o=i.values.emission,a=i.values.specular;if(Object(r["a"])(e)&&Object(r["a"])(e.index)){const n=t(e.index,e);if(Object(r["a"])(n))return n}if(Object(r["a"])(n)&&Object(r["a"])(n.index)){const e=t(n.index,n);if(Object(r["a"])(e))return e}if(Object(r["a"])(o)&&Object(r["a"])(o.index)){const e=t(o.index,o);if(Object(r["a"])(e))return e}if(Object(r["a"])(a)&&Object(r["a"])(a.index)){const e=t(a.index,a);if(Object(r["a"])(e))return e}}}const o=NZ.materialValue(e,(function(e){if(Object(r["a"])(e.index)){const n=t(e.index,e);if(Object(r["a"])(n))return n}}));if(Object(r["a"])(o))return o;if(Object(r["a"])(e.emissiveTexture)){const n=e.emissiveTexture,i=t(n.index,n);if(Object(r["a"])(i))return i}if(Object(r["a"])(e.normalTexture)){const n=e.normalTexture,i=t(n.index,n);if(Object(r["a"])(i))return i}if(Object(r["a"])(e.occlusionTexture)){const n=e.occlusionTexture,i=t(n.index,n);if(Object(r["a"])(i))return i}}var C0=T0;const E0=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"];function x0(e,t){return t=Object(o["a"])(t,E0),E0.forEach((function(n){t.indexOf(n)>-1&&I0(e,n)})),e}const S0={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function I0(e,t){const n=S0[t],i=e[n];if(Object(r["a"])(i)){let n=0;const o=P0[t](e),r=i.length;for(let i=0;i<r;++i)o[i]||(D0[t](e,i-n),n++)}}function D0(){}function P0(){}function j0(e,t,n){const i=e.nodes[t];return!(Object(r["a"])(i.mesh)||Object(r["a"])(i.camera)||Object(r["a"])(i.skin)||Object(r["a"])(i.weights)||Object(r["a"])(i.extras)||Object(r["a"])(i.extensions)&&0!==Object.keys(i.extensions).length||Object(r["a"])(n[t]))&&(!Object(r["a"])(i.children)||0===i.children.filter((function(t){return!j0(e,t,n)})).length)}D0.accessor=function(e,t){const n=e.accessors;n.splice(t,1),NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){NZ.meshPrimitiveAttribute(e,(function(n,i){n>t&&e.attributes[i]--})),NZ.meshPrimitiveTarget(e,(function(e){NZ.meshPrimitiveTargetAttribute(e,(function(n,i){n>t&&e[i]--}))}));const n=e.indices;Object(r["a"])(n)&&n>t&&e.indices--}))})),NZ.skin(e,(function(e){Object(r["a"])(e.inverseBindMatrices)&&e.inverseBindMatrices>t&&e.inverseBindMatrices--})),NZ.animation(e,(function(e){NZ.animationSampler(e,(function(e){Object(r["a"])(e.input)&&e.input>t&&e.input--,Object(r["a"])(e.output)&&e.output>t&&e.output--}))}))},D0.buffer=function(e,t){const n=e.buffers;n.splice(t,1),NZ.bufferView(e,(function(e){Object(r["a"])(e.buffer)&&e.buffer>t&&e.buffer--,Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.EXT_meshopt_compression)&&e.extensions.EXT_meshopt_compression.buffer--}))},D0.bufferView=function(e,t){const n=e.bufferViews;if(n.splice(t,1),NZ.accessor(e,(function(e){Object(r["a"])(e.bufferView)&&e.bufferView>t&&e.bufferView--})),NZ.shader(e,(function(e){Object(r["a"])(e.bufferView)&&e.bufferView>t&&e.bufferView--})),NZ.image(e,(function(e){Object(r["a"])(e.bufferView)&&e.bufferView>t&&e.bufferView--})),LZ(e,"KHR_draco_mesh_compression")&&NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>t&&e.extensions.KHR_draco_mesh_compression.bufferView--}))})),LZ(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata,i=n.featureTables;for(const e in i)if(i.hasOwnProperty(e)){const n=i[e],o=n.properties;if(Object(r["a"])(o))for(const e in o)if(o.hasOwnProperty(e)){const n=o[e];Object(r["a"])(n.bufferView)&&n.bufferView>t&&n.bufferView--,Object(r["a"])(n.arrayOffsetBufferView)&&n.arrayOffsetBufferView>t&&n.arrayOffsetBufferView--,Object(r["a"])(n.stringOffsetBufferView)&&n.stringOffsetBufferView>t&&n.stringOffsetBufferView--}}}if(LZ(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata,i=n.propertyTables;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.properties;for(const n in o)if(o.hasOwnProperty(n)){const e=o[n];Object(r["a"])(e.values)&&e.values>t&&e.values--,Object(r["a"])(e.arrayOffsets)&&e.arrayOffsets>t&&e.arrayOffsets--,Object(r["a"])(e.stringOffsets)&&e.stringOffsets>t&&e.stringOffsets--}}}}},D0.image=function(e,t){const n=e.images;n.splice(t,1),NZ.texture(e,(function(e){Object(r["a"])(e.source)&&e.source>t&&--e.source;const n=e.extensions;Object(r["a"])(n)&&Object(r["a"])(n.EXT_texture_webp)&&n.EXT_texture_webp.source>t?--e.extensions.EXT_texture_webp.source:Object(r["a"])(n)&&Object(r["a"])(n.KHR_texture_basisu)&&n.KHR_texture_basisu.source>t&&--e.extensions.KHR_texture_basisu.source}))},D0.mesh=function(e,t){const n=e.meshes;n.splice(t,1),NZ.node(e,(function(e){Object(r["a"])(e.mesh)&&(e.mesh>t?e.mesh--:e.mesh===t&&delete e.mesh)}))},D0.node=function(e,t){const n=e.nodes;n.splice(t,1),NZ.skin(e,(function(e){Object(r["a"])(e.skeleton)&&e.skeleton>t&&e.skeleton--,e.joints=e.joints.map((function(e){return e>t?e-1:e}))})),NZ.animation(e,(function(e){NZ.animationChannel(e,(function(e){Object(r["a"])(e.target)&&Object(r["a"])(e.target.node)&&e.target.node>t&&e.target.node--}))})),NZ.technique(e,(function(e){NZ.techniqueUniform(e,(function(e){Object(r["a"])(e.node)&&e.node>t&&e.node--}))})),NZ.node(e,(function(e){Object(r["a"])(e.children)&&(e.children=e.children.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e})))})),NZ.scene(e,(function(e){e.nodes=e.nodes.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e}))}))},D0.material=function(e,t){const n=e.materials;n.splice(t,1),NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){Object(r["a"])(e.material)&&e.material>t&&e.material--}))}))},D0.sampler=function(e,t){const n=e.samplers;n.splice(t,1),NZ.texture(e,(function(e){Object(r["a"])(e.sampler)&&e.sampler>t&&--e.sampler}))},D0.texture=function(e,t){const n=e.textures;if(n.splice(t,1),NZ.material(e,(function(e){C0(e,(function(e,n){n.index>t&&--n.index}))})),LZ(e,"EXT_feature_metadata")){NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){const n=e.extensions;if(Object(r["a"])(n)&&Object(r["a"])(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata,i=e.featureIdTextures;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.featureIds.texture;o.index>t&&--o.index}}}}))}));const n=e.extensions.EXT_feature_metadata,i=n.featureTextures;for(const e in i)if(i.hasOwnProperty(e)){const n=i[e],o=n.properties;if(Object(r["a"])(o))for(const e in o)if(o.hasOwnProperty(e)){const n=o[e],i=n.texture;i.index>t&&--i.index}}}if(LZ(e,"EXT_mesh_features")&&NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){const n=e.extensions;if(Object(r["a"])(n)&&Object(r["a"])(n.EXT_mesh_features)){const e=n.EXT_mesh_features,i=e.featureIds;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n];Object(r["a"])(e.texture)&&e.texture.index>t&&--e.texture.index}}}}))})),LZ(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata,i=n.propertyTextures;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.properties;for(const n in o)if(o.hasOwnProperty(n)){const e=o[n];e.index>t&&--e.index}}}}},P0.accessor=function(e){const t={};return NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){NZ.meshPrimitiveAttribute(e,(function(e){t[e]=!0})),NZ.meshPrimitiveTarget(e,(function(e){NZ.meshPrimitiveTargetAttribute(e,(function(e){t[e]=!0}))}));const n=e.indices;Object(r["a"])(n)&&(t[n]=!0)}))})),NZ.skin(e,(function(e){Object(r["a"])(e.inverseBindMatrices)&&(t[e.inverseBindMatrices]=!0)})),NZ.animation(e,(function(e){NZ.animationSampler(e,(function(e){Object(r["a"])(e.input)&&(t[e.input]=!0),Object(r["a"])(e.output)&&(t[e.output]=!0)}))})),LZ(e,"EXT_mesh_gpu_instancing")&&NZ.node(e,(function(e){Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.EXT_mesh_gpu_instancing)&&Object.keys(e.extensions.EXT_mesh_gpu_instancing.attributes).forEach((function(n){const i=e.extensions.EXT_mesh_gpu_instancing.attributes[n];t[i]=!0}))})),t},P0.buffer=function(e){const t={};return NZ.bufferView(e,(function(e){Object(r["a"])(e.buffer)&&(t[e.buffer]=!0),Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.EXT_meshopt_compression)&&(t[e.extensions.EXT_meshopt_compression.buffer]=!0)})),t},P0.bufferView=function(e){const t={};if(NZ.accessor(e,(function(e){Object(r["a"])(e.bufferView)&&(t[e.bufferView]=!0)})),NZ.shader(e,(function(e){Object(r["a"])(e.bufferView)&&(t[e.bufferView]=!0)})),NZ.image(e,(function(e){Object(r["a"])(e.bufferView)&&(t[e.bufferView]=!0)})),LZ(e,"KHR_draco_mesh_compression")&&NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.KHR_draco_mesh_compression)&&(t[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)}))})),LZ(e,"EXT_feature_metadata")){const n=e.extensions.EXT_feature_metadata,i=n.featureTables;for(const e in i)if(i.hasOwnProperty(e)){const n=i[e],o=n.properties;if(Object(r["a"])(o))for(const e in o)if(o.hasOwnProperty(e)){const n=o[e];Object(r["a"])(n.bufferView)&&(t[n.bufferView]=!0),Object(r["a"])(n.arrayOffsetBufferView)&&(t[n.arrayOffsetBufferView]=!0),Object(r["a"])(n.stringOffsetBufferView)&&(t[n.stringOffsetBufferView]=!0)}}}if(LZ(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata,i=n.propertyTables;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.properties;for(const n in o)if(o.hasOwnProperty(n)){const e=o[n];Object(r["a"])(e.values)&&(t[e.values]=!0),Object(r["a"])(e.arrayOffsets)&&(t[e.arrayOffsets]=!0),Object(r["a"])(e.stringOffsets)&&(t[e.stringOffsets]=!0)}}}}return t},P0.image=function(e){const t={};return NZ.texture(e,(function(e){Object(r["a"])(e.source)&&(t[e.source]=!0),Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.EXT_texture_webp)?t[e.extensions.EXT_texture_webp.source]=!0:Object(r["a"])(e.extensions)&&Object(r["a"])(e.extensions.KHR_texture_basisu)&&(t[e.extensions.KHR_texture_basisu.source]=!0)})),t},P0.mesh=function(e){const t={};return NZ.node(e,(function(n){if(Object(r["a"])(n.mesh&&Object(r["a"])(e.meshes))){const i=e.meshes[n.mesh];Object(r["a"])(i)&&Object(r["a"])(i.primitives)&&i.primitives.length>0&&(t[n.mesh]=!0)}})),t},P0.node=function(e){const t={};return NZ.skin(e,(function(e){Object(r["a"])(e.skeleton)&&(t[e.skeleton]=!0),NZ.skinJoint(e,(function(e){t[e]=!0}))})),NZ.animation(e,(function(e){NZ.animationChannel(e,(function(e){Object(r["a"])(e.target)&&Object(r["a"])(e.target.node)&&(t[e.target.node]=!0)}))})),NZ.technique(e,(function(e){NZ.techniqueUniform(e,(function(e){Object(r["a"])(e.node)&&(t[e.node]=!0)}))})),NZ.node(e,(function(n,i){j0(e,i,t)||(t[i]=!0)})),t},P0.material=function(e){const t={};return NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){Object(r["a"])(e.material)&&(t[e.material]=!0)}))})),t},P0.texture=function(e){const t={};if(NZ.material(e,(function(e){C0(e,(function(e){t[e]=!0}))})),LZ(e,"EXT_feature_metadata")){NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){const n=e.extensions;if(Object(r["a"])(n)&&Object(r["a"])(n.EXT_feature_metadata)){const e=n.EXT_feature_metadata,i=e.featureIdTextures;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.featureIds.texture;t[o.index]=!0}}}}))}));const n=e.extensions.EXT_feature_metadata,i=n.featureTextures;for(const e in i)if(i.hasOwnProperty(e)){const n=i[e],o=n.properties;if(Object(r["a"])(o))for(const e in o)if(o.hasOwnProperty(e)){const n=o[e],i=n.texture;t[i.index]=!0}}}if(LZ(e,"EXT_mesh_features")&&NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){const n=e.extensions;if(Object(r["a"])(n)&&Object(r["a"])(n.EXT_mesh_features)){const e=n.EXT_mesh_features,i=e.featureIds;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n];Object(r["a"])(e.texture)&&(t[e.texture.index]=!0)}}}}))})),LZ(e,"EXT_structural_metadata")){const n=e.extensions.EXT_structural_metadata,i=n.propertyTextures;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;++n){const e=i[n],o=e.properties;for(const n in o)if(o.hasOwnProperty(n)){const e=o[n];t[e.index]=!0}}}}return t},P0.sampler=function(e){const t={};return NZ.texture(e,(function(e){Object(r["a"])(e.sampler)&&(t[e.sampler]=!0)})),t};var R0=x0;function L0(e,t){const n={byteLength:t.length,extras:{_pipeline:{source:t}}},i=jZ(e.buffers,n),o={buffer:i,byteOffset:0,byteLength:t.length};return jZ(e.bufferViews,o)}var M0=L0;function N0(e,t){const n=kZ(e,t),i=Ks.getSizeInBytes(t.componentType),o=FZ(t.type),a=t.count,s=new Array(o*a);if(!Object(r["a"])(t.bufferView))return s.fill(0);const c=e.bufferViews[t.bufferView],l=e.buffers[c.buffer].extras._pipeline.source;let u=t.byteOffset+c.byteOffset+l.byteOffset;const h=new DataView(l.buffer),d=new Array(o),f=u0(t.componentType);for(let r=0;r<a;++r){f(h,u,o,i,d);for(let e=0;e<o;++e)s[r*o+e]=d[e];u+=n}return s}var B0=N0;function F0(e){let t;return NZ.accessorWithSemantic(e,"JOINTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===Ys.BYTE?z0(e,i,Ks.UNSIGNED_BYTE):t!==Ys.UNSIGNED_BYTE&&t!==Ys.UNSIGNED_SHORT&&z0(e,i,Ks.UNSIGNED_SHORT)})),NZ.accessorWithSemantic(e,"WEIGHTS_0",(function(n){const i=e.accessors[n];t=i.componentType,t===Ys.BYTE?z0(e,i,Ks.UNSIGNED_BYTE):t===Ys.SHORT&&z0(e,i,Ks.UNSIGNED_SHORT)})),e}function z0(e,t,n){const i=Ks.createTypedArray(n,B0(e,t)),o=new Uint8Array(i.buffer);t.bufferView=M0(e,o),t.componentType=n,t.byteOffset=0}var k0=F0;function U0(e,t){return JZ(e,t),"CESIUM_RTC"===t&&V0(e),H0(e,t)}function V0(e){NZ.technique(e,(function(e){NZ.techniqueUniform(e,(function(e){"CESIUM_RTC_MODELVIEW"===e.semantic&&(e.semantic="MODELVIEW")}))}))}function H0(e,t){if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;++i)H0(e[i],t)}else if(null!==e&&"object"===typeof e&&e.constructor===Object){const n=e.extensions;let i;Object(r["a"])(n)&&(i=n[t],Object(r["a"])(i)&&(delete n[t],0===Object.keys(n).length&&delete e.extensions));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&H0(e[o],t);return i}}var G0=U0;const W0={.8:Q0,"1.0":w1,"2.0":void 0};function q0(e,t){t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=t.targetVersion;let i=e.version;e.asset=Object(o["a"])(e.asset,{version:"1.0"}),e.asset.version=Object(o["a"])(e.asset.version,"1.0"),i=Object(o["a"])(i,e.asset.version).toString(),Object.prototype.hasOwnProperty.call(W0,i)||(Object(r["a"])(i)&&(i=i.substring(0,3)),Object.prototype.hasOwnProperty.call(W0,i)||(i="1.0"));let a=W0[i];while(Object(r["a"])(a)){if(i===n)break;a(e,t),i=e.asset.version,a=W0[i]}return t.keepLegacyExtensions||(D1(e),P1(e)),e}function Y0(e){const t=e.materials;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n],i=e.instanceTechnique;Object(r["a"])(i)&&(e.technique=i.technique,e.values=i.values,delete e.instanceTechnique)}}function X0(e){const t=e.meshes;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n],i=e.primitives;if(Object(r["a"])(i)){const e=i.length;for(let t=0;t<e;++t){const e=i[t],n=Object(o["a"])(e.primitive,Ys.TRIANGLES);e.mode=Object(o["a"])(e.mode,n),delete e.primitive}}}}function K0(e){const t=e.nodes,n=new g,i=new Kr;for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const e=t[o];if(Object(r["a"])(e.rotation)){const t=e.rotation;g.fromArray(t,0,n),Kr.fromAxisAngle(n,t[3],i),e.rotation=[i.x,i.y,i.z,i.w]}const a=e.instanceSkin;Object(r["a"])(a)&&(e.skeletons=a.skeletons,e.skin=a.skin,e.meshes=a.meshes,delete e.instanceSkin)}}function $0(e){const t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,a={},s=new g,c=new Kr;for(const l in t)if(Object.prototype.hasOwnProperty.call(t,l)){const e=t[l],u=e.channels,h=e.parameters,d=e.samplers;if(Object(r["a"])(u)){const e=u.length;for(let t=0;t<e;++t){const e=u[t];if("rotation"===e.target.path){const t=h[d[e.sampler].output];if(Object(r["a"])(a[t]))continue;a[t]=!0;const l=n[t],u=i[l.bufferView],f=o[u.buffer],p=f.extras._pipeline.source,m=p.byteOffset+u.byteOffset+l.byteOffset,_=l.componentType,b=l.count,y=FZ(l.type),v=l.count*y,O=Ks.createArrayBufferView(_,p.buffer,m,v);for(let e=0;e<b;e++){const t=e*y;g.unpack(O,t,s);const n=O[t+3];Kr.fromAxisAngle(s,n,c),Kr.pack(c,O,t)}}}}}}function J0(e){const t=e.techniques;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n],i=e.passes;if(Object(r["a"])(i)){const t=Object(o["a"])(e.pass,"defaultPass");if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t],r=n.instanceProgram;e.attributes=Object(o["a"])(e.attributes,r.attributes),e.program=Object(o["a"])(e.program,r.program),e.uniforms=Object(o["a"])(e.uniforms,r.uniforms),e.states=Object(o["a"])(e.states,n.states)}delete e.passes,delete e.pass}}}function Q0(e){Object(r["a"])(e.asset)||(e.asset={});const t=e.asset;if(t.version="1.0","string"===typeof t.profile){const e=t.profile.split(" ");t.profile={api:e[0],version:e[1]}}else t.profile={};if(Object(r["a"])(e.version)&&delete e.version,Y0(e),X0(e),K0(e),$0(e),J0(e),Object(r["a"])(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),Object(r["a"])(e.lights)){const t=Object(o["a"])(e.extensions,{});e.extensions=t;const n=Object(o["a"])(t.KHR_materials_common,{});t.KHR_materials_common=n,n.lights=e.lights,delete e.lights,c0(e,"KHR_materials_common")}}function Z0(e){const t=e.animations;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n],i=e.parameters;if(Object(r["a"])(i)){const t=e.samplers;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];n.input=i[n.input],n.output=i[n.output]}delete e.parameters}}}function e1(e,t){const n=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];t[i]=n.length,n.push(o),Object(r["a"])(o.name)||(o.name=i)}return n}function t1(e){let t;const n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}};let i;const o={},a=e.nodes;for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i=a[s].jointName,Object(r["a"])(i)&&(o[i]=s));for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&Object(r["a"])(n[s])){const t={},i=e[s];e[s]=e1(i,t),n[s]=t}for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=n.nodes[o[i]]);Object(r["a"])(e.scene)&&(e.scene=n.scenes[e.scene]),NZ.bufferView(e,(function(e){Object(r["a"])(e.buffer)&&(e.buffer=n.buffers[e.buffer])})),NZ.accessor(e,(function(e){Object(r["a"])(e.bufferView)&&(e.bufferView=n.bufferViews[e.bufferView])})),NZ.shader(e,(function(e){const t=e.extensions;if(Object(r["a"])(t)){const i=t.KHR_binary_glTF;Object(r["a"])(i)&&(e.bufferView=n.bufferViews[i.bufferView],delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),NZ.program(e,(function(e){Object(r["a"])(e.vertexShader)&&(e.vertexShader=n.shaders[e.vertexShader]),Object(r["a"])(e.fragmentShader)&&(e.fragmentShader=n.shaders[e.fragmentShader])})),NZ.technique(e,(function(e){Object(r["a"])(e.program)&&(e.program=n.programs[e.program]),NZ.techniqueParameter(e,(function(e){Object(r["a"])(e.node)&&(e.node=n.nodes[e.node]);const t=e.value;"string"===typeof t&&(e.value={index:n.textures[t]})}))})),NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){Object(r["a"])(e.indices)&&(e.indices=n.accessors[e.indices]),NZ.meshPrimitiveAttribute(e,(function(t,i){e.attributes[i]=n.accessors[t]})),Object(r["a"])(e.material)&&(e.material=n.materials[e.material])}))})),NZ.node(e,(function(i){let o=i.children;if(Object(r["a"])(o)){const e=o.length;for(t=0;t<e;++t)o[t]=n.nodes[o[t]]}if(Object(r["a"])(i.meshes)){const a=i.meshes,s=a.length;if(s>0)for(i.mesh=n.meshes[a[0]],t=1;t<s;++t){const s={mesh:n.meshes[a[t]]},c=jZ(e.nodes,s);Object(r["a"])(o)||(o=[],i.children=o),o.push(c)}delete i.meshes}if(Object(r["a"])(i.camera)&&(i.camera=n.cameras[i.camera]),Object(r["a"])(i.skin)&&(i.skin=n.skins[i.skin]),Object(r["a"])(i.skeletons)){const t=i.skeletons,o=t.length;if(o>0&&Object(r["a"])(i.skin)){const o=e.skins[i.skin];o.skeleton=n.nodes[t[0]]}delete i.skeletons}Object(r["a"])(i.jointName)&&delete i.jointName})),NZ.skin(e,(function(e){Object(r["a"])(e.inverseBindMatrices)&&(e.inverseBindMatrices=n.accessors[e.inverseBindMatrices]);const i=e.jointNames;if(Object(r["a"])(i)){const n=[],r=i.length;for(t=0;t<r;++t)n[t]=o[i[t]];e.joints=n,delete e.jointNames}})),NZ.scene(e,(function(e){const i=e.nodes;if(Object(r["a"])(i)){const e=i.length;for(t=0;t<e;++t)i[t]=n.nodes[i[t]]}})),NZ.animation(e,(function(e){const t={};e.samplers=e1(e.samplers,t),NZ.animationSampler(e,(function(e){e.input=n.accessors[e.input],e.output=n.accessors[e.output]})),NZ.animationChannel(e,(function(e){e.sampler=t[e.sampler];const i=e.target;Object(r["a"])(i)&&(i.node=n.nodes[i.id],delete i.id)}))})),NZ.material(e,(function(e){Object(r["a"])(e.technique)&&(e.technique=n.techniques[e.technique]),NZ.materialValue(e,(function(t,i){"string"===typeof t&&(e.values[i]={index:n.textures[t]})}));const t=e.extensions;if(Object(r["a"])(t)){const e=t.KHR_materials_common;Object(r["a"])(e)&&Object(r["a"])(e.values)&&NZ.materialValue(e,(function(t,i){"string"===typeof t&&(e.values[i]={index:n.textures[t]})}))}})),NZ.image(e,(function(e){const t=e.extensions;if(Object(r["a"])(t)){const i=t.KHR_binary_glTF;Object(r["a"])(i)&&(e.bufferView=n.bufferViews[i.bufferView],e.mimeType=i.mimeType,delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),NZ.texture(e,(function(e){Object(r["a"])(e.sampler)&&(e.sampler=n.samplers[e.sampler]),Object(r["a"])(e.source)&&(e.source=n.images[e.source])}))}function n1(e){NZ.animation(e,(function(e){NZ.animationSampler(e,(function(e){delete e.name}))}))}function i1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];Array.isArray(n)&&0===n.length&&delete e[t]}NZ.node(e,(function(e){Object(r["a"])(e.children)&&0===e.children.length&&delete e.children}))}function o1(e){const t=e.asset;delete t.profile,delete t.premultipliedAlpha}const r1={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0};function a1(e){const t=e.extensionsUsed;if(e.extensionsRequired=Object(o["a"])(e.extensionsRequired,[]),Object(r["a"])(t)){const n=t.length;for(let i=0;i<n;++i){const n=t[i];Object(r["a"])(r1[n])&&e.extensionsRequired.push(n)}}}function s1(e){NZ.buffer(e,(function(e){delete e.type}))}function c1(e){NZ.texture(e,(function(e){delete e.format,delete e.internalFormat,delete e.target,delete e.type}))}function l1(e){NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){NZ.meshPrimitiveAttribute(e,(function(t,n){"TEXCOORD"===n?e.attributes.TEXCOORD_0=t:"COLOR"===n&&(e.attributes.COLOR_0=t)})),delete e.attributes.TEXCOORD,delete e.attributes.COLOR}))})),NZ.technique(e,(function(e){NZ.techniqueParameter(e,(function(e){const t=e.semantic;Object(r["a"])(t)&&("TEXCOORD"===t?e.semantic="TEXCOORD_0":"COLOR"===t&&(e.semantic="COLOR_0"))}))}))}const u1={POSITION:!0,NORMAL:!0,TANGENT:!0},h1={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function d1(e){const t={};NZ.mesh(e,(function(e){NZ.meshPrimitive(e,(function(e){NZ.meshPrimitiveAttribute(e,(function(e,n){if("_"!==n.charAt(0)){const e=n.search(/_[0-9]+/g);let i,o=n,a="_0";e>=0&&(o=n.substring(0,e),a=n.substring(e));const s=h1[o];Object(r["a"])(s)?(i=s+a,t[n]=i):Object(r["a"])(u1[o])||(i=`_${n}`,t[n]=i)}}));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n],o=e.attributes[n];Object(r["a"])(o)&&(delete e.attributes[n],e.attributes[i]=o)}}))})),NZ.technique(e,(function(e){NZ.techniqueParameter(e,(function(e){const n=t[e.semantic];Object(r["a"])(n)&&(e.semantic=n)}))}))}function f1(e){NZ.camera(e,(function(e){const t=e.perspective;if(Object(r["a"])(t)){const e=t.aspectRatio;Object(r["a"])(e)&&0===e&&delete t.aspectRatio;const n=t.yfov;Object(r["a"])(n)&&0===n&&(t.yfov=1)}}))}function p1(e,t){return Object(r["a"])(t.byteStride)&&0!==t.byteStride?t.byteStride:kZ(e,t)}function m1(e){NZ.buffer(e,(function(e){Object(r["a"])(e.byteLength)||(e.byteLength=e.extras._pipeline.source.length)})),NZ.accessor(e,(function(t){const n=t.bufferView;if(Object(r["a"])(n)){const i=e.bufferViews[n],r=p1(e,t),a=t.byteOffset+t.count*r;i.byteLength=Math.max(Object(o["a"])(i.byteLength,0),a)}}))}function _1(e){let t,n,i;const a=e.bufferViews,s={};NZ.accessorContainingVertexAttributeData(e,(function(t){const n=e.accessors[t];Object(r["a"])(n.bufferView)&&(s[n.bufferView]=!0)}));const c={};NZ.accessor(e,(function(e){Object(r["a"])(e.bufferView)&&(c[e.bufferView]=Object(o["a"])(c[e.bufferView],[]),c[e.bufferView].push(e))}));for(const o in c)if(Object.prototype.hasOwnProperty.call(c,o)){i=a[o];const r=c[o];r.sort((function(e,t){return e.byteOffset-t.byteOffset}));let l=0,u=0;const h=r.length;for(t=0;t<h;++t){let c=r[t];const d=p1(e,c),f=c.byteOffset,p=c.count*d;delete c.byteStride;const m=t<h-1,_=m?p1(e,r[t+1]):void 0;if(d!==_){const e=Object(RL["a"])(i,!0);s[o]&&(e.byteStride=d),e.byteOffset+=l,e.byteLength=f+p-l;const h=jZ(a,e);for(n=u;n<=t;++n)c=r[n],c.bufferView=h,c.byteOffset=c.byteOffset-l;l=m?r[t+1].byteOffset:void 0,u=t+1}}}R0(e,["accessor","bufferView","buffer"])}function g1(e){NZ.accessorWithSemantic(e,"POSITION",(function(t){const n=e.accessors[t];if(!Object(r["a"])(n.min)||!Object(r["a"])(n.max)){const t=d0(e,n);n.min=t.min,n.max=t.max}}))}function b1(e){return(!Object(r["a"])(e.children)||0===e.children.length)&&(!Object(r["a"])(e.meshes)||0===e.meshes.length)&&!Object(r["a"])(e.camera)&&!Object(r["a"])(e.skin)&&!Object(r["a"])(e.skeletons)&&!Object(r["a"])(e.jointName)&&(!Object(r["a"])(e.translation)||g.fromArray(e.translation).equals(g.ZERO))&&(!Object(r["a"])(e.scale)||g.fromArray(e.scale).equals(new g(1,1,1)))&&(!Object(r["a"])(e.rotation)||be.fromArray(e.rotation).equals(new be(0,0,0,1)))&&(!Object(r["a"])(e.matrix)||Me.fromColumnMajorArray(e.matrix).equals(Me.IDENTITY))&&!Object(r["a"])(e.extensions)&&!Object(r["a"])(e.extras)}function y1(e,t){NZ.scene(e,(function(e){const n=e.nodes;if(Object(r["a"])(n)){const e=n.length;for(let i=e;i>=0;--i)if(n[i]===t)return void n.splice(i,1)}})),NZ.node(e,(function(n,i){if(Object(r["a"])(n.children)){const o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),b1(n)&&y1(e,i))}})),delete e.nodes[t]}function v1(e){return NZ.node(e,(function(t,n){b1(t)&&y1(e,n)})),e}function O1(e){NZ.animation(e,(function(t){NZ.animationSampler(t,(function(t){const n=e.accessors[t.input];if(!Object(r["a"])(n.min)||!Object(r["a"])(n.max)){const t=d0(e,n);n.min=t.min,n.max=t.max}}))}))}function A1(e){NZ.accessor(e,(function(t){if(Object(r["a"])(t.min)||Object(r["a"])(t.max)){const n=d0(e,t);Object(r["a"])(t.min)&&(t.min=n.min),Object(r["a"])(t.max)&&(t.max=n.max)}}))}function w1(e){e.asset=Object(o["a"])(e.asset,{}),e.asset.version="2.0",Y0(e),Z0(e),v1(e),t1(e),n1(e),o1(e),a1(e),m1(e),_1(e),g1(e),O1(e),A1(e),s1(e),c1(e),l1(e),d1(e),k0(e),f1(e),y0(e),w0(e),i1(e)}const T1=["u_tex","u_diffuse"],C1=["u_diffuse"];function E1(e){e.pbrMetallicRoughness=Object(r["a"])(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function x1(e){return Object(r["a"])(e.index)}function S1(e){return Array.isArray(e)&&4===e.length}function I1(e){const t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){const i=e[n];t[n]=i<=.04045?.07739938080495357*e[n]:Math.pow(.9478672985781991*(i+.055),2.4)}return t}function D1(e){NZ.material(e,(function(e){NZ.materialValue(e,(function(t,n){-1!==T1.indexOf(n)&&x1(t)?(E1(e),e.pbrMetallicRoughness.baseColorTexture=t):-1!==C1.indexOf(n)&&S1(t)&&(E1(e),e.pbrMetallicRoughness.baseColorFactor=I1(t))}))})),G0(e,"KHR_techniques_webgl"),G0(e,"KHR_blend")}function P1(e){NZ.material(e,(function(t){const n=Object(o["a"])(t.extensions,o["a"].EMPTY_OBJECT).KHR_materials_common;if(Object(r["a"])(n)){const i=n.technique;"CONSTANT"===i&&(c0(e,"KHR_materials_unlit"),t.extensions=Object(r["a"])(t.extensions)?t.extensions:{},t.extensions["KHR_materials_unlit"]={});const o=Object(r["a"])(n.values)?n.values:{},a=o.ambient,s=o.diffuse,c=o.emission,l=o.transparency,u=n.doubleSided,h=n.transparent;E1(t),Object(r["a"])(a)&&(S1(a)?t.emissiveFactor=a.slice(0,3):x1(a)&&(t.emissiveTexture=a)),Object(r["a"])(s)&&(S1(s)?t.pbrMetallicRoughness.baseColorFactor=I1(s):x1(s)&&(t.pbrMetallicRoughness.baseColorTexture=s)),Object(r["a"])(u)&&(t.doubleSided=u),Object(r["a"])(c)&&(S1(c)?t.emissiveFactor=c.slice(0,3):x1(c)&&(t.emissiveTexture=c)),Object(r["a"])(l)&&(Object(r["a"])(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=l:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,l]),Object(r["a"])(h)&&(t.alphaMode=h?"BLEND":"OPAQUE")}})),G0(e,"KHR_materials_common")}var j1=q0;function R1(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltfResource,r=e.baseResource,a=e.typedArray,s=e.gltfJson,c=e.cacheKey;i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltfResource",n),i["a"].typeOf.object("options.baseResource",r),this._resourceCache=t,this._gltfResource=n,this._baseResource=r,this._typedArray=a,this._gltfJson=s,this._cacheKey=c,this._gltf=void 0,this._bufferLoaders=[],this._state=JQ.UNLOADED,this._promise=void 0}function L1(e){return e._fetchGltf().then((function(t){if(e.isDestroyed())return;const n=new Uint8Array(t);return k1(e,n)}))}function M1(e,t){e.unload(),e._state=JQ.FAILED;const n=`Failed to load glTF: ${e._gltfResource.url}`;return Promise.reject(e.getError(n,t))}function N1(e,t){if(Object(r["a"])(t.asset)&&"2.0"===t.asset.version&&!LZ(t,"KHR_techniques_webgl")&&!LZ(t,"KHR_materials_common"))return Promise.resolve();const n=[];return NZ.buffer(t,(function(t){if(!Object(r["a"])(t.extras._pipeline.source)&&Object(r["a"])(t.uri)){const i=e._baseResource.getDerivedResource({url:t.uri}),o=e._resourceCache,r=o.loadExternalBuffer({resource:i});e._bufferLoaders.push(r),n.push(r.promise.then((function(e){t.extras._pipeline.source=e.typedArray})))}})),Promise.all(n).then((function(){j1(t)}))}function B1(e){const t=[];return NZ.buffer(e,(function(e){const n=e.uri;!Object(r["a"])(e.extras._pipeline.source)&&Object(r["a"])(n)&&Object(nM["a"])(n)&&(delete e.uri,t.push(Et["a"].fetchArrayBuffer(n).then((function(t){e.extras._pipeline.source=new Uint8Array(t)}))))})),Promise.all(t)}function F1(e,t){const n=[];return NZ.buffer(t,(function(t,i){const o=t.extras._pipeline.source;if(Object(r["a"])(o)&&!Object(r["a"])(t.uri)){const t=e._resourceCache,r=t.loadEmbeddedBuffer({parentResource:e._gltfResource,bufferId:i,typedArray:o});e._bufferLoaders.push(r),n.push(r.promise)}})),Promise.all(n)}function z1(e,t){return YZ(t),B1(t).then((function(){return N1(e,t)})).then((function(){return GZ(t),F1(e,t)})).then((function(){return a0(t),t}))}function k1(e,t){let n;return n="glTF"===eM(t)?i0(t):Fh(t),z1(e,n)}Object(r["a"])(Object.create)&&(R1.prototype=Object.create(KQ.prototype),R1.prototype.constructor=R1),Object.defineProperties(R1.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}}),R1.prototype.load=function(){let e;this._state=JQ.LOADING,e=Object(r["a"])(this._gltfJson)?z1(this,this._gltfJson):Object(r["a"])(this._typedArray)?k1(this,this._typedArray):L1(this);const t=this;return this._promise=e.then((function(e){if(!t.isDestroyed())return t._gltf=e,t._state=JQ.READY,t})).catch((function(e){if(!t.isDestroyed())return M1(t,e)})),this._promise},R1.prototype.unload=function(){const e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0},R1.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};var U1=R1;const V1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};var H1=Object.freeze(V1);const G1={};function W1(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0}function q1(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0}function Y1(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0}function X1(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0}function K1(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0}function $1(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0}function J1(){this.attributes=[]}function Q1(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0}function Z1(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1}function e2(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]}function t2(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0}function n2(){this.nodes=[]}const i2={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};function o2(){this.input=[],this.interpolation=void 0,this.output=[]}function r2(){this.node=void 0,this.path=void 0}function a2(){this.sampler=void 0,this.target=void 0}function s2(){this.name=void 0,this.samplers=[],this.channels=[]}function c2(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0}function l2(){this.name=void 0,this.stages=[]}function u2(){this.credits=[]}function h2(){this.asset=new u2,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=Me.clone(Me.IDENTITY)}function d2(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=ce.clone(ce.IDENTITY),this.channels=void 0}function f2(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=be.clone(f2.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=f2.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=f2.DEFAULT_ROUGHNESS_FACTOR}function p2(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=be.clone(p2.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=g.clone(p2.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=p2.DEFAULT_GLOSSINESS_FACTOR}function m2(){this.metallicRoughness=new f2,this.specularGlossiness=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=g.clone(m2.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=H1.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}f2.DEFAULT_BASE_COLOR_FACTOR=be.ONE,f2.DEFAULT_METALLIC_FACTOR=1,f2.DEFAULT_ROUGHNESS_FACTOR=1,p2.DEFAULT_DIFFUSE_FACTOR=be.ONE,p2.DEFAULT_SPECULAR_FACTOR=g.ONE,p2.DEFAULT_GLOSSINESS_FACTOR=1,m2.DEFAULT_EMISSIVE_FACTOR=g.ZERO,G1.Quantization=W1,G1.Attribute=q1,G1.Indices=Y1,G1.FeatureIdAttribute=X1,G1.FeatureIdTexture=$1,G1.FeatureIdImplicitRange=K1,G1.MorphTarget=J1,G1.Primitive=Q1,G1.Instances=Z1,G1.Skin=e2,G1.Node=t2,G1.Scene=n2,G1.AnimatedPropertyType=Object.freeze(i2),G1.AnimationSampler=o2,G1.AnimationTarget=r2,G1.AnimationChannel=a2,G1.Animation=s2,G1.ArticulationStage=c2,G1.Articulation=l2,G1.Asset=u2,G1.Components=h2,G1.TextureReader=d2,G1.MetallicRoughness=f2,G1.SpecularGlossiness=p2,G1.Material=m2;var _2=G1;const g2={getImageIdFromTexture:function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.textureId,a=e.supportedImageFormats;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.textureId",n),i["a"].typeOf.object("options.supportedImageFormats",a);const s=t.textures[n],c=s.extensions;if(Object(r["a"])(c)){if(a.webp&&Object(r["a"])(c.EXT_texture_webp))return c.EXT_texture_webp.source;if(a.basis&&Object(r["a"])(c.KHR_texture_basisu))return c.KHR_texture_basisu.source}return s.source},createSampler:function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.textureInfo,a=Object(o["a"])(e.compressedTextureNoMipmap,!1);i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.textureInfo",n);let s=iB.REPEAT,c=iB.REPEAT,l=tB.LINEAR,u=ZN.LINEAR;const h=n.index,d=t.textures[h],f=d.sampler;if(Object(r["a"])(f)){const e=t.samplers[f];s=Object(o["a"])(e.wrapS,s),c=Object(o["a"])(e.wrapT,c),l=Object(o["a"])(e.minFilter,l),u=Object(o["a"])(e.magFilter,u)}let p=!1;const m=n.extensions;return Object(r["a"])(m)&&Object(r["a"])(m.KHR_texture_transform)&&(p=!0),(a||p)&&l!==tB.LINEAR&&l!==tB.NEAREST&&(l=l===tB.NEAREST_MIPMAP_NEAREST||l===tB.NEAREST_MIPMAP_LINEAR?tB.NEAREST:tB.LINEAR),new rB({wrapS:s,wrapT:c,minificationFilter:l,magnificationFilter:u})}},b2=new Gt(1,1);g2.createModelTextureReader=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.textureInfo,n=e.channels,a=e.texture;i["a"].typeOf.object("options.textureInfo",t);let s,c=Object(o["a"])(t.texCoord,0);const l=Object(o["a"])(t.extensions,o["a"].EMPTY_OBJECT).KHR_texture_transform;if(Object(r["a"])(l)){c=Object(o["a"])(l.texCoord,c);const e=Object(r["a"])(l.offset)?Gt.unpack(l.offset):Gt.ZERO;let t=Object(o["a"])(l.rotation,0);const n=Object(r["a"])(l.scale)?Gt.unpack(l.scale):b2;t=-t,s=new ce(Math.cos(t)*n.x,-Math.sin(t)*n.y,e.x,Math.sin(t)*n.x,Math.cos(t)*n.y,e.y,0,0,1)}const u=new _2.TextureReader;return u.index=t.index,u.texture=a,u.texCoord=c,u.transform=s,u.channels=n,u};var y2=g2;function v2(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,r=e.textureInfo,a=e.gltfResource,s=e.baseResource,c=e.supportedImageFormats,l=e.cacheKey,u=Object(o["a"])(e.asynchronous,!0);i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.object("options.textureInfo",r),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s),i["a"].typeOf.object("options.supportedImageFormats",c);const h=r.index,d=y2.getImageIdFromTexture({gltf:n,textureId:h,supportedImageFormats:c});this._resourceCache=t,this._gltf=n,this._textureInfo=r,this._imageId=d,this._gltfResource=a,this._baseResource=s,this._cacheKey=l,this._asynchronous=u,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=JQ.UNLOADED,this._promise=void 0,this._process=function(e,t){}}Object(r["a"])(Object.create)&&(v2.prototype=Object.create(KQ.prototype),v2.prototype.constructor=v2),Object.defineProperties(v2.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});const O2=new A2;function A2(){this.gltf=void 0,this.textureInfo=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}function w2(e,t,n,i,o){const a=n.internalFormat;let c=!1;fx.isCompressedFormat(a)&&!Object(r["a"])(i)&&(c=!0);const l=y2.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:c}),u=l.minificationFilter,h=l.wrapS,d=l.wrapT,f=u===tB.NEAREST_MIPMAP_NEAREST||u===tB.NEAREST_MIPMAP_LINEAR||u===tB.LINEAR_MIPMAP_NEAREST||u===tB.LINEAR_MIPMAP_LINEAR,p=!Object(r["a"])(a)&&f,m=p||h===iB.REPEAT||h===iB.MIRRORED_REPEAT||d===iB.REPEAT||d===iB.MIRRORED_REPEAT,_=!s["a"].isPowerOfTwo(n.width)||!s["a"].isPowerOfTwo(n.height),g=m&&_;let b;return Object(r["a"])(a)?(!o.webgl2&&fx.isCompressedFormat(a)&&_&&m&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly."),b=lB.create({context:o,source:{arrayBufferView:n.bufferView,mipLevels:i},width:n.width,height:n.height,pixelFormat:n.internalFormat,sampler:l})):(g&&(n=TM(n)),b=lB.create({context:o,source:n,sampler:l,flipY:!1,skipColorSpaceConversion:!0})),p&&b.generateMipmap(),b}v2.prototype.load=function(){const e=this._resourceCache,t=e.loadImage({gltf:this._gltf,imageId:this._imageId,gltfResource:this._gltfResource,baseResource:this._baseResource});this._imageLoader=t,this._state=JQ.LOADING;const n=this,i=new Promise((function(e){n._process=function(t,n){if(Object(r["a"])(t._texture))return;if(!Object(r["a"])(t._image))return;let i;if(t._asynchronous){const e=O2;e.set(t._gltf,t._textureInfo,t._image,t._mipLevels,n.context);const o=n.jobScheduler;if(!o.execute(e,OZ.TEXTURE))return;i=e.texture}else i=w2(t._gltf,t._textureInfo,t._image,t._mipLevels,n.context);t.unload(),t._texture=i,t._state=JQ.READY,e(t)}}));return this._promise=t.promise.then((function(){if(!n.isDestroyed())return n._image=t.image,n._mipLevels=t.mipLevels,n._state=JQ.PROCESSING,i})).catch((function(e){if(n.isDestroyed())return;n.unload(),n._state=JQ.FAILED;const t="Failed to load texture";return Promise.reject(n.getError(t,e))})),this._promise},A2.prototype.set=function(e,t,n,i,o){this.gltf=e,this.textureInfo=t,this.image=n,this.mipLevels=i,this.context=o},A2.prototype.execute=function(){this.texture=w2(this.gltf,this.textureInfo,this.image,this.mipLevels,this.context)},v2.prototype.process=function(e){return i["a"].typeOf.object("frameState",e),this._process(this,e)},v2.prototype.unload=function(){Object(r["a"])(this._texture)&&this._texture.destroy(),Object(r["a"])(this._imageLoader)&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};var T2=v2;function C2(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceCache,n=e.gltf,s=e.gltfResource,c=e.baseResource,l=e.bufferViewId,u=e.draco,h=e.attributeSemantic,d=e.accessorId,f=e.cacheKey,p=Object(o["a"])(e.asynchronous,!0),m=Object(o["a"])(e.dequantize,!1),_=Object(o["a"])(e.loadBuffer,!1),g=Object(o["a"])(e.loadTypedArray,!1);if(i["a"].typeOf.func("options.resourceCache",t),i["a"].typeOf.object("options.gltf",n),i["a"].typeOf.object("options.gltfResource",s),i["a"].typeOf.object("options.baseResource",c),!_&&!g)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");const b=Object(r["a"])(l),y=Object(r["a"])(u),v=Object(r["a"])(h),O=Object(r["a"])(d);if(b===y)throw new a["a"]("One of options.bufferViewId and options.draco must be defined.");if(y&&!v)throw new a["a"]("When options.draco is defined options.attributeSemantic must also be defined.");if(y&&!O)throw new a["a"]("When options.draco is defined options.accessorId must also be defined.");y&&(i["a"].typeOf.object("options.draco",u),i["a"].typeOf.string("options.attributeSemantic",h),i["a"].typeOf.number("options.accessorId",d)),this._resourceCache=t,this._gltfResource=s,this._baseResource=c,this._gltf=n,this._bufferViewId=l,this._draco=u,this._attributeSemantic=h,this._accessorId=d,this._cacheKey=f,this._asynchronous=p,this._dequantize=m,this._loadBuffer=_,this._loadTypedArray=g,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=JQ.UNLOADED,this._promise=void 0,this._process=function(e,t){}}function E2(e,t,n,i){const o=e.quantizationBits,r=(1<<o)-1,a=1/r,s=new _2.Quantization;if(s.componentDatatype=t,s.octEncoded=e.octEncoded,s.octEncodedZXY=!0,s.type=i,s.octEncoded)s.type=rc.VEC2,s.normalizationRange=r;else{const t=rc.getMathType(i);if(t===Number){const t=e.range;s.quantizedVolumeOffset=e.minValues[0],s.quantizedVolumeDimensions=t,s.normalizationRange=r,s.quantizedVolumeStepSize=t*a}else{s.quantizedVolumeOffset=t.unpack(e.minValues),s.normalizationRange=t.unpack(new Array(n).fill(r));const i=new Array(n).fill(e.range);s.quantizedVolumeDimensions=t.unpack(i);const o=i.map((function(e){return e*a}));s.quantizedVolumeStepSize=t.unpack(o)}}return s}function x2(e){const t=e._resourceCache,n=t.loadDraco({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,e._state=JQ.LOADING,n.promise.then((function(){if(e.isDestroyed())return;const t=n.decodedData.vertexAttributes,i=e._attributeSemantic,o=t[i],a=e._accessorId,s=e._gltf.accessors[a],c=s.type,l=o.array,u=o.data.quantization;return Object(r["a"])(u)&&(e._quantization=E2(u,o.data.componentDatatype,o.data.componentsPerAttribute,c)),e._typedArray=new Uint8Array(l.buffer,l.byteOffset,l.byteLength),e._state=JQ.PROCESSING,e}))}function S2(e){const t=e._resourceCache,n=t.loadBufferView({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._state=JQ.LOADING,e._bufferViewLoader=n,n.promise.then((function(){if(!e.isDestroyed())return e._typedArray=n.typedArray,e._state=JQ.PROCESSING,e}))}function I2(e,t){e.unload(),e._state=JQ.FAILED;const n="Failed to load vertex buffer";return t=e.getError(n,t),Promise.reject(t)}function D2(){this.typedArray=void 0,this.dequantize=void 0,this.componentType=void 0,this.type=void 0,this.count=void 0,this.context=void 0,this.buffer=void 0}function P2(e,t,n,i,o,r){t&&n!==Ks.FLOAT&&(e=pc.dequantize(e,n,i,o));const a=NV.createVertexBuffer({typedArray:e,context:r,usage:LV.STATIC_DRAW});return a.vertexArrayDestroyable=!1,a}Object(r["a"])(Object.create)&&(C2.prototype=Object.create(KQ.prototype),C2.prototype.constructor=C2),Object.defineProperties(C2.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}}),C2.prototype.load=function(){let e;e=Object(r["a"])(this._draco)?x2(this):S2(this);const t=this,n=new D2,i=new Promise((function(e){t._process=function(t,i){if(t._state===JQ.READY)return;const o=t._typedArray,a=t._dequantize;if(Object(r["a"])(t._dracoLoader)&&t._dracoLoader.process(i),Object(r["a"])(t._bufferViewLoader)&&t._bufferViewLoader.process(i),!Object(r["a"])(o))return;const s=t._gltf.accessors[t._accessorId];let c;if(t._loadBuffer&&t._asynchronous){const e=n;e.set(o,a,s.componentType,s.type,s.count,i.context);const t=i.jobScheduler;if(!t.execute(e,OZ.BUFFER))return;c=e.buffer}else t._loadBuffer&&(c=P2(o,a,s.componentType,s.type,s.count,i.context));t.unload(),t._buffer=c,t._typedArray=t._loadTypedArray?o:void 0,t._state=JQ.READY,e(t)}}));return this._promise=e.then((function(){if(!t.isDestroyed())return i})).catch((function(e){if(!t.isDestroyed())return I2(t,e)})),this._promise},D2.prototype.set=function(e,t,n,i,o,r){this.typedArray=e,this.dequantize=t,this.componentType=n,this.type=i,this.count=o,this.context=r},D2.prototype.execute=function(){this.buffer=P2(this.typedArray,this.dequantize,this.componentType,this.type,this.count,this.context)},C2.prototype.process=function(e){return i["a"].typeOf.object("frameState",e),this._process(this,e)},C2.prototype.unload=function(){Object(r["a"])(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;Object(r["a"])(this._bufferViewLoader)&&e.unload(this._bufferViewLoader),Object(r["a"])(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};var j2=C2;function R2(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.id,n=e.class;i["a"].typeOf.string("options.id",t),i["a"].typeOf.object("options.class",n);const a={},s={};for(const i in n.properties)if(n.properties.hasOwnProperty(i)){const t=new AQ({id:i,property:n.properties[i],enums:e.enums});a[i]=t,Object(r["a"])(t.semantic)&&(s[t.semantic]=t)}this._properties=a,this._propertiesBySemantic=s,this._id=t,this._name=n.name,this._description=n.description,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(R2.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),R2.BATCH_TABLE_CLASS_NAME="_batchTable";var L2=R2;function M2(e){i["a"].typeOf.object("value",e),this._value=e.value,this._name=e.name,this._description=e.description,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(M2.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var N2=M2;function B2(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.id,n=e.enum;i["a"].typeOf.string("options.id",t),i["a"].typeOf.object("options.enum",n);const r={},a={},s=n.values.map((function(e){return r[e.value]=e.name,a[e.name]=e.value,new N2(e)})),c=Object(o["a"])(nQ[n.valueType],nQ.UINT16);this._values=s,this._namesByValue=r,this._valuesByName=a,this._valueType=c,this._id=t,this._name=n.name,this._description=n.description,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(B2.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var F2=B2;function z2(e){i["a"].typeOf.object("schema",e);const t={};if(Object(r["a"])(e.enums))for(const i in e.enums)e.enums.hasOwnProperty(i)&&(t[i]=new F2({id:i,enum:e.enums[i]}));const n={};if(Object(r["a"])(e.classes))for(const i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=new L2({id:i,class:e.classes[i],enums:t}));this._classes=n,this._enums=t,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(z2.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var k2=z2;function U2(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.schema,n=e.resource,i=e.cacheKey;if(Object(r["a"])(t)===Object(r["a"])(n))throw new a["a"]("One of options.schema and options.resource must be defined.");this._schema=Object(r["a"])(t)?new k2(t):void 0,this._resource=n,this._cacheKey=i,this._state=JQ.UNLOADED,this._promise=void 0}function V2(e){const t=e._resource;return e._state=JQ.LOADING,t.fetchJson().then((function(t){if(!e.isDestroyed())return e._schema=new k2(t),e._state=JQ.READY,e})).catch((function(n){if(e.isDestroyed())return;e._state=JQ.FAILED;const i=`Failed to load schema: ${t.url}`;return Promise.reject(e.getError(i,n))}))}Object(r["a"])(Object.create)&&(U2.prototype=Object.create(KQ.prototype),U2.prototype.constructor=U2),Object.defineProperties(U2.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}}),U2.prototype.load=function(){return Object(r["a"])(this._schema)?this._promise=Promise.resolve(this):this._promise=V2(this),this._promise},U2.prototype.unload=function(){this._schema=void 0};var H2=U2;const G2={};function W2(e){return Object(Ct["a"])(e.url)}function q2(e){let t=e.byteOffset,n=e.byteLength;if(HJ(e,"EXT_meshopt_compression")){const i=e.extensions.EXT_meshopt_compression;t=Object(o["a"])(i.byteOffset,0),n=i.byteLength}return`${t}-${t+n}`}function Y2(e,t){const n=t.byteOffset+e.byteOffset,i=e.componentType,o=e.type,r=e.count;return`${n}-${i}-${o}-${r}`}function X2(e){return W2(e)}function K2(e,t){const n=W2(e);return`${n}-buffer-id-${t}`}function $2(e,t,n,i){if(Object(r["a"])(e.uri)){const t=i.getDerivedResource({url:e.uri});return X2(t)}return K2(n,t)}function J2(e,t,n,i){const o=t.bufferView,r=e.bufferViews[o],a=r.buffer,s=e.buffers[a],c=$2(s,a,n,i),l=q2(r);return`${c}-range-${l}`}function Q2(e,t,n,i){const o=e.images[t],a=o.bufferView,s=o.uri;if(Object(r["a"])(s)){const e=i.getDerivedResource({url:s});return W2(e)}const c=e.bufferViews[a],l=c.buffer,u=e.buffers[l],h=$2(u,l,n,i),d=q2(c);return`${h}-range-${d}`}function Z2(e,t){const n=y2.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}G2.getSchemaCacheKey=function(e){const t=e.schema,n=e.resource;if(Object(r["a"])(t)===Object(r["a"])(n))throw new a["a"]("One of options.schema and options.resource must be defined.");return Object(r["a"])(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${W2(n)}`},G2.getExternalBufferCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resource;return i["a"].typeOf.object("options.resource",t),`external-buffer:${X2(t)}`},G2.getEmbeddedBufferCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.parentResource,n=e.bufferId;return i["a"].typeOf.object("options.parentResource",t),i["a"].typeOf.number("options.bufferId",n),`embedded-buffer:${K2(t,n)}`},G2.getGltfCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltfResource;return i["a"].typeOf.object("options.gltfResource",t),`gltf:${W2(t)}`},G2.getBufferViewCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.bufferViewId,r=e.gltfResource,a=e.baseResource;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.bufferViewId",n),i["a"].typeOf.object("options.gltfResource",r),i["a"].typeOf.object("options.baseResource",a);const s=t.bufferViews[n];let c=s.buffer;const l=t.buffers[c];if(HJ(s,"EXT_meshopt_compression")){const e=s.extensions.EXT_meshopt_compression;c=e.buffer}const u=$2(l,c,r,a),h=q2(s);return`buffer-view:${u}-range-${h}`},G2.getDracoCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.draco,r=e.gltfResource,a=e.baseResource;return i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.draco",n),i["a"].typeOf.object("options.gltfResource",r),i["a"].typeOf.object("options.baseResource",a),`draco:${J2(t,n,r,a)}`},G2.getVertexBufferCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.gltfResource,s=e.baseResource,c=e.bufferViewId,l=e.draco,u=e.attributeSemantic,h=Object(o["a"])(e.dequantize,!1),d=Object(o["a"])(e.loadBuffer,!1),f=Object(o["a"])(e.loadTypedArray,!1);i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.gltfResource",n),i["a"].typeOf.object("options.baseResource",s);const p=Object(r["a"])(c),m=Object(r["a"])(l),_=Object(r["a"])(u);if(p===m)throw new a["a"]("One of options.bufferViewId and options.draco must be defined.");if(m&&!_)throw new a["a"]("When options.draco is defined options.attributeSemantic must also be defined.");if(m&&(i["a"].typeOf.object("options.draco",l),i["a"].typeOf.string("options.attributeSemantic",u)),!d&&!f)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");let g="";if(h&&(g+="-dequantize"),d&&(g+="-buffer"),f&&(g+="-typed-array"),Object(r["a"])(l)){const e=J2(t,l,n,s);return`vertex-buffer:${e}-draco-${u}${g}`}const b=t.bufferViews[c],y=b.buffer,v=t.buffers[y],O=$2(v,y,n,s),A=q2(b);return`vertex-buffer:${O}-range-${A}${g}`},G2.getIndexBufferCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.accessorId,s=e.gltfResource,c=e.baseResource,l=e.draco,u=Object(o["a"])(e.loadBuffer,!1),h=Object(o["a"])(e.loadTypedArray,!1);if(i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.accessorId",n),i["a"].typeOf.object("options.gltfResource",s),i["a"].typeOf.object("options.baseResource",c),!u&&!h)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");let d="";if(u&&(d+="-buffer"),h&&(d+="-typed-array"),Object(r["a"])(l)){const e=J2(t,l,s,c);return`index-buffer:${e}-draco${d}`}const f=t.accessors[n],p=f.bufferView,m=t.bufferViews[p],_=m.buffer,g=t.buffers[_],b=$2(g,_,s,c),y=Y2(f,m);return`index-buffer:${b}-accessor-${y}${d}`},G2.getImageCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.imageId,r=e.gltfResource,a=e.baseResource;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.imageId",n),i["a"].typeOf.object("options.gltfResource",r),i["a"].typeOf.object("options.baseResource",a);const s=Q2(t,n,r,a);return`image:${s}`},G2.getTextureCacheKey=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.textureInfo,r=e.gltfResource,a=e.baseResource,s=e.supportedImageFormats;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.textureInfo",n),i["a"].typeOf.object("options.gltfResource",r),i["a"].typeOf.object("options.baseResource",a),i["a"].typeOf.object("options.supportedImageFormats",s);const c=n.index,l=y2.getImageIdFromTexture({gltf:t,textureId:c,supportedImageFormats:s}),u=Q2(t,l,r,a),h=Z2(t,n);return`texture:${u}-sampler-${h}`};var e3=G2;function t3(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}t3.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}},t3.prototype.addGeometryLoader=function(e){i["a"].typeOf.object("loader",e);const t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;const n=this;return e.promise.then((function(e){if(!n._geometrySizes.hasOwnProperty(t))return;const i=e.buffer,o=e.typedArray;let a=0;Object(r["a"])(i)&&(a+=i.sizeInBytes),Object(r["a"])(o)&&(a+=o.byteLength),n.geometryByteLength+=a,n._geometrySizes[t]=a})).catch((function(){delete n._geometrySizes[t]}))},t3.prototype.addTextureLoader=function(e){i["a"].typeOf.object("loader",e);const t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;const n=this;return e.promise.then((function(e){if(!n._textureSizes.hasOwnProperty(t))return;const i=e.texture.sizeInBytes;n.texturesByteLength+=e.texture.sizeInBytes,n._textureSizes[t]=i})).catch((function(){delete n._textureSizes[t]}))},t3.prototype.removeLoader=function(e){i["a"].typeOf.object("loader",e);const t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],Object(r["a"])(n)&&(this.geometryByteLength-=n);const o=this._textureSizes[t];delete this._textureSizes[t],Object(r["a"])(o)&&(this.texturesByteLength-=o)};var n3=t3;function i3(){}function o3(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}i3.cacheEntries={},i3.statistics=new n3,i3.get=function(e){i["a"].typeOf.string("cacheKey",e);const t=i3.cacheEntries[e];if(Object(r["a"])(t))return++t.referenceCount,t.resourceLoader},i3.load=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resourceLoader;i["a"].typeOf.object("options.resourceLoader",t);const n=t.cacheKey;if(i["a"].typeOf.string("options.resourceLoader.cacheKey",n),Object(r["a"])(i3.cacheEntries[n]))throw new a["a"](`Resource with this cacheKey is already in the cache: ${n}`);i3.cacheEntries[n]=new o3(t),t.load()},i3.unload=function(e){i["a"].typeOf.object("resourceLoader",e);const t=e.cacheKey,n=i3.cacheEntries[t];if(!Object(r["a"])(n))throw new a["a"](`Resource is not in the cache: ${t}`);--n.referenceCount,0===n.referenceCount&&(i3.statistics.removeLoader(e),e.destroy(),delete i3.cacheEntries[t])},i3.loadSchema=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.schema,n=e.resource;if(Object(r["a"])(t)===Object(r["a"])(n))throw new a["a"]("One of options.schema and options.resource must be defined.");const i=e3.getSchemaCacheKey({schema:t,resource:n});let s=i3.get(i);return Object(r["a"])(s)||(s=new H2({schema:t,resource:n,cacheKey:i}),i3.load({resourceLoader:s})),s},i3.loadEmbeddedBuffer=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.parentResource,n=e.bufferId,a=e.typedArray;i["a"].typeOf.object("options.parentResource",t),i["a"].typeOf.number("options.bufferId",n);const s=e3.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n});let c=i3.get(s);return Object(r["a"])(c)||(i["a"].typeOf.object("options.typedArray",a),c=new eZ({typedArray:a,cacheKey:s}),i3.load({resourceLoader:c})),c},i3.loadExternalBuffer=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.resource;i["a"].typeOf.object("options.resource",t);const n=e3.getExternalBufferCacheKey({resource:t});let a=i3.get(n);return Object(r["a"])(a)||(a=new eZ({resource:t,cacheKey:n}),i3.load({resourceLoader:a})),a},i3.loadGltfJson=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltfResource,n=e.baseResource,a=e.typedArray,s=e.gltfJson;i["a"].typeOf.object("options.gltfResource",t),i["a"].typeOf.object("options.baseResource",n);const c=e3.getGltfCacheKey({gltfResource:t});let l=i3.get(c);return Object(r["a"])(l)||(l=new U1({resourceCache:i3,gltfResource:t,baseResource:n,typedArray:a,gltfJson:s,cacheKey:c}),i3.load({resourceLoader:l})),l},i3.loadBufferView=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.bufferViewId,a=e.gltfResource,s=e.baseResource;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.bufferViewId",n),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const c=e3.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:a,baseResource:s});let l=i3.get(c);return Object(r["a"])(l)||(l=new oZ({resourceCache:i3,gltf:t,bufferViewId:n,gltfResource:a,baseResource:s,cacheKey:c}),i3.load({resourceLoader:l})),l},i3.loadDraco=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.draco,a=e.gltfResource,s=e.baseResource;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.draco",n),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const c=e3.getDracoCacheKey({gltf:t,draco:n,gltfResource:a,baseResource:s});let l=i3.get(c);return Object(r["a"])(l)||(l=new lZ({resourceCache:i3,gltf:t,draco:n,gltfResource:a,baseResource:s,cacheKey:c}),i3.load({resourceLoader:l})),l},i3.loadVertexBuffer=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.gltfResource,s=e.baseResource,c=e.bufferViewId,l=e.draco,u=e.attributeSemantic,h=e.accessorId,d=Object(o["a"])(e.asynchronous,!0),f=Object(o["a"])(e.dequantize,!1),p=Object(o["a"])(e.loadBuffer,!1),m=Object(o["a"])(e.loadTypedArray,!1);if(i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.gltfResource",n),i["a"].typeOf.object("options.baseResource",s),!p&&!m)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");const _=Object(r["a"])(c),g=Object(r["a"])(l),b=Object(r["a"])(u),y=Object(r["a"])(h);if(_===g)throw new a["a"]("One of options.bufferViewId and options.draco must be defined.");if(g&&!b)throw new a["a"]("When options.draco is defined options.attributeSemantic must also be defined.");if(g&&!y)throw new a["a"]("When options.draco is defined options.haAccessorId must also be defined.");g&&(i["a"].typeOf.object("options.draco",l),i["a"].typeOf.string("options.attributeSemantic",u),i["a"].typeOf.number("options.accessorId",h));const v=e3.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:s,bufferViewId:c,draco:l,attributeSemantic:u,dequantize:f,loadBuffer:p,loadTypedArray:m});let O=i3.get(v);if(Object(r["a"])(O))return O;O=new j2({resourceCache:i3,gltf:t,gltfResource:n,baseResource:s,bufferViewId:c,draco:l,attributeSemantic:u,accessorId:h,cacheKey:v,asynchronous:d,dequantize:f,loadBuffer:p,loadTypedArray:m}),i3.load({resourceLoader:O});const A=i3.statistics.addGeometryLoader(O);return i3.cacheEntries[v]._statisticsPromise=A,O},i3.loadIndexBuffer=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.accessorId,s=e.gltfResource,c=e.baseResource,l=e.draco,u=Object(o["a"])(e.asynchronous,!0),h=Object(o["a"])(e.loadBuffer,!1),d=Object(o["a"])(e.loadTypedArray,!1);if(i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.accessorId",n),i["a"].typeOf.object("options.gltfResource",s),i["a"].typeOf.object("options.baseResource",c),!h&&!d)throw new a["a"]("At least one of loadBuffer and loadTypedArray must be true.");const f=e3.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:s,baseResource:c,draco:l,loadBuffer:h,loadTypedArray:d});let p=i3.get(f);if(Object(r["a"])(p))return p;p=new DZ({resourceCache:i3,gltf:t,accessorId:n,gltfResource:s,baseResource:c,draco:l,cacheKey:f,asynchronous:u,loadBuffer:h,loadTypedArray:d}),i3.load({resourceLoader:p});const m=i3.statistics.addGeometryLoader(p);return i3.cacheEntries[f]._statisticsPromise=m,p},i3.loadImage=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.imageId,a=e.gltfResource,s=e.baseResource;i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.number("options.imageId",n),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const c=e3.getImageCacheKey({gltf:t,imageId:n,gltfResource:a,baseResource:s});let l=i3.get(c);return Object(r["a"])(l)||(l=new yZ({resourceCache:i3,gltf:t,imageId:n,gltfResource:a,baseResource:s,cacheKey:c}),i3.load({resourceLoader:l})),l},i3.loadTexture=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.textureInfo,a=e.gltfResource,s=e.baseResource,c=e.supportedImageFormats,l=Object(o["a"])(e.asynchronous,!0);i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.textureInfo",n),i["a"].typeOf.object("options.gltfResource",a),i["a"].typeOf.object("options.baseResource",s);const u=e3.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:a,baseResource:s,supportedImageFormats:c});let h=i3.get(u);if(Object(r["a"])(h))return h;h=new T2({resourceCache:i3,gltf:t,textureInfo:n,gltfResource:a,baseResource:s,supportedImageFormats:c,cacheKey:u,asynchronous:l}),i3.load({resourceLoader:h});const d=i3.statistics.addTextureLoader(h);return i3.cacheEntries[u]._statisticsPromise=d,h},i3.clearForSpecs=function(){const e=[j2,DZ,lZ,T2,yZ,oZ,eZ,H2,U1];let t;const n=i3.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort((function(t,n){const i=e.indexOf(t.resourceLoader.constructor),o=e.indexOf(n.resourceLoader.constructor);return i-o}));const o=i.length;for(let a=0;a<o;++a){const e=i[a];t=e.resourceLoader.cacheKey,Object(r["a"])(n[t])&&(e.resourceLoader.destroy(),delete n[t])}i3.statistics.clear()};var r3=i3;function a3(e,t,n,o,s){if(i["a"].typeOf.object("resource",e),Object(r["a"])(t)===Object(r["a"])(n))throw new a["a"]("One of json and subtreeView must be defined.");i["a"].typeOf.object("implicitTileset",o),i["a"].typeOf.object("implicitCoordinates",s),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=s,this._subtreeLevels=o.subtreeLevels,this._subdivisionScheme=o.subdivisionScheme,this._branchingFactor=o.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._readyPromise=s3(this,t,n,o)}function s3(e,t,n,i){let a;a=Object(r["a"])(t)?{json:t,binary:void 0}:c3(n);const s=a.json;let c;if(e._subtreeJson=s,HJ(s,"3DTILES_metadata"))c=s.extensions["3DTILES_metadata"];else if(Object(r["a"])(s.tileMetadata)){const e=s.tileMetadata;c=s.propertyTables[e]}const l=[];if(Object(r["a"])(s.contentMetadata)){const e=s.contentMetadata.length;for(let t=0;t<e;t++){const e=s.contentMetadata[t];l.push(s.propertyTables[e])}}let u;const h=i.metadataSchema,d=s.subtreeMetadata;if(Object(r["a"])(d)){const e=d.class,t=h.classes[e];u=new eQ({subtreeMetadata:d,class:t})}e._metadata=u,e._tilePropertyTableJson=c,e._contentPropertyTableJsons=l;const f={constant:0};s.contentAvailabilityHeaders=[],HJ(s,"3DTILES_multiple_contents")?s.contentAvailabilityHeaders=s.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(s.contentAvailability)?s.contentAvailabilityHeaders=s.contentAvailability:s.contentAvailabilityHeaders.push(Object(o["a"])(s.contentAvailability,f));const p=l3(s.buffers),m=u3(s.bufferViews,p);h3(s,m),Object(r["a"])(c)&&d3(c,m);for(let o=0;o<l.length;o++){const e=l[o];d3(e,m)}return f3(e,p,a.binary).then((function(t){const n=m3(m,t);return _3(e,s,i,n),Object(r["a"])(c)&&(b3(e,i,n),O3(e)),y3(e,i,n),A3(e),e}))}function c3(e){const t=!0,n=new DataView(e.buffer,e.byteOffset);let i=8;const o=n.getUint32(i,t);i+=8;const r=n.getUint32(i,t);i+=8;const a=Fh(e,i,o);i+=o;const s=e.subarray(i,i+r);return{json:a,binary:s}}function l3(e){e=Object(r["a"])(e)?e:[];for(let t=0;t<e.length;t++){const n=e[t];n.isExternal=Object(r["a"])(n.uri),n.isActive=!1}return e}function u3(e,t){e=Object(r["a"])(e)?e:[];for(let n=0;n<e.length;n++){const i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}function h3(e,t){let n;const i=e.tileAvailability;Object(r["a"])(i.bitstream)?n=t[i.bitstream]:Object(r["a"])(i.bufferView)&&(n=t[i.bufferView]),Object(r["a"])(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);const o=e.contentAvailabilityHeaders;for(let s=0;s<o.length;s++)n=void 0,Object(r["a"])(o[s].bitstream)?n=t[o[s].bitstream]:Object(r["a"])(o[s].bufferView)&&(n=t[o[s].bufferView]),Object(r["a"])(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;const a=e.childSubtreeAvailability;Object(r["a"])(a.bitstream)?n=t[a.bitstream]:Object(r["a"])(a.bufferView)&&(n=t[a.bufferView]),Object(r["a"])(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}function d3(e,t){const n=e.properties;let i;for(const a in n)if(n.hasOwnProperty(a)){const e=n[a],s=Object(o["a"])(e.values,e.bufferView);i=t[s],i.isActive=!0,i.bufferHeader.isActive=!0;const c=Object(o["a"])(e.stringOffsets,e.stringOffsetBufferView);Object(r["a"])(c)&&(i=t[c],i.isActive=!0,i.bufferHeader.isActive=!0);const l=Object(o["a"])(e.arrayOffsets,e.arrayOffsetBufferView);Object(r["a"])(l)&&(i=t[l],i.isActive=!0,i.bufferHeader.isActive=!0)}}function f3(e,t,n){const i=[];for(let o=0;o<t.length;o++){const r=t[o];if(r.isActive)if(r.isExternal){const t=p3(e,r);i.push(t)}else i.push(Promise.resolve(n));else i.push(Promise.resolve(void 0))}return Promise.all(i).then((function(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];Object(r["a"])(i)&&(t[n]=i)}return t}))}function p3(e,t){const n=e._resource,i=n.getDerivedResource({url:t.uri}),o=r3.loadExternalBuffer({resource:i});return e._bufferLoader=o,o.promise.then((function(e){return e.typedArray}))}function m3(e,t){const n={};for(let i=0;i<e.length;i++){const o=e[i];if(!o.isActive)continue;const r=o.byteOffset,a=r+o.byteLength,s=t[o.buffer],c=s.subarray(r,a);n[i]=c}return n}function _3(e,t,n,i){const o=n.branchingFactor,a=n.subtreeLevels,s=(Math.pow(o,a)-1)/(o-1),c=Math.pow(o,a),l=HJ(t,"3DTILES_metadata"),u=Object(r["a"])(e._tilePropertyTableJson);let h=l||u;e._tileAvailability=g3(t.tileAvailability,i,s,h);const d=e._contentPropertyTableJsons.length>0;h=h||d;for(let r=0;r<t.contentAvailabilityHeaders.length;r++){const n=g3(t.contentAvailabilityHeaders[r],i,s,h);e._contentAvailabilityBitstreams.push(n)}e._childSubtreeAvailability=g3(t.childSubtreeAvailability,i,c)}function g3(e,t,n,i){if(Object(r["a"])(e.constant))return new qJ({constant:Boolean(e.constant),lengthBits:n,availableCount:e.availableCount});let o;return Object(r["a"])(e.bitstream)?o=t[e.bitstream]:Object(r["a"])(e.bufferView)&&(o=t[e.bufferView]),new qJ({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function b3(e,t,n){const i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,a=i.class,s=r.classes[a];e._tileMetadataTable=new YQ({class:s,count:o,properties:i.properties,bufferViews:n})}function y3(e,t,n){const i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,a=e._contentMetadataTables;for(let s=0;s<i.length;s++){const e=i[s],t=o[s],c=t.availableCount,l=e.class,u=r.classes[l],h=new YQ({class:u,count:c,properties:e.properties,bufferViews:n});a.push(h)}}function v3(e){let t=0;const n=e.lengthBits,i=e.availableCount;let o;o=i<256?new Uint8Array(n):i<65536?new Uint16Array(n):new Uint32Array(n);for(let r=0;r<e.lengthBits;r++)e.getBit(r)&&(o[r]=t,t++);return o}function O3(e){const t=v3(e._tileAvailability);e._tileJumpBuffer=t}function A3(e){const t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let i=0;i<n.length;i++){const e=n[i],o=v3(e);t.push(o)}}function w3(e,t){if(!Object(r["a"])(e._tileMetadataTable))return;const n=e.getTileIndex(t);return e._tileAvailability.getBit(n)?e._tileJumpBuffer[n]:void 0}function T3(e,t,n){const i=e._contentMetadataTables;if(!Object(r["a"])(i))return;const o=i[n];if(!Object(r["a"])(o))return;const a=e._contentAvailabilityBitstreams[n],s=e.getTileIndex(t);if(a.getBit(s)){const t=e._contentJumpBuffers[n];return t[s]}}Object.defineProperties(a3.prototype,{readyPromise:{get:function(){return this._readyPromise}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),a3.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},a3.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},a3.prototype.contentIsAvailableAtIndex=function(e,t){if(t=Object(o["a"])(t,0),t<0||t>=this._contentAvailabilityBitstreams.length)throw new a["a"]("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},a3.prototype.contentIsAvailableAtCoordinates=function(e,t){const n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)},a3.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},a3.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},a3.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},a3.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===$J.OCTREE&&(t=3),e>>t},a3.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new ye["a"]("level is out of bounds for this subtree");const n=e.getSubtreeCoordinates(),i=n.getOffsetCoordinates(e),o=i.tileIndex;return o},a3.prototype.getChildSubtreeIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t!==this._implicitCoordinates.subtreeLevels)throw new ye["a"]("level is out of bounds for this subtree");const n=e.getParentSubtreeCoordinates(),i=n.getOffsetCoordinates(e),o=i.mortonIndex;return o},a3.prototype.getTileMetadataView=function(e){const t=w3(this,e);if(!Object(r["a"])(t))return;const n=this._tileMetadataTable;return new XJ({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})},a3.prototype.getContentMetadataView=function(e,t){const n=T3(this,e,t);if(!Object(r["a"])(n))return;const i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new XJ({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})},a3.prototype.isDestroyed=function(){return!1},a3.prototype.destroy=function(){return Object(r["a"])(this._bufferLoader)&&r3.unload(this._bufferLoader),Wc(this)};var C3=a3;const E3={ID:"ID",NAME:"NAME",DESCRIPTION:"DESCRIPTION",TILE_BOUNDING_BOX:"TILE_BOUNDING_BOX",TILE_BOUNDING_REGION:"TILE_BOUNDING_REGION",TILE_BOUNDING_SPHERE:"TILE_BOUNDING_SPHERE",TILE_MINIMUM_HEIGHT:"TILE_MINIMUM_HEIGHT",TILE_MAXIMUM_HEIGHT:"TILE_MAXIMUM_HEIGHT",TILE_HORIZON_OCCLUSION_POINT:"TILE_HORIZON_OCCLUSION_POINT",TILE_GEOMETRIC_ERROR:"TILE_GEOMETRIC_ERROR",CONTENT_BOUNDING_BOX:"CONTENT_BOUNDING_BOX",CONTENT_BOUNDING_REGION:"CONTENT_BOUNDING_REGION",CONTENT_BOUNDING_SPHERE:"CONTENT_BOUNDING_SPHERE",CONTENT_MINIMUM_HEIGHT:"CONTENT_MINIMUM_HEIGHT",CONTENT_MAXIMUM_HEIGHT:"CONTENT_MAXIMUM_HEIGHT",CONTENT_HORIZON_OCCLUSION_POINT:"CONTENT_HORIZON_OCCLUSION_POINT"};var x3=Object.freeze(E3);function S3(e){return i["a"].typeOf.object("tileMetadata",e),{tile:{boundingVolume:I3("TILE",e),minimumHeight:D3("TILE",e),maximumHeight:P3("TILE",e)},content:{boundingVolume:I3("CONTENT",e),minimumHeight:D3("CONTENT",e),maximumHeight:P3("CONTENT",e)}}}function I3(e,t){const n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if(Object(r["a"])(i))return{box:i};const o=`${e}_BOUNDING_REGION`,a=t.getPropertyBySemantic(o);if(Object(r["a"])(a))return{region:a};const s=`${e}_BOUNDING_SPHERE`,c=t.getPropertyBySemantic(s);return Object(r["a"])(c)?{sphere:c}:void 0}function D3(e,t){const n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}function P3(e,t){const n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)}var j3=S3;function R3(e,t,n,o,s,c){if(i["a"].defined("tile.implicitTileset",t.implicitTileset),i["a"].defined("tile.implicitCoordinates",t.implicitCoordinates),Object(r["a"])(o)===Object(r["a"])(s))throw new a["a"]("One of json and arrayBuffer must be defined.");const l=t.implicitTileset,u=t.implicitCoordinates;this._implicitTileset=l,this._implicitCoordinates=u,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const h=u.getTemplateValues(),d=l.subtreeUriTemplate.getDerivedResource({templateValues:h});this._url=d.getUrlComponent(!0),this._readyPromise=L3(this,o,s,c)}function L3(e,t,n,i){let a;i=Object(o["a"])(i,0),Object(r["a"])(n)&&(a=new Uint8Array(n,i));const s=new C3(e._resource,t,a,e._implicitTileset,e._implicitCoordinates);return e._implicitSubtree=s,s.readyPromise.then((function(){return M3(e,s),e}))}function M3(e,t){const n=e._tile,i=e._implicitCoordinates.childIndex,o=B3(e,t,n,i),r=e._tileset.statistics;n.children.push(o.rootTile),r.numberOfTilesTotal++;const a=N3(e,t,o.bottomRow);for(let s=0;s<a.length;s++){const t=a[s],n=t.tile,i=t4(e,n,t.childIndex);n.children.push(i),r.numberOfTilesTotal++}}function N3(e,t,n){const i=[],o=e._implicitTileset.branchingFactor;for(let a=0;a<n.length;a++){const e=n[a];if(Object(r["a"])(e))for(let n=0;n<o;n++){const r=a*o+n;t.childSubtreeIsAvailableAtIndex(r)&&i.push({tile:e,childIndex:n})}}return i}function B3(e,t,n,i){const o=0,r=!0,a=z3(e,t,n,i,o,r),s=e._tileset.statistics;let c=[a],l=[];const u=e._implicitTileset;for(let h=1;h<u.subtreeLevels;h++){const n=t.getLevelOffset(h),i=u.branchingFactor*c.length;for(let o=0;o<i;o++){const i=n+o;if(!t.tileIsAvailableAtIndex(i)){l.push(void 0);continue}const r=t.getParentMortonIndex(o),a=c[r],h=o%u.branchingFactor,d=z3(e,t,a,h,i);a.children.push(d),s.numberOfTilesTotal++,l.push(d)}c=l,l=[]}return{rootTile:a,bottomRow:c}}function F3(e,t,n){const i=x3.TILE_GEOMETRIC_ERROR;return Object(r["a"])(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function z3(e,t,n,i,a,s){const c=e._implicitTileset;let l,u,h,d;if(l=Object(o["a"])(s,!1)?n.implicitCoordinates:n.implicitCoordinates.getChildCoordinates(i),Object(r["a"])(t.tilePropertyTableJson)){u=t.getTileMetadataView(l);const e=j3(u);h=e.tile,d=e.content}const f=t.contentPropertyTableJsons,p=f.length;let m=!1;for(let o=0;o<p;o++)if(t.contentIsAvailableAtCoordinates(l,o)){m=!0;break}const _=G3(c,l,i,s,n,h),g=[];for(let o=0;o<c.contentCount;o++){if(!t.contentIsAvailableAtIndex(a,o))continue;const e=c.contentUriTemplates[o],n=e.getDerivedResource({templateValues:l.getTemplateValues()}).url,i={uri:n},s=W3(_,d);Object(r["a"])(s)&&(i.boundingVolume=s),g.push(Object(qE["a"])(i,c.contentHeaders[o]))}const b=F3(u,c,l),y={boundingVolume:_,geometricError:b,refine:c.refine,contents:g},v=!0,O=Object(RL["a"])(c.tileHeader,v);delete O.boundingVolume,delete O.transform;const A=Object(qE["a"])(y,O,v),w=n4(e,c.baseResource,A,n);return w.implicitCoordinates=l,w.implicitSubtree=t,w.metadata=u,w.hasImplicitContentMetadata=m,w}function k3(e,t){return Object(r["a"])(e)&&Object(r["a"])(t)&&(Object(r["a"])(t.minimumHeight)||Object(r["a"])(t.maximumHeight))&&(HJ(e,"3DTILES_bounding_volume_S2")||Object(r["a"])(e.region))}function U3(e,t){Object(r["a"])(t)&&(HJ(e,"3DTILES_bounding_volume_S2")?H3(e.extensions["3DTILES_bounding_volume_S2"],t.minimumHeight,t.maximumHeight):Object(r["a"])(e.region)&&V3(e.region,t.minimumHeight,t.maximumHeight))}function V3(e,t,n){Object(r["a"])(t)&&(e[4]=t),Object(r["a"])(n)&&(e[5]=n)}function H3(e,t,n){Object(r["a"])(t)&&(e.minimumHeight=t),Object(r["a"])(n)&&(e.maximumHeight=n)}function G3(e,t,n,i,a,s){let c;return c=!Object(r["a"])(s)||!Object(r["a"])(s.boundingVolume)||!k3(s.boundingVolume,s)&&k3(e.boundingVolume,s)?q3(e,t,n,Object(o["a"])(i,!1),a):s.boundingVolume,U3(c,s),c}function W3(e,t){let n;return Object(r["a"])(t)&&(n=t.boundingVolume),k3(n,t)?U3(n,t):k3(e,t)&&(n=Object(RL["a"])(e,!0),U3(n,t)),n}function q3(e,t,n,i,o){const a=e.boundingVolume;if(HJ(a,"3DTILES_bounding_volume_S2"))return Y3(i,o,n,t.level,t.x,t.y,t.z);if(Object(r["a"])(a.region)){const e=e4(a.region,t.level,t.x,t.y,t.z);return{region:e}}const s=Q3(a.box,t.level,t.x,t.y,t.z);return{box:s}}function Y3(e,t,n,o,a,s,c){i["a"].typeOf.bool("parentIsPlaceholderTile",e),i["a"].typeOf.object("parentTile",t),i["a"].typeOf.number("childIndex",n),i["a"].typeOf.number("level",o),i["a"].typeOf.number("x",a),i["a"].typeOf.number("y",s),Object(r["a"])(c)&&i["a"].typeOf.number("z",c);const l=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:MD.getTokenFromId(l.s2Cell._cellId),minimumHeight:l.minimumHeight,maximumHeight:l.maximumHeight}}};const u=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),h=u%2===0?sC.encode2D(o,a,s):sC.encode2D(o,s,a),d=MD.fromFacePositionLevel(u,BigInt(h),o);let f,p;if(Object(r["a"])(c)){const e=(l.maximumHeight+l.minimumHeight)/2;f=n<4?l.minimumHeight:e,p=n<4?e:l.maximumHeight}else f=l.minimumHeight,p=l.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:MD.getTokenFromId(d._cellId),minimumHeight:f,maximumHeight:p}}}}Object.defineProperties(R3.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){throw new a["a"]("Implicit3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const X3=new g,K3=new g,$3=new g,J3=new ce;function Q3(e,t,n,o,a){if(i["a"].typeOf.object("rootBox",e),i["a"].typeOf.number("level",t),i["a"].typeOf.number("x",n),i["a"].typeOf.number("y",o),Object(r["a"])(a)&&i["a"].typeOf.number("z",a),0===t)return e;const s=g.unpack(e,0,K3),c=ce.unpack(e,3,J3),l=Math.pow(2,-t),u=(2*n+1)*l-1,h=(2*o+1)*l-1;let d=0;const f=g.fromElements(l,l,1,X3);Object(r["a"])(a)&&(d=(2*a+1)*l-1,f.z=l);let p=g.fromElements(u,h,d,$3);p=ce.multiplyByVector(c,p,$3),p=g.add(p,s,$3);let m=ce.clone(c);m=ce.multiplyByScale(m,f,m);const _=new Array(12);return g.pack(p,_),ce.pack(m,_,3),_}const Z3=new Fe;function e4(e,t,n,o,a){if(i["a"].typeOf.object("rootRegion",e),i["a"].typeOf.number("level",t),i["a"].typeOf.number("x",n),i["a"].typeOf.number("y",o),Object(r["a"])(a)&&i["a"].typeOf.number("z",a),0===t)return e.slice();const c=Fe.unpack(e,0,Z3),l=e[4],u=e[5],h=Math.pow(2,-t),d=h*c.width,f=s["a"].negativePiToPi(c.west+n*d),p=s["a"].negativePiToPi(f+d),m=h*c.height,_=s["a"].negativePiToPi(c.south+o*m),g=s["a"].negativePiToPi(_+m);let b=l,y=u;if(Object(r["a"])(a)){const e=h*(u-l);b+=a*e,y=b+e}return[f,_,p,g,b,y]}function t4(e,t,n){const i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=q3(i,o,n,!1,t),a=F3(void 0,i,o),s=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,c={boundingVolume:r,geometricError:a,refine:i.refine,contents:[{uri:s}]},l=n4(e,i.baseResource,c,t);return l.implicitTileset=i,l.implicitCoordinates=o,l}function n4(e,t,n,i){const o=e._tile.constructor;return new o(e._tileset,t,n,i)}R3.prototype.hasProperty=function(e,t){return!1},R3.prototype.getFeature=function(e){},R3.prototype.applyDebugSettings=function(e,t){},R3.prototype.applyStyle=function(e){},R3.prototype.update=function(e,t){},R3.prototype.isDestroyed=function(){return!1},R3.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),Wc(this)},R3._deriveBoundingBox=Q3,R3._deriveBoundingRegion=e4,R3._deriveBoundingVolumeS2=Y3;var i4=R3;const o4={NONE:0,REPEAT:1,MIRRORED_REPEAT:2};var r4=Object.freeze(o4);function a4(e,t){i["a"].typeOf.object("normal",e),i["a"].typeOf.number("distance",t),this._distance=t,this._normal=new s4(e,this),this.onChangeCallback=void 0,this.index=-1}function s4(e,t){this._clippingPlane=t,this._cartesian3=g.clone(e)}Object.defineProperties(a4.prototype,{distance:{get:function(){return this._distance},set:function(e){i["a"].typeOf.number("value",e),Object(r["a"])(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){i["a"].typeOf.object("value",e),Object(r["a"])(this.onChangeCallback)&&!g.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),g.clone(e,this._normal._cartesian3)}}}),a4.fromPlane=function(e,t){return i["a"].typeOf.object("plane",e),Object(r["a"])(t)?(t.normal=e.normal,t.distance=e.distance):t=new a4(e.normal,e.distance),t},a4.clone=function(e,t){return Object(r["a"])(t)?(t.normal=e.normal,t.distance=e.distance,t):new a4(e.normal,e.distance)},Object.defineProperties(s4.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){i["a"].typeOf.number("value",e),Object(r["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){i["a"].typeOf.number("value",e),Object(r["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){i["a"].typeOf.number("value",e),Object(r["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});var c4=a4;function l4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=Object(o["a"])(e.enabled,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this.edgeColor=Dm.clone(Object(o["a"])(e.edgeColor,Dm.WHITE)),this.edgeWidth=Object(o["a"])(e.edgeWidth,0),this.planeAdded=new dn["a"],this.planeRemoved=new dn["a"],this._owner=void 0;const t=Object(o["a"])(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?u4:h4,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;const n=e.planes;if(Object(r["a"])(n)){const e=n.length;for(let t=0;t<e;++t)this.add(n[t])}}function u4(e){return e===G.OUTSIDE}function h4(e){return e===G.INSIDE}function d4(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function f4(e,t){const n=e.length;for(let i=0;i<n;++i)if(ji.equals(e[i],t))return i;return-1}Object.defineProperties(l4.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?u4:h4)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),l4.prototype.add=function(e){const t=this._planes.length,n=this;e.onChangeCallback=function(e){d4(n,e)},e.index=t,d4(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},l4.prototype.get=function(e){return i["a"].typeOf.number("index",e),this._planes[e]},l4.prototype.contains=function(e){return-1!==f4(this._planes,e)},l4.prototype.remove=function(e){const t=this._planes,n=f4(t,e);if(-1===n)return!1;e instanceof c4&&(e.onChangeCallback=void 0,e.index=-1);const i=t.length-1;for(let o=n;o<i;++o){const e=t[o+1];t[o]=e,e instanceof c4&&(e.index=o)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0},l4.prototype.removeAll=function(){const e=this._planes,t=e.length;for(let n=0;n<t;++n){const t=e[n];t instanceof c4&&(t.onChangeCallback=void 0,t.index=-1),this.planeRemoved.raiseEvent(t,n)}this._multipleDirtyPlanes=!0,this._planes=[]};const p4=new be,m4=new be;function _4(e,t,n){const i=e._uint8View,o=e._planes;let r=0;for(let a=t;a<n;++a){const e=o[a],t=pc.octEncodeToCartesian4(e.normal,m4);i[r]=t.x,i[r+1]=t.y,i[r+2]=t.z,i[r+3]=t.w;const n=be.packFloat(e.distance,p4);i[r+4]=n.x,i[r+5]=n.y,i[r+6]=n.z,i[r+7]=n.w,r+=8}}function g4(e,t,n){const i=e._float32View,o=e._planes;let r=0;for(let a=t;a<n;++a){const e=o[a],t=e.normal;i[r]=t.x,i[r+1]=t.y,i[r+2]=t.z,i[r+3]=e.distance,r+=4}}function b4(e,t){const n=YN.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}const y4=new Gt;l4.prototype.update=function(e){let t=this._clippingPlanesTexture;const n=e.context,i=l4.useFloatTexture(n),o=i?this.length:2*this.length;if(Object(r["a"])(t)){const e=t.width*t.height;(e<o||o<.25*e)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0===this.length)return;if(!Object(r["a"])(t)){const e=b4(o,y4);e.y*=2,i?(t=new lB({context:n,width:e.x,height:e.y,pixelFormat:fx.RGBA,pixelDatatype:hx.FLOAT,sampler:rB.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*4)):(t=new lB({context:n,width:e.x,height:e.y,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,sampler:rB.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(e.x*e.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}const a=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==a){if(this._multipleDirtyPlanes)i?(g4(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(_4(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let e=0,n=0;i?(n=Math.floor(a/t.width),e=Math.floor(a-n*t.width),g4(this,a,a+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:e,yOffset:n})):(n=Math.floor(2*a/t.width),e=Math.floor(2*a-n*t.width),_4(this,a,a+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:e,yOffset:n}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};const v4=new Me,O4=new ji(g.UNIT_X,0);l4.prototype.computeIntersectionWithBoundingVolume=function(e,t){const n=this._planes,i=n.length;let o=this.modelMatrix;Object(r["a"])(t)&&(o=Me.multiply(t,o,v4));let a=G.INSIDE;!this.unionClippingRegions&&i>0&&(a=G.OUTSIDE);for(let r=0;r<i;++r){const t=n[r];ji.transform(t,o,O4);const i=e.intersectPlane(O4);if(i===G.INTERSECTING)a=i;else if(this._testIntersection(i))return i}return a},l4.setOwner=function(e,t,n){if(e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),Object(r["a"])(e))){if(Object(r["a"])(e._owner))throw new a["a"]("ClippingPlaneCollection should only be assigned to one object");e._owner=t,t[n]=e}},l4.useFloatTexture=function(e){return e.floatingPointTexture},l4.getTextureResolution=function(e,t,n){const i=e.texture;if(Object(r["a"])(i))return n.x=i.width,n.y=i.height,n;const o=l4.useFloatTexture(t)?e.length:2*e.length,a=b4(o,n);return a.y*=2,a},l4.prototype.isDestroyed=function(){return!1},l4.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),Wc(this)};var A4=l4;const w4={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===w4.HIGHLIGHT?0:e===w4.REPLACE?1:e===w4.MIX?s["a"].clamp(t,s["a"].EPSILON4,1):void 0}};var T4=Object.freeze(w4);function C4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.number("options.count",e.count),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(C4.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(Object(r["a"])(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return Object(r["a"])(this._metadataTable)&&(e+=this._metadataTable.byteLength),Object(r["a"])(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}}),C4.prototype.hasProperty=function(e,t){return i["a"].typeOf.number("index",e),i["a"].typeOf.string("propertyId",t),!(!Object(r["a"])(this._metadataTable)||!this._metadataTable.hasProperty(t))||(!(!Object(r["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(t))||!(!Object(r["a"])(this._batchTableHierarchy)||!this._batchTableHierarchy.hasProperty(e,t)))},C4.prototype.hasPropertyBySemantic=function(e,t){return i["a"].typeOf.number("index",e),i["a"].typeOf.string("semantic",t),!!Object(r["a"])(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(t)},C4.prototype.propertyExists=function(e){return i["a"].typeOf.string("propertyId",e),!(!Object(r["a"])(this._metadataTable)||!this._metadataTable.hasProperty(e))||(!(!Object(r["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.hasProperty(e))||!(!Object(r["a"])(this._batchTableHierarchy)||!this._batchTableHierarchy.propertyExists(e)))},C4.prototype.propertyExistsBySemantic=function(e){return i["a"].typeOf.string("semantic",e),!!Object(r["a"])(this._metadataTable)&&this._metadataTable.hasPropertyBySemantic(e)};const E4=[];function x4(e,t){if(!Object(r["a"])(e)||e<0||e>=t)throw new a["a"](`featureId is required and must be between zero and featuresLength - 1 (${t}`-NaN)}C4.prototype.getPropertyIds=function(e,t){return t=Object(r["a"])(t)?t:[],t.length=0,Object(r["a"])(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(E4)),Object(r["a"])(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(E4)),Object(r["a"])(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,E4)),t},C4.prototype.getProperty=function(e,t){let n;return Object(r["a"])(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),Object(r["a"])(n))||Object(r["a"])(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),Object(r["a"])(n))||Object(r["a"])(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),Object(r["a"])(n))?n:void 0},C4.prototype.setProperty=function(e,t,n){return!(!Object(r["a"])(this._metadataTable)||!this._metadataTable.setProperty(e,t,n))||(!(!Object(r["a"])(this._jsonMetadataTable)||!this._jsonMetadataTable.setProperty(e,t,n))||Object(r["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n))},C4.prototype.getPropertyBySemantic=function(e,t){if(Object(r["a"])(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)},C4.prototype.setPropertyBySemantic=function(e,t,n){return!!Object(r["a"])(this._metadataTable)&&this._metadataTable.setPropertyBySemantic(e,t,n)},C4.prototype.getPropertyTypedArray=function(e){if(i["a"].typeOf.string("propertyId",e),Object(r["a"])(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)},C4.prototype.getPropertyTypedArrayBySemantic=function(e){if(i["a"].typeOf.string("semantic",e),Object(r["a"])(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)},C4.prototype.isClass=function(e,t){x4(e,this.count),i["a"].typeOf.string("className",t);const n=this._batchTableHierarchy;return!!Object(r["a"])(n)&&n.isClass(e,t)},C4.prototype.isExactClass=function(e,t){return x4(e,this.count),i["a"].typeOf.string("className",t),this.getExactClassName(e)===t},C4.prototype.getExactClassName=function(e){x4(e,this.count);const t=this._batchTableHierarchy;if(Object(r["a"])(t))return t.getClassName(e)};var S4=C4;function I4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.property,n=e.classProperty,a=e.textures;i["a"].typeOf.object("options.property",t),i["a"].typeOf.object("options.classProperty",n),i["a"].typeOf.object("options.textures",a);const s=Object(r["a"])(t.channels)?t.channels:[0],c=t,l=y2.createModelTextureReader({textureInfo:c,channels:j4(s),texture:a[c.index]});this._min=t.min,this._max=t.max;let u=t.offset,h=t.scale;const d=n.hasValueTransform||Object(r["a"])(u)||Object(r["a"])(h);u=Object(o["a"])(u,n.offset),h=Object(o["a"])(h,n.scale),u=n.unpackVectorAndMatrixTypes(u),h=n.unpackVectorAndMatrixTypes(h),this._offset=u,this._scale=h,this._hasValueTransform=d,this._textureReader=l,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(I4.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),I4.prototype.isGpuCompatible=function(){const e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===oQ.SCALAR&&n===nQ.UINT8:!(!oQ.isVectorType(t)&&t!==oQ.SCALAR)&&n===nQ.UINT8};const D4=[void 0,"float","vec2","vec3","vec4"],P4=[void 0,"int","ivec2","ivec3","ivec4"];function j4(e){return e.map((function(e){return"rgba".charAt(e)})).join("")}I4.prototype.getGlslType=function(){const e=this._classProperty;let t=oQ.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?D4[t]:P4[t]},I4.prototype.unpackInShader=function(e){const t=this._classProperty;if(t.normalized)return e;const n=this.getGlslType();return`${n}(255.0 * ${e})`};var R4=I4;function L4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.propertyTexture,n=e.class,a=e.textures;i["a"].typeOf.object("options.propertyTexture",t),i["a"].typeOf.object("options.class",n),i["a"].typeOf.object("options.textures",a);const s=t.extensions,c=t.extras,l={};if(Object(r["a"])(t.properties))for(const i in t.properties)t.properties.hasOwnProperty(i)&&(l[i]=new R4({property:t.properties[i],classProperty:n.properties[i],textures:a}));this._name=e.name,this._id=e.id,this._class=n,this._properties=l,this._extras=c,this._extensions=s}Object.defineProperties(L4.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),L4.prototype.getProperty=function(e){return i["a"].typeOf.string("propertyId",e),this._properties[e]};var M4=L4;function N4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.property,n=e.classProperty;i["a"].typeOf.object("options.property",t),i["a"].typeOf.object("options.classProperty",n),this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let a=t.offset,s=t.scale;const c=n.hasValueTransform||Object(r["a"])(a)||Object(r["a"])(s);a=Object(o["a"])(a,n.offset),s=Object(o["a"])(s,n.scale),a=n.unpackVectorAndMatrixTypes(a),s=n.unpackVectorAndMatrixTypes(s),this._offset=a,this._scale=s,this._hasValueTransform=c,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(N4.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var B4=N4;function F4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.propertyAttribute,n=e.class;i["a"].typeOf.object("options.propertyAttribute",t),i["a"].typeOf.object("options.class",n);const a={};if(Object(r["a"])(t.properties))for(const i in t.properties)t.properties.hasOwnProperty(i)&&(a[i]=new B4({property:t.properties[i],classProperty:n.properties[i]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(F4.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),F4.prototype.getProperty=function(e){return i["a"].typeOf.string("propertyId",e),this._properties[e]};var z4=F4;function k4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.schema",e.schema),this._schema=e.schema;const t=e.propertyTables;this._propertyTableCount=Object(r["a"])(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(k4.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!Object(r["a"])(this._propertyTables))return 0;let e=0;const t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}}),k4.prototype.getPropertyTable=function(e){return i["a"].typeOf.number("propertyTableId",e),this._propertyTables[e]},k4.prototype.getPropertyTexture=function(e){return i["a"].typeOf.number("propertyTextureId",e),this._propertyTextures[e]},k4.prototype.getPropertyAttribute=function(e){return i["a"].typeOf.number("propertyAttributeId",e),this._propertyAttributes[e]};var U4=k4;function V4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.extension,n=e.schema;i["a"].typeOf.object("options.extension",t),i["a"].typeOf.object("options.schema",n);const a=[];if(Object(r["a"])(t.propertyTables))for(let i=0;i<t.propertyTables.length;i++){const o=t.propertyTables[i],r=n.classes[o.class],s=new YQ({count:o.count,properties:o.properties,class:r,bufferViews:e.bufferViews});a.push(new S4({id:i,name:o.name,count:o.count,metadataTable:s,extras:o.extras,extensions:o.extensions}))}const s=[];if(Object(r["a"])(t.propertyTextures))for(let i=0;i<t.propertyTextures.length;i++){const o=t.propertyTextures[i];s.push(new M4({id:i,name:o.name,propertyTexture:o,class:n.classes[o.class],textures:e.textures}))}const c=[];if(Object(r["a"])(t.propertyAttributes))for(let i=0;i<t.propertyAttributes.length;i++){const e=t.propertyAttributes[i];c.push(new z4({id:i,name:e.name,class:n.classes[e.class],propertyAttribute:e}))}return new U4({schema:n,propertyTables:a,propertyTextures:s,propertyAttributes:c,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}var H4=V4;function G4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.extension,n=e.schema;let a;i["a"].typeOf.object("options.extension",t),i["a"].typeOf.object("options.schema",n);const s=[];let c;if(Object(r["a"])(t.featureTables))for(c=Object.keys(t.featureTables).sort(),a=0;a<c.length;a++){const i=c[a],o=t.featureTables[i],r=n.classes[o.class],l=new YQ({count:o.count,properties:o.properties,class:r,bufferViews:e.bufferViews});s.push(new S4({id:i,count:o.count,metadataTable:l,extras:o.extras,extensions:o.extensions}))}const l=[];if(Object(r["a"])(t.featureTextures))for(c=Object.keys(t.featureTextures).sort(),a=0;a<c.length;a++){const i=c[a],o=t.featureTextures[i];l.push(new M4({id:i,propertyTexture:W4(o),class:n.classes[o.class],textures:e.textures}))}return new U4({schema:n,propertyTables:s,propertyTextures:l,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}function W4(e){const t={class:e.class,properties:{}},n=e.properties;for(const i in n)if(n.hasOwnProperty(i)){const e=n[i],o={channels:q4(e.channels),extras:e.extras,extensions:e.extensions};t.properties[i]=Object(qE["a"])(e.texture,o,!0)}return t}function q4(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]="rgba".indexOf(e[i]);return n}var Y4=G4;function X4(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltf,n=e.extension,s=e.extensionLegacy,c=e.gltfResource,l=e.baseResource,u=e.supportedImageFormats,h=e.cacheKey,d=Object(o["a"])(e.asynchronous,!0);if(i["a"].typeOf.object("options.gltf",t),i["a"].typeOf.object("options.gltfResource",c),i["a"].typeOf.object("options.baseResource",l),i["a"].typeOf.object("options.supportedImageFormats",u),!Object(r["a"])(e.extension)&&!Object(r["a"])(e.extensionLegacy))throw new a["a"]("One of options.extension or options.extensionLegacy must be specified");this._gltfResource=c,this._baseResource=l,this._gltf=t,this._extension=n,this._extensionLegacy=s,this._supportedImageFormats=u,this._cacheKey=h,this._asynchronous=d,this._bufferViewLoaders=[],this._textureLoaders=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=JQ.UNLOADED,this._promise=void 0}function K4(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.values,a=i.arrayOffsets,s=i.stringOffsets;Object(r["a"])(o)&&(t[o]=!0),Object(r["a"])(a)&&(t[a]=!0),Object(r["a"])(s)&&(t[s]=!0)}}function $4(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.bufferView,a=i.arrayOffsetBufferView,s=i.stringOffsetBufferView;Object(r["a"])(o)&&(t[o]=!0),Object(r["a"])(a)&&(t[a]=!0),Object(r["a"])(s)&&(t[s]=!0)}}function J4(e){const t=e.propertyTables,n={};if(Object(r["a"])(t))for(let i=0;i<t.length;i++){const e=t[i];K4(e.properties,n)}return n}function Q4(e){const t=e.featureTables,n={};if(Object(r["a"])(t))for(const i in t)if(t.hasOwnProperty(i)){const e=t[i],o=e.properties;Object(r["a"])(o)&&$4(o,n)}return n}function Z4(e){let t;t=Object(r["a"])(e._extension)?J4(e._extension):Q4(e._extensionLegacy);const n=[],i={};for(const o in t)if(t.hasOwnProperty(o)){const t=r3.loadBufferView({gltf:e._gltf,bufferViewId:parseInt(o),gltfResource:e._gltfResource,baseResource:e._baseResource});n.push(t.promise),e._bufferViewLoaders.push(t),i[o]=t}return Promise.all(n).then((function(){const t={};for(const e in i)if(i.hasOwnProperty(e)){const n=i[e],o=new Uint8Array(n.typedArray);t[e]=o}return a5(e),t}))}function e5(e){const t={},n=e.propertyTextures;if(Object(r["a"])(n))for(let i=0;i<n.length;i++){const e=n[i],o=e.properties;Object(r["a"])(o)&&t5(o,t)}return t}function t5(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t[i.index]=i}}function n5(e){const t={},n=e.featureTextures;if(Object(r["a"])(n))for(const i in n)if(n.hasOwnProperty(i)){const e=n[i],o=e.properties;Object(r["a"])(o)&&i5(o,t)}return t}function i5(e,t){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],o=i.texture;t[o.index]=o}}function o5(e){let t;t=Object(r["a"])(e._extension)?e5(e._extension):n5(e._extensionLegacy);const n=e._gltf,i=e._gltfResource,o=e._baseResource,a=e._supportedImageFormats,s=e._asynchronous,c=[],l={};for(const r in t)if(t.hasOwnProperty(r)){const u=r3.loadTexture({gltf:n,textureInfo:t[r],gltfResource:i,baseResource:o,supportedImageFormats:a,asynchronous:s});c.push(u.promise),e._textureLoaders.push(u),l[r]=u}return Promise.all(c).then((function(){const e={};for(const t in l)if(l.hasOwnProperty(t)){const n=l[t];e[t]=n.texture}return e}))}function r5(e){const t=Object(o["a"])(e._extension,e._extensionLegacy);let n;if(Object(r["a"])(t.schemaUri)){const i=e._baseResource.getDerivedResource({url:t.schemaUri});n=r3.loadSchema({resource:i})}else n=r3.loadSchema({schema:t.schema});return e._schemaLoader=n,n.promise.then((function(e){return e.schema}))}function a5(e){const t=e._bufferViewLoaders,n=t.length;for(let i=0;i<n;++i)r3.unload(t[i]);e._bufferViewLoaders.length=0}function s5(e){const t=e._textureLoaders,n=t.length;for(let i=0;i<n;++i)r3.unload(t[i]);e._textureLoaders.length=0}Object(r["a"])(Object.create)&&(X4.prototype=Object.create(KQ.prototype),X4.prototype.constructor=X4),Object.defineProperties(X4.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),X4.prototype.load=function(){const e=Z4(this),t=o5(this),n=r5(this);this._gltf=void 0,this._state=JQ.LOADING;const i=this;this._promise=Promise.all([e,t,n]).then((function(e){if(i.isDestroyed())return;const t=e[0],n=e[1],o=e[2];return Object(r["a"])(i._extension)?i._structuralMetadata=H4({extension:i._extension,schema:o,bufferViews:t,textures:n}):i._structuralMetadata=Y4({extension:i._extensionLegacy,schema:o,bufferViews:t,textures:n}),i._state=JQ.READY,i})).catch((function(e){if(i.isDestroyed())return;i.unload(),i._state=JQ.FAILED;const t="Failed to load structural metadata";return Promise.reject(i.getError(t,e))}))},X4.prototype.process=function(e){if(i["a"].typeOf.object("frameState",e),this._state!==JQ.LOADING)return;const t=this._textureLoaders,n=t.length;for(let i=0;i<n;++i){const n=t[i];n.process(e)}},X4.prototype.unload=function(){a5(this),s5(this),Object(r["a"])(this._schemaLoader)&&r3.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};var c5=X4;const l5={POSITION:"POSITION",NORMAL:"NORMAL",TANGENT:"TANGENT",TEXCOORD:"TEXCOORD",COLOR:"COLOR",JOINTS:"JOINTS",WEIGHTS:"WEIGHTS",FEATURE_ID:"_FEATURE_ID"};function u5(e){switch(e){case l5.POSITION:return"positionMC";case l5.NORMAL:return"normalMC";case l5.TANGENT:return"tangentMC";case l5.TEXCOORD:return"texCoord";case l5.COLOR:return"color";case l5.JOINTS:return"joints";case l5.WEIGHTS:return"weights";case l5.FEATURE_ID:return"featureId";default:throw new a["a"]("semantic is not a valid value.")}}l5.hasSetIndex=function(e){switch(i["a"].typeOf.string("semantic",e),e){case l5.POSITION:case l5.NORMAL:case l5.TANGENT:return!1;case l5.TEXCOORD:case l5.COLOR:case l5.JOINTS:case l5.WEIGHTS:case l5.FEATURE_ID:return!0;default:throw new a["a"]("semantic is not a valid value.")}},l5.fromGltfSemantic=function(e){i["a"].typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/,o=n.exec(e);switch(null!==o&&(t=o[1]),t){case"POSITION":return l5.POSITION;case"NORMAL":return l5.NORMAL;case"TANGENT":return l5.TANGENT;case"TEXCOORD":return l5.TEXCOORD;case"COLOR":return l5.COLOR;case"JOINTS":return l5.JOINTS;case"WEIGHTS":return l5.WEIGHTS;case"_FEATURE_ID":return l5.FEATURE_ID}},l5.fromPntsSemantic=function(e){switch(i["a"].typeOf.string("pntsSemantic",e),e){case"POSITION":case"POSITION_QUANTIZED":return l5.POSITION;case"RGBA":case"RGB":case"RGB565":return l5.COLOR;case"NORMAL":case"NORMAL_OCT16P":return l5.NORMAL;case"BATCH_ID":return l5.FEATURE_ID;default:throw new a["a"]("pntsSemantic is not a valid value.")}},l5.getGlslType=function(e){switch(i["a"].typeOf.string("semantic",e),e){case l5.POSITION:case l5.NORMAL:case l5.TANGENT:return"vec3";case l5.TEXCOORD:return"vec2";case l5.COLOR:return"vec4";case l5.JOINTS:return"ivec4";case l5.WEIGHTS:return"vec4";case l5.FEATURE_ID:return"int";default:throw new a["a"]("semantic is not a valid value.")}},l5.getVariableName=function(e,t){i["a"].typeOf.string("semantic",e);let n=u5(e);return Object(r["a"])(t)&&(n+=`_${t}`),n};var h5=Object.freeze(l5);function d5(){}d5.getFailedLoadFunction=function(e,t,n){return function(e){let i=`Failed to load ${t}: ${n}`;Object(r["a"])(e)&&(i+=`\n${e.message}`);const o=new ye["a"](i);return Object(r["a"])(e)&&(o.stack=`Original stack:\n${e.stack}\nHandler stack:\n${o.stack}`),Promise.reject(o)}},d5.getNodeTransform=function(e){return Object(r["a"])(e.matrix)?e.matrix:Me.fromTranslationQuaternionRotationScale(Object(r["a"])(e.translation)?e.translation:g.ZERO,Object(r["a"])(e.rotation)?e.rotation:Kr.IDENTITY,Object(r["a"])(e.scale)?e.scale:g.ONE)},d5.getAttributeBySemantic=function(e,t,n){const i=e.attributes,o=i.length;for(let a=0;a<o;++a){const e=i[a],o=!Object(r["a"])(n)||e.setIndex===n;if(e.semantic===t&&o)return e}},d5.getAttributeByName=function(e,t){const n=e.attributes,i=n.length;for(let o=0;o<i;++o){const e=n[o];if(e.name===t)return e}},d5.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.positionalLabel===t||i.label===t)return i}},d5.hasQuantizedAttributes=function(e){if(!Object(r["a"])(e))return!1;for(let t=0;t<e.length;t++){const n=e[t];if(Object(r["a"])(n.quantization))return!0}return!1},d5.getAttributeInfo=function(e){const t=e.semantic,n=e.setIndex;let i,o=!1;Object(r["a"])(t)?(i=h5.getVariableName(t,n),o=!0):(i=e.name,i=i.replace(/^_/,""),i=i.toLowerCase());const a=/^color_\d+$/.test(i),s=e.type;let c=rc.getGlslType(s);a&&(c="vec4");const l=Object(r["a"])(e.quantization);let u;return l&&(u=a?"vec4":rc.getGlslType(e.quantization.type)),{attribute:e,isQuantized:l,variableName:i,hasSemantic:o,glslType:c,quantizedGlslType:u}};const f5=new g,p5=new g;d5.getPositionMinMax=function(e,t,n){const i=d5.getAttributeBySemantic(e,"POSITION");let o=i.max,a=i.min;return Object(r["a"])(n)&&Object(r["a"])(t)&&(a=g.add(a,t,p5),o=g.add(o,n,f5)),{min:a,max:o}},d5.getAxisCorrectionMatrix=function(e,t,n){return n=Me.clone(Me.IDENTITY,n),e===IX.Y?n=Me.clone(IX.Y_UP_TO_Z_UP,n):e===IX.X&&(n=Me.clone(IX.X_UP_TO_Z_UP,n)),t===IX.Z&&(n=Me.multiplyTransformation(n,IX.Z_UP_TO_X_UP,n)),n};const m5=new ce;d5.getCullFace=function(e,t){if(!Eu.isTriangles(t))return HN.BACK;const n=Me.getMatrix3(e,m5);return ce.determinant(n)<0?HN.FRONT:HN.BACK},d5.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,"_");return t=t.replace(/^gl_/,""),/^\d/.test(t)&&(t=`_${t}`),t},d5.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_techniques_webgl:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0},d5.checkSupportedExtensions=function(e){const t=e.length;for(let n=0;n<t;n++){const t=e[n];if(!d5.supportedExtensions[t])throw new ye["a"](`Unsupported glTF Extension: ${t}`)}};var _5=d5;const g5={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){i["a"].typeOf.string("gltfSemantic",e);let t=e;const n=/^(\w+)_\d+$/,o=n.exec(e);switch(null!==o&&(t=o[1]),t){case"TRANSLATION":return g5.TRANSLATION;case"ROTATION":return g5.ROTATION;case"SCALE":return g5.SCALE;case"_FEATURE_ID":return g5.FEATURE_ID}}};var b5=Object.freeze(g5);const y5=65534,v5=255;function O5(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.triangleIndices,n=e.outlineIndices,r=e.originalVertexCount;i["a"].typeOf.object("options.triangleIndices",t),i["a"].typeOf.object("options.outlineIndices",n),i["a"].typeOf.number("options.originalVertexCount",r),this._triangleIndices=t,this._originalVertexCount=r,this._edges=new x5(n,r),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],A5(this)}function A5(e){let t=e._triangleIndices;const n=e._edges,i=[],o=e._extraVertices,a=e._originalVertexCount,s={};for(let c=0;c<t.length;c+=3){let e=t[c],l=t[c+1],u=t[c+2];const h=!1,d=h||n.hasEdge(e,l),f=h||n.hasEdge(l,u),p=h||n.hasEdge(u,e);let m=w5(i,e,l,u,d,f,p);while(Object(r["a"])(m)){let n=s[m];if(!Object(r["a"])(n)){n=a+o.length;let e=m;while(e>=a)e=o[e-a];o.push(e),s[m]=n}n>y5&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):n>v5&&t instanceof Uint8Array&&(t=new Uint16Array(t)),m===e?(e=n,t[c]=n):m===l?(l=n,t[c+1]=n):(u=n,t[c+2]=n),m=w5(i,e,l,u,d,f,p)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}function w5(e,t,n,i,o,r,a){const s=a?1:0,c=o?1:0,l=0,u=T5(e,t,s,c,l);if(0===u)return t;const h=0,d=o?1:0,f=r?1:0,p=T5(e,n,h,d,f);if(0===p)return n;const m=a?1:0,_=0,g=r?1:0,b=T5(e,i,m,_,g);if(0===b)return i;const y=u&p&b;let v,O,A;if(1&y)v=0,O=1,A=2;else if(2&y)v=0,A=1,O=2;else if(4&y)O=0,v=1,A=2;else if(8&y)O=0,A=1,v=2;else if(16&y)A=0,v=1,O=2;else{if(!(32&y)){const e=C5(u),o=C5(p),r=C5(b);return e<o&&e<r?t:o<r?n:i}A=0,O=1,v=2}const w=3*t;e[w+v]=s,e[w+O]=c,e[w+A]=l;const T=3*n;e[T+v]=h,e[T+O]=d,e[T+A]=f;const C=3*i;e[C+v]=m,e[C+O]=_,e[C+A]=g}function T5(e,t,n,i,o){const a=3*t,s=e[a],c=e[a+1],l=e[a+2];return Object(r["a"])(s)?(s===n&&c===i&&l===o)<<0|(s===n&&c===o&&l===i)<<1|(s===i&&c===n&&l===o)<<2|(s===i&&c===o&&l===n)<<3|(s===o&&c===n&&l===i)<<4|(s===o&&c===i&&l===n)<<5:63}function C5(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function E5(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function x5(e,t){this._originalVertexCount=t,this._edges=new Set;for(let n=0;n<e.length;n+=2){const t=e[n],i=e[n+1],o=Math.min(t,i),r=Math.max(t,i),a=o*this._originalVertexCount+r;this._edges.add(a)}}Object.defineProperties(O5.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}}),O5.prototype.updateAttribute=function(e){const t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=e.constructor,a=new r(e.length+o*i);a.set(e);for(let s=0;s<o;s++){const e=t[s]*i,o=n+s*i;for(let t=0;t<i;t++)a[o+t]=a[e+t]}return a},O5.createTexture=function(e){let t=e.cache.modelOutliningCache;if(Object(r["a"])(t)||(t=e.cache.modelOutliningCache={}),Object(r["a"])(t.outlineTexture))return t.outlineTexture;const n=Math.min(4096,YN.maximumTextureSize);let i=n;const o=E5(i),a=[];while(i>1)i>>=1,a.push(E5(i));const s=new lB({context:e,source:{arrayBufferView:o,mipLevels:a},width:n,height:1,pixelFormat:fx.LUMINANCE,sampler:new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.LINEAR_MIPMAP_LINEAR,magnificationFilter:ZN.LINEAR})});return t.outlineTexture=s,s},x5.prototype.hasEdge=function(e,t){const n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};var S5=O5;function I5(e){i["a"].typeOf.object("attribute",e),this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function D5(e){i["a"].typeOf.object("indices",e),this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1}function P5(e){i["a"].typeOf.object("primitive",e),this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0}function j5(e){const t=e.primitive,n=t.indices,i=t.attributes[0].count,o=new S5({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=o.updatedTriangleIndices,n.indexDatatype=ll.fromTypedArray(n.typedArray);const r=R5(o.outlineCoordinates),a=new I5(r);a.loadBuffer=!0,a.loadTypedArray=!1,e.attributePlans.push(a),t.outlineCoordinates=a.attribute;const s=e.attributePlans,c=e.attributePlans.length;for(let l=0;l<c;l++){const e=s[l].attribute;e.typedArray=o.updateAttribute(e.typedArray)}}function R5(e){const t=new _2.Attribute;return t.name="_OUTLINE_COORDINATES",t.typedArray=e,t.componentDatatype=Ks.FLOAT,t.type=rc.VEC3,t.normalized=!1,t.count=e.length/3,t}function L5(e,t){M5(e.attributePlans,t),Object(r["a"])(e.indicesPlan)&&N5(e.indicesPlan,t)}function M5(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i],o=n.attribute,r=o.typedArray;if(n.loadBuffer){const e=NV.createVertexBuffer({typedArray:r,context:t,usage:LV.STATIC_DRAW});e.vertexArrayDestroyable=!1,o.buffer=e}n.loadTypedArray||(o.typedArray=void 0)}}function N5(e,t){const n=e.indices;if(e.loadBuffer){const e=NV.createIndexBuffer({typedArray:n.typedArray,context:t,usage:LV.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=e,e.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}P5.prototype.postProcess=function(e){this.needsOutlines&&(j5(this),L5(this,e))},P5.AttributeLoadPlan=I5,P5.IndicesLoadPlan=D5;var B5=P5;function F5(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.webp=Object(o["a"])(e.webp,!1),this.basis=Object(o["a"])(e.basis,!1)}var z5=F5;const k5=_2.Attribute,U5=_2.Indices,V5=_2.FeatureIdAttribute,H5=_2.FeatureIdTexture,G5=_2.FeatureIdImplicitRange,W5=_2.MorphTarget,q5=_2.Primitive,Y5=_2.Instances,X5=_2.Skin,K5=_2.Node,$5=_2.AnimatedPropertyType,J5=_2.AnimationSampler,Q5=_2.AnimationTarget,Z5=_2.AnimationChannel,e6=_2.Animation,t6=_2.ArticulationStage,n6=_2.Articulation,i6=_2.Asset,o6=_2.Scene,r6=_2.Components,a6=_2.MetallicRoughness,s6=_2.SpecularGlossiness,c6=_2.Material,l6={NOT_LOADED:0,LOADING:1,LOADED:2,PROCESSING:3,POST_PROCESSING:4,PROCESSED:5,READY:6,FAILED:7,UNLOADED:8};function u6(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.gltfResource;let n=e.baseResource;const a=e.typedArray,s=Object(o["a"])(e.releaseGltfJson,!1),c=Object(o["a"])(e.asynchronous,!0),l=Object(o["a"])(e.incrementallyLoadTextures,!0),u=Object(o["a"])(e.upAxis,IX.Y),h=Object(o["a"])(e.forwardAxis,IX.Z),d=Object(o["a"])(e.loadAttributesAsTypedArray,!1),f=Object(o["a"])(e.loadAttributesFor2D,!1),p=Object(o["a"])(e.loadIndicesForWireframe,!1),m=Object(o["a"])(e.loadPrimitiveOutline,!0),_=Object(o["a"])(e.loadForClassification,!1),g=Object(o["a"])(e.renameBatchIdSemantic,!1);i["a"].typeOf.object("options.gltfResource",t),n=Object(r["a"])(n)?n:t.clone(),this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=n,this._typedArray=a,this._releaseGltfJson=s,this._asynchronous=c,this._incrementallyLoadTextures=l,this._upAxis=u,this._forwardAxis=h,this._loadAttributesAsTypedArray=d,this._loadAttributesFor2D=f,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=m,this._loadForClassification=_,this._renameBatchIdSemantic=g,this._hasKhrMeshQuantization=!1,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=l6.NOT_LOADED,this._textureState=l6.NOT_LOADED,this._promise=void 0,this._texturesLoadedPromise=void 0,this._process=function(e,t){},this._processTextures=function(e,t){},this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._structuralMetadataLoader=void 0,this._postProcessBuffers=[],this._components=void 0}function h6(e,t){e.unload();const n="Failed to load glTF";return t=e.getError(n,t),Promise.reject(t)}function d6(e,t){const n=e._bufferViewLoaders,i=n.length;for(let r=0;r<i;++r)n[r].process(t);const o=e._geometryLoaders,a=o.length;for(let r=0;r<a;++r)o[r].process(t);Object(r["a"])(e._structuralMetadataLoader)&&e._structuralMetadataLoader.process(t)}function f6(e,t){const n=e._primitiveLoadPlans,i=n.length;for(let o=0;o<i;o++){const i=n[o];i.postProcess(t),i.needsOutlines&&p6(e,i)}}function p6(e,t){const n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;Object(r["a"])(o)&&n.push(o.buffer);const a=i.attributes,s=a.length;for(let l=0;l<s;l++){const e=a[l];Object(r["a"])(e.buffer)&&n.push(e.buffer)}const c=i.indices;Object(r["a"])(c)&&Object(r["a"])(c.buffer)&&n.push(c.buffer)}function m6(e,t,n,i,o,r,a,s){const c=t.accessors[n],l=c.bufferView,u=r3.loadVertexBuffer({gltf:t,gltfResource:e._gltfResource,baseResource:e._baseResource,bufferViewId:l,draco:o,attributeSemantic:i,accessorId:n,asynchronous:e._asynchronous,dequantize:r,loadBuffer:a,loadTypedArray:s});return e._geometryLoaders.push(u),u}function _6(e,t,n,i,o,r){const a=r3.loadIndexBuffer({gltf:t,accessorId:n,gltfResource:e._gltfResource,baseResource:e._baseResource,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r});return e._geometryLoaders.push(a),a}function g6(e,t,n){const i=r3.loadBufferView({gltf:t,bufferViewId:n,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(i),i}function b6(e,t,n){let i=t.byteOffset;const o=kZ(e,t),r=t.count,a=FZ(t.type),s=t.componentType,c=Ks.getSizeInBytes(s),l=c*a,u=r*a;if(o===l)return n=new Uint8Array(n),Ks.createArrayBufferView(s,n.buffer,n.byteOffset+i,u);const h=Ks.createTypedArray(s,u),d=new DataView(n.buffer),f=new Array(a),p=u0(t.componentType);i=n.byteOffset+i;for(let m=0;m<r;++m){p(d,i,a,c,f);for(let e=0;e<a;++e)h[m*a+e]=f[e];i+=o}return h}function y6(e,t){const n=e.type;if(n===rc.SCALAR)return t.fill(0);const i=rc.getMathType(n);return t.fill(i.clone(i.ZERO))}function v6(e,t,n,i){const o=e.type,r=e.count;if(o===rc.SCALAR)for(let a=0;a<r;a++)n[a]=t[a];else if(o===rc.VEC4&&i)for(let a=0;a<r;a++)n[a]=Kr.unpack(t,4*a);else{const e=rc.getMathType(o),i=rc.getNumberOfComponents(o);for(let o=0;o<r;o++)n[o]=e.unpack(t,o*i)}return n}function O6(e,t,n,i){const a=t.accessors[n],s=a.count,c=new Array(s),l=a.bufferView;if(Object(r["a"])(l)){const n=g6(e,t,l),r=n.promise.then((function(n){if(e.isDestroyed())return;const r=n.typedArray,s=b6(t,a,r);i=Object(o["a"])(i,!1),v6(a,s,c,i)}));return e._loaderPromises.push(r),c}return y6(a,c)}function A6(e,t){if(Object(r["a"])(t))return e===Number?t[0]:e.unpack(t)}function w6(e){return e===Number?0:new e}function T6(e){switch(e){case Ks.BYTE:return 127;case Ks.UNSIGNED_BYTE:return 255;case Ks.SHORT:return 32767;case Ks.UNSIGNED_SHORT:return 65535;default:return 1}}Object(r["a"])(Object.create)&&(u6.prototype=Object.create(KQ.prototype),u6.prototype.constructor=u6),Object.defineProperties(u6.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}},texturesLoadedPromise:{get:function(){return this._texturesLoadedPromise}}}),u6.prototype.load=function(){const e=r3.loadGltfJson({gltfResource:this._gltfResource,baseResource:this._baseResource,typedArray:this._typedArray,gltfJson:this._gltfJson});this._gltfJsonLoader=e,this._state=l6.LOADING,this._textureState=l6.LOADING;const t=this;let n;const i=new Promise((function(e,i){n=new Promise((function(n,o){t._process=function(t,n){if(Or.supportsWebP.initialized){if(t._state===l6.LOADED){t._state=l6.PROCESSING;const e=new z5({webp:Or.supportsWebP(),basis:n.context.supportsBasis});let a;a=Object(r["a"])(t._gltfJsonLoader)?t._gltfJsonLoader.gltf:t._gltfJson,b8(t,a,e,n,i,o),Object(r["a"])(t._gltfJsonLoader)&&t._releaseGltfJson&&(r3.unload(t._gltfJsonLoader),t._gltfJsonLoader=void 0)}t._state===l6.PROCESSING&&d6(t,n),t._state===l6.POST_PROCESSING&&(f6(t,n.context),t._state=l6.PROCESSED),t._state===l6.PROCESSED&&(v8(t),t._typedArray=void 0,t._state=l6.READY,e(t))}else Or.supportsWebP.initialize()},t._processTextures=function(e,t){if(e._textureState===l6.LOADED&&(e._textureState=l6.PROCESSING),e._textureState===l6.PROCESSING){let n;const i=e._textureLoaders,o=i.length;for(n=0;n<o;++n)i[n].process(t)}e._textureState===l6.PROCESSED&&(e._textureState=l6.READY,n(e))}}))}));return this._promise=e.promise.then((function(){if(!t.isDestroyed())return t._state=l6.LOADED,t._textureState=l6.LOADED,i})).catch((function(e){if(!t.isDestroyed())return t._state=l6.FAILED,t._textureState=l6.FAILED,h6(t,e)})),this._texturesLoadedPromise=n.catch((function(e){if(!t.isDestroyed())return t._textureState=l6.FAILED,h6(t,e)})),this._promise},u6.prototype.process=function(e){i["a"].typeOf.object("frameState",e),this._process(this,e),this._processTextures(this,e)};const C6={VEC2:new Gt(-1,-1),VEC3:new g(-1,-1,-1),VEC4:new be(-1,-1,-1,-1)};function E6(e,t){const n=T6(e.componentDatatype),i=C6[e.type];let o=e.min;Object(r["a"])(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let a=e.max;Object(r["a"])(a)&&(a=t.divideByScalar(a,n,a),a=t.maximumByComponent(a,i,a)),e.min=o,e.max=a}function x6(e,t,n,i,r,a){const s=e.accessors[t],c=rc.getMathType(s.type),l=Object(o["a"])(s.normalized,!1),u=new k5;u.name=n,u.semantic=i,u.setIndex=r,u.constant=w6(c),u.componentDatatype=s.componentType,u.normalized=l,u.count=s.count,u.type=s.type,u.min=A6(c,s.min),u.max=A6(c,s.max),u.byteOffset=s.byteOffset,u.byteStride=kZ(e,s);const h=u.semantic===h5.POSITION||u.semantic===h5.NORMAL||u.semantic===h5.TANGENT||u.semantic===h5.TEXCOORD;return a&&l&&h&&E6(u,c),u}function S6(e){const t=/^\w+_(\d+)$/,n=t.exec(e);if(null!==n)return parseInt(n[1])}const I6={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function D6(e,t,n){let i=n;!e._renameBatchIdSemantic||"_BATCHID"!==n&&"BATCHID"!==n||(i="_FEATURE_ID_0");const o=t.fromGltfSemantic(i),r=I6;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function P6(e){const t=e===h5.POSITION,n=e===h5.FEATURE_ID,i=e===h5.TEXCOORD;return t||n||i}function j6(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){const n=Object(r["a"])(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=Ks.createArrayBufferView(n,t.typedArray.buffer)}}function R6(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){const r=i.typedArray;n.typedArray=b6(e,t,r),o||(n.byteOffset=0,n.byteStride=void 0)}}function L6(e,t,n,i,o,a,s,c){const l=t.accessors[n],u=l.bufferView,h=i.gltfSemantic,d=i.renamedSemantic,f=i.modelSemantic,p=Object(r["a"])(f)?S6(d):void 0,m=h,_=x6(t,n,m,f,p,e._hasKhrMeshQuantization);if(!Object(r["a"])(o)&&!Object(r["a"])(u))return _;const g=m6(e,t,n,h,o,a,s,c),b=g.promise.then((function(n){e.isDestroyed()||(Object(r["a"])(o)&&Object(r["a"])(o.attributes)&&Object(r["a"])(o.attributes[h])?j6(_,n,s,c):R6(t,l,_,n,s,c))}));return e._loaderPromises.push(b),_}function M6(e,t,n,i,o,r,a,s){const c=i.modelSemantic,l=c===h5.POSITION,u=c===h5.FEATURE_ID,h=l&&!r&&e._loadAttributesFor2D&&!s.scene3DOnly,d=e._loadForClassification&&u,f=e._loadAttributesAsTypedArray,p=!f,m=f||h||d,_=!a&&p,g=!!a||m,b=L6(e,t,n,i,o,!1,_,g),y=new B5.AttributeLoadPlan(b);return y.loadBuffer=p,y.loadTypedArray=m,y}function N6(e,t,n,i,o,a){const s=Object(r["a"])(i.ROTATION),c=Object(r["a"])(i.TRANSLATION)&&Object(r["a"])(t.accessors[i.TRANSLATION].min)&&Object(r["a"])(t.accessors[i.TRANSLATION].max),l=D6(e,b5,o),u=l.modelSemantic,h=u===b5.TRANSLATION||u===b5.ROTATION||u===b5.SCALE,d=u===b5.TRANSLATION,f=e._loadAttributesAsTypedArray||s&&h||!a.context.instancedArrays,p=!f,m=e._loadAttributesFor2D&&!a.scene3DOnly,_=d&&(!c||m),g=f||_;return L6(e,t,n,l,void 0,!0,p,g)}function B6(e,t,n,i,o,a,s){const c=t.accessors[n],l=c.bufferView;if(!Object(r["a"])(i)&&!Object(r["a"])(l))return;const u=new U5;u.count=c.count;const h=e._loadAttributesAsTypedArray,d=e._loadIndicesForWireframe&&!s.context.webgl2,f=e._loadForClassification&&o,p=h,m=!p,_=h||d||f,g=!a&&m,b=!!a||_,y=_6(e,t,n,i,g,b),v=y.promise.then((function(t){e.isDestroyed()||(u.indexDatatype=t.indexDatatype,u.buffer=t.buffer,u.typedArray=t.typedArray)}));e._loaderPromises.push(v);const O=new B5.IndicesLoadPlan(u);return O.loadBuffer=m,O.loadTypedArray=_,O}function F6(e,t,n,i,o){const a=y2.getImageIdFromTexture({gltf:t,textureId:n.index,supportedImageFormats:i});if(!Object(r["a"])(a))return;const s=r3.loadTexture({gltf:t,textureInfo:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:i,asynchronous:e._asynchronous});e._textureLoaders.push(s);const c=y2.createModelTextureReader({textureInfo:n}),l=s.promise.then((function(t){e.isUnloaded()||e.isDestroyed()||(c.texture=t.texture,Object(r["a"])(o)&&(c.texture.sampler=o))}));return e._texturesPromises.push(l),c}function z6(e,t,n,i){const a=new c6,s=Object(o["a"])(n.extensions,o["a"].EMPTY_OBJECT),c=s.KHR_materials_pbrSpecularGlossiness,l=n.pbrMetallicRoughness;if(a.unlit=Object(r["a"])(s.KHR_materials_unlit),Object(r["a"])(c)){const n=new s6;a.specularGlossiness=n,Object(r["a"])(c.diffuseTexture)&&(n.diffuseTexture=F6(e,t,c.diffuseTexture,i)),Object(r["a"])(c.specularGlossinessTexture)&&Object(r["a"])(c.specularGlossinessTexture)&&(n.specularGlossinessTexture=F6(e,t,c.specularGlossinessTexture,i)),n.diffuseFactor=A6(be,c.diffuseFactor),n.specularFactor=A6(g,c.specularFactor),n.glossinessFactor=c.glossinessFactor,a.pbrSpecularGlossiness=c}else if(Object(r["a"])(l)){const n=new a6;Object(r["a"])(l.baseColorTexture)&&(n.baseColorTexture=F6(e,t,l.baseColorTexture,i)),Object(r["a"])(l.metallicRoughnessTexture)&&(n.metallicRoughnessTexture=F6(e,t,l.metallicRoughnessTexture,i)),n.baseColorFactor=A6(be,l.baseColorFactor),n.metallicFactor=l.metallicFactor,n.roughnessFactor=l.roughnessFactor,a.metallicRoughness=n}return Object(r["a"])(n.emissiveTexture)&&(a.emissiveTexture=F6(e,t,n.emissiveTexture,i)),Object(r["a"])(n.normalTexture)&&!e._loadForClassification&&(a.normalTexture=F6(e,t,n.normalTexture,i)),Object(r["a"])(n.occlusionTexture)&&(a.occlusionTexture=F6(e,t,n.occlusionTexture,i)),a.emissiveFactor=A6(g,n.emissiveFactor),a.alphaMode=n.alphaMode,a.alphaCutoff=n.alphaCutoff,a.doubleSided=n.doubleSided,a}function k6(e,t){const n=new V5;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function U6(e,t,n,i){const o=new V5,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=S6(r.attribute),o.positionalLabel=i,o}function V6(e,t){const n=new G5;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function H6(e,t,n,i){const r=new G5,a=e.featureIds;r.propertyTableId=t,r.featureCount=n,r.offset=Object(o["a"])(a.constant,0);const s=Object(o["a"])(a.divisor,0);return r.repeat=0===s?void 0:s,r.positionalLabel=i,r}function G6(e,t,n,i,o){const a=new H5;a.featureCount=n.featureCount,a.nullFeatureId=n.nullFeatureId,a.propertyTableId=n.propertyTable,a.label=n.label,a.positionalLabel=o;const s=n.texture;a.textureReader=F6(e,t,s,i,rB.NEAREST);const c=Object(r["a"])(s.channels)?s.channels:[0],l=c.map((function(e){return"rgba".charAt(e)})).join("");return a.textureReader.channels=l,a}function W6(e,t,n,i,o,r,a){const s=new H5,c=n.featureIds,l=c.texture;return s.featureCount=r,s.propertyTableId=i,s.textureReader=F6(e,t,l,o,rB.NEAREST),s.textureReader.channels=c.channels,s.positionalLabel=a,s}function q6(e,t,n,i,o,r){const a=new W5,s=void 0,c=!1;for(const l in n)if(n.hasOwnProperty(l)){const u=n[l],h=D6(e,h5,l),d=M6(e,t,u,h,s,c,i,r);a.attributes.push(d.attribute),o.attributePlans.push(d)}return a}function Y6(e,t,n,i,a,s){const c=new q5,l=new B5(c);e._primitiveLoadPlans.push(l);const u=n.material;Object(r["a"])(u)&&(c.material=z6(e,t,t.materials[u],a));const h=Object(o["a"])(n.extensions,o["a"].EMPTY_OBJECT);let d=!1;const f=h.CESIUM_primitive_outline;e._loadPrimitiveOutline&&Object(r["a"])(f)&&(d=!0,l.needsOutlines=!0,l.outlineIndices=X6(e,t,f,l));const p=e._loadForClassification,m=h.KHR_draco_mesh_compression;let _=!1;const g=n.attributes;if(Object(r["a"])(g))for(const o in g)if(g.hasOwnProperty(o)){const n=g[o],r=D6(e,h5,o),a=r.modelSemantic;if(p&&!P6(a))continue;a===h5.FEATURE_ID&&(_=!0);const u=M6(e,t,n,r,m,i,d,s);l.attributePlans.push(u),c.attributes.push(u.attribute)}const b=n.targets;if(Object(r["a"])(b)&&!p){const n=b.length;for(let i=0;i<n;++i)c.morphTargets.push(q6(e,t,b[i],d,l,s))}const y=n.indices;if(Object(r["a"])(y)){const n=B6(e,t,y,m,_,d,s);Object(r["a"])(n)&&(l.indicesPlan=n,c.indices=n.indices)}const v=h.EXT_structural_metadata,O=h.EXT_mesh_features,A=h.EXT_feature_metadata,w=Object(r["a"])(A);Object(r["a"])(O)?K6(e,t,c,O,a):w&&$6(e,t,c,A,a),Object(r["a"])(v)?J6(c,v):w&&Q6(e,c,A);const T=n.mode;if(p&&T!==Eu.TRIANGLES)throw new ye["a"]("Only triangle meshes can be used for classification.");return c.primitiveType=T,c}function X6(e,t,n){const i=n.indices,o=!1;return O6(e,t,i,o)}function K6(e,t,n,i,o){let a;a=Object(r["a"])(i)&&Object(r["a"])(i.featureIds)?i.featureIds:[];for(let s=0;s<a.length;s++){const i=a[s],c=`featureId_${s}`;let l;l=Object(r["a"])(i.texture)?G6(e,t,i,o,c):Object(r["a"])(i.attribute)?k6(i,c):V6(i,c),n.featureIds.push(l)}}function $6(e,t,n,i,o){const a=t.extensions.EXT_feature_metadata.featureTables;let s=0;const c=i.featureIdAttributes;if(Object(r["a"])(c)){const t=c.length;for(let i=0;i<t;++i){const t=c[i],o=t.featureTable,l=e._sortedPropertyTableIds.indexOf(o),u=a[o].count,h=`featureId_${s}`;let d;s++,d=Object(r["a"])(t.featureIds.attribute)?U6(t,l,u,h):H6(t,l,u,h),n.featureIds.push(d)}}const l=i.featureIdTextures;if(Object(r["a"])(l)){const i=l.length;for(let r=0;r<i;++r){const i=l[r],c=i.featureTable,u=e._sortedPropertyTableIds.indexOf(c),h=a[c].count,d=`featureId_${s}`;s++;const f=W6(e,t,i,u,o,h,d);n.featureIds.push(f)}}}function J6(e,t){Object(r["a"])(t)&&(Object(r["a"])(t.propertyTextures)&&(e.propertyTextureIds=t.propertyTextures),Object(r["a"])(t.propertyAttributes)&&(e.propertyAttributeIds=t.propertyAttributes))}function Q6(e,t,n){Object(r["a"])(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map((function(t){return e._sortedFeatureTextureIds.indexOf(t)})))}function Z6(e,t,n,i){const a=n.EXT_mesh_gpu_instancing,s=new Y5,c=a.attributes;if(Object(r["a"])(c))for(const o in c)if(c.hasOwnProperty(o)){const n=c[o];s.attributes.push(N6(e,t,n,c,o,i))}const l=Object(o["a"])(a.extensions,o["a"].EMPTY_OBJECT),u=n.EXT_instance_features,h=l.EXT_feature_metadata;return Object(r["a"])(u)?e8(s,u):Object(r["a"])(h)&&t8(t,s,h,e._sortedPropertyTableIds),s}function e8(e,t){const n=t.featureIds;for(let i=0;i<n.length;i++){const t=n[i],o=`instanceFeatureId_${i}`;let a;a=Object(r["a"])(t.attribute)?k6(t,o):V6(t,o),e.featureIds.push(a)}}function t8(e,t,n,i){const o=e.extensions.EXT_feature_metadata.featureTables,a=n.featureIdAttributes;if(Object(r["a"])(a)){const e=a.length;for(let n=0;n<e;++n){const e=a[n],s=e.featureTable,c=i.indexOf(s),l=o[s].count,u=`instanceFeatureId_${n}`;let h;h=Object(r["a"])(e.featureIds.attribute)?U6(e,c,l,u):H6(e,c,l,u),t.featureIds.push(h)}}}function n8(e,t,n,i,a){const s=new K5;s.name=n.name,s.matrix=A6(Me,n.matrix),s.translation=A6(g,n.translation),s.rotation=A6(Kr,n.rotation),s.scale=A6(g,n.scale);const c=Object(o["a"])(n.extensions,o["a"].EMPTY_OBJECT),l=c.EXT_mesh_gpu_instancing,u=c.AGI_articulations;if(Object(r["a"])(l)){if(e._loadForClassification)throw new ye["a"]("Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.");s.instances=Z6(e,t,c,a)}Object(r["a"])(u)&&(s.articulationName=u.articulationName);const h=n.mesh;if(Object(r["a"])(h)){const c=t.meshes[h],l=c.primitives,u=l.length;for(let n=0;n<u;++n)s.primitives.push(Y6(e,t,l[n],Object(r["a"])(s.instances),i,a));const d=Object(o["a"])(n.weights,c.weights),f=s.primitives[0].morphTargets,p=f.length;s.morphWeights=Object(r["a"])(d)?d.slice():new Array(p).fill(0)}return s}function i8(e,t,n,i){let o,a;const s=t.nodes.length,c=new Array(s);for(o=0;o<s;++o){const r=n8(e,t,t.nodes[o],n,i);r.index=o,c[o]=r}for(o=0;o<s;++o){const e=t.nodes[o].children;if(Object(r["a"])(e)){const t=e.length;for(a=0;a<t;++a)c[o].children.push(c[e[a]])}}return c}function o8(e,t,n,i){const o=new X5,a=n.joints,s=a.length,c=new Array(s);for(let r=0;r<s;++r)c[r]=i[a[r]];o.joints=c;const l=n.inverseBindMatrices;return Object(r["a"])(l)?o.inverseBindMatrices=O6(e,t,l):o.inverseBindMatrices=new Array(s).fill(Me.IDENTITY),o}function r8(e,t,n){const i=t.skins;if(e._loadForClassification||!Object(r["a"])(i))return[];const o=t.skins.length,a=new Array(o);for(let r=0;r<o;++r){const i=o8(e,t,t.skins[r],n);i.index=r,a[r]=i}const s=n.length;for(let c=0;c<s;++c){const e=t.nodes[c].skin;Object(r["a"])(e)&&(n[c].skin=a[e])}return a}function a8(e,t,n,i,o){const r=new c5({gltf:t,extension:n,extensionLegacy:i,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:o,asynchronous:e._asynchronous});return r.load(),e._structuralMetadataLoader=r,r}function s8(e,t,n){const i=new J5,r=n.input;i.input=O6(e,t,r);const a=n.interpolation;i.interpolation=Object(o["a"])(zC[a],zC.LINEAR);const s=n.output;return i.output=O6(e,t,s,!0),i}function c8(e,t){const n=new Q5,i=e.node;if(!Object(r["a"])(i))return;n.node=t[i];const o=e.path.toUpperCase();return n.path=$5[o],n}function l8(e,t,n){const i=new Z5,o=e.sampler;return i.sampler=t[o],i.target=c8(e.target,n),i}function u8(e,t,n,i){let o;const r=new e6;r.name=n.name;const a=n.samplers,s=a.length,c=new Array(s);for(o=0;o<s;o++){const n=s8(e,t,a[o]);n.index=o,c[o]=n}const l=n.channels,u=l.length,h=new Array(u);for(o=0;o<u;o++)h[o]=l8(l[o],c,i);return r.samplers=c,r.channels=h,r}function h8(e,t,n){const i=t.animations;if(e._loadForClassification||!Object(r["a"])(i))return[];const o=t.animations.length,a=new Array(o);for(let r=0;r<o;++r){const i=u8(e,t,t.animations[r],n);i.index=r,a[r]=i}return a}function d8(e){const t=new t6;t.name=e.name;const n=e.type.toUpperCase();return t.type=du[n],t.minimumValue=e.minimumValue,t.maximumValue=e.maximumValue,t.initialValue=e.initialValue,t}function f8(e){const t=new n6;t.name=e.name;const n=e.stages,i=n.length,o=new Array(i);for(let r=0;r<i;r++){const e=d8(n[r]);o[r]=e}return t.stages=o,t}function p8(e){const t=Object(o["a"])(e.extensions,o["a"].EMPTY_OBJECT),n=t.AGI_articulations;if(!Object(r["a"])(n))return[];const i=n.articulations;if(!Object(r["a"])(i))return[];const a=i.length,s=new Array(a);for(let o=0;o<a;o++){const e=f8(i[o]);s[o]=e}return s}function m8(e){let t;return Object(r["a"])(e.scenes)&&Object(r["a"])(e.scene)&&(t=e.scenes[e.scene].nodes),t=Object(o["a"])(t,e.nodes),t=Object(r["a"])(t)?t:[],t}function _8(e,t){const n=new o6,i=m8(e);return n.nodes=i.map((function(e){return t[e]})),n}const g8=new g;function b8(e,t,n,i,a,s){const c=t.asset.version;if("1.0"!==c&&"2.0"!==c){const t=e._gltfResource.url;throw new ye["a"](`Failed to load ${t}: \nUnsupported glTF version: ${c}`)}const l=t.extensionsRequired;Object(r["a"])(l)&&(_5.checkSupportedExtensions(l),e._hasKhrMeshQuantization=l.includes("KHR_mesh_quantization"));const u=Object(o["a"])(t.extensions,o["a"].EMPTY_OBJECT),h=u.EXT_structural_metadata,d=u.EXT_feature_metadata,f=u.CESIUM_RTC;if(Object(r["a"])(d)){const t=d.featureTables,n=d.featureTextures,i=Object(r["a"])(t)?t:[],o=Object(r["a"])(n)?n:[];e._sortedPropertyTableIds=Object.keys(i).sort(),e._sortedFeatureTextureIds=Object.keys(o).sort()}const p=i8(e,t,n,i),m=r8(e,t,p),_=h8(e,t,p),b=p8(t),y=_8(t,p),v=new r6,O=new i6,A=t.asset.copyright;if(Object(r["a"])(A)){const e=A.split(";").map((function(e){return new hn(e.trim())}));O.credits=e}if(v.asset=O,v.scene=y,v.nodes=p,v.skins=m,v.animations=_,v.articulations=b,v.upAxis=e._upAxis,v.forwardAxis=e._forwardAxis,Object(r["a"])(f)){const e=g.fromArray(f.center,0,g8);v.transform=Me.fromTranslation(e,v.transform)}if(e._components=v,Object(r["a"])(h)||Object(r["a"])(d)){const i=a8(e,t,h,d,n),o=i.promise.then((function(t){e.isDestroyed()||(v.structuralMetadata=t.structuralMetadata)}));e._loaderPromises.push(o)}const w=[];w.push.apply(w,e._loaderPromises),e._incrementallyLoadTextures||w.push.apply(w,e._texturesPromises),Promise.all(w).then((function(){e.isDestroyed()||(e._state=l6.POST_PROCESSING)})).catch(a),Promise.all(e._texturesPromises).then((function(){e.isDestroyed()||(e._textureState=l6.PROCESSED)})).catch(s)}function y8(e){const t=e._textureLoaders,n=t.length;for(let i=0;i<n;++i)r3.unload(t[i]);e._textureLoaders.length=0}function v8(e){const t=e._bufferViewLoaders,n=t.length;for(let i=0;i<n;++i)r3.unload(t[i]);e._bufferViewLoaders.length=0}function O8(e){const t=e._geometryLoaders,n=t.length;for(let i=0;i<n;++i)r3.unload(t[i]);e._geometryLoaders.length=0}function A8(e){const t=e._postProcessBuffers,n=t.length;for(let i=0;i<n;i++){const e=t[i];e.isDestroyed()||e.destroy()}t.length=0}function w8(e){Object(r["a"])(e._structuralMetadataLoader)&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0)}u6.prototype.isUnloaded=function(){return this._state===l6.UNLOADED},u6.prototype.unload=function(){Object(r["a"])(this._gltfJsonLoader)&&r3.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,y8(this),v8(this),O8(this),A8(this),w8(this),this._components=void 0,this._typedArray=void 0,this._state=l6.UNLOADED};var T8=u6;function C8(e,t,n){const i=e._gl;i.framebufferTexture2D(i.FRAMEBUFFER,t,n._target,n._texture,0)}function E8(e,t,n){const i=e._gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,t,i.RENDERBUFFER,n._getRenderbuffer())}function x8(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.context;i["a"].defined("options.context",t);const n=t._gl,s=YN.maximumColorAttachments;if(this._gl=n,this._framebuffer=n.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=Object(o["a"])(e.destroyAttachments,!0),Object(r["a"])(e.colorTextures)&&Object(r["a"])(e.colorRenderbuffers))throw new a["a"]("Cannot have both color texture and color renderbuffer attachments.");if(Object(r["a"])(e.depthTexture)&&Object(r["a"])(e.depthRenderbuffer))throw new a["a"]("Cannot have both a depth texture and depth renderbuffer attachment.");if(Object(r["a"])(e.depthStencilTexture)&&Object(r["a"])(e.depthStencilRenderbuffer))throw new a["a"]("Cannot have both a depth-stencil texture and depth-stencil renderbuffer attachment.");const c=Object(r["a"])(e.depthTexture)||Object(r["a"])(e.depthRenderbuffer),l=Object(r["a"])(e.depthStencilTexture)||Object(r["a"])(e.depthStencilRenderbuffer);if(c&&l)throw new a["a"]("Cannot have both a depth and depth-stencil attachment.");if(Object(r["a"])(e.stencilRenderbuffer)&&l)throw new a["a"]("Cannot have both a stencil and depth-stencil attachment.");if(c&&Object(r["a"])(e.stencilRenderbuffer))throw new a["a"]("Cannot have both a depth and stencil attachment.");let u,h,d,f,p;if(this._bind(),Object(r["a"])(e.colorTextures)){const n=e.colorTextures;if(f=this._colorTextures.length=this._activeColorAttachments.length=n.length,f>s)throw new a["a"]("The number of color attachments exceeds the number supported.");for(d=0;d<f;++d){if(u=n[d],!fx.isColorFormat(u.pixelFormat))throw new a["a"]("The color-texture pixel-format must be a color format.");if(u.pixelDatatype===hx.FLOAT&&!t.colorBufferFloat)throw new a["a"]("The color texture pixel datatype is FLOAT and the WebGL implementation does not support the EXT_color_buffer_float or WEBGL_color_buffer_float extensions. See Context.colorBufferFloat.");if(u.pixelDatatype===hx.HALF_FLOAT&&!t.colorBufferHalfFloat)throw new a["a"]("The color texture pixel datatype is HALF_FLOAT and the WebGL implementation does not support the EXT_color_buffer_half_float extension. See Context.colorBufferHalfFloat.");p=this._gl.COLOR_ATTACHMENT0+d,C8(this,p,u),this._activeColorAttachments[d]=p,this._colorTextures[d]=u}}if(Object(r["a"])(e.colorRenderbuffers)){const t=e.colorRenderbuffers;if(f=this._colorRenderbuffers.length=this._activeColorAttachments.length=t.length,f>s)throw new a["a"]("The number of color attachments exceeds the number supported.");for(d=0;d<f;++d)h=t[d],p=this._gl.COLOR_ATTACHMENT0+d,E8(this,p,h),this._activeColorAttachments[d]=p,this._colorRenderbuffers[d]=h}if(Object(r["a"])(e.depthTexture)){if(u=e.depthTexture,u.pixelFormat!==fx.DEPTH_COMPONENT)throw new a["a"]("The depth-texture pixel-format must be DEPTH_COMPONENT.");C8(this,this._gl.DEPTH_ATTACHMENT,u),this._depthTexture=u}if(Object(r["a"])(e.depthRenderbuffer)&&(h=e.depthRenderbuffer,E8(this,this._gl.DEPTH_ATTACHMENT,h),this._depthRenderbuffer=h),Object(r["a"])(e.stencilRenderbuffer)&&(h=e.stencilRenderbuffer,E8(this,this._gl.STENCIL_ATTACHMENT,h),this._stencilRenderbuffer=h),Object(r["a"])(e.depthStencilTexture)){if(u=e.depthStencilTexture,u.pixelFormat!==fx.DEPTH_STENCIL)throw new a["a"]("The depth-stencil pixel-format must be DEPTH_STENCIL.");C8(this,this._gl.DEPTH_STENCIL_ATTACHMENT,u),this._depthStencilTexture=u}Object(r["a"])(e.depthStencilRenderbuffer)&&(h=e.depthStencilRenderbuffer,E8(this,this._gl.DEPTH_STENCIL_ATTACHMENT,h),this._depthStencilRenderbuffer=h),this._unBind()}Object.defineProperties(x8.prototype,{status:{get:function(){this._bind();const e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),e}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}}),x8.prototype._bind=function(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer)},x8.prototype._unBind=function(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},x8.prototype.bindDraw=function(){const e=this._gl;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._framebuffer)},x8.prototype.bindRead=function(){const e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._framebuffer)},x8.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments},x8.prototype.getColorTexture=function(e){if(!Object(r["a"])(e)||e<0||e>=this._colorTextures.length)throw new a["a"]("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorTextures[e]},x8.prototype.getColorRenderbuffer=function(e){if(!Object(r["a"])(e)||e<0||e>=this._colorRenderbuffers.length)throw new a["a"]("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorRenderbuffers[e]},x8.prototype.isDestroyed=function(){return!1},x8.prototype.destroy=function(){if(this.destroyAttachments){let e=0;const t=this._colorTextures;let n=t.length;for(;e<n;++e){const n=t[e];Object(r["a"])(n)&&n.destroy()}const i=this._colorRenderbuffers;for(n=i.length,e=0;e<n;++e){const t=i[e];Object(r["a"])(t)&&t.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),Wc(this)};var S8=x8;function I8(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.context,n=e.width,s=e.height;i["a"].defined("options.context",t),i["a"].defined("options.width",n),i["a"].defined("options.height",s),this._width=n,this._height=s;const c=e.colorRenderbuffers,l=e.colorTextures;if(Object(r["a"])(c)!==Object(r["a"])(l))throw new a["a"]("Both color renderbuffer and texture attachments must be provided.");const u=e.depthStencilRenderbuffer,h=e.depthStencilTexture;if(Object(r["a"])(u)!==Object(r["a"])(h))throw new a["a"]("Both depth-stencil renderbuffer and texture attachments must be provided.");this._renderFramebuffer=new S8({context:t,colorRenderbuffers:c,depthStencilRenderbuffer:u,destroyAttachments:e.destroyAttachments}),this._colorFramebuffer=new S8({context:t,colorTextures:l,depthStencilTexture:h,destroyAttachments:e.destroyAttachments})}I8.prototype.getRenderFramebuffer=function(){return this._renderFramebuffer},I8.prototype.getColorFramebuffer=function(){return this._colorFramebuffer},I8.prototype.blitFramebuffers=function(e,t){this._renderFramebuffer.bindRead(),this._colorFramebuffer.bindDraw();const n=e._gl;let i=0;this._colorFramebuffer._colorTextures.length>0&&(i|=n.COLOR_BUFFER_BIT),Object(r["a"])(this._colorFramebuffer.depthStencilTexture)&&(i|=n.DEPTH_BUFFER_BIT|(t?n.STENCIL_BUFFER_BIT:0)),n.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,i,n.NEAREST),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null)},I8.prototype.isDestroyed=function(){return!1},I8.prototype.destroy=function(){return this._renderFramebuffer.destroy(),this._colorFramebuffer.destroy(),Wc(this)};var D8=I8;const P8={RGBA4:Ys.RGBA4,RGBA8:Ys.RGBA8,RGBA16F:Ys.RGBA16F,RGBA32F:Ys.RGBA32F,RGB5_A1:Ys.RGB5_A1,RGB565:Ys.RGB565,DEPTH_COMPONENT16:Ys.DEPTH_COMPONENT16,STENCIL_INDEX8:Ys.STENCIL_INDEX8,DEPTH_STENCIL:Ys.DEPTH_STENCIL,DEPTH24_STENCIL8:Ys.DEPTH24_STENCIL8,validate:function(e){return e===P8.RGBA4||e===P8.RGBA8||e===P8.RGBA16F||e===P8.RGBA32F||e===P8.RGB5_A1||e===P8.RGB565||e===P8.DEPTH_COMPONENT16||e===P8.STENCIL_INDEX8||e===P8.DEPTH_STENCIL||e===P8.DEPTH24_STENCIL8},getColorFormat:function(e){return e===Ys.FLOAT?P8.RGBA32F:e===Ys.HALF_FLOAT_OES?P8.RGBA16F:P8.RGBA8}};var j8=Object.freeze(P8);function R8(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context,n=t._gl,s=YN.maximumRenderbufferSize,c=Object(o["a"])(e.format,j8.RGBA4),l=Object(r["a"])(e.width)?e.width:n.drawingBufferWidth,u=Object(r["a"])(e.height)?e.height:n.drawingBufferHeight,h=Object(o["a"])(e.numSamples,1);if(!j8.validate(c))throw new a["a"]("Invalid format.");if(i["a"].typeOf.number.greaterThan("width",l,0),l>s)throw new a["a"](`Width must be less than or equal to the maximum renderbuffer size (${s}).  Check maximumRenderbufferSize.`);if(i["a"].typeOf.number.greaterThan("height",u,0),u>s)throw new a["a"](`Height must be less than or equal to the maximum renderbuffer size (${s}).  Check maximumRenderbufferSize.`);this._gl=n,this._format=c,this._width=l,this._height=u,this._renderbuffer=this._gl.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this._renderbuffer),h>1?n.renderbufferStorageMultisample(n.RENDERBUFFER,h,c,l,u):n.renderbufferStorage(n.RENDERBUFFER,c,l,u),n.bindRenderbuffer(n.RENDERBUFFER,null)}Object.defineProperties(R8.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),R8.prototype._getRenderbuffer=function(){return this._renderbuffer},R8.prototype.isDestroyed=function(){return!1},R8.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),Wc(this)};var L8=R8;function M8(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._numSamples=Object(o["a"])(e.numSamples,1),this._colorAttachmentsLength=Object(o["a"])(e.colorAttachmentsLength,1),this._color=Object(o["a"])(e.color,!0),this._depth=Object(o["a"])(e.depth,!1),this._depthStencil=Object(o["a"])(e.depthStencil,!1),this._supportsDepthTexture=Object(o["a"])(e.supportsDepthTexture,!1),!this._color&&!this._depth&&!this._depthStencil)throw new a["a"]("Must enable at least one type of framebuffer attachment.");if(this._depth&&this._depthStencil)throw new a["a"]("Cannot have both a depth and depth-stencil attachment.");this._createColorAttachments=Object(o["a"])(e.createColorAttachments,!0),this._createDepthAttachments=Object(o["a"])(e.createDepthAttachments,!0),this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(M8.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}}),M8.prototype.isDirty=function(e,t,n,i,a){n=Object(o["a"])(n,1);const s=this._width!==e||this._height!==t,c=this._numSamples!==n,l=Object(r["a"])(i)&&this._pixelDatatype!==i||Object(r["a"])(a)&&this._pixelFormat!==a,u=1===n?Object(r["a"])(this._framebuffer):Object(r["a"])(this._multisampleFramebuffer);return this._attachmentsDirty||s||c||l||!u||this._color&&!Object(r["a"])(this._colorTextures[0])},M8.prototype.update=function(e,t,n,i,s,c){if(!Object(r["a"])(t)||!Object(r["a"])(n))throw new a["a"]("width and height must be defined.");if(i=e.msaa?Object(o["a"])(i,1):1,s=Object(o["a"])(s,this._color?Object(o["a"])(this._pixelDatatype,hx.UNSIGNED_BYTE):void 0),c=Object(o["a"])(c,this._color?Object(o["a"])(this._pixelFormat,fx.RGBA):void 0),this.isDirty(t,n,i,s,c)){if(this.destroy(),this._width=t,this._height=n,this._numSamples=i,this._pixelDatatype=s,this._pixelFormat=c,this._attachmentsDirty=!1,this._color&&this._createColorAttachments)for(let i=0;i<this._colorAttachmentsLength;++i)if(this._colorTextures[i]=new lB({context:e,width:t,height:n,pixelFormat:c,pixelDatatype:s,sampler:rB.NEAREST}),this._numSamples>1){const o=j8.getColorFormat(s);this._colorRenderbuffers[i]=new L8({context:e,width:t,height:n,format:o,numSamples:this._numSamples})}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new lB({context:e,width:t,height:n,pixelFormat:fx.DEPTH_STENCIL,pixelDatatype:hx.UNSIGNED_INT_24_8,sampler:rB.NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new L8({context:e,width:t,height:n,format:j8.DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new L8({context:e,width:t,height:n,format:j8.DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new lB({context:e,width:t,height:n,pixelFormat:fx.DEPTH_COMPONENT,pixelDatatype:hx.UNSIGNED_INT,sampler:rB.NEAREST}):this._depthRenderbuffer=new L8({context:e,width:t,height:n,format:j8.DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new D8({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new S8({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}},M8.prototype.getColorTexture=function(e){if(e=Object(o["a"])(e,0),e>=this._colorAttachmentsLength)throw new a["a"]("index must be smaller than total number of color attachments.");return this._colorTextures[e]},M8.prototype.setColorTexture=function(e,t){if(t=Object(o["a"])(t,0),this._createColorAttachments)throw new a["a"]("createColorAttachments must be false if setColorTexture is called.");if(t>=this._colorAttachmentsLength)throw new a["a"]("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e},M8.prototype.getColorRenderbuffer=function(e){if(e=Object(o["a"])(e,0),e>=this._colorAttachmentsLength)throw new a["a"]("index must be smaller than total number of color attachments.");return this._colorRenderbuffers[e]},M8.prototype.setColorRenderbuffer=function(e,t){if(t=Object(o["a"])(t,0),this._createColorAttachments)throw new a["a"]("createColorAttachments must be false if setColorRenderbuffer is called.");if(t>=this._colorAttachmentsLength)throw new a["a"]("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e},M8.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer},M8.prototype.setDepthRenderbuffer=function(e){if(this._createDepthAttachments)throw new a["a"]("createDepthAttachments must be false if setDepthRenderbuffer is called.");this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e},M8.prototype.getDepthTexture=function(){return this._depthTexture},M8.prototype.setDepthTexture=function(e){if(this._createDepthAttachments)throw new a["a"]("createDepthAttachments must be false if setDepthTexture is called.");this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e},M8.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer},M8.prototype.setDepthStencilRenderbuffer=function(e){if(this._createDepthAttachments)throw new a["a"]("createDepthAttachments must be false if setDepthStencilRenderbuffer is called.");this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e},M8.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture},M8.prototype.setDepthStencilTexture=function(e){if(this._createDepthAttachments)throw new a["a"]("createDepthAttachments must be false if setDepthStencilTexture is called.");this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e},M8.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)},M8.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,n),t.framebuffer=i},M8.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()},M8.prototype.destroy=function(){if(this._color){let e;const t=this._colorTextures.length;for(e=0;e<t;++e){const t=this._colorTextures[e];this._createColorAttachments&&Object(r["a"])(t)&&!t.isDestroyed()&&(this._colorTextures[e].destroy(),this._colorTextures[e]=void 0),Object(r["a"])(t)&&t.isDestroyed()&&(this._colorTextures[e]=void 0);const n=this._colorRenderbuffers[e];this._createColorAttachments&&Object(r["a"])(n)&&!n.isDestroyed()&&(this._colorRenderbuffers[e].destroy(),this._colorRenderbuffers[e]=void 0),Object(r["a"])(n)&&n.isDestroyed()&&(this._colorRenderbuffers[e]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),Object(r["a"])(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),Object(r["a"])(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),Object(r["a"])(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),Object(r["a"])(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()};var N8=M8,B8="#extension GL_EXT_frag_depth : enable\n\nuniform sampler2D u_pointCloud_colorGBuffer;\nuniform sampler2D u_pointCloud_depthGBuffer;\nuniform vec2 u_distanceAndEdlStrength;\nvarying vec2 v_textureCoordinates;\n\nvec2 neighborContribution(float log2Depth, vec2 offset)\n{\n    float dist = u_distanceAndEdlStrength.x;\n    vec2 texCoordOrig = v_textureCoordinates + offset * dist;\n    vec2 texCoord0 = v_textureCoordinates + offset * floor(dist);\n    vec2 texCoord1 = v_textureCoordinates + offset * ceil(dist);\n\n    float depthOrLogDepth0 = czm_unpackDepth(texture2D(u_pointCloud_depthGBuffer, texCoord0));\n    float depthOrLogDepth1 = czm_unpackDepth(texture2D(u_pointCloud_depthGBuffer, texCoord1));\n\n    // ignore depth values that are the clear depth\n    if (depthOrLogDepth0 == 0.0 || depthOrLogDepth1 == 0.0) {\n        return vec2(0.0);\n    }\n\n    // interpolate the two adjacent depth values\n    float depthMix = mix(depthOrLogDepth0, depthOrLogDepth1, fract(dist));\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(texCoordOrig, depthMix);\n    return vec2(max(0.0, log2Depth - log2(-eyeCoordinate.z / eyeCoordinate.w)), 1.0);\n}\n\nvoid main()\n{\n    float depthOrLogDepth = czm_unpackDepth(texture2D(u_pointCloud_depthGBuffer, v_textureCoordinates));\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depthOrLogDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float log2Depth = log2(-eyeCoordinate.z);\n\n    if (depthOrLogDepth == 0.0) // 0.0 is the clear value for the gbuffer\n    {\n        discard;\n    }\n\n    vec4 color = texture2D(u_pointCloud_colorGBuffer, v_textureCoordinates);\n\n    // sample from neighbors left, right, down, up\n    vec2 texelSize = 1.0 / czm_viewport.zw;\n\n    vec2 responseAndCount = vec2(0.0);\n\n    responseAndCount += neighborContribution(log2Depth, vec2(-texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(+texelSize.x, 0.0));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, -texelSize.y));\n    responseAndCount += neighborContribution(log2Depth, vec2(0.0, +texelSize.y));\n\n    float response = responseAndCount.x / responseAndCount.y;\n    float strength = u_distanceAndEdlStrength.y;\n    float shade = exp(-response * 300.0 * strength);\n    color.rgb *= shade;\n    gl_FragColor = vec4(color);\n\n    // Input and output depth are the same.\n    gl_FragDepthEXT = depthOrLogDepth;\n}\n";function F8(){this._framebuffer=new N8({colorAttachmentsLength:2,depth:!0,supportsDepthTexture:!0}),this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}function z8(e){e._framebuffer.destroy(),e._drawCommand=void 0,e._clearCommand=void 0}Object.defineProperties(F8.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}},colorGBuffer:{get:function(){return this._framebuffer.getColorTexture(0)}},depthGBuffer:{get:function(){return this._framebuffer.getColorTexture(1)}}});const k8=new Gt;function U8(e,t){const n=new EV({defines:["LOG_DEPTH_WRITE"],sources:[B8]}),i={u_pointCloud_colorGBuffer:function(){return e.colorGBuffer},u_pointCloud_depthGBuffer:function(){return e.depthGBuffer},u_distanceAndEdlStrength:function(){return k8.x=e._radius,k8.y=e._strength,k8}},o=UF.fromCache({blending:UN.ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:cW.setCesium3DTileBit(),stencilMask:cW.CESIUM_3D_TILE_MASK});e._drawCommand=t.createViewportQuadCommand(n,{uniformMap:i,renderState:o,pass:hF.CESIUM_3D_TILE,owner:e}),e._clearCommand=new xX({framebuffer:e.framebuffer,color:new Dm(0,0,0,0),depth:1,renderState:UF.fromCache(),pass:hF.CESIUM_3D_TILE,owner:e})}function V8(e,t){const n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i),U8(e,t)}function H8(e){return e.drawBuffers&&e.fragmentDepth}function G8(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"EC");if(!Object(r["a"])(n)){const i=t._attributeLocations,o=t.fragmentShaderSource.clone();o.sources=o.sources.map((function(e){return e=EV.replaceMain(e,"czm_point_cloud_post_process_main"),e=e.replace(/gl_FragColor/g,"gl_FragData[0]"),e})),o.sources.unshift("#extension GL_EXT_draw_buffers : enable \n"),o.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n    gl_FragData[1] = czm_packDepth(gl_FragDepthEXT); \n#else\n    gl_FragData[1] = czm_packDepth(gl_FragCoord.z);\n#endif\n}"),n=e.shaderCache.createDerivedShaderProgram(t,"EC",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}F8.isSupported=H8,F8.prototype.update=function(e,t,n,i){if(!H8(e.context))return;let o;this._strength=n.eyeDomeLightingStrength,this._radius=n.eyeDomeLightingRadius*e.pixelRatio,V8(this,e.context);const a=e.commandList,s=a.length;for(o=t;o<s;++o){const t=a[o];if(t.primitiveType!==Eu.POINTS||t.pass===hF.TRANSLUCENT)continue;let n,i,s=t.derivedCommands.pointCloudProcessor;Object(r["a"])(s)&&(n=s.command,i=s.originalShaderProgram),Object(r["a"])(n)&&!t.dirty&&i===t.shaderProgram&&n.framebuffer===this.framebuffer||(n=lF.shallowClone(t,n),n.framebuffer=this.framebuffer,n.shaderProgram=G8(e.context,t.shaderProgram),n.castShadows=!1,n.receiveShadows=!1,Object(r["a"])(s)||(s={command:n,originalShaderProgram:t.shaderProgram},t.derivedCommands.pointCloudProcessor=s),s.originalShaderProgram=t.shaderProgram),a[o]=n}const c=this._clearCommand,l=this._drawCommand;l.boundingVolume=i,a.push(l),a.push(c)},F8.prototype.isDestroyed=function(){return!1},F8.prototype.destroy=function(){return z8(this),Wc(this)};var W8=F8;function q8(e){const t=Object(o["a"])(e,{});this.attenuation=Object(o["a"])(t.attenuation,!1),this.geometricErrorScale=Object(o["a"])(t.geometricErrorScale,1),this.maximumAttenuation=t.maximumAttenuation,this.baseResolution=t.baseResolution,this.eyeDomeLighting=Object(o["a"])(t.eyeDomeLighting,!0),this.eyeDomeLightingStrength=Object(o["a"])(t.eyeDomeLightingStrength,1),this.eyeDomeLightingRadius=Object(o["a"])(t.eyeDomeLightingRadius,1),this.backFaceCulling=Object(o["a"])(t.backFaceCulling,!1),this.normalShading=Object(o["a"])(t.normalShading,!0)}q8.isSupported=function(e){return W8.isSupported(e.context)};var Y8=q8;const X8={},K8=new be(0,0,0,1);let $8=new be;const J8=new Au,Q8=new Gt,Z8=new Gt;X8.wgs84ToWindowCoordinates=function(e,t,n){return X8.wgs84WithEyeOffsetToWindowCoordinates(e,t,g.ZERO,n)};const e9=new be,t9=new g;function n9(e,t,n,i){const o=n.viewMatrix,r=Me.multiplyByVector(o,be.fromElements(e.x,e.y,e.z,1,e9),e9),a=g.multiplyComponents(t,g.normalize(r,t9),t9);return r.x+=t.x+a.x,r.y+=t.y+a.y,r.z+=a.z,Me.multiplyByVector(n.frustum.projectionMatrix,r,i)}const i9=new I(Math.PI,s["a"].PI_OVER_TWO),o9=new g,r9=new g;X8.wgs84WithEyeOffsetToWindowCoordinates=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");if(!Object(r["a"])(t))throw new a["a"]("position is required.");const o=e.frameState,c=X8.computeActualWgs84Position(o,t,K8);if(!Object(r["a"])(c))return;const l=e.canvas,u=J8;u.x=0,u.y=0,u.width=l.clientWidth,u.height=l.clientHeight;const h=e.camera;let d=!1;if(o.mode===SH.SCENE2D){const t=e.mapProjection,o=i9,r=t.project(o,o9),a=g.clone(h.position,r9),f=h.frustum.clone(),p=Me.computeViewportTransformation(u,0,1,new Me),m=h.frustum.projectionMatrix,_=h.positionWC.y,b=g.fromElements(s["a"].sign(_)*r.x-_,0,-h.positionWC.x),y=ka.pointToGLWindowCoordinates(m,p,b);if(0===_||y.x<=0||y.x>=l.clientWidth)d=!0;else{if(y.x>.5*l.clientWidth){u.width=y.x,h.frustum.right=r.x-_,$8=n9(c,n,h,$8),X8.clipToGLWindowCoordinates(u,$8,Q8),u.x+=y.x,h.position.x=-h.position.x;const e=h.frustum.right;h.frustum.right=-h.frustum.left,h.frustum.left=-e,$8=n9(c,n,h,$8),X8.clipToGLWindowCoordinates(u,$8,Z8)}else{u.x+=y.x,u.width-=y.x,h.frustum.left=-r.x-_,$8=n9(c,n,h,$8),X8.clipToGLWindowCoordinates(u,$8,Q8),u.x=u.x-u.width,h.position.x=-h.position.x;const e=h.frustum.left;h.frustum.left=-h.frustum.right,h.frustum.right=-e,$8=n9(c,n,h,$8),X8.clipToGLWindowCoordinates(u,$8,Z8)}g.clone(a,h.position),h.frustum=f.clone(),i=Gt.clone(Q8,i),(i.x<0||i.x>l.clientWidth)&&(i.x=Z8.x)}}if(o.mode!==SH.SCENE2D||d){if($8=n9(c,n,h,$8),$8.z<0&&!(h.frustum instanceof IO)&&!(h.frustum instanceof EO))return;i=X8.clipToGLWindowCoordinates(u,$8,i)}return i.y=l.clientHeight-i.y,i},X8.wgs84ToDrawingBufferCoordinates=function(e,t,n){if(n=X8.wgs84ToWindowCoordinates(e,t,n),Object(r["a"])(n))return X8.transformWindowToDrawingBuffer(e,n,n)};const a9=new g,s9=new I;X8.computeActualWgs84Position=function(e,t,n){const i=e.mode;if(i===SH.SCENE3D)return g.clone(t,n);const o=e.mapProjection,a=o.ellipsoid.cartesianToCartographic(t,s9);if(!Object(r["a"])(a))return;if(o.project(a,a9),i===SH.COLUMBUS_VIEW)return g.fromElements(a9.z,a9.x,a9.y,n);if(i===SH.SCENE2D)return g.fromElements(0,a9.x,a9.y,n);const c=e.morphTime;return g.fromElements(s["a"].lerp(a9.z,t.x,c),s["a"].lerp(a9.x,t.y,c),s["a"].lerp(a9.y,t.z,c),n)};const c9=new g,l9=new g,u9=new Me;X8.clipToGLWindowCoordinates=function(e,t,n){return g.divideByScalar(t,t.w,c9),Me.computeViewportTransformation(e,0,1,u9),Me.multiplyByPoint(u9,c9,l9),Gt.fromCartesian3(l9,n)},X8.transformWindowToDrawingBuffer=function(e,t,n){const i=e.canvas,o=e.drawingBufferWidth/i.clientWidth,r=e.drawingBufferHeight/i.clientHeight;return Gt.fromElements(t.x*o,t.y*r,n)};const h9=new be,d9=new be;X8.drawingBufferToWgs84Coordinates=function(e,t,n,i){const o=e.context,a=o.uniformState,s=a.currentFrustum,c=s.x,l=s.y;if(e.frameState.useLogDepth){const e=n*a.log2FarDepthFromNearPlusOne,t=Math.pow(2,e)-1;n=l*(1-c/(t+c))/(l-c)}const u=e.view.passState.viewport,h=be.clone(be.UNIT_W,h9);let d;h.x=(t.x-u.x)/u.width*2-1,h.y=(t.y-u.y)/u.height*2-1,h.z=2*n-1,h.w=1;let f=e.camera.frustum;if(Object(r["a"])(f.fovy)){d=Me.multiplyByVector(a.inverseViewProjection,h,d9);const e=1/d.w;g.multiplyByScalar(d,e,d)}else Object(r["a"])(f._offCenterFrustum)&&(f=f._offCenterFrustum),d=d9,d.x=.5*(h.x*(f.right-f.left)+f.left+f.right),d.y=.5*(h.y*(f.top-f.bottom)+f.bottom+f.top),d.z=.5*(h.z*(c-l)-c-l),d.w=1,d=Me.multiplyByVector(a.inverseView,d,d);return g.fromCartesian4(d,i)};var f9=X8;const p9={LEFT:-1,NONE:0,RIGHT:1};var m9=Object.freeze(p9);const _9={};_9._deprecationWarning=IL;const g9=Uint32Array.BYTES_PER_ELEMENT;_9.parse=function(e,t){const n=Object(o["a"])(t,0);i["a"].defined("arrayBuffer",e),t=n;const r=new Uint8Array(e),a=new DataView(e);t+=g9;const s=a.getUint32(t,!0);if(1!==s)throw new ye["a"](`Only Batched 3D Model version 1 is supported.  Version ${s} is not.`);t+=g9;const c=a.getUint32(t,!0);t+=g9;let l=a.getUint32(t,!0);t+=g9;let u=a.getUint32(t,!0);t+=g9;let h=a.getUint32(t,!0);t+=g9;let d,f,p=a.getUint32(t,!0);t+=g9,h>=570425344?(t-=2*g9,d=l,h=u,p=0,l=0,u=0,_9._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):p>=570425344&&(t-=g9,d=h,h=l,p=u,l=0,u=0,_9._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===l?f={BATCH_LENGTH:Object(o["a"])(d,0)}:(f=Fh(r,t,l),t+=l);const m=new Uint8Array(e,t,u);let _,g;t+=u,h>0&&(_=Fh(r,t,h),t+=h,p>0&&(g=new Uint8Array(e,t,p),g=new Uint8Array(g),t+=p));const b=n+c-t;if(0===b)throw new ye["a"]("glTF byte length must be greater than 0.");let y;return t%4===0?y=new Uint8Array(e,t,b):(_9._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),y=new Uint8Array(r.subarray(t,t+b))),{batchLength:d,featureTableJson:f,featureTableBinary:m,batchTableJson:_,batchTableBinary:g,gltf:y}};var b9=_9;function y9(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function v9(e,t,n,i,o,a){const s=e._cachedTypedArrays;let c=s[t];return Object(r["a"])(c)||(c=Ks.createArrayBufferView(n,e.buffer.buffer,e.buffer.byteOffset+a,o*i),s[t]=c),c}function O9(e,t,n,i){const o=e._cachedTypedArrays;let a=o[t];return Object(r["a"])(a)||(a=Ks.createTypedArray(n,i),o[t]=a),a}y9.prototype.getGlobalProperty=function(e,t,n){const i=this.json[e];if(Object(r["a"])(i))return Object(r["a"])(i.byteOffset)?(t=Object(o["a"])(t,Ks.UNSIGNED_INT),n=Object(o["a"])(n,1),v9(this,e,t,n,1,i.byteOffset)):i},y9.prototype.hasProperty=function(e){return Object(r["a"])(this.json[e])},y9.prototype.getPropertyArray=function(e,t,n){const i=this.json[e];if(Object(r["a"])(i))return Object(r["a"])(i.byteOffset)?(Object(r["a"])(i.componentType)&&(t=Ks.fromName(i.componentType)),v9(this,e,t,n,this.featuresLength,i.byteOffset)):O9(this,e,t,i)},y9.prototype.getProperty=function(e,t,n,i,o){const a=this.json[e];if(!Object(r["a"])(a))return;const s=this.getPropertyArray(e,t,n);if(1===n)return s[i];for(let r=0;r<n;++r)o[r]=s[n*i+r];return o};var A9=y9;const w9={};function T9(e){i["a"].typeOf.number.greaterThan("options.count",e.count,0),i["a"].typeOf.object("options.properties",e.properties),this._count=e.count,this._properties=Object(RL["a"])(e.properties,!0)}T9.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,w9)},T9.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,w9,e)},T9.prototype.getProperty=function(e,t){if(i["a"].typeOf.number("index",e),i["a"].typeOf.string("propertyId",t),e<0||e>=this._count)throw new a["a"](`index must be in the range [0, ${this._count})`);const n=this._properties[t];if(Object(r["a"])(n))return Object(RL["a"])(n[e],!0)},T9.prototype.setProperty=function(e,t,n){if(i["a"].typeOf.number("index",e),i["a"].typeOf.string("propertyId",t),e<0||e>=this._count)throw new a["a"](`index must be in the range [0, ${this._count})`);const o=this._properties[t];return!!Object(r["a"])(o)&&(o[e]=Object(RL["a"])(n,!0),!0)};var C9=T9;function E9(e){i["a"].typeOf.number("options.count",e.count),i["a"].typeOf.object("options.batchTable",e.batchTable);const t=e.count,n=e.batchTable,s=e.binaryBody,c=Object(o["a"])(e.parseAsPropertyAttributes,!1),l=e.customAttributeOutput;if(c&&!Object(r["a"])(l))throw new a["a"]("customAttributeOutput is required when parsing batch table as property attributes");const u=x9(n);let h,d;Object(r["a"])(u.jsonProperties)&&(h=new C9({count:t,properties:u.jsonProperties})),Object(r["a"])(u.hierarchy)&&(d=new hK({extension:u.hierarchy,binaryBody:s}));const f=L2.BATCH_TABLE_CLASS_NAME,p=u.binaryProperties;let m,_,g;if(c){const e=I9(t,f,p,s,l);g=e.transcodedSchema;const n=new z4({propertyAttribute:e.propertyAttributeJson,class:e.transcodedClass});_=[n]}else{const e=S9(t,f,p,s);g=e.transcodedSchema;const n=e.featureTableJson;m=new YQ({count:n.count,properties:n.properties,class:e.transcodedClass,bufferViews:e.bufferViewsTypedArrays}),_=[]}const b=[];if(Object(r["a"])(m)||Object(r["a"])(h)||Object(r["a"])(d)){const e=new S4({id:0,name:"Batch Table",count:t,metadataTable:m,jsonMetadataTable:h,batchTableHierarchy:d});b.push(e)}const y={schema:g,propertyTables:b,propertyAttributes:_,extensions:u.extensions,extras:u.extras};return new U4(y)}function x9(e){const t=e.HIERARCHY,n=e.extras,i=e.extensions;let o,a;Object(r["a"])(t)?(E9._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),o=t):Object(r["a"])(i)&&(o=i["3DTILES_batch_table_hierarchy"]);const s={};for(const c in e){if(!e.hasOwnProperty(c)||"HIERARCHY"===c||"extensions"===c||"extras"===c)continue;const t=e[c];Array.isArray(t)?(a=Object(r["a"])(a)?a:{},a[c]=t):s[c]=t}return{binaryProperties:s,jsonProperties:a,hierarchy:o,extras:n,extensions:i}}function S9(e,t,n,i){const o={},a={},s={};let c=0;for(const d in n){if(!n.hasOwnProperty(d))continue;if(!Object(r["a"])(i))throw new ye["a"](`Property ${d} requires a batch table binary.`);const t=n[d],l=KX(t);a[d]={bufferView:c},o[d]=D9(t),s[c]=l.createArrayBufferView(i.buffer,i.byteOffset+t.byteOffset,e),c++}const l={classes:{}};l.classes[t]={properties:o};const u=new k2(l),h={class:t,count:e,properties:a};return{featureTableJson:h,bufferViewsTypedArrays:s,transcodedSchema:u,transcodedClass:u.classes[t]}}function I9(e,t,n,i,o){const a={},s={};let c=0;for(const d in n){if(!n.hasOwnProperty(d))continue;const t=n[d];if(!Object(r["a"])(i)&&!Object(r["a"])(t.typedArray))throw new ye["a"](`Property ${d} requires a batch table binary.`);let l=_5.sanitizeGlslIdentifier(d);(""===l||a.hasOwnProperty(l))&&(l=`property_${c}`,c++);const u=D9(t);u.name=d,a[l]=u;let h=l.toUpperCase();h.startsWith("_")||(h=`_${h}`);let f=t.typedArray;if(!Object(r["a"])(f)){const n=KX(t);f=n.createArrayBufferView(i.buffer,i.byteOffset+t.byteOffset,e)}const p=new _2.Attribute;p.name=h,p.count=e,p.type=t.type,p.componentDatatype=Ks.fromTypedArray(f),p.typedArray=f,o.push(p),s[l]={attribute:h}}const l={classes:{}};l.classes[t]={properties:a};const u=new k2(l),h={properties:s};return{class:t,propertyAttributeJson:h,transcodedSchema:u,transcodedClass:u.classes[t]}}function D9(e){const t=P9(e.componentType);return{type:e.type,componentType:t}}function P9(e){switch(e){case"BYTE":return"INT8";case"UNSIGNED_BYTE":return"UINT8";case"SHORT":return"INT16";case"UNSIGNED_SHORT":return"UINT16";case"INT":return"INT32";case"UNSIGNED_INT":return"UINT32";case"FLOAT":return"FLOAT32";case"DOUBLE":return"FLOAT64"}}E9._deprecationWarning=IL;var j9=E9;const R9={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,FAILED:4},L9=_2.FeatureIdAttribute;function M9(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.b3dmResource;let n=e.baseResource;const a=e.arrayBuffer,s=Object(o["a"])(e.byteOffset,0),c=Object(o["a"])(e.releaseGltfJson,!1),l=Object(o["a"])(e.asynchronous,!0),u=Object(o["a"])(e.incrementallyLoadTextures,!0),h=Object(o["a"])(e.upAxis,IX.Y),d=Object(o["a"])(e.forwardAxis,IX.X),f=Object(o["a"])(e.loadAttributesAsTypedArray,!1),p=Object(o["a"])(e.loadAttributesFor2D,!1),m=Object(o["a"])(e.loadIndicesForWireframe,!1),_=Object(o["a"])(e.loadPrimitiveOutline,!0),g=Object(o["a"])(e.loadForClassification,!1);i["a"].typeOf.object("options.b3dmResource",t),i["a"].typeOf.object("options.arrayBuffer",a),n=Object(r["a"])(n)?n:t.clone(),this._b3dmResource=t,this._baseResource=n,this._arrayBuffer=a,this._byteOffset=s,this._releaseGltfJson=c,this._asynchronous=l,this._incrementallyLoadTextures=u,this._upAxis=h,this._forwardAxis=d,this._loadAttributesAsTypedArray=f,this._loadAttributesFor2D=p,this._loadIndicesForWireframe=m,this._loadPrimitiveOutline=_,this._loadForClassification=g,this._state=R9.UNLOADED,this._promise=void 0,this._gltfLoader=void 0,this._batchLength=0,this._propertyTable=void 0,this._batchTable=void 0,this._components=void 0,this._transform=Me.IDENTITY}function N9(e,t){e.unload(),e._state=R9.FAILED;const n="Failed to load b3dm";return t=e.getError(n,t),Promise.reject(t)}function B9(e,t){const n=e._batchTable,i=e._batchLength;if(0===i)return;let o;if(Object(r["a"])(n.json))o=j9({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new S4({name:L2.BATCH_TABLE_CLASS_NAME,count:i});o=new U4({schema:{},propertyTables:[e]})}const a=t.scene.nodes,s=a.length;for(let r=0;r<s;r++)F9(a[r]);t.structuralMetadata=o}function F9(e){const t=e.children.length;for(let i=0;i<t;i++)F9(e.children[i]);const n=e.primitives.length;for(let i=0;i<n;i++){const t=e.primitives[i],n=_5.getAttributeBySemantic(t,h5.FEATURE_ID);if(Object(r["a"])(n)){n.setIndex=0;const e=new L9;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",t.featureIds.push(e)}}}Object(r["a"])(Object.create)&&(M9.prototype=Object.create(KQ.prototype),M9.prototype.constructor=M9),Object.defineProperties(M9.prototype,{promise:{get:function(){return this._promise}},texturesLoadedPromise:{get:function(){return this._gltfLoader.texturesLoadedPromise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),M9.prototype.load=function(){const e=b9.parse(this._arrayBuffer,this._byteOffset);let t=e.batchLength;const n=e.featureTableJson,i=e.featureTableBinary,o=e.batchTableJson,a=e.batchTableBinary,s=new A9(n,i);t=s.getGlobalProperty("BATCH_LENGTH"),this._batchLength=t;const c=s.getGlobalProperty("RTC_CENTER",Ks.FLOAT,3);Object(r["a"])(c)&&(this._transform=Me.fromTranslation(g.fromArray(c))),this._batchTable={json:o,binary:a};const l=new T8({typedArray:e.gltf,upAxis:this._upAxis,forwardAxis:this._forwardAxis,gltfResource:this._b3dmResource,baseResource:this._baseResource,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadAttributesFor2D:this._loadAttributesFor2D,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline,loadForClassification:this._loadForClassification,renameBatchIdSemantic:!0});this._gltfLoader=l,this._state=R9.LOADING;const u=this;return l.load(),this._promise=l.promise.then((function(){if(u.isDestroyed())return;const e=l.components;return e.transform=Me.multiplyTransformation(u._transform,e.transform,e.transform),B9(u,e),u._components=e,u._arrayBuffer=void 0,u._state=R9.READY,u})).catch((function(e){if(!u.isDestroyed())return N9(u,e)})),this._promise},M9.prototype.process=function(e){i["a"].typeOf.object("frameState",e),this._state===R9.LOADING&&(this._state=R9.PROCESSING),this._state===R9.PROCESSING&&this._gltfLoader.process(e)},M9.prototype.unload=function(){Object(r["a"])(this._gltfLoader)&&this._gltfLoader.unload(),this._components=void 0,this._arrayBuffer=void 0};var z9=M9;function k9(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.geoJson",e.geoJson),this._geoJson=e.geoJson,this._promise=void 0,this._process=function(e,t){},this._components=void 0}function U9(){this.lines=void 0,this.properties=void 0}function V9(){this.features=[]}function H9(e){const t=e[0],n=e[1],i=Object(o["a"])(e[2],0);return new g(t,n,i)}function G9(e){const t=e.length,n=new Array(t);for(let o=0;o<t;o++)n[o]=H9(e[o]);const i=[n];return i}function W9(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=G9(e[i])[0];return n}function q9(e){const t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=G9(e[i])[0];return n}function Y9(e){const t=e.length,n=[];for(let i=0;i<t;i++)Array.prototype.push.apply(n,q9(e[i]));return n}Object(r["a"])(Object.create)&&(k9.prototype=Object.create(KQ.prototype),k9.prototype.constructor=k9),Object.defineProperties(k9.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),k9.prototype.load=function(){const e=this,t=new Promise((function(t){e._process=function(e,n){Object(r["a"])(e._components)||(e._components=Z9(e._geoJson,n),e._geoJson=void 0,t(e))}}));return this._promise=t,t},k9.prototype.process=function(e){i["a"].typeOf.object("frameState",e),this._process(this,e)};const X9={LineString:G9,MultiLineString:W9,MultiPolygon:Y9,Polygon:q9};function K9(e,t){if(!Object(r["a"])(e.geometry))return;const n=e.geometry.type,i=X9[n],o=e.geometry.coordinates;if(!Object(r["a"])(i))return;if(!Object(r["a"])(o))return;const a=new U9;a.lines=i(o),a.properties=e.properties,t.features.push(a)}function $9(e,t){const n=e.features,i=n.length;for(let o=0;o<i;o++)K9(n[o],t)}const J9={FeatureCollection:$9,Feature:K9},Q9=new g;function Z9(e,t){const n=new V9,i=J9[e.type];Object(r["a"])(i)&&i(e,n);const a=n.features.length;if(0===a)throw new ye["a"]("GeoJSON must have at least one feature");const s={};for(let g=0;g<a;g++){const e=n.features[g],t=Object(o["a"])(e.properties,o["a"].EMPTY_OBJECT);for(const n in t)t.hasOwnProperty(n)&&(Object(r["a"])(s[n])||(s[n]=new Array(a)))}for(let r=0;r<a;r++){const e=n.features[r];for(const t in s)if(s.hasOwnProperty(t)){const n=Object(o["a"])(e.properties[t],"");s[t][r]=n}}const c=new C9({count:a,properties:s}),l=new S4({id:0,count:a,jsonMetadataTable:c}),u=[l],h=new k2({}),d=new U4({schema:h,propertyTables:u}),f=new g(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=new g(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let o=0;o<a;o++){const e=n.features[o],t=e.lines.length;for(let n=0;n<t;n++){const t=e.lines[n],i=t.length;for(let e=0;e<i;e++)g.minimumByComponent(f,t[e],f),g.maximumByComponent(p,t[e],p)}}const m=g.midpoint(f,p,new g),_=g.fromDegrees(m.x,m.y,m.z,k.WGS84,new g),b=ka.eastNorthUpToFixedFrame(_,k.WGS84,new Me),y=Me.inverseTransformation(b,new Me);let v=0,O=0;for(let o=0;o<a;o++){const e=n.features[o],t=e.lines.length;for(let n=0;n<t;n++){const t=e.lines[n];v+=t.length,O+=2*(t.length-1)}}const A=new Float32Array(3*v),w=new Float32Array(v),T=ll.createTypedArray(v,O),C=ll.fromTypedArray(T),E=new g(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),x=new g(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);let S=0,I=0;for(let o=0;o<a;o++){const e=n.features[o],t=e.lines.length;for(let n=0;n<t;n++){const t=e.lines[n],i=t.length;for(let e=0;e<i;e++){const n=t[e],r=g.fromDegrees(n.x,n.y,n.z,k.WGS84,Q9),a=Me.multiplyByPoint(y,r,Q9);g.minimumByComponent(E,a,E),g.maximumByComponent(x,a,x),g.pack(a,A,3*S),w[S]=o,e<i-1&&(T[2*I]=S,T[2*I+1]=S+1,I++),S++}}}const D=NV.createVertexBuffer({typedArray:A,context:t.context,usage:LV.STATIC_DRAW});D.vertexArrayDestroyable=!1;const P=NV.createVertexBuffer({typedArray:w,context:t.context,usage:LV.STATIC_DRAW});P.vertexArrayDestroyable=!1;const j=NV.createIndexBuffer({typedArray:T,context:t.context,usage:LV.STATIC_DRAW,indexDatatype:C});j.vertexArrayDestroyable=!1;const R=new _2.Attribute;R.semantic=h5.POSITION,R.componentDatatype=Ks.FLOAT,R.type=rc.VEC3,R.count=v,R.min=E,R.max=x,R.buffer=D;const L=new _2.Attribute;L.semantic=h5.FEATURE_ID,L.setIndex=0,L.componentDatatype=Ks.FLOAT,L.type=rc.SCALAR,L.count=v,L.buffer=P;const M=[R,L],N=new _2.Material;N.unlit=!0;const B=new _2.Indices;B.indexDatatype=C,B.count=T.length,B.buffer=j;const F=new _2.FeatureIdAttribute;F.featureCount=a,F.propertyTableId=0,F.setIndex=0,F.positionalLabel="featureId_0";const z=[F],U=new _2.Primitive;U.attributes=M,U.indices=B,U.featureIds=z,U.primitiveType=Eu.LINES,U.material=N;const V=[U],H=new _2.Node;H.index=0,H.primitives=V;const G=[H],W=new _2.Scene;W.nodes=G;const q=new _2.Components;return q.scene=W,q.nodes=G,q.transform=b,q.structuralMetadata=d,q}k9.prototype.unload=function(){this._components=void 0};var e7=k9;const t7={};t7._deprecationWarning=IL;const n7=Uint32Array.BYTES_PER_ELEMENT;t7.parse=function(e,t){i["a"].defined("arrayBuffer",e);const n=Object(o["a"])(t,0);t=n;const r=new Uint8Array(e),a=new DataView(e);t+=n7;const s=a.getUint32(t,!0);if(1!==s)throw new ye["a"](`Only Instanced 3D Model version 1 is supported. Version ${s} is not.`);t+=n7;const c=a.getUint32(t,!0);t+=n7;const l=a.getUint32(t,!0);if(0===l)throw new ye["a"]("featureTableJsonByteLength is zero, the feature table must be defined.");t+=n7;const u=a.getUint32(t,!0);t+=n7;const h=a.getUint32(t,!0);t+=n7;const d=a.getUint32(t,!0);t+=n7;const f=a.getUint32(t,!0);if(1!==f&&0!==f)throw new ye["a"](`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${f} is not.`);t+=n7;const p=Fh(r,t,l);t+=l;const m=new Uint8Array(e,t,u);let _,g;t+=u,h>0&&(_=Fh(r,t,h),t+=h,d>0&&(g=new Uint8Array(e,t,d),g=new Uint8Array(g),t+=d));const b=n+c-t;if(0===b)throw new ye["a"]("glTF byte length must be greater than 0.");let y;return t%4===0?y=new Uint8Array(e,t,b):(t7._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),y=new Uint8Array(r.subarray(t,t+b))),{gltfFormat:f,featureTableJson:p,featureTableBinary:m,batchTableJson:_,batchTableBinary:g,gltf:y}};var i7=t7;const o7={NOT_LOADED:0,LOADING:1,PROCESSING:2,POST_PROCESSING:3,READY:4,FAILED:5,UNLOADED:6},r7=_2.Attribute,a7=_2.FeatureIdAttribute,s7=_2.Instances;function c7(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.i3dmResource,n=e.arrayBuffer;let a=e.baseResource;const s=Object(o["a"])(e.byteOffset,0),c=Object(o["a"])(e.releaseGltfJson,!1),l=Object(o["a"])(e.asynchronous,!0),u=Object(o["a"])(e.incrementallyLoadTextures,!0),h=Object(o["a"])(e.upAxis,IX.Y),d=Object(o["a"])(e.forwardAxis,IX.X),f=Object(o["a"])(e.loadAttributesAsTypedArray,!1),p=Object(o["a"])(e.loadIndicesForWireframe,!1),m=Object(o["a"])(e.loadPrimitiveOutline,!0);i["a"].typeOf.object("options.i3dmResource",t),i["a"].typeOf.object("options.arrayBuffer",n),a=Object(r["a"])(a)?a:t.clone(),this._i3dmResource=t,this._baseResource=a,this._arrayBuffer=n,this._byteOffset=s,this._releaseGltfJson=c,this._asynchronous=l,this._incrementallyLoadTextures=u,this._upAxis=h,this._forwardAxis=d,this._loadAttributesAsTypedArray=f,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=m,this._state=o7.NOT_LOADED,this._promise=void 0,this._gltfLoader=void 0,this._gltfLoaderPromise=void 0,this._process=function(e,t){},this._postProcess=function(e,t){},this._buffers=[],this._components=void 0,this._transform=Me.IDENTITY,this._batchTable=void 0,this._featureTable=void 0,this._instancesLength=0}function l7(e,t){e.unload(),e._state=o7.FAILED;const n="Failed to load i3dm";return t=e.getError(n,t),Promise.reject(t)}function u7(e,t){const n=e._batchTable,i=e._instancesLength;if(0===i)return;let o;if(Object(r["a"])(n.json))o=j9({count:i,batchTable:n.json,binaryBody:n.binary});else{const e=new S4({name:L2.BATCH_TABLE_CLASS_NAME,count:i});o=new U4({schema:{},propertyTables:[e]})}t.structuralMetadata=o}Object(r["a"])(Object.create)&&(c7.prototype=Object.create(KQ.prototype),c7.prototype.constructor=c7),Object.defineProperties(c7.prototype,{promise:{get:function(){return this._promise}},texturesLoadedPromise:{get:function(){return this._gltfLoader.texturesLoadedPromise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}}}),c7.prototype.load=function(){const e=i7.parse(this._arrayBuffer,this._byteOffset),t=e.featureTableJson,n=e.featureTableBinary,i=e.batchTableJson,o=e.batchTableBinary,a=e.gltfFormat,s=new A9(t,n);this._featureTable=s;const c=s.getGlobalProperty("INSTANCES_LENGTH");if(s.featuresLength=c,!Object(r["a"])(c))throw new ye["a"]("Feature table global property: INSTANCES_LENGTH must be defined");this._instancesLength=c;const l=s.getGlobalProperty("RTC_CENTER",Ks.FLOAT,3);Object(r["a"])(l)&&(this._transform=Me.fromTranslation(g.fromArray(l))),this._batchTable={json:i,binary:o};const u={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(0===a){let t=Nh(e.gltf);t=t.replace(/[\s\0]+$/,"");const n=this._baseResource.getDerivedResource({url:t});u.gltfResource=n,u.baseResource=n}else u.gltfResource=this._i3dmResource,u.typedArray=e.gltf;const h=new T8(u);this._gltfLoader=h,this._state=o7.LOADING,h.load();const d=this,f=new Promise((function(e){d._process=function(e,t){e._gltfLoader.process(t)},d._postProcess=function(t,n){const i=t._gltfLoader,o=i.components;o.transform=Me.multiplyTransformation(t._transform,o.transform,o.transform),p7(t,o,n),u7(t,o),t._components=o,t._arrayBuffer=void 0,t._state=o7.READY,e(t)}}));return this._promise=h.promise.then((function(){if(!d.isDestroyed())return d._state=o7.POST_PROCESSING,f})).catch((function(e){if(!d.isDestroyed())return l7(d,e)})),this._promise},c7.prototype.process=function(e){i["a"].typeOf.object("frameState",e),this._state===o7.LOADING&&(this._state=o7.PROCESSING),this._state===o7.PROCESSING&&this._process(this,e),this._state===o7.POST_PROCESSING&&this._postProcess(this,e)};const h7=new g,d7=new Array(4),f7=new Me;function p7(e,t,n){let i;const o=e._featureTable,a=e._instancesLength;if(0===a)return;const s=o.getGlobalProperty("RTC_CENTER",Ks.FLOAT,3),c=o.getGlobalProperty("EAST_NORTH_UP"),l=o.hasProperty("NORMAL_UP")||o.hasProperty("NORMAL_UP_OCT32P")||c,u=o.hasProperty("SCALE")||o.hasProperty("SCALE_NON_UNIFORM"),h=_7(o,a);let d,f;l&&(d=new Float32Array(4*a)),u&&(f=new Float32Array(3*a));const p=new Float32Array(a),m=g.unpackArray(h);let _=new g;const b=new g,y=new g,v=new g,O=new ce,A=new Kr,w=new Array(4),T=new g,C=new Array(3),E=new Me;if(!Object(r["a"])(s)){const e=Tt.fromPoints(m);for(i=0;i<m.length;i++)g.subtract(m[i],e.center,h7),h[3*i+0]=h7.x,h[3*i+1]=h7.y,h[3*i+2]=h7.z;const n=Me.fromTranslation(e.center,f7);t.transform=Me.multiplyTransformation(n,t.transform,t.transform)}for(i=0;i<a;i++){_=g.clone(m[i]),Object(r["a"])(s)&&g.add(_,g.unpack(s),_),l&&(b7(o,c,i,A,_,y,b,v,O,E),Kr.pack(A,w,0),d[4*i+0]=w[0],d[4*i+1]=w[1],d[4*i+2]=w[2],d[4*i+3]=w[3]),u&&(y7(o,i,T),g.pack(T,C,0),f[3*i+0]=C[0],f[3*i+1]=C[1],f[3*i+2]=C[2]);let e=o.getProperty("BATCH_ID",Ks.UNSIGNED_SHORT,1,i);Object(r["a"])(e)||(e=i),p[i]=e}const x=new s7;x.transformInWorldSpace=!0;const S=e._buffers,I=new r7;if(I.name="Instance Translation",I.semantic=b5.TRANSLATION,I.componentDatatype=Ks.FLOAT,I.type=rc.VEC3,I.count=a,I.typedArray=h,!l){const e=NV.createVertexBuffer({context:n.context,typedArray:h,usage:LV.STATIC_DRAW});e.vertexArrayDestroyable=!1,S.push(e),I.buffer=e}if(x.attributes.push(I),l){const e=new r7;e.name="Instance Rotation",e.semantic=b5.ROTATION,e.componentDatatype=Ks.FLOAT,e.type=rc.VEC4,e.count=a,e.typedArray=d,x.attributes.push(e)}if(u){const e=new r7;if(e.name="Instance Scale",e.semantic=b5.SCALE,e.componentDatatype=Ks.FLOAT,e.type=rc.VEC3,e.count=a,l)e.typedArray=f;else{const t=NV.createVertexBuffer({context:n.context,typedArray:h,usage:LV.STATIC_DRAW});t.vertexArrayDestroyable=!1,S.push(t),e.buffer=t}x.attributes.push(e)}const D=new r7;D.name="Instance Feature ID",D.setIndex=0,D.semantic=b5.FEATURE_ID,D.componentDatatype=Ks.FLOAT,D.type=rc.SCALAR,D.count=a;const P=NV.createVertexBuffer({context:n.context,typedArray:p,usage:LV.STATIC_DRAW});P.vertexArrayDestroyable=!1,S.push(P),D.buffer=P,x.attributes.push(D);const j=new a7;j.propertyTableId=0,j.setIndex=0,j.positionalLabel="instanceFeatureId_0",x.featureIds.push(j);const R=t.nodes,L=R.length;let M=!1;for(i=0;i<L;i++){const e=R[i];e.primitives.length>0&&(e.instances=M?m7(x):x,M=!0)}}function m7(e){const t=new s7;t.transformInWorldSpace=e.transformInWorldSpace;const n=e.attributes,i=n.length;for(let o=0;o<i;o++){const e=Object(RL["a"])(n[o],!1);t.attributes.push(e)}return t.featureIds=e.featureIds,t}function _7(e,t){if(e.hasProperty("POSITION"))return e.getPropertyArray("POSITION",Ks.FLOAT,3);if(e.hasProperty("POSITION_QUANTIZED")){const t=e.getPropertyArray("POSITION_QUANTIZED",Ks.UNSIGNED_SHORT,3),n=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Ks.FLOAT,3);if(!Object(r["a"])(n))throw new ye["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const i=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Ks.FLOAT,3);if(!Object(r["a"])(i))throw new ye["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=new Float32Array(t.length);for(let e=0;e<t.length/3;e++)for(let r=0;r<3;r++){const a=3*e+r;o[a]=t[a]/65535*i[r]+n[r]}return o}throw new ye["a"]("Either POSITION or POSITION_QUANTIZED must be defined for each instance.")}const g7=new Array(4);function b7(e,t,n,i,o,a,s,c,l,u){const h=e.getProperty("NORMAL_UP",Ks.FLOAT,3,n,d7),d=e.getProperty("NORMAL_RIGHT",Ks.FLOAT,3,n,g7);let f=!1;if(Object(r["a"])(h)){if(!Object(r["a"])(d))throw new ye["a"]("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");g.unpack(h,0,a),g.unpack(d,0,s),f=!0}else{const i=e.getProperty("NORMAL_UP_OCT32P",Ks.UNSIGNED_SHORT,2,n,d7),c=e.getProperty("NORMAL_RIGHT_OCT32P",Ks.UNSIGNED_SHORT,2,n,g7);if(Object(r["a"])(i)){if(!Object(r["a"])(c))throw new ye["a"]("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");pc.octDecodeInRange(i[0],i[1],65535,a),pc.octDecodeInRange(c[0],c[1],65535,s),f=!0}else t?(ka.eastNorthUpToFixedFrame(o,k.WGS84,u),Me.getMatrix3(u,l)):ce.clone(ce.IDENTITY,l)}f&&(g.cross(s,a,c),g.normalize(c,c),ce.setColumn(l,0,s,l),ce.setColumn(l,1,a,l),ce.setColumn(l,2,c,l)),Kr.fromRotationMatrix(l,i)}function y7(e,t,n){n=g.fromElements(1,1,1,n);const i=e.getProperty("SCALE",Ks.FLOAT,1,t);Object(r["a"])(i)&&g.multiplyByScalar(n,i,n);const o=e.getProperty("SCALE_NON_UNIFORM",Ks.FLOAT,3,t,d7);Object(r["a"])(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}function v7(e){const t=e._buffers,n=t.length;for(let i=0;i<n;i++){const e=t[i];e.isDestroyed()||e.destroy()}t.length=0}c7.prototype.isUnloaded=function(){return this._state===o7.UNLOADED},c7.prototype.unload=function(){Object(r["a"])(this._gltfLoader)&&this._gltfLoader.unload(),v7(this),this._components=void 0,this._arrayBuffer=void 0,this._state=o7.UNLOADED};var O7=c7;const A7={STOPPED:0,ANIMATING:1};var w7=Object.freeze(A7);const T7=_2.AnimatedPropertyType;function C7(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.channel,n=e.runtimeAnimation,r=e.runtimeNode;i["a"].typeOf.object("options.channel",t),i["a"].typeOf.object("options.runtimeAnimation",n),i["a"].typeOf.object("options.runtimeNode",r),this._channel=t,this._runtimeAnimation=n,this._runtimeNode=r,this._splines=[],this._path=void 0,D7(this)}function E7(e,t){const n=[],i=[],o=[],r=t.length;for(let a=0;a<r;a+=3)i.push(t[a]),n.push(t[a+1]),o.push(t[a+2]);return i.splice(0,1),o.length=o.length-1,new Th({times:e,points:n,inTangents:i,outTangents:o})}function x7(e,t,n,i){if(1===e.length&&1===t.length)return new Nm(t[0]);switch(n){case zC.STEP:return new dR({times:e,points:t});case zC.CUBICSPLINE:return E7(e,t);case zC.LINEAR:return i===T7.ROTATION?new HS({times:e,points:t}):new dh({times:e,points:t})}}function S7(e,t,n,i,o){const r=[];if(i===T7.WEIGHTS){const a=t.length,s=a/o;let c,l;for(c=0;c<o;c++){const a=new Array(s);let u=c;if(n===zC.CUBICSPLINE)for(l=0;l<s;l+=3)a[l]=t[u],a[l+1]=t[u+o],a[l+2]=t[u+2*o],u+=3*o;else for(l=0;l<s;l++)a[l]=t[u],u+=o;r.push(x7(e,a,n,i))}}else r.push(x7(e,t,n,i));return r}let I7;function D7(e){const t=e._channel,n=t.sampler,i=n.input,o=n.output,a=n.interpolation,s=t.target,c=s.path,l=e._runtimeNode,u=Object(r["a"])(l.morphWeights)?l.morphWeights.length:1,h=S7(i,o,a,c,u);switch(e._splines=h,e._path=c,c){case T7.TRANSLATION:case T7.SCALE:I7=new g;break;case T7.ROTATION:I7=new Kr;break;case T7.WEIGHTS:break}}Object.defineProperties(C7.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}}),C7.prototype.animate=function(e){const t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===T7.WEIGHTS){const n=o.morphWeights,r=n.length;for(let o=0;o<r;o++){const r=t[o],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n[o]=r.evaluate(a)}}else{if(o.userAnimated)return;{const r=t[0],a=i.clampAnimations?r.clampTime(e):r.wrapTime(e);o[n]=r.evaluate(a,I7)}}};var P7=C7;function j7(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=mo.clone(n.startTime),this._delay=Object(o["a"])(n.delay,0),this._stopTime=mo.clone(n.stopTime),this.removeOnStop=Object(o["a"])(n.removeOnStop,!1),this._multiplier=Object(o["a"])(n.multiplier,1),this._reverse=Object(o["a"])(n.reverse,!1),this._loop=Object(o["a"])(n.loop,r4.NONE),this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new dn["a"],this.update=new dn["a"],this.stop=new dn["a"],this._state=w7.STOPPED,this._computedStartTime=void 0,this._duration=void 0;const i=this;this._raiseStartEvent=function(){i.start.raiseEvent(e,i)},this._updateEventTime=0,this._raiseUpdateEvent=function(){i.update.raiseEvent(e,i,i._updateEventTime)},this._raiseStopEvent=function(){i.stop.raiseEvent(e,i)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,R7(this)}function R7(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;const i=e._model.sceneGraph,o=e._animation,a=o.channels,s=a.length,c=[];for(let l=0;l<s;l++){const o=a[l],s=o.target;if(!Object(r["a"])(s))continue;const u=s.node.index,h=i._runtimeNodes[u],d=new P7({channel:o,runtimeAnimation:e,runtimeNode:h}),f=o.sampler.input;t=Math.min(t,f[0]),n=Math.max(n,f[f.length-1]),c.push(d)}e._runtimeChannels=c,e._localStartTime=t,e._localStopTime=n}Object.defineProperties(j7.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}}),j7.prototype.animate=function(e){const t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};var L7=j7;function M7(e){this.animationAdded=new dn["a"],this.animationRemoved=new dn["a"],this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}function N7(e,t,n){const i=e._model,o=new L7(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}Object.defineProperties(M7.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),M7.prototype.add=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new a["a"]("Animations are not loaded.  Wait for Model.readyPromise to resolve.");const n=t.sceneGraph.components.animations;if(!Object(r["a"])(e.name)&&!Object(r["a"])(e.index))throw new a["a"]("Either options.name or options.index must be defined.");if(Object(r["a"])(e.multiplier)&&e.multiplier<=0)throw new a["a"]("options.multiplier must be greater than zero.");if(Object(r["a"])(e.index)&&(e.index>=n.length||e.index<0))throw new a["a"]("options.index must be a valid animation index.");let i=e.index;if(Object(r["a"])(i))return N7(this,n[i],e);const s=n.length;for(let o=0;o<s;++o)if(n[o].name===e.name){i=o;break}if(!Object(r["a"])(i))throw new a["a"]("options.name must be a valid animation name.");return N7(this,n[i],e)},M7.prototype.addAll=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=this._model;if(!t.ready)throw new a["a"]("Animations are not loaded.  Wait for Model.readyPromise to resolve.");if(Object(r["a"])(e.multiplier)&&e.multiplier<=0)throw new a["a"]("options.multiplier must be greater than zero.");const n=t.sceneGraph.components.animations,i=[],s=n.length;for(let o=0;o<s;++o){const t=N7(this,n[o],e);i.push(t)}return i},M7.prototype.remove=function(e){if(!Object(r["a"])(e))return!1;const t=this._runtimeAnimations,n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0)},M7.prototype.removeAll=function(){const e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])},M7.prototype.contains=function(e){return!!Object(r["a"])(e)&&-1!==this._runtimeAnimations.indexOf(e)},M7.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");if(e>=this._runtimeAnimations.length||e<0)throw new a["a"]("index must be valid within the range of the collection");return this._runtimeAnimations[e]};const B7=[];function F7(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}M7.prototype.update=function(e){const t=this._runtimeAnimations;let n=t.length;if(0===n)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&mo.equals(e.time,this._previousTime))return!1;this._previousTime=mo.clone(e.time,this._previousTime);let i=!1;const a=e.time,c=this._model;for(let l=0;l<n;++l){const n=t[l];Object(r["a"])(n._computedStartTime)||(n._computedStartTime=mo.addSeconds(Object(o["a"])(n.startTime,a),n.delay,new mo)),Object(r["a"])(n._duration)||(n._duration=n.localStopTime*(1/n.multiplier));const c=n._computedStartTime,u=n._duration,h=n.stopTime,d=mo.lessThanOrEquals(c,a),f=Object(r["a"])(h)&&mo.greaterThan(a,h);let p=0;if(0!==u){const e=mo.secondsDifference(f?h:a,c);p=Object(r["a"])(n._animationTime)?n._animationTime(u,e):e/u}const m=n.loop===r4.REPEAT||n.loop===r4.MIRRORED_REPEAT,_=(d||m&&!Object(r["a"])(n.startTime))&&(p<=1||m)&&!f;if(p===n._prevAnimationDelta){const e=n._state===w7.STOPPED;if(_!==e)continue}if(n._prevAnimationDelta=p,_||n._state===w7.ANIMATING){if(_&&n._state===w7.STOPPED&&(n._state=w7.ANIMATING,n.start.numberOfListeners>0&&e.afterRender.push(n._raiseStartEvent)),n.loop===r4.REPEAT)p-=Math.floor(p);else if(n.loop===r4.MIRRORED_REPEAT){const e=Math.floor(p),t=p-e;p=e%2===1?1-t:t}n.reverse&&(p=1-p);let t=p*u*n.multiplier;t=s["a"].clamp(t,n.localStartTime,n.localStopTime),n.animate(t),n.update.numberOfListeners>0&&(n._updateEventTime=t,e.afterRender.push(n._raiseUpdateEvent)),i=!0,_||(n._state=w7.STOPPED,n.stop.numberOfListeners>0&&e.afterRender.push(n._raiseStopEvent),n.removeOnStop&&B7.push(n))}}n=B7.length;for(let o=0;o<n;++o){const n=B7[o];t.splice(t.indexOf(n),1),e.afterRender.push(F7(this,c,n))}return B7.length=0,i};var z7=M7;function k7(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(k7.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return Object(r["a"])(this._color)||(this._color=new Dm),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}}),k7.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)},k7.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)},k7.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)},k7.prototype.getPropertyNames=function(e){return IL("ModelFeature.getPropertyNames","ModelFeature.getPropertyNames is deprecated in CesiumJS 1.95, and will be removed in 1.98. Use ModelFeature.getPropertyIds instead"),this._featureTable.getPropertyIds(e)},k7.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)},k7.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};var U7=k7;const V7={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?V7.ALL_OPAQUE:t===e?V7.ALL_TRANSLUCENT:V7.OPAQUE_AND_TRANSLUCENT}};var H7=Object.freeze(V7);const G7={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON",is3DTiles:function(e){switch(i["a"].typeOf.string("modelType",e),e){case G7.TILE_GLTF:case G7.TILE_B3DM:case G7.TILE_I3DM:case G7.TILE_PNTS:case G7.TILE_GEOJSON:return!0;case G7.GLTF:return!1;default:throw new a["a"]("modelType is not a valid value.")}}};var W7=Object.freeze(G7);function q7(e){const t=e.model,n=e.propertyTable;i["a"].typeOf.object("propertyTable",n),i["a"].typeOf.object("model",t),this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=H7.ALL_OPAQUE,Y7(this)}function Y7(e){const t=e._model,n=W7.is3DTiles(t.type),i=e._propertyTable.count;if(0===i)return;let o;const r=new Array(i);if(n){const e=t.content;for(o=0;o<i;o++)r[o]=new qK(e,o)}else for(o=0;o<i;o++)r[o]=new U7({model:t,featureId:o,featureTable:e});e._features=r,e._featuresLength=i,e._batchTexture=new WX({featuresLength:i,owner:e,statistics:n?t.content.tileset.statistics:void 0})}Object.defineProperties(q7.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return Object(r["a"])(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}}),q7.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);const t=H7.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)},q7.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)},q7.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)},q7.prototype.getShow=function(e){return this._batchTexture.getShow(e)},q7.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)},q7.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)},q7.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)},q7.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)},q7.prototype.getFeature=function(e){return this._features[e]},q7.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)},q7.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)},q7.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)},q7.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)},q7.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)},q7.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)},q7.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)},q7.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)},q7.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};const X7=new Dm;q7.prototype.applyStyle=function(e){if(!Object(r["a"])(e))return this.setAllColor(WX.DEFAULT_COLOR_VALUE),void this.setAllShow(WX.DEFAULT_SHOW_VALUE);for(let t=0;t<this._featuresLength;t++){const n=this.getFeature(t),i=Object(r["a"])(e.color)?Object(o["a"])(e.color.evaluateColor(n,X7),WX.DEFAULT_COLOR_VALUE):WX.DEFAULT_COLOR_VALUE,a=Object(r["a"])(e.show)?Object(o["a"])(e.show.evaluate(n),WX.DEFAULT_SHOW_VALUE):WX.DEFAULT_SHOW_VALUE;this.setColor(t,i),this.setShow(t,a)}},q7.prototype.isDestroyed=function(){return!1},q7.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),Wc(this)};var K7=q7,$7="#if defined(HAS_NORMALS) && !defined(HAS_TANGENTS) && !defined(LIGHTING_UNLIT)\n    #ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives : enable\n    #endif\n#endif\n\nczm_modelMaterial defaultModelMaterial()\n{\n    czm_modelMaterial material;\n    material.diffuse = vec3(0.0);\n    material.specular = vec3(1.0);\n    material.roughness = 1.0;\n    material.occlusion = 1.0;\n    material.normalEC = vec3(0.0, 0.0, 1.0);\n    material.emissive = vec3(0.0);\n    material.alpha = 1.0;\n    return material;\n}\n\nvec4 handleAlpha(vec3 color, float alpha)\n{\n    #ifdef ALPHA_MODE_MASK\n    if (alpha < u_alphaCutoff) {\n        discard;\n    }\n    #endif\n\n    return vec4(color, alpha);\n}\n\nSelectedFeature selectedFeature;\n\nvoid main()\n{\n    #ifdef HAS_MODEL_SPLITTER\n    modelSplitterStage();\n    #endif\n\n    czm_modelMaterial material = defaultModelMaterial();\n\n    ProcessedAttributes attributes;\n    geometryStage(attributes);\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    metadataStage(metadata, metadataClass, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    selectedFeatureIdStage(selectedFeature, featureIds);\n    #endif\n\n    #ifndef CUSTOM_SHADER_REPLACE_MATERIAL\n    materialStage(material, attributes, selectedFeature);\n    #endif\n\n    #ifdef HAS_CUSTOM_FRAGMENT_SHADER\n    customShaderStage(material, attributes, featureIds, metadata, metadataClass);\n    #endif\n\n    lightingStage(material, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    cpuStylingStage(material, selectedFeature);\n    #endif\n\n    #ifdef HAS_MODEL_COLOR\n    modelColorStage(material);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage(material);\n    #endif\n\n    vec4 color = handleAlpha(material.diffuse, material.alpha);\n\n    #ifdef HAS_CLIPPING_PLANES\n    modelClippingPlanesStage(color);\n    #endif\n\n    #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS)\n    silhouetteStage(color);\n    #endif\n\n    gl_FragColor = color;\n}\n",J7="precision highp float;\n\nczm_modelVertexOutput defaultVertexOutput(vec3 positionMC) {\n    czm_modelVertexOutput vsOutput;\n    vsOutput.positionMC = positionMC;\n    vsOutput.pointSize = 1.0;\n    return vsOutput;\n}\n\nvoid main() \n{\n    // Initialize the attributes struct with all\n    // attributes except quantized ones.\n    ProcessedAttributes attributes;\n    initializeAttributes(attributes);\n\n    // Dequantize the quantized ones and add them to the\n    // attributes struct.\n    #ifdef USE_DEQUANTIZATION\n    dequantizationStage(attributes);\n    #endif\n\n    #ifdef HAS_MORPH_TARGETS\n    morphTargetsStage(attributes);\n    #endif\n\n    #ifdef HAS_SKINNING\n    skinningStage(attributes);\n    #endif\n\n    #ifdef HAS_PRIMITIVE_OUTLINE\n    primitiveOutlineStage();\n    #endif\n\n    // Compute the bitangent according to the formula in the glTF spec.\n    // Normal and tangents can be affected by morphing and skinning, so\n    // the bitangent should not be computed until their values are finalized.\n    #ifdef HAS_BITANGENTS\n    attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC);\n    #endif\n\n    FeatureIds featureIds;\n    featureIdStage(featureIds, attributes);\n\n    #ifdef HAS_SELECTED_FEATURE_ID\n    SelectedFeature feature;\n    selectedFeatureIdStage(feature, featureIds);\n    // Handle any show properties that come from the style.\n    cpuStylingStage(attributes.positionMC, feature);\n    #endif\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    // The scene mode 2D pipeline stage and instancing stage add a different\n    // model view matrix to accurately project the model to 2D. However, the\n    // output positions and normals should be transformed by the 3D matrices\n    // to keep the data the same for the fragment shader.\n    mat4 modelView = czm_modelView3D;\n    mat3 normal = czm_normal3D;\n    #else\n    // These are used for individual model projection because they will\n    // automatically change based on the scene mode.\n    mat4 modelView = czm_modelView;\n    mat3 normal = czm_normal;\n    #endif\n\n    // Update the position for this instance in place\n    #ifdef HAS_INSTANCING\n\n        // The legacy instance stage is used when rendering i3dm models that \n        // encode instances transforms in world space, as opposed to glTF models\n        // that use EXT_mesh_gpu_instancing, where instance transforms are encoded\n        // in object space.\n        #ifdef USE_LEGACY_INSTANCING\n        mat4 instanceModelView;\n        mat3 instanceModelViewInverseTranspose;\n        \n        legacyInstancingStage(attributes, instanceModelView, instanceModelViewInverseTranspose);\n\n        modelView = instanceModelView;\n        normal = instanceModelViewInverseTranspose;\n        #else\n        instancingStage(attributes);\n        #endif\n\n        #ifdef USE_PICKING\n        v_pickColor = a_pickColor;\n        #endif\n\n    #endif\n\n    Metadata metadata;\n    MetadataClass metadataClass;\n    metadataStage(metadata, metadataClass, attributes);\n\n    #ifdef HAS_CUSTOM_VERTEX_SHADER\n    czm_modelVertexOutput vsOutput = defaultVertexOutput(attributes.positionMC);\n    customShaderStage(vsOutput, attributes, featureIds, metadata, metadataClass);\n    #endif\n\n    // Compute the final position in each coordinate system needed.\n    // This returns the value that will be assigned to gl_Position.\n    vec4 positionClip = geometryStage(attributes, modelView, normal);    \n\n    #ifdef HAS_SILHOUETTE\n    silhouetteStage(attributes, positionClip);\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_SHOW_STYLE\n    float show = pointCloudShowStylingStage(attributes, metadata);\n    #else\n    float show = 1.0;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\n    show *= pointCloudBackFaceCullingStage();\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    v_pointCloudColor = pointCloudColorStylingStage(attributes, metadata);\n    #endif\n\n    #ifdef PRIMITIVE_TYPE_POINTS\n        #ifdef HAS_CUSTOM_VERTEX_SHADER\n        gl_PointSize = vsOutput.pointSize;\n        #elif defined(HAS_POINT_CLOUD_POINT_SIZE_STYLE) || defined(HAS_POINT_CLOUD_ATTENUATION)\n        gl_PointSize = pointCloudPointSizeStylingStage(attributes, metadata);\n        #else\n        gl_PointSize = 1.0;\n        #endif\n\n        gl_PointSize *= show;\n    #endif\n\n    gl_Position = show * positionClip;\n}\n";function Q7(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.command,n=e.primitiveRenderResources;i["a"].typeOf.object("options.command",t),i["a"].typeOf.object("options.primitiveRenderResources",n);const r=n.model;this._command=t,this._model=r,this._runtimePrimitive=n.runtimePrimitive,this._modelMatrix=t.modelMatrix,this._boundingVolume=t.boundingVolume,this._cullFace=t.renderState.cull.face;const a=r.classificationType;this._classificationType=a,this._classifiesTerrain=a!==DV.CESIUM_3D_TILE,this._classifies3DTiles=a!==DV.TERRAIN,this._useDebugWireframe=r._enableDebugWireframe&&r.debugWireframe,this._pickId=n.pickId,this._commandListTerrain=[],this._commandList3DTiles=[],this._commandListIgnoreShow=[],this._commandListDebugWireframe=[],this._commandListTerrainPicking=[],this._commandList3DTilesPicking=[],iee(this)}function Z7(e){return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:e,frontOperation:{fail:aW.KEEP,zFail:aW.DECREMENT_WRAP,zPass:aW.KEEP},backFunction:e,backOperation:{fail:aW.KEEP,zFail:aW.INCREMENT_WRAP,zPass:aW.KEEP},reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:jV.LESS_OR_EQUAL},depthMask:!1}}const eee={stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:UN.PRE_MULTIPLIED_ALPHA_BLEND},tee={stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},backFunction:oW.NOT_EQUAL,backOperation:{fail:aW.ZERO,zFail:aW.ZERO,zPass:aW.ZERO},reference:0,mask:cW.CLASSIFICATION_MASK},stencilMask:cW.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1},nee=[];function iee(e){const t=e._command,n=nee;if(e._useDebugWireframe){t.pass=hF.OPAQUE,n.length=0,n.push(t),e._commandListDebugWireframe=oee(e,n,e._commandListDebugWireframe);const i=e._commandListDebugWireframe,o=i.length;for(let e=0;e<o;e++){const t=i[e];t.count*=2,t.offset*=2}return}const i=e.model,o=i.allowPicking;if(e._classifiesTerrain){const i=hF.TERRAIN_CLASSIFICATION,r=ree(t,i),a=aee(t,i);n.length=0,n.push(r,a),e._commandListTerrain=oee(e,n,e._commandListTerrain),o&&(e._commandListTerrainPicking=cee(e,n,e._commandListTerrainPicking))}if(e._classifies3DTiles){const i=hF.CESIUM_3D_TILE_CLASSIFICATION,r=ree(t,i),a=aee(t,i);n.length=0,n.push(r,a),e._commandList3DTiles=oee(e,n,e._commandList3DTiles),o&&(e._commandList3DTilesPicking=cee(e,n,e._commandList3DTilesPicking))}}function oee(e,t,n){const i=e._runtimePrimitive,o=i.batchLengths,r=i.batchOffsets,a=o.length,s=t.length;for(let c=0;c<a;c++){const e=o[c],i=r[c];for(let o=0;o<s;o++){const r=t[o],a=lF.shallowClone(r);a.count=e,a.offset=i,n.push(a)}}return n}function ree(e,t){const n=lF.shallowClone(e);n.cull=!1,n.pass=t;const i=t===hF.TERRAIN_CLASSIFICATION?oW.ALWAYS:oW.EQUAL,o=Z7(i);return n.renderState=UF.fromCache(o),n}function aee(e,t){const n=lF.shallowClone(e);return n.cull=!1,n.pass=t,n.renderState=UF.fromCache(eee),n}const see=[];function cee(e,t,n){const i=UF.fromCache(tee),o=t[0],r=t[1],a=lF.shallowClone(o);a.cull=!0,a.pickOnly=!0;const s=lF.shallowClone(r);s.cull=!0,s.pickOnly=!0,s.renderState=i,s.pickId=e._pickId;const c=see;return c.length=0,c.push(a,s),oee(e,c,n)}Object.defineProperties(Q7.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},batchLengths:{get:function(){return this._runtimePrimitive.batchLengths}},batchOffsets:{get:function(){return this._runtimePrimitive.batchOffsets}},model:{get:function(){return this._model}},classificationType:{get:function(){return this._classificationType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Me.clone(e,this._modelMatrix);const t=this._runtimePrimitive.boundingSphere;this._boundingVolume=Tt.transform(t,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace=e}}}),Q7.prototype.pushCommands=function(e,t){const n=e.passes;if(n.render){if(this._useDebugWireframe)return void t.push.apply(t,this._commandListDebugWireframe);this._classifiesTerrain&&t.push.apply(t,this._commandListTerrain),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTiles);const n=e.invertClassification&&this._classifies3DTiles;if(n){if(0===this._commandListIgnoreShow.length){const e=hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,t=ree(this._command,e),n=nee;n.length=0,n.push(t),this._commandListIgnoreShow=oee(this,n,this._commandListIgnoreShow)}t.push.apply(t,this._commandListIgnoreShow)}}return n.pick&&(this._classifiesTerrain&&t.push.apply(t,this._commandListTerrainPicking),this._classifies3DTiles&&t.push.apply(t,this._commandList3DTilesPicking)),t};var lee=Q7;function uee(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.command,n=e.primitiveRenderResources;i["a"].typeOf.object("options.command",t),i["a"].typeOf.object("options.primitiveRenderResources",n);const r=n.model;this._model=r;const a=n.runtimePrimitive;this._runtimePrimitive=a;const s=t.pass===hF.TRANSLUCENT,c=a.primitive.material.doubleSided,l=!c&&!s,u=n.hasSilhouette,h=!s&&!u,d=n.hasSkipLevelOfDetail&&!s,f=u;this._command=t,this._modelMatrix=Me.clone(t.modelMatrix),this._boundingVolume=Tt.clone(t.boundingVolume),this._modelMatrix2D=new Me,this._boundingVolume2D=new Tt,this._modelMatrix2DDirty=!1,this._backFaceCulling=t.renderState.cull.enabled,this._cullFace=t.renderState.cull.face,this._shadows=r.shadows,this._debugShowBoundingVolume=t.debugShowBoundingVolume,this._usesBackFaceCulling=l,this._needsTranslucentCommand=h,this._needsSkipLevelOfDetailCommands=d,this._needsSilhouetteCommands=f,this._originalCommand=void 0,this._translucentCommand=void 0,this._skipLodBackfaceCommand=void 0,this._skipLodStencilCommand=void 0,this._silhouetteModelCommand=void 0,this._silhouetteColorCommand=void 0,this._derivedCommands=[],this._has2DCommands=!1,dee(this)}function hee(e){this.command=e.command,this.updateShadows=e.updateShadows,this.updateBackFaceCulling=e.updateBackFaceCulling,this.updateCullFace=e.updateCullFace,this.updateDebugShowBoundingVolume=e.updateDebugShowBoundingVolume,this.is2D=Object(o["a"])(e.is2D,!1),this.derivedCommand2D=void 0}function dee(e){const t=e._command;t.modelMatrix=e._modelMatrix,t.boundingVolume=e._boundingVolume;const n=e._model,i=e._usesBackFaceCulling,o=e._derivedCommands;e._originalCommand=new hee({command:t,updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0,is2D:!1}),o.push(e._originalCommand),e._needsTranslucentCommand&&(e._translucentCommand=new hee({command:Aee(t),updateShadows:!0,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!0}),o.push(e._translucentCommand)),e._needsSkipLevelOfDetailCommands&&(e._skipLodBackfaceCommand=new hee({command:See(t),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:i,updateDebugShowBoundingVolume:!1}),e._skipLodStencilCommand=new hee({command:Iee(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),o.push(e._skipLodBackfaceCommand),o.push(e._skipLodStencilCommand)),e._needsSilhouetteCommands&&(e._silhouetteModelCommand=new hee({command:wee(t,n),updateShadows:!0,updateBackFaceCulling:i,updateCullFace:i,updateDebugShowBoundingVolume:!0}),e._silhouetteColorCommand=new hee({command:Tee(t,n),updateShadows:!1,updateBackFaceCulling:!1,updateCullFace:!1,updateDebugShowBoundingVolume:!1}),o.push(e._silhouetteModelCommand),o.push(e._silhouetteColorCommand))}function fee(e,t){const n=e._modelMatrix;e._modelMatrix2D=Me.clone(n,e._modelMatrix2D),e._modelMatrix2D[13]-=2*s["a"].sign(n[13])*s["a"].PI*t.mapProjection.ellipsoid.maximumRadius,e._boundingVolume2D=Tt.transform(e.runtimePrimitive.boundingSphere,e._modelMatrix2D,e._boundingVolume2D)}function pee(e){const t=e.shadows,n=DH.castShadows(t),i=DH.receiveShadows(t),o=e._derivedCommands,r=o.length;for(let a=0;a<r;++a){const e=o[a];if(e.updateShadows){const t=e.command;t.castShadows=n,t.receiveShadows=i}}}function mee(e){const t=e.backFaceCulling,n=e._derivedCommands,i=n.length;for(let o=0;o<i;++o){const e=n[o];if(e.updateBackFaceCulling){const n=e.command,i=Object(RL["a"])(n.renderState,!0);i.cull.enabled=t,n.renderState=UF.fromCache(i)}}}function _ee(e){const t=e.cullFace,n=e._derivedCommands,i=n.length;for(let o=0;o<i;++o){const e=n[o];if(e.updateCullFace){const n=e.command,i=Object(RL["a"])(n.renderState,!0);i.cull.face=t,n.renderState=UF.fromCache(i)}}}function gee(e){const t=e.debugShowBoundingVolume,n=e._derivedCommands,i=n.length;for(let o=0;o<i;++o){const e=n[o];if(e.updateDebugShowBoundingVolume){const n=e.command;n.debugShowBoundingVolume=t}}}function bee(e,t,n){e.push(t.command),n&&e.push(t.derivedCommand2D.command)}function yee(e,t){if(t.mode!==SH.SCENE2D||e.model._projectTo2D)return!1;const n=e.model,i=n.sceneGraph._boundingSphere2D,o=i.center.y-i.radius,r=i.center.y+i.radius,a=t.mapProjection.ellipsoid.maximumRadius*s["a"].PI;return o<a&&r>a||o<-a&&r>-a}function vee(e,t){if(!Object(r["a"])(t))return;const n=hee.clone(t),i=lF.shallowClone(t.command);return i.modelMatrix=e._modelMatrix2D,i.boundingVolume=e._boundingVolume2D,n.command=i,n.updateShadows=!1,n.is2D=!0,t.derivedCommand2D=n,e._derivedCommands.push(n),n}function Oee(e){vee(e,e._originalCommand),vee(e,e._translucentCommand),vee(e,e._skipLodBackfaceCommand),vee(e,e._skipLodStencilCommand),vee(e,e._silhouetteModelCommand),vee(e,e._silhouetteColorCommand)}function Aee(e){const t=lF.shallowClone(e);t.pass=hF.TRANSLUCENT;const n=Object(RL["a"])(e.renderState,!0);return n.cull.enabled=!1,n.depthMask=!1,n.blending=UN.ALPHA_BLEND,t.renderState=UF.fromCache(n),t}function wee(e,t){const n=t._silhouetteId%255,i=lF.shallowClone(e),o=Object(RL["a"])(e.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:Ys.ALWAYS,backFunction:Ys.ALWAYS,reference:n,mask:-1,frontOperation:{fail:Ys.KEEP,zFail:Ys.KEEP,zPass:Ys.REPLACE},backOperation:{fail:Ys.KEEP,zFail:Ys.KEEP,zPass:Ys.REPLACE}},t.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),i.renderState=UF.fromCache(o),i}function Tee(e,t){const n=t._silhouetteId%255,i=lF.shallowClone(e),o=Object(RL["a"])(e.renderState,!0);o.cull.enabled=!1;const r=e.pass===hF.TRANSLUCENT||t.silhouetteColor.alpha<1;r&&(i.pass=hF.TRANSLUCENT,o.depthMask=!1,o.blending=UN.ALPHA_BLEND),o.stencilTest={enabled:!0,frontFunction:Ys.NOTEQUAL,backFunction:Ys.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:Ys.KEEP,zFail:Ys.KEEP,zPass:Ys.KEEP},backOperation:{fail:Ys.KEEP,zFail:Ys.KEEP,zPass:Ys.KEEP}};const a=Object(RL["a"])(e.uniformMap);return a.model_silhouettePass=function(){return!0},i.renderState=UF.fromCache(o),i.uniformMap=a,i.castShadows=!1,i.receiveShadows=!1,i}function Cee(e,t,n){const i=e._skipLodStencilCommand,o=i.command,r=t._selectionDepth,a=Eee(o);if(r!==a){const e=xee(r),t=Object(RL["a"])(o.renderState,!0);t.stencilTest.reference=e,o.renderState=UF.fromCache(t),n&&(i.derivedCommand2D.renderState=t)}}function Eee(e){const t=e.renderState.stencilTest.reference;return(t&cW.SKIP_LOD_MASK)>>>cW.SKIP_LOD_BIT_SHIFT}function xee(e){return cW.CESIUM_3D_TILE_MASK|e<<cW.SKIP_LOD_BIT_SHIFT}function See(e){const t=lF.shallowClone(e),n=Object(RL["a"])(e.renderState,!0);n.cull.enabled=!0,n.cull.face=HN.FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5};const i=Object(RL["a"])(t.uniformMap),o=new Gt(5,5);return i.u_polygonOffset=function(){return o},t.renderState=UF.fromCache(n),t.uniformMap=i,t.castShadows=!1,t.receiveShadows=!1,t}function Iee(e){const t=lF.shallowClone(e),n=Object(RL["a"])(e.renderState,!0);return n.stencilTest.enabled=!0,n.stencilTest.mask=cW.SKIP_LOD_MASK,n.stencilTest.reference=cW.CESIUM_3D_TILE_MASK,n.stencilTest.frontFunction=oW.GREATER_OR_EQUAL,n.stencilTest.frontOperation.zPass=aW.REPLACE,n.stencilTest.backFunction=oW.GREATER_OR_EQUAL,n.stencilTest.backOperation.zPass=aW.REPLACE,n.stencilMask=cW.CESIUM_3D_TILE_MASK|cW.SKIP_LOD_MASK,t.renderState=UF.fromCache(n),t}hee.clone=function(e){return new hee({command:e.command,updateShadows:e.updateShadows,updateBackFaceCulling:e.updateBackFaceCulling,updateCullFace:e.updateCullFace,updateDebugShowBoundingVolume:e.updateDebugShowBoundingVolume,is2D:e.is2D,derivedCommand2D:e.derivedCommand2D})},Object.defineProperties(uee.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Me.clone(e,this._modelMatrix),this._modelMatrix2DDirty=!0,this._boundingVolume=Tt.transform(this.runtimePrimitive.boundingSphere,this._modelMatrix,this._boundingVolume)}},boundingVolume:{get:function(){return this._boundingVolume}},shadows:{get:function(){return this._shadows},set:function(e){this._shadows=e,pee(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){this._backFaceCulling!==e&&(this._backFaceCulling=e,mee(this))}},cullFace:{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,_ee(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolume=e,gee(this))}}}),uee.prototype.pushCommands=function(e,t){const n=yee(this,e);n&&!this._has2DCommands&&(Oee(this),this._has2DCommands=!0,this._modelMatrix2DDirty=!0),this._modelMatrix2DDirty&&(fee(this,e),this._modelMatrix2DDirty=!1);const i=this.model.styleCommandsNeeded;if(!this._needsTranslucentCommand||!Object(r["a"])(i)||(i!==H7.ALL_OPAQUE&&bee(t,this._translucentCommand,n),i!==H7.ALL_TRANSLUCENT)){if(this._needsSkipLevelOfDetailCommands){const e=this._model.content,i=e.tileset,o=e.tile,r=i._hasMixedContent,a=o._finalResolution;if(r)return a||bee(i._backfaceCommands,this._skipLodBackfaceCommand,n),Cee(this,o,n),void bee(t,this._skipLodStencilCommand,n)}if(!this._needsSilhouetteCommands)return bee(t,this._originalCommand,n),t;bee(t,this._silhouetteModelCommand,n)}},uee.prototype.pushSilhouetteCommands=function(e,t){const n=yee(this,e);return bee(t,this._silhouetteColorCommand,n),t};var Dee=uee;function Pee(e,t){const n=e.shaderBuilder;n.addVertexLines(J7),n.addFragmentLines($7);const i=jee(e),o=new WV({context:t.context,indexBuffer:i,attributes:e.attributes}),a=e.model;a._pipelineResources.push(o);const s=n.buildShaderProgram(t.context);a._pipelineResources.push(s);const c=e.alphaOptions.pass,l=a.sceneGraph,u=Me.multiplyTransformation(l.computedModelMatrix,e.runtimeNode.computedTransform,new Me);let h;if(t.mode!==SH.SCENE3D&&!t.scene3DOnly&&a._projectTo2D){const t=e.runtimePrimitive;h=t.boundingSphere2D}else h=Tt.transform(e.boundingSphere,u,e.boundingSphere);let d=Object(RL["a"])(UF.fromCache(e.renderStateOptions),!0);d.cull.face=_5.getCullFace(u,e.primitiveType),d=UF.fromCache(d);const f=Object(r["a"])(a.classificationType),p=!f&&DH.castShadows(a.shadows),m=!f&&DH.receiveShadows(a.shadows),_=f?void 0:e.pickId,g=new lF({boundingVolume:h,modelMatrix:u,uniformMap:e.uniformMap,renderState:d,vertexArray:o,shaderProgram:s,cull:a.cull,pass:c,count:e.count,owner:a,pickId:_,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:a.debugShowBoundingVolume,castShadows:p,receiveShadows:m});return f?new lee({primitiveRenderResources:e,command:g}):new Dee({primitiveRenderResources:e,command:g})}function jee(e){const t=e.wireframeIndexBuffer;if(Object(r["a"])(t))return t;const n=e.indices;if(Object(r["a"])(n)){if(!Object(r["a"])(n.buffer))throw new a["a"]("Indices must be provided as a Buffer");return n.buffer}}var Ree=Pee;const Lee={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return i["a"].typeOf.number("destination",e),e===Lee.VERTEX||e===Lee.BOTH},includesFragmentShader:function(e){return i["a"].typeOf.number("destination",e),e===Lee.FRAGMENT||e===Lee.BOTH}};var Mee=Object.freeze(Lee);const Nee={name:"TilesetPipelineStage",process:function(e,t,n){if(t.hasSkipLevelOfDetail(n)){const t=e.shaderBuilder;t.addDefine("POLYGON_OFFSET",void 0,Mee.FRAGMENT);const n={u_polygonOffset:function(){return Gt.ZERO}};e.uniformMap=Object(qE["a"])(n,e.uniformMap),e.hasSkipLevelOfDetail=!0}const i=e.renderStateOptions;i.stencilTest=cW.setCesium3DTileBit(),i.stencilMask=cW.CESIUM_3D_TILE_MASK}};var Bee=Nee,Fee="vec3 proceduralIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 v = -positionEC;\n    vec3 positionWC = vec3(czm_inverseView * vec4(positionEC, 1.0));\n    vec3 vWC = -normalize(positionWC);\n    vec3 l = normalize(lightDirectionEC);\n    vec3 n = normalEC;\n    vec3 r = normalize(czm_inverseViewRotation * normalize(reflect(v, n)));\n\n    float NdotL = clamp(dot(n, l), 0.001, 1.0);\n    float NdotV = abs(dot(n, v)) + 0.001;\n\n    // Figure out if the reflection vector hits the ellipsoid\n    float vertexRadius = length(positionWC);\n    float horizonDotNadir = 1.0 - min(1.0, czm_ellipsoidRadii.x / vertexRadius);\n    float reflectionDotNadir = dot(r, normalize(positionWC));\n    // Flipping the X vector is a cheap way to get the inverse of czm_temeToPseudoFixed, since that's a rotation about Z.\n    r.x = -r.x;\n    r = -normalize(czm_temeToPseudoFixed * r);\n    r.x = -r.x;\n\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    float inverseRoughness = 1.04 - roughness;\n    inverseRoughness *= inverseRoughness;\n    vec3 sceneSkyBox = textureCube(czm_environmentMap, r).rgb * inverseRoughness;\n\n    float atmosphereHeight = 0.05;\n    float blendRegionSize = 0.1 * ((1.0 - inverseRoughness) * 8.0 + 1.1 - horizonDotNadir);\n    float blendRegionOffset = roughness * -1.0;\n    float farAboveHorizon = clamp(horizonDotNadir - blendRegionSize * 0.5 + blendRegionOffset, 1.0e-10 - blendRegionSize, 0.99999);\n    float aroundHorizon = clamp(horizonDotNadir + blendRegionSize * 0.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float farBelowHorizon = clamp(horizonDotNadir + blendRegionSize * 1.5, 1.0e-10 - blendRegionSize, 0.99999);\n    float smoothstepHeight = smoothstep(0.0, atmosphereHeight, horizonDotNadir);\n    vec3 belowHorizonColor = mix(vec3(0.1, 0.15, 0.25), vec3(0.4, 0.7, 0.9), smoothstepHeight);\n    vec3 nadirColor = belowHorizonColor * 0.5;\n    vec3 aboveHorizonColor = mix(vec3(0.9, 1.0, 1.2), belowHorizonColor, roughness * 0.5);\n    vec3 blueSkyColor = mix(vec3(0.18, 0.26, 0.48), aboveHorizonColor, reflectionDotNadir * inverseRoughness * 0.5 + 0.75);\n    vec3 zenithColor = mix(blueSkyColor, sceneSkyBox, smoothstepHeight);\n    vec3 blueSkyDiffuseColor = vec3(0.7, 0.85, 0.9); \n    float diffuseIrradianceFromEarth = (1.0 - horizonDotNadir) * (reflectionDotNadir * 0.25 + 0.75) * smoothstepHeight;  \n    float diffuseIrradianceFromSky = (1.0 - smoothstepHeight) * (1.0 - (reflectionDotNadir * 0.25 + 0.25));\n    vec3 diffuseIrradiance = blueSkyDiffuseColor * clamp(diffuseIrradianceFromEarth + diffuseIrradianceFromSky, 0.0, 1.0);\n    float notDistantRough = (1.0 - horizonDotNadir * roughness * 0.8);\n    vec3 specularIrradiance = mix(zenithColor, aboveHorizonColor, smoothstep(farAboveHorizon, aroundHorizon, reflectionDotNadir) * notDistantRough);\n    specularIrradiance = mix(specularIrradiance, belowHorizonColor, smoothstep(aroundHorizon, farBelowHorizon, reflectionDotNadir) * inverseRoughness);\n    specularIrradiance = mix(specularIrradiance, nadirColor, smoothstep(farBelowHorizon, 1.0, reflectionDotNadir) * inverseRoughness);\n\n    // Luminance model from page 40 of http://silviojemma.com/public/papers/lighting/spherical-harmonic-lighting.pdf\n    #ifdef USE_SUN_LUMINANCE \n    // Angle between sun and zenith\n    float LdotZenith = clamp(dot(normalize(czm_inverseViewRotation * l), vWC), 0.001, 1.0);\n    float S = acos(LdotZenith);\n    // Angle between zenith and current pixel\n    float NdotZenith = clamp(dot(normalize(czm_inverseViewRotation * n), vWC), 0.001, 1.0);\n    // Angle between sun and current pixel\n    float gamma = acos(NdotL);\n    float numerator = ((0.91 + 10.0 * exp(-3.0 * gamma) + 0.45 * pow(NdotL, 2.0)) * (1.0 - exp(-0.32 / NdotZenith)));\n    float denominator = (0.91 + 10.0 * exp(-3.0 * S) + 0.45 * pow(LdotZenith,2.0)) * (1.0 - exp(-0.32));\n    float luminance = model_luminanceAtZenith * (numerator / denominator);\n    #endif \n\n    vec2 brdfLut = texture2D(czm_brdfLut, vec2(NdotV, roughness)).rg;\n    vec3 iblColor = (diffuseIrradiance * diffuseColor * model_iblFactor.x) + (specularIrradiance * czm_srgbToLinear(specularColor * brdfLut.x + brdfLut.y) * model_iblFactor.y);\n    float maximumComponent = max(max(lightColorHdr.x, lightColorHdr.y), lightColorHdr.z);\n    vec3 lightColor = lightColorHdr / max(maximumComponent, 1.0);\n    iblColor *= lightColor;\n\n    #ifdef USE_SUN_LUMINANCE \n    iblColor *= luminance;\n    #endif\n\n    return iblColor;\n}\n\nvec3 textureIBL(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    czm_pbrParameters pbrParameters\n) {\n    vec3 diffuseColor = pbrParameters.diffuseColor;\n    float roughness = pbrParameters.roughness;\n    vec3 specularColor = pbrParameters.f0;\n\n    vec3 v = -positionEC;\n    vec3 n = normalEC;\n    vec3 l = normalize(lightDirectionEC);\n    vec3 h = normalize(v + l);\n\n    float NdotV = abs(dot(n, v)) + 0.001;\n    float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n    const mat3 yUpToZUp = mat3(\n        -1.0, 0.0, 0.0,\n        0.0, 0.0, -1.0, \n        0.0, 1.0, 0.0\n    ); \n    vec3 cubeDir = normalize(yUpToZUp * model_iblReferenceFrameMatrix * normalize(reflect(-v, n))); \n\n    #ifdef DIFFUSE_IBL \n        #ifdef CUSTOM_SPHERICAL_HARMONICS\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, model_sphericalHarmonicCoefficients); \n        #else\n        vec3 diffuseIrradiance = czm_sphericalHarmonics(cubeDir, czm_sphericalHarmonicCoefficients); \n        #endif \n    #else \n    vec3 diffuseIrradiance = vec3(0.0); \n    #endif \n\n    #ifdef SPECULAR_IBL\n    vec3 r0 = specularColor.rgb;\n    float reflectance = max(max(r0.r, r0.g), r0.b);\n    vec3 r90 = vec3(clamp(reflectance * 25.0, 0.0, 1.0));\n    vec3 F = fresnelSchlick2(r0, r90, VdotH);\n    \n    vec2 brdfLut = texture2D(czm_brdfLut, vec2(NdotV, roughness)).rg;\n      #ifdef CUSTOM_SPECULAR_IBL \n      vec3 specularIBL = czm_sampleOctahedralProjection(model_specularEnvironmentMaps, model_specularEnvironmentMapsSize, cubeDir, roughness * model_specularEnvironmentMapsMaximumLOD, model_specularEnvironmentMapsMaximumLOD);\n      #else \n      vec3 specularIBL = czm_sampleOctahedralProjection(czm_specularEnvironmentMaps, czm_specularEnvironmentMapSize, cubeDir,  roughness * czm_specularEnvironmentMapsMaximumLOD, czm_specularEnvironmentMapsMaximumLOD);\n      #endif \n    specularIBL *= F * brdfLut.x + brdfLut.y;\n    #else \n    vec3 specularIBL = vec3(0.0); \n    #endif\n\n    return diffuseColor * diffuseIrradiance + specularColor * specularIBL;\n}\n\nvec3 imageBasedLightingStage(\n    vec3 positionEC,\n    vec3 normalEC,\n    vec3 lightDirectionEC,\n    vec3 lightColorHdr,\n    czm_pbrParameters pbrParameters\n) {\n  #if defined(DIFFUSE_IBL) || defined(SPECULAR_IBL)\n  // Environment maps were provided, use them for IBL\n  return textureIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      pbrParameters\n  );\n  #else\n  // Use the procedural IBL if there are no environment maps\n  return proceduralIBL(\n      positionEC,\n      normalEC,\n      lightDirectionEC,\n      lightColorHdr,\n      pbrParameters\n  );\n  #endif\n}";const zee={name:"ImageBasedLightingPipelineStage",process:function(e,t,n){const i=t.imageBasedLighting,o=e.shaderBuilder;if(o.addDefine("USE_IBL_LIGHTING",void 0,Mee.FRAGMENT),o.addUniform("vec2","model_iblFactor",Mee.FRAGMENT),AX.isSupported(n.context)){const e=i.useSphericalHarmonics||i.useSpecularEnvironmentMaps||i.enabled;e&&o.addUniform("mat3","model_iblReferenceFrameMatrix",Mee.FRAGMENT),Object(r["a"])(i.sphericalHarmonicCoefficients)?(o.addDefine("DIFFUSE_IBL",void 0,Mee.FRAGMENT),o.addDefine("CUSTOM_SPHERICAL_HARMONICS",void 0,Mee.FRAGMENT),o.addUniform("vec3","model_sphericalHarmonicCoefficients[9]",Mee.FRAGMENT)):i.useDefaultSphericalHarmonics&&o.addDefine("DIFFUSE_IBL",void 0,Mee.FRAGMENT),Object(r["a"])(i.specularEnvironmentMapAtlas)&&i.specularEnvironmentMapAtlas.ready?(o.addDefine("SPECULAR_IBL",void 0,Mee.FRAGMENT),o.addDefine("CUSTOM_SPECULAR_IBL",void 0,Mee.FRAGMENT),o.addUniform("sampler2D","model_specularEnvironmentMaps",Mee.FRAGMENT),o.addUniform("vec2","model_specularEnvironmentMapsSize",Mee.FRAGMENT),o.addUniform("float","model_specularEnvironmentMapsMaximumLOD",Mee.FRAGMENT)):t.useDefaultSpecularMaps&&o.addDefine("SPECULAR_IBL",void 0,Mee.FRAGMENT)}Object(r["a"])(i.luminanceAtZenith)&&(o.addDefine("USE_SUN_LUMINANCE",void 0,Mee.FRAGMENT),o.addUniform("float","model_luminanceAtZenith",Mee.FRAGMENT)),o.addFragmentLines(Fee);const a={model_iblFactor:function(){return i.imageBasedLightingFactor},model_iblReferenceFrameMatrix:function(){return t._iblReferenceFrameMatrix},model_luminanceAtZenith:function(){return i.luminanceAtZenith},model_sphericalHarmonicCoefficients:function(){return i.sphericalHarmonicCoefficients},model_specularEnvironmentMaps:function(){return i.specularEnvironmentMapAtlas.texture},model_specularEnvironmentMapsSize:function(){return i.specularEnvironmentMapAtlas.texture.dimensions},model_specularEnvironmentMapsMaximumLOD:function(){return i.specularEnvironmentMapAtlas.maximumMipmapLevel}};e.uniformMap=Object(qE["a"])(a,e.uniformMap)}};var kee=zee;const Uee=s["a"].EPSILON16;function Vee(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.stage,n=e.runtimeArticulation;i["a"].typeOf.object("options.stage",t),i["a"].typeOf.object("options.runtimeArticulation",n),this._stage=t,this._runtimeArticulation=n,this._name=t.name,this._type=t.type,this._minimumValue=t.minimumValue,this._maximumValue=t.maximumValue,this._currentValue=t.initialValue}Object.defineProperties(Vee.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(e){i["a"].typeOf.number("value",e),e=s["a"].clamp(e,this.minimumValue,this.maximumValue),s["a"].equalsEpsilon(this._currentValue,e,Uee)||(this._currentValue=e,this.runtimeArticulation._dirty=!0)}}});const Hee=new g,Gee=new ce;Vee.prototype.applyStageToMatrix=function(e){i["a"].typeOf.object("result",e);const t=this.type,n=this.currentValue,o=Hee;let r;switch(t){case du.XROTATE:r=ce.fromRotationX(s["a"].toRadians(n),Gee),e=Me.multiplyByMatrix3(e,r,e);break;case du.YROTATE:r=ce.fromRotationY(s["a"].toRadians(n),Gee),e=Me.multiplyByMatrix3(e,r,e);break;case du.ZROTATE:r=ce.fromRotationZ(s["a"].toRadians(n),Gee),e=Me.multiplyByMatrix3(e,r,e);break;case du.XTRANSLATE:o.x=n,o.y=0,o.z=0,e=Me.multiplyByTranslation(e,o,e);break;case du.YTRANSLATE:o.x=0,o.y=n,o.z=0,e=Me.multiplyByTranslation(e,o,e);break;case du.ZTRANSLATE:o.x=0,o.y=0,o.z=n,e=Me.multiplyByTranslation(e,o,e);break;case du.XSCALE:o.x=n,o.y=1,o.z=1,e=Me.multiplyByScale(e,o,e);break;case du.YSCALE:o.x=1,o.y=n,o.z=1,e=Me.multiplyByScale(e,o,e);break;case du.ZSCALE:o.x=1,o.y=1,o.z=n,e=Me.multiplyByScale(e,o,e);break;case du.UNIFORMSCALE:e=Me.multiplyByUniformScale(e,n,e);break;default:break}return e};var Wee=Vee;function qee(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.articulation,n=e.sceneGraph;i["a"].typeOf.object("options.articulation",t),i["a"].typeOf.object("options.sceneGraph",n),this._articulation=t,this._sceneGraph=n,this._name=t.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,Yee(this)}function Yee(e){const t=e.articulation,n=t.stages,i=n.length,o=e._runtimeStages,r=e._runtimeStagesByName;for(let a=0;a<i;a++){const t=n[a],i=new Wee({stage:t,runtimeArticulation:e});o.push(i);const s=t.name;r[s]=i}}Object.defineProperties(qee.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}}),qee.prototype.setArticulationStage=function(e,t){const n=this._runtimeStagesByName[e];Object(r["a"])(n)&&(n.currentValue=t)};const Xee=new Me,Kee=new Me;qee.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let e,t=Me.clone(Me.IDENTITY,Xee);const n=this._runtimeStages,i=n.length;for(e=0;e<i;e++){const i=n[e];t=i.applyStageToMatrix(t)}const o=this._runtimeNodes,r=o.length;for(e=0;e<r;e++){const n=o[e],i=Me.multiplyTransformation(n.originalTransform,t,Kee);n.transform=i}};var $ee=qee,Jee="void modelColorStage(inout czm_modelMaterial material)\n{\n    material.diffuse = mix(material.diffuse, model_color.rgb, model_colorBlend);\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(model_color.rgb, vec3(1.0), highlight);\n    material.alpha *= model_color.a;\n}";const Qee={name:"ModelColorPipelineStage",COLOR_UNIFORM_NAME:"model_color",COLOR_BLEND_UNIFORM_NAME:"model_colorBlend",process:function(e,t,n){const i=e.shaderBuilder;i.addDefine("HAS_MODEL_COLOR",void 0,Mee.FRAGMENT),i.addFragmentLines(Jee);const o={},r=t.color;0!==r.alpha||t.hasSilhouette(n)||(e.renderStateOptions.colorMask={red:!1,green:!1,blue:!1,alpha:!1}),r.alpha<1&&(e.alphaOptions.pass=hF.TRANSLUCENT),i.addUniform("vec4",Qee.COLOR_UNIFORM_NAME,Mee.FRAGMENT),o[Qee.COLOR_UNIFORM_NAME]=function(){return t.color},i.addUniform("float",Qee.COLOR_BLEND_UNIFORM_NAME,Mee.FRAGMENT),o[Qee.COLOR_BLEND_UNIFORM_NAME]=function(){return T4.getColorBlend(t.colorBlendMode,t.colorBlendAmount)},e.uniformMap=Object(qE["a"])(o,e.uniformMap)}};var Zee=Qee,ete="#ifdef USE_CLIPPING_PLANES_FLOAT_TEXTURE\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int pixY = clippingPlaneNumber / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneNumber - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 plane = texture2D(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n#else\n// Handle uint8 clipping texture instead\nvec4 getClippingPlane(\n    highp sampler2D packedClippingPlanes,\n    int clippingPlaneNumber,\n    mat4 transform\n) {\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2; // clipping planes are two pixels each\n    int pixY = clippingPlaneStartIndex / CLIPPING_PLANES_TEXTURE_WIDTH;\n    int pixX = clippingPlaneStartIndex - (pixY * CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelWidth = 1.0 / float(CLIPPING_PLANES_TEXTURE_WIDTH);\n    float pixelHeight = 1.0 / float(CLIPPING_PLANES_TEXTURE_HEIGHT);\n    float u = (float(pixX) + 0.5) * pixelWidth; // sample from center of pixel\n    float v = (float(pixY) + 0.5) * pixelHeight;\n    vec4 oct32 = texture2D(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n    plane.w = czm_unpackFloat(texture2D(packedClippingPlanes, vec2(u + pixelWidth, v)));\n    return czm_transformPlane(plane, transform);\n}\n#endif\n\nfloat clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix) {\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float pixelWidth = czm_metersPerPixel(position);\n    \n    #ifdef UNION_CLIPPING_REGIONS\n    float clipAmount; // For union planes, we want to get the min distance. So we set the initial value to the first plane distance in the loop below.\n    #else\n    float clipAmount = 0.0;\n    bool clipped = true;\n    #endif\n\n    for (int i = 0; i < CLIPPING_PLANES_LENGTH; ++i) {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        \n        #ifdef UNION_CLIPPING_REGIONS\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0) {\n            discard;\n        }\n        #else\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n        #endif\n    }\n\n    #ifndef UNION_CLIPPING_REGIONS\n    if (clipped) {\n        discard;\n    }\n    #endif\n    \n    return clipAmount;\n}\n\nvoid modelClippingPlanesStage(inout vec4 color)\n{\n    float clipDistance = clip(gl_FragCoord, model_clippingPlanes, model_clippingPlanesMatrix);\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = model_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = model_clippingPlanesEdgeStyle.a;\n    \n    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) {\n        color = clippingPlanesEdgeColor;\n    }\n}\n";const tte={name:"ModelClippingPlanesPipelineStage"},nte=new Gt;tte.process=function(e,t,n){const i=t.clippingPlanes,o=n.context,r=e.shaderBuilder;r.addDefine("HAS_CLIPPING_PLANES",void 0,Mee.FRAGMENT),r.addDefine("CLIPPING_PLANES_LENGTH",i.length,Mee.FRAGMENT),i.unionClippingRegions&&r.addDefine("UNION_CLIPPING_REGIONS",void 0,Mee.FRAGMENT),A4.useFloatTexture(o)&&r.addDefine("USE_CLIPPING_PLANES_FLOAT_TEXTURE",void 0,Mee.FRAGMENT);const a=A4.getTextureResolution(i,o,nte);r.addDefine("CLIPPING_PLANES_TEXTURE_WIDTH",a.x,Mee.FRAGMENT),r.addDefine("CLIPPING_PLANES_TEXTURE_HEIGHT",a.y,Mee.FRAGMENT),r.addUniform("sampler2D","model_clippingPlanes",Mee.FRAGMENT),r.addUniform("vec4","model_clippingPlanesEdgeStyle",Mee.FRAGMENT),r.addUniform("mat4","model_clippingPlanesMatrix",Mee.FRAGMENT),r.addFragmentLines(ete);const s={model_clippingPlanes:function(){return i.texture},model_clippingPlanesEdgeStyle:function(){const e=Dm.clone(i.edgeColor);return e.alpha=i.edgeWidth,e},model_clippingPlanesMatrix:function(){return t._clippingPlanesMatrix}};e.uniformMap=Object(qE["a"])(s,e.uniformMap)};var ite=tte;function ote(e,t){i["a"].typeOf.object("model",e),i["a"].typeOf.object("runtimeNode",t),this._model=e,this._runtimeNode=t}Object.defineProperties(ote.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(e){this._runtimeNode.show=e}},matrix:{get:function(){return this._runtimeNode.transform},set:function(e){Object(r["a"])(e)?(this._runtimeNode.transform=e,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});var rte=ote,ate="mat4 getInstancingTransform()\n{\n    mat4 instancingTransform;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform = mat4(\n        a_instancingTransformRow0.x, a_instancingTransformRow1.x, a_instancingTransformRow2.x, 0.0, // Column 1\n        a_instancingTransformRow0.y, a_instancingTransformRow1.y, a_instancingTransformRow2.y, 0.0, // Column 2\n        a_instancingTransformRow0.z, a_instancingTransformRow1.z, a_instancingTransformRow2.z, 0.0, // Column 3\n        a_instancingTransformRow0.w, a_instancingTransformRow1.w, a_instancingTransformRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation = a_instanceTranslation;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation.x, translation.y, translation.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform;\n}\n\n#ifdef USE_2D_INSTANCING\nmat4 getInstancingTransform2D()\n{\n    mat4 instancingTransform2D;\n\n    #ifdef HAS_INSTANCE_MATRICES\n    instancingTransform2D = mat4(\n        a_instancingTransform2DRow0.x, a_instancingTransform2DRow1.x, a_instancingTransform2DRow2.x, 0.0, // Column 1\n        a_instancingTransform2DRow0.y, a_instancingTransform2DRow1.y, a_instancingTransform2DRow2.y, 0.0, // Column 2\n        a_instancingTransform2DRow0.z, a_instancingTransform2DRow1.z, a_instancingTransform2DRow2.z, 0.0, // Column 3\n        a_instancingTransform2DRow0.w, a_instancingTransform2DRow1.w, a_instancingTransform2DRow2.w, 1.0  // Column 4\n    );\n    #else\n    vec3 translation2D = vec3(0.0, 0.0, 0.0);\n    vec3 scale = vec3(1.0, 1.0, 1.0);\n    \n        #ifdef HAS_INSTANCE_TRANSLATION\n        translation2D = a_instanceTranslation2D;\n        #endif\n        #ifdef HAS_INSTANCE_SCALE\n        scale = a_instanceScale;\n        #endif\n\n    instancingTransform2D = mat4(\n        scale.x, 0.0, 0.0, 0.0,\n        0.0, scale.y, 0.0, 0.0,\n        0.0, 0.0, scale.z, 0.0,\n        translation2D.x, translation2D.y, translation2D.z, 1.0\n    ); \n    #endif\n\n    return instancingTransform2D;\n}\n#endif\n",ste="void instancingStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    vec3 normalMC = attributes.normalMC;\n    \n    mat4 instancingTransform = getInstancingTransform();\n    \n    attributes.positionMC = (instancingTransform * vec4(positionMC, 1.0)).xyz;\n    attributes.normalMC = (instancingTransform * vec4(normalMC, 0.0)).xyz;\n\n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n",cte="void legacyInstancingStage(\n    inout ProcessedAttributes attributes,\n    out mat4 instanceModelView,\n    out mat3 instanceModelViewInverseTranspose)\n{\n    vec3 positionMC = attributes.positionMC;\n    vec3 normalMC = attributes.normalMC;\n\n    mat4 instancingTransform = getInstancingTransform();\n \n    mat4 instanceModel = instancingTransform * u_instance_nodeTransform;\n    instanceModelView = u_instance_modifiedModelView;\n    instanceModelViewInverseTranspose = mat3(u_instance_modifiedModelView * instanceModel);\n\n    attributes.positionMC = (instanceModel * vec4(positionMC, 1.0)).xyz;\n    \n    #ifdef USE_2D_INSTANCING\n    mat4 instancingTransform2D = getInstancingTransform2D();\n    attributes.position2D = (instancingTransform2D * vec4(positionMC, 1.0)).xyz;\n    #endif\n}\n";const lte=new Me,ute=new Me,hte=new Me,dte={name:"InstancingPipelineStage",process:function(e,t,n){const i=t.instances,o=i.attributes[0].count,r=e.shaderBuilder;r.addDefine("HAS_INSTANCING"),r.addVertexLines(ate);const a=e.model,s=a.sceneGraph,c=e.runtimeNode,l=n.mode!==SH.SCENE3D&&!n.scene3DOnly&&a._projectTo2D,u=[];Mte(e,n,i,u,l),kte(e,n,i,u);const h={};if(i.transformInWorldSpace?(r.addDefine("USE_LEGACY_INSTANCING",void 0,Mee.VERTEX),r.addUniform("mat4","u_instance_modifiedModelView",Mee.VERTEX),r.addUniform("mat4","u_instance_nodeTransform",Mee.VERTEX),h.u_instance_modifiedModelView=function(){let e=Me.multiplyTransformation(a.modelMatrix,s.components.transform,lte);return l?Me.multiplyTransformation(n.context.uniformState.view3D,e,lte):(n.mode!==SH.SCENE3D&&(e=ka.basisTo2D(n.mapProjection,e,lte)),Me.multiplyTransformation(n.context.uniformState.view,e,lte))},h.u_instance_nodeTransform=function(){return Me.multiplyTransformation(s.axisCorrectionMatrix,c.computedTransform,ute)},r.addVertexLines(cte)):r.addVertexLines(ste),l){r.addDefine("USE_2D_INSTANCING",void 0,Mee.VERTEX),r.addUniform("mat4","u_modelView2D",Mee.VERTEX);const e=n.context,t=Me.fromTranslation(c.instancingReferencePoint2D,new Me);h.u_modelView2D=function(){return Me.multiplyTransformation(e.uniformState.view,t,hte)}}e.uniformMap=Object(qE["a"])(h,e.uniformMap),e.instanceCount=o,e.attributes.push.apply(e.attributes,u)}},fte=new Me,pte=new g;function mte(e,t,n,i,o){let r=Me.multiplyTransformation(t,e,fte);return r=Me.multiplyTransformation(r,n,fte),o=ka.basisTo2D(i.mapProjection,r,o),o}function _te(e,t,n,i,o){const r=Me.fromTranslation(e,fte);let a=Me.multiplyTransformation(t,r,fte);a=Me.multiplyTransformation(a,n,fte);const s=Me.getTranslation(a,pte);return o=f9.computeActualWgs84Position(i,s,o),o}function gte(e,t,n){const i=e.model,o=i.sceneGraph,r=e.runtimeNode.node.instances;r.transformInWorldSpace?(t=Me.multiplyTransformation(i.modelMatrix,o.components.transform,t),n=Me.multiplyTransformation(o.axisCorrectionMatrix,e.runtimeNode.computedTransform,n)):(t=Me.clone(o.computedModelMatrix,t),t=Me.multiplyTransformation(t,e.runtimeNode.computedTransform,t),n=Me.clone(Me.IDENTITY,n))}const bte=new Me,yte=new Me,vte=new Me,Ote=new g;function Ate(e,t,n,i){const o=bte,r=yte;gte(t,o,r);const a=t.runtimeNode,s=a.instancingReferencePoint2D,c=e.length;for(let l=0;l<c;l++){const t=e[l],a=mte(t,o,r,n,vte),c=Me.getTranslation(a,Ote),u=g.subtract(c,s,c);i[l]=Me.setTranslation(a,u,i[l])}return i}function wte(e,t,n,i){const o=bte,r=yte;gte(t,o,r);const a=t.runtimeNode,s=a.instancingReferencePoint2D,c=e.length;for(let l=0;l<c;l++){const t=e[l],a=_te(t,o,r,n,t);i[l]=g.subtract(a,s,i[l])}return i}const Tte=new g,Cte=new g;function Ete(e,t){const n=e.runtimeNode,i=e.model.sceneGraph.computedModelMatrix,o=Me.multiplyByPoint(i,n.instancingTranslationMin,Tte),r=f9.computeActualWgs84Position(t,o,o),a=Me.multiplyByPoint(i,n.instancingTranslationMax,Cte),s=f9.computeActualWgs84Position(t,a,a);n.instancingReferencePoint2D=g.lerp(r,s,.5,new g)}function xte(e){const t=12,n=e.length,i=new Float32Array(n*t);for(let o=0;o<n;o++){const n=e[o],r=t*o;i[r+0]=n[0],i[r+1]=n[4],i[r+2]=n[8],i[r+3]=n[12],i[r+4]=n[1],i[r+5]=n[5],i[r+6]=n[9],i[r+7]=n[13],i[r+8]=n[2],i[r+9]=n[6],i[r+10]=n[10],i[r+11]=n[14]}return i}function Ste(e){const t=3,n=e.length,i=new Float32Array(n*t);for(let o=0;o<n;o++){const n=e[o],r=t*o;i[r+0]=n[0],i[r+1]=n[4],i[r+2]=n[8]}return i}const Ite=new g,Dte=new Kr,Pte=new g;function jte(e,t,n){const i=new Array(t),o=_5.getAttributeBySemantic(e,b5.TRANSLATION),a=_5.getAttributeBySemantic(e,b5.ROTATION),s=_5.getAttributeBySemantic(e,b5.SCALE),c=new g(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),l=new g(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),u=Object(r["a"])(o),h=Object(r["a"])(a),d=Object(r["a"])(s),f=u?o.typedArray:new Float32Array(3*t),p=h?a.typedArray:new Float32Array(4*t);let m;d?m=s.typedArray:(m=new Float32Array(3*t),m.fill(1));for(let r=0;r<t;r++){const e=new g(f[3*r],f[3*r+1],f[3*r+2],Ite);g.maximumByComponent(c,e,c),g.minimumByComponent(l,e,l);const t=new Kr(p[4*r],p[4*r+1],p[4*r+2],h?p[4*r+3]:1,Dte),n=new g(m[3*r],m[3*r+1],m[3*r+2],Pte),o=Me.fromTranslationQuaternionRotationScale(e,t,n,new Me);i[r]=o}const _=n.runtimeNode;return _.instancingTranslationMin=l,_.instancingTranslationMax=c,u&&(o.typedArray=void 0),h&&(a.typedArray=void 0),d&&(s.typedArray=void 0),i}function Rte(e,t,n){const i=new Array(t),o=e.typedArray,r=new g(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a=new g(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let c=0;c<t;c++){const e=new g(o[3*c],o[3*c+1],o[3*c+2]);i[c]=e,g.minimumByComponent(r,e,r),g.maximumByComponent(a,e,a)}const s=n.runtimeNode;return s.instancingTranslationMin=r,s.instancingTranslationMax=a,e.typedArray=void 0,i}function Lte(e,t){const n=NV.createVertexBuffer({context:t.context,typedArray:e,usage:LV.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}function Mte(e,t,n,i,o){const a=_5.getAttributeBySemantic(n,b5.ROTATION);Object(r["a"])(a)?Nte(e,n,i,t,o):Bte(e,n,i,t,o)}function Nte(e,t,n,i,o){const a=e.shaderBuilder,s=t.attributes[0].count,c=e.model,l=e.runtimeNode;a.addDefine("HAS_INSTANCE_MATRICES");const u="Transform";let h,d=l.instancingTransformsBuffer;if(!Object(r["a"])(d)){h=jte(t,s,e);const n=xte(h);d=Lte(n,i),c._modelResources.push(d),l.instancingTransformsBuffer=d}if(Fte(e,d,n,u),!o)return;const f=Object(RL["a"])(i);f.mode=SH.COLUMBUS_VIEW,Ete(e,f);let p=l.instancingTransformsBuffer2D;if(!Object(r["a"])(p)){const t=Ate(h,e,f,h),n=xte(t);p=Lte(n,i),c._modelResources.push(p),l.instancingTransformsBuffer2D=p}const m="Transform2D";Fte(e,p,n,m)}function Bte(e,t,n,i,o){const a=e.shaderBuilder,s=e.runtimeNode,c=_5.getAttributeBySemantic(t,b5.TRANSLATION),l=_5.getAttributeBySemantic(t,b5.SCALE);if(Object(r["a"])(l)){a.addDefine("HAS_INSTANCE_SCALE");const t="Scale";zte(e,l.buffer,l.byteOffset,l.byteStride,n,t)}if(!Object(r["a"])(c))return;let u;const h=c.typedArray;Object(r["a"])(h)?u=Rte(c,c.count,e):Object(r["a"])(s.instancingTranslationMin)||(s.instancingTranslationMin=c.min,s.instancingTranslationMax=c.max),a.addDefine("HAS_INSTANCE_TRANSLATION");const d="Translation";if(zte(e,c.buffer,c.byteOffset,c.byteStride,n,d),!o)return;const f=Object(RL["a"])(i);f.mode=SH.COLUMBUS_VIEW,Ete(e,f);let p=s.instancingTranslationBuffer2D;if(!Object(r["a"])(p)){const t=wte(u,e,f,u),n=Ste(t);p=Lte(n,i),e.model._modelResources.push(p),s.instancingTranslationBuffer2D=p}const m=0,_=void 0,g="Translation2D";zte(e,p,m,_,n,g)}function Fte(e,t,n,i){const o=12,r=Ks.getSizeInBytes(Ks.FLOAT),a=r*o,s=[{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,normalize:!1,offsetInBytes:4*r,strideInBytes:a,instanceDivisor:1},{index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,normalize:!1,offsetInBytes:8*r,strideInBytes:a,instanceDivisor:1}],c=e.shaderBuilder;c.addAttribute("vec4",`a_instancing${i}Row0`),c.addAttribute("vec4",`a_instancing${i}Row1`),c.addAttribute("vec4",`a_instancing${i}Row2`),n.push.apply(n,s)}function zte(e,t,n,i,o,r){o.push({index:e.attributeIndex++,vertexBuffer:t,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,normalize:!1,offsetInBytes:n,strideInBytes:i,instanceDivisor:1});const a=e.shaderBuilder;a.addAttribute("vec3",`a_instance${r}`)}function kte(e,t,n,i){const o=n.attributes,r=e.shaderBuilder;for(let a=0;a<o.length;a++){const t=o[a];t.semantic===b5.FEATURE_ID&&(t.setIndex>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=t.setIndex+1),i.push({index:e.attributeIndex++,vertexBuffer:t.buffer,componentsPerAttribute:rc.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,normalize:!1,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,instanceDivisor:1}),r.addAttribute("float",`a_instanceFeatureId_${t.setIndex}`))}}dte._getInstanceTransformsAsMatrices=jte,dte._transformsToTypedArray=xte;var Ute=dte;const Vte={};function Hte(e,t,n,i){let o;i=Me.multiplyTransformation(i,e.transform,new Me),e.updateComputedTransform();const r=e.runtimePrimitives.length;for(o=0;o<r;o++){const t=e.runtimePrimitives[o],r=t.drawCommand;r.modelMatrix=Me.multiplyTransformation(n,i,r.modelMatrix),r.cullFace=_5.getCullFace(r.modelMatrix,r.primitiveType)}const a=e.children.length;for(o=0;o<a;o++){const r=t._runtimeNodes[e.children[o]];r._transformToRoot=Me.clone(i,r._transformToRoot),Hte(r,t,n,i),r._transformDirty=!1}}Vte.name="ModelMatrixUpdateStage",Vte.update=function(e,t,n){const i=n.mode!==SH.SCENE3D;if((!i||!t._model._projectTo2D)&&e._transformDirty){const n=i?t._computedModelMatrix2D:t._computedModelMatrix;Hte(e,t,n,e.transformToRoot),e._transformDirty=!1}};var Gte=Vte;const Wte={};function qte(e,t){if(!Object(r["a"])(t))return;const n=t.attributes,i=n.length;for(let o=0;o<i;o++){const t=n[o];if(Object(r["a"])(t.buffer)){const n=!1;e.addBuffer(t.buffer,n)}}}function Yte(e,t){if(Object(r["a"])(t.instancingTransformsBuffer)){const n=!1;e.addBuffer(t.instancingTransformsBuffer,n)}if(Object(r["a"])(t.instancingTransformsBuffer2D)){const n=!1;e.addBuffer(t.instancingTransformsBuffer2D,n)}if(Object(r["a"])(t.instancingTranslationBuffer2D)){const n=!1;e.addBuffer(t.instancingTranslationBuffer2D,n)}}Wte.name="NodeStatisticsPipelineStage",Wte.process=function(e,t,n){const i=e.model.statistics,o=t.instances,r=e.runtimeNode;qte(i,o),Yte(i,r)},Wte._countInstancingAttributes=qte,Wte._countGeneratedBuffers=Yte;var Xte=Wte;function Kte(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.node,n=e.transform,r=e.transformToRoot,a=e.sceneGraph,s=e.children;i["a"].typeOf.object("options.node",t),i["a"].typeOf.object("options.transform",n),i["a"].typeOf.object("options.transformToRoot",r),i["a"].typeOf.object("options.sceneGraph",a),i["a"].typeOf.object("options.children",s),this._node=t,this._name=t.name,this._id=t.index,this._sceneGraph=a,this._children=s,this._originalTransform=Me.clone(n,this._originalTransform),this._transform=Me.clone(n,this._transform),this._transformToRoot=Me.clone(r,this._transformToRoot),this._computedTransform=new Me,this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTranslationMin=void 0,this.instancingTranslationMax=void 0,this.instancingTransformsBuffer=void 0,this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,this.instancingReferencePoint2D=void 0,$te(this)}function $te(e){const t=e.transform,n=e.transformToRoot,i=e._computedTransform;e._computedTransform=Me.multiply(n,t,i);const o=e.node;Object(r["a"])(o.matrix)||(e._transformParameters=new jR(o.translation,o.rotation,o.scale)),Object(r["a"])(o.morphWeights)&&(e._morphWeights=o.morphWeights.slice());const a=o.articulationName;if(Object(r["a"])(a)){const t=e.sceneGraph,n=t._runtimeArticulations,i=n[a];Object(r["a"])(i)&&i.runtimeNodes.push(e)}}function Jte(e,t){e._transformDirty=!0,e._transform=Me.fromTranslationRotationScale(t,e._transform)}Object.defineProperties(Kte.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(e){this._transformDirty=!0,this._transform=Me.clone(e,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return Object(r["a"])(this._transformParameters)?this._transformParameters.translation:void 0},set:function(e){const t=this._transformParameters;if(!Object(r["a"])(t))throw new a["a"]("The translation of a node cannot be set if it was defined using a matrix in the model.");const n=t.translation;g.equals(n,e)||(t.translation=g.clone(e,t.translation),Jte(this,t))}},rotation:{get:function(){return Object(r["a"])(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(e){const t=this._transformParameters;if(!Object(r["a"])(t))throw new a["a"]("The rotation of a node cannot be set if it was defined using a matrix in the model.");const n=t.rotation;Kr.equals(n,e)||(t.rotation=Kr.clone(e,t.rotation),Jte(this,t))}},scale:{get:function(){return Object(r["a"])(this._transformParameters)?this._transformParameters.scale:void 0},set:function(e){const t=this._transformParameters;if(!Object(r["a"])(t))throw new a["a"]("The scale of a node cannot be set if it was defined using a matrix in the model.");const n=t.scale;g.equals(n,e)||(t.scale=g.clone(e,t.scale),Jte(this,t))}},morphWeights:{get:function(){return this._morphWeights},set:function(e){const t=e.length;if(this._morphWeights.length!==t)throw new a["a"]("value must have the same length as the original weights array.");for(let n=0;n<t;n++)this._morphWeights[n]=e[n]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),Kte.prototype.getChild=function(e){if(i["a"].typeOf.number("index",e),e<0||e>=this.children.length)throw new a["a"]("index must be greater than or equal to 0 and less than the number of children.");return this.sceneGraph._runtimeNodes[this.children[e]]},Kte.prototype.configurePipeline=function(){const e=this.node,t=this.pipelineStages;t.length=0;const n=this.updateStages;n.length=0,Object(r["a"])(e.instances)&&t.push(Ute),t.push(Xte),n.push(Gte)},Kte.prototype.updateComputedTransform=function(){this._computedTransform=Me.multiply(this._transformToRoot,this._transform,this._computedTransform)},Kte.prototype.updateJointMatrices=function(){const e=this._runtimeSkin;if(!Object(r["a"])(e))return;e.updateJointMatrices();const t=this._computedJointMatrices,n=e.jointMatrices,i=n.length;for(let o=0;o<i;o++){Object(r["a"])(t[o])||(t[o]=new Me);const e=Me.multiplyTransformation(this.transformToRoot,this.transform,t[o]),i=Me.inverseTransformation(e,t[o]);t[o]=Me.multiplyTransformation(i,n[o],t[o])}};var Qte=Kte;const Zte={name:"AlphaPipelineStage",process:function(e,t,n){const i=e.alphaOptions,a=e.model;i.pass=Object(o["a"])(i.pass,a.opaquePass);const s=e.renderStateOptions;i.pass===hF.TRANSLUCENT&&(s.cull.enabled=!1,s.depthMask=!1,s.blending=UN.ALPHA_BLEND);const c=e.shaderBuilder,l=e.uniformMap;Object(r["a"])(i.alphaCutoff)&&(c.addDefine("ALPHA_MODE_MASK",void 0,Mee.FRAGMENT),c.addUniform("float","u_alphaCutoff",Mee.FRAGMENT),l.u_alphaCutoff=function(){return i.alphaCutoff})}};var ene=Zte;const tne={name:"BatchTexturePipelineStage",process:function(e,t,n){const i=e.shaderBuilder,r={},a=e.model,s=a.featureTables[a.featureTableId],c=s.featuresLength;i.addUniform("int","model_featuresLength"),r.model_featuresLength=function(){return c};const l=s.batchTexture;i.addUniform("sampler2D","model_batchTexture"),r.model_batchTexture=function(){return Object(o["a"])(l.batchTexture,l.defaultTexture)},i.addUniform("vec4","model_textureStep"),r.model_textureStep=function(){return l.textureStep},l.textureDimensions.y>1&&(i.addDefine("MULTILINE_BATCH_TEXTURE"),i.addUniform("vec2","model_textureDimensions"),r.model_textureDimensions=function(){return l.textureDimensions}),e.uniformMap=Object(qE["a"])(r,e.uniformMap)}};var nne=tne;const ine={};function one(e,t){const n=_5.getAttributeBySemantic(e,h5.POSITION);if(!Object(r["a"])(n))throw new ye["a"]("Primitives must have a position attribute to be used for classification.");let i;const o=e.indices,a=Object(r["a"])(o);a&&(i=o.typedArray,o.typedArray=void 0);const s=a?o.count:n.count,c=_5.getAttributeBySemantic(e,h5.FEATURE_ID,0);if(!Object(r["a"])(c))return t.batchLengths=[s],void(t.batchOffsets=[0]);const l=c.typedArray;c.typedArray=void 0;const u=[],h=[0],d=a?i[0]:0;let f=l[d],p=0;for(let r=1;r<s;r++){const e=a?i[r]:r,t=l[e];if(t!==f){const e=r-p,n=r;u.push(e),h.push(n),p=n,f=t}}const m=s-p;u.push(m),t.batchLengths=u,t.batchOffsets=h}ine.name="ClassificationPipelineStage",ine.process=function(e,t,n){const i=e.shaderBuilder;i.addDefine("HAS_CLASSIFICATION",void 0,Mee.BOTH);const o=e.runtimePrimitive;Object(r["a"])(o.batchLengths)||one(t,o)};var rne=ine,ane="void filterByPassType(inout vec3 positionMC, vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {\n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        positionMC *= float(model_silhouettePass);\n        #else\n        positionMC *= 0.0;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        positionMC *= 0.0;\n    }\n}\n\nvoid cpuStylingStage(inout vec3 positionMC, inout SelectedFeature feature)\n{\n    float show = ceil(feature.color.a);\n    positionMC *= show;\n\n    #if defined(HAS_SELECTED_FEATURE_ID_ATTRIBUTE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(positionMC, feature.color);\n    #endif\n}\n",sne="void filterByPassType(vec4 featureColor)\n{\n    bool styleTranslucent = (featureColor.a != 1.0);\n    // Only render translucent features in the translucent pass (if the style or the original command has translucency).\n    if (czm_pass == czm_passTranslucent && !styleTranslucent && !model_commandTranslucent)\n    {   \n        // If the model has a translucent silhouette, it needs to render during the silhouette color command,\n        // (i.e. the command where model_silhouettePass = true), even if the model isn't translucent.\n        #ifdef HAS_SILHOUETTE\n        if(!model_silhouettePass) {\n            discard;\n        }\n        #else\n        discard;\n        #endif\n    }\n    // If the current pass is not the translucent pass and the style is not translucent, don't render the feature.\n    else if (czm_pass != czm_passTranslucent && styleTranslucent)\n    {\n        discard;\n    }\n}\n\nvoid cpuStylingStage(inout czm_modelMaterial material, SelectedFeature feature)\n{\n    vec4 featureColor = feature.color;\n    if (featureColor.a == 0.0)\n    {\n        discard;\n    }\n\n    // If a feature ID vertex attribute is used, the pass type filter is applied in the vertex shader.\n    // So, we only apply in in the fragment shader if the feature ID texture is used.\n    #if defined(HAS_SELECTED_FEATURE_ID_TEXTURE) && !defined(HAS_CLASSIFICATION)\n    filterByPassType(featureColor);\n    #endif\n\n    featureColor = czm_gammaCorrect(featureColor);\n\n    // Classification models compute the diffuse differently.\n    #ifdef HAS_CLASSIFICATION\n    material.diffuse = featureColor.rgb * featureColor.a;\n    #else\n    float highlight = ceil(model_colorBlend);\n    material.diffuse *= mix(featureColor.rgb, vec3(1.0), highlight);\n    #endif\n    \n    material.alpha *= featureColor.a;\n}\n";const cne={name:"CPUStylingPipelineStage",process:function(e,t,n){const i=e.model,o=e.shaderBuilder;o.addVertexLines(ane),o.addFragmentLines(sne),o.addDefine("USE_CPU_STYLING",void 0,Mee.BOTH),Object(r["a"])(i.color)||(o.addUniform("float",Zee.COLOR_BLEND_UNIFORM_NAME,Mee.FRAGMENT),e.uniformMap[Zee.COLOR_BLEND_UNIFORM_NAME]=function(){return T4.getColorBlend(i.colorBlendMode,i.colorBlendAmount)}),o.addUniform("bool","model_commandTranslucent",Mee.BOTH),e.uniformMap.model_commandTranslucent=function(){return e.alphaOptions.pass===hF.TRANSLUCENT}}};var lne=cne;const une={MODIFY_MATERIAL:"MODIFY_MATERIAL",REPLACE_MATERIAL:"REPLACE_MATERIAL",getDefineName:function(e){return`CUSTOM_SHADER_${e}`}};var hne=Object.freeze(une),dne="void customShaderStage(\n    inout czm_modelVertexOutput vsOutput, \n    inout ProcessedAttributes attributes, \n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass\n) {\n    // VertexInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    VertexInput vsInput;\n    initializeInputStruct(vsInput, attributes);\n    vsInput.featureIds = featureIds;\n    vsInput.metadata = metadata;\n    vsInput.metadataClass = metadataClass;\n    vertexMain(vsInput, vsOutput);\n    attributes.positionMC = vsOutput.positionMC;\n}\n",fne="void customShaderStage(\n    inout czm_modelMaterial material,\n    ProcessedAttributes attributes,\n    FeatureIds featureIds,\n    Metadata metadata,\n    MetadataClass metadataClass\n) {\n    // FragmentInput and initializeInputStruct() are dynamically generated in JS, \n    // see CustomShaderPipelineStage.js\n    FragmentInput fsInput;\n    initializeInputStruct(fsInput, attributes);\n    fsInput.featureIds = featureIds;\n    fsInput.metadata = metadata;\n    fsInput.metadataClass = metadataClass;\n    fragmentMain(fsInput, material);\n}\n",pne="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) {\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n}\n",mne="void featureIdStage(out FeatureIds featureIds, ProcessedAttributes attributes) \n{\n  initializeFeatureIds(featureIds, attributes);\n  initializeFeatureIdAliases(featureIds);\n  setFeatureIdVaryings();\n}\n";const _ne={};function gne(e){e.addStruct(_ne.STRUCT_ID_FEATURE_IDS_VS,_ne.STRUCT_NAME_FEATURE_IDS,Mee.VERTEX),e.addStruct(_ne.STRUCT_ID_FEATURE_IDS_FS,_ne.STRUCT_NAME_FEATURE_IDS,Mee.FRAGMENT),e.addFunction(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,Mee.VERTEX),e.addFunction(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS,Mee.FRAGMENT),e.addFunction(_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,Mee.VERTEX),e.addFunction(_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES,Mee.FRAGMENT),e.addFunction(_ne.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,_ne.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS,Mee.VERTEX)}function bne(e,t,n){const i=t.featureIds,o=t.attributes[0].count;for(let a=0;a<i.length;a++){const t=i[a],s=t.positionalLabel;if(t instanceof _2.FeatureIdAttribute)vne(e,t,s);else{const i=1;Ane(e,t,s,o,i,n)}const c=t.label;Object(r["a"])(c)&&Tne(e,s,c,Mee.BOTH)}}function yne(e,t,n){const i=t.featureIds,o=_5.getAttributeBySemantic(t,h5.POSITION),a=o.count;for(let s=0;s<i.length;s++){const t=i[s],o=t.positionalLabel;let c=Mee.BOTH;t instanceof _2.FeatureIdAttribute?One(e,t,o):t instanceof _2.FeatureIdImplicitRange?Ane(e,t,o,a,void 0,n):(wne(e,t,o,s,n),c=Mee.FRAGMENT);const l=t.label;Object(r["a"])(l)&&Tne(e,o,l,c)}}function vne(e,t,n){const i=e.shaderBuilder;i.addStructField(_ne.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(_ne.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=`a_${r}${o}`,s=`v_${r}${o}`,c=`featureIds.${n} = int(czm_round(${a}));`,l=`featureIds.${n} = int(czm_round(${s}));`;i.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[c]),i.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[l]),i.addVarying("float",s),i.addFunctionLines(_ne.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${s} = ${a};`])}function One(e,t,n){const i=e.shaderBuilder;i.addStructField(_ne.STRUCT_ID_FEATURE_IDS_VS,"int",n),i.addStructField(_ne.STRUCT_ID_FEATURE_IDS_FS,"int",n);const o=t.setIndex,r=n.replace(/_\d+$/,"_"),a=[`featureIds.${n} = int(czm_round(attributes.${r}${o}));`];i.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,a),i.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,a)}function Ane(e,t,n,i,o,r){Cne(e,t,i,o,r);const a=e.shaderBuilder,s=`a_implicit_${n}`;a.addAttribute("float",s);const c=`v_implicit_${n}`;a.addVarying("float",c),a.addStructField(_ne.STRUCT_ID_FEATURE_IDS_VS,"int",n),a.addStructField(_ne.STRUCT_ID_FEATURE_IDS_FS,"int",n),a.addFunctionLines(_ne.FUNCTION_ID_SET_FEATURE_ID_VARYINGS,[`${c} = ${s};`]),a.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS,[`featureIds.${n} = int(czm_round(${s}));`]),a.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[`featureIds.${n} = int(czm_round(${c}));`])}function wne(e,t,n,i,r){const a=`u_featureIdTexture_${i}`,s=e.uniformMap,c=t.textureReader;s[a]=function(){return Object(o["a"])(c.texture,r.context.defaultTexture)};const l=c.channels,u=e.shaderBuilder;u.addStructField(_ne.STRUCT_ID_FEATURE_IDS_FS,"int",n),u.addUniform("sampler2D",a,Mee.FRAGMENT);const h=`v_texCoord_${c.texCoord}`,d=`texture2D(${a}, ${h}).${l}`,f=`featureIds.${n} = czm_unpackUint(${d});`;u.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS,[f])}function Tne(e,t,n,i){const o=e.shaderBuilder,r=Mee.includesVertexShader(i);r&&o.addStructField(_ne.STRUCT_ID_FEATURE_IDS_VS,"int",n),o.addStructField(_ne.STRUCT_ID_FEATURE_IDS_FS,"int",n);const a=[`featureIds.${n} = featureIds.${t};`];r&&o.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS,a),o.addFunctionLines(_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS,a)}function Cne(e,t,n,i,o){const a=e.model;let s,c;if(Object(r["a"])(t.repeat)){const e=Ene(t,n);s=NV.createVertexBuffer({context:o.context,typedArray:e,usage:LV.STATIC_DRAW}),s.vertexArrayDestroyable=!1,a._pipelineResources.push(s);const i=!1;a.statistics.addBuffer(s,i)}else c=[t.offset];const l={index:e.attributeIndex++,instanceDivisor:i,value:c,vertexBuffer:s,normalize:!1,componentsPerAttribute:1,componentDatatype:Ks.FLOAT,strideInBytes:Ks.getSizeInBytes(Ks.FLOAT),offsetInBytes:0};e.attributes.push(l)}function Ene(e,t){const n=e.offset,i=e.repeat,o=new Float32Array(t);for(let r=0;r<t;r++)o[r]=n+Math.floor(r/i);return o}_ne.name="FeatureIdPipelineStage",_ne.STRUCT_ID_FEATURE_IDS_VS="FeatureIdsVS",_ne.STRUCT_ID_FEATURE_IDS_FS="FeatureIdsFS",_ne.STRUCT_NAME_FEATURE_IDS="FeatureIds",_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_VS="initializeFeatureIdsVS",_ne.FUNCTION_ID_INITIALIZE_FEATURE_IDS_FS="initializeFeatureIdsFS",_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_VS="initializeFeatureIdAliasesVS",_ne.FUNCTION_ID_INITIALIZE_FEATURE_ID_ALIASES_FS="initializeFeatureIdAliasesFS",_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_IDS="void initializeFeatureIds(out FeatureIds featureIds, ProcessedAttributes attributes)",_ne.FUNCTION_SIGNATURE_INITIALIZE_FEATURE_ID_ALIASES="void initializeFeatureIdAliases(inout FeatureIds featureIds)",_ne.FUNCTION_ID_SET_FEATURE_ID_VARYINGS="setFeatureIdVaryings",_ne.FUNCTION_SIGNATURE_SET_FEATURE_ID_VARYINGS="void setFeatureIdVaryings()",_ne.process=function(e,t,n){const i=e.shaderBuilder;gne(i);const o=e.runtimeNode.node.instances;Object(r["a"])(o)&&bne(e,o,n),yne(e,t,n),i.addVertexLines(mne),i.addFragmentLines(pne)};var xne=_ne,Sne="void metadataStage(out Metadata metadata, out MetadataClass metadataClass, ProcessedAttributes attributes)\n{\n  initializeMetadata(metadata, metadataClass, attributes);\n}\n",Ine="void metadataStage(out Metadata metadata, out MetadataClass metadataClass, ProcessedAttributes attributes)\n{\n  initializeMetadata(metadata, metadataClass, attributes);\n  setMetadataVaryings();\n}\n";const Dne={};function Pne(e,t){const n=Dne.METADATACLASS_FIELDS;for(const i of t){const t=`${i}MetadataClass`,o=`${t}VS`,r=`${t}FS`;e.addStruct(o,t,Mee.VERTEX),e.addStruct(r,t,Mee.FRAGMENT);for(let a=0;a<n.length;a++){const t=n[a].shaderName;e.addStructField(o,i,t),e.addStructField(r,i,t)}}}function jne(e){e.addStruct(Dne.STRUCT_ID_METADATA_VS,Dne.STRUCT_NAME_METADATA,Mee.VERTEX),e.addStruct(Dne.STRUCT_ID_METADATA_FS,Dne.STRUCT_NAME_METADATA,Mee.FRAGMENT),e.addStruct(Dne.STRUCT_ID_METADATACLASS_VS,Dne.STRUCT_NAME_METADATACLASS,Mee.VERTEX),e.addStruct(Dne.STRUCT_ID_METADATACLASS_FS,Dne.STRUCT_NAME_METADATACLASS,Mee.FRAGMENT),e.addFunction(Dne.FUNCTION_ID_INITIALIZE_METADATA_VS,Dne.FUNCTION_SIGNATURE_INITIALIZE_METADATA,Mee.VERTEX),e.addFunction(Dne.FUNCTION_ID_INITIALIZE_METADATA_FS,Dne.FUNCTION_SIGNATURE_INITIALIZE_METADATA,Mee.FRAGMENT),e.addFunction(Dne.FUNCTION_ID_SET_METADATA_VARYINGS,Dne.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS,Mee.VERTEX)}function Rne(e,t){for(let n=0;n<e.length;n++){const i=e[n].properties;for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];t(e,n)}}}function Lne(e,t,n){const{getAttributeByName:i,getAttributeInfo:o}=_5;function r(n,r){const a=i(t,r.attribute),s=o(a),c=s.glslType;e.add(c)}Rne(n,r)}function Mne(e,t,n){const{getAttributeByName:i,getAttributeInfo:o}=_5;function r(n,r){const a=i(t,r.attribute),s=o(a);Nne(e,s,n,r)}Rne(n,r)}function Nne(e,t,n,i){const o=_5.sanitizeGlslIdentifier(n),a=t.variableName,s=t.glslType,c=e.shaderBuilder;c.addStructField(Dne.STRUCT_ID_METADATA_VS,s,o),c.addStructField(Dne.STRUCT_ID_METADATA_FS,s,o);const l=`${s}MetadataClass`;c.addStructField(Dne.STRUCT_ID_METADATACLASS_VS,l,o),c.addStructField(Dne.STRUCT_ID_METADATACLASS_FS,l,o);let u=`attributes.${a}`;i.hasValueTransform&&(u=Une(u,{renderResources:e,glslType:s,metadataVariable:o,shaderDestination:Mee.BOTH,offset:i.offset,scale:i.scale}));const h=`metadata.${o} = ${u};`;c.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_VS,[h]),c.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_FS,[h]);const d=Dne.METADATACLASS_FIELDS;for(let f=0;f<d.length;f++){const{specName:e,shaderName:t}=d[f],n=i.classProperty[e];if(!Object(r["a"])(n))continue;const a=`metadataClass.${o}.${t} = ${s}(${n});`;c.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_VS,[a]),c.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_FS,[a])}}function Bne(e,t){function n(t,n){const i=n.getGlslType();e.add(i)}Rne(t,n)}function Fne(e,t){function n(t,n){n.isGpuCompatible()&&zne(e,t,n)}Rne(t,n)}function zne(e,t,n){const i=n.textureReader,o=i.index,a=`u_propertyTexture_${o}`;e.uniformMap.hasOwnProperty(a)||kne(e,a,i);const s=_5.sanitizeGlslIdentifier(t),c=n.getGlslType(),l=e.shaderBuilder;l.addStructField(Dne.STRUCT_ID_METADATA_FS,c,s);const u=`${c}MetadataClass`;l.addStructField(Dne.STRUCT_ID_METADATACLASS_FS,u,s);const h=i.texCoord,d=`attributes.texCoord_${h}`,f=i.channels;let p=`texture2D(${a}, ${d}).${f}`;p=n.unpackInShader(p),n.hasValueTransform&&(p=Une(p,{renderResources:e,glslType:c,metadataVariable:s,shaderDestination:Mee.FRAGMENT,offset:n.offset,scale:n.scale}));const m=`metadata.${s} = ${p};`;l.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_FS,[m]);const _=Dne.METADATACLASS_FIELDS;for(let g=0;g<_.length;g++){const{specName:e,shaderName:t}=_[g],i=n.classProperty[e];if(!Object(r["a"])(i))continue;const o=`metadataClass.${s}.${t} = ${c}(${i});`;l.addFunctionLines(Dne.FUNCTION_ID_INITIALIZE_METADATA_FS,[o])}}function kne(e,t,n){const{shaderBuilder:i,uniformMap:o}=e;i.addUniform("sampler2D",t,Mee.FRAGMENT),o[t]=()=>n.texture}function Une(e,t){const n=t.metadataVariable,i=`u_${n}_offset`,o=`u_${n}_scale`,{shaderBuilder:r,uniformMap:a}=t.renderResources,s=t.glslType,c=t.shaderDestination;return r.addUniform(s,i,c),r.addUniform(s,o,c),a[i]=()=>t.offset,a[o]=()=>t.scale,`czm_valueTransform(${i}, ${o}, ${e})`}Dne.name="MetadataPipelineStage",Dne.STRUCT_ID_METADATA_VS="MetadataVS",Dne.STRUCT_ID_METADATA_FS="MetadataFS",Dne.STRUCT_NAME_METADATA="Metadata",Dne.STRUCT_ID_METADATACLASS_VS="MetadataClassVS",Dne.STRUCT_ID_METADATACLASS_FS="MetadataClassFS",Dne.STRUCT_NAME_METADATACLASS="MetadataClass",Dne.FUNCTION_ID_INITIALIZE_METADATA_VS="initializeMetadataVS",Dne.FUNCTION_ID_INITIALIZE_METADATA_FS="initializeMetadataFS",Dne.FUNCTION_SIGNATURE_INITIALIZE_METADATA="void initializeMetadata(out Metadata metadata, out MetadataClass metadataClass, ProcessedAttributes attributes)",Dne.FUNCTION_ID_SET_METADATA_VARYINGS="setMetadataVaryings",Dne.FUNCTION_SIGNATURE_SET_METADATA_VARYINGS="void setMetadataVaryings()",Dne.METADATACLASS_FIELDS=[{specName:"noData",shaderName:"noData"},{specName:"default",shaderName:"defaultValue"},{specName:"min",shaderName:"minValue"},{specName:"max",shaderName:"maxValue"}],Dne.process=function(e,t,n){const{shaderBuilder:i,model:a}=e,s=Object(o["a"])(a.structuralMetadata,{}),{propertyAttributes:c,propertyTextures:l}=s,u=new Set;Object(r["a"])(c)&&Lne(u,t,c),Object(r["a"])(l)&&Bne(u,l),Pne(i,u),jne(i),i.addVertexLines(Ine),i.addFragmentLines(Sne),Object(r["a"])(c)&&Mne(e,t,c),Object(r["a"])(l)&&Fne(e,l)};var Vne=Dne;const Hne={INHERIT:0,OPAQUE:1,TRANSLUCENT:2};var Gne=Object.freeze(Hne);const Wne={};function qne(e){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=_5.getAttributeInfo(i);t[o.variableName]=o}return t}Wne.name="CustomShaderPipelineStage",Wne.STRUCT_ID_ATTRIBUTES_VS="AttributesVS",Wne.STRUCT_ID_ATTRIBUTES_FS="AttributesFS",Wne.STRUCT_NAME_ATTRIBUTES="Attributes",Wne.STRUCT_ID_VERTEX_INPUT="VertexInput",Wne.STRUCT_NAME_VERTEX_INPUT="VertexInput",Wne.STRUCT_ID_FRAGMENT_INPUT="FragmentInput",Wne.STRUCT_NAME_FRAGMENT_INPUT="FragmentInput",Wne.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS="initializeInputStructVS",Wne.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS="void initializeInputStruct(out VertexInput vsInput, ProcessedAttributes attributes)",Wne.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS="initializeInputStructFS",Wne.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS="void initializeInputStruct(out FragmentInput fsInput, ProcessedAttributes attributes)",Wne.process=function(e,t,n){const i=e.shaderBuilder,o=e.model.customShader;Object(r["a"])(o.lightingModel)&&(e.lightingOptions.lightingModel=o.lightingModel);const a=e.alphaOptions;o.translucencyMode===Gne.TRANSLUCENT?a.pass=hF.TRANSLUCENT:o.translucencyMode===Gne.OPAQUE&&(a.pass=void 0);const s=tie(o,t);if(!s.customShaderEnabled)return;if(rie(i,o,s),s.shouldComputePositionWC&&i.addDefine("COMPUTE_POSITION_WC_CUSTOM_SHADER",void 0,Mee.BOTH),Object(r["a"])(o.vertexShaderText)&&i.addDefine("HAS_CUSTOM_VERTEX_SHADER",void 0,Mee.VERTEX),Object(r["a"])(o.fragmentShaderText)){i.addDefine("HAS_CUSTOM_FRAGMENT_SHADER",void 0,Mee.FRAGMENT);const e=hne.getDefineName(o.mode);i.addDefine(e,void 0,Mee.FRAGMENT)}const c=o.uniforms;for(const r in c)if(c.hasOwnProperty(r)){const e=c[r];i.addUniform(e.type,r)}const l=o.varyings;for(const r in l)if(l.hasOwnProperty(r)){const e=l[r];i.addVarying(e,r)}e.uniformMap=Object(qE["a"])(e.uniformMap,o.uniformMap)};const Yne={position:"vec3",normal:"vec3",tangent:"vec3",bitangent:"vec3",texCoord:"vec2",color:"vec4",joints:"ivec4",weights:"vec4"},Xne={position:"vec3(0.0)",normal:"vec3(0.0, 0.0, 1.0)",tangent:"vec3(1.0, 0.0, 0.0)",bitangent:"vec3(0.0, 1.0, 0.0)",texCoord:"vec2(0.0)",color:"vec4(1.0)",joints:"ivec4(0)",weights:"vec4(0.0)"};function Kne(e){let t=e.replace(/_[0-9]+$/,"");t=t.replace(/(MC|EC)$/,"");const n=Yne[t],i=Xne[t];if(Object(r["a"])(n))return{attributeField:[n,e],value:i}}function $ne(e,t,n){const i=eie(t,e.usedVariablesVertex.attributeSet,!1),o=i.addToShader,a=i.missingAttributes;let s,c;const l=[],u=[];for(s in o)if(o.hasOwnProperty(s)){const e=o[s],t=[e.glslType,s];l.push(t),c=`vsInput.attributes.${s} = attributes.${s};`,u.push(c)}for(let h=0;h<a.length;h++){s=a[h];const e=Kne(s);if(!Object(r["a"])(e))return void Wne._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveVS",`Primitive is missing attribute ${s}, disabling custom vertex shader`);l.push(e.attributeField),c=`vsInput.attributes.${s} = ${e.value};`,u.push(c)}n.enabled=!0,n.attributeFields=l,n.initializationLines=u}function Jne(e){const t=[],n=[],i=e.usedVariablesFragment.attributeSet;return i.hasOwnProperty("positionWC")&&(t.push(["vec3","positionWC"]),n.push("fsInput.attributes.positionWC = attributes.positionWC;")),i.hasOwnProperty("positionEC")&&(t.push(["vec3","positionEC"]),n.push("fsInput.attributes.positionEC = attributes.positionEC;")),{attributeFields:t,initializationLines:n}}function Qne(e,t,n){const i=eie(t,e.usedVariablesFragment.attributeSet,!0),o=i.addToShader,a=i.missingAttributes;let s,c;const l=[],u=[];for(s in o)if(o.hasOwnProperty(s)){const e=o[s],t=[e.glslType,s];l.push(t),c=`fsInput.attributes.${s} = attributes.${s};`,u.push(c)}for(let d=0;d<a.length;d++){s=a[d];const e=Kne(s);if(!Object(r["a"])(e))return void Wne._oneTimeWarning("CustomShaderPipelineStage.incompatiblePrimitiveFS",`Primitive is missing attribute ${s}, disabling custom fragment shader.`);l.push(e.attributeField),c=`fsInput.attributes.${s} = ${e.value};`,u.push(c)}const h=Jne(e);n.enabled=!0,n.attributeFields=l.concat(h.attributeFields),n.initializationLines=h.initializationLines.concat(u)}const Zne={positionWC:!0,positionEC:!0};function eie(e,t,n){let i,o;const r={};for(o in e)if(e.hasOwnProperty(o)){const a=e[o];i=o,n&&"normalMC"===o?i="normalEC":n&&"tangentMC"===o&&(i="tangentEC"),t.hasOwnProperty(i)&&(r[i]=a)}const a=[];for(o in t)if(t.hasOwnProperty(o)){if(Zne.hasOwnProperty(o))continue;i=o,n&&"normalEC"===o?i="normalMC":n&&"tangentEC"===o&&(i="tangentMC"),e.hasOwnProperty(i)||a.push(o)}return{addToShader:r,missingAttributes:a}}function tie(e,t){const n={enabled:!1},i={enabled:!1},o=qne(t.attributes);Object(r["a"])(e.vertexShaderText)&&$ne(e,o,n),Object(r["a"])(e.fragmentShaderText)&&Qne(e,o,i);const a=e.usedVariablesFragment.attributeSet,s=a.hasOwnProperty("positionWC")&&i.enabled;return{vertexLines:n,fragmentLines:i,vertexLinesEnabled:n.enabled,fragmentLinesEnabled:i.enabled,customShaderEnabled:n.enabled||i.enabled,shouldComputePositionWC:s}}function nie(e,t){let n,i=Wne.STRUCT_ID_ATTRIBUTES_VS;e.addStruct(i,Wne.STRUCT_NAME_ATTRIBUTES,Mee.VERTEX);const o=t.attributeFields;for(n=0;n<o.length;n++){const t=o[n],r=t[0],a=t[1];e.addStructField(i,r,a)}i=Wne.STRUCT_ID_VERTEX_INPUT,e.addStruct(i,Wne.STRUCT_NAME_VERTEX_INPUT,Mee.VERTEX),e.addStructField(i,Wne.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(i,xne.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(i,Vne.STRUCT_NAME_METADATA,"metadata"),e.addStructField(i,Vne.STRUCT_NAME_METADATACLASS,"metadataClass");const r=Wne.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_VS;e.addFunction(r,Wne.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_VS,Mee.VERTEX);const a=t.initializationLines;e.addFunctionLines(r,a)}function iie(e,t){let n,i,o,r,a=Wne.STRUCT_ID_ATTRIBUTES_FS;e.addStruct(a,Wne.STRUCT_NAME_ATTRIBUTES,Mee.FRAGMENT);const s=t.attributeFields;for(n=0;n<s.length;n++)i=s[n],o=i[0],r=i[1],e.addStructField(a,o,r);a=Wne.STRUCT_ID_FRAGMENT_INPUT,e.addStruct(a,Wne.STRUCT_NAME_FRAGMENT_INPUT,Mee.FRAGMENT),e.addStructField(a,Wne.STRUCT_NAME_ATTRIBUTES,"attributes"),e.addStructField(a,xne.STRUCT_NAME_FEATURE_IDS,"featureIds"),e.addStructField(a,Vne.STRUCT_NAME_METADATA,"metadata"),e.addStructField(a,Vne.STRUCT_NAME_METADATACLASS,"metadataClass");const c=Wne.FUNCTION_ID_INITIALIZE_INPUT_STRUCT_FS;e.addFunction(c,Wne.FUNCTION_SIGNATURE_INITIALIZE_INPUT_STRUCT_FS,Mee.FRAGMENT);const l=t.initializationLines;e.addFunctionLines(c,l)}const oie=[];function rie(e,t,n){const i=n.vertexLines,o=oie;i.enabled&&(nie(e,i),o.length=0,o.push("#line 0",t.vertexShaderText,dne),e.addVertexLines(o));const r=n.fragmentLines;r.enabled&&(iie(e,r),o.length=0,o.push("#line 0",t.fragmentShaderText,fne),e.addFragmentLines(o))}Wne._oneTimeWarning=ab;var aie=Wne;const sie={};function cie(e,t){const n=e.shaderBuilder,i=e.uniformMap,o=t.variableName,r=t.attribute.quantization;if(r.octEncoded){const e=`model_normalizationRange_${o}`;n.addUniform("float",e,Mee.VERTEX),i[e]=function(){return r.normalizationRange}}else{const e=`model_quantizedVolumeOffset_${o}`,a=`model_quantizedVolumeStepSize_${o}`,s=t.glslType;n.addUniform(s,e,Mee.VERTEX),n.addUniform(s,a,Mee.VERTEX);let c=r.quantizedVolumeOffset,l=r.quantizedVolumeStepSize;/^color_\d+$/.test(o)&&(c=lie(c,0),l=lie(l,1)),i[e]=function(){return c},i[a]=function(){return l}}}function lie(e,t){return e instanceof be?e:new be(e.x,e.y,e.z,t)}function uie(e,t){const n=t.variableName,i=t.attribute.quantization;let o;o=i.octEncoded?hie(n,i):die(n),e.addFunctionLines(sie.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,[o])}function hie(e,t){const n=`attributes.${e}`,i=`a_quantized_${e}`,o=`model_normalizationRange_${e}`,r=t.octEncodedZXY?".zxy":".xyz";return`${n} = czm_octDecode(${i}, ${o})${r};`}function die(e){const t=`attributes.${e}`,n=`a_quantized_${e}`,i=`model_quantizedVolumeOffset_${e}`,o=`model_quantizedVolumeStepSize_${e}`;return`${t} = ${i} + ${n} * ${o};`}sie.name="DequantizationPipelineStage",sie.FUNCTION_ID_DEQUANTIZATION_STAGE_VS="dequantizationStage",sie.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS="void dequantizationStage(inout ProcessedAttributes attributes)",sie.process=function(e,t,n){const i=e.shaderBuilder,o=e.model,a=Object(r["a"])(o.classificationType);i.addDefine("USE_DEQUANTIZATION",void 0,Mee.VERTEX),i.addFunction(sie.FUNCTION_ID_DEQUANTIZATION_STAGE_VS,sie.FUNCTION_SIGNATURE_DEQUANTIZATION_STAGE_VS,Mee.VERTEX);const s=t.attributes;for(let c=0;c<s.length;c++){const t=s[c],n=t.quantization;if(!Object(r["a"])(n))continue;const o=t.semantic===h5.POSITION,l=t.semantic===h5.TEXCOORD;if(a&&!o&&!l)continue;const u=_5.getAttributeInfo(t);uie(i,u),cie(e,u)}};var fie=sie,pie="void geometryStage(out ProcessedAttributes attributes)\n{\n  attributes.positionMC = v_positionMC;\n  attributes.positionEC = v_positionEC;\n\n  #ifdef COMPUTE_POSITION_WC_CUSTOM_SHADER\n  attributes.positionWC = v_positionWC;\n  #endif\n\n  #ifdef HAS_NORMALS\n  // renormalize after interpolation\n  attributes.normalEC = normalize(v_normalEC);\n  #endif\n\n  #ifdef HAS_TANGENTS\n  attributes.tangentEC = normalize(v_tangentEC);\n  #endif\n\n  #ifdef HAS_BITANGENTS\n  attributes.bitangentEC = normalize(v_bitangentEC);\n  #endif\n\n  // Everything else is dynamically generated in GeometryPipelineStage\n  setDynamicVaryings(attributes);\n}\n",mie="vec4 geometryStage(inout ProcessedAttributes attributes, mat4 modelView, mat3 normal) \n{\n    vec4 computedPosition;\n\n    // Compute positions in different coordinate systems\n    vec3 positionMC = attributes.positionMC;\n    v_positionMC = positionMC;\n    v_positionEC = (modelView * vec4(positionMC, 1.0)).xyz;\n\n    #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING)\n    vec3 position2D = attributes.position2D;\n    vec3 positionEC = (u_modelView2D * vec4(position2D, 1.0)).xyz;\n    computedPosition = czm_projection * vec4(positionEC, 1.0);\n    #else\n    computedPosition = czm_projection * vec4(v_positionEC, 1.0);\n    #endif\n\n    // Sometimes the custom shader and/or style needs this\n    #if defined(COMPUTE_POSITION_WC_CUSTOM_SHADER) || defined(COMPUTE_POSITION_WC_STYLE)\n    // Note that this is a 32-bit position which may result in jitter on small\n    // scales.\n    v_positionWC = (czm_model * vec4(positionMC, 1.0)).xyz;\n    #endif\n\n    #ifdef HAS_NORMALS\n    v_normalEC = normalize(normal * attributes.normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    v_tangentEC = normalize(normal * attributes.tangentMC);    \n    #endif\n\n    #ifdef HAS_BITANGENTS\n    v_bitangentEC = normalize(normal * attributes.bitangentMC);\n    #endif\n\n    // All other varyings need to be dynamically generated in\n    // GeometryPipelineStage\n    setDynamicVaryings(attributes);\n    \n    return computedPosition;\n}\n",_ie="vec2 computeSt(float featureId)\n{\n    float stepX = model_textureStep.x;\n    float centerX = model_textureStep.y;\n\n    #ifdef MULTILINE_BATCH_TEXTURE\n    float stepY = model_textureStep.z;\n    float centerY = model_textureStep.w;\n\n    float xId = mod(featureId, model_textureDimensions.x); \n    float yId = floor(featureId / model_textureDimensions.x);\n    \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY));\n    #else\n    return vec2(centerX + (featureId * stepX), 0.5);\n    #endif\n}\n\nvoid selectedFeatureIdStage(out SelectedFeature feature, FeatureIds featureIds)\n{   \n    int featureId = featureIds.SELECTED_FEATURE_ID;\n\n\n    if (featureId < model_featuresLength)\n    {\n        vec2 featureSt = computeSt(float(featureId));\n\n        feature.id = featureId;\n        feature.st = featureSt;\n        feature.color = texture2D(model_batchTexture, featureSt);\n    }\n    // Floating point comparisons can be unreliable in GLSL, so we\n    // increment the feature ID to make sure it's always greater\n    // then the model_featuresLength - a condition we check for in the\n    // pick ID, to avoid sampling the pick texture if the feature ID is\n    // greater than the number of features.\n    else\n    {\n        feature.id = model_featuresLength + 1;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n\n    #ifdef HAS_NULL_FEATURE_ID\n    if (featureId == model_nullFeatureId) {\n        feature.id = featureId;\n        feature.st = vec2(0.0);\n        feature.color = vec4(1.0);\n    }\n    #endif\n}\n";const gie={};function bie(e){return e instanceof _2.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function yie(e){return e instanceof _2.FeatureIdTexture?Mee.FRAGMENT:Mee.BOTH}function vie(e,t,n){let i,a;return Object(r["a"])(t.instances)&&(a=_5.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),Object(r["a"])(a))?(i=Object(o["a"])(a.label,a.positionalLabel),{featureIds:a,variableName:i,shaderDestination:yie(a),featureIdDefine:bie(a)}):(a=_5.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),i=Object(o["a"])(a.label,a.positionalLabel),{featureIds:a,variableName:i,shaderDestination:yie(a),featureIdDefine:bie(a)})}function Oie(e){e.addStructField(gie.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(gie.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(gie.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}gie.name="SelectedFeatureIdPipelineStage",gie.STRUCT_ID_SELECTED_FEATURE="SelectedFeature",gie.STRUCT_NAME_SELECTED_FEATURE="SelectedFeature",gie.FUNCTION_ID_FEATURE_VARYINGS_VS="updateFeatureStructVS",gie.FUNCTION_ID_FEATURE_VARYINGS_FS="updateFeatureStructFS",gie.FUNCTION_SIGNATURE_UPDATE_FEATURE="void updateFeatureStruct(inout SelectedFeature feature)",gie.process=function(e,t,n){const i=e.shaderBuilder;e.hasPropertyTable=!0;const o=e.model,a=e.runtimeNode.node,s=vie(o,a,t),c=s.shaderDestination;i.addDefine("HAS_SELECTED_FEATURE_ID",void 0,c),i.addDefine("SELECTED_FEATURE_ID",s.variableName,c),i.addDefine(s.featureIdDefine,void 0,c),Oie(i);const l=s.featureIds.nullFeatureId,u=e.uniformMap;Object(r["a"])(l)&&(i.addDefine("HAS_NULL_FEATURE_ID",void 0,c),i.addUniform("int","model_nullFeatureId",c),u.model_nullFeatureId=function(){return l}),s.shaderDestination===Mee.BOTH&&i.addVertexLines(_ie),i.addFragmentLines(_ie)};var Aie=gie;const wie={};function Tie(e,t,n,i,o,a){const s=e.shaderBuilder,c=_5.getAttributeInfo(t),l=o&&!a;i>1?xie(e,t,n,i):Eie(e,t,n,l),Iie(s,c,l),Sie(s,c),Object(r["a"])(t.semantic)&&Cie(s,t),Die(s,c,o),Pie(s,c,l),jie(s,c)}function Cie(e,t){const n=t.semantic,i=t.setIndex;switch(n){case h5.NORMAL:e.addDefine("HAS_NORMALS");break;case h5.TANGENT:e.addDefine("HAS_TANGENTS");break;case h5.FEATURE_ID:e.addDefine(`HAS${n}_${i}`);break;case h5.TEXCOORD:case h5.COLOR:e.addDefine(`HAS_${n}_${i}`)}}function Eie(e,t,n,i){const o=t.quantization;let a,s;Object(r["a"])(o)?(a=o.type,s=o.componentDatatype):(a=t.type,s=t.componentDatatype);const c=t.semantic,l=t.setIndex;c===h5.FEATURE_ID&&l>=e.featureIdVertexAttributeSetIndex&&(e.featureIdVertexAttributeSetIndex=l+1);const u=c===h5.POSITION,h=u?0:n,d=rc.getNumberOfComponents(a),f={index:h,value:Object(r["a"])(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,count:t.count,componentsPerAttribute:d,componentDatatype:s,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};if(e.attributes.push(f),!u||!i)return;const p=e.runtimePrimitive.positionBuffer2D,m={index:n,vertexBuffer:p,count:t.count,componentsPerAttribute:d,componentDatatype:Ks.FLOAT,offsetInBytes:0,strideInBytes:void 0,normalize:t.normalized};e.attributes.push(m)}function xie(e,t,n,i){const o=t.quantization;let a,s;Object(r["a"])(o)?(a=o.type,s=o.componentDatatype):(a=t.type,s=t.componentDatatype);const c=t.normalized,l=rc.getNumberOfComponents(a),u=l/i,h=Ks.getSizeInBytes(s),d=u*h,f=t.byteStride;for(let r=0;r<i;r++){const i=t.byteOffset+r*d,o={index:n+r,vertexBuffer:t.buffer,componentsPerAttribute:u,componentDatatype:s,offsetInBytes:i,strideInBytes:f,normalize:c};e.attributes.push(o)}}function Sie(e,t){const n=t.variableName;let i,o=`v_${n}`;"normalMC"===n?(o="v_normalEC",i=t.glslType):"tangentMC"===n?(i="vec3",o="v_tangentEC"):i=t.glslType,e.addVarying(i,o)}function Iie(e,t,n){const i=t.attribute.semantic,o=t.variableName;let r,a;t.isQuantized?(r=`a_quantized_${o}`,a=t.quantizedGlslType):(r=`a_${o}`,a=t.glslType);const s=i===h5.POSITION;s?e.setPositionAttribute(a,r):e.addAttribute(a,r),s&&n&&e.addAttribute("vec3","a_position2D")}function Die(e,t,n){const i=wie.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,o=wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,r=t.variableName;"tangentMC"===r?(e.addStructField(i,"vec3","tangentMC"),e.addStructField(i,"float","tangentSignMC"),e.addStructField(o,"vec3","tangentEC")):"normalMC"===r?(e.addStructField(i,"vec3","normalMC"),e.addStructField(o,"vec3","normalEC")):(e.addStructField(i,t.glslType,r),e.addStructField(o,t.glslType,r)),"positionMC"===r&&n&&e.addStructField(i,"vec3","position2D")}function Pie(e,t,n){const i=wie.FUNCTION_ID_INITIALIZE_ATTRIBUTES,o=t.variableName,r="positionMC"===o&&n;if(r){const t="attributes.position2D = a_position2D;";e.addFunctionLines(i,[t])}if(t.isQuantized)return;const a=[];"tangentMC"===o?(a.push("attributes.tangentMC = a_tangentMC.xyz;"),a.push("attributes.tangentSignMC = a_tangentMC.w;")):a.push(`attributes.${o} = a_${o};`),e.addFunctionLines(i,a)}function jie(e,t){const n=t.attribute.semantic,i=t.attribute.setIndex;if(Object(r["a"])(n)&&!Object(r["a"])(i))return;let o=wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS;const a=t.variableName;let s=`v_${a} = attributes.${a};`;e.addFunctionLines(o,[s]),o=wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,s=`attributes.${a} = v_${a};`,e.addFunctionLines(o,[s])}function Rie(e,t){let n=!1,i=!1;for(let o=0;o<t.length;o++){const e=t[o];e.semantic===h5.NORMAL?n=!0:e.semantic===h5.TANGENT&&(i=!0)}n&&i&&(e.addDefine("HAS_BITANGENTS"),e.addVarying("vec3","v_bitangentEC"),e.addStructField(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"vec3","bitangentMC"),e.addStructField(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","bitangentEC"))}wie.name="GeometryPipelineStage",wie.STRUCT_ID_PROCESSED_ATTRIBUTES_VS="ProcessedAttributesVS",wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS="ProcessedAttributesFS",wie.STRUCT_NAME_PROCESSED_ATTRIBUTES="ProcessedAttributes",wie.FUNCTION_ID_INITIALIZE_ATTRIBUTES="initializeAttributes",wie.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES="void initializeAttributes(out ProcessedAttributes attributes)",wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS="setDynamicVaryingsVS",wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS="setDynamicVaryingsFS",wie.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS="void setDynamicVaryings(inout ProcessedAttributes attributes)",wie.process=function(e,t,n){const i=e.shaderBuilder,o=e.model;i.addStruct(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_VS,"ProcessedAttributes",Mee.VERTEX),i.addStruct(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"ProcessedAttributes",Mee.FRAGMENT),i.addStruct(Aie.STRUCT_ID_SELECTED_FEATURE,Aie.STRUCT_NAME_SELECTED_FEATURE,Mee.BOTH),i.addFunction(wie.FUNCTION_ID_INITIALIZE_ATTRIBUTES,wie.FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES,Mee.VERTEX),i.addVarying("vec3","v_positionWC"),i.addVarying("vec3","v_positionEC"),i.addStructField(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionWC"),i.addStructField(wie.STRUCT_ID_PROCESSED_ATTRIBUTES_FS,"vec3","positionEC"),i.addFunction(wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS,wie.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,Mee.VERTEX),i.addFunction(wie.FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS,wie.FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS,Mee.FRAGMENT);const s=o.type;s===W7.TILE_PNTS&&i.addDefine("HAS_SRGB_COLOR",void 0,Mee.FRAGMENT);const c=n.mode!==SH.SCENE3D&&!n.scene3DOnly&&o._projectTo2D,l=Object(r["a"])(e.runtimeNode.node.instances),u=c&&!l,h=t.attributes.length;for(let d=0;d<h;d++){const n=t.attributes[d],i=rc.getAttributeLocationCount(n.type);if(!Object(r["a"])(n.buffer)&&!Object(r["a"])(n.constant))throw new a["a"]("Attributes must be provided as a Buffer or constant value");const o=n.semantic===h5.POSITION;let s;i>1?(s=e.attributeIndex,e.attributeIndex+=i):s=o&&!u?0:e.attributeIndex++,Tie(e,n,s,i,c,l)}Rie(i,t.attributes),t.primitiveType===Eu.POINTS&&i.addDefine("PRIMITIVE_TYPE_POINTS"),i.addVertexLines(mie),i.addFragmentLines(pie)};var Lie=wie,Mie="#ifdef LIGHTING_PBR\nvec3 computePbrLighting(czm_modelMaterial inputMaterial, ProcessedAttributes attributes)\n{\n    czm_pbrParameters pbrParameters;\n    pbrParameters.diffuseColor = inputMaterial.diffuse;\n    pbrParameters.f0 = inputMaterial.specular;\n    pbrParameters.roughness = inputMaterial.roughness;\n    \n    #ifdef USE_CUSTOM_LIGHT_COLOR\n    vec3 lightColorHdr = model_lightColorHdr;\n    #else\n    vec3 lightColorHdr = czm_lightColorHdr;\n    #endif\n\n    vec3 color = inputMaterial.diffuse;\n    #ifdef HAS_NORMALS\n    color = czm_pbrLighting(\n        attributes.positionEC,\n        inputMaterial.normalEC,\n        czm_lightDirectionEC,\n        lightColorHdr,\n        pbrParameters\n    );\n\n        #ifdef USE_IBL_LIGHTING\n        color += imageBasedLightingStage(\n            attributes.positionEC,\n            inputMaterial.normalEC,\n            czm_lightDirectionEC,\n            lightColorHdr,\n            pbrParameters\n        );\n        #endif\n    #endif\n\n    color *= inputMaterial.occlusion;\n    color += inputMaterial.emissive;\n\n    // In HDR mode, the frame buffer is in linear color space. The\n    // post-processing stages (see PostProcessStageCollection) will handle\n    // tonemapping. However, if HDR is not enabled, we must tonemap else large\n    // values may be clamped to 1.0\n    #ifndef HDR \n    color = czm_acesTonemapping(color);\n    #endif \n\n    return color;\n}\n#endif\n\nvoid lightingStage(inout czm_modelMaterial material, ProcessedAttributes attributes)\n{\n    // Even though the lighting will only set the diffuse color,\n    // pass all other properties so further stages have access to them.\n    vec3 color = vec3(0.0);\n\n    #ifdef LIGHTING_PBR\n    color = computePbrLighting(material, attributes);\n    #else // unlit\n    color = material.diffuse;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    // The colors resulting from point cloud styles are adjusted differently.\n    color = czm_gammaCorrect(color);\n    #elif !defined(HDR)\n    // If HDR is not enabled, the frame buffer stores sRGB colors rather than\n    // linear colors so the linear value must be converted.\n    color = czm_linearToSrgb(color);\n    #endif\n\n    material.diffuse = color;\n}\n";const Nie={UNLIT:0,PBR:1};var Bie=Object.freeze(Nie);const Fie={name:"LightingPipelineStage",process:function(e,t){const n=e.model,i=e.lightingOptions,o=e.shaderBuilder;if(Object(r["a"])(n.lightColor)){o.addDefine("USE_CUSTOM_LIGHT_COLOR",void 0,Mee.FRAGMENT),o.addUniform("vec3","model_lightColorHdr",Mee.FRAGMENT);const t=e.uniformMap;t.model_lightColorHdr=function(){return n.lightColor}}const a=i.lightingModel;a===Bie.PBR?o.addDefine("LIGHTING_PBR",void 0,Mee.FRAGMENT):o.addDefine("LIGHTING_UNLIT",void 0,Mee.FRAGMENT),o.addFragmentLines(Mie)}};var zie=Fie,kie="// If the style color is white, it implies the feature has not been styled.\nbool isDefaultStyleColor(vec3 color)\n{\n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3)));\n}\n\nvec3 blend(vec3 sourceColor, vec3 styleColor, float styleColorBlend)\n{\n    vec3 blendColor = mix(sourceColor, styleColor, styleColorBlend);\n    vec3 color = isDefaultStyleColor(styleColor.rgb) ? sourceColor : blendColor;\n    return color;\n}\n\nvec2 computeTextureTransform(vec2 texCoord, mat3 textureTransform)\n{\n    return vec2(textureTransform * vec3(texCoord, 1.0));\n}\n\n#ifdef HAS_NORMALS\nvec3 computeNormal(ProcessedAttributes attributes)\n{\n    // Geometry normal. This is already normalized \n    vec3 ng = attributes.normalEC;\n\n    vec3 normal = ng;\n    #if defined(HAS_NORMAL_TEXTURE) && !defined(HAS_WIREFRAME)\n    vec2 normalTexCoords = TEXCOORD_NORMAL;\n        #ifdef HAS_NORMAL_TEXTURE_TRANSFORM\n        normalTexCoords = computeTextureTransform(normalTexCoords, u_normalTextureTransform);\n        #endif\n\n        // If HAS_BITANGENTS is set, then HAS_TANGENTS is also set\n        #ifdef HAS_BITANGENTS\n        vec3 t = attributes.tangentEC;\n        vec3 b = attributes.bitangentEC;\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture2D(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #elif defined(GL_OES_standard_derivatives)\n        // Compute tangents\n        vec3 positionEC = attributes.positionEC;\n        vec3 pos_dx = dFdx(positionEC);\n        vec3 pos_dy = dFdy(positionEC);\n        vec3 tex_dx = dFdx(vec3(normalTexCoords,0.0));\n        vec3 tex_dy = dFdy(vec3(normalTexCoords,0.0));\n        vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n        t = normalize(t - ng * dot(ng, t));\n        vec3 b = normalize(cross(ng, t));\n        mat3 tbn = mat3(t, b, ng);\n        vec3 n = texture2D(u_normalTexture, normalTexCoords).rgb;\n        normal = normalize(tbn * (2.0 * n - 1.0));\n        #endif\n    #endif\n\n    #ifdef HAS_DOUBLE_SIDED_MATERIAL\n    if (czm_backFacing()) {\n        normal = -normal;\n    }\n    #endif\n\n    return normal;\n}\n#endif\n\nvoid materialStage(inout czm_modelMaterial material, ProcessedAttributes attributes, SelectedFeature feature)\n{\n    #ifdef HAS_NORMALS\n    material.normalEC = computeNormal(attributes);\n    #endif\n\n    vec4 baseColorWithAlpha = vec4(1.0);\n    // Regardless of whether we use PBR, set a base color\n    #ifdef HAS_BASE_COLOR_TEXTURE\n    vec2 baseColorTexCoords = TEXCOORD_BASE_COLOR;\n\n        #ifdef HAS_BASE_COLOR_TEXTURE_TRANSFORM\n        baseColorTexCoords = computeTextureTransform(baseColorTexCoords, u_baseColorTextureTransform);\n        #endif\n\n    baseColorWithAlpha = czm_srgbToLinear(texture2D(u_baseColorTexture, baseColorTexCoords));\n\n        #ifdef HAS_BASE_COLOR_FACTOR\n        baseColorWithAlpha *= u_baseColorFactor;\n        #endif\n    #elif defined(HAS_BASE_COLOR_FACTOR)\n    baseColorWithAlpha = u_baseColorFactor;\n    #endif\n\n    #ifdef HAS_POINT_CLOUD_COLOR_STYLE\n    baseColorWithAlpha = v_pointCloudColor;\n    #elif defined(HAS_COLOR_0)\n    vec4 color = attributes.color_0;\n        // .pnts files store colors in the sRGB color space\n        #ifdef HAS_SRGB_COLOR\n        color = czm_srgbToLinear(color);\n        #endif\n    baseColorWithAlpha *= color;\n    #endif\n\n    material.diffuse = baseColorWithAlpha.rgb;\n    material.alpha = baseColorWithAlpha.a;\n\n    #ifdef USE_CPU_STYLING\n    material.diffuse = blend(material.diffuse, feature.color.rgb, model_colorBlend);\n    #endif\n\n    #ifdef HAS_OCCLUSION_TEXTURE\n    vec2 occlusionTexCoords = TEXCOORD_OCCLUSION;\n        #ifdef HAS_OCCLUSION_TEXTURE_TRANSFORM\n        occlusionTexCoords = computeTextureTransform(occlusionTexCoords, u_occlusionTextureTransform);\n        #endif\n    material.occlusion = texture2D(u_occlusionTexture, occlusionTexCoords).r;\n    #endif\n\n    #ifdef HAS_EMISSIVE_TEXTURE\n    vec2 emissiveTexCoords = TEXCOORD_EMISSIVE;\n        #ifdef HAS_EMISSIVE_TEXTURE_TRANSFORM\n        emissiveTexCoords = computeTextureTransform(emissiveTexCoords, u_emissiveTextureTransform);\n        #endif\n\n    vec3 emissive = czm_srgbToLinear(texture2D(u_emissiveTexture, emissiveTexCoords).rgb);\n        #ifdef HAS_EMISSIVE_FACTOR\n        emissive *= u_emissiveFactor;\n        #endif\n    material.emissive = emissive;\n    #elif defined(HAS_EMISSIVE_FACTOR)\n    material.emissive = u_emissiveFactor;\n    #endif\n\n    #if defined(LIGHTING_PBR) && defined(USE_SPECULAR_GLOSSINESS)\n        #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE\n        vec2 specularGlossinessTexCoords = TEXCOORD_SPECULAR_GLOSSINESS;\n          #ifdef HAS_SPECULAR_GLOSSINESS_TEXTURE_TRANSFORM\n          specularGlossinessTexCoords = computeTextureTransform(specularGlossinessTexCoords, u_specularGlossinessTextureTransform);\n          #endif\n\n        vec4 specularGlossiness = czm_srgbToLinear(texture2D(u_specularGlossinessTexture, specularGlossinessTexCoords));\n        vec3 specular = specularGlossiness.rgb;\n        float glossiness = specularGlossiness.a;\n            #ifdef HAS_SPECULAR_FACTOR\n            specular *= u_specularFactor;\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            glossiness *= u_glossinessFactor;\n            #endif\n        #else\n            #ifdef HAS_SPECULAR_FACTOR\n            vec3 specular = clamp(u_specularFactor, vec3(0.0), vec3(1.0));\n            #else\n            vec3 specular = vec3(1.0);\n            #endif\n\n            #ifdef HAS_GLOSSINESS_FACTOR\n            float glossiness = clamp(u_glossinessFactor, 0.0, 1.0);\n            #else\n            float glossiness = 1.0;\n            #endif\n        #endif\n\n        #ifdef HAS_DIFFUSE_TEXTURE\n        vec2 diffuseTexCoords = TEXCOORD_DIFFUSE;\n            #ifdef HAS_DIFFUSE_TEXTURE_TRANSFORM\n            diffuseTexCoords = computeTextureTransform(diffuseTexCoords, u_diffuseTextureTransform);\n            #endif\n\n        vec4 diffuse = czm_srgbToLinear(texture2D(u_diffuseTexture, diffuseTexCoords));\n            #ifdef HAS_DIFFUSE_FACTOR\n            diffuse *= u_diffuseFactor;\n            #endif\n        #elif defined(HAS_DIFFUSE_FACTOR)\n        vec4 diffuse = clamp(u_diffuseFactor, vec4(0.0), vec4(1.0));\n        #else\n        vec4 diffuse = vec4(1.0);\n        #endif\n    czm_pbrParameters parameters = czm_pbrSpecularGlossinessMaterial(\n      diffuse.rgb,\n      specular,\n      glossiness\n    );\n    material.diffuse = parameters.diffuseColor;\n    // the specular glossiness extension's alpha overrides anything set\n    // by the base material.\n    material.alpha = diffuse.a;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #elif defined(LIGHTING_PBR)\n        #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE\n        vec2 metallicRoughnessTexCoords = TEXCOORD_METALLIC_ROUGHNESS;\n            #ifdef HAS_METALLIC_ROUGHNESS_TEXTURE_TRANSFORM\n            metallicRoughnessTexCoords = computeTextureTransform(metallicRoughnessTexCoords, u_metallicRoughnessTextureTransform);\n            #endif\n\n        vec3 metallicRoughness = texture2D(u_metallicRoughnessTexture, metallicRoughnessTexCoords).rgb;\n        float metalness = clamp(metallicRoughness.b, 0.0, 1.0);\n        float roughness = clamp(metallicRoughness.g, 0.04, 1.0);\n            #ifdef HAS_METALLIC_FACTOR\n            metalness *= u_metallicFactor;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            roughness *= u_roughnessFactor;\n            #endif\n        #else\n            #ifdef HAS_METALLIC_FACTOR\n            float metalness = clamp(u_metallicFactor, 0.0, 1.0);\n            #else\n            float metalness = 1.0;\n            #endif\n\n            #ifdef HAS_ROUGHNESS_FACTOR\n            float roughness = clamp(u_roughnessFactor, 0.04, 1.0);\n            #else\n            float roughness = 1.0;\n            #endif\n        #endif\n    czm_pbrParameters parameters = czm_pbrMetallicRoughnessMaterial(\n      material.diffuse,\n      metalness,\n      roughness\n    );\n    material.diffuse = parameters.diffuseColor;\n    material.specular = parameters.f0;\n    material.roughness = parameters.roughness;\n    #endif\n}\n";const Uie=_2.Material,Vie=_2.MetallicRoughness,Hie=_2.SpecularGlossiness,Gie={};function Wie(e,t,n,i,o){const r=`HAS_${o}_TEXTURE_TRANSFORM`;e.addDefine(r,void 0,Mee.FRAGMENT);const a=`${i}Transform`;e.addUniform("mat3",a,Mee.FRAGMENT),t[a]=function(){return n.transform}}function qie(e,t,n,i,a,s){e.addUniform("sampler2D",i,Mee.FRAGMENT),t[i]=function(){return Object(o["a"])(n.texture,s)};const c=`HAS_${a}_TEXTURE`;e.addDefine(c,void 0,Mee.FRAGMENT);const l=n.texCoord,u=`v_texCoord_${l}`,h=`TEXCOORD_${a}`;e.addDefine(h,u,Mee.FRAGMENT);const d=n.transform;Object(r["a"])(d)&&!ce.equals(d,ce.IDENTITY)&&Wie(e,t,n,i,a)}function Yie(e,t,n,i,o,a,s){const c=e.emissiveTexture;Object(r["a"])(c)&&!s&&qie(n,t,c,"u_emissiveTexture","EMISSIVE",a);const l=e.emissiveFactor;Object(r["a"])(l)&&!g.equals(l,Uie.DEFAULT_EMISSIVE_FACTOR)&&(n.addUniform("vec3","u_emissiveFactor",Mee.FRAGMENT),t.u_emissiveFactor=function(){return e.emissiveFactor},n.addDefine("HAS_EMISSIVE_FACTOR",void 0,Mee.FRAGMENT));const u=e.normalTexture;Object(r["a"])(u)&&!s&&qie(n,t,u,"u_normalTexture","NORMAL",o);const h=e.occlusionTexture;Object(r["a"])(h)&&!s&&qie(n,t,h,"u_occlusionTexture","OCCLUSION",i)}function Xie(e,t,n,i,o){const a=e.specularGlossiness;n.addDefine("USE_SPECULAR_GLOSSINESS",void 0,Mee.FRAGMENT);const s=a.diffuseTexture;Object(r["a"])(s)&&!o&&qie(n,t,s,"u_diffuseTexture","DIFFUSE",i);const c=a.diffuseFactor;Object(r["a"])(c)&&!be.equals(c,Hie.DEFAULT_DIFFUSE_FACTOR)&&(n.addUniform("vec4","u_diffuseFactor",Mee.FRAGMENT),t.u_diffuseFactor=function(){return a.diffuseFactor},n.addDefine("HAS_DIFFUSE_FACTOR",void 0,Mee.FRAGMENT));const l=a.specularGlossinessTexture;Object(r["a"])(l)&&!o&&qie(n,t,l,"u_specularGlossinessTexture","SPECULAR_GLOSSINESS",i);const u=a.specularFactor;Object(r["a"])(u)&&!g.equals(u,Hie.DEFAULT_SPECULAR_FACTOR)&&(n.addUniform("vec3","u_specularFactor",Mee.FRAGMENT),t.u_specularFactor=function(){return a.specularFactor},n.addDefine("HAS_SPECULAR_FACTOR",void 0,Mee.FRAGMENT));const h=a.glossinessFactor;Object(r["a"])(h)&&h!==Hie.DEFAULT_GLOSSINESS_FACTOR&&(n.addUniform("float","u_glossinessFactor",Mee.FRAGMENT),t.u_glossinessFactor=function(){return a.glossinessFactor},n.addDefine("HAS_GLOSSINESS_FACTOR",void 0,Mee.FRAGMENT))}function Kie(e,t,n,i,o){const a=e.metallicRoughness;n.addDefine("USE_METALLIC_ROUGHNESS",void 0,Mee.FRAGMENT);const s=a.baseColorTexture;Object(r["a"])(s)&&!o&&qie(n,t,s,"u_baseColorTexture","BASE_COLOR",i);const c=a.baseColorFactor;Object(r["a"])(c)&&!be.equals(c,Vie.DEFAULT_BASE_COLOR_FACTOR)&&(n.addUniform("vec4","u_baseColorFactor",Mee.FRAGMENT),t.u_baseColorFactor=function(){return a.baseColorFactor},n.addDefine("HAS_BASE_COLOR_FACTOR",void 0,Mee.FRAGMENT));const l=a.metallicRoughnessTexture;Object(r["a"])(l)&&!o&&qie(n,t,l,"u_metallicRoughnessTexture","METALLIC_ROUGHNESS",i);const u=a.metallicFactor;Object(r["a"])(u)&&u!==Vie.DEFAULT_METALLIC_FACTOR&&(n.addUniform("float","u_metallicFactor",Mee.FRAGMENT),t.u_metallicFactor=function(){return a.metallicFactor},n.addDefine("HAS_METALLIC_FACTOR",void 0,Mee.FRAGMENT));const h=a.roughnessFactor;Object(r["a"])(h)&&h!==Vie.DEFAULT_ROUGHNESS_FACTOR&&(n.addUniform("float","u_roughnessFactor",Mee.FRAGMENT),t.u_roughnessFactor=function(){return a.roughnessFactor},n.addDefine("HAS_ROUGHNESS_FACTOR",void 0,Mee.FRAGMENT))}Gie.name="MaterialPipelineStage",Gie.process=function(e,t,n){const i=t.material,o=e.model,a=Object(r["a"])(o.classificationType),s=a,c=e.uniformMap,l=e.shaderBuilder,u=n.context.defaultTexture,h=n.context.defaultNormalTexture,d=n.context.defaultEmissiveTexture;Yie(i,c,l,u,h,d,s),Object(r["a"])(i.specularGlossiness)?Xie(i,c,l,u,s):Kie(i,c,l,u,s);const f=_5.getAttributeBySemantic(t,h5.NORMAL),p=e.lightingOptions;i.unlit||!f||a?p.lightingModel=Bie.UNLIT:p.lightingModel=Bie.PBR;const m=o.backFaceCulling&&!i.doubleSided;e.renderStateOptions.cull.enabled=m;const _=e.alphaOptions;i.alphaMode===H1.BLEND?_.pass=hF.TRANSLUCENT:i.alphaMode===H1.MASK&&(_.alphaCutoff=i.alphaCutoff),l.addFragmentLines(kie),i.doubleSided&&l.addDefine("HAS_DOUBLE_SIDED_MATERIAL",void 0,Mee.BOTH)},Gie._processTexture=qie,Gie._processTextureTransform=Wie;var $ie=Gie,Jie="void morphTargetsStage(inout ProcessedAttributes attributes) \n{\n    vec3 positionMC = attributes.positionMC;\n    attributes.positionMC = getMorphedPosition(positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = getMorphedNormal(normalMC);\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = getMorphedTangent(tangentMC);\n    #endif\n}";const Qie={name:"MorphTargetsPipelineStage",FUNCTION_ID_GET_MORPHED_POSITION:"getMorphedPosition",FUNCTION_SIGNATURE_GET_MORPHED_POSITION:"vec3 getMorphedPosition(in vec3 position)",FUNCTION_ID_GET_MORPHED_NORMAL:"getMorphedNormal",FUNCTION_SIGNATURE_GET_MORPHED_NORMAL:"vec3 getMorphedNormal(in vec3 normal)",FUNCTION_ID_GET_MORPHED_TANGENT:"getMorphedTangent",FUNCTION_SIGNATURE_GET_MORPHED_TANGENT:"vec3 getMorphedTangent(in vec3 tangent)",process:function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_MORPH_TARGETS",void 0,Mee.VERTEX),ooe(n);const i=t.morphTargets.length;for(let s=0;s<i;s++){const n=t.morphTargets[s].attributes,i=n.length;for(let t=0;t<i;t++){const i=n[t],o=i.semantic;o!==h5.POSITION&&o!==h5.NORMAL&&o!==h5.TANGENT||(eoe(e,i,e.attributeIndex,s),e.attributeIndex++)}}roe(n);const o=e.runtimeNode.morphWeights,r=o.length;n.addUniform("float",`u_morphWeights[${r}]`,Mee.VERTEX),n.addVertexLines(Jie);const a={u_morphWeights:function(){return e.runtimeNode.morphWeights}};e.uniformMap=Object(qE["a"])(a,e.uniformMap)}},Zie={attributeString:void 0,functionId:void 0};function eoe(e,t,n,i){const o=e.shaderBuilder;toe(e,t,n);const r=noe(t,Zie);ioe(o,r,i)}function toe(e,t,n){const i={index:n,value:Object(r["a"])(t.buffer)?void 0:t.constant,vertexBuffer:t.buffer,componentsPerAttribute:rc.getNumberOfComponents(t.type),componentDatatype:t.componentDatatype,offsetInBytes:t.byteOffset,strideInBytes:t.byteStride,normalize:t.normalized};e.attributes.push(i)}function noe(e,t){const n=e.semantic;switch(n){case h5.POSITION:t.attributeString="Position",t.functionId=Qie.FUNCTION_ID_GET_MORPHED_POSITION;break;case h5.NORMAL:t.attributeString="Normal",t.functionId=Qie.FUNCTION_ID_GET_MORPHED_NORMAL;break;case h5.TANGENT:t.attributeString="Tangent",t.functionId=Qie.FUNCTION_ID_GET_MORPHED_TANGENT;break;default:break}return t}function ioe(e,t,n){const i=t.attributeString,o=`a_target${i}_${n}`,r=`morphed${i} += u_morphWeights[${n}] * a_target${i}_${n};`;e.addAttribute("vec3",o),e.addFunctionLines(t.functionId,[r])}function ooe(e){e.addFunction(Qie.FUNCTION_ID_GET_MORPHED_POSITION,Qie.FUNCTION_SIGNATURE_GET_MORPHED_POSITION,Mee.VERTEX);const t="vec3 morphedPosition = position;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_POSITION,[t]),e.addFunction(Qie.FUNCTION_ID_GET_MORPHED_NORMAL,Qie.FUNCTION_SIGNATURE_GET_MORPHED_NORMAL,Mee.VERTEX);const n="vec3 morphedNormal = normal;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_NORMAL,[n]),e.addFunction(Qie.FUNCTION_ID_GET_MORPHED_TANGENT,Qie.FUNCTION_SIGNATURE_GET_MORPHED_TANGENT,Mee.VERTEX);const i="vec3 morphedTangent = tangent;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_TANGENT,[i])}function roe(e){const t="return morphedPosition;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_POSITION,[t]);const n="return morphedNormal;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_NORMAL,[n]);const i="return morphedTangent;";e.addFunctionLines(Qie.FUNCTION_ID_GET_MORPHED_TANGENT,[i])}var aoe=Qie;const soe={};function coe(e,t){const n=e.model,i={model:n,node:e.runtimeNode,primitive:e.runtimePrimitive};let o;if(W7.is3DTiles(n.type)){const e=n.content;o={content:e,primitive:e.tileset,detail:i}}else o={primitive:n,detail:i};return o.id=n.id,Object(r["a"])(t)&&(o.instanceId=t),o}function loe(e,t,n){const i=e.model;let a,s;const c=i.featureIdLabel,l=i.instanceFeatureIdLabel;Object(r["a"])(i.featureTableId)?a=i.featureTableId:Object(r["a"])(n)?(s=_5.getFeatureIdsByLabel(n.featureIds,l),a=s.propertyTableId):(s=_5.getFeatureIdsByLabel(t.featureIds,c),a=s.propertyTableId);const u=i.featureTables[a],h=e.shaderBuilder;h.addUniform("sampler2D","model_pickTexture",Mee.FRAGMENT);const d=u.batchTexture;e.uniformMap.model_pickTexture=function(){return Object(o["a"])(d.pickTexture,d.defaultTexture)},e.pickId="((selectedFeature.id < int(model_featuresLength)) ? texture2D(model_pickTexture, selectedFeature.st) : vec4(0.0))"}function uoe(e,t){const n=e.instanceCount,i=new Array(n),o=new Uint8Array(4*n),r=e.model,a=r._pipelineResources;for(let h=0;h<n;h++){const n=coe(e,h),r=t.createPickId(n);a.push(r),i[h]=r;const s=r.color;o[4*h+0]=Dm.floatToByte(s.red),o[4*h+1]=Dm.floatToByte(s.green),o[4*h+2]=Dm.floatToByte(s.blue),o[4*h+3]=Dm.floatToByte(s.alpha)}r._pickIds=i;const s=NV.createVertexBuffer({context:t,typedArray:o,usage:LV.STATIC_DRAW});s.vertexArrayDestroyable=!1;const c=!1;r.statistics.addBuffer(s,c),a.push(s);const l={index:e.attributeIndex++,vertexBuffer:s,componentsPerAttribute:4,componentDatatype:Ks.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1};e.attributes.push(l);const u=e.shaderBuilder;u.addDefine("USE_PICKING",void 0,Mee.BOTH),u.addAttribute("vec4","a_pickColor"),u.addVarying("vec4","v_pickColor"),e.pickId="v_pickColor"}soe.name="PickingPipelineStage",soe.process=function(e,t,n){const i=n.context,o=e.runtimeNode,a=e.shaderBuilder,s=e.model,c=o.node.instances;if(e.hasPropertyTable)loe(e,t,c,i);else if(Object(r["a"])(c))uoe(e,i);else{const t=coe(e),n=i.createPickId(t);s._pipelineResources.push(n),s._pickIds.push(n),a.addUniform("vec4","czm_pickColor",Mee.FRAGMENT);const o=e.uniformMap;o.czm_pickColor=function(){return n.color},e.pickId="czm_pickColor"}};var hoe=soe;const doe={ADD:0,REPLACE:1};var foe=Object.freeze(doe),poe="float getPointSizeFromAttenuation(vec3 positionEC) {\n  // Variables are packed into a single vector to minimize gl.uniformXXX() calls\n  float pointSize = model_pointCloudParameters.x;\n  float geometricError = model_pointCloudParameters.y;\n  float depthMultiplier = model_pointCloudParameters.z;\n\n  float depth = -positionEC.z;\n  return min((geometricError / depth) * depthMultiplier, pointSize);\n}\n\n#ifdef HAS_POINT_CLOUD_SHOW_STYLE\nfloat pointCloudShowStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getShowFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_COLOR_STYLE\nvec4 pointCloudColorStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return getColorFromStyle(attributes, metadata, tiles3d_tileset_time);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_POINT_SIZE_STYLE\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  float tiles3d_tileset_time = model_pointCloudParameters.w;\n  return float(getPointSizeFromStyle(attributes, metadata, tiles3d_tileset_time));\n}\n#elif defined(HAS_POINT_CLOUD_ATTENUATION)\nfloat pointCloudPointSizeStylingStage(in ProcessedAttributes attributes, in Metadata metadata) {\n  return getPointSizeFromAttenuation(v_positionEC);\n}\n#endif\n\n#ifdef HAS_POINT_CLOUD_BACK_FACE_CULLING\nfloat pointCloudBackFaceCullingStage() {\n  #if defined(HAS_NORMALS) && !defined(HAS_DOUBLE_SIDED_MATERIAL)\n  // This needs to be computed in eye coordinates so we can't use attributes.normalMC\n  return step(-v_normalEC.z, 0.0);\n  #else\n  return 1.0;\n  #endif\n}\n#endif";const moe=new be,_oe={name:"PointCloudStylingPipelineStage",process:function(e,t,n){const i=e.shaderBuilder,a=e.model,s=a.style,c=a.structuralMetadata,l=Object(r["a"])(c)?c.propertyAttributes:void 0,u=Object(r["a"])(a.featureTableId)&&a.featureTables[a.featureTableId].featuresLength>0,h=!Object(r["a"])(l)&&u;if(Object(r["a"])(s)&&!h){const n=Ooe(l),o=woe(s,n);Toe(i,o);const r=Eoe(o),a=r.indexOf("normalMC")>=0,c=_5.getAttributeBySemantic(t,h5.NORMAL);if(a&&!c)throw new ye["a"]("Style references the NORMAL semantic but the point cloud does not have normals");i.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,Mee.VERTEX);const u=o.styleTranslucent;u&&(e.alphaOptions.pass=hF.TRANSLUCENT)}const d=a.pointCloudShading;let f,p,m;d.attenuation&&i.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,Mee.VERTEX),d.backFaceCulling&&i.addDefine("HAS_POINT_CLOUD_BACK_FACE_CULLING",void 0,Mee.VERTEX),W7.is3DTiles(a.type)&&(p=!0,f=a.content,m=f.tile.refine===foe.ADD),i.addUniform("vec4","model_pointCloudParameters",Mee.VERTEX),i.addVertexLines(poe);const _=e.uniformMap;_.model_pointCloudParameters=function(){const i=moe;let r=1;p&&(r=m?5:f.tileset.maximumScreenSpaceError),i.x=Object(o["a"])(d.maximumAttenuation,r),i.x*=n.pixelRatio;const a=boe(e,t,d,f);i.y=a*d.geometricErrorScale;const s=n.context,c=n.camera.frustum;let l;return l=n.mode===SH.SCENE2D||c instanceof IO?Number.POSITIVE_INFINITY:s.drawingBufferHeight/n.camera.frustum.sseDenominator,i.z=l,p&&(i.w=f.tileset.timeSinceLoad),i}}},goe=new g;function boe(e,t,n,i){if(Object(r["a"])(i)){const e=i.tile.geometricError;if(e>0)return e}if(Object(r["a"])(n.baseResolution))return n.baseResolution;const o=_5.getAttributeBySemantic(t,h5.POSITION),a=o.count,c=e.runtimeNode.transform;let l=g.subtract(o.max,o.min,goe);l=Me.multiplyByPointAsVector(c,l,goe);const u=l.x*l.y*l.z,h=s["a"].cbrt(u/a);return h}const yoe={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},voe={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"};function Ooe(e){const t=Object(RL["a"])(voe);if(!Object(r["a"])(e))return t;for(let n=0;n<e.length;n++){const i=e[n],o=i.properties;for(const e in o)o.hasOwnProperty(e)&&(t[e]=`metadata.${e}`)}return t}const Aoe="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function woe(e,t){const n=yoe,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${Aoe})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${Aoe})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${Aoe})`,t,i),n.styleTranslucent=Object(r["a"])(n.colorStyleFunction)&&i.translucent,n}function Toe(e,t){const n=t.colorStyleFunction;Object(r["a"])(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,Mee.BOTH),e.addVertexLines(n),e.addVarying("vec4","v_pointCloudColor"));const i=t.showStyleFunction;Object(r["a"])(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,Mee.VERTEX),e.addVertexLines(i));const o=t.pointSizeStyleFunction;Object(r["a"])(o)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,Mee.VERTEX),e.addVertexLines(o))}function Coe(e,t){const n=/attributes\.(\w+)/g;let i=n.exec(e);while(null!==i){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function Eoe(e){const t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return Object(r["a"])(t)&&Coe(t,o),Object(r["a"])(n)&&Coe(n,o),Object(r["a"])(i)&&Coe(i,o),o}var xoe=_oe,Soe="void primitiveOutlineStage() {\n    v_outlineCoordinates = a_outlineCoordinates;\n}\n",Ioe="void primitiveOutlineStage(inout czm_modelMaterial material) {\n    if (!model_showOutline) {\n        return;\n    }\n\n    float outlineX = \n        texture2D(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r;\n    float outlineY = \n        texture2D(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r;\n    float outlineZ = \n        texture2D(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r;\n    float outlineness = max(outlineX, max(outlineY, outlineZ));\n\n    material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness);\n}\n\n";const Doe={name:"PrimitiveOutlinePipelineStage",process:function(e,t,n){const i=e.shaderBuilder,o=e.uniformMap;i.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,Mee.BOTH),i.addAttribute("vec3","a_outlineCoordinates"),i.addVarying("vec3","v_outlineCoordinates");const r=t.outlineCoordinates,a={index:e.attributeIndex++,vertexBuffer:r.buffer,componentsPerAttribute:rc.getNumberOfComponents(r.type),componentDatatype:r.componentDatatype,offsetInBytes:r.byteOffset,strideInBytes:r.byteStride,normalize:r.normalized};e.attributes.push(a),i.addUniform("sampler2D","model_outlineTexture",Mee.FRAGMENT);const s=S5.createTexture(n.context);o.model_outlineTexture=function(){return s};const c=e.model;i.addUniform("vec4","model_outlineColor",Mee.FRAGMENT),o.model_outlineColor=function(){return c.outlineColor},i.addUniform("bool","model_showOutline",Mee.FRAGMENT),o.model_showOutline=function(){return c.showOutline},i.addVertexLines(Soe),i.addFragmentLines(Ioe)}};var Poe=Doe;const joe={};function Roe(e,t){const n=Object(r["a"])(t.indices)?t.indices.count:_5.getAttributeBySemantic(t,"POSITION").count,i=t.primitiveType;i===Eu.POINTS?e.pointsLength+=n:Eu.isTriangles(i)&&(e.trianglesLength+=Loe(i,n));const o=t.attributes,a=o.length;for(let l=0;l<a;l++){const t=o[l];if(Object(r["a"])(t.buffer)){const n=Object(r["a"])(t.typedArray);e.addBuffer(t.buffer,n)}}const s=t.outlineCoordinates;if(Object(r["a"])(s)&&Object(r["a"])(s.buffer)){const t=!1;e.addBuffer(s.buffer,t)}const c=t.indices;if(Object(r["a"])(c)&&Object(r["a"])(c.buffer)){const t=Object(r["a"])(c.typedArray);e.addBuffer(c.buffer,t)}}function Loe(e,t){switch(e){case Eu.TRIANGLES:return t/3;case Eu.TRIANGLE_STRIP:case Eu.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function Moe(e,t){const n=t.positionBuffer2D;if(Object(r["a"])(n)){const t=!0;e.addBuffer(n,t)}}function Noe(e,t){const n=t.morphTargets;if(!Object(r["a"])(n))return;const i=!1,o=n.length;for(let a=0;a<o;a++){const t=n[a].attributes,o=t.length;for(let n=0;n<o;n++){const o=t[n];Object(r["a"])(o.buffer)&&e.addBuffer(o.buffer,i)}}}function Boe(e,t){const n=Foe(t),i=n.length;for(let o=0;o<i;o++){const t=n[o];Object(r["a"])(t)&&Object(r["a"])(t.texture)&&e.addTexture(t.texture)}}function Foe(e){const t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],i=e.specularGlossiness;return Object(r["a"])(i)&&(n.push(i.diffuseTexture),n.push(i.specularGlossinessTexture)),n}function zoe(e,t){const n=t.length;for(let i=0;i<n;i++){const n=t[i];if(n instanceof _2.FeatureIdTexture){const t=n.textureReader;Object(r["a"])(t.texture)&&e.addTexture(t.texture)}}}function koe(e,t){const n=t.structuralMetadata;Object(r["a"])(n)&&(Uoe(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);const i=t.featureTables;if(!Object(r["a"])(i))return;const o=i.length;for(let r=0;r<o;r++){const t=i[r];e.addBatchTexture(t.batchTexture)}}function Uoe(e,t){const n=t.propertyTextures;if(!Object(r["a"])(n))return;const i=n.length;for(let o=0;o<i;o++){const t=n[o],i=t.properties;for(const n in i)if(i.hasOwnProperty(n)){const t=i[n],o=t.textureReader;Object(r["a"])(o.texture)&&e.addTexture(o.texture)}}}joe.name="PrimitiveStatisticsPipelineStage",joe.process=function(e,t,n){const i=e.model,o=i.statistics;Roe(o,t),Moe(o,e.runtimePrimitive),Noe(o,t),Boe(o,t.material),zoe(o,t.featureIds),koe(o,i)},joe._countGeometry=Roe,joe._count2DPositions=Moe,joe._countMorphTargetAttributes=Noe,joe._countMaterialTextures=Boe,joe._countFeatureIdTextures=zoe,joe._countBinaryMetadata=koe;var Voe=joe;const Hoe=new Me,Goe=new Me,Woe={name:"SceneMode2DPipelineStage",process:function(e,t,n){const i=_5.getAttributeBySemantic(t,h5.POSITION),o=e.shaderBuilder,a=e.model,s=a.sceneGraph.computedModelMatrix,c=e.runtimeNode.computedTransform,l=Me.multiplyTransformation(s,c,Hoe),u=Xoe(e,l,n),h=e.runtimePrimitive;h.boundingSphere2D=u;const d=e.runtimeNode.node.instances;if(Object(r["a"])(d))return;if(Object(r["a"])(i.typedArray)){const e=Qoe(i,l,u,n);h.positionBuffer2D=e,a._modelResources.push(e),i.typedArray=void 0}o.addDefine("USE_2D_POSITIONS",void 0,Mee.VERTEX),o.addUniform("mat4","u_modelView2D",Mee.VERTEX);const f=Me.fromTranslation(u.center,new Me),p=n.context,m={u_modelView2D:function(){return Me.multiplyTransformation(p.uniformState.view,f,Goe)}};e.uniformMap=Object(qE["a"])(m,e.uniformMap)}},qoe=new g,Yoe=new g;function Xoe(e,t,n){const i=Me.multiplyByPoint(t,e.positionMin,qoe),o=f9.computeActualWgs84Position(n,i,i),r=Me.multiplyByPoint(t,e.positionMax,Yoe),a=f9.computeActualWgs84Position(n,r,r);return Tt.fromCornerPoints(o,a,new Tt)}const Koe=new g;function $oe(e,t){const n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let a=0;a<n;a+=3){const t=g.fromArray(e,a,Koe),n=g.multiplyComponents(t,r,t),s=g.add(n,o,n);i[a]=s.x,i[a+1]=s.y,i[a+2]=s.z}return i}function Joe(e,t,n,i){let o;o=Object(r["a"])(e.quantization)?$oe(e.typedArray,e.quantization):e.typedArray.slice();const a=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,s=o.length,c=Object(r["a"])(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let r=a;r<s;r+=c){const e=g.fromArray(o,r,Koe);if(isNaN(e.x)||isNaN(e.y)||isNaN(e.z))continue;const a=Me.multiplyByPoint(t,e,e),s=f9.computeActualWgs84Position(i,a,a),c=g.subtract(s,n,s);o[r]=c.x,o[r+1]=c.y,o[r+2]=c.z}return o}function Qoe(e,t,n,i){const o=Object(RL["a"])(i);o.mode=SH.COLUMBUS_VIEW;const r=n.center,a=Joe(e,t,r,o),s=NV.createVertexBuffer({context:i.context,typedArray:a,usage:LV.STATIC_DRAW});return s.vertexArrayDestroyable=!1,s}var Zoe=Woe,ere="void skinningStage(inout ProcessedAttributes attributes) \n{\n    mat4 skinningMatrix = getSkinningMatrix();\n    mat3 skinningMatrixMat3 = mat3(skinningMatrix);\n\n    vec4 positionMC = vec4(attributes.positionMC, 1.0);\n    attributes.positionMC = vec3(skinningMatrix * positionMC);\n\n    #ifdef HAS_NORMALS\n    vec3 normalMC = attributes.normalMC;\n    attributes.normalMC = skinningMatrixMat3 * normalMC;\n    #endif\n\n    #ifdef HAS_TANGENTS\n    vec3 tangentMC = attributes.tangentMC;\n    attributes.tangentMC = skinningMatrixMat3 * tangentMC;\n    #endif\n}";const tre={};function nre(e){let t=-1;const n=e.attributes,i=n.length;for(let o=0;o<i;o++){const e=n[o],i=e.semantic===h5.JOINTS||e.semantic===h5.WEIGHTS;i&&(t=Math.max(t,e.setIndex))}return t}function ire(e,t){e.addFunction(tre.FUNCTION_ID_GET_SKINNING_MATRIX,tre.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,Mee.VERTEX);const n="mat4 skinnedMatrix = mat4(0);";let i,o;e.addFunctionLines(tre.FUNCTION_ID_GET_SKINNING_MATRIX,[n]);const r=["x","y","z","w"],a=nre(t);for(i=0;i<=a;i++)for(o=0;o<=3;o++){const t=r[o],n=`skinnedMatrix += a_weights_${i}.${t} * u_jointMatrices[int(a_joints_${i}.${t})];`;e.addFunctionLines(tre.FUNCTION_ID_GET_SKINNING_MATRIX,[n])}const s="return skinnedMatrix;";e.addFunctionLines(tre.FUNCTION_ID_GET_SKINNING_MATRIX,[s])}tre.name="SkinningPipelineStage",tre.FUNCTION_ID_GET_SKINNING_MATRIX="getSkinningMatrix",tre.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX="mat4 getSkinningMatrix()",tre.process=function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,Mee.VERTEX),ire(n,t);const i=e.runtimeNode,o=i.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${o.length}]`,Mee.VERTEX),n.addVertexLines(ere);const r={u_jointMatrices:function(){return i.computedJointMatrices}};e.uniformMap=Object(qE["a"])(r,e.uniformMap)};var ore=tre;const rre={};function are(e,t,n){const i=_5.getAttributeBySemantic(e,h5.POSITION),o=i.count,a=n.context.webgl2;let s;if(Object(r["a"])(t)){const e=t.buffer,n=t.count;if(Object(r["a"])(e)&&a){const t=e.sizeInBytes===n;s=t?new Uint8Array(n):ll.createTypedArray(o,n),e.getBufferData(s)}else s=t.typedArray}const c=e.primitiveType,l=EL.createWireframeIndices(c,o,s),u=ll.fromSizeInBytes(l.BYTES_PER_ELEMENT);return NV.createIndexBuffer({context:n.context,typedArray:l,usage:LV.STATIC_DRAW,indexDatatype:u})}rre.name="WireframePipelineStage",rre.process=function(e,t,n){const i=e.shaderBuilder;i.addDefine("HAS_WIREFRAME",void 0,Mee.FRAGMENT);const o=e.model,r=are(t,e.indices,n);o._pipelineResources.push(r),e.wireframeIndexBuffer=r;const a=!1;o.statistics.addBuffer(r,a);const s=e.primitiveType,c=e.count;e.primitiveType=Eu.LINES,e.count=EL.getWireframeIndicesCount(s,c)};var sre=rre;function cre(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.primitive,n=e.node,r=e.model;i["a"].typeOf.object("options.primitive",t),i["a"].typeOf.object("options.node",n),i["a"].typeOf.object("options.model",r),this.primitive=t,this.node=n,this.model=r,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}function lre(e,t,n){let i;return Object(r["a"])(t.instances)&&(i=_5.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),Object(r["a"])(i))?{hasFeatureIds:!0,hasPropertyTable:Object(r["a"])(i.propertyTableId)}:(i=_5.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),Object(r["a"])(i)?{hasFeatureIds:!0,hasPropertyTable:Object(r["a"])(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}cre.prototype.configurePipeline=function(e){const t=this.pipelineStages;t.length=0;const n=this.primitive,i=this.node,o=this.model,a=o.customShader,s=o.style,c=e.context.webgl2,l=e.mode,u=l!==SH.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,h=Object(r["a"])(n.morphTargets)&&n.morphTargets.length>0,d=Object(r["a"])(i.skin),f=Object(r["a"])(a),p=f&&Object(r["a"])(a.fragmentShaderText),m=!p||a.mode!==hne.REPLACE_MATERIAL,_=_5.hasQuantizedAttributes(n.attributes),g=o.debugWireframe&&Eu.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||c),b=o.pointCloudShading,y=Object(r["a"])(b)&&b.attenuation,v=Object(r["a"])(b)&&b.backFaceCulling,O=n.primitiveType===Eu.POINTS&&(Object(r["a"])(s)||y||v),A=o._enableShowOutline&&Object(r["a"])(n.outlineCoordinates),w=lre(o,i,n),T=Object(r["a"])(o.classificationType);u&&t.push(Zoe),t.push(Lie),g&&t.push(sre),T&&t.push(rne),h&&t.push(aoe),d&&t.push(ore),O&&t.push(xoe),_&&t.push(fie),m&&t.push($ie),t.push(xne),t.push(Vne),w.hasPropertyTable&&(t.push(Aie),t.push(nne),t.push(lne)),f&&t.push(aie),t.push(zie),o.allowPicking&&t.push(hoe),A&&t.push(Poe),t.push(ene),t.push(Voe)};var ure=cre;function hre(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.skin",e.skin),i["a"].typeOf.object("options.sceneGraph",e.sceneGraph),this._sceneGraph=e.sceneGraph;const t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],dre(this)}function dre(e){const t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;const i=t.joints,o=i.length,r=e.sceneGraph._runtimeNodes,a=e.joints,s=e._jointMatrices;for(let c=0;c<o;c++){const e=i[c].index,t=r[e];a.push(t);const o=n[c],l=fre(t,o,new Me);s.push(l)}}function fre(e,t,n){const i=Me.multiplyTransformation(e.transformToRoot,e.transform,n);return n=Me.multiplyTransformation(i,t,n),n}Object.defineProperties(hre.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),hre.prototype.updateJointMatrices=function(){const e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){const t=this.joints[n],i=this.inverseBindMatrices[n];e[n]=fre(t,i,e[n])}};var pre=hre;function mre(){this.pass=void 0,this.alphaCutoff=void 0}var _re=mre;function gre(e){this.name=e,this.fields=[]}gre.prototype.addField=function(e,t){const n=`    ${e} ${t};`;this.fields.push(n)},gre.prototype.generateGlslLines=function(){let e=this.fields;return 0===e.length&&(e=["    float _empty;"]),[].concat(`struct ${this.name}`,"{",e,"};")};var bre=gre;function yre(e){this.signature=e,this.body=[]}yre.prototype.addLines=function(e){if("string"!==typeof e&&!Array.isArray(e))throw new a["a"](`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this.body;if(Array.isArray(e)){const n=e.length;for(let i=0;i<n;i++)t.push(`    ${e[i]}`)}else t.push(`    ${e}`)},yre.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")};var vre=yre;function Ore(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}function Are(e){const t=[],n=[];let i,o,r,a,s=e._vertexShaderParts.structIds;for(i=0;i<s.length;i++)o=s[i],r=e._structs[o],a=r.generateGlslLines(),t.push.apply(t,a);for(s=e._fragmentShaderParts.structIds,i=0;i<s.length;i++)o=s[i],r=e._structs[o],a=r.generateGlslLines(),n.push.apply(n,a);return{vertexLines:t,fragmentLines:n}}function wre(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}function Tre(e){const t=[],n=[];let i,o,r,a,s=e._vertexShaderParts.functionIds;for(i=0;i<s.length;i++)o=s[i],r=e._functions[o],a=r.generateGlslLines(),t.push.apply(t,a);for(s=e._fragmentShaderParts.functionIds,i=0;i<s.length;i++)o=s[i],r=e._functions[o],a=r.generateGlslLines(),n.push.apply(n,a);return{vertexLines:t,fragmentLines:n}}Object.defineProperties(Ore.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),Ore.prototype.addDefine=function(e,t,n){i["a"].typeOf.string("identifier",e),n=Object(o["a"])(n,Mee.BOTH);let a=e;Object(r["a"])(t)&&(a+=` ${t.toString()}`),Mee.includesVertexShader(n)&&this._vertexShaderParts.defineLines.push(a),Mee.includesFragmentShader(n)&&this._fragmentShaderParts.defineLines.push(a)},Ore.prototype.addStruct=function(e,t,n){i["a"].typeOf.string("structId",e),i["a"].typeOf.string("structName",t),i["a"].typeOf.number("destination",n),this._structs[e]=new bre(t),Mee.includesVertexShader(n)&&this._vertexShaderParts.structIds.push(e),Mee.includesFragmentShader(n)&&this._fragmentShaderParts.structIds.push(e)},Ore.prototype.addStructField=function(e,t,n){i["a"].typeOf.string("structId",e),i["a"].typeOf.string("type",t),i["a"].typeOf.string("identifier",n),this._structs[e].addField(t,n)},Ore.prototype.addFunction=function(e,t,n){i["a"].typeOf.string("functionName",e),i["a"].typeOf.string("signature",t),i["a"].typeOf.number("destination",n),this._functions[e]=new vre(t),Mee.includesVertexShader(n)&&this._vertexShaderParts.functionIds.push(e),Mee.includesFragmentShader(n)&&this._fragmentShaderParts.functionIds.push(e)},Ore.prototype.addFunctionLines=function(e,t){if(i["a"].typeOf.string("functionName",e),"string"!==typeof t&&!Array.isArray(t))throw new a["a"](`Expected lines to be a string or an array of strings, actual value was ${t}`);this._functions[e].addLines(t)},Ore.prototype.addUniform=function(e,t,n){i["a"].typeOf.string("type",e),i["a"].typeOf.string("identifier",t),n=Object(o["a"])(n,Mee.BOTH);const r=`uniform ${e} ${t};`;Mee.includesVertexShader(n)&&this._vertexShaderParts.uniformLines.push(r),Mee.includesFragmentShader(n)&&this._fragmentShaderParts.uniformLines.push(r)},Ore.prototype.setPositionAttribute=function(e,t){if(i["a"].typeOf.string("type",e),i["a"].typeOf.string("identifier",t),Object(r["a"])(this._positionAttributeLine))throw new a["a"]("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine=`attribute ${e} ${t};`,this._attributeLocations[t]=0,0},Ore.prototype.addAttribute=function(e,t){i["a"].typeOf.string("type",e),i["a"].typeOf.string("identifier",t);const n=`attribute ${e} ${t};`;this._attributeLines.push(n);const o=this._nextAttributeLocation;return this._attributeLocations[t]=o,this._nextAttributeLocation+=wre(e),o},Ore.prototype.addVarying=function(e,t){i["a"].typeOf.string("type",e),i["a"].typeOf.string("identifier",t);const n=`varying ${e} ${t};`;this._vertexShaderParts.varyingLines.push(n),this._fragmentShaderParts.varyingLines.push(n)},Ore.prototype.addVertexLines=function(e){if("string"!==typeof e&&!Array.isArray(e))throw new a["a"](`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._vertexShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},Ore.prototype.addFragmentLines=function(e){if("string"!==typeof e&&!Array.isArray(e))throw new a["a"](`Expected lines to be a string or an array of strings, actual value was ${e}`);const t=this._fragmentShaderParts.shaderLines;Array.isArray(e)?t.push.apply(t,e):t.push(e)},Ore.prototype.buildShaderProgram=function(e){i["a"].typeOf.object("context",e);const t=Object(r["a"])(this._positionAttributeLine)?[this._positionAttributeLine]:[],n=Are(this),o=Tre(this),a=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,n.vertexLines,o.vertexLines,this._vertexShaderParts.shaderLines).join("\n"),s=new EV({defines:this._vertexShaderParts.defineLines,sources:[a]}),c=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,n.fragmentLines,o.fragmentLines,this._fragmentShaderParts.shaderLines).join("\n"),l=new EV({defines:this._fragmentShaderParts.defineLines,sources:[c]});return Nz.fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:l,attributeLocations:this._attributeLocations})},Ore.prototype.clone=function(){return Object(RL["a"])(this,!0)};var Cre=Ore;function Ere(e){i["a"].typeOf.object("model",e),this.shaderBuilder=new Cre,this.model=e,this.uniformMap={},this.alphaOptions=new _re,this.renderStateOptions=UF.getState(UF.fromCache({depthTest:{enabled:!0,func:jV.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1}var xre=Ere,Sre="void silhouetteStage(inout vec4 color) {\n    if(model_silhouettePass) {\n        color = czm_gammaCorrect(model_silhouetteColor);\n    }\n}",Ire="void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) {\n     #ifdef HAS_NORMALS\n     if(model_silhouettePass) {\n          vec3 normal = normalize(czm_normal3D * attributes.normalMC);\n          normal.x *= czm_projection[0][0];\n          normal.y *= czm_projection[1][1];\n          positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z;\n    }\n    #endif\n}\n";const Dre={name:"ModelSilhouettePipelineStage",silhouettesLength:0,process:function(e,t,n){Object(r["a"])(t._silhouetteId)||(t._silhouetteId=++Dre.silhouettesLength);const i=e.shaderBuilder;i.addDefine("HAS_SILHOUETTE",void 0,Mee.BOTH),i.addVertexLines(Ire),i.addFragmentLines(Sre),i.addUniform("vec4","model_silhouetteColor",Mee.FRAGMENT),i.addUniform("float","model_silhouetteSize",Mee.VERTEX),i.addUniform("bool","model_silhouettePass",Mee.BOTH);const o={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=Object(qE["a"])(o,e.uniformMap),e.hasSilhouette=!0}};var Pre=Dre,jre="void modelSplitterStage()\n{\n    // Don't split when rendering the shadow map, because it is rendered from\n    // the perspective of a totally different camera.\n#ifndef SHADOW_MAP\n    if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard;\n    if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard;\n#endif\n}\n";const Rre={name:"ModelSplitterPipelineStage",SPLIT_DIRECTION_UNIFORM_NAME:"model_splitDirection",process:function(e,t,n){const i=e.shaderBuilder;i.addDefine("HAS_MODEL_SPLITTER",void 0,Mee.FRAGMENT),i.addFragmentLines(jre);const o={};i.addUniform("float",Rre.SPLIT_DIRECTION_UNIFORM_NAME,Mee.FRAGMENT),o[Rre.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=Object(qE["a"])(o,e.uniformMap)}};var Lre=Rre;function Mre(e,t){i["a"].typeOf.object("modelRenderResources",e),i["a"].typeOf.object("runtimeNode",t),this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=Object(RL["a"])(e.uniformMap),this.alphaOptions=Object(RL["a"])(e.alphaOptions),this.renderStateOptions=Object(RL["a"])(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0}var Nre=Mre;function Bre(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.lightingModel=Object(o["a"])(e.lightingModel,Bie.UNLIT)}var Fre=Bre;function zre(e,t){i["a"].typeOf.object("nodeRenderResources",e),i["a"].typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=Object(RL["a"])(e.uniformMap),this.alphaOptions=Object(RL["a"])(e.alphaOptions),this.renderStateOptions=Object(RL["a"])(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=Object(r["a"])(n.indices)?n.indices.count:_5.getAttributeBySemantic(n,"POSITION").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const o=_5.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=g.clone(o.min,new g),this.positionMax=g.clone(o.max,new g),this.boundingSphere=Tt.fromCornerPoints(this.positionMin,this.positionMax,new Tt),this.lightingOptions=new Fre,this.pickId=void 0}var kre=zre;function Ure(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.modelComponents;i["a"].typeOf.object("options.model",e.model),i["a"].typeOf.object("options.modelComponents",t),this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=Me.clone(Me.IDENTITY),this._computedModelMatrix2D=Me.clone(Me.IDENTITY),this._axisCorrectionMatrix=_5.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new Me),this._runtimeArticulations={},Vre(this)}function Vre(e){const t=e._components,n=t.scene,i=e._model,o=i.modelMatrix;Hre(e,o);const r=t.articulations,a=r.length,s=e._runtimeArticulations;for(let b=0;b<a;b++){const t=r[b],n=new $ee({articulation:t,sceneGraph:e}),i=n.name;s[i]=n}const c=t.nodes,l=c.length;e._runtimeNodes=new Array(l);const u=n.nodes,h=u.length,d=Me.IDENTITY;for(let b=0;b<h;b++){const t=n.nodes[b],i=qre(e,t,d);e._rootNodes.push(i)}const f=t.skins,p=e._runtimeSkins,m=f.length;for(let b=0;b<m;b++){const t=f[b];p.push(new pre({skin:t,sceneGraph:e}))}const _=e._skinnedNodes,g=_.length;for(let b=0;b<g;b++){const t=_[b],n=e._runtimeNodes[t],i=c[t].skin,o=i.index;n._runtimeSkin=p[o],n.updateJointMatrices()}e.applyArticulations()}function Hre(e,t){const n=e._components,i=e._model;e._computedModelMatrix=Me.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=Me.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=Me.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}Object.defineProperties(Ure.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});const Gre=new g;function Wre(e,t){const n=e._computedModelMatrix,i=Me.getTranslation(n,Gre);if(g.equals(i,g.ZERO)){const i=e.boundingSphere.center,o=ka.wgs84To2DModelMatrix(t.mapProjection,i,e._computedModelMatrix2D);e._computedModelMatrix2D=Me.multiply(o,n,e._computedModelMatrix2D)}else e._computedModelMatrix2D=ka.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);e._boundingSphere2D=Tt.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}function qre(e,t,n){const i=[],o=_5.getNodeTransform(t),a=t.children.length;for(let r=0;r<a;r++){const a=t.children[r],s=Me.multiplyTransformation(n,o,new Me),c=qre(e,a,s);i.push(c)}const s=new Qte({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),c=t.primitives.length;for(let r=0;r<c;r++)s.runtimePrimitives.push(new ure({primitive:t.primitives[r],node:t,model:e._model}));const l=t.index;e._runtimeNodes[l]=s,Object(r["a"])(t.skin)&&e._skinnedNodes.push(l);const u=t.name;if(Object(r["a"])(u)){const t=e._model,n=new rte(t,s);t._nodesByName[u]=n}return l}const Yre=new g,Xre=new g,Kre=new g,$re=new g;function Jre(e,t,n,i,o){if(n&&!t.show)return;const r=t.children.length;for(let c=0;c<r;c++){const r=t.getChild(c);Jre(e,r,n,i,o)}const a=t.runtimePrimitives,s=a.length;for(let c=0;c<s;c++){const e=a[c];i(e,o)}}function Qre(e,t,n,i){const o=e._rootNodes,r=o.length;for(let a=0;a<r;a++){const r=o[a],s=e._runtimeNodes[r];Jre(e,s,t,n,i)}}Ure.prototype.buildDrawCommands=function(e){const t=this._model,n=new xre(t);t.statistics.clear(),this.configurePipeline(e);const i=this.modelPipelineStages;let o,r,a;for(o=0;o<i.length;o++){const r=i[o];r.process(n,t,e)}const s=g.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Yre),c=g.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,Xre);for(o=0;o<this._runtimeNodes.length;o++){const t=this._runtimeNodes[o];t.configurePipeline();const i=t.pipelineStages,l=new Nre(n,t);for(r=0;r<i.length;r++){const n=i[r];n.process(l,t.node,e)}const u=t.computedTransform;for(r=0;r<t.runtimePrimitives.length;r++){const n=t.runtimePrimitives[r];n.configurePipeline(e);const i=n.pipelineStages,o=new kre(l,n);for(a=0;a<i.length;a++){const t=i[a];t.process(o,n.primitive,e)}n.boundingSphere=Tt.clone(o.boundingSphere,new Tt);const h=Me.multiplyByPoint(u,o.positionMin,Kre),d=Me.multiplyByPoint(u,o.positionMax,$re);g.minimumByComponent(s,h,s),g.maximumByComponent(c,d,c);const f=Ree(o,e);n.drawCommand=f}}this._boundingSphere=Tt.fromCornerPoints(s,c,new Tt),this._boundingSphere=Tt.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=Tt.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=Tt.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale},Ure.prototype.configurePipeline=function(e){const t=this.modelPipelineStages;t.length=0;const n=this._model;Object(r["a"])(n.color)&&t.push(Zee),Object(r["a"])(n.classificationType)||(n.imageBasedLighting.enabled&&t.push(kee),n.isClippingEnabled()&&t.push(ite),n.hasSilhouette(e)&&t.push(Pre),Object(r["a"])(n.splitDirection)&&n.splitDirection!==m9.NONE&&t.push(Lre),W7.is3DTiles(n.type)&&t.push(Bee))},Ure.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){const r=this._runtimeNodes[n];for(i=0;i<r.updateStages.length;i++){const t=r.updateStages[i];t.update(r,this,e)}const a=e.mode!==SH.SCENE3D&&this._model._projectTo2D;for(t&&!a&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){const e=r.runtimePrimitives[i];for(o=0;o<e.updateStages.length;o++){const t=e.updateStages[o];t.update(e,this)}}}},Ure.prototype.updateModelMatrix=function(e,t){Hre(this,e),t.mode!==SH.SCENE3D&&Wre(this,t);const n=this._rootNodes;for(let i=0;i<n.length;i++){const e=this._runtimeNodes[n[i]];e._transformDirty=!0}},Ure.prototype.updateJointMatrices=function(){const e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){const t=e[n],i=this._runtimeNodes[t];i.updateJointMatrices()}};const Zre={backFaceCulling:void 0};function eae(e,t){const n=e.drawCommand;n.backFaceCulling=t.backFaceCulling}Ure.prototype.updateBackFaceCulling=function(e){const t=Zre;t.backFaceCulling=e,Qre(this,!1,eae,t)};const tae={shadowMode:void 0};function nae(e,t){const n=e.drawCommand;n.shadows=t.shadowMode}Ure.prototype.updateShadows=function(e){const t=tae;t.shadowMode=e,Qre(this,!1,nae,t)};const iae={debugShowBoundingVolume:void 0};function oae(e,t){const n=e.drawCommand;n.debugShowBoundingVolume=t.debugShowBoundingVolume}Ure.prototype.updateShowBoundingVolume=function(e){const t=iae;t.debugShowBoundingVolume=e,Qre(this,!1,oae,t)};const rae=[],aae={frameState:void 0,hasSilhouette:void 0};function sae(e,t){const n=t.frameState,i=t.hasSilhouette,o=n.passes,r=rae,a=e.drawCommand;a.pushCommands(n,n.commandList),i&&!o.pick&&a.pushSilhouetteCommands(n,r)}Ure.prototype.pushDrawCommands=function(e){const t=rae;t.length=0;const n=aae;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,Qre(this,!0,sae,n),e.commandList.push.apply(e.commandList,t)},Ure.prototype.setArticulationStage=function(e,t){const n=e.split(" ");if(2!==n.length)return;const i=n[0],o=n[1],a=this._runtimeArticulations[i];Object(r["a"])(a)&&a.setArticulationStage(o,t)},Ure.prototype.applyArticulations=function(){const e=this._runtimeArticulations;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n.apply()}};var cae=Ure;function lae(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap=new pu}Object.defineProperties(lae.prototype,{batchTexturesByteLength:{get:function(){const e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values;let n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}}),lae.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap.removeAll()},lae.prototype.addBuffer=function(e,t){if(i["a"].typeOf.object("buffer",e),i["a"].typeOf.bool("hasCpuCopy",t),!this._bufferIdSet.hasOwnProperty(e._id)){const n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0},lae.prototype.addTexture=function(e){i["a"].typeOf.object("texture",e),this._textureIdSet.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes),this._textureIdSet[e._id]=!0},lae.prototype.addBatchTexture=function(e){i["a"].typeOf.object("batchTexture",e),this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};var uae=lae,hae=n("d34e"),dae=n.n(hae);const fae={},pae=Uint32Array.BYTES_PER_ELEMENT;function mae(e,t){const n=e.json;let i,o,a;const s=Object(r["a"])(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,c=Object(r["a"])(t)&&Object(r["a"])(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;let l,u,h,d,f,p;if(Object(r["a"])(c)&&(a=c.properties),Object(r["a"])(s)){o=s.properties;const t=s.byteOffset,n=s.byteLength;if(!Object(r["a"])(o)||!Object(r["a"])(t)||!Object(r["a"])(n))throw new ye["a"]("Draco properties, byteOffset, and byteLength must be defined");i=e.buffer.slice(t,t+n),l=Object(r["a"])(o.POSITION),u=Object(r["a"])(o.RGB)||Object(r["a"])(o.RGBA),h=Object(r["a"])(o.NORMAL),d=Object(r["a"])(o.BATCH_ID),f=Object(r["a"])(o.RGBA)}return Object(r["a"])(i)&&(p={buffer:i,featureTableProperties:o,batchTableProperties:a,properties:Object(qE["a"])(o,a),dequantizeInShader:!0}),{draco:p,hasPositions:l,hasColors:u,isTranslucent:f,hasNormals:h,hasBatchIds:d}}function _ae(e){const t=e.json;let n;if(Object(r["a"])(t.POSITION))return n=e.getPropertyArray("POSITION",Ks.FLOAT,3),{name:h5.POSITION,semantic:h5.POSITION,typedArray:n,isQuantized:!1,componentDatatype:Ks.FLOAT,type:rc.VEC3};if(Object(r["a"])(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",Ks.UNSIGNED_SHORT,3);const t=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",Ks.FLOAT,3);if(!Object(r["a"])(t))throw new ye["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const i=65535,o=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",Ks.FLOAT,3);if(!Object(r["a"])(o))throw new ye["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:h5.POSITION,semantic:h5.POSITION,typedArray:n,isQuantized:!0,componentDatatype:Ks.FLOAT,type:rc.VEC3,quantizedRange:i,quantizedVolumeOffset:g.unpack(o),quantizedVolumeScale:g.unpack(t),quantizedComponentDatatype:Ks.UNSIGNED_SHORT,quantizedType:rc.VEC3}}}function gae(e){const t=e.json;let n;if(Object(r["a"])(t.RGBA))return n=e.getPropertyArray("RGBA",Ks.UNSIGNED_BYTE,4),{name:h5.COLOR,semantic:h5.COLOR,setIndex:0,typedArray:n,componentDatatype:Ks.UNSIGNED_BYTE,type:rc.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if(Object(r["a"])(t.RGB))return n=e.getPropertyArray("RGB",Ks.UNSIGNED_BYTE,3),{name:"COLOR",semantic:h5.COLOR,setIndex:0,typedArray:n,componentDatatype:Ks.UNSIGNED_BYTE,type:rc.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if(Object(r["a"])(t.RGB565))return n=e.getPropertyArray("RGB565",Ks.UNSIGNED_SHORT,1),{name:"COLOR",semantic:h5.COLOR,setIndex:0,typedArray:n,componentDatatype:Ks.FLOAT,type:rc.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if(Object(r["a"])(t.CONSTANT_RGBA)){const t=e.getGlobalProperty("CONSTANT_RGBA",Ks.UNSIGNED_BYTE,4),n=t[3],i=Dm.fromBytes(t[0],t[1],t[2],n),o=n<255;return{name:h5.COLOR,semantic:h5.COLOR,setIndex:0,constantColor:i,componentDatatype:Ks.FLOAT,type:rc.VEC4,isQuantized:!1,isTranslucent:o}}}function bae(e){const t=e.json;let n;if(Object(r["a"])(t.NORMAL))return n=e.getPropertyArray("NORMAL",Ks.FLOAT,3),{name:h5.NORMAL,semantic:h5.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:Ks.FLOAT,type:rc.VEC3};if(Object(r["a"])(t.NORMAL_OCT16P)){n=e.getPropertyArray("NORMAL_OCT16P",Ks.UNSIGNED_BYTE,2);const t=8;return{name:h5.NORMAL,semantic:h5.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<t)-1,quantizedType:rc.VEC2,quantizedComponentDatatype:Ks.UNSIGNED_BYTE,componentDatatype:Ks.FLOAT,type:rc.VEC3}}}function yae(e){const t=e.json;if(Object(r["a"])(t.BATCH_ID)){const t=e.getPropertyArray("BATCH_ID",Ks.UNSIGNED_SHORT,1);return{name:h5.FEATURE_ID,semantic:h5.FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:Ks.fromTypedArray(t),type:rc.SCALAR}}}fae.parse=function(e,t){t=Object(o["a"])(t,0),i["a"].defined("arrayBuffer",e);const n=new Uint8Array(e),a=new DataView(e);t+=pae;const s=a.getUint32(t,!0);if(1!==s)throw new ye["a"](`Only Point Cloud tile version 1 is supported.  Version ${s} is not.`);t+=pae,t+=pae;const c=a.getUint32(t,!0);if(0===c)throw new ye["a"]("Feature table must have a byte length greater than zero");t+=pae;const l=a.getUint32(t,!0);t+=pae;const u=a.getUint32(t,!0);t+=pae;const h=a.getUint32(t,!0);t+=pae;const d=Fh(n,t,c);t+=c;const f=new Uint8Array(e,t,l);let p,m;t+=l,u>0&&(p=Fh(n,t,u),t+=u,h>0&&(m=new Uint8Array(e,t,h),t+=h));const _=new A9(d,f),b=_.getGlobalProperty("POINTS_LENGTH");if(_.featuresLength=b,!Object(r["a"])(b))throw new ye["a"]("Feature table global property: POINTS_LENGTH must be defined");let y=_.getGlobalProperty("RTC_CENTER",Ks.FLOAT,3);Object(r["a"])(y)&&(y=g.unpack(y));const v=mae(_,p);if(v.rtcCenter=y,v.pointsLength=b,!v.hasPositions){const e=_ae(_);v.positions=e,v.hasPositions=v.hasPositions||Object(r["a"])(e)}if(!v.hasPositions)throw new ye["a"]("Either POSITION or POSITION_QUANTIZED must be defined.");if(!v.hasNormals){const e=bae(_);v.normals=e,v.hasNormals=v.hasNormals||Object(r["a"])(e)}if(!v.hasColors){const e=gae(_);v.colors=e,v.hasColors=v.hasColors||Object(r["a"])(e),v.hasConstantColor=Object(r["a"])(v.constantColor),v.isTranslucent=Object(r["a"])(e)&&e.isTranslucent}if(!v.hasBatchIds){const e=yae(_);v.batchIds=e,v.hasBatchIds=v.hasBatchIds||Object(r["a"])(e)}if(v.hasBatchIds){const e=_.getGlobalProperty("BATCH_LENGTH");if(!Object(r["a"])(e))throw new ye["a"]("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");v.batchLength=e}return Object(r["a"])(m)&&(m=new Uint8Array(m),v.batchTableJson=p,v.batchTableBinary=m),v};var vae=fae;const Oae=_2.Components,Aae=_2.Scene,wae=_2.Node,Tae=_2.Primitive,Cae=_2.Attribute,Eae=_2.Quantization,xae=_2.FeatureIdAttribute,Sae=_2.Material,Iae=_2.MetallicRoughness;function Dae(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.arrayBuffer,n=Object(o["a"])(e.byteOffset,0);i["a"].typeOf.object("options.arrayBuffer",t),this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=Object(o["a"])(e.loadAttributesFor2D,!1),this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._process=function(e){},this._state=JQ.UNLOADED,this._buffers=[],this._components=void 0,this._transform=Me.IDENTITY}function Pae(e,t){const n=e._parsedContent,i=n.draco;let o;if(o=Object(r["a"])(i)?aZ.decodePointCloud(i,t):Promise.resolve(),Object(r["a"])(o))return e._decodePromise=o,o.then((function(n){if(!e.isDestroyed())return Object(r["a"])(n)&&jae(e,i,n),qae(e,t),e._state=JQ.READY,e})).catch((function(t){e.unload(),e._state=JQ.FAILED;const n="Failed to load Draco pnts";return Promise.reject(e.getError(n,t))}))}function jae(e,t,n){e._state=JQ.READY;const i=e._parsedContent;let o;if(Object(r["a"])(n.POSITION)){if(o={name:"POSITION",semantic:h5.POSITION,typedArray:n.POSITION.array,componentDatatype:Ks.FLOAT,type:rc.VEC3,isQuantized:!1},Object(r["a"])(n.POSITION.data.quantization)){const e=n.POSITION.data.quantization,t=e.range,i=g.fromElements(t,t,t),r=g.unpack(e.minValues),a=(1<<e.quantizationBits)-1;o.isQuantized=!0,o.quantizedRange=a,o.quantizedVolumeOffset=r,o.quantizedVolumeScale=i,o.quantizedComponentDatatype=Ks.UNSIGNED_SHORT,o.quantizedType=rc.VEC3}i.positions=o}if(Object(r["a"])(n.NORMAL)){if(o={name:"NORMAL",semantic:h5.NORMAL,typedArray:n.NORMAL.array,componentDatatype:Ks.FLOAT,type:rc.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},Object(r["a"])(n.NORMAL.data.quantization)){const e=(1<<n.NORMAL.data.quantization.quantizationBits)-1;o.quantizedRange=e,o.octEncoded=!0,o.octEncodedZXY=!0,o.quantizedComponentDatatype=Ks.UNSIGNED_BYTE,o.quantizedType=rc.VEC2}i.normals=o}if(Object(r["a"])(n.RGBA)?i.colors={name:"COLOR",semantic:h5.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:Ks.UNSIGNED_BYTE,type:rc.VEC4,normalized:!0,isTranslucent:!0}:Object(r["a"])(n.RGB)&&(i.colors={name:"COLOR",semantic:h5.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:Ks.UNSIGNED_BYTE,type:rc.VEC3,normalized:!0,isTranslucent:!1}),Object(r["a"])(n.BATCH_ID)){const e=n.BATCH_ID.array;i.batchIds={name:"_FEATURE_ID",semantic:h5.FEATURE_ID,setIndex:0,typedArray:e,componentDatatype:Ks.fromTypedArray(e),type:rc.SCALAR}}let a=i.batchTableJson;const s=t.batchTableProperties;for(const c in s)if(s.hasOwnProperty(c)){const e=n[c];Object(r["a"])(a)||(a={}),i.hasDracoBatchTable=!0;const t=e.data;a[c]={byteOffset:t.byteOffset,type:Rae(t.componentsPerAttribute),componentType:Lae(t.componentDatatype),typedArray:e.array}}i.batchTableJson=a}function Rae(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";default:throw new a["a"]("componentsPerAttribute must be a number from 1-4")}}function Lae(e){switch(e){case Ys.BYTE:return"BYTE";case Ys.UNSIGNED_BYTE:return"UNSIGNED_BYTE";case Ys.SHORT:return"SHORT";case Ys.UNSIGNED_SHORT:return"UNSIGNED_SHORT";case Ys.INT:return"INT";case Ys.UNSIGNED_INT:return"UNSIGNED_INT";case Ys.DOUBLE:return"DOUBLE";case Ys.FLOAT:return"FLOAT";default:throw new a["a"]("value is not a valid WebGL constant")}}function Mae(e,t,n){let i,a=t.typedArray;if(t.octEncoded&&(i=new Eae,i.octEncoded=t.octEncoded,i.octEncodedZXY=t.octEncodedZXY,i.normalizationRange=t.quantizedRange,i.type=t.quantizedType,i.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){i=new Eae;const e=t.quantizedRange;i.normalizationRange=e,i.quantizedVolumeOffset=g.ZERO;const n=t.quantizedVolumeScale;i.quantizedVolumeDimensions=n,i.quantizedVolumeStepSize=g.divideByScalar(n,e,new g),i.componentDatatype=t.quantizedComponentDatatype,i.type=t.quantizedType}const s=new Cae;if(s.name=t.name,s.semantic=t.semantic,s.setIndex=t.setIndex,s.componentDatatype=t.componentDatatype,s.type=t.type,s.normalized=Object(o["a"])(t.normalized,!1),s.min=t.min,s.max=t.max,s.quantization=i,t.isRGB565&&(a=pc.decodeRGB565(a)),Object(r["a"])(t.constantColor)){const e=new Array(4);s.constant=Dm.pack(t.constantColor,e)}else{const t=NV.createVertexBuffer({typedArray:a,context:n,usage:LV.STATIC_DRAW});t.vertexArrayDestroyable=!1,e._buffers.push(t),s.buffer=t}const c=e._loadAttributesFor2D;return s.semantic===h5.POSITION&&c&&(s.typedArray=a),s}let Nae,Bae;function Fae(e){if(!Object(r["a"])(Bae)){Nae=new dae.a(0),Bae=new Array(e);for(let t=0;t<e;++t)Bae[t]=Nae.random()}return Bae}Object(r["a"])(Object.create)&&(Dae.prototype=Object.create(KQ.prototype),Dae.prototype.constructor=Dae),Object.defineProperties(Dae.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}}),Dae.prototype.load=function(){this._parsedContent=vae.parse(this._arrayBuffer,this._byteOffset),this._state=JQ.PROCESSING;const e=this;this._promise=new Promise((function(t,n){e._process=function(i){if(e._state===JQ.PROCESSING){if(Object(r["a"])(e._decodePromise))return;const o=Pae(e,i.context);Object(r["a"])(o)&&o.then(t).catch(n)}}}))},Dae.prototype.process=function(e){this._process(e)};const zae=new g,kae=new g,Uae=new g;function Vae(e){const t=e.typedArray,n=20,i=t.length/3,o=Math.min(i,n),r=Fae(n),a=Number.MAX_VALUE,s=-Number.MAX_VALUE;let c,l,u,h=g.fromElements(a,a,a,zae),d=g.fromElements(s,s,s,kae);if(e.isQuantized)h=g.ZERO,d=e.quantizedVolumeScale;else for(c=0;c<o;++c)l=Math.floor(r[c]*i),u=g.unpack(t,3*l,Uae),g.minimumByComponent(h,u,h),g.maximumByComponent(d,u,d);e.min=g.clone(h),e.max=g.clone(d)}const Hae={name:h5.COLOR,semantic:h5.COLOR,setIndex:0,constantColor:Dm.DARKGRAY,componentDatatype:Ks.FLOAT,type:rc.VEC4,isQuantized:!1,isTranslucent:!1};function Gae(e,t,n){const i=[];let o;const a=t.positions;return Object(r["a"])(a)&&(Vae(a),o=Mae(e,a,n),o.count=t.pointsLength,i.push(o)),Object(r["a"])(t.normals)&&(o=Mae(e,t.normals,n),i.push(o)),Object(r["a"])(t.colors)?(o=Mae(e,t.colors,n),i.push(o)):(o=Mae(e,Hae,n),i.push(o)),Object(r["a"])(t.batchIds)&&(o=Mae(e,t.batchIds,n),i.push(o)),i}function Wae(e,t){const n=e.batchLength,i=e.pointsLength,a=e.batchTableBinary,s=!Object(r["a"])(e.batchIds);if(Object(r["a"])(a)||e.hasDracoBatchTable){const r=Object(o["a"])(n,i);return j9({count:r,batchTable:e.batchTableJson,binaryBody:a,parseAsPropertyAttributes:s,customAttributeOutput:t})}return new U4({schema:{},propertyTables:[]})}function qae(e,t){const n=e._parsedContent,i=new Iae;i.metallicFactor=0,i.roughnessFactor=.9;const o=new Sae;o.metallicRoughness=i;const a=n.colors;Object(r["a"])(a)&&a.isTranslucent&&(o.alphaMode=H1.BLEND);const s=!Object(r["a"])(n.normals);o.unlit=s;const c=new Tae;if(c.attributes=Gae(e,n,t),c.primitiveType=Eu.POINTS,c.material=o,Object(r["a"])(n.batchIds)){const e=new xae;e.propertyTableId=0,e.setIndex=0,e.positionalLabel="featureId_0",c.featureIds.push(e)}const l=new wae;l.index=0,l.primitives=[c];const u=new Aae;u.nodes=[l],u.upAxis=IX.Z,u.forwardAxis=IX.X;const h=new Oae;h.scene=u,h.nodes=[l];const d=[];h.structuralMetadata=Wae(n,d),d.length>0&&Yae(e,c,d,t),Object(r["a"])(n.rtcCenter)&&(h.transform=Me.multiplyByTranslation(h.transform,n.rtcCenter,h.transform));const f=n.positions;Object(r["a"])(f)&&f.isQuantized&&(h.transform=Me.multiplyByTranslation(h.transform,f.quantizedVolumeOffset,h.transform)),e._components=h,e._parsedContent=void 0,e._arrayBuffer=void 0}function Yae(e,t,n,i){const o=t.attributes,r=n.length;for(let a=0;a<r;a++){const t=n[a],r=NV.createVertexBuffer({typedArray:t.typedArray,context:i,usage:LV.STATIC_DRAW});r.vertexArrayDestroyable=!1,e._buffers.push(r),t.buffer=r,t.typedArray=void 0,o.push(t)}t.propertyAttributeIds=[0]}Dae.prototype.unload=function(){const e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};var Xae=Dae;function Kae(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.loader",e.loader),i["a"].typeOf.object("options.resource",e.resource),this._loader=e.loader,this._resource=e.resource,this.type=Object(o["a"])(e.type,W7.GLTF),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=Me.clone(this.modelMatrix),this._scale=Object(o["a"])(e.scale,1),this._minimumPixelSize=Object(o["a"])(e.minimumPixelSize,0),this._maximumScale=e.maximumScale,this._clampedScale=Object(r["a"])(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=ce.clone(ce.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new z7(this),this._clampAnimations=Object(o["a"])(e.clampAnimations,!0),this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=Dm.clone(e.color),this._colorBlendMode=Object(o["a"])(e.colorBlendMode,T4.HIGHLIGHT),this._colorBlendAmount=Object(o["a"])(e.colorBlendAmount,.5);const t=Object(o["a"])(e.silhouetteColor,Dm.RED);this._silhouetteColor=Dm.clone(t),this._silhouetteSize=Object(o["a"])(e.silhouetteSize,0),this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=Object(o["a"])(e.cull,!0),this._opaquePass=Object(o["a"])(e.opaquePass,hF.OPAQUE),this._allowPicking=Object(o["a"])(e.allowPicking,!0),this._show=Object(o["a"])(e.show,!0),this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=Object(o["a"])(e.featureIdLabel,"featureId_0");"number"===typeof n&&(n=`featureId_${n}`),this._featureIdLabel=n;let a=Object(o["a"])(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof a&&(a=`instanceFeatureId_${a}`),this._instanceFeatureIdLabel=a,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new Tt,this._initialRadius=void 0,this._heightReference=Object(o["a"])(e.heightReference,QM.NONE),this._heightDirty=this._heightReference!==QM.NONE,this._removeUpdateHeightCallback=void 0,this._clampedModelMatrix=void 0;const s=e.scene;Object(r["a"])(s)&&Object(r["a"])(s.terrainProviderChanged)&&(this._terrainProviderChangedCallback=s.terrainProviderChanged.addEventListener((function(){this._heightDirty=!0}),this)),this._scene=s,this._distanceDisplayCondition=e.distanceDisplayCondition;const c=new Y8(e.pointCloudShading);this._pointCloudShading=c,this._attenuation=c.attenuation,this._pointCloudBackFaceCulling=c.backFaceCulling;const l=e.clippingPlanes;Object(r["a"])(l)&&void 0===l.owner?A4.setOwner(l,this,"_clippingPlanes"):this._clippingPlanes=l,this._clippingPlanesState=0,this._clippingPlanesMatrix=Me.clone(Me.IDENTITY),this._lightColor=g.clone(e.lightColor),this._imageBasedLighting=Object(r["a"])(e.imageBasedLighting)?e.imageBasedLighting:new CX,this._shouldDestroyImageBasedLighting=!Object(r["a"])(e.imageBasedLighting),this._backFaceCulling=Object(o["a"])(e.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=Object(o["a"])(e.shadows,DH.ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this._enableDebugWireframe=Object(o["a"])(e.enableDebugWireframe,!1),this._enableShowOutline=Object(o["a"])(e.enableShowOutline,!0),this._debugWireframe=Object(o["a"])(e.debugWireframe,!1);let u=e.credit;"string"===typeof u&&(u=new hn(u)),this._credit=u,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=Object(o["a"])(e.showCreditsOnScreen,!1),this._showCreditsOnScreenDirty=!0,this._splitDirection=Object(o["a"])(e.splitDirection,m9.NONE),this._enableShowOutline=Object(o["a"])(e.enableShowOutline,!0),this.showOutline=Object(o["a"])(e.showOutline,!0),this.outlineColor=Object(o["a"])(e.outlineColor,Dm.BLACK),this._classificationType=e.classificationType,this._statistics=new uae,this._sceneMode=void 0,this._projectTo2D=Object(o["a"])(e.projectTo2D,!1),this._skipLevelOfDetail=!1,this._ignoreCommands=Object(o["a"])(e.ignoreCommands,!1),this._completeLoad=function(e,t){},this._texturesLoadedPromise=void 0,this._readyPromise=Zae(this),this._sceneGraph=void 0,this._nodesByName={}}function $ae(e,t){const n=e._featureTables,i=t.propertyTables,o=i.length;for(let r=0;r<o;r++){const t=i[r],o=new K7({model:e,propertyTable:t});n.push(o)}return n}function Jae(e,t){const n=t._featureIdLabel,i=t._instanceFeatureIdLabel;let o,a,s,c;for(o=0;o<e.nodes.length;o++)if(c=e.nodes[o],Object(r["a"])(c.instances)&&(s=_5.getFeatureIdsByLabel(c.instances.featureIds,i),Object(r["a"])(s)&&Object(r["a"])(s.propertyTableId)))return s.propertyTableId;for(o=0;o<e.nodes.length;o++)for(c=e.nodes[o],a=0;a<c.primitives.length;a++){const e=c.primitives[a],t=_5.getFeatureIdsByLabel(e.featureIds,n);if(Object(r["a"])(t))return t.propertyTableId}if(1===t._featureTables.length)return 0}function Qae(e,t){if(!Object(r["a"])(e)&&!Object(r["a"])(t))return!1;if(Object(r["a"])(e)!==Object(r["a"])(t))return!0;const n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}function Zae(e){const t=e._loader,n=e._resource;t.load();const i=t.promise.then((function(t){if(!Object(r["a"])(t))return;const n=t.components;if(!Object(r["a"])(n)){if(t.isUnloaded())return;throw new ye["a"]("Failed to load model.")}const i=n.structuralMetadata;Object(r["a"])(i)&&i.propertyTableCount>0&&$ae(e,i);const o=new cae({model:e,modelComponents:n});e._sceneGraph=o,e._gltfCredits=o.components.asset.credits;const a=e._resource.credits;if(Object(r["a"])(a)){const t=a.length;for(let n=0;n<t;n++)e._resourceCredits.push(a[n])}e._resourcesLoaded=!0})),a=Object(o["a"])(t.texturesLoadedPromise,Promise.resolve());e._texturesLoadedPromise=a.then((function(){Object(r["a"])(e)&&!e.isDestroyed()&&(e._texturesLoaded=!0,t._incrementallyLoadTextures&&e.resetDrawCommands())})).catch(_5.getFailedLoadFunction(e,"model",n));const s=new Promise((function(t,n){e._completeLoad=function(e,n){n.afterRender.push((function(){e._ready=!0,t(e)}))}}));return i.then((function(){return s})).catch(_5.getFailedLoadFunction(e,"model",n))}Object.defineProperties(Kae.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},texturesLoadedPromise:{get:function(){return this._texturesLoadedPromise}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){i["a"].defined("pointCloudShading",e),e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far must be greater than near");this._distanceDisplayCondition=Sv.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){Qae(e,this._color)&&this.resetDrawCommands(),this._color=Dm.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!Dm.equals(e,this._silhouetteColor)){const t=Qae(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=Dm.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){const t=this._silhouetteSize,n=e>0&&0===t||0===e&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){if(!this._ready)throw new a["a"]("The model is not loaded. Use Model.readyPromise or wait for Model.ready to be true.");const e=Object(r["a"])(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix;return Ose(this,e),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"===typeof e&&(e=`featureId_${e}`),i["a"].typeOf.string("value",e),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"===typeof e&&(e=`instanceFeatureId_${e}`),i["a"].typeOf.string("value",e),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(A4.setOwner(e,this,"_clippingPlanes"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(e){Object(r["a"])(e)!==Object(r["a"])(this._lightColor)&&this.resetDrawCommands(),this._lightColor=g.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){i["a"].typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}}),Kae.prototype.getNode=function(e){if(!this._ready)throw new a["a"]("The model is not loaded. Use Model.readyPromise or wait for Model.ready to be true.");return i["a"].typeOf.string("name",e),this._nodesByName[e]},Kae.prototype.setArticulationStage=function(e,t){if(i["a"].typeOf.number("value",t),!this._ready)throw new a["a"]("The model is not loaded. Use Model.readyPromise or wait for Model.ready to be true.");this._sceneGraph.setArticulationStage(e,t)},Kae.prototype.applyArticulations=function(){if(!this._ready)throw new a["a"]("The model is not loaded. Use Model.readyPromise or wait for Model.ready to be true.");this._sceneGraph.applyArticulations()},Kae.prototype.makeStyleDirty=function(){this._styleDirty=!0},Kae.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};const ese=new Me,tse=new ce,nse=new Me;function ise(e,t){e._resourcesLoaded&&e._texturesLoaded||e._loader.process(t)}function ose(e,t){Object(r["a"])(e._customShader)&&e._customShader.update(t)}function rse(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}function ase(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;const t=e._sceneGraph.components,n=t.structuralMetadata;Object(r["a"])(n)&&n.propertyTableCount>0&&(e.featureTableId=Jae(t,e),e._styleDirty=!0,e.resetDrawCommands())}function sse(e){e._styleDirty&&(e.applyStyle(e._style),e._styleDirty=!1)}function cse(e,t){const n=e._featureTables,i=n.length;let o=!1;for(let r=0;r<i;r++)n[r].update(t),n[r].styleCommandsNeededDirty&&(o=!0);o&&lse(e)}function lse(e){const t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=H7.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}function use(e){const t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}function hse(e,t){e._silhouetteDirty&&(Lse(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}function dse(e,t){const n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}function fse(e,t){if(e.isClippingEnabled()){e._clippingPlanes.owner===e&&e._clippingPlanes.update(t);const n=e._clippingPlanes.clippingPlanesState;n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}}function pse(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}function mse(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}function _se(e,t){if(!Me.equals(e.modelMatrix,e._modelMatrix)){if(t.mode!==SH.SCENE3D&&e._projectTo2D)throw new a["a"]("Model.modelMatrix cannot be changed in 2D or Columbus View if projectTo2D is true.");e._updateModelMatrix=!0,e._modelMatrix=Me.clone(e.modelMatrix,e._modelMatrix)}}Kae.prototype.update=function(e){if(ise(this,e),ose(this,e),rse(this,e),!this._resourcesLoaded||e.mode===SH.MORPHING)return;ase(this),sse(this),cse(this,e),use(this),hse(this,e),dse(this,e),fse(this,e),pse(this,e),this._defaultTexture=e.context.defaultTexture,mse(this,e),_se(this,e),yse(this),vse(this,e),Tse(this,e);const t=this;t._ready?(wse(this),Cse(this,e),Ese(this),xse(this,e)):t._completeLoad(t,e)};const gse=new g,bse=new I;function yse(e){if(!e._updateModelMatrix&&!e._heightDirty&&0===e._minimumPixelSize)return;Object(r["a"])(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!Object(r["a"])(t)||!Object(r["a"])(t.globe)||e.heightReference===QM.NONE){if(e.heightReference!==QM.NONE)throw new a["a"]("Height reference is not supported without a scene and globe.");return void(e._clampedModelMatrix=void 0)}const n=t.globe,i=n.ellipsoid,o=e.modelMatrix;gse.x=o[12],gse.y=o[13],gse.z=o[14];const s=i.cartesianToCartographic(gse);Object(r["a"])(e._clampedModelMatrix)||(e._clampedModelMatrix=Me.clone(o,new Me));const c=n._surface;e._removeUpdateHeightCallback=c.updateHeight(s,Dse(e,i,s));const l=n.getHeight(s);if(Object(r["a"])(l)){const t=Dse(e,i,s);I.clone(s,bse),bse.height=l,i.cartographicToCartesian(bse,gse),t(gse)}e._heightDirty=!1,e._updateModelMatrix=!0}function vse(e,t){if(!e._updateModelMatrix&&0===e._minimumPixelSize)return;const n=Object(r["a"])(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;Ose(e,n),Ase(e,n,t)}function Ose(e,t){e._boundingSphere=Tt.transform(e._sceneGraph.boundingSphere,t,e._boundingSphere),e._clampedScale=Object(r["a"])(e._maximumScale)?Math.min(e._scale,e._maximumScale):e._scale,e._boundingSphere.radius=e._initialRadius*e._clampedScale}function Ase(e,t,n){let i=e.scale;if(0!==e.minimumPixelSize&&!e._projectTo2D){const o=n.context,r=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);gse.x=t[12],gse.y=t[13],gse.z=t[14],e._sceneMode!==SH.SCENE3D&&f9.computeActualWgs84Position(n,gse,gse);const a=e._boundingSphere.radius,s=Ise(gse,a,n),c=1/s,l=Math.min(c*(2*a),r);l<e.minimumPixelSize&&(i=e.minimumPixelSize*s/(2*e._initialRadius))}e._computedScale=Object(r["a"])(e.maximumScale)?Math.min(e.maximumScale,i):i}function wse(e){if(!e._idDirty)return;e._idDirty=!1;const t=e._id,n=e._pickIds,i=n.length;for(let o=0;o<i;++o)n[o].object.id=t}function Tse(e,t){const n=Object(r["a"])(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix,i=Object(o["a"])(e.referenceMatrix,n),a=t.context,s=e._imageBasedLighting;if(s.useSphericalHarmonicCoefficients||s.useSpecularEnvironmentMaps){let t=tse,n=ese;n=Me.multiply(a.uniformState.view3D,i,n),t=Me.getMatrix3(n,t),t=ce.getRotation(t,t),e._iblReferenceFrameMatrix=ce.transpose(t,e._iblReferenceFrameMatrix)}if(e.isClippingEnabled()){let t=nse;t=Me.multiply(a.uniformState.view3D,i,t),t=Me.multiply(t,e._clippingPlanes.modelMatrix,t),e._clippingPlanesMatrix=Me.inverseTranspose(t,e._clippingPlanesMatrix)}}function Cse(e,t){const n=e._sceneGraph;if(e._updateModelMatrix||0!==e._minimumPixelSize){const i=Object(r["a"])(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;n.updateModelMatrix(i,t),e._updateModelMatrix=!1}e._backFaceCullingDirty&&(n.updateBackFaceCulling(e._backFaceCulling),e._backFaceCullingDirty=!1),e._shadowsDirty&&(n.updateShadows(e._shadows),e._shadowsDirty=!1),e._debugShowBoundingVolumeDirty&&(n.updateShowBoundingVolume(e._debugShowBoundingVolume),e._debugShowBoundingVolumeDirty=!1);let i=!1;Object(r["a"])(e.classificationType)||(i=e._userAnimationDirty||e._activeAnimations.update(t)),n.update(t,i),e._userAnimationDirty=!1}function Ese(e){if(!e._showCreditsOnScreenDirty)return;e._showCreditsOnScreenDirty=!1;const t=e._showCreditsOnScreen;Object(r["a"])(e._credit)&&(e._credit.showOnScreen=t);const n=e._resourceCredits,i=n.length;for(let r=0;r<i;r++)n[r].showOnScreen=t;const o=e._gltfCredits,a=o.length;for(let r=0;r<a;r++)o[r].showOnScreen=t}function xse(e,t){const n=jse(e,t),i=e.isInvisible(),o=e.hasSilhouette(t),r=e._show&&0!==e._computedScale&&n&&(!i||o),a=t.passes,s=a.render||a.pick&&e.allowPicking;r&&!e._ignoreCommands&&s&&(Rse(e,t),e._sceneGraph.pushDrawCommands(t))}const Sse=new Tt;function Ise(e,t,n){return Sse.center=e,Sse.radius=t,n.camera.getPixelSize(Sse,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}function Dse(e,t,n){return function(i){if(e.heightReference===QM.RELATIVE_TO_GROUND){const e=t.cartesianToCartographic(i,bse);e.height+=n.height,t.cartographicToCartesian(e,i)}const o=e._clampedModelMatrix;Me.clone(e.modelMatrix,o),o[12]=i.x,o[13]=i.y,o[14]=i.z,e._heightDirty=!0}}const Pse=new g;function jse(e,t){const n=e.distanceDisplayCondition;if(!Object(r["a"])(n))return!0;const i=n.near*n.near,o=n.far*n.far;let a;if(t.mode===SH.SCENE2D){const e=t.camera.frustum.right-t.camera.frustum.left,n=.5*e;a=n*n}else{const n=Me.getTranslation(e.modelMatrix,Pse);f9.computeActualWgs84Position(t,n,n),a=g.distanceSquared(n,t.camera.positionWC)}return a>=i&&a<=o}function Rse(e,t){const n=t.creditDisplay,i=e._credit;Object(r["a"])(i)&&n.addCredit(i);const o=e._resourceCredits,a=o.length;for(let r=0;r<a;r++)n.addCredit(o[r]);const s=e._gltfCredits,c=s.length;for(let r=0;r<c;r++)n.addCredit(s[r])}function Lse(e){return e.context.stencilBuffer}function Mse(e){return e.context.stencilBuffer}function Nse(e,t,n){return{loader:e,type:t,resource:n.resource,show:n.show,modelMatrix:n.modelMatrix,scale:n.scale,minimumPixelSize:n.minimumPixelSize,maximumScale:n.maximumScale,id:n.id,allowPicking:n.allowPicking,clampAnimations:n.clampAnimations,shadows:n.shadows,debugShowBoundingVolume:n.debugShowBoundingVolume,enableDebugWireframe:n.enableDebugWireframe,debugWireframe:n.debugWireframe,cull:n.cull,opaquePass:n.opaquePass,customShader:n.customShader,content:n.content,heightReference:n.heightReference,scene:n.scene,distanceDisplayCondition:n.distanceDisplayCondition,color:n.color,colorBlendAmount:n.colorBlendAmount,colorBlendMode:n.colorBlendMode,silhouetteColor:n.silhouetteColor,silhouetteSize:n.silhouetteSize,enableShowOutline:n.enableShowOutline,showOutline:n.showOutline,outlineColor:n.outlineColor,clippingPlanes:n.clippingPlanes,lightColor:n.lightColor,imageBasedLighting:n.imageBasedLighting,backFaceCulling:n.backFaceCulling,credit:n.credit,showCreditsOnScreen:n.showCreditsOnScreen,splitDirection:n.splitDirection,projectTo2D:n.projectTo2D,featureIdLabel:n.featureIdLabel,instanceFeatureIdLabel:n.instanceFeatureIdLabel,pointCloudShading:n.pointCloudShading,classificationType:n.classificationType}}Kae.prototype.isTranslucent=function(){const e=this.color;return Object(r["a"])(e)&&e.alpha>0&&e.alpha<1},Kae.prototype.isInvisible=function(){const e=this.color;return Object(r["a"])(e)&&0===e.alpha},Kae.prototype.hasSilhouette=function(e){return Lse(e)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0&&!Object(r["a"])(this._classificationType)},Kae.prototype.hasSkipLevelOfDetail=function(e){const t=W7.is3DTiles(this.type);if(!t)return!1;const n=this._content.tileset;return Mse(e)&&n.skipLevelOfDetail},Kae.prototype.isClippingEnabled=function(){const e=this._clippingPlanes;return Object(r["a"])(e)&&e.enabled&&0!==e.length},Kae.prototype.isDestroyed=function(){return!1},Kae.prototype.destroy=function(){const e=this._loader;Object(r["a"])(e)&&e.destroy();const t=this._featureTables;if(Object(r["a"])(t)){const e=t.length;for(let n=0;n<e;n++)t[n].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),Object(r["a"])(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),Object(r["a"])(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);const n=this._clippingPlanes;Object(r["a"])(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Wc(this)},Kae.prototype.destroyPipelineResources=function(){const e=this._pipelineResources;for(let t=0;t<e.length;t++)e[t].destroy();this._pipelineResources.length=0,this._pickIds.length=0},Kae.prototype.destroyModelResources=function(){const e=this._modelResources;for(let t=0;t<e.length;t++)e[t].destroy();this._modelResources.length=0},Kae.fromGltf=function(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url)&&!Object(r["a"])(e.gltf))throw new a["a"]("options.url is required.");const t=Object(o["a"])(e.url,e.gltf),n={releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:Object(r["a"])(e.classificationType)},i=Object(o["a"])(e.basePath,""),s=Et["a"].createIfNeeded(i);Object(r["a"])(t.asset)?(n.gltfJson=t,n.baseResource=s,n.gltfResource=s):t instanceof Uint8Array?(n.typedArray=t,n.baseResource=s,n.gltfResource=s):n.gltfResource=Et["a"].createIfNeeded(t);const c=new T8(n),l=Object(r["a"])(e.content),u=l?W7.TILE_GLTF:W7.GLTF,h=Nse(c,u,e);h.resource=n.gltfResource;const d=new Kae(h);return d},Kae.fromB3dm=function(e){const t={b3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline,loadForClassification:Object(r["a"])(e.classificationType)},n=new z9(t),i=Nse(n,W7.TILE_B3DM,e),o=new Kae(i);return o},Kae.fromPnts=function(e){const t={arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,loadAttributesFor2D:e.projectTo2D},n=new Xae(t),i=Nse(n,W7.TILE_PNTS,e),o=new Kae(i);return o},Kae.fromI3dm=function(e){const t={i3dmResource:e.resource,arrayBuffer:e.arrayBuffer,byteOffset:e.byteOffset,releaseGltfJson:e.releaseGltfJson,asynchronous:e.asynchronous,incrementallyLoadTextures:e.incrementallyLoadTextures,upAxis:e.upAxis,forwardAxis:e.forwardAxis,loadAttributesFor2D:e.projectTo2D,loadIndicesForWireframe:e.enableDebugWireframe,loadPrimitiveOutline:e.enableShowOutline},n=new O7(t),i=Nse(n,W7.TILE_I3DM,e),o=new Kae(i);return o},Kae.fromGeoJson=function(e){const t={geoJson:e.geoJson},n=new e7(t),i=Nse(n,W7.TILE_GEOJSON,e),o=new Kae(i);return o},Kae.prototype.applyColorAndShow=function(e){const t=this._color,n=Object(r["a"])(e)&&Object(r["a"])(e.color),i=Object(r["a"])(e)&&Object(r["a"])(e.show);this._color=n?e.color.evaluateColor(void 0,this._color):Dm.clone(Dm.WHITE,this._color),this._show=!i||e.show.evaluate(void 0),Qae(t,this._color)&&this.resetDrawCommands()},Kae.prototype.applyStyle=function(e){const t=this.type===W7.TILE_PNTS,n=Object(r["a"])(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,i=Object(r["a"])(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=Object(r["a"])(i)&&Object(r["a"])(i[0]);if(!t||n&&!o)if(n){const t=this.featureTables[this.featureTableId];t.applyStyle(e),lse(this,e)}else this.applyColorAndShow(e),this._styleCommandsNeeded=void 0;else this.resetDrawCommands()};var Bse=Kae;function Fse(e,t,n){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._readyPromise=void 0,this._metadata=void 0,this._group=void 0}function zse(e,t,n,i){const o={cull:!1,releaseGltfJson:!0,opaquePass:hF.CESIUM_3D_TILE,modelMatrix:t.computedTransform,upAxis:e._modelUpAxis,forwardAxis:e._modelForwardAxis,incrementallyLoadTextures:!1,customShader:e.customShader,content:n,colorBlendMode:e.colorBlendMode,colorBlendAmount:e.colorBlendAmount,lightColor:e.lightColor,imageBasedLighting:e.imageBasedLighting,featureIdLabel:e.featureIdLabel,instanceFeatureIdLabel:e.instanceFeatureIdLabel,pointCloudShading:e.pointCloudShading,clippingPlanes:e.clippingPlanes,backFaceCulling:e.backFaceCulling,shadows:e.shadows,showCreditsOnScreen:e.showCreditsOnScreen,splitDirection:e.splitDirection,enableDebugWireframe:e._enableDebugWireframe,debugWireframe:e.debugWireframe,projectTo2D:e._projectTo2D,enableShowOutline:e._enableShowOutline,showOutline:e.showOutline,outlineColor:e.outlineColor};return Object(qE["a"])(i,o)}Object.defineProperties(Fse.prototype,{featuresLength:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;return Object(r["a"])(t)&&Object(r["a"])(t[n])?t[n].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){const e=this._model.statistics;return e.propertyTablesByteLength+e.batchTexturesByteLength}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const e=this._model,t=e.featureTables,n=e.featureTableId;if(Object(r["a"])(t)&&Object(r["a"])(t[n]))return t[n]}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),Fse.prototype.getFeature=function(e){const t=this._model,n=t.featureTableId;if(!Object(r["a"])(n))throw new a["a"]("No feature ID set is selected. Make sure Cesium3DTileset.featureIdLabel or Cesium3DTileset.instanceFeatureIdLabel is defined");const i=t.featureTables[n];if(!Object(r["a"])(i))throw new a["a"]("No feature table found for the selected feature ID set");const o=i.featuresLength;if(!Object(r["a"])(e)||e<0||e>=o)throw new a["a"](`featureId is required and must be between 0 and featuresLength - 1 (${o-1}).`);return i.getFeature(e)},Fse.prototype.hasProperty=function(e,t){const n=this._model,i=n.featureTableId;if(!Object(r["a"])(i))return!1;const o=n.featureTables[i];return o.hasProperty(e,t)},Fse.prototype.applyDebugSettings=function(e,t){t=e?t:Dm.WHITE,0===this.featuresLength?this._model.color=t:Object(r["a"])(this.batchTable)&&this.batchTable.setAllColor(t)},Fse.prototype.applyStyle=function(e){this._model.style=e},Fse.prototype.update=function(e,t){const n=this._model,i=this._tile;n.colorBlendAmount=e.colorBlendAmount,n.colorBlendMode=e.colorBlendMode,n.modelMatrix=i.computedTransform,n.customShader=e.customShader,n.featureIdLabel=e.featureIdLabel,n.instanceFeatureIdLabel=e.instanceFeatureIdLabel,n.lightColor=e.lightColor,n.imageBasedLighting=e.imageBasedLighting,n.backFaceCulling=e.backFaceCulling,n.shadows=e.shadows,n.showCreditsOnScreen=e.showCreditsOnScreen,n.splitDirection=e.splitDirection,n.debugWireframe=e.debugWireframe,n.showOutline=e.showOutline,n.outlineColor=e.outlineColor,n.pointCloudShading=e.pointCloudShading;const o=e.clippingPlanes;n.referenceMatrix=e.clippingPlanesOriginMatrix,Object(r["a"])(o)&&i.clippingPlanesDirty&&(n._clippingPlanes=o.enabled&&i._isClipped?o:void 0),Object(r["a"])(o)&&Object(r["a"])(n._clippingPlanes)&&n._clippingPlanes!==o&&(n._clippingPlanes=o),n.update(t)},Fse.prototype.isDestroyed=function(){return!1},Fse.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),Wc(this)},Fse.fromGltf=function(e,t,n,i){const o=new Fse(e,t,n),r={gltf:i,basePath:n},a=zse(e,t,o,r),s=e.vectorClassificationOnly?void 0:e.classificationType;a.classificationType=s;const c=Bse.fromGltf(a);return o._model=c,o._readyPromise=c.readyPromise.then((function(e){return e.activeAnimations.addAll({loop:r4.REPEAT}),e})),o},Fse.fromB3dm=function(e,t,n,i,o){const r=new Fse(e,t,n),a={arrayBuffer:i,byteOffset:o,resource:n},s=zse(e,t,r,a),c=e.vectorClassificationOnly?void 0:e.classificationType;s.classificationType=c;const l=Bse.fromB3dm(s);return r._model=l,r._readyPromise=l.readyPromise.then((function(e){return e.activeAnimations.addAll({loop:r4.REPEAT}),e})),r},Fse.fromI3dm=function(e,t,n,i,o){const r=new Fse(e,t,n),a={arrayBuffer:i,byteOffset:o,resource:n},s=zse(e,t,r,a),c=Bse.fromI3dm(s);return r._model=c,r._readyPromise=c.readyPromise.then((function(e){return e.activeAnimations.addAll({loop:r4.REPEAT}),e})),r},Fse.fromPnts=function(e,t,n,i,o){const r=new Fse(e,t,n),a={arrayBuffer:i,byteOffset:o,resource:n},s=zse(e,t,r,a),c=Bse.fromPnts(s);return r._model=c,r._readyPromise=c.readyPromise,r},Fse.fromGeoJson=function(e,t,n,i){const o=new Fse(e,t,n),r={geoJson:i,resource:n},a=zse(e,t,o,r),s=Bse.fromGeoJson(a);return o._model=s,o._readyPromise=s.readyPromise,o};var kse=Fse;function Use(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._readyPromise=Vse(this,i)}function Vse(e,t){return e._tileset.loadTileset(e._resource,t,e._tile),Promise.resolve(e)}Object.defineProperties(Use.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),Use.prototype.hasProperty=function(e,t){return!1},Use.prototype.getFeature=function(e){},Use.prototype.applyDebugSettings=function(e,t){},Use.prototype.applyStyle=function(e){},Use.prototype.update=function(e,t){},Use.prototype.isDestroyed=function(){return!1},Use.prototype.destroy=function(){return Wc(this)};var Hse=Use;function Gse(e,t,n,s){if(i["a"].defined("context",e),!t||0===t.length)throw new a["a"]("At least one attribute is required.");const c=Gse._verifyAttributes(t);n=Object(o["a"])(n,0);const l=[],u={};let h,d;const f=c.length;for(let i=0;i<f;++i){const e=c[i];e.vertexBuffer?l.push(e):(d=e.usage,h=u[d],Object(r["a"])(h)||(h=u[d]=[]),h.push(e))}function p(e,t){return Ks.getSizeInBytes(t.componentDatatype)-Ks.getSizeInBytes(e.componentDatatype)}for(d in this._allBuffers=[],u)if(u.hasOwnProperty(d)){h=u[d],h.sort(p);const e=Gse._vertexSizeInBytes(h),t=h[0].usage,n={vertexSizeInBytes:e,vertexBuffer:void 0,usage:t,needsCommit:!1,arrayBuffer:void 0,arrayViews:Gse._createArrayViews(h,e)};this._allBuffers.push(n)}this._size=0,this._instanced=Object(o["a"])(s,!1),this._precreated=l,this._context=e,this.writers=void 0,this.va=void 0,this.resize(n)}Gse._verifyAttributes=function(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i],r={index:Object(o["a"])(n.index,i),enabled:Object(o["a"])(n.enabled,!0),componentsPerAttribute:n.componentsPerAttribute,componentDatatype:Object(o["a"])(n.componentDatatype,Ks.FLOAT),normalize:Object(o["a"])(n.normalize,!1),vertexBuffer:n.vertexBuffer,usage:Object(o["a"])(n.usage,LV.STATIC_DRAW)};if(t.push(r),1!==r.componentsPerAttribute&&2!==r.componentsPerAttribute&&3!==r.componentsPerAttribute&&4!==r.componentsPerAttribute)throw new a["a"]("attribute.componentsPerAttribute must be in the range [1, 4].");const s=r.componentDatatype;if(!Ks.validate(s))throw new a["a"]("Attribute must have a valid componentDatatype or not specify it.");if(!LV.validate(r.usage))throw new a["a"]("Attribute must have a valid usage or not specify it.")}const n=new Array(t.length);for(let i=0;i<t.length;++i){const e=t[i],o=e.index;if(n[o])throw new a["a"](`Index ${o} is used by more than one attribute.`);n[o]=!0}return t},Gse._vertexSizeInBytes=function(e){let t=0;const n=e.length;for(let a=0;a<n;++a){const n=e[a];t+=n.componentsPerAttribute*Ks.getSizeInBytes(n.componentDatatype)}const i=n>0?Ks.getSizeInBytes(e[0].componentDatatype):0,o=i>0?t%i:0,r=0===o?0:i-o;return t+=r,t},Gse._createArrayViews=function(e,t){const n=[];let i=0;const o=e.length;for(let r=0;r<o;++r){const o=e[r],a=o.componentDatatype;n.push({index:o.index,enabled:o.enabled,componentsPerAttribute:o.componentsPerAttribute,componentDatatype:a,normalize:o.normalize,offsetInBytes:i,vertexSizeInComponentType:t/Ks.getSizeInBytes(a),view:void 0}),i+=o.componentsPerAttribute*Ks.getSizeInBytes(a)}return n},Gse.prototype.resize=function(e){this._size=e;const t=this._allBuffers;this.writers=[];for(let n=0,i=t.length;n<i;++n){const e=t[n];Gse._resize(e,this._size),Gse._appendWriters(this.writers,e)}Xse(this)},Gse._resize=function(e,t){if(e.vertexSizeInBytes>0){const n=new ArrayBuffer(t*e.vertexSizeInBytes);if(Object(r["a"])(e.arrayBuffer)){const t=new Uint8Array(n),i=new Uint8Array(e.arrayBuffer),o=i.length;for(let e=0;e<o;++e)t[e]=i[e]}const i=e.arrayViews,o=i.length;for(let e=0;e<o;++e){const t=i[e];t.view=Ks.createArrayBufferView(t.componentDatatype,n,t.offsetInBytes)}e.arrayBuffer=n}};const Wse=[function(e,t,n){return function(i,o){t[i*n]=o,e.needsCommit=!0}},function(e,t,n){return function(i,o,r){const a=i*n;t[a]=o,t[a+1]=r,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a){const s=i*n;t[s]=o,t[s+1]=r,t[s+2]=a,e.needsCommit=!0}},function(e,t,n){return function(i,o,r,a,s){const c=i*n;t[c]=o,t[c+1]=r,t[c+2]=a,t[c+3]=s,e.needsCommit=!0}}];function qse(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;const n=t.vertexBuffer,i=e._size*t.vertexSizeInBytes,o=Object(r["a"])(n);if(!o||n.sizeInBytes<i)return o&&n.destroy(),t.vertexBuffer=NV.createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}function Yse(e,t,n){if(e.needsCommit&&e.vertexSizeInBytes>0){const i=e.vertexSizeInBytes*t,o=e.vertexSizeInBytes*n;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,i,o),i)}}function Xse(e){const t=e.va;if(!Object(r["a"])(t))return;const n=t.length;for(let i=0;i<n;++i)t[i].va.destroy();e.va=void 0}Gse._appendWriters=function(e,t){const n=t.arrayViews,i=n.length;for(let o=0;o<i;++o){const i=n[o];e[i.index]=Wse[i.componentsPerAttribute-1](t,i.view,i.vertexSizeInComponentType)}},Gse.prototype.commit=function(e){let t=!1;const n=this._allBuffers;let i,o,a;for(o=0,a=n.length;o<a;++o)i=n[o],t=qse(this,i)||t;if(t||!Object(r["a"])(this.va)){Xse(this);const t=this.va=[],c=s["a"].SIXTY_FOUR_KILOBYTES-4,l=Object(r["a"])(e)&&!this._instanced?Math.ceil(this._size/c):1;for(let r=0;r<l;++r){let s=[];for(o=0,a=n.length;o<a;++o){i=n[o];const e=r*(i.vertexSizeInBytes*c);Gse._appendAttributes(s,i,e,this._instanced)}s=s.concat(this._precreated),t.push({va:new WV({context:this._context,attributes:s,indexBuffer:e}),indicesCount:1.5*(r!==l-1?c:this._size%c)})}}},Gse._appendAttributes=function(e,t,n,i){const o=t.arrayViews,r=o.length;for(let a=0;a<r;++a){const r=o[a];e.push({index:r.index,enabled:r.enabled,componentsPerAttribute:r.componentsPerAttribute,componentDatatype:r.componentDatatype,normalize:r.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:n+r.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:i?1:0})}},Gse.prototype.subCommit=function(e,t){if(e<0||e>=this._size)throw new a["a"]("offsetInVertices must be greater than or equal to zero and less than the vertex array size.");if(e+t>this._size)throw new a["a"]("offsetInVertices + lengthInVertices cannot exceed the vertex array size.");const n=this._allBuffers;for(let i=0,o=n.length;i<o;++i)Yse(n[i],e,t)},Gse.prototype.endSubCommits=function(){const e=this._allBuffers;for(let t=0,n=e.length;t<n;++t)e[t].needsCommit=!1},Gse.prototype.isDestroyed=function(){return!1},Gse.prototype.destroy=function(){const e=this._allBuffers;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.vertexBuffer=n.vertexBuffer&&n.vertexBuffer.destroy()}return Xse(this),Wc(this)};var Kse=Gse,$se='#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nuniform sampler2D u_atlas;\n\n#ifdef VECTOR_TILE\nuniform vec4 u_highlightColor;\n#endif\n\nvarying vec2 v_textureCoordinates;\nvarying vec4 v_pickColor;\nvarying vec4 v_color;\n\n#ifdef SDF\nvarying vec4 v_outlineColor;\nvarying float v_outlineWidth;\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\nvarying vec4 v_textureCoordinateBounds;                  // the min and max x and y values for the texture coordinates\nvarying vec4 v_originTextureCoordinateAndTranslate;      // texture coordinate at the origin, billboard translate (used for label glyphs)\nvarying vec4 v_compressed;                               // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize\nvarying mat2 v_rotationMatrix;\n\nconst float SHIFT_LEFT12 = 4096.0;\nconst float SHIFT_LEFT1 = 2.0;\n\nconst float SHIFT_RIGHT12 = 1.0 / 4096.0;\nconst float SHIFT_RIGHT1 = 1.0 / 2.0;\n\nfloat getGlobeDepth(vec2 adjustedST, vec2 depthLookupST, bool applyTranslate, vec2 dimensions, vec2 imageSize)\n{\n    vec2 lookupVector = imageSize * (depthLookupST - adjustedST);\n    lookupVector = v_rotationMatrix * lookupVector;\n    vec2 labelOffset = (dimensions - imageSize) * (depthLookupST - vec2(0.0, v_originTextureCoordinateAndTranslate.y)); // aligns label glyph with bounding rectangle.  Will be zero for billboards because dimensions and imageSize will be equal\n\n    vec2 translation = v_originTextureCoordinateAndTranslate.zw;\n\n    if (applyTranslate)\n    {\n        // this is only needed for labels where the horizontal origin is not LEFT\n        // it moves the label back to where the "origin" should be since all label glyphs are set to HorizontalOrigin.LEFT\n        translation += (dimensions * v_originTextureCoordinateAndTranslate.xy * vec2(1.0, 0.0));\n    }\n\n    vec2 st = ((lookupVector - translation + labelOffset) + gl_FragCoord.xy) / czm_viewport.zw;\n    float logDepthOrDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, st));\n\n    if (logDepthOrDepth == 0.0)\n    {\n        return 0.0; // not on the globe\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    return eyeCoordinate.z / eyeCoordinate.w;\n}\n#endif\n\n\n#ifdef SDF\n\n// Get the distance from the edge of a glyph at a given position sampling an SDF texture.\nfloat getDistance(vec2 position)\n{\n    return texture2D(u_atlas, position).r;\n}\n\n// Samples the sdf texture at the given position and produces a color based on the fill color and the outline.\nvec4 getSDFColor(vec2 position, float outlineWidth, vec4 outlineColor, float smoothing)\n{\n    float distance = getDistance(position);\n\n    if (outlineWidth > 0.0)\n    {\n        // Don\'t get the outline edge exceed the SDF_EDGE\n        float outlineEdge = clamp(SDF_EDGE - outlineWidth, 0.0, SDF_EDGE);\n        float outlineFactor = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);\n        vec4 sdfColor = mix(outlineColor, v_color, outlineFactor);\n        float alpha = smoothstep(outlineEdge - smoothing, outlineEdge + smoothing, distance);\n        return vec4(sdfColor.rgb, sdfColor.a * alpha);\n    }\n    else\n    {\n        float alpha = smoothstep(SDF_EDGE - smoothing, SDF_EDGE + smoothing, distance);\n        return vec4(v_color.rgb, v_color.a * alpha);\n    }\n}\n#endif\n\nvoid main()\n{\n    vec4 color = texture2D(u_atlas, v_textureCoordinates);\n\n#ifdef SDF\n    float outlineWidth = v_outlineWidth;\n    vec4 outlineColor = v_outlineColor;\n\n    // Get the current distance\n    float distance = getDistance(v_textureCoordinates);\n\n#ifdef GL_OES_standard_derivatives\n    float smoothing = fwidth(distance);\n    // Get an offset that is approximately half the distance to the neighbor pixels\n    // 0.354 is approximately half of 1/sqrt(2)\n    vec2 sampleOffset = 0.354 * vec2(dFdx(v_textureCoordinates) + dFdy(v_textureCoordinates));\n\n    // Sample the center point\n    vec4 center = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);\n\n    // Sample the 4 neighbors\n    vec4 color1 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color2 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color3 = getSDFColor(v_textureCoordinates + vec2(-sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);\n    vec4 color4 = getSDFColor(v_textureCoordinates + vec2(sampleOffset.x, -sampleOffset.y), outlineWidth, outlineColor, smoothing);\n\n    // Equally weight the center sample and the 4 neighboring samples\n    color = (center + color1 + color2 + color3 + color4)/5.0;\n#else\n    // Just do a single sample\n    float smoothing = 1.0/32.0;\n    color = getSDFColor(v_textureCoordinates, outlineWidth, outlineColor, smoothing);\n#endif\n\n    color = czm_gammaCorrect(color);\n#else\n    color = czm_gammaCorrect(color);\n    color *= czm_gammaCorrect(v_color);\n#endif\n\n// Fully transparent parts of the billboard are not pickable.\n#if !defined(OPAQUE) && !defined(TRANSLUCENT)\n    if (color.a < 0.005)   // matches 0/255 and 1/255\n    {\n        discard;\n    }\n#else\n// The billboard is rendered twice. The opaque pass discards translucent fragments\n// and the translucent pass discards opaque fragments.\n#ifdef OPAQUE\n    if (color.a < 0.995)   // matches < 254/255\n    {\n        discard;\n    }\n#else\n    if (color.a >= 0.995)  // matches 254/255 and 255/255\n    {\n        discard;\n    }\n#endif\n#endif\n\n#ifdef VECTOR_TILE\n    color *= u_highlightColor;\n#endif\n    gl_FragColor = color;\n\n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    float temp = v_compressed.y;\n\n    temp = temp * SHIFT_RIGHT1;\n\n    float temp2 = (temp - floor(temp)) * SHIFT_LEFT1;\n    bool enableDepthTest = temp2 != 0.0;\n    bool applyTranslate = floor(temp) != 0.0;\n\n    if (enableDepthTest) {\n        temp = v_compressed.z;\n        temp = temp * SHIFT_RIGHT12;\n\n        vec2 dimensions;\n        dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;\n        dimensions.x = floor(temp);\n\n        temp = v_compressed.w;\n        temp = temp * SHIFT_RIGHT12;\n\n        vec2 imageSize;\n        imageSize.y = (temp - floor(temp)) * SHIFT_LEFT12;\n        imageSize.x = floor(temp);\n\n        vec2 adjustedST = v_textureCoordinates - v_textureCoordinateBounds.xy;\n        adjustedST = adjustedST / vec2(v_textureCoordinateBounds.z - v_textureCoordinateBounds.x, v_textureCoordinateBounds.w - v_textureCoordinateBounds.y);\n\n        float epsilonEyeDepth = v_compressed.x + czm_epsilon1;\n        float globeDepth1 = getGlobeDepth(adjustedST, v_originTextureCoordinateAndTranslate.xy, applyTranslate, dimensions, imageSize);\n\n        // negative values go into the screen\n        if (globeDepth1 != 0.0 && globeDepth1 > epsilonEyeDepth)\n        {\n            float globeDepth2 = getGlobeDepth(adjustedST, vec2(0.0, 1.0), applyTranslate, dimensions, imageSize); // top left corner\n            if (globeDepth2 != 0.0 && globeDepth2 > epsilonEyeDepth)\n            {\n                float globeDepth3 = getGlobeDepth(adjustedST, vec2(1.0, 1.0), applyTranslate, dimensions, imageSize); // top right corner\n                if (globeDepth3 != 0.0 && globeDepth3 > epsilonEyeDepth)\n                {\n                    discard;\n                }\n            }\n        }\n    }\n#endif\n\n}\n',Jse="#ifdef INSTANCED\nattribute vec2 direction;\n#endif\nattribute vec4 positionHighAndScale;\nattribute vec4 positionLowAndRotation;\nattribute vec4 compressedAttribute0;                       // pixel offset, translate, horizontal origin, vertical origin, show, direction, texture coordinates (texture offset)\nattribute vec4 compressedAttribute1;                       // aligned axis, translucency by distance, image width\nattribute vec4 compressedAttribute2;                       // label horizontal origin, image height, color, pick color, size in meters, valid aligned axis, 13 bits free\nattribute vec4 eyeOffset;                                  // eye offset in meters, 4 bytes free (texture range)\nattribute vec4 scaleByDistance;                            // near, nearScale, far, farScale\nattribute vec4 pixelOffsetScaleByDistance;                 // near, nearScale, far, farScale\nattribute vec4 compressedAttribute3;                       // distance display condition near, far, disableDepthTestDistance, dimensions\nattribute vec2 sdf;                                        // sdf outline color (rgb) and width (w)\n#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)\nattribute vec4 textureCoordinateBoundsOrLabelTranslate;    // the min and max x and y values for the texture coordinates\n#endif\n#ifdef VECTOR_TILE\nattribute float a_batchId;\n#endif\n\nvarying vec2 v_textureCoordinates;\n#ifdef FRAGMENT_DEPTH_CHECK\nvarying vec4 v_textureCoordinateBounds;\nvarying vec4 v_originTextureCoordinateAndTranslate;\nvarying vec4 v_compressed;                                 // x: eyeDepth, y: applyTranslate & enableDepthCheck, z: dimensions, w: imageSize\nvarying mat2 v_rotationMatrix;\n#endif\n\nvarying vec4 v_pickColor;\nvarying vec4 v_color;\n#ifdef SDF\nvarying vec4 v_outlineColor;\nvarying float v_outlineWidth;\n#endif\n\nconst float UPPER_BOUND = 32768.0;\n\nconst float SHIFT_LEFT16 = 65536.0;\nconst float SHIFT_LEFT12 = 4096.0;\nconst float SHIFT_LEFT8 = 256.0;\nconst float SHIFT_LEFT7 = 128.0;\nconst float SHIFT_LEFT5 = 32.0;\nconst float SHIFT_LEFT3 = 8.0;\nconst float SHIFT_LEFT2 = 4.0;\nconst float SHIFT_LEFT1 = 2.0;\n\nconst float SHIFT_RIGHT12 = 1.0 / 4096.0;\nconst float SHIFT_RIGHT8 = 1.0 / 256.0;\nconst float SHIFT_RIGHT7 = 1.0 / 128.0;\nconst float SHIFT_RIGHT5 = 1.0 / 32.0;\nconst float SHIFT_RIGHT3 = 1.0 / 8.0;\nconst float SHIFT_RIGHT2 = 1.0 / 4.0;\nconst float SHIFT_RIGHT1 = 1.0 / 2.0;\n\nvec4 addScreenSpaceOffset(vec4 positionEC, vec2 imageSize, float scale, vec2 direction, vec2 origin, vec2 translate, vec2 pixelOffset, vec3 alignedAxis, bool validAlignedAxis, float rotation, bool sizeInMeters, out mat2 rotationMatrix, out float mpp)\n{\n    // Note the halfSize cannot be computed in JavaScript because it is sent via\n    // compressed vertex attributes that coerce it to an integer.\n    vec2 halfSize = imageSize * scale * 0.5;\n    halfSize *= ((direction * 2.0) - 1.0);\n\n    vec2 originTranslate = origin * abs(halfSize);\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    if (validAlignedAxis || rotation != 0.0)\n    {\n        float angle = rotation;\n        if (validAlignedAxis)\n        {\n            vec4 projectedAlignedAxis = czm_modelViewProjection * vec4(alignedAxis, 0.0);\n            angle += sign(-projectedAlignedAxis.x) * acos(sign(projectedAlignedAxis.y) * (projectedAlignedAxis.y * projectedAlignedAxis.y) /\n                    (projectedAlignedAxis.x * projectedAlignedAxis.x + projectedAlignedAxis.y * projectedAlignedAxis.y));\n        }\n\n        float cosTheta = cos(angle);\n        float sinTheta = sin(angle);\n        rotationMatrix = mat2(cosTheta, sinTheta, -sinTheta, cosTheta);\n        halfSize = rotationMatrix * halfSize;\n    }\n    else\n    {\n        rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n    mpp = czm_metersPerPixel(positionEC);\n    positionEC.xy += (originTranslate + halfSize) * czm_branchFreeTernary(sizeInMeters, 1.0, mpp);\n    positionEC.xy += (translate + pixelOffset) * mpp;\n\n    return positionEC;\n}\n\n#ifdef VERTEX_DEPTH_CHECK\nfloat getGlobeDepth(vec4 positionEC)\n{\n    vec4 posWC = czm_eyeToWindowCoordinates(positionEC);\n\n    float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, posWC.xy / czm_viewport.zw));\n\n    if (globeDepth == 0.0)\n    {\n        return 0.0; // not on the globe\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(posWC.xy, globeDepth);\n    return eyeCoordinate.z / eyeCoordinate.w;\n}\n#endif\nvoid main()\n{\n    // Modifying this shader may also require modifications to Billboard._computeScreenSpacePosition\n\n    // unpack attributes\n    vec3 positionHigh = positionHighAndScale.xyz;\n    vec3 positionLow = positionLowAndRotation.xyz;\n    float scale = positionHighAndScale.w;\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    float rotation = positionLowAndRotation.w;\n#else\n    float rotation = 0.0;\n#endif\n\n    float compressed = compressedAttribute0.x;\n\n    vec2 pixelOffset;\n    pixelOffset.x = floor(compressed * SHIFT_RIGHT7);\n    compressed -= pixelOffset.x * SHIFT_LEFT7;\n    pixelOffset.x -= UPPER_BOUND;\n\n    vec2 origin;\n    origin.x = floor(compressed * SHIFT_RIGHT5);\n    compressed -= origin.x * SHIFT_LEFT5;\n\n    origin.y = floor(compressed * SHIFT_RIGHT3);\n    compressed -= origin.y * SHIFT_LEFT3;\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    vec2 depthOrigin = origin.xy;\n#endif\n    origin -= vec2(1.0);\n\n    float show = floor(compressed * SHIFT_RIGHT2);\n    compressed -= show * SHIFT_LEFT2;\n\n#ifdef INSTANCED\n    vec2 textureCoordinatesBottomLeft = czm_decompressTextureCoordinates(compressedAttribute0.w);\n    vec2 textureCoordinatesRange = czm_decompressTextureCoordinates(eyeOffset.w);\n    vec2 textureCoordinates = textureCoordinatesBottomLeft + direction * textureCoordinatesRange;\n#else\n    vec2 direction;\n    direction.x = floor(compressed * SHIFT_RIGHT1);\n    direction.y = compressed - direction.x * SHIFT_LEFT1;\n\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressedAttribute0.w);\n#endif\n\n    float temp = compressedAttribute0.y  * SHIFT_RIGHT8;\n    pixelOffset.y = -(floor(temp) - UPPER_BOUND);\n\n    vec2 translate;\n    translate.y = (temp - floor(temp)) * SHIFT_LEFT16;\n\n    temp = compressedAttribute0.z * SHIFT_RIGHT8;\n    translate.x = floor(temp) - UPPER_BOUND;\n\n    translate.y += (temp - floor(temp)) * SHIFT_LEFT8;\n    translate.y -= UPPER_BOUND;\n\n    temp = compressedAttribute1.x * SHIFT_RIGHT8;\n    float temp2 = floor(compressedAttribute2.w * SHIFT_RIGHT2);\n\n    vec2 imageSize = vec2(floor(temp), temp2);\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    float labelHorizontalOrigin = floor(compressedAttribute2.w - (temp2 * SHIFT_LEFT2));\n    float applyTranslate = 0.0;\n    if (labelHorizontalOrigin != 0.0) // is a billboard, so set apply translate to false\n    {\n        applyTranslate = 1.0;\n        labelHorizontalOrigin -= 2.0;\n        depthOrigin.x = labelHorizontalOrigin + 1.0;\n    }\n\n    depthOrigin = vec2(1.0) - (depthOrigin * 0.5);\n#endif\n\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    vec4 translucencyByDistance;\n    translucencyByDistance.x = compressedAttribute1.z;\n    translucencyByDistance.z = compressedAttribute1.w;\n\n    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n\n    temp = compressedAttribute1.y * SHIFT_RIGHT8;\n    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n#endif\n\n#if defined(VERTEX_DEPTH_CHECK) || defined(FRAGMENT_DEPTH_CHECK)\n    temp = compressedAttribute3.w;\n    temp = temp * SHIFT_RIGHT12;\n\n    vec2 dimensions;\n    dimensions.y = (temp - floor(temp)) * SHIFT_LEFT12;\n    dimensions.x = floor(temp);\n#endif\n\n#ifdef ALIGNED_AXIS\n    vec3 alignedAxis = czm_octDecode(floor(compressedAttribute1.y * SHIFT_RIGHT8));\n    temp = compressedAttribute2.z * SHIFT_RIGHT5;\n    bool validAlignedAxis = (temp - floor(temp)) * SHIFT_LEFT1 > 0.0;\n#else\n    vec3 alignedAxis = vec3(0.0);\n    bool validAlignedAxis = false;\n#endif\n\n    vec4 pickColor;\n    vec4 color;\n\n    temp = compressedAttribute2.y;\n    temp = temp * SHIFT_RIGHT8;\n    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor.r = floor(temp);\n\n    temp = compressedAttribute2.x;\n    temp = temp * SHIFT_RIGHT8;\n    color.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    color.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    color.r = floor(temp);\n\n    temp = compressedAttribute2.z * SHIFT_RIGHT8;\n    bool sizeInMeters = floor((temp - floor(temp)) * SHIFT_LEFT7) > 0.0;\n    temp = floor(temp) * SHIFT_RIGHT8;\n\n    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor /= 255.0;\n\n    color.a = floor(temp);\n    color /= 255.0;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n\n#if defined(FRAGMENT_DEPTH_CHECK) || defined(VERTEX_DEPTH_CHECK)\n    float eyeDepth = positionEC.z;\n#endif\n\n    positionEC = czm_eyeOffset(positionEC, eyeOffset.xyz);\n    positionEC.xyz *= show;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(EYE_DISTANCE_PIXEL_OFFSET) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)\n    float lengthSq;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        // 2D camera distance is a special case\n        // treat all billboards as flattened to the z=0.0 plane\n        lengthSq = czm_eyeHeight2D.y;\n    }\n    else\n    {\n        lengthSq = dot(positionEC.xyz, positionEC.xyz);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_SCALING\n    float distanceScale = czm_nearFarScalar(scaleByDistance, lengthSq);\n    scale *= distanceScale;\n    translate *= distanceScale;\n    // push vertex behind near plane for clipping\n    if (scale == 0.0)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n    float translucency = 1.0;\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);\n    // push vertex behind near plane for clipping\n    if (translucency == 0.0)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_PIXEL_OFFSET\n    float pixelOffsetScale = czm_nearFarScalar(pixelOffsetScaleByDistance, lengthSq);\n    pixelOffset *= pixelOffsetScale;\n#endif\n\n#ifdef DISTANCE_DISPLAY_CONDITION\n    float nearSq = compressedAttribute3.x;\n    float farSq = compressedAttribute3.y;\n    if (lengthSq < nearSq || lengthSq > farSq)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n    mat2 rotationMatrix;\n    float mpp;\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    float disableDepthTestDistance = compressedAttribute3.z;\n#endif\n\n#ifdef VERTEX_DEPTH_CHECK\nif (lengthSq < disableDepthTestDistance) {\n    float depthsilon = 10.0;\n\n    vec2 labelTranslate = textureCoordinateBoundsOrLabelTranslate.xy;\n    vec4 pEC1 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n    float globeDepth1 = getGlobeDepth(pEC1);\n\n    if (globeDepth1 != 0.0 && pEC1.z + depthsilon < globeDepth1)\n    {\n        vec4 pEC2 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(0.0, 1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n        float globeDepth2 = getGlobeDepth(pEC2);\n\n        if (globeDepth2 != 0.0 && pEC2.z + depthsilon < globeDepth2)\n        {\n            vec4 pEC3 = addScreenSpaceOffset(positionEC, dimensions, scale, vec2(1.0), origin, labelTranslate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n            float globeDepth3 = getGlobeDepth(pEC3);\n            if (globeDepth3 != 0.0 && pEC3.z + depthsilon < globeDepth3)\n            {\n                positionEC.xyz = vec3(0.0);\n            }\n        }\n    }\n}\n#endif\n\n    positionEC = addScreenSpaceOffset(positionEC, imageSize, scale, direction, origin, translate, pixelOffset, alignedAxis, validAlignedAxis, rotation, sizeInMeters, rotationMatrix, mpp);\n    gl_Position = czm_projection * positionEC;\n    v_textureCoordinates = textureCoordinates;\n\n#ifdef LOG_DEPTH\n    czm_vertexLogDepth();\n#endif\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)\n    {\n        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;\n    }\n\n    if (disableDepthTestDistance != 0.0)\n    {\n        // Don't try to \"multiply both sides\" by w.  Greater/less-than comparisons won't work for negative values of w.\n        float zclip = gl_Position.z / gl_Position.w;\n        bool clipped = (zclip < -1.0 || zclip > 1.0);\n        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))\n        {\n            // Position z on the near plane.\n            gl_Position.z = -gl_Position.w;\n#ifdef LOG_DEPTH\n            v_depthFromNearPlusOne = 1.0;\n#endif\n        }\n    }\n#endif\n\n#ifdef FRAGMENT_DEPTH_CHECK\n    if (sizeInMeters) {\n        translate /= mpp;\n        dimensions /= mpp;\n        imageSize /= mpp;\n    }\n\n#if defined(ROTATION) || defined(ALIGNED_AXIS)\n    v_rotationMatrix = rotationMatrix;\n#else\n    v_rotationMatrix = mat2(1.0, 0.0, 0.0, 1.0);\n#endif\n\n    float enableDepthCheck = 0.0;\n    if (lengthSq < disableDepthTestDistance)\n    {\n        enableDepthCheck = 1.0;\n    }\n\n    float dw = floor(clamp(dimensions.x, 0.0, SHIFT_LEFT12));\n    float dh = floor(clamp(dimensions.y, 0.0, SHIFT_LEFT12));\n\n    float iw = floor(clamp(imageSize.x, 0.0, SHIFT_LEFT12));\n    float ih = floor(clamp(imageSize.y, 0.0, SHIFT_LEFT12));\n\n    v_compressed.x = eyeDepth;\n    v_compressed.y = applyTranslate * SHIFT_LEFT1 + enableDepthCheck;\n    v_compressed.z = dw * SHIFT_LEFT12 + dh;\n    v_compressed.w = iw * SHIFT_LEFT12 + ih;\n    v_originTextureCoordinateAndTranslate.xy = depthOrigin;\n    v_originTextureCoordinateAndTranslate.zw = translate;\n    v_textureCoordinateBounds = textureCoordinateBoundsOrLabelTranslate;\n\n#endif\n\n#ifdef SDF\n    vec4 outlineColor;\n    float outlineWidth;\n\n    temp = sdf.x;\n    temp = temp * SHIFT_RIGHT8;\n    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.r = floor(temp);\n\n    temp = sdf.y;\n    temp = temp * SHIFT_RIGHT8;\n    float temp3 = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineWidth = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.a = floor(temp);\n    outlineColor /= 255.0;\n\n    v_outlineWidth = outlineWidth / 255.0;\n    v_outlineColor = outlineColor;\n    v_outlineColor.a *= translucency;\n#endif\n\n    v_pickColor = pickColor;\n\n    v_color = color;\n    v_color.a *= translucency;\n\n}\n";function Qse(e,t){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),Object(r["a"])(e.disableDepthTestDistance)&&e.disableDepthTestDistance<0)throw new a["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,s=e.scaleByDistance,c=e.distanceDisplayCondition;if(Object(r["a"])(n)){if(n.far<=n.near)throw new a["a"]("translucencyByDistance.far must be greater than translucencyByDistance.near.");n=xE.clone(n)}if(Object(r["a"])(i)){if(i.far<=i.near)throw new a["a"]("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");i=xE.clone(i)}if(Object(r["a"])(s)){if(s.far<=s.near)throw new a["a"]("scaleByDistance.far must be greater than scaleByDistance.near.");s=xE.clone(s)}if(Object(r["a"])(c)){if(c.far<=c.near)throw new a["a"]("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");c=Sv.clone(c)}this._show=Object(o["a"])(e.show,!0),this._position=g.clone(Object(o["a"])(e.position,g.ZERO)),this._actualPosition=g.clone(this._position),this._pixelOffset=Gt.clone(Object(o["a"])(e.pixelOffset,Gt.ZERO)),this._translate=new Gt(0,0),this._eyeOffset=g.clone(Object(o["a"])(e.eyeOffset,g.ZERO)),this._heightReference=Object(o["a"])(e.heightReference,QM.NONE),this._verticalOrigin=Object(o["a"])(e.verticalOrigin,nN.CENTER),this._horizontalOrigin=Object(o["a"])(e.horizontalOrigin,eN.CENTER),this._scale=Object(o["a"])(e.scale,1),this._color=Dm.clone(Object(o["a"])(e.color,Dm.WHITE)),this._rotation=Object(o["a"])(e.rotation,0),this._alignedAxis=g.clone(Object(o["a"])(e.alignedAxis,g.ZERO)),this._width=e.width,this._height=e.height,this._scaleByDistance=s,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._sizeInMeters=Object(o["a"])(e.sizeInMeters,!1),this._distanceDisplayCondition=c,this._disableDepthTestDistance=e.disableDepthTestDistance,this._id=e.id,this._collection=Object(o["a"])(e.collection,t),this._pickId=void 0,this._pickPrimitive=Object(o["a"])(e._pickPrimitive,this),this._billboardCollection=t,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageIndex=-1,this._imageIndexPromise=void 0,this._imageId=void 0,this._image=void 0,this._imageSubRegion=void 0,this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;const l=e.image;let u=e.imageId;Object(r["a"])(l)&&(Object(r["a"])(u)||(u="string"===typeof l?l:Object(r["a"])(l.src)?l.src:ML()),this._imageId=u,this._image=l),Object(r["a"])(e.imageSubRegion)&&(this._imageId=u,this._imageSubRegion=e.imageSubRegion),Object(r["a"])(this._billboardCollection._textureAtlas)&&this._loadImage(),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=SH.SCENE3D,this._clusterShow=!0,this._outlineColor=Dm.clone(Object(o["a"])(e.outlineColor,Dm.BLACK)),this._outlineWidth=Object(o["a"])(e.outlineWidth,0),this._updateClamping()}const Zse=Qse.SHOW_INDEX=0,ece=Qse.POSITION_INDEX=1,tce=Qse.PIXEL_OFFSET_INDEX=2,nce=Qse.EYE_OFFSET_INDEX=3,ice=Qse.HORIZONTAL_ORIGIN_INDEX=4,oce=Qse.VERTICAL_ORIGIN_INDEX=5,rce=Qse.SCALE_INDEX=6,ace=Qse.IMAGE_INDEX_INDEX=7,sce=Qse.COLOR_INDEX=8,cce=Qse.ROTATION_INDEX=9,lce=Qse.ALIGNED_AXIS_INDEX=10,uce=Qse.SCALE_BY_DISTANCE_INDEX=11,hce=Qse.TRANSLUCENCY_BY_DISTANCE_INDEX=12,dce=Qse.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,fce=Qse.DISTANCE_DISPLAY_CONDITION=14,pce=Qse.DISABLE_DEPTH_DISTANCE=15;Qse.TEXTURE_COORDINATE_BOUNDS=16;const mce=Qse.SDF_INDEX=17;function _ce(e,t){const n=e._billboardCollection;Object(r["a"])(n)&&(n._updateBillboard(e,t),e._dirty=!0)}Qse.NUMBER_OF_PROPERTIES=18,Object.defineProperties(Qse.prototype,{show:{get:function(){return this._show},set:function(e){i["a"].typeOf.bool("value",e),this._show!==e&&(this._show=e,_ce(this,Zse))}},position:{get:function(){return this._position},set:function(e){i["a"].typeOf.object("value",e);const t=this._position;g.equals(t,e)||(g.clone(e,t),g.clone(e,this._actualPosition),this._updateClamping(),_ce(this,ece))}},heightReference:{get:function(){return this._heightReference},set:function(e){i["a"].typeOf.number("value",e);const t=this._heightReference;e!==t&&(this._heightReference=e,this._updateClamping(),_ce(this,ece))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){i["a"].typeOf.object("value",e);const t=this._pixelOffset;Gt.equals(t,e)||(Gt.clone(e,t),_ce(this,tce))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){if(Object(r["a"])(e)&&(i["a"].typeOf.object("value",e),e.far<=e.near))throw new a["a"]("far distance must be greater than near distance.");const t=this._scaleByDistance;xE.equals(t,e)||(this._scaleByDistance=xE.clone(e,t),_ce(this,uce))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){if(Object(r["a"])(e)&&(i["a"].typeOf.object("value",e),e.far<=e.near))throw new a["a"]("far distance must be greater than near distance.");const t=this._translucencyByDistance;xE.equals(t,e)||(this._translucencyByDistance=xE.clone(e,t),_ce(this,hce))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){if(Object(r["a"])(e)&&(i["a"].typeOf.object("value",e),e.far<=e.near))throw new a["a"]("far distance must be greater than near distance.");const t=this._pixelOffsetScaleByDistance;xE.equals(t,e)||(this._pixelOffsetScaleByDistance=xE.clone(e,t),_ce(this,dce))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){i["a"].typeOf.object("value",e);const t=this._eyeOffset;g.equals(t,e)||(g.clone(e,t),_ce(this,nce))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){i["a"].typeOf.number("value",e),this._horizontalOrigin!==e&&(this._horizontalOrigin=e,_ce(this,ice))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){i["a"].typeOf.number("value",e),this._verticalOrigin!==e&&(this._verticalOrigin=e,_ce(this,oce))}},scale:{get:function(){return this._scale},set:function(e){i["a"].typeOf.number("value",e),this._scale!==e&&(this._scale=e,_ce(this,rce))}},color:{get:function(){return this._color},set:function(e){i["a"].typeOf.object("value",e);const t=this._color;Dm.equals(t,e)||(Dm.clone(e,t),_ce(this,sce))}},rotation:{get:function(){return this._rotation},set:function(e){i["a"].typeOf.number("value",e),this._rotation!==e&&(this._rotation=e,_ce(this,cce))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(e){i["a"].typeOf.object("value",e);const t=this._alignedAxis;g.equals(t,e)||(g.clone(e,t),_ce(this,lce))}},width:{get:function(){return Object(o["a"])(this._width,this._imageWidth)},set:function(e){Object(r["a"])(e)&&i["a"].typeOf.number("value",e),this._width!==e&&(this._width=e,_ce(this,ace))}},height:{get:function(){return Object(o["a"])(this._height,this._imageHeight)},set:function(e){Object(r["a"])(e)&&i["a"].typeOf.number("value",e),this._height!==e&&(this._height=e,_ce(this,ace))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){i["a"].typeOf.bool("value",e),this._sizeInMeters!==e&&(this._sizeInMeters=e,_ce(this,sce))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(!Sv.equals(e,this._distanceDisplayCondition)){if(Object(r["a"])(e)&&(i["a"].typeOf.object("value",e),e.far<=e.near))throw new a["a"]("far distance must be greater than near distance.");this._distanceDisplayCondition=Sv.clone(e,this._distanceDisplayCondition),_ce(this,fce)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(Object(r["a"])(e)&&(i["a"].typeOf.number("value",e),e<0))throw new a["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,_ce(this,pce))}},id:{get:function(){return this._id},set:function(e){this._id=e,Object(r["a"])(this._pickId)&&(this._pickId.object.id=e)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(e){this._pickPrimitive=e,Object(r["a"])(this._pickId)&&(this._pickId.object.primitive=e)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageId},set:function(e){Object(r["a"])(e)?"string"===typeof e?this.setImage(e,e):e instanceof Et["a"]?this.setImage(e.url,e):Object(r["a"])(e.src)?this.setImage(e.src,e):this.setImage(ML(),e):(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=void 0,this._image=void 0,this._imageIndexPromise=void 0,_ce(this,ace))}},ready:{get:function(){return-1!==this._imageIndex}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=g.clone(e,this._actualClampedPosition),_ce(this,ece)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,_ce(this,Zse))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._outlineColor;Dm.equals(t,e)||(Dm.clone(e,t),_ce(this,mce))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,_ce(this,mce))}}}),Qse.prototype.getPickId=function(e){return Object(r["a"])(this._pickId)||(this._pickId=e.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId},Qse.prototype._updateClamping=function(){Qse._updateClamping(this._billboardCollection,this)};const gce=new I,bce=new g;Qse._updateClamping=function(e,t){const n=e._scene;if(!Object(r["a"])(n)||!Object(r["a"])(n.globe)){if(t._heightReference!==QM.NONE)throw new a["a"]("Height reference is not supported without a scene and globe.");return}const i=n.globe,o=i.ellipsoid,s=i._surface,c=n.frameState.mode,l=c!==t._mode;if(t._mode=c,(t._heightReference===QM.NONE||l)&&Object(r["a"])(t._removeCallbackFunc)&&(t._removeCallbackFunc(),t._removeCallbackFunc=void 0,t._clampedPosition=void 0),t._heightReference===QM.NONE||!Object(r["a"])(t._position))return;const u=o.cartesianToCartographic(t._position);if(!Object(r["a"])(u))return void(t._actualClampedPosition=void 0);function h(e){if(t._heightReference===QM.RELATIVE_TO_GROUND)if(t._mode===SH.SCENE3D){const t=o.cartesianToCartographic(e,gce);t.height+=u.height,o.cartographicToCartesian(t,e)}else e.x+=u.height;t._clampedPosition=g.clone(e,t._clampedPosition)}Object(r["a"])(t._removeCallbackFunc)&&t._removeCallbackFunc(),t._removeCallbackFunc=s.updateHeight(u,h),I.clone(u,gce);const d=i.getHeight(u);Object(r["a"])(d)&&(gce.height=d),o.cartographicToCartesian(gce,bce),h(bce)},Qse.prototype._loadImage=function(){const e=this._billboardCollection._textureAtlas,t=this._imageId,n=this._image,i=this._imageSubRegion;let o;const a=this;function s(o){if(a._imageId!==t||a._image!==n||!Au.equals(a._imageSubRegion,i))return;const r=e.textureCoordinates[o];a._imageWidth=e.texture.width*r.width,a._imageHeight=e.texture.height*r.height,a._imageIndex=o,a._ready=!0,a._image=void 0,a._imageIndexPromise=void 0,_ce(a,ace)}if(Object(r["a"])(n)){const i=e.getImageIndex(t);if(Object(r["a"])(i))return void s(i);o=e.addImage(t,n)}Object(r["a"])(i)&&(o=e.addSubRegion(t,i)),this._imageIndexPromise=o,Object(r["a"])(o)&&o.then(s).catch((function(e){console.error(`Error loading image for billboard: ${e}`),a._imageIndexPromise=void 0}))},Qse.prototype.setImage=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("id is required.");if(!Object(r["a"])(t))throw new a["a"]("image is required.");this._imageId!==e&&(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=e,this._image=t,Object(r["a"])(this._billboardCollection._textureAtlas)&&this._loadImage())},Qse.prototype.setImageSubRegion=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("id is required.");if(!Object(r["a"])(t))throw new a["a"]("subRegion is required.");this._imageId===e&&Au.equals(this._imageSubRegion,t)||(this._imageIndex=-1,this._imageId=e,this._imageSubRegion=Au.clone(t),Object(r["a"])(this._billboardCollection._textureAtlas)&&this._loadImage())},Qse.prototype._setTranslate=function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._translate;Gt.equals(t,e)||(Gt.clone(e,t),_ce(this,tce))},Qse.prototype._getActualPosition=function(){return Object(r["a"])(this._clampedPosition)?this._clampedPosition:this._actualPosition},Qse.prototype._setActualPosition=function(e){Object(r["a"])(this._clampedPosition)||g.clone(e,this._actualPosition),_ce(this,ece)};const yce=new be;Qse._computeActualPosition=function(e,t,n,i){return Object(r["a"])(e._clampedPosition)?(n.mode!==e._mode&&e._updateClamping(),e._clampedPosition):n.mode===SH.SCENE3D?t:(Me.multiplyByPoint(i,t,yce),f9.computeActualWgs84Position(n,yce))};const vce=new g;Qse._computeScreenSpacePosition=function(e,t,n,i,o,a){const s=Me.multiplyByPoint(e,t,vce),c=f9.wgs84WithEyeOffsetToWindowCoordinates(o,s,n,a);if(Object(r["a"])(c))return Gt.add(c,i,c),c};const Oce=new Gt(0,0);Qse.prototype.computeScreenSpacePosition=function(e,t){const n=this._billboardCollection;if(Object(r["a"])(t)||(t=new Gt),!Object(r["a"])(n))throw new a["a"]("Billboard must be in a collection.  Was it removed?");if(!Object(r["a"])(e))throw new a["a"]("scene is required.");Gt.clone(this._pixelOffset,Oce),Gt.add(Oce,this._translate,Oce);let i=n.modelMatrix,o=this._position;if(Object(r["a"])(this._clampedPosition)&&(o=this._clampedPosition,e.mode!==SH.SCENE3D)){const t=e.mapProjection,n=t.ellipsoid,r=t.unproject(o,gce);o=n.cartographicToCartesian(r,vce),i=Me.IDENTITY}const s=Qse._computeScreenSpacePosition(i,o,this._eyeOffset,Oce,e,t);return s},Qse.getScreenSpaceBoundingBox=function(e,t,n){let i=e.width,o=e.height;const a=e.scale;i*=a,o*=a;let s=t.x;e.horizontalOrigin===eN.RIGHT?s-=i:e.horizontalOrigin===eN.CENTER&&(s-=.5*i);let c=t.y;return e.verticalOrigin===nN.BOTTOM||e.verticalOrigin===nN.BASELINE?c-=o:e.verticalOrigin===nN.CENTER&&(c-=.5*o),Object(r["a"])(n)||(n=new Au),n.x=s,n.y=c,n.width=i,n.height=o,n},Qse.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&this._id===e._id&&g.equals(this._position,e._position)&&this._imageId===e._imageId&&this._show===e._show&&this._scale===e._scale&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&Au.equals(this._imageSubRegion,e._imageSubRegion)&&Dm.equals(this._color,e._color)&&Gt.equals(this._pixelOffset,e._pixelOffset)&&Gt.equals(this._translate,e._translate)&&g.equals(this._eyeOffset,e._eyeOffset)&&xE.equals(this._scaleByDistance,e._scaleByDistance)&&xE.equals(this._translucencyByDistance,e._translucencyByDistance)&&xE.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&Sv.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance},Qse.prototype._destroy=function(){Object(r["a"])(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),Object(r["a"])(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0};var Ace=Qse;const wce={OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};var Tce=Object.freeze(wce);const Cce={FONT_SIZE:48,PADDING:10,RADIUS:8,CUTOFF:.25};var Ece=Object.freeze(Cce);function xce(e,t,n,i,r){this.bottomLeft=Object(o["a"])(e,Gt.ZERO),this.topRight=Object(o["a"])(t,Gt.ZERO),this.childNode1=n,this.childNode2=i,this.imageIndex=r}const Sce=new Gt(16,16);function Ice(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.borderWidthInPixels,1),n=Object(o["a"])(e.initialSize,Sce);if(!Object(r["a"])(e.context))throw new a["a"]("context is required.");if(t<0)throw new a["a"]("borderWidthInPixels must be greater than or equal to zero.");if(n.x<1||n.y<1)throw new a["a"]("initialSize must be greater than zero.");this._context=e.context,this._pixelFormat=Object(o["a"])(e.pixelFormat,fx.RGBA),this._borderWidthInPixels=t,this._textureCoordinates=[],this._guid=ML(),this._idHash={},this._indexHash={},this._initialSize=n,this._root=void 0}function Dce(e,t){const n=e._context,i=e.numberOfImages,o=2,a=e._borderWidthInPixels;if(i>0){const i=e._texture.width,s=e._texture.height,c=o*(i+t.width+a),l=o*(s+t.height+a),u=i/c,h=s/l,d=new xce(new Gt(i+a,a),new Gt(c,s)),f=new xce(new Gt,new Gt(c,s),e._root,d),p=new xce(new Gt(a,s+a),new Gt(c,l)),m=new xce(new Gt,new Gt(c,l),f,p);for(let t=0;t<e._textureCoordinates.length;t++){const n=e._textureCoordinates[t];Object(r["a"])(n)&&(n.x*=u,n.y*=h,n.width*=u,n.height*=h)}const _=new lB({context:e._context,width:c,height:l,pixelFormat:e._pixelFormat}),g=new S8({context:n,colorTextures:[e._texture],destroyAttachments:!1});g._bind(),_.copyFromFramebuffer(0,0,0,0,c,l),g._unBind(),g.destroy(),e._texture=e._texture&&e._texture.destroy(),e._texture=_,e._root=m}else{let n=o*(t.width+2*a),i=o*(t.height+2*a);n<e._initialSize.x&&(n=e._initialSize.x),i<e._initialSize.y&&(i=e._initialSize.y),e._texture=e._texture&&e._texture.destroy(),e._texture=new lB({context:e._context,width:n,height:i,pixelFormat:e._pixelFormat}),e._root=new xce(new Gt(a,a),new Gt(n,i))}}function Pce(e,t,n){if(Object(r["a"])(t)){if(!Object(r["a"])(t.childNode1)&&!Object(r["a"])(t.childNode2)){if(Object(r["a"])(t.imageIndex))return;const i=t.topRight.x-t.bottomLeft.x,o=t.topRight.y-t.bottomLeft.y,a=i-n.width,s=o-n.height;if(a<0||s<0)return;if(0===a&&0===s)return t;if(a>s){t.childNode1=new xce(new Gt(t.bottomLeft.x,t.bottomLeft.y),new Gt(t.bottomLeft.x+n.width,t.topRight.y));const i=t.bottomLeft.x+n.width+e._borderWidthInPixels;i<t.topRight.x&&(t.childNode2=new xce(new Gt(i,t.bottomLeft.y),new Gt(t.topRight.x,t.topRight.y)))}else{t.childNode1=new xce(new Gt(t.bottomLeft.x,t.bottomLeft.y),new Gt(t.topRight.x,t.bottomLeft.y+n.height));const i=t.bottomLeft.y+n.height+e._borderWidthInPixels;i<t.topRight.y&&(t.childNode2=new xce(new Gt(t.bottomLeft.x,i),new Gt(t.topRight.x,t.topRight.y)))}return Pce(e,t.childNode1,n)}return Pce(e,t.childNode1,n)||Pce(e,t.childNode2,n)}}function jce(e,t,n){const i=Pce(e,e._root,t);if(Object(r["a"])(i)){i.imageIndex=n;const o=e._texture.width,r=e._texture.height,a=i.topRight.x-i.bottomLeft.x,s=i.topRight.y-i.bottomLeft.y,c=i.bottomLeft.x/o,l=i.bottomLeft.y/r,u=a/o,h=s/r;e._textureCoordinates[n]=new Au(c,l,u,h),e._texture.copyFrom({source:t,xOffset:i.bottomLeft.x,yOffset:i.bottomLeft.y})}else Dce(e,t),jce(e,t,n);e._guid=ML()}function Rce(e,t){if(!Object(r["a"])(e)||e.isDestroyed())return-1;const n=e.numberOfImages;return jce(e,t,n),n}Object.defineProperties(Ice.prototype,{borderWidthInPixels:{get:function(){return this._borderWidthInPixels}},textureCoordinates:{get:function(){return this._textureCoordinates}},texture:{get:function(){return Object(r["a"])(this._texture)||(this._texture=new lB({context:this._context,width:this._initialSize.x,height:this._initialSize.y,pixelFormat:this._pixelFormat})),this._texture}},numberOfImages:{get:function(){return this._textureCoordinates.length}},guid:{get:function(){return this._guid}}}),Ice.prototype.getImageIndex=function(e){if(!Object(r["a"])(e))throw new a["a"]("id is required.");return this._indexHash[e]},Ice.prototype.addImageSync=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("id is required.");if(!Object(r["a"])(t))throw new a["a"]("image is required.");let n=this._indexHash[e];return Object(r["a"])(n)||(n=Rce(this,t),this._idHash[e]=Promise.resolve(n),this._indexHash[e]=n),n},Ice.prototype.addImage=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("id is required.");if(!Object(r["a"])(t))throw new a["a"]("image is required.");let n=this._idHash[e];if(Object(r["a"])(n))return n;if("function"===typeof t){if(t=t(e),!Object(r["a"])(t))throw new a["a"]("image is required.")}else if("string"===typeof t||t instanceof Et["a"]){const e=Et["a"].createIfNeeded(t);t=e.fetchImage()}const i=this;return n=Promise.resolve(t).then((function(t){const n=Rce(i,t);return i._indexHash[e]=n,n})),this._idHash[e]=n,n},Ice.prototype.addSubRegion=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("id is required.");if(!Object(r["a"])(t))throw new a["a"]("subRegion is required.");const n=this._idHash[e];if(!Object(r["a"])(n))throw new ye["a"](`image with id "${e}" not found in the atlas.`);const i=this;return Promise.resolve(n).then((function(e){if(-1===e)return-1;const n=i._texture.width,o=i._texture.height,r=i.numberOfImages,a=i._textureCoordinates[e],s=a.x+t.x/n,c=a.y+t.y/o,l=t.width/n,u=t.height/o;return i._textureCoordinates.push(new Au(s,c,l,u)),i._guid=ML(),r}))},Ice.prototype.isDestroyed=function(){return!1},Ice.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),Wc(this)};var Lce=Ice;const Mce=Ace.SHOW_INDEX,Nce=Ace.POSITION_INDEX,Bce=Ace.PIXEL_OFFSET_INDEX,Fce=Ace.EYE_OFFSET_INDEX,zce=Ace.HORIZONTAL_ORIGIN_INDEX,kce=Ace.VERTICAL_ORIGIN_INDEX,Uce=Ace.SCALE_INDEX,Vce=Ace.IMAGE_INDEX_INDEX,Hce=Ace.COLOR_INDEX,Gce=Ace.ROTATION_INDEX,Wce=Ace.ALIGNED_AXIS_INDEX,qce=Ace.SCALE_BY_DISTANCE_INDEX,Yce=Ace.TRANSLUCENCY_BY_DISTANCE_INDEX,Xce=Ace.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,Kce=Ace.DISTANCE_DISPLAY_CONDITION,$ce=Ace.DISABLE_DEPTH_DISTANCE,Jce=Ace.TEXTURE_COORDINATE_BOUNDS,Qce=Ace.SDF_INDEX,Zce=Ace.NUMBER_OF_PROPERTIES;let ele;const tle={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11},nle={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12};function ile(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._scene=e.scene,this._batchTable=e.batchTable,this._textureAtlas=void 0,this._textureAtlasGUID=void 0,this._destroyTextureAtlas=!0,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(Zce),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new Tt,this._baseVolumeWC=new Tt,this._baseVolume2D=new Tt,this._boundingVolume=new Tt,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=Me.clone(Me.IDENTITY),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.debugShowTextureAtlas=Object(o["a"])(e.debugShowTextureAtlas,!1),this.blendOption=Object(o["a"])(e.blendOption,Tce.OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=SH.SCENE3D,this._buffersUsage=[LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW],this._highlightColor=Dm.clone(Dm.WHITE);const t=this;this._uniforms={u_atlas:function(){return t._textureAtlas.texture},u_highlightColor:function(){return t._highlightColor}};const n=this._scene;Object(r["a"])(n)&&Object(r["a"])(n.terrainProviderChanged)&&(this._removeCallbackFunc=n.terrainProviderChanged.addEventListener((function(){const e=this._billboards,t=e.length;for(let n=0;n<t;++n)Object(r["a"])(e[n])&&e[n]._updateClamping()}),this))}function ole(e){const t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}function rle(e){if(e._billboardsRemoved){e._billboardsRemoved=!1;const t=[],n=e._billboards,i=n.length;for(let e=0,o=0;e<i;++e){const i=n[e];Object(r["a"])(i)&&(i._index=o++,t.push(i))}e._billboards=t}}let ale;function sle(e){const t=16384;let n=e.cache.billboardCollection_indexBufferBatched;if(Object(r["a"])(n))return n;const i=6*t-6,o=new Uint16Array(i);for(let r=0,a=0;r<i;r+=6,a+=4)o[r]=a,o[r+1]=a+1,o[r+2]=a+2,o[r+3]=a+0,o[r+4]=a+2,o[r+5]=a+3;return n=NV.createIndexBuffer({context:e,typedArray:o,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),n.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferBatched=n,n}function cle(e){let t=e.cache.billboardCollection_indexBufferInstanced;return Object(r["a"])(t)||(t=NV.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferInstanced=t),t}function lle(e){let t=e.cache.billboardCollection_vertexBufferInstanced;return Object(r["a"])(t)||(t=NV.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:LV.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_vertexBufferInstanced=t),t}function ule(e,t,n,i,o,a){const s=[{index:ele.positionHighAndScale,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Nce]},{index:ele.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Nce]},{index:ele.compressedAttribute0,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Bce]},{index:ele.compressedAttribute1,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Yce]},{index:ele.compressedAttribute2,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Hce]},{index:ele.eyeOffset,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Fce]},{index:ele.scaleByDistance,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[qce]},{index:ele.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Xce]},{index:ele.compressedAttribute3,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Kce]},{index:ele.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[Jce]}];i&&s.push({index:ele.direction,componentsPerAttribute:2,componentDatatype:Ks.FLOAT,vertexBuffer:lle(e)}),Object(r["a"])(o)&&s.push({index:ele.a_batchId,componentsPerAttribute:1,componentDatatype:Ks.FLOAT,bufferUsage:LV.STATIC_DRAW}),a&&s.push({index:ele.sdf,componentsPerAttribute:2,componentDatatype:Ks.FLOAT,usage:n[Qce]});const c=i?t:4*t;return new Kse(e,s,c,i)}Object.defineProperties(ile.prototype,{length:{get:function(){return rle(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(e){this._textureAtlas!==e&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=e,this._createVertexArray=!0)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(e){this._destroyTextureAtlas=e}}}),ile.prototype.add=function(e){const t=new Ace(e,this);return t._index=this._billboards.length,this._billboards.push(t),this._createVertexArray=!0,t},ile.prototype.remove=function(e){return!!this.contains(e)&&(this._billboards[e._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},ile.prototype.removeAll=function(){ole(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0},ile.prototype._updateBillboard=function(e,t){e._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=e),++this._propertiesChanged[t]},ile.prototype.contains=function(e){return Object(r["a"])(e)&&e._billboardCollection===this},ile.prototype.get=function(e){return i["a"].typeOf.number("index",e),rle(this),this._billboards[e]},ile.prototype.computeNewBuffersUsage=function(){const e=this._buffersUsage;let t=!1;const n=this._propertiesChanged;for(let i=0;i<Zce;++i){const o=0===n[i]?LV.STATIC_DRAW:LV.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};const hle=new Bd;function dle(e,t,n,i,o){let r;const a=i[ele.positionHighAndScale],s=i[ele.positionLowAndRotation],c=o._getActualPosition();e._mode===SH.SCENE3D&&(Tt.expand(e._baseVolume,c,e._baseVolume),e._boundingVolumeDirty=!0),Bd.fromCartesian(c,hle);const l=o.scale,u=o.rotation;0!==u&&(e._shaderRotation=!0),e._maxScale=Math.max(e._maxScale,l);const h=hle.high,d=hle.low;e._instanced?(r=o._index,a(r,h.x,h.y,h.z,l),s(r,d.x,d.y,d.z,u)):(r=4*o._index,a(r+0,h.x,h.y,h.z,l),a(r+1,h.x,h.y,h.z,l),a(r+2,h.x,h.y,h.z,l),a(r+3,h.x,h.y,h.z,l),s(r+0,d.x,d.y,d.z,u),s(r+1,d.x,d.y,d.z,u),s(r+2,d.x,d.y,d.z,u),s(r+3,d.x,d.y,d.z,u))}const fle=new Gt,ple=32768,mle=65536,_le=4096,gle=256,ble=128,yle=32,vle=8,Ole=4,Ale=1/256,wle=0,Tle=2,Cle=3,Ele=1;function xle(e,t,n,i,o){let c;const l=i[ele.compressedAttribute0],u=o.pixelOffset,h=u.x,d=u.y,f=o._translate,p=f.x,m=f.y;e._maxPixelOffset=Math.max(e._maxPixelOffset,Math.abs(h+p),Math.abs(-d+m));const _=o.horizontalOrigin;let g=o._verticalOrigin,b=o.show&&o.clusterShow;0===o.color.alpha&&(b=!1),g===nN.BASELINE&&(g=nN.BOTTOM),e._allHorizontalCenter=e._allHorizontalCenter&&_===eN.CENTER,e._allVerticalCenter=e._allVerticalCenter&&g===nN.CENTER;let y=0,v=0,O=0,A=0;const w=o._imageIndex;if(-1!==w){const e=n[w];if(!Object(r["a"])(e))throw new a["a"](`Invalid billboard image index: ${w}`);y=e.x,v=e.y,O=e.width,A=e.height}const T=y+O,C=v+A;let E=Math.floor(s["a"].clamp(h,-ple,ple)+ple)*ble;E+=(_+1)*yle,E+=(g+1)*vle,E+=(b?1:0)*Ole;let x=Math.floor(s["a"].clamp(d,-ple,ple)+ple)*gle,S=Math.floor(s["a"].clamp(p,-ple,ple)+ple)*gle;const I=(s["a"].clamp(m,-ple,ple)+ple)*Ale,D=Math.floor(I),P=Math.floor((I-D)*gle);x+=D,S+=P,fle.x=y,fle.y=v;const j=pc.compressTextureCoordinates(fle);fle.x=T;const R=pc.compressTextureCoordinates(fle);fle.y=C;const L=pc.compressTextureCoordinates(fle);fle.x=y;const M=pc.compressTextureCoordinates(fle);e._instanced?(c=o._index,l(c,E,x,S,j)):(c=4*o._index,l(c+0,E+wle,x,S,j),l(c+1,E+Tle,x,S,R),l(c+2,E+Cle,x,S,L),l(c+3,E+Ele,x,S,M))}function Sle(e,t,n,i,c){let l;const u=i[ele.compressedAttribute1],h=c.alignedAxis;g.equals(h,g.ZERO)||(e._shaderAlignedAxis=!0);let d=0,f=1,p=1,m=1;const _=c.translucencyByDistance;Object(r["a"])(_)&&(d=_.near,f=_.nearValue,p=_.far,m=_.farValue,1===f&&1===m||(e._shaderTranslucencyByDistance=!0));let b=0;const y=c._imageIndex;if(-1!==y){const e=n[y];if(!Object(r["a"])(e))throw new a["a"](`Invalid billboard image index: ${y}`);b=e.width}const v=e._textureAtlas.texture.width,O=Math.round(Object(o["a"])(c.width,v*b));e._maxSize=Math.max(e._maxSize,O);let A=s["a"].clamp(O,0,mle),w=0;Math.abs(g.magnitudeSquared(h)-1)<s["a"].EPSILON6&&(w=pc.octEncodeFloat(h)),f=s["a"].clamp(f,0,1),f=1===f?255:255*f|0,A=A*gle+f,m=s["a"].clamp(m,0,1),m=1===m?255:255*m|0,w=w*gle+m,e._instanced?(l=c._index,u(l,A,w,d,p)):(l=4*c._index,u(l+0,A,w,d,p),u(l+1,A,w,d,p),u(l+2,A,w,d,p),u(l+3,A,w,d,p))}function Ile(e,t,n,i,c){let l;const u=i[ele.compressedAttribute2],h=c.color,d=Object(r["a"])(e._batchTable)?Dm.WHITE:c.getPickId(t.context).color,f=c.sizeInMeters?1:0,p=Math.abs(g.magnitudeSquared(c.alignedAxis)-1)<s["a"].EPSILON6?1:0;e._allSizedInMeters=e._allSizedInMeters&&1===f;let m=0;const _=c._imageIndex;if(-1!==_){const e=n[_];if(!Object(r["a"])(e))throw new a["a"](`Invalid billboard image index: ${_}`);m=e.height}const b=e._textureAtlas.texture.dimensions,y=Math.round(Object(o["a"])(c.height,b.y*m));e._maxSize=Math.max(e._maxSize,y);let v=Object(o["a"])(c._labelHorizontalOrigin,-2);v+=2;const O=y*Ole+v;let A=Dm.floatToByte(h.red),w=Dm.floatToByte(h.green),T=Dm.floatToByte(h.blue);const C=A*mle+w*gle+T;A=Dm.floatToByte(d.red),w=Dm.floatToByte(d.green),T=Dm.floatToByte(d.blue);const E=A*mle+w*gle+T;let x=Dm.floatToByte(h.alpha)*mle+Dm.floatToByte(d.alpha)*gle;x+=2*f+p,e._instanced?(l=c._index,u(l,C,E,x,O)):(l=4*c._index,u(l+0,C,E,x,O),u(l+1,C,E,x,O),u(l+2,C,E,x,O),u(l+3,C,E,x,O))}function Dle(e,t,n,i,o){let s;const c=i[ele.eyeOffset],l=o.eyeOffset;let u=l.z;if(o._heightReference!==QM.NONE&&(u*=1.005),e._maxEyeOffset=Math.max(e._maxEyeOffset,Math.abs(l.x),Math.abs(l.y),Math.abs(u)),e._instanced){let e=0,t=0;const i=o._imageIndex;if(-1!==i){const o=n[i];if(!Object(r["a"])(o))throw new a["a"](`Invalid billboard image index: ${i}`);e=o.width,t=o.height}fle.x=e,fle.y=t;const h=pc.compressTextureCoordinates(fle);s=o._index,c(s,l.x,l.y,u,h)}else s=4*o._index,c(s+0,l.x,l.y,u,0),c(s+1,l.x,l.y,u,0),c(s+2,l.x,l.y,u,0),c(s+3,l.x,l.y,u,0)}function Ple(e,t,n,i,o){let a;const s=i[ele.scaleByDistance];let c=0,l=1,u=1,h=1;const d=o.scaleByDistance;Object(r["a"])(d)&&(c=d.near,l=d.nearValue,u=d.far,h=d.farValue,1===l&&1===h||(e._shaderScaleByDistance=!0)),e._instanced?(a=o._index,s(a,c,l,u,h)):(a=4*o._index,s(a+0,c,l,u,h),s(a+1,c,l,u,h),s(a+2,c,l,u,h),s(a+3,c,l,u,h))}function jle(e,t,n,i,o){let a;const s=i[ele.pixelOffsetScaleByDistance];let c=0,l=1,u=1,h=1;const d=o.pixelOffsetScaleByDistance;Object(r["a"])(d)&&(c=d.near,l=d.nearValue,u=d.far,h=d.farValue,1===l&&1===h||(e._shaderPixelOffsetScaleByDistance=!0)),e._instanced?(a=o._index,s(a,c,l,u,h)):(a=4*o._index,s(a+0,c,l,u,h),s(a+1,c,l,u,h),s(a+2,c,l,u,h),s(a+3,c,l,u,h))}function Rle(e,t,n,i,c){let l;const u=i[ele.compressedAttribute3];let h=0,d=Number.MAX_VALUE;const f=c.distanceDisplayCondition;Object(r["a"])(f)&&(h=f.near,d=f.far,h*=h,d*=d,e._shaderDistanceDisplayCondition=!0);let p=c.disableDepthTestDistance;const m=c.heightReference===QM.CLAMP_TO_GROUND&&t.context.depthTexture;let _,g;if(Object(r["a"])(p)||(p=m?5e3:0),p*=p,(m||p>0)&&(e._shaderDisableDepthDistance=!0,p===Number.POSITIVE_INFINITY&&(p=-1)),Object(r["a"])(c._labelDimensions))g=c._labelDimensions.x,_=c._labelDimensions.y;else{let t=0,i=0;const s=c._imageIndex;if(-1!==s){const e=n[s];if(!Object(r["a"])(e))throw new a["a"](`Invalid billboard image index: ${s}`);t=e.height,i=e.width}_=Math.round(Object(o["a"])(c.height,e._textureAtlas.texture.dimensions.y*t));const l=e._textureAtlas.texture.width;g=Math.round(Object(o["a"])(c.width,l*i))}const b=Math.floor(s["a"].clamp(g,0,_le)),y=Math.floor(s["a"].clamp(_,0,_le)),v=b*_le+y;e._instanced?(l=c._index,u(l,h,d,p,v)):(l=4*c._index,u(l+0,h,d,p,v),u(l+1,h,d,p,v),u(l+2,h,d,p,v),u(l+3,h,d,p,v))}function Lle(e,t,n,i,o){if(o.heightReference===QM.CLAMP_TO_GROUND){const n=e._scene,i=t.context,o=t.globeTranslucencyState.translucent,a=Object(r["a"])(n.globe)&&n.globe.depthTestAgainstTerrain;e._shaderClampToGround=i.depthTexture&&!o&&a}let s;const c=i[ele.textureCoordinateBoundsOrLabelTranslate];if(YN.maximumVertexTextureImageUnits>0){let t=0,n=0;return Object(r["a"])(o._labelTranslate)&&(t=o._labelTranslate.x,n=o._labelTranslate.y),void(e._instanced?(s=o._index,c(s,t,n,0,0)):(s=4*o._index,c(s+0,t,n,0,0),c(s+1,t,n,0,0),c(s+2,t,n,0,0),c(s+3,t,n,0,0)))}let l=0,u=0,h=0,d=0;const f=o._imageIndex;if(-1!==f){const e=n[f];if(!Object(r["a"])(e))throw new a["a"](`Invalid billboard image index: ${f}`);l=e.x,u=e.y,h=e.width,d=e.height}const p=l+h,m=u+d;e._instanced?(s=o._index,c(s,l,u,p,m)):(s=4*o._index,c(s+0,l,u,p,m),c(s+1,l,u,p,m),c(s+2,l,u,p,m),c(s+3,l,u,p,m))}function Mle(e,t,n,i,o){if(!Object(r["a"])(e._batchTable))return;const a=i[ele.a_batchId],s=o._batchIndex;let c;e._instanced?(c=o._index,a(c,s)):(c=4*o._index,a(c+0,s),a(c+1,s),a(c+2,s),a(c+3,s))}function Nle(e,t,n,i,o){if(!e._sdf)return;let r;const a=i[ele.sdf],s=o.outlineColor,c=o.outlineWidth,l=Dm.floatToByte(s.red),u=Dm.floatToByte(s.green),h=Dm.floatToByte(s.blue),d=l*mle+u*gle+h,f=c/Ece.RADIUS,p=Dm.floatToByte(s.alpha)*mle+Dm.floatToByte(f)*gle;e._instanced?(r=o._index,a(r,d,p)):(r=4*o._index,a(r+0,d+wle,p),a(r+1,d+Tle,p),a(r+2,d+Cle,p),a(r+3,d+Ele,p))}function Ble(e,t,n,i,o){dle(e,t,n,i,o),xle(e,t,n,i,o),Sle(e,t,n,i,o),Ile(e,t,n,i,o),Dle(e,t,n,i,o),Ple(e,t,n,i,o),jle(e,t,n,i,o),Rle(e,t,n,i,o),Lle(e,t,n,i,o),Mle(e,t,n,i,o),Nle(e,t,n,i,o)}function Fle(e,t,n,i,o,a){let s;i.mode===SH.SCENE3D?(s=e._baseVolume,e._boundingVolumeDirty=!0):s=e._baseVolume2D;const c=[];for(let l=0;l<n;++l){const e=t[l],n=e.position,u=Ace._computeActualPosition(e,n,i,o);Object(r["a"])(u)&&(e._setActualPosition(u),a?c.push(u):Tt.expand(s,u,s))}a&&Tt.fromPoints(c,s)}function zle(e,t){const n=t.mode,i=e._billboards,o=e._billboardsToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==SH.SCENE3D&&!Me.equals(r,e.modelMatrix)?(e._mode=n,Me.clone(e.modelMatrix,r),e._createVertexArray=!0,n!==SH.SCENE3D&&n!==SH.SCENE2D&&n!==SH.COLUMBUS_VIEW||Fle(e,i,i.length,t,r,!0)):n===SH.MORPHING?Fle(e,i,i.length,t,r,!0):n!==SH.SCENE2D&&n!==SH.COLUMBUS_VIEW||Fle(e,o,e._billboardsToUpdateIndex,t,r,!1)}function kle(e,t,n){let i=1;e._allSizedInMeters&&0===e._maxPixelOffset||(i=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight));let o=i*e._maxScale*e._maxSize*2;e._allHorizontalCenter&&e._allVerticalCenter&&(o*=.5);const r=i*e._maxPixelOffset+e._maxEyeOffset;n.radius+=o+r}function Ule(e,t){const n="uniform sampler2D billboard_texture; \nvarying vec2 v_textureCoordinates; \nvoid main() \n{ \n    gl_FragColor = texture2D(billboard_texture, v_textureCoordinates); \n} \n",i=t.createViewportQuadCommand(n,{uniformMap:{billboard_texture:function(){return e._textureAtlas.texture}}});return i.pass=hF.OVERLAY,i}const Vle=[];ile.prototype.update=function(e){if(rle(this),!this.show)return;let t=this._billboards,n=t.length;const i=e.context;this._instanced=i.instancedArrays,ele=this._instanced?nle:tle,ale=this._instanced?cle:sle;let o=this._textureAtlas;if(!Object(r["a"])(o)){o=this._textureAtlas=new Lce({context:i});for(let e=0;e<n;++e)t[e]._loadImage()}const a=o.textureCoordinates;if(0===a.length)return;zle(this,e),t=this._billboards,n=t.length;const s=this._billboardsToUpdate,c=this._billboardsToUpdateIndex,l=this._propertiesChanged,u=o.guid,h=this._createVertexArray||this._textureAtlasGUID!==u;let d;this._textureAtlasGUID=u;const f=e.passes,p=f.pick;if(h||!p&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let e=0;e<Zce;++e)l[e]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=ule(i,n,this._buffersUsage,this._instanced,this._batchTable,this._sdf),d=this._vaf.writers;for(let t=0;t<n;++t){const n=this._billboards[t];n._dirty=!1,Ble(this,e,a,d,n)}this._vaf.commit(ale(i))}this._billboardsToUpdateIndex=0}else if(c>0){const t=Vle;t.length=0,(l[Nce]||l[Gce]||l[Uce])&&t.push(dle),(l[Vce]||l[Bce]||l[zce]||l[kce]||l[Mce])&&(t.push(xle),this._instanced&&t.push(Dle)),(l[Vce]||l[Wce]||l[Yce])&&(t.push(Sle),t.push(Ile)),(l[Vce]||l[Hce])&&t.push(Ile),l[Fce]&&t.push(Dle),l[qce]&&t.push(Ple),l[Xce]&&t.push(jle),(l[Kce]||l[$ce]||l[Vce]||l[Nce])&&t.push(Rle),(l[Vce]||l[Nce])&&t.push(Lle),l[Qce]&&t.push(Nle);const o=t.length;if(d=this._vaf.writers,c/n>.1){for(let n=0;n<c;++n){const i=s[n];i._dirty=!1;for(let n=0;n<o;++n)t[n](this,e,a,d,i)}this._vaf.commit(ale(i))}else{for(let n=0;n<c;++n){const i=s[n];i._dirty=!1;for(let n=0;n<o;++n)t[n](this,e,a,d,i);this._instanced?this._vaf.subCommit(i._index,1):this._vaf.subCommit(4*i._index,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(c>1.5*n&&(s.length=n),!Object(r["a"])(this._vaf)||!Object(r["a"])(this._vaf.va))return;let m;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,Tt.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let _=Me.IDENTITY;e.mode===SH.SCENE3D?(_=this.modelMatrix,m=Tt.clone(this._baseVolumeWC,this._boundingVolume)):m=Tt.clone(this._baseVolume2D,this._boundingVolume),kle(this,e,m);const g=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,g){this._blendOption===Tce.OPAQUE||this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=UF.fromCache({depthTest:{enabled:!0,func:Ys.LESS},depthMask:!0}):this._rsOpaque=void 0;const e=this._blendOption===Tce.TRANSLUCENT;this._blendOption===Tce.TRANSLUCENT||this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=UF.fromCache({depthTest:{enabled:!0,func:e?Ys.LEQUAL:Ys.LESS},depthMask:e,blending:UN.ALPHA_BLEND}):this._rsTranslucent=void 0}let b,y,v,O,A;this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==e.minimumDisableDepthTestDistance;const w=YN.maximumVertexTextureImageUnits>0;if(g||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){b=Jse,y=$se,A=[],Object(r["a"])(this._batchTable)&&(A.push("VECTOR_TILE"),b=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(b),y=this._batchTable.getFragmentShaderCallback(!1,void 0)(y)),v=new EV({defines:A,sources:[b]}),this._instanced&&v.defines.push("INSTANCED"),this._shaderRotation&&v.defines.push("ROTATION"),this._shaderAlignedAxis&&v.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&v.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&v.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&v.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&v.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&v.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(w?v.defines.push("VERTEX_DEPTH_CHECK"):v.defines.push("FRAGMENT_DEPTH_CHECK"));const e=1-Ece.CUTOFF;this._sdf&&v.defines.push("SDF");const t=Object(r["a"])(this._batchTable)?"VECTOR_TILE":"";this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT&&(O=new EV({defines:["OPAQUE",t],sources:[y]}),this._shaderClampToGround&&(w?O.defines.push("VERTEX_DEPTH_CHECK"):O.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(O.defines.push("SDF"),O.defines.push(`SDF_EDGE ${e}`)),this._sp=Nz.replaceCache({context:i,shaderProgram:this._sp,vertexShaderSource:v,fragmentShaderSource:O,attributeLocations:ele}),O=new EV({defines:["TRANSLUCENT",t],sources:[y]}),this._shaderClampToGround&&(w?O.defines.push("VERTEX_DEPTH_CHECK"):O.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(O.defines.push("SDF"),O.defines.push(`SDF_EDGE ${e}`)),this._spTranslucent=Nz.replaceCache({context:i,shaderProgram:this._spTranslucent,vertexShaderSource:v,fragmentShaderSource:O,attributeLocations:ele})),this._blendOption===Tce.OPAQUE&&(O=new EV({defines:[t],sources:[y]}),this._shaderClampToGround&&(w?O.defines.push("VERTEX_DEPTH_CHECK"):O.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(O.defines.push("SDF"),O.defines.push(`SDF_EDGE ${e}`)),this._sp=Nz.replaceCache({context:i,shaderProgram:this._sp,vertexShaderSource:v,fragmentShaderSource:O,attributeLocations:ele})),this._blendOption===Tce.TRANSLUCENT&&(O=new EV({defines:[t],sources:[y]}),this._shaderClampToGround&&(w?O.defines.push("VERTEX_DEPTH_CHECK"):O.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(O.defines.push("SDF"),O.defines.push(`SDF_EDGE ${e}`)),this._spTranslucent=Nz.replaceCache({context:i,shaderProgram:this._spTranslucent,vertexShaderSource:v,fragmentShaderSource:O,attributeLocations:ele})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}const T=e.commandList;if(f.render||f.pick){const t=this._colorCommands,i=this._blendOption===Tce.OPAQUE,o=this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT,a=this._vaf.va,s=a.length;let c,l=this._uniforms;Object(r["a"])(this._batchTable)?(l=this._batchTable.getUniformMapCallback()(l),c=this._batchTable.getPickId()):c="v_pickColor",t.length=s;const u=o?2*s:s;for(let e=0;e<u;++e){let s=t[e];Object(r["a"])(s)||(s=t[e]=new lF);const u=i||o&&e%2===0;s.pass=u||!o?hF.OPAQUE:hF.TRANSLUCENT,s.owner=this;const h=o?Math.floor(e/2):e;s.boundingVolume=m,s.modelMatrix=_,s.count=a[h].indicesCount,s.shaderProgram=u?this._sp:this._spTranslucent,s.uniformMap=l,s.vertexArray=a[h].va,s.renderState=u?this._rsOpaque:this._rsTranslucent,s.debugShowBoundingVolume=this.debugShowBoundingVolume,s.pickId=c,this._instanced&&(s.count=6,s.instanceCount=n),T.push(s)}this.debugShowTextureAtlas&&(Object(r["a"])(this.debugCommand)||(this.debugCommand=Ule(this,e.context)),T.push(this.debugCommand))}},ile.prototype.isDestroyed=function(){return!1},ile.prototype.destroy=function(){return Object(r["a"])(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),ole(this._billboards),Wc(this)};var Hle=ile;function Gle(e,t,n,i,o){return function(){const r=document.createElement("canvas"),a=o+2*i;r.height=r.width=a;const s=r.getContext("2d");return s.clearRect(0,0,a,a),0!==i&&(s.beginPath(),s.arc(a/2,a/2,a/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=n,s.fill(),e<1&&(s.save(),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle="black",s.fill(),s.restore())),s.beginPath(),s.arc(a/2,a/2,o/2,0,2*Math.PI,!0),s.closePath(),s.fillStyle=t,s.fill(),r}}var Wle=Gle;function qle(e,t,n,i,o){this._content=e,this._billboard=n,this._label=i,this._polyline=o,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),Xle(this)}const Yle=new I;function Xle(e){const t=e._billboard;if(Object(r["a"])(e._billboardImage)&&e._billboardImage!==t.image)return void(t.image=e._billboardImage);if(Object(r["a"])(e._billboardImage))return;const n=Object(o["a"])(e._color,qle.defaultColor),i=Object(o["a"])(e._pointOutlineColor,qle.defaultPointOutlineColor),a=Object(o["a"])(e._pointOutlineWidth,qle.defaultPointOutlineWidth),s=Object(o["a"])(e._pointSize,qle.defaultPointSize),c=e._billboardColor,l=e._billboardOutlineColor,u=e._billboardOutlineWidth,h=e._billboardSize;if(Dm.equals(n,c)&&Dm.equals(i,l)&&a===u&&s===h)return;e._billboardColor=Dm.clone(n,e._billboardColor),e._billboardOutlineColor=Dm.clone(i,e._billboardOutlineColor),e._billboardOutlineWidth=a,e._billboardSize=s;const d=n.alpha,f=n.toCssColorString(),p=i.toCssColorString(),m=JSON.stringify([f,s,p,a]);t.setImage(m,Wle(d,f,p,a,s))}Object.defineProperties(qle.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=Dm.clone(e,this._color),Xle(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,Xle(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=Dm.clone(e,this._pointOutlineColor),Xle(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,Xle(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){Object(r["a"])(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){const t=Object(o["a"])(this._heightOffset,0),n=this._content.tileset.ellipsoid,i=n.cartesianToCartographic(this._billboard.position,Yle);i.height=i.height-t+e;const r=n.cartographicToCartesian(i);this._billboard.position=r,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],r],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=Dm.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){const t=this._billboardImage!==e;this._billboardImage=e,t&&Xle(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),qle.defaultColor=Dm.WHITE,qle.defaultPointOutlineColor=Dm.BLACK,qle.defaultPointOutlineWidth=0,qle.defaultPointSize=8,qle.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},qle.prototype.getPropertyNames=function(e){return IL("Cesium3DTilePointFeature.getPropertyNames","Cesium3DTilePointFeature.getPropertyNames is deprecated in CesiumJS 1.95, and will be removed in 1.98. Use Cesium3DTilePointFeature.getPropertyIds instead"),this._content.batchTable.getPropertyIds(this._batchId,e)},qle.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)},qle.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},qle.prototype.getPropertyInherited=function(e){return qK.getPropertyInherited(this._content,this._batchId,e)},qle.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},qle.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},qle.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},qle.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var Kle=qle,$le=n("dda6"),Jle=n.n($le);const Qle={FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2};var Zle=Object.freeze(Qle);const eue={};let tue=0;const nue=256,iue=new Dm(.165,.165,.165,.8),oue=new Gt(7,5),rue=Object.freeze({LTR:0,RTL:1,WEAK:2,BRACKETS:3});function aue(e){e._rebindAllGlyphs||e._repositionAllGlyphs||e._labelCollection._labelsToUpdate.push(e),e._rebindAllGlyphs=!0}function sue(e){e._rebindAllGlyphs||e._repositionAllGlyphs||e._labelCollection._labelsToUpdate.push(e),e._repositionAllGlyphs=!0}function cue(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function lue(e){let t=eue[e._font];if(!Object(r["a"])(t)){const n=document.createElement("div");n.style.position="absolute",n.style.opacity=0,n.style.font=e._font,document.body.appendChild(n);let i=parseFloat(cue(n,"line-height"));isNaN(i)&&(i=void 0),t={family:cue(n,"font-family"),size:cue(n,"font-size").replace("px",""),style:cue(n,"font-style"),weight:cue(n,"font-weight"),lineHeight:i},document.body.removeChild(n),tue<nue&&(eue[e._font]=t,tue++)}e._fontFamily=t.family,e._fontSize=t.size,e._fontStyle=t.style,e._fontWeight=t.weight,e._lineHeight=t.lineHeight}function uue(e,t){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),Object(r["a"])(e.disableDepthTestDistance)&&e.disableDepthTestDistance<0)throw new a["a"]("disableDepthTestDistance must be greater than 0.0.");let n=e.translucencyByDistance,i=e.pixelOffsetScaleByDistance,s=e.scaleByDistance,c=e.distanceDisplayCondition;if(Object(r["a"])(n)){if(n.far<=n.near)throw new a["a"]("translucencyByDistance.far must be greater than translucencyByDistance.near.");n=xE.clone(n)}if(Object(r["a"])(i)){if(i.far<=i.near)throw new a["a"]("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");i=xE.clone(i)}if(Object(r["a"])(s)){if(s.far<=s.near)throw new a["a"]("scaleByDistance.far must be greater than scaleByDistance.near.");s=xE.clone(s)}if(Object(r["a"])(c)){if(c.far<=c.near)throw new a["a"]("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");c=Sv.clone(c)}this._renderedText=void 0,this._text=void 0,this._show=Object(o["a"])(e.show,!0),this._font=Object(o["a"])(e.font,"30px sans-serif"),this._fillColor=Dm.clone(Object(o["a"])(e.fillColor,Dm.WHITE)),this._outlineColor=Dm.clone(Object(o["a"])(e.outlineColor,Dm.BLACK)),this._outlineWidth=Object(o["a"])(e.outlineWidth,1),this._showBackground=Object(o["a"])(e.showBackground,!1),this._backgroundColor=Dm.clone(Object(o["a"])(e.backgroundColor,iue)),this._backgroundPadding=Gt.clone(Object(o["a"])(e.backgroundPadding,oue)),this._style=Object(o["a"])(e.style,Zle.FILL),this._verticalOrigin=Object(o["a"])(e.verticalOrigin,nN.BASELINE),this._horizontalOrigin=Object(o["a"])(e.horizontalOrigin,eN.LEFT),this._pixelOffset=Gt.clone(Object(o["a"])(e.pixelOffset,Gt.ZERO)),this._eyeOffset=g.clone(Object(o["a"])(e.eyeOffset,g.ZERO)),this._position=g.clone(Object(o["a"])(e.position,g.ZERO)),this._scale=Object(o["a"])(e.scale,1),this._id=e.id,this._translucencyByDistance=n,this._pixelOffsetScaleByDistance=i,this._scaleByDistance=s,this._heightReference=Object(o["a"])(e.heightReference,QM.NONE),this._distanceDisplayCondition=c,this._disableDepthTestDistance=e.disableDepthTestDistance,this._labelCollection=t,this._glyphs=[],this._backgroundBillboard=void 0,this._batchIndex=void 0,this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0,this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=void 0,this._clusterShow=!0,this.text=Object(o["a"])(e.text,""),this._relativeSize=1,lue(this),this._updateClamping()}function hue(e,t){const n=/[a-zA-Z0-9]/,i=/[()[\]{}<>]/,o=[];let r="",a=rue.LTR,s="";const c=e.length;for(let l=0;l<c;++l){const c=e.charAt(l);s=t.test(c)?rue.RTL:n.test(c)?rue.LTR:i.test(c)?rue.BRACKETS:rue.WEAK,0===l&&(a=s),a===s&&s!==rue.BRACKETS?r+=c:(""!==r&&o.push({Type:a,Word:r}),a=s,r=c)}return o.push({Type:s,Word:r}),o}function due(e){return e.split("").reverse().join("")}function fue(e,t,n){return e.slice(0,t)+n+e.slice(t)}function pue(e){switch(e){case"(":return")";case")":return"(";case"[":return"]";case"]":return"[";case"{":return"}";case"}":return"{";case"<":return">";case">":return"<"}}Object.defineProperties(uue.prototype,{show:{get:function(){return this._show},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(this._show!==e){this._show=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i].billboard;Object(r["a"])(n)&&(n.show=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.show=e)}}},position:{get:function(){return this._position},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._position;if(!g.equals(t,e)){g.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t].billboard;Object(r["a"])(i)&&(i.position=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.position=e),this._updateClamping()}}},heightReference:{get:function(){return this._heightReference},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(e!==this._heightReference){this._heightReference=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i].billboard;Object(r["a"])(n)&&(n.heightReference=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.heightReference=e),sue(this),this._updateClamping()}}},text:{get:function(){return this._text},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(this._text!==e){this._text=e;const t=e.replace(/\u00ad/g,"");this._renderedText=uue.enableRightToLeftDetection?bue(t):t,aue(this)}}},font:{get:function(){return this._font},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._font!==e&&(this._font=e,aue(this),lue(this))}},fillColor:{get:function(){return this._fillColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._fillColor;Dm.equals(t,e)||(Dm.clone(e,t),aue(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._outlineColor;Dm.equals(t,e)||(Dm.clone(e,t),aue(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._outlineWidth!==e&&(this._outlineWidth=e,aue(this))}},showBackground:{get:function(){return this._showBackground},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._showBackground!==e&&(this._showBackground=e,aue(this))}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._backgroundColor;if(!Dm.equals(t,e)){Dm.clone(e,t);const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.color=t)}}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._backgroundPadding;Gt.equals(t,e)||(Gt.clone(e,t),sue(this))}},style:{get:function(){return this._style},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._style!==e&&(this._style=e,aue(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._pixelOffset;if(!Gt.equals(t,e)){Gt.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t];Object(r["a"])(i.billboard)&&(i.billboard.pixelOffset=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.pixelOffset=e)}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");const t=this._translucencyByDistance;if(!xE.equals(t,e)){this._translucencyByDistance=xE.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t];Object(r["a"])(i.billboard)&&(i.billboard.translucencyByDistance=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.translucencyByDistance=e)}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");const t=this._pixelOffsetScaleByDistance;if(!xE.equals(t,e)){this._pixelOffsetScaleByDistance=xE.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t];Object(r["a"])(i.billboard)&&(i.billboard.pixelOffsetScaleByDistance=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.pixelOffsetScaleByDistance=e)}}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");const t=this._scaleByDistance;if(!xE.equals(t,e)){this._scaleByDistance=xE.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t];Object(r["a"])(i.billboard)&&(i.billboard.scaleByDistance=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.scaleByDistance=e)}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._eyeOffset;if(!g.equals(t,e)){g.clone(e,t);const n=this._glyphs;for(let t=0,o=n.length;t<o;t++){const i=n[t];Object(r["a"])(i.billboard)&&(i.billboard.eyeOffset=e)}const i=this._backgroundBillboard;Object(r["a"])(i)&&(i.eyeOffset=e)}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._horizontalOrigin!==e&&(this._horizontalOrigin=e,sue(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(this._verticalOrigin!==e){this._verticalOrigin=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.verticalOrigin=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.verticalOrigin=e),sue(this)}}},scale:{get:function(){return this._scale},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(this._scale!==e){this._scale=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.scale=e*this._relativeSize)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.scale=e*this._relativeSize),sue(this)}}},totalScale:{get:function(){return this._scale*this._relativeSize}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far must be greater than near");if(!Sv.equals(e,this._distanceDisplayCondition)){this._distanceDisplayCondition=Sv.clone(e,this._distanceDisplayCondition);const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.distanceDisplayCondition=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.distanceDisplayCondition=e)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(this._disableDepthTestDistance!==e){if(Object(r["a"])(e)&&e<0)throw new a["a"]("disableDepthTestDistance must be greater than 0.0.");this._disableDepthTestDistance=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.disableDepthTestDistance=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.disableDepthTestDistance=e)}}},id:{get:function(){return this._id},set:function(e){if(this._id!==e){this._id=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.id=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.id=e)}}},pickId:{get:function(){if(0!==this._glyphs.length&&Object(r["a"])(this._glyphs[0].billboard))return this._glyphs[0].billboard.pickId}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=g.clone(e,this._actualClampedPosition);const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard._clampedPosition=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n._clampedPosition=e)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){if(this._clusterShow!==e){this._clusterShow=e;const t=this._glyphs;for(let i=0,o=t.length;i<o;i++){const n=t[i];Object(r["a"])(n.billboard)&&(n.billboard.clusterShow=e)}const n=this._backgroundBillboard;Object(r["a"])(n)&&(n.clusterShow=e)}}}}),uue.prototype._updateClamping=function(){Ace._updateClamping(this._labelCollection,this)},uue.prototype.computeScreenSpacePosition=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");Object(r["a"])(t)||(t=new Gt);const n=this._labelCollection,i=n.modelMatrix,o=Object(r["a"])(this._actualClampedPosition)?this._actualClampedPosition:this._position,s=Ace._computeScreenSpacePosition(i,o,this._eyeOffset,this._pixelOffset,e,t);return s},uue.getScreenSpaceBoundingBox=function(e,t,n){let i=0,o=0,a=0,s=0;const c=e.totalScale,l=e._backgroundBillboard;if(Object(r["a"])(l))i=t.x+l._translate.x,o=t.y-l._translate.y,a=l.width*c,s=l.height*c,e.verticalOrigin===nN.BOTTOM||e.verticalOrigin===nN.BASELINE?o-=s:e.verticalOrigin===nN.CENTER&&(o-=.5*s);else{i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;let n=0,l=0;const u=e._glyphs,h=u.length;for(let a=0;a<h;++a){const s=u[a],h=s.billboard;if(!Object(r["a"])(h))continue;const d=t.x+h._translate.x;let f=t.y-h._translate.y;const p=s.dimensions.width*c,m=s.dimensions.height*c;e.verticalOrigin===nN.BOTTOM||e.verticalOrigin===nN.BASELINE?f-=m:e.verticalOrigin===nN.CENTER&&(f-=.5*m),e._verticalOrigin===nN.TOP?f+=Ece.PADDING*c:e._verticalOrigin!==nN.BOTTOM&&e._verticalOrigin!==nN.BASELINE||(f-=Ece.PADDING*c),i=Math.min(i,d),o=Math.min(o,f),n=Math.max(n,d+p),l=Math.max(l,f+m)}a=n-i,s=l-o}return Object(r["a"])(n)||(n=new Au),n.x=i,n.y=o,n.width=a,n.height=s,n},uue.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&this._show===e._show&&this._scale===e._scale&&this._outlineWidth===e._outlineWidth&&this._showBackground===e._showBackground&&this._style===e._style&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&this._renderedText===e._renderedText&&this._font===e._font&&g.equals(this._position,e._position)&&Dm.equals(this._fillColor,e._fillColor)&&Dm.equals(this._outlineColor,e._outlineColor)&&Dm.equals(this._backgroundColor,e._backgroundColor)&&Gt.equals(this._backgroundPadding,e._backgroundPadding)&&Gt.equals(this._pixelOffset,e._pixelOffset)&&g.equals(this._eyeOffset,e._eyeOffset)&&xE.equals(this._translucencyByDistance,e._translucencyByDistance)&&xE.equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&xE.equals(this._scaleByDistance,e._scaleByDistance)&&Sv.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._id===e._id},uue.prototype.isDestroyed=function(){return!1},uue.enableRightToLeftDetection=!1;const mue="א-ת",_ue="؀-ۿݐ-ݿࢠ-ࣿ",gue=new RegExp(`[${mue}${_ue}]`);function bue(e){const t=e.split("\n");let n="";for(let i=0;i<t.length;i++){const e=t[i],o=gue.test(e.charAt(0)),r=hue(e,gue);let a=0,s="";for(let t=0;t<r.length;++t){const e=r[t],n=e.Type===rue.BRACKETS?pue(e.Word):due(e.Word);o?e.Type===rue.RTL?(s=n+s,a=0):e.Type===rue.LTR?(s=fue(s,a,e.Word),a+=e.Word.length):e.Type!==rue.WEAK&&e.Type!==rue.BRACKETS||(e.Type===rue.WEAK&&r[t-1].Type===rue.BRACKETS?s=n+s:r[t-1].Type===rue.RTL?(s=n+s,a=0):r.length>t+1?r[t+1].Type===rue.RTL?(s=n+s,a=0):(s=fue(s,a,e.Word),a+=e.Word.length):s=fue(s,0,n)):e.Type===rue.RTL?s=fue(s,a,n):e.Type===rue.LTR?(s+=e.Word,a=s.length):e.Type!==rue.WEAK&&e.Type!==rue.BRACKETS||(t>0&&r[t-1].Type===rue.RTL?r.length>t+1?r[t+1].Type===rue.RTL?s=fue(s,a,n):(s+=e.Word,a=s.length):s+=e.Word:(s+=e.Word,a=s.length))}n+=s,i<t.length-1&&(n+="\n")}return n}var yue=uue,vue=n("c097"),Oue=n.n(vue);function Aue(){this.textureInfo=void 0,this.dimensions=void 0,this.billboard=void 0}function wue(e,t,n){this.labelCollection=e,this.index=t,this.dimensions=n}const Tue=1.2,Cue="ID_WHITE_PIXEL",Eue=new Gt(4,4),xue=new Au(1,1,1,1);function Sue(e){const t=document.createElement("canvas");t.width=Eue.x,t.height=Eue.y;const n=t.getContext("2d");n.fillStyle="#fff",n.fillRect(0,0,t.width,t.height),e.addImage(Cue,t)}const Iue={};function Due(e,t,n,i,o,r,a){return Iue.font=t,Iue.fillColor=n,Iue.strokeColor=i,Iue.strokeWidth=o,Iue.padding=Ece.PADDING,a===nN.CENTER?Iue.textBaseline="middle":a===nN.TOP?Iue.textBaseline="top":Iue.textBaseline="bottom",Iue.fill=r===Zle.FILL||r===Zle.FILL_AND_OUTLINE,Iue.stroke=r===Zle.OUTLINE||r===Zle.FILL_AND_OUTLINE,Iue.backgroundColor=Dm.BLACK,nx(e,Iue)}function Pue(e,t){t.textureInfo=void 0,t.dimensions=void 0;const n=t.billboard;Object(r["a"])(n)&&(n.show=!1,n.image=void 0,Object(r["a"])(n._removeCallbackFunc)&&(n._removeCallbackFunc(),n._removeCallbackFunc=void 0),e._spareBillboards.push(n),t.billboard=void 0)}function jue(e,t,n,i){i.index=e.addImageSync(t,n)}const Rue=new Oue.a;function Lue(e,t){const n=t._renderedText,i=Rue.splitGraphemes(n),o=i.length,a=t._glyphs,s=a.length;let c,l,u;if(t._relativeSize=t._fontSize/Ece.FONT_SIZE,o<s)for(l=o;l<s;++l)Pue(e,a[l]);a.length=o;const h=t._showBackground&&n.split("\n").join("").length>0;let d=t._backgroundBillboard;const f=e._backgroundBillboardCollection;h?(Object(r["a"])(d)||(d=f.add({collection:e,image:Cue,imageSubRegion:xue}),t._backgroundBillboard=d),d.color=t._backgroundColor,d.show=t._show,d.position=t._position,d.eyeOffset=t._eyeOffset,d.pixelOffset=t._pixelOffset,d.horizontalOrigin=eN.LEFT,d.verticalOrigin=t._verticalOrigin,d.heightReference=t._heightReference,d.scale=t.totalScale,d.pickPrimitive=t,d.id=t._id,d.translucencyByDistance=t._translucencyByDistance,d.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,d.scaleByDistance=t._scaleByDistance,d.distanceDisplayCondition=t._distanceDisplayCondition,d.disableDepthTestDistance=t._disableDepthTestDistance):Object(r["a"])(d)&&(f.remove(d),t._backgroundBillboard=d=void 0);const p=e._glyphTextureCache;for(u=0;u<o;++u){const n=i[u],o=t._verticalOrigin,s=JSON.stringify([n,t._fontFamily,t._fontStyle,t._fontWeight,+o]);let l=p[s];if(!Object(r["a"])(l)){const i=`${t._fontStyle} ${t._fontWeight} ${Ece.FONT_SIZE}px ${t._fontFamily}`,r=Due(n,i,Dm.WHITE,Dm.WHITE,0,Zle.FILL,o);if(l=new wue(e,-1,r.dimensions),p[s]=l,r.width>0&&r.height>0){const t=Jle()(r,{cutoff:Ece.CUTOFF,radius:Ece.RADIUS}),i=r.getContext("2d"),o=r.width,a=r.height,c=i.getImageData(0,0,o,a);for(let e=0;e<o;e++)for(let n=0;n<a;n++){const i=n*o+e,r=255*t[i],a=4*i;c.data[a+0]=r,c.data[a+1]=r,c.data[a+2]=r,c.data[a+3]=r}i.putImageData(c,0,0)," "!==n&&jue(e._textureAtlas,s,r,l)}}if(c=a[u],Object(r["a"])(c)?-1===l.index?Pue(e,c):Object(r["a"])(c.textureInfo)&&(c.textureInfo=void 0):(c=new Aue,a[u]=c),c.textureInfo=l,c.dimensions=l.dimensions,-1!==l.index){let n=c.billboard;const i=e._spareBillboards;Object(r["a"])(n)||(i.length>0?n=i.pop():(n=e._billboardCollection.add({collection:e}),n._labelDimensions=new Gt,n._labelTranslate=new Gt),c.billboard=n),n.show=t._show,n.position=t._position,n.eyeOffset=t._eyeOffset,n.pixelOffset=t._pixelOffset,n.horizontalOrigin=eN.LEFT,n.verticalOrigin=t._verticalOrigin,n.heightReference=t._heightReference,n.scale=t.totalScale,n.pickPrimitive=t,n.id=t._id,n.image=s,n.translucencyByDistance=t._translucencyByDistance,n.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,n.scaleByDistance=t._scaleByDistance,n.distanceDisplayCondition=t._distanceDisplayCondition,n.disableDepthTestDistance=t._disableDepthTestDistance,n._batchIndex=t._batchIndex,n.outlineColor=t.outlineColor,t.style===Zle.FILL_AND_OUTLINE?(n.color=t._fillColor,n.outlineWidth=t.outlineWidth):t.style===Zle.FILL?(n.color=t._fillColor,n.outlineWidth=0):t.style===Zle.OUTLINE&&(n.color=Dm.TRANSPARENT,n.outlineWidth=t.outlineWidth)}}t._repositionAllGlyphs=!0}function Mue(e,t,n){return t===eN.CENTER?-e/2:t===eN.RIGHT?-(e+n.x):n.x}const Nue=new Gt,Bue=new Gt;function Fue(e){const t=e._glyphs,n=e._renderedText;let i,o,a=0,s=0;const c=[];let l,u=Number.NEGATIVE_INFINITY,h=0,d=1;const f=t.length,p=e._backgroundBillboard,m=Gt.clone(Object(r["a"])(p)?e._backgroundPadding:Gt.ZERO,Bue);for(m.x/=e._relativeSize,m.y/=e._relativeSize,l=0;l<f;++l)"\n"===n.charAt(l)?(c.push(a),++d,a=0):(i=t[l],o=i.dimensions,h=Math.max(h,o.height-o.descent),u=Math.max(u,o.descent),a+=o.width-o.minx,l<f-1&&(a+=t[l+1].dimensions.minx),s=Math.max(s,a));c.push(a);const _=h+u,g=e.totalScale,b=e._horizontalOrigin,y=e._verticalOrigin;let v=0,O=c[v],A=Mue(O,b,m);const w=(Object(r["a"])(e._lineHeight)?e._lineHeight:Tue*e._fontSize)/e._relativeSize,T=w*(d-1);let C=s,E=_+T;Object(r["a"])(p)&&(C+=2*m.x,E+=2*m.y,p._labelHorizontalOrigin=b),Nue.x=A*g,Nue.y=0;let x=!0,S=0;for(l=0;l<f;++l)if("\n"===n.charAt(l))++v,S+=w,O=c[v],A=Mue(O,b,m),Nue.x=A*g,x=!0;else if(i=t[l],o=i.dimensions,y===nN.TOP?(Nue.y=o.height-h-m.y,Nue.y+=Ece.PADDING):y===nN.CENTER?Nue.y=(T+o.height-h)/2:y===nN.BASELINE?(Nue.y=T,Nue.y-=Ece.PADDING):(Nue.y=T+u+m.y,Nue.y-=Ece.PADDING),Nue.y=(Nue.y-o.descent-S)*g,x&&(Nue.x-=Ece.PADDING*g,x=!1),Object(r["a"])(i.billboard)&&(i.billboard._setTranslate(Nue),i.billboard._labelDimensions.x=C,i.billboard._labelDimensions.y=E,i.billboard._labelHorizontalOrigin=b),l<f-1){const e=t[l+1];Nue.x+=(o.width-o.minx+e.dimensions.minx)*g}if(Object(r["a"])(p)&&n.split("\n").join("").length>0&&(A=b===eN.CENTER?-s/2-m.x:b===eN.RIGHT?-(s+2*m.x):0,Nue.x=A*g,y===nN.TOP?Nue.y=_-h-u:y===nN.CENTER?Nue.y=(_-h)/2-u:y===nN.BASELINE?Nue.y=-m.y-u:Nue.y=0,Nue.y=Nue.y*g,p.width=C,p.height=E,p._setTranslate(Nue),p._labelTranslate=Gt.clone(Nue,p._labelTranslate)),e.heightReference===QM.CLAMP_TO_GROUND)for(l=0;l<f;++l){i=t[l];const e=i.billboard;Object(r["a"])(e)&&(e._labelTranslate=Gt.clone(Nue,e._labelTranslate))}}function zue(e,t){const n=t._glyphs;for(let i=0,o=n.length;i<o;++i)Pue(e,n[i]);Object(r["a"])(t._backgroundBillboard)&&(e._backgroundBillboardCollection.remove(t._backgroundBillboard),t._backgroundBillboard=void 0),t._labelCollection=void 0,Object(r["a"])(t._removeCallbackFunc)&&t._removeCallbackFunc(),Wc(t)}function kue(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._scene=e.scene,this._batchTable=e.batchTable,this._textureAtlas=void 0,this._backgroundTextureAtlas=void 0,this._backgroundBillboardCollection=new Hle({scene:this._scene}),this._backgroundBillboardCollection.destroyTextureAtlas=!1,this._billboardCollection=new Hle({scene:this._scene,batchTable:this._batchTable}),this._billboardCollection.destroyTextureAtlas=!1,this._billboardCollection._sdf=!0,this._spareBillboards=[],this._glyphTextureCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._highlightColor=Dm.clone(Dm.WHITE),this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.blendOption=Object(o["a"])(e.blendOption,Tce.OPAQUE_AND_TRANSLUCENT)}Object.defineProperties(kue.prototype,{length:{get:function(){return this._labels.length}}}),kue.prototype.add=function(e){const t=new yue(e,this);return this._labels.push(t),this._labelsToUpdate.push(t),t},kue.prototype.remove=function(e){if(Object(r["a"])(e)&&e._labelCollection===this){const t=this._labels.indexOf(e);if(-1!==t)return this._labels.splice(t,1),zue(this,e),!0}return!1},kue.prototype.removeAll=function(){const e=this._labels;for(let t=0,n=e.length;t<n;++t)zue(this,e[t]);e.length=0},kue.prototype.contains=function(e){return Object(r["a"])(e)&&e._labelCollection===this},kue.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return this._labels[e]},kue.prototype.update=function(e){if(!this.show)return;const t=this._billboardCollection,n=this._backgroundBillboardCollection;t.modelMatrix=this.modelMatrix,t.debugShowBoundingVolume=this.debugShowBoundingVolume,n.modelMatrix=this.modelMatrix,n.debugShowBoundingVolume=this.debugShowBoundingVolume;const i=e.context;Object(r["a"])(this._textureAtlas)||(this._textureAtlas=new Lce({context:i}),t.textureAtlas=this._textureAtlas),Object(r["a"])(this._backgroundTextureAtlas)||(this._backgroundTextureAtlas=new Lce({context:i,initialSize:Eue}),n.textureAtlas=this._backgroundTextureAtlas,Sue(this._backgroundTextureAtlas));const o=this._labelsToUpdate.length;for(let r=0;r<o;++r){const e=this._labelsToUpdate[r];if(e.isDestroyed())continue;const t=e._glyphs.length;e._rebindAllGlyphs&&(Lue(this,e),e._rebindAllGlyphs=!1),e._repositionAllGlyphs&&(Fue(e),e._repositionAllGlyphs=!1);const n=e._glyphs.length-t;this._totalGlyphCount+=n}const a=n.length>0?Tce.TRANSLUCENT:this.blendOption;t.blendOption=a,n.blendOption=a,t._highlightColor=this._highlightColor,n._highlightColor=this._highlightColor,this._labelsToUpdate.length=0,n.update(e),t.update(e)},kue.prototype.isDestroyed=function(){return!1},kue.prototype.destroy=function(){return this.removeAll(),this._billboardCollection=this._billboardCollection.destroy(),this._textureAtlas=this._textureAtlas&&this._textureAtlas.destroy(),this._backgroundBillboardCollection=this._backgroundBillboardCollection.destroy(),this._backgroundTextureAtlas=this._backgroundTextureAtlas&&this._backgroundTextureAtlas.destroy(),Wc(this)};var Uue=kue,Vue="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 position2DHigh;\nattribute vec3 position2DLow;\nattribute vec3 prevPosition3DHigh;\nattribute vec3 prevPosition3DLow;\nattribute vec3 prevPosition2DHigh;\nattribute vec3 prevPosition2DLow;\nattribute vec3 nextPosition3DHigh;\nattribute vec3 nextPosition3DLow;\nattribute vec3 nextPosition2DHigh;\nattribute vec3 nextPosition2DLow;\nattribute vec4 texCoordExpandAndBatchIndex;\n\nvarying vec2  v_st;\nvarying float v_width;\nvarying vec4 v_pickColor;\nvarying float v_polylineAngle;\n\nvoid main()\n{\n    float texCoord = texCoordExpandAndBatchIndex.x;\n    float expandDir = texCoordExpandAndBatchIndex.y;\n    bool usePrev = texCoordExpandAndBatchIndex.z < 0.0;\n    float batchTableIndex = texCoordExpandAndBatchIndex.w;\n\n    vec2 widthAndShow = batchTable_getWidthAndShow(batchTableIndex);\n    float width = widthAndShow.x + 0.5;\n    float show = widthAndShow.y;\n\n    if (width < 1.0)\n    {\n        show = 0.0;\n    }\n\n    vec4 pickColor = batchTable_getPickColor(batchTableIndex);\n\n    vec4 p, prev, next;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz);\n        prev = czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz);\n        next = czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy);\n        prev = czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy);\n        next = czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye(position2DHigh.zxy, position2DLow.zxy),\n                czm_translateRelativeToEye(position3DHigh.xyz, position3DLow.xyz),\n                czm_morphTime);\n        prev = czm_columbusViewMorph(\n                czm_translateRelativeToEye(prevPosition2DHigh.zxy, prevPosition2DLow.zxy),\n                czm_translateRelativeToEye(prevPosition3DHigh.xyz, prevPosition3DLow.xyz),\n                czm_morphTime);\n        next = czm_columbusViewMorph(\n                czm_translateRelativeToEye(nextPosition2DHigh.zxy, nextPosition2DLow.zxy),\n                czm_translateRelativeToEye(nextPosition3DHigh.xyz, nextPosition3DLow.xyz),\n                czm_morphTime);\n    }\n\n    #ifdef DISTANCE_DISPLAY_CONDITION\n        vec3 centerHigh = batchTable_getCenterHigh(batchTableIndex);\n        vec4 centerLowAndRadius = batchTable_getCenterLowAndRadius(batchTableIndex);\n        vec3 centerLow = centerLowAndRadius.xyz;\n        float radius = centerLowAndRadius.w;\n        vec2 distanceDisplayCondition = batchTable_getDistanceDisplayCondition(batchTableIndex);\n\n        float lengthSq;\n        if (czm_sceneMode == czm_sceneMode2D)\n        {\n            lengthSq = czm_eyeHeight2D.y;\n        }\n        else\n        {\n            vec4 center = czm_translateRelativeToEye(centerHigh.xyz, centerLow.xyz);\n            lengthSq = max(0.0, dot(center.xyz, center.xyz) - radius * radius);\n        }\n\n        float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x;\n        float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y;\n        if (lengthSq < nearSq || lengthSq > farSq)\n        {\n            show = 0.0;\n        }\n    #endif\n\n    float polylineAngle;\n    vec4 positionWC = getPolylineWindowCoordinates(p, prev, next, expandDir, width, usePrev, polylineAngle);\n    gl_Position = czm_viewportOrthographic * positionWC * show;\n\n    v_st.s = texCoord;\n    v_st.t = czm_writeNonPerspective(clamp(expandDir, 0.0, 1.0), gl_Position.w);\n\n    v_width = width;\n    v_pickColor = pickColor;\n    v_polylineAngle = polylineAngle;\n}\n";function Hue(e,t){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._show=Object(o["a"])(e.show,!0),this._width=Object(o["a"])(e.width,1),this._loop=Object(o["a"])(e.loop,!1),this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,Object(r["a"])(this._material)||(this._material=XB.fromType(XB.ColorType,{color:new Dm(1,1,1,1)}));let n,i=e.positions;Object(r["a"])(i)||(i=[]),this._positions=i,this._actualPositions=zm(i,g.equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=i.slice()),this._actualPositions.push(g.clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id,Object(r["a"])(t)&&(n=Me.clone(t.modelMatrix)),this._modelMatrix=n,this._segments=ib.wrapLongitude(this._actualPositions,n),this._actualLength=void 0,this._propertiesChanged=new Uint32Array($ue),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=Tt.fromPoints(this._actualPositions),this._boundingVolumeWC=Tt.transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new Tt}const Gue=Hue.POSITION_INDEX=0,Wue=Hue.SHOW_INDEX=1,que=Hue.WIDTH_INDEX=2,Yue=Hue.MATERIAL_INDEX=3,Xue=Hue.POSITION_SIZE_INDEX=4,Kue=Hue.DISTANCE_DISPLAY_CONDITION=5,$ue=Hue.NUMBER_OF_PROPERTIES=6;function Jue(e,t){++e._propertiesChanged[t];const n=e._polylineCollection;Object(r["a"])(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(Hue.prototype,{show:{get:function(){return this._show},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");e!==this._show&&(this._show=e,Jue(this,Wue))}},positions:{get:function(){return this._positions},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");let t=zm(e,g.equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(g.clone(t[0]))),this._actualPositions.length===t.length&&this._actualPositions.length===this._length||Jue(this,Xue),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=Tt.fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=Tt.transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),Jue(this,Gue),this.update()}},material:{get:function(){return this._material},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("material is required.");this._material!==e&&(this._material=e,Jue(this,Yue))}},width:{get:function(){return this._width},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._width;e!==t&&(this._width=e,Jue(this,que))}},loop:{get:function(){return this._loop},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(e!==this._loop){let t=this._actualPositions;e?t.length>2&&!g.equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(g.clone(t[0]))):t.length>2&&g.equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,Jue(this,Xue)}}},id:{get:function(){return this._id},set:function(e){this._id=e,Object(r["a"])(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!Object(r["a"])(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");Sv.equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=Sv.clone(e,this._distanceDisplayCondition),Jue(this,Kue))}}}),Hue.prototype.update=function(){let e=Me.IDENTITY;Object(r["a"])(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);const t=this._segments.positions.length,n=this._segments.lengths,i=this._propertiesChanged[Gue]>0||this._propertiesChanged[Xue]>0;if(Me.equals(e,this._modelMatrix)&&!i||(this._segments=ib.wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=Tt.transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=Me.clone(e,this._modelMatrix),this._segments.positions.length!==t)Jue(this,Xue);else{const e=n.length;for(let t=0;t<e;++t)if(n[t]!==this._segments.lengths[t]){Jue(this,Xue);break}}},Hue.prototype.getPickId=function(e){return Object(r["a"])(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},Hue.prototype._clean=function(){this._dirty=!1;const e=this._propertiesChanged;for(let t=0;t<$ue-1;++t)e[t]=0},Hue.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0};var Que=Hue;const Zue=Que.SHOW_INDEX,ehe=Que.WIDTH_INDEX,the=Que.POSITION_INDEX,nhe=Que.MATERIAL_INDEX,ihe=Que.POSITION_SIZE_INDEX,ohe=Que.DISTANCE_DISPLAY_CONDITION,rhe=Que.NUMBER_OF_PROPERTIES,ahe={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function she(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=Me.clone(Me.IDENTITY),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(rhe),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:LV.STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=Dm.clone(Dm.WHITE);const t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}function che(e,t){Object(r["a"])(e._batchTable)&&e._batchTable.destroy();const n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:Ks.UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:Ks.FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:Ks.FLOAT,componentsPerAttribute:2}];e._batchTable=new lH(t,n,e._polylines.length)}Object.defineProperties(she.prototype,{length:{get:function(){return whe(this),this._polylines.length}}}),she.prototype.add=function(e){const t=new Que(e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t},she.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,Object(r["a"])(e._bucket)){const t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1},she.prototype.removeAll=function(){The(this),Ehe(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},she.prototype.contains=function(e){return Object(r["a"])(e)&&e._polylineCollection===this},she.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return whe(this),this._polylines[e]};const lhe=new Bd,uhe=new be,hhe=new Gt;she.prototype.update=function(e){if(whe(this),0===this._polylines.length||!this.show)return;Ahe(this,e);const t=e.context,n=e.mapProjection;let i,o=this._propertiesChanged;if(this._createBatchTable){if(0===YN.maximumVertexTextureImageUnits)throw new ye["a"]("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");che(this,t),this._createBatchTable=!1}if(this._createVertexArray||mhe(this))ghe(this,t,n);else if(this._polylinesUpdated){const a=this._polylinesToUpdate;if(this._mode!==SH.SCENE3D){const e=a.length;for(let t=0;t<e;++t)i=a[t],i.update()}if(o[ihe]||o[nhe])ghe(this,t,n);else{const t=a.length,s=this._polylineBuckets;for(let c=0;c<t;++c){i=a[c],o=i._propertiesChanged;const t=i._bucket;let l=0;for(const e in s)if(s.hasOwnProperty(e)){if(s[e]===t){o[the]&&t.writeUpdate(l,i,this._positionBuffer,n);break}l+=s[e].lengthOfPositions}if((o[Zue]||o[ehe])&&this._batchTable.setBatchedAttribute(i._index,0,new Gt(i._width,i._show)),this._batchTable.attributes.length>2){if(o[the]||o[ihe]){const t=e.mode===SH.SCENE2D?i._boundingVolume2D:i._boundingVolumeWC,n=Bd.fromCartesian(t.center,lhe),o=be.fromElements(n.low.x,n.low.y,n.low.z,t.radius,uhe);this._batchTable.setBatchedAttribute(i._index,2,n.high),this._batchTable.setBatchedAttribute(i._index,3,o)}if(o[ohe]){const e=hhe;e.x=0,e.y=Number.MAX_VALUE;const t=i.distanceDisplayCondition;Object(r["a"])(t)&&(e.x=t.near,e.y=t.far),this._batchTable.setBatchedAttribute(i._index,4,e)}}i._clean()}}a.length=0,this._polylinesUpdated=!1}o=this._propertiesChanged;for(let r=0;r<rhe;++r)o[r]=0;let a=Me.IDENTITY;e.mode===SH.SCENE3D&&(a=this.modelMatrix);const s=e.passes,c=0!==e.morphTime;if(Object(r["a"])(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===c||(this._opaqueRS=UF.fromCache({depthMask:c,depthTest:{enabled:c}})),Object(r["a"])(this._translucentRS)&&this._translucentRS.depthTest.enabled===c||(this._translucentRS=UF.fromCache({blending:UN.ALPHA_BLEND,depthMask:!c,depthTest:{enabled:c}})),this._batchTable.update(e),s.render||s.pick){const t=this._colorCommands;phe(this,e,t,a)}};const dhe=new Tt,fhe=new Tt;function phe(e,t,n,i){const o=t.context,a=t.commandList,s=n.length;let c=0,l=!0;const u=e._vertexArrays,h=e.debugShowBoundingVolume,d=e._batchTable,f=d.getUniformMapCallback(),p=u.length;for(let m=0;m<p;++m){const d=u[m],p=d.buckets,_=p.length;for(let u=0;u<_;++u){const m=p[u];let _=m.offset;const g=m.bucket.shaderProgram,b=m.bucket.polylines,y=b.length;let v,O,A,w,T=0;for(let u=0;u<y;++u){const p=b[u],y=vhe(p._material);if(y!==v){if(Object(r["a"])(v)&&T>0){const t=O.isTranslucent();c>=s?(A=new lF({owner:e}),n.push(A)):A=n[c],++c,w=Object(qE["a"])(f(O._uniforms),e._uniformMap),A.boundingVolume=Tt.clone(dhe,A.boundingVolume),A.modelMatrix=i,A.shaderProgram=g,A.vertexArray=d.va,A.renderState=t?e._translucentRS:e._opaqueRS,A.pass=t?hF.TRANSLUCENT:hF.OPAQUE,A.debugShowBoundingVolume=h,A.pickId="v_pickColor",A.uniformMap=w,A.count=T,A.offset=_,_+=T,T=0,l=!0,a.push(A)}O=p._material,O.update(o),v=y}const C=p._locatorBuckets,E=C.length;for(let e=0;e<E;++e){const t=C[e];t.locator===m&&(T+=t.count)}let x;t.mode===SH.SCENE3D?x=p._boundingVolumeWC:t.mode===SH.COLUMBUS_VIEW?x=p._boundingVolume2D:t.mode===SH.SCENE2D?Object(r["a"])(p._boundingVolume2D)&&(x=Tt.clone(p._boundingVolume2D,fhe),x.center.x=0):Object(r["a"])(p._boundingVolumeWC)&&Object(r["a"])(p._boundingVolume2D)&&(x=Tt.union(p._boundingVolumeWC,p._boundingVolume2D,fhe)),l?(l=!1,Tt.clone(x,dhe)):Tt.union(x,dhe,dhe)}Object(r["a"])(v)&&T>0&&(c>=s?(A=new lF({owner:e}),n.push(A)):A=n[c],++c,w=Object(qE["a"])(f(O._uniforms),e._uniformMap),A.boundingVolume=Tt.clone(dhe,A.boundingVolume),A.modelMatrix=i,A.shaderProgram=g,A.vertexArray=d.va,A.renderState=O.isTranslucent()?e._translucentRS:e._opaqueRS,A.pass=O.isTranslucent()?hF.TRANSLUCENT:hF.OPAQUE,A.debugShowBoundingVolume=h,A.pickId="v_pickColor",A.uniformMap=w,A.count=T,A.offset=_,l=!0,a.push(A)),v=void 0}}n.length=c}function mhe(e){let t=!1;const n=e._propertiesChanged,i=e._positionBufferUsage;return n[the]?i.bufferUsage!==LV.STREAM_DRAW?(t=!0,i.bufferUsage=LV.STREAM_DRAW,i.frameCount=100):i.frameCount=100:i.bufferUsage!==LV.STATIC_DRAW&&(0===i.frameCount?(t=!0,i.bufferUsage=LV.STATIC_DRAW):i.frameCount--),t}she.prototype.isDestroyed=function(){return!1},she.prototype.destroy=function(){return Che(this),The(this),Ehe(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),Wc(this)};const _he=[0,0,0];function ghe(e,t,n){e._createVertexArray=!1,The(e),Che(e),Ohe(e);const i=[[]];let o=i[0];const a=e._batchTable,c=e._useHighlightColor,l=[0];let u=0;const h=[[]];let d=0;const f=e._polylineBuckets;let p,m;for(p in f)f.hasOwnProperty(p)&&(m=f[p],m.updateShader(t,a,c),d+=m.lengthOfPositions);if(d>0){const c=e._mode,_=new Float32Array(6*d*3),g=new Float32Array(4*d);let b,y=0,v=0,O=0;for(p in f)if(f.hasOwnProperty(p)){m=f[p],m.write(_,g,y,v,O,a,t,n),c===SH.MORPHING&&(Object(r["a"])(b)||(b=new Float32Array(6*d*3)),m.writeForMorph(b,y));const e=m.lengthOfPositions;y+=6*e*3,v+=4*e,O+=4*e,u=m.updateIndices(i,l,h,u)}const A=e._positionBufferUsage.bufferUsage,w=LV.STATIC_DRAW;let T;e._positionBuffer=NV.createVertexBuffer({context:t,typedArray:_,usage:A}),Object(r["a"])(b)&&(T=NV.createVertexBuffer({context:t,typedArray:b,usage:A})),e._texCoordExpandAndBatchIndexBuffer=NV.createVertexBuffer({context:t,typedArray:g,usage:w});const C=3*Float32Array.BYTES_PER_ELEMENT,E=4*Float32Array.BYTES_PER_ELEMENT;let x=0;const S=i.length;for(let n=0;n<S;++n)if(o=i[n],o.length>0){const i=new Uint16Array(o),r=NV.createIndexBuffer({context:t,typedArray:i,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT});x+=l[n];const a=6*(n*(C*s["a"].SIXTY_FOUR_KILOBYTES)-x*C),u=C+a,d=C+u,f=C+d,p=C+f,m=C+p,_=n*(E*s["a"].SIXTY_FOUR_KILOBYTES)-x*E,g=[{index:ahe.position3DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:a,strideInBytes:6*C},{index:ahe.position3DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:u,strideInBytes:6*C},{index:ahe.position2DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:a,strideInBytes:6*C},{index:ahe.position2DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:u,strideInBytes:6*C},{index:ahe.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:d,strideInBytes:6*C},{index:ahe.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:f,strideInBytes:6*C},{index:ahe.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:d,strideInBytes:6*C},{index:ahe.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:f,strideInBytes:6*C},{index:ahe.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:p,strideInBytes:6*C},{index:ahe.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:m,strideInBytes:6*C},{index:ahe.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:p,strideInBytes:6*C},{index:ahe.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,offsetInBytes:m,strideInBytes:6*C},{index:ahe.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:_}];let b,y,v,O;c===SH.SCENE3D?(y=e._positionBuffer,b="vertexBuffer",v=_he,O="value"):c===SH.SCENE2D||c===SH.COLUMBUS_VIEW?(y=_he,b="value",v=e._positionBuffer,O="vertexBuffer"):(y=T,b="vertexBuffer",v=e._positionBuffer,O="vertexBuffer"),g[0][b]=y,g[1][b]=y,g[2][O]=v,g[3][O]=v,g[4][b]=y,g[5][b]=y,g[6][O]=v,g[7][O]=v,g[8][b]=y,g[9][b]=y,g[10][O]=v,g[11][O]=v;const A=new WV({context:t,attributes:g,indexBuffer:r});e._vertexArrays.push({va:A,buckets:h[n]})}}}function bhe(e,t){return t instanceof lB?t.id:t}const yhe=[];function vhe(e){const t=XB._uniformList[e.type],n=t.length;yhe.length=2*n;let i=0;for(let o=0;o<n;++o){const n=t[o];yhe[i]=n,yhe[i+1]=e._uniforms[n](),i+=2}return`${e.type}:${JSON.stringify(yhe,bhe)}`}function Ohe(e){const t=e._mode,n=e._modelMatrix,i=e._polylineBuckets={},o=e._polylines,a=o.length;for(let s=0;s<a;++s){const e=o[s];if(e._actualPositions.length>1){e.update();const o=e.material;let a=i[o.type];Object(r["a"])(a)||(a=i[o.type]=new She(o,t,n)),a.addPolyline(e)}}}function Ahe(e,t){const n=t.mode;e._mode===n&&Me.equals(e._modelMatrix,e.modelMatrix)||(e._mode=n,e._modelMatrix=Me.clone(e.modelMatrix),e._createVertexArray=!0)}function whe(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;const t=[],n=[];let i,o=0;const r=e._polylines.length;for(let a=0;a<r;++a)i=e._polylines[a],i.isDestroyed||(i._index=o++,n.push(i),t.push(i));e._polylines=t,e._polylinesToUpdate=n}}function The(e){const t=e._polylines,n=t.length;for(let i=0;i<n;++i)if(!t[i].isDestroyed){const e=t[i]._bucket;Object(r["a"])(e)&&(e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy())}}function Che(e){const t=e._vertexArrays.length;for(let n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}function Ehe(e){const t=e._polylines,n=t.length;for(let i=0;i<n;++i)t[i].isDestroyed||t[i]._destroy()}function xhe(e,t,n){this.count=e,this.offset=t,this.bucket=n}function She(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}function Ihe(e){return g.dot(g.UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(ji.ORIGIN_ZX_PLANE)===G.INTERSECTING}she.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]},She.prototype.addPolyline=function(e){const t=this.polylines;t.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this},She.prototype.updateShader=function(e,t,n){if(Object(r["a"])(this.shaderProgram))return;const i=["DISTANCE_DISPLAY_CONDITION"];n&&i.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&i.push("POLYLINE_DASH"),Or.isInternetExplorer()||i.push("CLIP_POLYLINE");const o=new EV({defines:i,sources:["varying vec4 v_pickColor;\n",this.material.shaderSource,nq]}),a=t.getVertexShaderCallback()(Vue),s=new EV({defines:i,sources:[$W,a]});this.shaderProgram=Nz.fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:o,attributeLocations:ahe})},She.prototype.getPolylinePositionsLength=function(e){let t;if(this.mode===SH.SCENE3D||!Ihe(e))return t=e._actualPositions.length,4*t-4;let n=0;const i=e._segments.lengths;t=i.length;for(let o=0;o<t;++o)n+=4*i[o]-4;return n};const Dhe=new g,Phe=new g,jhe=new g,Rhe=new g,Lhe=new be,Mhe=new Gt;She.prototype.write=function(e,t,n,i,o,a,c,l){const u=this.mode,h=l.ellipsoid.maximumRadius*s["a"].PI,d=this.polylines,f=d.length;for(let s=0;s<f;++s){const i=d[s],f=i.width,p=i.show&&f>0,m=i._index,_=this.getSegments(i,l),b=_.positions,y=_.lengths,v=b.length,O=i.getPickId(c).color;let A,w=0,T=0;for(let r=0;r<v;++r){0===r?i._loop?A=b[v-2]:(A=Rhe,g.subtract(b[0],b[1],A),g.add(b[0],A,A)):A=b[r-1],g.clone(A,Phe),g.clone(b[r],Dhe),r===v-1?i._loop?A=b[1]:(A=Rhe,g.subtract(b[v-1],b[v-2],A),g.add(b[v-1],A,A)):A=b[r+1],g.clone(A,jhe);const a=y[w];r===T+a&&(T+=a,++w);const s=r-T===0,c=r===T+y[w]-1;u===SH.SCENE2D&&(Phe.z=0,Dhe.z=0,jhe.z=0),u!==SH.SCENE2D&&u!==SH.MORPHING||(s||c)&&h-Math.abs(Dhe.x)<1&&((Dhe.x<0&&Phe.x>0||Dhe.x>0&&Phe.x<0)&&g.clone(Dhe,Phe),(Dhe.x<0&&jhe.x>0||Dhe.x>0&&jhe.x<0)&&g.clone(Dhe,jhe));const l=s?2:0,d=c?2:4;for(let i=l;i<d;++i){Bd.writeElements(Dhe,e,n),Bd.writeElements(Phe,e,n+6),Bd.writeElements(jhe,e,n+12);const a=i-2<0?-1:1;t[o]=r/(v-1),t[o+1]=i%2*2-1,t[o+2]=a,t[o+3]=m,n+=18,o+=4}}const C=Lhe;C.x=Dm.floatToByte(O.red),C.y=Dm.floatToByte(O.green),C.z=Dm.floatToByte(O.blue),C.w=Dm.floatToByte(O.alpha);const E=Mhe;E.x=f,E.y=p?1:0;const x=u===SH.SCENE2D?i._boundingVolume2D:i._boundingVolumeWC,S=Bd.fromCartesian(x.center,lhe),I=S.high,D=be.fromElements(S.low.x,S.low.y,S.low.z,x.radius,uhe),P=hhe;P.x=0,P.y=Number.MAX_VALUE;const j=i.distanceDisplayCondition;Object(r["a"])(j)&&(P.x=j.near,P.y=j.far),a.setBatchedAttribute(m,0,E),a.setBatchedAttribute(m,1,C),a.attributes.length>2&&(a.setBatchedAttribute(m,2,I),a.setBatchedAttribute(m,3,D),a.setBatchedAttribute(m,4,P))}};const Nhe=new g,Bhe=new g,Fhe=new g,zhe=new g;She.prototype.writeForMorph=function(e,t){const n=this.modelMatrix,i=this.polylines,o=i.length;for(let r=0;r<o;++r){const o=i[r],a=o._segments.positions,s=o._segments.lengths,c=a.length;let l=0,u=0;for(let i=0;i<c;++i){let r;0===i?o._loop?r=a[c-2]:(r=zhe,g.subtract(a[0],a[1],r),g.add(a[0],r,r)):r=a[i-1],r=Me.multiplyByPoint(n,r,Bhe);const h=Me.multiplyByPoint(n,a[i],Nhe);let d;i===c-1?o._loop?d=a[1]:(d=zhe,g.subtract(a[c-1],a[c-2],d),g.add(a[c-1],d,d)):d=a[i+1],d=Me.multiplyByPoint(n,d,Fhe);const f=s[l];i===u+f&&(u+=f,++l);const p=i-u===0,m=i===u+s[l]-1,_=p?2:0,b=m?2:4;for(let n=_;n<b;++n)Bd.writeElements(h,e,t),Bd.writeElements(r,e,t+6),Bd.writeElements(d,e,t+12),t+=18}}};const khe=new Array(1);She.prototype.updateIndices=function(e,t,n,i){let o=n.length-1,r=new xhe(0,i,this);n[o].push(r);let a=0,c=e[e.length-1],l=0;c.length>0&&(l=c[c.length-1]+1);const u=this.polylines,h=u.length;for(let d=0;d<h;++d){const h=u[d];let f;if(h._locatorBuckets=[],this.mode===SH.SCENE3D){f=khe;const e=h._actualPositions.length;if(!(e>0))continue;f[0]=e}else f=h._segments.lengths;const p=f.length;if(p>0){let u=0;for(let d=0;d<p;++d){const p=f[d]-1;for(let d=0;d<p;++d)l+4>s["a"].SIXTY_FOUR_KILOBYTES&&(h._locatorBuckets.push({locator:r,count:u}),u=0,t.push(4),c=[],e.push(c),l=0,r.count=a,a=0,i=0,r=new xhe(0,0,this),n[++o]=[r]),c.push(l,l+2,l+1),c.push(l+1,l+2,l+3),u+=6,a+=6,i+=6,l+=4}h._locatorBuckets.push({locator:r,count:u}),l+4>s["a"].SIXTY_FOUR_KILOBYTES&&(t.push(0),c=[],e.push(c),l=0,r.count=a,i=0,a=0,r=new xhe(0,0,this),n[++o]=[r])}h._clean()}return r.count=a,i},She.prototype.getPolylineStartIndex=function(e){const t=this.polylines;let n=0;const i=t.length;for(let o=0;o<i;++o){const i=t[o];if(i===e)break;n+=i._actualLength}return n};const Uhe={positions:void 0,lengths:void 0},Vhe=new Array(1),Hhe=new g,Ghe=new I;let Whe;She.prototype.getSegments=function(e,t){let n=e._actualPositions;if(this.mode===SH.SCENE3D)return Vhe[0]=n.length,Uhe.positions=n,Uhe.lengths=Vhe,Uhe;Ihe(e)&&(n=e._segments.positions);const i=t.ellipsoid,o=[],r=this.modelMatrix,a=n.length;let s,c=Hhe;for(let l=0;l<a;++l)s=n[l],c=Me.multiplyByPoint(r,s,c),o.push(t.project(i.cartesianToCartographic(c,Ghe)));if(o.length>0){e._boundingVolume2D=Tt.fromPoints(o,e._boundingVolume2D);const t=e._boundingVolume2D.center;e._boundingVolume2D.center=new g(t.z,t.x,t.y)}return Uhe.positions=o,Uhe.lengths=e._segments.lengths,Uhe},She.prototype.writeUpdate=function(e,t,n,i){const o=this.mode,a=i.ellipsoid.maximumRadius*s["a"].PI;let c=t._actualLength;if(c){e+=this.getPolylineStartIndex(t);let s=Whe;const l=6*c*3;!Object(r["a"])(s)||s.length<l?s=Whe=new Float32Array(l):s.length>l&&(s=new Float32Array(s.buffer,0,l));const u=this.getSegments(t,i),h=u.positions,d=u.lengths;let f,p=0,m=0,_=0;c=h.length;for(let e=0;e<c;++e){0===e?t._loop?f=h[c-2]:(f=Rhe,g.subtract(h[0],h[1],f),g.add(h[0],f,f)):f=h[e-1],g.clone(f,Phe),g.clone(h[e],Dhe),e===c-1?t._loop?f=h[1]:(f=Rhe,g.subtract(h[c-1],h[c-2],f),g.add(h[c-1],f,f)):f=h[e+1],g.clone(f,jhe);const n=d[m];e===_+n&&(_+=n,++m);const i=e-_===0,r=e===_+d[m]-1;o===SH.SCENE2D&&(Phe.z=0,Dhe.z=0,jhe.z=0),o!==SH.SCENE2D&&o!==SH.MORPHING||(i||r)&&a-Math.abs(Dhe.x)<1&&((Dhe.x<0&&Phe.x>0||Dhe.x>0&&Phe.x<0)&&g.clone(Dhe,Phe),(Dhe.x<0&&jhe.x>0||Dhe.x>0&&jhe.x<0)&&g.clone(Dhe,jhe));const l=i?2:0,u=r?2:4;for(let e=l;e<u;++e)Bd.writeElements(Dhe,s,p),Bd.writeElements(Phe,s,p+6),Bd.writeElements(jhe,s,p+12),p+=18}n.copyFromArrayView(s,18*Float32Array.BYTES_PER_ELEMENT*e)}};var qhe=she;function Yhe(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=new Hle({batchTable:e.batchTable}),this._labelCollection=new Uue({batchTable:e.batchTable}),this._polylineCollection=new qhe,this._polylineCollection._useHighlightColor=!0,this._verticesPromise=void 0,this._packedBuffer=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=cde(this)}function Xhe(e,t){const n=e._rectangle,i=e._minHeight,o=e._maxHeight,r=2+Fe.packedLength+k.packedLength,a=new Float64Array(r);let s=0;return a[s++]=i,a[s++]=o,Fe.pack(n,a,s),s+=Fe.packedLength,k.pack(t,a,s),a}Object.defineProperties(Yhe.prototype,{pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){const e=this._billboardCollection.textureAtlas.texture.sizeInBytes,t=this._labelCollection._textureAtlas.texture.sizeInBytes;return e+t}},readyPromise:{get:function(){return this._readyPromise}}});const Khe=new il("createVectorTilePoints",5),$he=new g;function Jhe(e,t){let n;if(!Object(r["a"])(e._verticesPromise)){n=e._positions;let i=e._packedBuffer;Object(r["a"])(i)||(n=e._positions=n.slice(),e._batchIds=e._batchIds.slice(),i=e._packedBuffer=Xhe(e,t));const o=[n.buffer,i.buffer],a={positions:n.buffer,packedBuffer:i.buffer},s=e._verticesPromise=Khe.scheduleTask(a,o);if(!Object(r["a"])(s))return;return s.then((function(t){e._positions=new Float64Array(t.positions);const i=e._billboardCollection,o=e._labelCollection,r=e._polylineCollection;n=e._positions;const a=e._batchIds,s=n.length/3;for(let e=0;e<s;++e){const t=a[e],s=g.unpack(n,3*e,$he),c=i.add();c.position=s,c._batchIndex=t;const l=o.add();l.text=" ",l.position=s,l._batchIndex=t;const u=r.add();u.positions=[g.clone(s),g.clone(s)]}e._positions=void 0,e._packedBuffer=void 0,e._ready=!0}))}}function Qhe(e,t){const n=e._batchIds,i=n.length;for(let o=0;o<i;++o){const e=n[o],i=t[e];i.show=!0,i.pointSize=Kle.defaultPointSize,i.color=Kle.defaultColor,i.pointOutlineColor=Kle.defaultPointOutlineColor,i.pointOutlineWidth=Kle.defaultPointOutlineWidth,i.labelColor=Dm.WHITE,i.labelOutlineColor=Dm.WHITE,i.labelOutlineWidth=1,i.font="30px sans-serif",i.labelStyle=Zle.FILL,i.labelText=void 0,i.backgroundColor=new Dm(.165,.165,.165,.8),i.backgroundPadding=new Gt(7,5),i.backgroundEnabled=!1,i.scaleByDistance=void 0,i.translucencyByDistance=void 0,i.distanceDisplayCondition=void 0,i.heightOffset=0,i.anchorLineEnabled=!1,i.anchorLineColor=Dm.WHITE,i.image=void 0,i.disableDepthTestDistance=0,i.horizontalOrigin=eN.CENTER,i.verticalOrigin=nN.CENTER,i.labelHorizontalOrigin=eN.RIGHT,i.labelVerticalOrigin=nN.BASELINE}}Yhe.prototype.createFeatures=function(e,t){const n=this._billboardCollection,i=this._labelCollection,o=this._polylineCollection,r=this._batchIds,a=r.length;for(let s=0;s<a;++s){const a=r[s],c=n.get(s),l=i.get(s),u=o.get(s);t[a]=new Kle(e,a,c,l,u)}},Yhe.prototype.applyDebugSettings=function(e,t){e?(Dm.clone(t,this._billboardCollection._highlightColor),Dm.clone(t,this._labelCollection._highlightColor),Dm.clone(t,this._polylineCollection._highlightColor)):(Dm.clone(Dm.WHITE,this._billboardCollection._highlightColor),Dm.clone(Dm.WHITE,this._labelCollection._highlightColor),Dm.clone(Dm.WHITE,this._polylineCollection._highlightColor))};const Zhe=new Dm,ede=new Dm,tde=new Dm,nde=new Dm,ide=new Dm,ode=new Dm,rde=new xE,ade=new xE,sde=new Sv;function cde(e){return new Promise((function(t,n){e._update=function(e,i){const o=Jhe(e,i.mapProjection.ellipsoid);e._ready&&(e._polylineCollection.update(i),e._billboardCollection.update(i),e._labelCollection.update(i)),Object(r["a"])(o)&&o.then((function(){t()})).catch((function(e){n(e)}))}}))}Yhe.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void Qhe(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o],a=t[i];if(Object(r["a"])(e.show)&&(a.show=e.show.evaluate(a)),Object(r["a"])(e.pointSize)&&(a.pointSize=e.pointSize.evaluate(a)),Object(r["a"])(e.color)&&(a.color=e.color.evaluateColor(a,Zhe)),Object(r["a"])(e.pointOutlineColor)&&(a.pointOutlineColor=e.pointOutlineColor.evaluateColor(a,ede)),Object(r["a"])(e.pointOutlineWidth)&&(a.pointOutlineWidth=e.pointOutlineWidth.evaluate(a)),Object(r["a"])(e.labelColor)&&(a.labelColor=e.labelColor.evaluateColor(a,tde)),Object(r["a"])(e.labelOutlineColor)&&(a.labelOutlineColor=e.labelOutlineColor.evaluateColor(a,nde)),Object(r["a"])(e.labelOutlineWidth)&&(a.labelOutlineWidth=e.labelOutlineWidth.evaluate(a)),Object(r["a"])(e.font)&&(a.font=e.font.evaluate(a)),Object(r["a"])(e.labelStyle)&&(a.labelStyle=e.labelStyle.evaluate(a)),Object(r["a"])(e.labelText)?a.labelText=e.labelText.evaluate(a):a.labelText=void 0,Object(r["a"])(e.backgroundColor)&&(a.backgroundColor=e.backgroundColor.evaluateColor(a,ide)),Object(r["a"])(e.backgroundPadding)&&(a.backgroundPadding=e.backgroundPadding.evaluate(a)),Object(r["a"])(e.backgroundEnabled)&&(a.backgroundEnabled=e.backgroundEnabled.evaluate(a)),Object(r["a"])(e.scaleByDistance)){const t=e.scaleByDistance.evaluate(a);rde.near=t.x,rde.nearValue=t.y,rde.far=t.z,rde.farValue=t.w,a.scaleByDistance=rde}else a.scaleByDistance=void 0;if(Object(r["a"])(e.translucencyByDistance)){const t=e.translucencyByDistance.evaluate(a);ade.near=t.x,ade.nearValue=t.y,ade.far=t.z,ade.farValue=t.w,a.translucencyByDistance=ade}else a.translucencyByDistance=void 0;if(Object(r["a"])(e.distanceDisplayCondition)){const t=e.distanceDisplayCondition.evaluate(a);sde.near=t.x,sde.far=t.y,a.distanceDisplayCondition=sde}else a.distanceDisplayCondition=void 0;Object(r["a"])(e.heightOffset)&&(a.heightOffset=e.heightOffset.evaluate(a)),Object(r["a"])(e.anchorLineEnabled)&&(a.anchorLineEnabled=e.anchorLineEnabled.evaluate(a)),Object(r["a"])(e.anchorLineColor)&&(a.anchorLineColor=e.anchorLineColor.evaluateColor(a,ode)),Object(r["a"])(e.image)?a.image=e.image.evaluate(a):a.image=void 0,Object(r["a"])(e.disableDepthTestDistance)&&(a.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(a)),Object(r["a"])(e.horizontalOrigin)&&(a.horizontalOrigin=e.horizontalOrigin.evaluate(a)),Object(r["a"])(e.verticalOrigin)&&(a.verticalOrigin=e.verticalOrigin.evaluate(a)),Object(r["a"])(e.labelHorizontalOrigin)&&(a.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(a)),Object(r["a"])(e.labelVerticalOrigin)&&(a.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(a))}},Yhe.prototype.update=function(e){this._update(this,e)},Yhe.prototype.isDestroyed=function(){return!1},Yhe.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),Wc(this)};var lde=Yhe;function ude(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=Object(o["a"])(e.center,g.ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._update=function(e,t){},this._readyPromise=gde(this),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=DV.BOTH}function hde(e){const t=new Float64Array(3+g.packedLength+k.packedLength+Fe.packedLength);let n=0;return t[n++]=e._indices.BYTES_PER_ELEMENT,t[n++]=e._minimumHeight,t[n++]=e._maximumHeight,g.pack(e._center,t,n),n+=g.packedLength,k.pack(e._ellipsoid,t,n),n+=k.packedLength,Fe.pack(e._rectangle,t,n),t}function dde(e,t){let n=1;const i=t[n++],o=e._boundingVolumes=new Array(i);for(let s=0;s<i;++s)o[s]=Ws.unpack(t,n),n+=Ws.packedLength;const r=t[n++],a=e._batchedIndices=new Array(r);for(let s=0;s<r;++s){const e=Dm.unpack(t,n);n+=Dm.packedLength;const i=t[n++],o=t[n++],r=t[n++],c=new Array(r);for(let a=0;a<r;++a)c[a]=t[n++];a[s]=new HK({color:e,offset:i,count:o,batchIds:c})}}Object.defineProperties(ude.prototype,{trianglesLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise}}});const fde=new il("createVectorTilePolygons",5),pde=new Dm;function mde(e){if(!Object(r["a"])(e._primitive)&&!Object(r["a"])(e._verticesPromise)){let t=e._positions,n=e._counts,i=e._indexCounts,o=e._indices,a=e._transferrableBatchIds,s=e._batchTableColors,c=e._packedBuffer;if(!Object(r["a"])(s)){t=e._positions=e._positions.slice(),n=e._counts=e._counts.slice(),i=e._indexCounts=e._indexCounts.slice(),o=e._indices=e._indices.slice(),e._center=e._ellipsoid.cartographicToCartesian(Fe.center(e._rectangle)),a=e._transferrableBatchIds=new Uint32Array(e._batchIds),s=e._batchTableColors=new Uint32Array(a.length);const r=e._batchTable,l=s.length;for(let e=0;e<l;++e){const t=r.getColor(e,pde);s[e]=t.toRgba()}c=e._packedBuffer=hde(e)}const l=[t.buffer,n.buffer,i.buffer,o.buffer,a.buffer,s.buffer,c.buffer],u={packedBuffer:c.buffer,positions:t.buffer,counts:n.buffer,indexCounts:i.buffer,indices:o.buffer,batchIds:a.buffer,batchTableColors:s.buffer};let h=e._polygonMinimumHeights,d=e._polygonMaximumHeights;Object(r["a"])(h)&&Object(r["a"])(d)&&(h=h.slice(),d=d.slice(),l.push(h.buffer,d.buffer),u.minimumHeights=h,u.maximumHeights=d);const f=e._verticesPromise=fde.scheduleTask(u,l);if(!Object(r["a"])(f))return;return f.then((function(t){e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;const n=new Float64Array(t.packedBuffer),i=n[0];dde(e,n),e._indices=2===ll.getSizeInBytes(i)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),e._ready=!0}))}}function _de(e){e._ready&&!Object(r["a"])(e._primitive)&&(e._primitive=new CJ({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._verticesPromise=void 0)}function gde(e){return new Promise((function(t,n){e._update=function(e,i){const o=mde(e);e._ready&&(e._primitive.debugWireframe=e.debugWireframe,e._primitive.forceRebatch=e.forceRebatch,e._primitive.classificationType=e.classificationType,e._primitive.update(i)),Object(r["a"])(o)&&o.then((function(){_de(e),t(e)})).catch((function(e){n(e)}))}}))}ude.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},ude.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},ude.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},ude.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},ude.prototype.update=function(e){this._update(this,e)},ude.prototype.isDestroyed=function(){return!1},ude.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Wc(this)};var bde=ude,yde="attribute vec4 currentPosition;\nattribute vec4 previousPosition;\nattribute vec4 nextPosition;\nattribute vec2 expandAndWidth;\nattribute float a_batchId;\n\nuniform mat4 u_modifiedModelView;\n\nvoid main()\n{\n    float expandDir = expandAndWidth.x;\n    float width = abs(expandAndWidth.y) + 0.5;\n    bool usePrev = expandAndWidth.y < 0.0;\n\n    vec4 p = u_modifiedModelView * currentPosition;\n    vec4 prev = u_modifiedModelView * previousPosition;\n    vec4 next = u_modifiedModelView * nextPosition;\n\n    float angle;\n    vec4 positionWC = getPolylineWindowCoordinatesEC(p, prev, next, expandDir, width, usePrev, angle);\n    gl_Position = czm_viewportOrthographic * positionWC;\n}\n";function vde(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=Dm.clone(Dm.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._update=function(e,t){},this._readyPromise=Bde(this),this._verticesPromise=void 0}function Ode(e){const t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+Fe.packedLength+k.packedLength+g.packedLength,s=new Float64Array(a);let c=0;return s[c++]=n,s[c++]=i,Fe.pack(t,s,c),c+=Fe.packedLength,k.pack(o,s,c),c+=k.packedLength,g.pack(r,s,c),s}Object.defineProperties(vde.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise}}});const Ade=new il("createVectorTilePolylines",5),wde={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function Tde(e,t){if(!Object(r["a"])(e._va)&&!Object(r["a"])(e._verticesPromise)){let t=e._positions,n=e._widths,i=e._counts,o=e._transferrableBatchIds,a=e._packedBuffer;Object(r["a"])(a)||(t=e._positions=t.slice(),n=e._widths=n.slice(),i=e._counts=i.slice(),o=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=Ode(e));const s=[t.buffer,n.buffer,i.buffer,o.buffer,a.buffer],c={positions:t.buffer,widths:n.buffer,counts:i.buffer,batchIds:o.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=e._verticesPromise=Ade.scheduleTask(c,s);if(!Object(r["a"])(l))return;return l.then((function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._currentPositions=new Float32Array(t.currentPositions),e._previousPositions=new Float32Array(t.previousPositions),e._nextPositions=new Float32Array(t.nextPositions),e._expandAndWidth=new Float32Array(t.expandAndWidth),e._vertexBatchIds=new Uint16Array(t.batchIds);const n=t.indexDatatype;e._indices=n===ll.UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0}))}}function Cde(e,t){if(e._ready&&!Object(r["a"])(e._va)){const n=e._currentPositions,i=e._previousPositions,o=e._nextPositions,r=e._expandAndWidth,a=e._vertexBatchIds,s=e._indices;let c=i.byteLength+n.byteLength+o.byteLength;c+=r.byteLength+a.byteLength+s.byteLength,e._trianglesLength=s.length/3,e._geometryByteLength=c;const l=NV.createVertexBuffer({context:t,typedArray:i,usage:LV.STATIC_DRAW}),u=NV.createVertexBuffer({context:t,typedArray:n,usage:LV.STATIC_DRAW}),h=NV.createVertexBuffer({context:t,typedArray:o,usage:LV.STATIC_DRAW}),d=NV.createVertexBuffer({context:t,typedArray:r,usage:LV.STATIC_DRAW}),f=NV.createVertexBuffer({context:t,typedArray:a,usage:LV.STATIC_DRAW}),p=NV.createIndexBuffer({context:t,typedArray:s,usage:LV.STATIC_DRAW,indexDatatype:2===s.BYTES_PER_ELEMENT?ll.UNSIGNED_SHORT:ll.UNSIGNED_INT}),m=[{index:wde.previousPosition,vertexBuffer:l,componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{index:wde.currentPosition,vertexBuffer:u,componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{index:wde.nextPosition,vertexBuffer:h,componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{index:wde.expandAndWidth,vertexBuffer:d,componentDatatype:Ks.FLOAT,componentsPerAttribute:2},{index:wde.a_batchId,vertexBuffer:f,componentDatatype:Ks.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new WV({context:t,attributes:m,indexBuffer:p}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}const Ede=new Me,xde=new g;function Sde(e,t){Object(r["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return Me.clone(n,Ede),Me.multiplyByPoint(Ede,e._center,xde),Me.setTranslation(Ede,xde,Ede),Ede},u_highlightColor:function(){return e._highlightColor}})}function Ide(e){if(Object(r["a"])(e._rs))return;const t={enabled:!0,factor:-5,units:-5};e._rs=UF.fromCache({blending:UN.ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}const Dde="uniform vec4 u_highlightColor; \nvoid main()\n{\n    gl_FragColor = u_highlightColor;\n}\n";function Pde(e,t){if(Object(r["a"])(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(yde),o=n.getFragmentShaderCallback(!1,void 0,!1)(Dde),a=new EV({defines:["VECTOR_TILE",Or.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[$W,i]}),s=new EV({defines:["VECTOR_TILE"],sources:[o]});e._sp=Nz.fromCache({context:t,vertexShaderSource:a,fragmentShaderSource:s,attributeLocations:wde})}function jde(e,t){if(!Object(r["a"])(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new lF({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:hF.TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}function Rde(e,t){const n=e._batchIds,i=n.length;for(let o=0;o<i;++o){const e=n[o],i=t[e];i.show=!0,i.color=Dm.WHITE}}vde.getPolylinePositions=function(e,t){const n=e._batchIds,i=e._decodedPositions,o=e._decodedPositionOffsets;if(!Object(r["a"])(n)||!Object(r["a"])(i))return;let a,s;const c=n.length;let l=0,u=0;for(a=0;a<c;++a)n[a]===t&&(l+=o[a+1]-o[a]);if(0===l)return;const h=new Float64Array(3*l);for(a=0;a<c;++a)if(n[a]===t){const e=o[a],t=o[a+1]-e;for(s=0;s<t;++s){const t=3*(e+s);h[u++]=i[t],h[u++]=i[t+1],h[u++]=i[t+2]}}return h},vde.prototype.getPositions=function(e){return vde.getPolylinePositions(this,e)},vde.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new qK(e,i)}},vde.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const Lde=new Dm,Mde=Dm.WHITE,Nde=!0;function Bde(e){return new Promise((function(t,n){e._update=function(e,i){const o=i.context,a=Tde(e,o);if(Sde(e,o),Pde(e,o),Ide(e),e._ready){const t=i.passes;(t.render||t.pick)&&jde(e,i)}Object(r["a"])(a)&&a.then((function(){Cde(e,o),t()})).catch((function(e){n(e)}))}}))}vde.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void Rde(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o],a=t[i];a.color=Object(r["a"])(e.color)?e.color.evaluateColor(a,Lde):Mde,a.show=Object(r["a"])(e.show)?e.show.evaluate(a):Nde}},vde.prototype.update=function(e){this._update(this,e)},vde.prototype.isDestroyed=function(){return!1},vde.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Wc(this)};var Fde=vde,zde='attribute vec3 startEllipsoidNormal;\nattribute vec3 endEllipsoidNormal;\nattribute vec4 startPositionAndHeight;\nattribute vec4 endPositionAndHeight;\nattribute vec4 startFaceNormalAndVertexCorner;\nattribute vec4 endFaceNormalAndHalfWidth;\nattribute float a_batchId;\n\nuniform mat4 u_modifiedModelView;\nuniform vec2 u_minimumMaximumVectorHeights;\n\nvarying vec4 v_startPlaneEC;\nvarying vec4 v_endPlaneEC;\nvarying vec4 v_rightPlaneEC;\nvarying float v_halfWidth;\nvarying vec3 v_volumeUpEC;\n\nvoid main()\n{\n    // vertex corner IDs\n    //          3-----------7\n    //         /|   left   /|\n    //        / | 1       / |\n    //       2-----------6  5  end\n    //       | /         | /\n    // start |/  right   |/\n    //       0-----------4\n    //\n    float isEnd = floor(startFaceNormalAndVertexCorner.w * 0.251); // 0 for front, 1 for end\n    float isTop = floor(startFaceNormalAndVertexCorner.w * mix(0.51, 0.19, isEnd)); // 0 for bottom, 1 for top\n\n    vec3 forward = endPositionAndHeight.xyz - startPositionAndHeight.xyz;\n    vec3 right = normalize(cross(forward, startEllipsoidNormal));\n\n    vec4 position = vec4(startPositionAndHeight.xyz, 1.0);\n    position.xyz += forward * isEnd;\n\n    v_volumeUpEC = czm_normal * normalize(cross(right, forward));\n\n    // Push for volume height\n    float offset;\n    vec3 ellipsoidNormal = mix(startEllipsoidNormal, endEllipsoidNormal, isEnd);\n\n    // offset height to create volume\n    offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd);\n    offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset;\n    position.xyz += offset * ellipsoidNormal;\n\n    // move from RTC to EC\n    position = u_modifiedModelView * position;\n    right = czm_normal * right;\n\n    // Push for width in a direction that is in the start or end plane and in a plane with right\n    // N = normalEC ("right-facing" direction for push)\n    // R = right\n    // p = angle between N and R\n    // w = distance to push along R if R == N\n    // d = distance to push along N\n    //\n    //   N   R\n    //  {  p| }      * cos(p) = dot(N, R) = w / d\n    //  d  |  |w    * d = w / dot(N, R)\n    //    { | }\n    //       o---------- polyline segment ----\x3e\n    //\n    vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd);\n    scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd));\n    vec3 miterPushNormal = czm_normal * normalize(scratchNormal);\n\n    offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC\n    offset = offset / dot(miterPushNormal, right);\n    position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0)));\n\n    gl_Position = czm_depthClamp(czm_projection * position);\n\n    position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0);\n    vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz;\n    v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz));\n    v_rightPlaneEC = vec4(right, -dot(right, position.xyz));\n\n    position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0);\n    vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz;\n    v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz));\n    v_halfWidth = endFaceNormalAndHalfWidth.w;\n}\n',kde="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n\nvarying vec4 v_startPlaneEC;\nvarying vec4 v_endPlaneEC;\nvarying vec4 v_rightPlaneEC;\nvarying float v_halfWidth;\nvarying vec3 v_volumeUpEC;\n\nuniform vec4 u_highlightColor;\nvoid main()\n{\n    float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture2D(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw)));\n\n    // Discard for sky\n    if (logDepthOrDepth == 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth);\n    eyeCoordinate /= eyeCoordinate.w;\n\n    float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate);\n\n    // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction\n    halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC));\n\n    // Check distance of the eye coordinate against the right-facing plane\n    float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz);\n\n    // Check eye coordinate against the mitering planes\n    float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz);\n    float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz);\n\n    if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) {\n#ifdef DEBUG_SHOW_VOLUME\n        gl_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5);\n        return;\n#else // DEBUG_SHOW_VOLUME\n        discard;\n#endif // DEBUG_SHOW_VOLUME\n    }\n    gl_FragColor = u_highlightColor;\n\n    czm_writeDepthClamp();\n}\n";function Ude(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new Gt(rn._defaultMinTerrainHeight,rn._defaultMaxTerrainHeight),this._boundingVolume=Ws.fromRectangle(e.rectangle,rn._defaultMinTerrainHeight,rn._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=Dm.clone(Dm.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._update=function(e,t){},this._readyPromise=rfe(this),this._verticesPromise=void 0}function Vde(e,t,n){const i=rn.getMinimumMaximumHeights(t,n),o=i.minimumTerrainHeight,r=i.maximumTerrainHeight,a=e._minimumMaximumVectorHeights;a.x=o,a.y=r;const s=e._boundingVolume,c=e._rectangle;Ws.fromRectangle(c,o,r,n,s)}function Hde(e){const t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,a=2+Fe.packedLength+k.packedLength+g.packedLength,s=new Float64Array(a);let c=0;return s[c++]=n,s[c++]=i,Fe.pack(t,s,c),c+=Fe.packedLength,k.pack(o,s,c),c+=k.packedLength,g.pack(r,s,c),s}Object.defineProperties(Ude.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise}}});const Gde=new il("createVectorTileClampedPolylines"),Wde={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function qde(e,t){if(!Object(r["a"])(e._va)&&!Object(r["a"])(e._verticesPromise)){let t=e._positions,n=e._widths,i=e._counts,o=e._transferrableBatchIds,a=e._packedBuffer;Object(r["a"])(a)||(t=e._positions=t.slice(),n=e._widths=n.slice(),i=e._counts=i.slice(),o=e._transferrableBatchIds=e._batchIds.slice(),a=e._packedBuffer=Hde(e));const s=[t.buffer,n.buffer,i.buffer,o.buffer,a.buffer],c={positions:t.buffer,widths:n.buffer,counts:i.buffer,batchIds:o.buffer,packedBuffer:a.buffer,keepDecodedPositions:e._keepDecodedPositions},l=e._verticesPromise=Gde.scheduleTask(c,s);if(!Object(r["a"])(l))return;return l.then((function(t){e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(t.decodedPositions),e._decodedPositionOffsets=new Uint32Array(t.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(t.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(t.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(t.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(t.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(t.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(t.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds);const n=t.indexDatatype;e._indices=n===ll.UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0}))}}function Yde(e,t){if(e._ready&&!Object(r["a"])(e._va)){const n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,a=e._startFaceNormalAndVertexCornerIds,s=e._endFaceNormalAndHalfWidths,c=e._vertexBatchIds,l=e._indices;let u=n.byteLength+i.byteLength;u+=o.byteLength+r.byteLength,u+=a.byteLength+s.byteLength,u+=c.byteLength+l.byteLength,e._trianglesLength=l.length/3,e._geometryByteLength=u;const h=NV.createVertexBuffer({context:t,typedArray:n,usage:LV.STATIC_DRAW}),d=NV.createVertexBuffer({context:t,typedArray:i,usage:LV.STATIC_DRAW}),f=NV.createVertexBuffer({context:t,typedArray:o,usage:LV.STATIC_DRAW}),p=NV.createVertexBuffer({context:t,typedArray:r,usage:LV.STATIC_DRAW}),m=NV.createVertexBuffer({context:t,typedArray:a,usage:LV.STATIC_DRAW}),_=NV.createVertexBuffer({context:t,typedArray:s,usage:LV.STATIC_DRAW}),g=NV.createVertexBuffer({context:t,typedArray:c,usage:LV.STATIC_DRAW}),b=NV.createIndexBuffer({context:t,typedArray:l,usage:LV.STATIC_DRAW,indexDatatype:2===l.BYTES_PER_ELEMENT?ll.UNSIGNED_SHORT:ll.UNSIGNED_INT}),y=[{index:Wde.startEllipsoidNormal,vertexBuffer:h,componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{index:Wde.endEllipsoidNormal,vertexBuffer:d,componentDatatype:Ks.FLOAT,componentsPerAttribute:3},{index:Wde.startPositionAndHeight,vertexBuffer:f,componentDatatype:Ks.FLOAT,componentsPerAttribute:4},{index:Wde.endPositionAndHeight,vertexBuffer:p,componentDatatype:Ks.FLOAT,componentsPerAttribute:4},{index:Wde.startFaceNormalAndVertexCorner,vertexBuffer:m,componentDatatype:Ks.FLOAT,componentsPerAttribute:4},{index:Wde.endFaceNormalAndHalfWidth,vertexBuffer:_,componentDatatype:Ks.FLOAT,componentsPerAttribute:4},{index:Wde.a_batchId,vertexBuffer:g,componentDatatype:Ks.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new WV({context:t,attributes:y,indexBuffer:b}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}const Xde=new Me,Kde=new g;function $de(e,t){Object(r["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){const n=t.uniformState.view;return Me.clone(n,Xde),Me.multiplyByPoint(Xde,e._center,Kde),Me.setTranslation(Xde,Kde,Xde),Xde},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function Jde(e){return UF.fromCache({cull:{enabled:!0,face:HN.FRONT},blending:UN.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:oW.EQUAL,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},backFunction:oW.EQUAL,backOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK}})}function Qde(e){Object(r["a"])(e._rs)||(e._rs=Jde(!1),e._rs3DTiles=Jde(!0))}function Zde(e,t){if(Object(r["a"])(e._sp))return;const n=e._batchTable,i=n.getVertexShaderCallback(!1,"a_batchId",void 0)(zde),o=n.getFragmentShaderCallback(!1,void 0,!0)(kde),a=new EV({defines:["VECTOR_TILE",Or.isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[$W,i]}),s=new EV({defines:["VECTOR_TILE"],sources:[o]});e._sp=Nz.fromCache({context:t,vertexShaderSource:a,fragmentShaderSource:s,attributeLocations:Wde})}function efe(e,t){let n=e._command;if(!Object(r["a"])(e._command)){const t=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new lF({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:t,boundingVolume:e._boundingVolume,pass:hF.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});const i=lF.shallowClone(n,n.derivedCommands.tileset);i.renderState=e._rs3DTiles,i.pass=hF.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=i}const i=e._classificationType;i!==DV.TERRAIN&&i!==DV.BOTH||t.commandList.push(n),i!==DV.CESIUM_3D_TILE&&i!==DV.BOTH||t.commandList.push(n.derivedCommands.tileset)}function tfe(e,t){const n=e._batchIds,i=n.length;for(let o=0;o<i;++o){const e=n[o],i=t[e];i.show=!0,i.color=Dm.WHITE}}Ude.prototype.getPositions=function(e){return Fde.getPolylinePositions(this,e)},Ude.prototype.createFeatures=function(e,t){const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o];t[i]=new qK(e,i)}},Ude.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};const nfe=new Dm,ife=Dm.WHITE,ofe=!0;function rfe(e){return rn.initialize().then((function(){return Vde(e,e._rectangle,e._ellipsoid),new Promise((function(t,n){e._update=function(e,i){const o=i.context,a=qde(e,o);if($de(e,o),Zde(e,o),Qde(e),e._ready){const t=i.passes;(t.render||t.pick)&&efe(e,i)}Object(r["a"])(a)&&a.then((function(){Yde(e,o),t(e)})).catch((function(e){n(e)}))}}))}))}Ude.prototype.applyStyle=function(e,t){if(!Object(r["a"])(e))return void tfe(this,t);const n=this._batchIds,i=n.length;for(let o=0;o<i;++o){const i=n[o],a=t[i];a.color=Object(r["a"])(e.color)?e.color.evaluateColor(a,nfe):ife,a.show=Object(r["a"])(e.show)?e.show.evaluate(a):ofe}},Ude.prototype.update=function(e){this._update(this,e)},Ude.prototype.isDestroyed=function(){return!1},Ude.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Wc(this)};var afe=Ude;function sfe(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,ffe(this,i,o)}function cfe(e){return function(t,n){Object(r["a"])(e._polygons)&&e._polygons.updateCommands(t,n)}}function lfe(e,t){let n,i,a,s;const c=Object(o["a"])(e.POLYGONS_LENGTH,0),l=Object(o["a"])(e.POLYLINES_LENGTH,0),u=Object(o["a"])(e.POINTS_LENGTH,0);if(c>0&&Object(r["a"])(e.POLYGON_BATCH_IDS)){const i=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,i,c)}if(l>0&&Object(r["a"])(e.POLYLINE_BATCH_IDS)){const n=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,n,l)}if(u>0&&Object(r["a"])(e.POINT_BATCH_IDS)){const n=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,n,u)}const h=Object(r["a"])(n)||Object(r["a"])(i)||Object(r["a"])(a),d=c>0&&!Object(r["a"])(n)||l>0&&!Object(r["a"])(i)||u>0&&!Object(r["a"])(a);if(h&&d)throw new ye["a"]("If one group of batch ids is defined, then all batch ids must be defined.");const f=!Object(r["a"])(n)&&!Object(r["a"])(i)&&!Object(r["a"])(a);if(f){let e=0;if(!Object(r["a"])(n)&&c>0)for(n=new Uint16Array(c),s=0;s<c;++s)n[s]=e++;if(!Object(r["a"])(i)&&l>0)for(i=new Uint16Array(l),s=0;s<l;++s)i[s]=e++;if(!Object(r["a"])(a)&&u>0)for(a=new Uint16Array(u),s=0;s<u;++s)a[s]=e++}return{polygons:n,polylines:i,points:a}}Object.defineProperties(sfe.prototype,{featuresLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return Object(r["a"])(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return Object(r["a"])(this._polygons)&&(e+=this._polygons.trianglesLength),Object(r["a"])(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return Object(r["a"])(this._polygons)&&(e+=this._polygons.geometryByteLength),Object(r["a"])(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return Object(r["a"])(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},readyPromise:{get:function(){const e=Object(r["a"])(this._points)?this._points.readyPromise:void 0,t=Object(r["a"])(this._polygons)?this._polygons.readyPromise:void 0,n=Object(r["a"])(this._polylines)?this._polylines.readyPromise:void 0,i=this;return Promise.all([e,t,n]).then((function(){return i}))}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const ufe=Uint32Array.BYTES_PER_ELEMENT;function hfe(e){return new Fde(e)}function dfe(e){return new afe(e)}function ffe(e,t,n){n=Object(o["a"])(n,0);const i=new Uint8Array(t),a=new DataView(t);n+=ufe;const c=a.getUint32(n,!0);if(1!==c)throw new ye["a"](`Only Vector tile version 1 is supported.  Version ${c} is not.`);n+=ufe;const l=a.getUint32(n,!0);if(n+=ufe,0===l)return Promise.resolve(e);const u=a.getUint32(n,!0);if(n+=ufe,0===u)throw new ye["a"]("Feature table must have a byte length greater than zero");const h=a.getUint32(n,!0);n+=ufe;const d=a.getUint32(n,!0);n+=ufe;const f=a.getUint32(n,!0);n+=ufe;const p=a.getUint32(n,!0);n+=ufe;const m=a.getUint32(n,!0);n+=ufe;const _=a.getUint32(n,!0);n+=ufe;const b=a.getUint32(n,!0);n+=ufe;const y=Fh(i,n,u);n+=u;const v=new Uint8Array(t,n,h);let O,A;n+=h,d>0&&(O=Fh(i,n,d),n+=d,f>0&&(A=new Uint8Array(t,n,f),A=new Uint8Array(A),n+=f));const w=Object(o["a"])(y.POLYGONS_LENGTH,0),T=Object(o["a"])(y.POLYLINES_LENGTH,0),C=Object(o["a"])(y.POINTS_LENGTH,0),E=w+T+C,x=new UK(e,E,O,A,cfe(e));if(e._batchTable=x,0===E)return;const S=new A9(y,v),I=S.getGlobalProperty("REGION");if(!Object(r["a"])(I))throw new ye["a"]("Feature table global property: REGION must be defined");const D=Fe.unpack(I),P=I[4],j=I[5],R=e._tile.computedTransform;let L=S.getGlobalProperty("RTC_CENTER",Ks.FLOAT,3);Object(r["a"])(L)?(L=g.unpack(L),Me.multiplyByPoint(R,L,L)):(L=Fe.center(D),L.height=s["a"].lerp(P,j,.5),L=k.WGS84.cartographicToCartesian(L));const M=lfe(y,v);if(n+=(4-n%4)%4,w>0){S.featuresLength=w;const i=Object(o["a"])(S.getPropertyArray("POLYGON_COUNTS",Ks.UNSIGNED_INT,1),S.getPropertyArray("POLYGON_COUNT",Ks.UNSIGNED_INT,1));if(!Object(r["a"])(i))throw new ye["a"]("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const a=Object(o["a"])(S.getPropertyArray("POLYGON_INDEX_COUNTS",Ks.UNSIGNED_INT,1),S.getPropertyArray("POLYGON_INDEX_COUNT",Ks.UNSIGNED_INT,1));if(!Object(r["a"])(a))throw new ye["a"]("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");const s=i.reduce((function(e,t){return e+2*t}),0),c=a.reduce((function(e,t){return e+t}),0),l=new Uint32Array(t,n,c);n+=p;const u=new Uint16Array(t,n,s);let h,d;n+=m,Object(r["a"])(y.POLYGON_MINIMUM_HEIGHTS)&&Object(r["a"])(y.POLYGON_MAXIMUM_HEIGHTS)&&(h=S.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",Ks.FLOAT,1),d=S.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",Ks.FLOAT,1)),e._polygons=new bde({positions:u,counts:i,indexCounts:a,indices:l,minimumHeight:P,maximumHeight:j,polygonMinimumHeights:h,polygonMaximumHeights:d,center:L,rectangle:D,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:x,batchIds:M.polygons,modelMatrix:R})}if(T>0){S.featuresLength=T;const i=Object(o["a"])(S.getPropertyArray("POLYLINE_COUNTS",Ks.UNSIGNED_INT,1),S.getPropertyArray("POLYLINE_COUNT",Ks.UNSIGNED_INT,1));if(!Object(r["a"])(i))throw new ye["a"]("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");let a=S.getPropertyArray("POLYLINE_WIDTHS",Ks.UNSIGNED_SHORT,1);if(!Object(r["a"])(a)){a=new Uint16Array(T);for(let e=0;e<T;++e)a[e]=2}const s=i.reduce((function(e,t){return e+3*t}),0),c=new Uint16Array(t,n,s);n+=_;const l=e._tileset,u=l.examineVectorLinesFunction;if(Object(r["a"])(u)){const t=qL(new Uint16Array(c),D,P,j,k.WGS84);mfe(t,i,M.polylines,x,e.url,u)}let h=hfe;Object(r["a"])(l.classificationType)&&(h=dfe),e._polylines=h({positions:c,widths:a,counts:i,batchIds:M.polylines,minimumHeight:P,maximumHeight:j,center:L,rectangle:D,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:x,classificationType:l.classificationType,keepDecodedPositions:l.vectorKeepDecodedPositions})}if(C>0){const i=new Uint16Array(t,n,3*C);n+=b,e._points=new lde({positions:i,batchIds:M.points,minimumHeight:P,maximumHeight:j,rectangle:D,batchTable:x})}return Promise.resolve(e)}function pfe(e){const t=e.featuresLength;if(!Object(r["a"])(e._features)&&t>0){const n=new Array(t);Object(r["a"])(e._polygons)&&e._polygons.createFeatures(e,n),Object(r["a"])(e._polylines)&&e._polylines.createFeatures(e,n),Object(r["a"])(e._points)&&e._points.createFeatures(e,n),e._features=n}}function mfe(e,t,n,i,o,r){const a=t.length;let s=0;for(let c=0;c<a;c++){const a=3*t[c],l=e.slice(s,s+a);s+=a,r(l,n[c],o,i)}}sfe.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},sfe.prototype.getFeature=function(e){const t=this.featuresLength;if(!Object(r["a"])(e)||e<0||e>=t)throw new a["a"](`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return this._features[e]},sfe.prototype.applyDebugSettings=function(e,t){Object(r["a"])(this._polygons)&&this._polygons.applyDebugSettings(e,t),Object(r["a"])(this._polylines)&&this._polylines.applyDebugSettings(e,t),Object(r["a"])(this._points)&&this._points.applyDebugSettings(e,t)},sfe.prototype.applyStyle=function(e){Object(r["a"])(this._features)||pfe(this),Object(r["a"])(this._polygons)&&this._polygons.applyStyle(e,this._features),Object(r["a"])(this._polylines)&&this._polylines.applyStyle(e,this._features),Object(r["a"])(this._points)&&this._points.applyStyle(e,this._features)},sfe.prototype.update=function(e,t){let n=!0;Object(r["a"])(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons._ready),Object(r["a"])(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines._ready),Object(r["a"])(this._points)&&(this._points.update(t),n=n&&this._points._ready),Object(r["a"])(this._batchTable)&&n&&(Object(r["a"])(this._features)||pfe(this),this._batchTable.update(e,t))},sfe.prototype.getPolylinePositions=function(e){const t=this._polylines;if(Object(r["a"])(t))return t.getPositions(e)},sfe.prototype.isDestroyed=function(){return!1},sfe.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Wc(this)};var _fe=sfe;const gfe={b3dm:function(e,t,n,i,o){return kse.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return kse.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return kse.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,i,o){return new MX(e,t,n,i,o,gfe)},externalTileset:function(e,t,n,i){return new Hse(e,t,n,i)},geom:function(e,t,n,i,o){return new UJ(e,t,n,i,o)},vctr:function(e,t,n,i,o){return new _fe(e,t,n,i,o)},subt:function(e,t,n,i,o){return new i4(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return new i4(e,t,n,i)},glb:function(e,t,n,i,o){const r=i.byteLength;if(r<12)throw new ye["a"]("Invalid glb content");const a=new DataView(i,o),s=a.getUint32(8,!0),c=new Uint8Array(i,o,s);return kse.fromGltf(e,t,n,c)},gltf:function(e,t,n,i){return kse.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return kse.fromGeoJson(e,t,n,i)}};var bfe=gfe;const yfe={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};var vfe=Object.freeze(yfe);const Ofe={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",isBinaryFormat:function(e){switch(e){case Ofe.BATCHED_3D_MODEL:case Ofe.INSTANCED_3D_MODEL:case Ofe.COMPOSITE:case Ofe.POINT_CLOUD:case Ofe.VECTOR:case Ofe.GEOMETRY:case Ofe.IMPLICIT_SUBTREE:case Ofe.GLTF_BINARY:return!0;default:return!1}}};var Afe=Object.freeze(Ofe);const wfe={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};var Tfe=Object.freeze(wfe);function Cfe(){}const Efe={stack:new mE,stackMaximumLength:0};function xfe(e){return e._visible&&e._inRequestVolume}function Sfe(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function Ife(e){return!Sfe(e)&&e.contentUnloaded}function Dfe(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:(t.hasEmptyContent,!0))}function Pfe(e,t,n,i){const o=t.children,r=o.length;for(let a=0;a<r;++a){const e=o[a];e.updateVisibility(i),xfe(e)&&n.push(e)}}function jfe(e,t){(Ife(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function Rfe(e,t,n){t._touchedFrame!==n.frameNumber&&(e._cache.touch(t),t._touchedFrame=n.frameNumber)}function Lfe(e){++e.statistics.visited}function Mfe(e,t,n){t.contentAvailable&&t.contentVisibility(n)!==G.OUTSIDE&&e._selectedTiles.push(t)}Cfe.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;let n=!0;const i=e.root;if(i.updateVisibility(t),!xfe(i))return n;const o=Efe.stack;o.push(e.root);while(o.length>0){Efe.stackMaximumLength=Math.max(Efe.stackMaximumLength,o.length);const i=o.pop(),r=i.refine===foe.ADD,a=i.refine===foe.REPLACE,s=Dfe(e,i);s&&Pfe(e,i,o,t),(r||a&&!s)&&(jfe(e,i),Rfe(e,i,t),Mfe(e,i,t),Sfe(i)||i.contentAvailable||(n=!1)),Lfe(e)}return Efe.stack.trim(Efe.stackMaximumLength),n};var Nfe=Cfe;function Bfe(){}function Ffe(e){return e._visible&&e._inRequestVolume}const zfe={stack:new mE,stackMaximumLength:0},kfe={stack:new mE,stackMaximumLength:0},Ufe={stack:new mE,stackMaximumLength:0},Vfe={stack:new mE,stackMaximumLength:0,ancestorStack:new mE,ancestorStackMaximumLength:0},Hfe=2;function Gfe(e,t,n){const i=e._maximumScreenSpaceError,o=e._maximumScreenSpaceError;_pe(e,t,i,o,n)}function Wfe(e,t,n){const i=Number.MAX_VALUE,o=e._maximumScreenSpaceError;_pe(e,t,i,o,n),bpe(e,t,n)}function qfe(e,t,n){const i=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),o=e.maximumScreenSpaceError;_pe(e,t,i,o,n),bpe(e,t,n)}function Yfe(e){return e._skipLevelOfDetail}function Xfe(e,t){e._emptyTiles.push(t)}function Kfe(e,t,n){if(t.contentVisibility(n)!==G.OUTSIDE){const i=t.content;i.featurePropertiesDirty?(i.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<n.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=n.frameNumber,e._selectedTiles.push(t)}}function $fe(e,t,n){const i=Ufe.stack;i.push(t);while(i.length>0){Ufe.stackMaximumLength=Math.max(Ufe.stackMaximumLength,i.length);const o=i.pop(),r=o.children,a=r.length;for(let s=0;s<a;++s){const o=r[s];Ffe(o)&&(o.contentAvailable?(spe(e,o,n),Zfe(e,o,n),Kfe(e,o,n)):o._depth-t._depth<Hfe&&i.push(o))}}}function Jfe(e,t,n){if(!Yfe(e))return void(t.contentAvailable&&Kfe(e,t,n));const i=t.contentAvailable?t:t._ancestorWithContentAvailable;Object(r["a"])(i)?i._shouldSelect=!0:$fe(e,t,n)}function Qfe(e,t,n){++e._statistics.visited,t._visitedFrame=n.frameNumber}function Zfe(e,t,n){t._touchedFrame!==n.frameNumber&&(e._cache.touch(t),t._touchedFrame=n.frameNumber)}function epe(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}function tpe(e,t,n){if(!e._cullRequestsWhileMoving)return!0;const i=t.boundingSphere,o=Math.max(2*i.radius,1),r=n.camera,a=0!==r.positionWCDeltaMagnitude?r.positionWCDeltaMagnitude:r.positionWCDeltaMagnitudeLastFrame,s=e.cullRequestsWhileMovingMultiplier*a/o;return s<1}function npe(e,t,n){if(t._requestedFrame===n.frameNumber||!upe(t)&&!t.contentExpired)return;if(!tpe(e,t,n))return;const i=n.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&i||(t._requestedFrame=n.frameNumber,e._requestedTiles.push(t))}function ipe(e,t,n){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(n),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function ope(e,t,n){let i=!1;const o=t.children,r=o.length;for(let a=0;a<r;++a){const t=o[a];ipe(e,t,n),i=i||Ffe(t)}return i}function rpe(e,t,n){const i=t.parent;return!(!Object(r["a"])(i)||i.hasTilesetContent||i.hasImplicitContent||i.refine!==foe.ADD)&&t.getScreenSpaceError(n,!0)<=e._maximumScreenSpaceError}function ape(e,t,n){if(ipe(e,t,n),!Ffe(t))return;const i=t.children.length>0;if((t.hasTilesetContent||t.hasImplicitContent)&&i){const i=t.children[0];return ape(e,i,n),void(t._visible=i._visible)}if(rpe(e,t,n))return void(t._visible=!1);const o=t.refine===foe.REPLACE,r=t._optimChildrenWithinParent===Tfe.USE_OPTIMIZATION;return o&&r&&i&&!ope(e,t,n)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}function spe(e,t,n){ape(e,t,n),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,epe(e,t),t._shouldSelect=!1,t._finalResolution=!0}function cpe(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const n=e.parent;if(Object(r["a"])(n)){const i=!upe(n)||n._requestedFrame===t.frameNumber;e._ancestorWithContent=i?n:n._ancestorWithContent,e._ancestorWithContentAvailable=n.contentAvailable?n:n._ancestorWithContentAvailable}}function lpe(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function upe(e){return!lpe(e)&&e.contentUnloaded}function hpe(e,t){const n=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||Object(r["a"])(n)&&t._screenSpaceError<n._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>n._depth+e.skipLevels)}function dpe(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function fpe(e,t,n,i){let o;const r=t.refine===foe.REPLACE,a=t.children,s=a.length;for(o=0;o<s;++o)spe(e,a[o],i);a.sort(dpe);const c=!Yfe(e)&&r&&!lpe(t);let l,u=!0,h=!1,d=-1,f=Number.MAX_VALUE;for(o=0;o<s;++o)if(l=a[o],Ffe(l)?(n.push(l),l._foveatedFactor<f&&(d=o,f=l._foveatedFactor),h=!0):(c||e.loadSiblings)&&(l._foveatedFactor<f&&(d=o,f=l._foveatedFactor),npe(e,l,i),Zfe(e,l,i)),c){let t;t=!!l._inRequestVolume&&(lpe(l)?gpe(e,l,i):l.contentAvailable),u=u&&t}if(h||(u=!1),-1!==d&&!Yfe(e)&&r){const n=a[d];n._wasMinPriorityChild=!0;const i=(t._wasMinPriorityChild||t===e.root)&&f<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(i._foveatedFactor=Math.min(n._foveatedFactor,i._foveatedFactor),i._distanceToCamera=Math.min(n._distanceToCamera,i._distanceToCamera),o=0;o<s;++o)l=a[o],l._priorityHolder=i}return u}function ppe(e,t,n){return!Yfe(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!Object(r["a"])(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>n:t._screenSpaceError>n))}function mpe(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function _pe(e,t,n,i,o){const a=zfe.stack;a.push(t);while(a.length>0){zfe.stackMaximumLength=Math.max(zfe.stackMaximumLength,a.length);const t=a.pop();cpe(t,o);const i=ppe(e,t,n),s=t.refine===foe.ADD,c=t.refine===foe.REPLACE,l=t.parent,u=!Object(r["a"])(l)||l._refines;let h=!1;mpe(e,t)&&(h=fpe(e,t,a,o)&&u);const d=!h&&u;lpe(t)?(Xfe(e,t,o),npe(e,t,o),d&&Jfe(e,t,o)):s?(Jfe(e,t,o),npe(e,t,o)):c&&(i?(npe(e,t,o),d&&Jfe(e,t,o)):d?(Jfe(e,t,o),npe(e,t,o)):hpe(e,t)&&npe(e,t,o)),Qfe(e,t,o),Zfe(e,t,o),t._refines=h}}function gpe(e,t,n){let i=!0;const o=kfe.stack;o.push(t);while(o.length>0){kfe.stackMaximumLength=Math.max(kfe.stackMaximumLength,o.length);const t=o.pop(),r=t.children,a=r.length,s=lpe(t),c=s&&mpe(e,t),l=s&&0===t.children.length;if(c||t.contentAvailable||l||(i=!1),spe(e,t,n),Ffe(t)||(npe(e,t,n),Zfe(e,t,n)),c)for(let e=0;e<a;++e){const t=r[e];o.push(t)}}return i}function bpe(e,t,n){const i=Vfe.stack,o=Vfe.ancestorStack;let a;i.push(t);while(i.length>0||o.length>0){if(Vfe.stackMaximumLength=Math.max(Vfe.stackMaximumLength,i.length),Vfe.ancestorStackMaximumLength=Math.max(Vfe.ancestorStackMaximumLength,o.length),o.length>0){const t=o.peek();if(t._stackLength===i.length){o.pop(),t!==a&&(t._finalResolution=!1),Kfe(e,t,n);continue}}const t=i.pop();if(!Object(r["a"])(t))continue;const s=t.refine===foe.ADD,c=t._shouldSelect,l=t.children,u=l.length,h=mpe(e,t);if(c)if(s)Kfe(e,t,n);else{if(t._selectionDepth=o.length,t._selectionDepth>0&&(e._hasMixedContent=!0),a=t,!h){Kfe(e,t,n);continue}o.push(t),t._stackLength=i.length}if(h)for(let e=0;e<u;++e){const t=l[e];Ffe(t)&&i.push(t)}}}Bfe.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;const n=e.root;if(spe(e,n,t),!Ffe(n))return;if(n.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;Yfe(e)?e.immediatelyLoadDesiredLevelOfDetail?Wfe(e,n,t):qfe(e,n,t):Gfe(e,n,t),zfe.stack.trim(zfe.stackMaximumLength),kfe.stack.trim(kfe.stackMaximumLength),Ufe.stack.trim(Ufe.stackMaximumLength),Vfe.stack.trim(Vfe.stackMaximumLength),Vfe.ancestorStack.trim(Vfe.ancestorStackMaximumLength);const i=e._requestedTiles,o=i.length;for(let r=0;r<o;++r)i[r].updatePriority()};var ype=Bfe;const vpe={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},Ope=new Array(vpe.NUMBER_OF_PASSES);Ope[vpe.RENDER]=Object.freeze({traversal:ype,isRender:!0,requestTiles:!0,ignoreCommands:!1}),Ope[vpe.PICK]=Object.freeze({traversal:ype,isRender:!1,requestTiles:!1,ignoreCommands:!1}),Ope[vpe.SHADOW]=Object.freeze({traversal:ype,isRender:!1,requestTiles:!0,ignoreCommands:!1}),Ope[vpe.PRELOAD]=Object.freeze({traversal:ype,isRender:!1,requestTiles:!0,ignoreCommands:!0}),Ope[vpe.PRELOAD_FLIGHT]=Object.freeze({traversal:ype,isRender:!1,requestTiles:!0,ignoreCommands:!0}),Ope[vpe.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({traversal:ype,isRender:!1,requestTiles:!0,ignoreCommands:!0}),Ope[vpe.MOST_DETAILED_PRELOAD]=Object.freeze({traversal:Nfe,isRender:!1,requestTiles:!0,ignoreCommands:!0}),Ope[vpe.MOST_DETAILED_PICK]=Object.freeze({traversal:Nfe,isRender:!1,requestTiles:!1,ignoreCommands:!1}),vpe.getPassOptions=function(e){return Ope[e]};var Ape=Object.freeze(vpe);function wpe(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(wpe.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new a["a"]("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new a["a"]("Empty3DTileContent cannot have group metadata")}}}),wpe.prototype.hasProperty=function(e,t){return!1},wpe.prototype.getFeature=function(e){},wpe.prototype.applyDebugSettings=function(e,t){},wpe.prototype.applyStyle=function(e){},wpe.prototype.update=function(e,t){},wpe.prototype.isDestroyed=function(){return!1},wpe.prototype.destroy=function(){return Wc(this)};var Tpe=wpe;function Cpe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.content,n=e.class;i["a"].typeOf.object("options.content",t),i["a"].typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Cpe.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),Cpe.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},Cpe.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},Cpe.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},Cpe.prototype.getProperty=function(e){return QJ.getProperty(e,this._properties,this._class)},Cpe.prototype.setProperty=function(e,t){return QJ.setProperty(e,t,this._properties,this._class)},Cpe.prototype.getPropertyBySemantic=function(e){return QJ.getPropertyBySemantic(e,this._properties,this._class)},Cpe.prototype.setPropertyBySemantic=function(e,t){return QJ.setPropertyBySemantic(e,t,this._properties,this._class)};var Epe=Cpe;function xpe(e,t){const n=HJ(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!Object(r["a"])(n))return;if(!Object(r["a"])(e.schema))return void xpe._oneTimeWarning("findContentMetadata-missing-root-schema","Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const i=Object(o["a"])(e.schema.classes,o["a"].EMPTY_OBJECT);if(Object(r["a"])(n.class)){const e=i[n.class];return new Epe({content:n,class:e})}}xpe._oneTimeWarning=ab;var Spe=xpe;function Ipe(e,t){const n=e.metadataExtension;if(!Object(r["a"])(n))return;const i=n.groups,o=HJ(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"].group:t.group;if("number"===typeof o)return i[o];const a=n.groupIds.findIndex((function(e){return e===o}));return a>=0?i[a]:void 0}var Dpe=Ipe;function Ppe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.tile,n=e.class;i["a"].typeOf.object("options.tile",t),i["a"].typeOf.object("options.class",n),this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(Ppe.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),Ppe.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},Ppe.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},Ppe.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},Ppe.prototype.getProperty=function(e){return QJ.getProperty(e,this._properties,this._class)},Ppe.prototype.setProperty=function(e,t){return QJ.setProperty(e,t,this._properties,this._class)},Ppe.prototype.getPropertyBySemantic=function(e){return QJ.getPropertyBySemantic(e,this._properties,this._class)},Ppe.prototype.setPropertyBySemantic=function(e,t){return QJ.setPropertyBySemantic(e,t,this._properties,this._class)};var jpe=Ppe;function Rpe(e,t){const n=HJ(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t.metadata;if(!Object(r["a"])(n))return;if(!Object(r["a"])(e.schema))return void Rpe._oneTimeWarning("findTileMetadata-missing-root-schema","Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.");const i=Object(o["a"])(e.schema.classes,o["a"].EMPTY_OBJECT);if(Object(r["a"])(n.class)){const e=i[n.class];return new jpe({tile:n,class:e})}}Rpe._oneTimeWarning=ab;var Lpe=Rpe;function Mpe(e){const t=new Uint8Array(e);let n=eM(t);if("glTF"===n&&(n="glb"),Afe.isBinaryFormat(n))return{contentType:n,binaryPayload:t};const i=Npe(t);if(Object(r["a"])(i.root))return{contentType:Afe.EXTERNAL_TILESET,jsonPayload:i};if(Object(r["a"])(i.asset))return{contentType:Afe.GLTF,jsonPayload:i};if(Object(r["a"])(i.tileAvailability))return{contentType:Afe.IMPLICIT_SUBTREE_JSON,jsonPayload:i};if(Object(r["a"])(i.type))return{contentType:Afe.GEOJSON,jsonPayload:i};throw new ye["a"]("Invalid tile content.")}function Npe(e){let t;try{t=Fh(e)}catch(n){throw new ye["a"]("Invalid tile content.")}return t}var Bpe=Mpe;function Fpe(e,t,n,i){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;const o=Object(r["a"])(i.contents)?i.contents:i.content;this._innerContentHeaders=o,this._requestsInFlight=0,this._cancelCount=0;const a=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(a),this._requests=new Array(a),this._innerContentResources=new Array(a),this._serverKeys=new Array(a);for(let r=0;r<a;r++){const e=n.getDerivedResource({url:o[r].uri}),t=rD["a"].getServerKey(e.getUrlComponent());this._innerContentResources[r]=e,this._serverKeys[r]=t}this._contentsFetchedPromise=void 0}function zpe(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function kpe(e,t){e._cancelCount++,e._tile._contentState=t;const n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;const i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}function Upe(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];Object(r["a"])(t[i])?t[i]++:t[i]=1}for(const n in t)if(t.hasOwnProperty(n)&&!rD["a"].serverHasOpenSlots(n,t[n]))return!1;return rD["a"].heapHasOpenSlots(e.length)}function Vpe(e,t,n,i){const o=e._innerContentResources[t].clone(),a=e.tile,s=function(){return a._priority},c=e._serverKeys[t],l=new Sl["a"]({throttle:!0,throttleByServer:!0,type:Dl["a"].TILES3D,priorityFunction:s,serverKey:c});o.request=l,e._requests[t]=l;const u=o.fetchArrayBuffer();return Object(r["a"])(u)?u.then((function(t){if(!(n<e._cancelCount))return zpe(e,-1),t})).catch((function(r){n<e._cancelCount||(o.request.state!==Il["a"].CANCELLED?(zpe(e,-1),Wpe(e,t,r)):kpe(e,i))})):Promise.resolve(void 0)}function Hpe(e){const t=e._cancelCount;return Promise.all(e._arrayFetchPromises).then((function(n){if(t<e._cancelCount)return;const i=n.map((function(t,n){if(Object(r["a"])(t))return Gpe(e,t,n)}));e._contentsCreated=!0,e._contents=i.filter(r["a"])}))}function Gpe(e,t,n){const i=Bpe(t);if(i.contentType===Afe.EXTERNAL_TILESET){const t=new ye["a"]("External tilesets are disallowed inside multiple contents");return Wpe(e,n,t)}e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||i.contentType===Afe.GEOMETRY||i.contentType===Afe.VECTOR;const o=e._tileset,a=e._innerContentResources[n],s=e._tile;let c;const l=bfe[i.contentType];c=Object(r["a"])(i.binaryPayload)?l(o,s,a,i.binaryPayload.buffer,0):l(o,s,a,i.jsonPayload);const u=e._innerContentHeaders[n];if(s.hasImplicitContentMetadata){const e=s.implicitSubtree,t=s.implicitCoordinates;c.metadata=e.getContentMetadataView(t,n)}else s.hasImplicitContent||(c.metadata=Spe(o,u));const h=Dpe(o,u);return Object(r["a"])(h)&&(c.group=new PX({metadata:h})),c}function Wpe(e,t,n){const i=e._tileset,o=e._innerContentResources[t].url,a=Object(r["a"])(n.message)?n.message:n.toString();i.tileFailed.numberOfListeners>0?i.tileFailed.raiseEvent({url:o,message:a}):(console.log(`A content failed to load: ${o}`),console.log(`Error: ${a}`))}Object.defineProperties(Fpe.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){if(!this._contentsCreated)return;const e=this._contents.map((function(e){return e.readyPromise})),t=this;return Promise.all(e).then((function(){return t}))}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){throw new a["a"]("Multiple3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(){throw new a["a"]("Multiple3DTileContent cannot have group metadata")}},innerContentUrls:{get:function(){return this._innerContentHeaders.map((function(e){return e.uri}))}},contentsFetchedPromise:{get:function(){return this._contentsFetchedPromise}}}),Fpe.prototype.requestInnerContents=function(){if(!Upe(this._serverKeys))return this._serverKeys.length;const e=this._innerContentHeaders;zpe(this,e.length);for(let t=0;t<e.length;t++)this._arrayFetchPromises[t]=Vpe(this,t,this._cancelCount,this._tile._contentState);return this._contentsFetchedPromise=Hpe(this),0},Fpe.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){const t=this._requests[e];Object(r["a"])(t)&&t.cancel()}},Fpe.prototype.hasProperty=function(e,t){return!1},Fpe.prototype.getFeature=function(e){},Fpe.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)},Fpe.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},Fpe.prototype.update=function(e,t){const n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].update(e,t)},Fpe.prototype.isDestroyed=function(){return!1},Fpe.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return Wc(this)};var qpe=Fpe;function Ype(e){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.rectangle",e.rectangle),this.rectangle=Fe.clone(e.rectangle),this.minimumHeight=Object(o["a"])(e.minimumHeight,0),this.maximumHeight=Object(o["a"])(e.maximumHeight,0),this.southwestCornerCartesian=new g,this.northeastCornerCartesian=new g,this.westNormal=new g,this.southNormal=new g,this.eastNormal=new g,this.northNormal=new g;const t=Object(o["a"])(e.ellipsoid,k.WGS84);ome(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,Object(o["a"])(e.computeBoundingVolumes,!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(Ype.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),Ype.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=Ws.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=Tt.fromOrientedBoundingBox(this._orientedBoundingBox)};const Xpe=new g,Kpe=new g,$pe=new g,Jpe=new g,Qpe=new g,Zpe=new g,eme=new g,tme=new I,nme=new ji(g.UNIT_X,0),ime=new Yn;function ome(e,t,n){n.cartographicToCartesian(Fe.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(Fe.northeast(t),e.northeastCornerCartesian),tme.longitude=t.west,tme.latitude=.5*(t.south+t.north),tme.height=0;const i=n.cartographicToCartesian(tme,Zpe),o=g.cross(i,g.UNIT_Z,Jpe);g.normalize(o,e.westNormal),tme.longitude=t.east;const r=n.cartographicToCartesian(tme,eme),a=g.cross(g.UNIT_Z,r,Xpe);g.normalize(a,e.eastNormal);let s=g.subtract(i,r,Xpe);0===g.magnitude(s)&&(s=g.clone(o,s));const c=g.normalize(s,Qpe),l=t.south;let u;if(l>0){tme.longitude=.5*(t.west+t.east),tme.latitude=l;const i=n.cartographicToCartesian(tme,ime.origin);g.clone(c,ime.direction);const o=ji.fromPointNormal(e.southwestCornerCartesian,e.westNormal,nme);Ci.rayPlane(ime,o,e.southwestCornerCartesian),u=n.geodeticSurfaceNormal(i,Kpe)}else u=n.geodeticSurfaceNormalCartographic(Fe.southeast(t),Kpe);const h=g.cross(u,s,$pe);g.normalize(h,e.southNormal);const d=t.north;let f;if(d<0){tme.longitude=.5*(t.west+t.east),tme.latitude=d;const i=n.cartographicToCartesian(tme,ime.origin);g.negate(c,ime.direction);const o=ji.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,nme);Ci.rayPlane(ime,o,e.northeastCornerCartesian),f=n.geodeticSurfaceNormal(i,Kpe)}else f=n.geodeticSurfaceNormalCartographic(Fe.northwest(t),Kpe);const p=g.cross(s,f,$pe);g.normalize(p,e.northNormal)}const rme=new g,ame=new g,sme=new g(0,-1,0),cme=new g(0,0,-1),lme=new g;function ume(e,t){const n=t.camera,i=n.positionWC,o=n.positionCartographic;let r,a,s,c=0;if(!Fe.contains(e.rectangle,o)){let n=e.southwestCornerCartesian,o=e.northeastCornerCartesian,r=e.westNormal,a=e.southNormal,s=e.eastNormal,l=e.northNormal;t.mode!==SH.SCENE3D&&(n=t.mapProjection.project(Fe.southwest(e.rectangle),rme),n.z=n.y,n.y=n.x,n.x=0,o=t.mapProjection.project(Fe.northeast(e.rectangle),ame),o.z=o.y,o.y=o.x,o.x=0,r=sme,s=g.UNIT_Y,a=cme,l=g.UNIT_Z);const u=g.subtract(i,n,lme),h=g.dot(u,r),d=g.dot(u,a),f=g.subtract(i,o,lme),p=g.dot(f,s),m=g.dot(f,l);h>0?c+=h*h:p>0&&(c+=p*p),d>0?c+=d*d:m>0&&(c+=m*m)}if(t.mode===SH.SCENE3D?(r=o.height,a=e.minimumHeight,s=e.maximumHeight):(r=i.x,a=0,s=0),r>s){const e=r-s;c+=e*e}else if(r<a){const e=a-r;c+=e*e}return Math.sqrt(c)}Ype.prototype.distanceToCamera=function(e){i["a"].defined("frameState",e);const t=ume(this,e);if(e.mode===SH.SCENE3D&&Object(r["a"])(this._orientedBoundingBox)){const n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t},Ype.prototype.intersectPlane=function(e){return i["a"].defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},Ype.prototype.createDebugVolume=function(e){i["a"].defined("color",e);const t=new Me.clone(Me.IDENTITY),n=new tD({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),o=new Sd({geometry:n,id:"outline",modelMatrix:t,attributes:{color:jm.fromColor(e)}});return new EG({geometryInstances:o,appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})};var hme=Ype;let dme=new I;function fme(e){i["a"].typeOf.object("options",e),i["a"].typeOf.string("options.token",e.token);const t=MD.fromToken(e.token),n=Object(o["a"])(e.minimumHeight,0),r=Object(o["a"])(e.maximumHeight,0),a=Object(o["a"])(e.ellipsoid,k.WGS84);this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=r,this.ellipsoid=a;const s=Ame(t,n,r,a);this._boundingPlanes=s;const c=Fme(s);let l;for(this._vertices=c,this._edgeNormals=new Array(6),this._edgeNormals[0]=Ume(s[0],c.slice(0,4)),l=0;l<4;l++)this._edgeNormals[0][l]=g.negate(this._edgeNormals[0][l],this._edgeNormals[0][l]);for(this._edgeNormals[1]=Ume(s[1],c.slice(4,8)),l=0;l<4;l++)this._edgeNormals[2+l]=Ume(s[2+l],[c[l%4],c[(l+1)%4],c[4+(l+1)%4],c[4+l]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],l=0;l<4;l++)this._planeVertices.push([this._vertices[l%4],this._vertices[(l+1)%4],this._vertices[4+(l+1)%4],this._vertices[4+l]]);const u=t.getCenter();dme=a.cartesianToCartographic(u,dme),dme.height=(r+n)/2,this.center=a.cartographicToCartesian(dme,u),this._boundingSphere=Tt.fromPoints(c)}const pme=new g,mme=new I,_me=new g,gme=new I,bme=new g,yme=new g,vme=new g,Ome=new g;function Ame(e,t,n,i){const o=new Array(6),r=e.getCenter(),a=i.geodeticSurfaceNormal(r,pme),s=i.cartesianToCartographic(r,mme);s.height=n;const c=i.cartographicToCartesian(s,_me),l=ji.fromPointNormal(c,a);o[0]=l;let u,h=0;const d=[];let f,p;for(u=0;u<4;u++){f=e.getVertex(u),d[u]=f,p=i.cartesianToCartographic(f,gme),p.height=t;const n=ji.getPointDistance(l,i.cartographicToCartesian(p,bme));n<h&&(h=n)}const m=ji.clone(l);for(m.normal=g.negate(m.normal,m.normal),m.distance=-1*m.distance+h,o[1]=m,u=0;u<4;u++){f=d[u];const e=d[(u+1)%4],t=i.geodeticSurfaceNormal(f,yme),n=g.subtract(e,f,Ome);let r=g.cross(n,t,vme);r=g.normalize(r,r),o[2+u]=ji.fromPointNormal(f,r)}return o}let wme=new g,Tme=new g,Cme=new g,Eme=new g,xme=new g,Sme=new g;const Ime=new g,Dme=new g,Pme=new g;let jme=new g,Rme=new g,Lme=new g,Mme=new g;const Nme=new ce;function Bme(e,t,n){wme=e.normal,Tme=t.normal,Cme=n.normal,Eme=g.multiplyByScalar(e.normal,-e.distance,Eme),xme=g.multiplyByScalar(t.normal,-t.distance,xme),Sme=g.multiplyByScalar(n.normal,-n.distance,Sme),jme=g.multiplyByScalar(g.cross(Tme,Cme,Ime),g.dot(Eme,wme),jme),Rme=g.multiplyByScalar(g.cross(Cme,wme,Dme),g.dot(xme,Tme),Rme),Lme=g.multiplyByScalar(g.cross(wme,Tme,Pme),g.dot(Sme,Cme),Lme),Nme[0]=wme.x,Nme[1]=Tme.x,Nme[2]=Cme.x,Nme[3]=wme.y,Nme[4]=Tme.y,Nme[5]=Cme.y,Nme[6]=wme.z,Nme[7]=Tme.z,Nme[8]=Cme.z;const i=ce.determinant(Nme);return Mme=g.add(jme,Rme,Mme),Mme=g.add(Mme,Lme,Mme),new g(Mme.x/i,Mme.y/i,Mme.z/i)}function Fme(e){const t=new Array(8);for(let n=0;n<4;n++)t[n]=Bme(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=Bme(e[1],e[2+(n+3)%4],e[2+n%4]);return t}let zme=new g,kme=new g;function Ume(e,t){const n=[];for(let i=0;i<4;i++)zme=g.subtract(t[(i+1)%4],t[i],zme),kme=g.cross(e.normal,zme,kme),kme=g.normalize(kme,kme),n[i]=g.clone(kme);return n}Object.defineProperties(fme.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});const Vme=new g;fme.prototype.distanceToCamera=function(e){i["a"].defined("frameState",e);const t=e.camera.positionWC,n=[],o=[];let r,a,s,c,l;for(ji.getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),o.push(this._planeVertices[0]),r=this._edgeNormals[0]):ji.getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),o.push(this._planeVertices[1]),r=this._edgeNormals[1]),a=0;a<4;a++)s=2+a,ji.getPointDistance(this._boundingPlanes[s],t)>0&&(n.push(s),o.push(this._planeVertices[s]),r=this._edgeNormals[s]);if(0===n.length)return 0;if(1===n.length)return l=this._boundingPlanes[n[0]],c=Yme(ji.projectPointOntoPlane(l,t,Vme),o[0],l,r),g.distance(c,t);if(2===n.length){if(0===n[0]){const e=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return c=Wme(t,e[0],e[1]),g.distance(c,t)}let e,i=Number.MAX_VALUE;for(a=0;a<2;a++)l=this._boundingPlanes[n[a]],c=Yme(ji.projectPointOntoPlane(l,t,Vme),o[a],l,this._edgeNormals[n[a]]),e=g.distanceSquared(c,t),e<i&&(i=e);return Math.sqrt(i)}if(n.length>3)return c=Yme(ji.projectPointOntoPlane(this._boundingPlanes[1],t,Vme),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),g.distance(c,t);const u=2===n[1]&&5===n[2]?0:1;return 0===n[0]?g.distance(t,this._vertices[(n[1]-2+u)%4]):g.distance(t,this._vertices[4+(n[1]-2+u)%4])};const Hme=new g,Gme=new g;function Wme(e,t,n){const i=g.subtract(n,t,Hme),o=g.subtract(e,t,Gme);let r=g.dot(i,o);if(r<=0)return t;const a=g.dot(i,i);return r>=a?n:(r/=a,new g((1-r)*t.x+r*n.x,(1-r)*t.y+r*n.y,(1-r)*t.z+r*n.z))}const qme=new ji(g.UNIT_X,0);function Yme(e,t,n,i){let o,a,s,c=Number.MAX_VALUE;for(let r=0;r<t.length;r++){const n=ji.fromPointNormal(t[r],i[r],qme),l=ji.getPointDistance(n,e);l<0||(s=Wme(e,t[r],t[(r+1)%4]),o=g.distance(e,s),o<c&&(c=o,a=s))}return Object(r["a"])(a)?a:e}fme.prototype.intersectPlane=function(e){i["a"].defined("plane",e);let t=0,n=0;for(let i=0;i<this._vertices.length;i++){const o=g.dot(e.normal,this._vertices[i])+e.distance;o<0?n++:t++}return t===this._vertices.length?G.INSIDE:n===this._vertices.length?G.OUTSIDE:G.INTERSECTING},fme.prototype.createDebugVolume=function(e){i["a"].defined("color",e);const t=new Me.clone(Me.IDENTITY),n=new Ag({polygonHierarchy:{positions:this._planeVertices[0]}}),o=Ag.createGeometry(n),r=new Sd({geometry:o,id:"outline",modelMatrix:t,attributes:{color:jm.fromColor(e)}}),a=new Ag({polygonHierarchy:{positions:this._planeVertices[1]}}),s=Ag.createGeometry(a),c=new Sd({geometry:s,id:"outline",modelMatrix:t,attributes:{color:jm.fromColor(e)}}),l=[];for(let i=0;i<4;i++){const n=new Ag({polygonHierarchy:{positions:this._planeVertices[2+i]}}),o=Ag.createGeometry(n);l[i]=new Sd({geometry:o,id:"outline",modelMatrix:t,attributes:{color:jm.fromColor(e)}})}return new EG({geometryInstances:[l[0],l[1],l[2],l[3],c,r],appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})};var Xme=fme;function Kme(e,t){0===t&&(t=s["a"].EPSILON7),this._boundingSphere=new Tt(e,t)}Object.defineProperties(Kme.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),Kme.prototype.distanceToCamera=function(e){i["a"].defined("frameState",e);const t=this._boundingSphere;return Math.max(0,g.distance(t.center,e.camera.positionWC)-t.radius)},Kme.prototype.intersectPlane=function(e){return i["a"].defined("plane",e),Tt.intersectPlane(this._boundingSphere,e)},Kme.prototype.update=function(e,t){g.clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},Kme.prototype.createDebugVolume=function(e){i["a"].defined("color",e);const t=new cR({radius:this.radius}),n=Me.fromTranslation(this.center,new Me.clone(Me.IDENTITY)),o=new Sd({geometry:t,id:"outline",modelMatrix:n,attributes:{color:jm.fromColor(e)}});return new EG({geometryInstances:o,appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})};var $me=Kme;const Jme=new g,Qme=new g,Zme=new g,e_e=new g;function t_e(e,t,n){n=g.cross(e,t,n);const i=g.magnitude(n);return g.multiplyByScalar(n,s["a"].EPSILON7/i,n)}function n_e(e,t){const n=g.normalize(e,e_e),i=g.equalsEpsilon(n,g.UNIT_X,s["a"].EPSILON6)?g.UNIT_Y:g.UNIT_X;return t_e(e,i,t)}function i_e(e){let t=ce.getColumn(e,0,Jme),n=ce.getColumn(e,1,Qme),i=ce.getColumn(e,2,Zme);const o=g.equals(t,g.ZERO),r=g.equals(n,g.ZERO),a=g.equals(i,g.ZERO);return o||r||a?o&&r&&a?(e[0]=s["a"].EPSILON7,e[4]=s["a"].EPSILON7,e[8]=s["a"].EPSILON7,e):(!o||r||a?o||!r||a?o||r||!a?o?r?a||(t=n_e(i,t),n=t_e(i,t,n)):(t=n_e(n,t),i=t_e(n,t,i)):(n=n_e(t,n),i=t_e(n,t,i)):i=t_e(n,t,i):n=t_e(t,i,n):t=t_e(n,i,t),ce.setColumn(e,0,t,e),ce.setColumn(e,1,n,e),ce.setColumn(e,2,i,e),e):e}function o_e(e,t){t=i_e(t),this._orientedBoundingBox=new Ws(e,t),this._boundingSphere=Tt.fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(o_e.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),o_e.prototype.distanceToCamera=function(e){return i["a"].defined("frameState",e),Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},o_e.prototype.intersectPlane=function(e){return i["a"].defined("plane",e),this._orientedBoundingBox.intersectPlane(e)},o_e.prototype.update=function(e,t){g.clone(e,this._orientedBoundingBox.center),t=i_e(t),ce.clone(t,this._orientedBoundingBox.halfAxes),Tt.fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},o_e.prototype.createDebugVolume=function(e){i["a"].defined("color",e);const t=new ah({minimum:new g(-1,-1,-1),maximum:new g(1,1,1)}),n=Me.fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),o=new Sd({geometry:t,id:"outline",modelMatrix:n,attributes:{color:jm.fromColor(e)}});return new EG({geometryInstances:o,appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})};var r_e=o_e;function a_e(e,t,n,i){this._tileset=e,this._header=n;const o=Object(r["a"])(n.contents),a=o&&n.contents.length>1||HJ(n,"3DTILES_multiple_contents"),s=o&&!a?n.contents[0]:n.content;this._contentHeader=s,this.transform=Object(r["a"])(n.transform)?Me.unpack(n.transform):Me.clone(Me.IDENTITY);const c=Object(r["a"])(i)?i.computedTransform:e.modelMatrix,l=Me.multiply(c,this.transform,new Me),u=Object(r["a"])(i)?i._initialTransform:Me.IDENTITY;let h,d,f,p;this._initialTransform=Me.multiply(u,this.transform,new Me),this.computedTransform=l,this._boundingVolume=this.createBoundingVolume(n.boundingVolume,l),this._boundingVolume2D=void 0,Object(r["a"])(s)&&Object(r["a"])(s.boundingVolume)&&(h=this.createBoundingVolume(s.boundingVolume,l)),this._contentBoundingVolume=h,this._contentBoundingVolume2D=void 0,Object(r["a"])(n.viewerRequestVolume)&&(d=this.createBoundingVolume(n.viewerRequestVolume,l)),this._viewerRequestVolume=d,this.geometricError=n.geometricError,this._geometricError=n.geometricError,Object(r["a"])(this._geometricError)||(this._geometricError=Object(r["a"])(i)?i.geometricError:e._geometricError,a_e._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),Object(r["a"])(n.refine)?("replace"!==n.refine&&"add"!==n.refine||a_e._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${n.refine}". Instead use "${n.refine.toUpperCase()}".`),f="REPLACE"===n.refine.toUpperCase()?foe.REPLACE:foe.ADD):f=Object(r["a"])(i)?i.refine:foe.REPLACE,this.refine=f,this.children=[],this.parent=i;let m,_,g,b=!1;if(t=Et["a"].createIfNeeded(t),a)m=vfe.UNLOADED,_=t.clone();else if(Object(r["a"])(s)){let n=s.uri;Object(r["a"])(s.url)&&(a_e._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),n=s.url),""===n?(a_e._deprecationWarning("contentUriEmpty","content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead"),p=new Tpe(e,this),b=!0,m=vfe.READY):(m=vfe.UNLOADED,_=t.getDerivedResource({url:n}),g=rD["a"].getServerKey(_.getUrlComponent()))}else p=new Tpe(e,this),b=!0,m=vfe.READY;this._content=p,this._contentResource=_,this._contentState=m,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=g,this.hasEmptyContent=b,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=a,this.metadata=Lpe(e,n),this.cacheNode=void 0;const y=n.expire;let v,O;Object(r["a"])(y)&&(v=y.duration,Object(r["a"])(y.date)&&(O=mo.fromIso8601(y.date))),this.expireDuration=v,this.expireDate=O,this.lastStyleTime=0,this._optimChildrenWithinParent=Tfe.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=Dm.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new mo,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}a_e._deprecationWarning=IL,Object.defineProperties(a_e.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return Object(o["a"])(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return Object(r["a"])(this._color)||(this._color=new Dm),Dm.clone(this._color)},set:function(e){this._color=Dm.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent||Object(r["a"])(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===vfe.READY}},contentUnloaded:{get:function(){return this._contentState===vfe.UNLOADED}},contentExpired:{get:function(){return this._contentState===vfe.EXPIRED}},contentFailed:{get:function(){return this._contentState===vfe.FAILED}},contentReadyToProcessPromise:{get:function(){return this._contentReadyToProcessPromise}},contentReadyPromise:{get:function(){return this._contentReadyPromise}},commandsLength:{get:function(){return this._commandsLength}}});const s_e=new g;function c_e(e,t){const n=e._tileset,i=t.camera,o=e.boundingSphere,a=o.radius,c=g.multiplyByScalar(i.directionWC,e._centerZDepth,s_e),l=g.add(i.positionWC,c,s_e),u=g.subtract(l,o.center,s_e),h=g.magnitude(u),d=h>a;if(d){const t=g.normalize(u,s_e),n=g.multiplyByScalar(t,a,s_e),r=g.add(o.center,n,s_e),s=g.subtract(r,i.positionWC,s_e),c=g.normalize(s,s_e);e._foveatedFactor=1-Math.abs(g.dot(i.directionWC,c))}else e._foveatedFactor=0;const f=e.refine===foe.REPLACE,p=n._skipLevelOfDetail;if(f&&!p||!n.foveatedScreenSpaceError||1===n.foveatedConeSize||e._priorityProgressiveResolution&&f&&p||n._pass===Ape.PRELOAD_FLIGHT||n._pass===Ape.PRELOAD)return!1;const m=1-Math.cos(.5*i.frustum.fov),_=n.foveatedConeSize*m;if(e._foveatedFactor<=_)return!1;const b=m-_,y=s["a"].clamp((e._foveatedFactor-_)/b,0,1),v=n.foveatedInterpolationCallback(n.foveatedMinimumScreenSpaceErrorRelaxation,n.maximumScreenSpaceError,y),O=0===e._screenSpaceError&&Object(r["a"])(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return n.maximumScreenSpaceError-v<=O}const l_e=new mo;function u_e(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let n=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const i=t.parent,o=e._maximumScreenSpaceError,a=t._screenSpaceErrorProgressiveResolution<=o,s=Object(r["a"])(i)&&i._screenSpaceErrorProgressiveResolution>o;return a&&s&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,n=!0),n}function h_e(e,t){const n=t.parent,i=Object(r["a"])(n)&&(!e._skipLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent||n.hasImplicitContent),o=i?n._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-o}function d_e(e){if(Object(r["a"])(e.expireDuration)){const t=mo.now(l_e);mo.addSeconds(t,e.expireDuration,t),Object(r["a"])(e.expireDate)?mo.lessThan(e.expireDate,t)&&mo.clone(t,e.expireDate):e.expireDate=mo.clone(t)}}function f_e(e){return function(){return e._priority}}function p_e(e){let t=e._content;const n=e._tileset;if(!Object(r["a"])(t)){const i=HJ(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new qpe(n,e,e._contentResource.clone(),i),e._content=t}const i=t.requestInnerContents();if(i>0)return i;e._contentState=vfe.LOADING;const o=t.contentsFetchedPromise.then((function(){if(e._contentState===vfe.LOADING&&Object(r["a"])(t.readyPromise)){if(!e.isDestroyed())return e._contentState=vfe.PROCESSING,t;m_e(e,n,"Tile was unloaded while content was loading")}}));return e._contentReadyToProcessPromise=o,e._contentReadyPromise=o.then((function(e){if(Object(r["a"])(e))return t.readyPromise})).then((function(t){if(Object(r["a"])(t)){if(!e.isDestroyed())return e._selectedFrame=0,e.lastStyleTime=0,mo.now(e._loadTimestamp),e._contentState=vfe.READY,t;m_e(e,n,"Tile was unloaded while content was processing")}})).catch((function(t){m_e(e,n,t)})),0}function m_e(e,t,n){e._contentState===vfe.PROCESSING&&--t.statistics.numberOfTilesProcessing,e._contentState=vfe.FAILED}function __e(e){const t=e._contentResource.clone(),n=e.contentExpired;n&&t.setQueryParameters({expired:e.expireDate.toString()});const i=new Sl["a"]({throttle:!0,throttleByServer:!0,type:Dl["a"].TILES3D,priorityFunction:f_e(e),serverKey:e._serverKey});e._request=i,t.request=i;const o=t.fetchArrayBuffer();if(!Object(r["a"])(o))return 1;const a=e._contentState,s=e._tileset;e._contentState=vfe.LOADING,++s.statistics.numberOfPendingRequests;const c=o.then((function(t){if(e.isDestroyed())return void g_e(e,s);const i=b_e(e,t);return n&&(e.expireDate=void 0),e._content=i,e._contentState=vfe.PROCESSING,i}));return e._contentReadyToProcessPromise=c,e._contentReadyPromise=c.then((function(e){if(Object(r["a"])(e))return--s.statistics.numberOfPendingRequests,e.readyPromise})).then((function(t){if(Object(r["a"])(t)){if(!e.isDestroyed())return d_e(e),e._selectedFrame=0,e.lastStyleTime=0,mo.now(e._loadTimestamp),e._contentState=vfe.READY,t;g_e(e,s)}})).catch((function(t){return i.state===Il["a"].CANCELLED?(e._contentState=a,--s.statistics.numberOfPendingRequests,++s.statistics.numberOfAttemptedRequests,Promise.reject("Cancelled")):(g_e(e,s),Promise.reject(t))})),0}function g_e(e,t){e._contentState===vfe.PROCESSING?--t.statistics.numberOfTilesProcessing:--t.statistics.numberOfPendingRequests,e._contentState=vfe.FAILED}function b_e(e,t){const n=Bpe(t),i=e._tileset;let o;i._disableSkipLevelOfDetail=i._disableSkipLevelOfDetail||n.contentType===Afe.GEOMETRY||n.contentType===Afe.VECTOR,n.contentType!==Afe.IMPLICIT_SUBTREE&&n.contentType!==Afe.IMPLICIT_SUBTREE_JSON||(e.hasImplicitContent=!0),n.contentType===Afe.EXTERNAL_TILESET&&(e.hasTilesetContent=!0);const a=bfe[n.contentType];o=Object(r["a"])(n.binaryPayload)?a(i,e,e._contentResource,n.binaryPayload.buffer,0):a(i,e,e._contentResource,n.jsonPayload);const s=e._contentHeader;if(e.hasImplicitContentMetadata){const t=e.implicitSubtree,n=e.implicitCoordinates;o.metadata=t.getContentMetadataView(n,0)}else e.hasImplicitContent||(o.metadata=Spe(i,s));const c=Dpe(i,s);return Object(r["a"])(c)&&(o.group=new PX({metadata:c})),o}a_e.prototype.getScreenSpaceError=function(e,t,n){const i=this._tileset,a=Object(o["a"])(n,1),c=Object(r["a"])(this.parent)?this.parent.geometricError:i._geometricError,l=t?c:this.geometricError;if(0===l)return 0;const u=e.camera;let h=u.frustum;const d=e.context,f=d.drawingBufferWidth,p=d.drawingBufferHeight*a;let m;if(e.mode===SH.SCENE2D||h instanceof IO){Object(r["a"])(h._offCenterFrustum)&&(h=h._offCenterFrustum);const e=Math.max(h.top-h.bottom,h.right-h.left)/Math.max(f,p);m=l/e}else{const e=Math.max(this._distanceToCamera,s["a"].EPSILON7),t=u.frustum.sseDenominator;if(m=l*p/(e*t),i.dynamicScreenSpaceError){const t=i._dynamicScreenSpaceErrorComputedDensity,n=i.dynamicScreenSpaceErrorFactor,o=s["a"].fog(e,t)*n;m-=o}}return m/=e.pixelRatio,m},a_e.prototype.updateVisibility=function(e){const t=this.parent,n=this._tileset,i=Object(r["a"])(t)?t.computedTransform:n.modelMatrix,o=Object(r["a"])(t)?t._visibilityPlaneMask:av.MASK_INDETERMINATE;this.updateTransform(i),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,n.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,o),this._visible=this._visibilityPlaneMask!==av.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=h_e(n,this),this._priorityProgressiveResolution=u_e(n,this),this.priorityDeferred=c_e(this,e)},a_e.prototype.updateExpiration=function(){if(Object(r["a"])(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const e=mo.now(l_e);mo.lessThan(this.expireDate,e)&&(this._contentState=vfe.EXPIRED,this._expiredContent=this._content)}},a_e.prototype.requestContent=function(){return this.hasEmptyContent?0:this.hasMultipleContents?p_e(this):__e(this)},a_e.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},a_e.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||this.hasImplicitContent||(this._content=this._content&&this._content.destroy(),this._contentState=vfe.UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const y_e=new Tt;function v_e(e,t){if(t.mode!==SH.SCENE3D&&!Object(r["a"])(e._boundingVolume2D)){const n=e._boundingVolume.boundingSphere,i=Tt.projectTo2D(n,t.mapProjection,y_e);e._boundingVolume2D=new $me(i.center,i.radius)}return t.mode!==SH.SCENE3D?e._boundingVolume2D:e._boundingVolume}function O_e(e,t){if(t.mode!==SH.SCENE3D&&!Object(r["a"])(e._contentBoundingVolume2D)){const n=e._contentBoundingVolume.boundingSphere,i=Tt.projectTo2D(n,t.mapProjection,y_e);e._contentBoundingVolume2D=new $me(i.center,i.radius)}return t.mode!==SH.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}a_e.prototype.visibility=function(e,t){const n=e.cullingVolume,i=v_e(this,e),o=this._tileset,a=o.clippingPlanes;if(Object(r["a"])(a)&&a.enabled){const e=a.computeIntersectionWithBoundingVolume(i,o.clippingPlanesOriginMatrix);if(this._isClipped=e!==G.INSIDE,e===G.OUTSIDE)return av.MASK_OUTSIDE}return n.computeVisibilityWithPlaneMask(i,t)},a_e.prototype.contentVisibility=function(e){if(!Object(r["a"])(this._contentBoundingVolume))return G.INSIDE;if(this._visibilityPlaneMask===av.MASK_INSIDE)return G.INSIDE;const t=e.cullingVolume,n=O_e(this,e),i=this._tileset,o=i.clippingPlanes;if(Object(r["a"])(o)&&o.enabled){const e=o.computeIntersectionWithBoundingVolume(n,i.clippingPlanesOriginMatrix);if(this._isClipped=e!==G.INSIDE,e===G.OUTSIDE)return G.OUTSIDE}return t.computeVisibility(n)},a_e.prototype.distanceToTile=function(e){const t=v_e(this,e);return t.distanceToCamera(e)};const A_e=new g;a_e.prototype.distanceToTileCenter=function(e){const t=v_e(this,e),n=t.boundingVolume,i=g.subtract(n.center,e.camera.positionWC,A_e);return g.dot(e.camera.directionWC,i)},a_e.prototype.insideViewerRequestVolume=function(e){const t=this._viewerRequestVolume;return!Object(r["a"])(t)||0===t.distanceToCamera(e)};const w_e=new ce,T_e=new g,C_e=new ce,E_e=new g,x_e=new Fe,S_e=new Ws,I_e=new Me;function D_e(e,t,n){let i=g.fromElements(e[0],e[1],e[2],E_e),o=ce.fromArray(e,3,C_e);i=Me.multiplyByPoint(t,i,i);const a=Me.getMatrix3(t,w_e);return o=ce.multiply(a,o,o),Object(r["a"])(n)?(n.update(i,o),n):new r_e(i,o)}function P_e(e,t,n,i){const o=Fe.unpack(e,0,x_e),a=e[4],s=e[5],c=Ws.fromRectangle(o,a,s,k.WGS84,S_e);let l=c.center,u=c.halfAxes;t=Me.multiplyTransformation(t,Me.inverseTransformation(n,I_e),I_e),l=Me.multiplyByPoint(t,l,l);const h=Me.getMatrix3(t,w_e);return u=ce.multiply(h,u,u),Object(r["a"])(i)&&i instanceof r_e?(i.update(l,u),i):new r_e(l,u)}function j_e(e,t,n,i){if(!Me.equalsEpsilon(t,n,s["a"].EPSILON8))return P_e(e,t,n,i);if(Object(r["a"])(i))return i;const o=Fe.unpack(e,0,x_e);return new hme({rectangle:o,minimumHeight:e[4],maximumHeight:e[5]})}function R_e(e,t,n){let i=g.fromElements(e[0],e[1],e[2],E_e),o=e[3];i=Me.multiplyByPoint(t,i,i);const a=Me.getScale(t,T_e),s=g.maximumComponent(a);return o*=s,Object(r["a"])(n)?(n.update(i,o),n):new $me(i,o)}function L_e(e,t,n,i){if(!i.isRender)return;const o=Object(r["a"])(e._contentHeader)&&Object(r["a"])(e._contentHeader.boundingVolume),a=e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent,s=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!o;if(s){let t;t=e._finalResolution?a?Dm.DARKGRAY:Dm.WHITE:Dm.YELLOW,Object(r["a"])(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(t)),e._debugBoundingVolume.update(n);const i=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");i.color=jm.toValue(t,i.color)}else!s&&Object(r["a"])(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&o?(Object(r["a"])(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(Dm.BLUE)),e._debugContentBoundingVolume.update(n)):!t.debugShowContentBoundingVolume&&Object(r["a"])(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&Object(r["a"])(e._viewerRequestVolume)?(Object(r["a"])(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(Dm.YELLOW)),e._debugViewerRequestVolume.update(n)):!t.debugShowViewerRequestVolume&&Object(r["a"])(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());const c=t.debugColorizeTiles&&!e._debugColorizeTiles||Object(r["a"])(t._heatmap.tilePropertyName),l=!t.debugColorizeTiles&&e._debugColorizeTiles;c?(t._heatmap.colorize(e,n),e._debugColorizeTiles=!0,e.color=e._debugColor):l&&(e._debugColorizeTiles=!1,e.color=Dm.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),l&&t.makeStyleDirty()}function M_e(e,t,n){const i=e._content,o=e._expiredContent;if(!e.hasMultipleContents&&Object(r["a"])(o)){if(!e.contentReady)return void o.update(t,n);e._expiredContent.destroy(),e._expiredContent=void 0}i.update(t,n)}function N_e(e,t){const n=t.clippingPlanes;let i=0;Object(r["a"])(n)&&e._isClipped&&n.enabled&&(i=n.clippingPlanesState),i!==e._clippingPlanesState&&(e._clippingPlanesState=i,e.clippingPlanesDirty=!0)}a_e.prototype.createBoundingVolume=function(e,t,n){if(!Object(r["a"])(e))throw new ye["a"]("boundingVolume must be defined");if(HJ(e,"3DTILES_bounding_volume_S2"))return new Xme(e.extensions["3DTILES_bounding_volume_S2"]);if(Object(r["a"])(e.box))return D_e(e.box,t,n);if(Object(r["a"])(e.region))return j_e(e.region,t,this._initialTransform,n);if(Object(r["a"])(e.sphere))return R_e(e.sphere,t,n);throw new ye["a"]("boundingVolume must contain a sphere, region, or box")},a_e.prototype.updateTransform=function(e){e=Object(o["a"])(e,Me.IDENTITY);const t=Me.multiply(e,this.transform,I_e),n=!Me.equals(t,this.computedTransform);if(!n)return;Me.clone(t,this.computedTransform);const i=this._header,a=this._contentHeader;this._boundingVolume=this.createBoundingVolume(i.boundingVolume,this.computedTransform,this._boundingVolume),Object(r["a"])(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(a.boundingVolume,this.computedTransform,this._contentBoundingVolume)),Object(r["a"])(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(i.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},a_e.prototype.updateGeometricErrorScale=function(){const e=Me.getScale(this.computedTransform,T_e),t=g.maximumComponent(e);this.geometricError=this._geometricError*t},a_e.prototype.update=function(e,t,n){const i=t.commandList.length;N_e(this,e),L_e(this,e,t,n),M_e(this,e,t);const o=t.commandList.length,r=o-i;this._commandsLength=r;for(let a=0;a<r;++a){const e=t.commandList[i+a],n=e.pass===hF.TRANSLUCENT;e.depthForTranslucentClassification=n}this.clippingPlanesDirty=!1};const B_e=[];function F_e(e,t,n){const i=e*Math.pow(10,t),o=parseInt(i);return o*Math.pow(10,n)}function z_e(e,t,n){return Math.max(s["a"].normalize(e,t,n)-s["a"].EPSILON7,0)}a_e.prototype.process=function(e,t){const n=t.commandList;t.commandList=B_e,this._content.update(e,t),B_e.length=0,t.commandList=n},a_e.prototype.updatePriority=function(){const e=this.tileset,t=e.preferLeaves,n=e._minimumPriority,i=e._maximumPriority,o=4,r=1,a=0,s=o,c=a+s,l=o,u=c+l,h=r,d=Math.pow(10,u),f=u+h,p=r,m=Math.pow(10,f),_=f+p,g=Math.pow(10,_);let b=z_e(this._depth,n.depth,i.depth);b=t?1-b:b;const y=!e._skipLevelOfDetail&&this.refine===foe.REPLACE,v=y?z_e(this._priorityHolder._distanceToCamera,n.distance,i.distance):z_e(this._priorityReverseScreenSpaceError,n.reverseScreenSpaceError,i.reverseScreenSpaceError),O=F_e(v,s,a),A=this._priorityProgressiveResolution?0:d,w=z_e(this._priorityHolder._foveatedFactor,n.foveatedFactor,i.foveatedFactor),T=F_e(w,l,c),C=this.priorityDeferred?m:0,E=e._pass===Ape.PRELOAD_FLIGHT?0:g;this._priority=b+O+A+T+C+E},a_e.prototype.isDestroyed=function(){return!1},a_e.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),Wc(this)};var k_e=a_e;function U_e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.id,n=e.group,a=e.class;i["a"].typeOf.object("options.group",n),i["a"].typeOf.object("options.class",a);const s=Object(r["a"])(n.properties)?n.properties:{};this._class=a,this._properties=s,this._id=t,this._extras=n.extras,this._extensions=n.extensions}Object.defineProperties(U_e.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),U_e.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},U_e.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},U_e.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},U_e.prototype.getProperty=function(e){return QJ.getProperty(e,this._properties,this._class)},U_e.prototype.setProperty=function(e,t){return QJ.setProperty(e,t,this._properties,this._class)},U_e.prototype.getPropertyBySemantic=function(e){return QJ.getPropertyBySemantic(e,this._properties,this._class)},U_e.prototype.setPropertyBySemantic=function(e,t){return QJ.setPropertyBySemantic(e,t,this._properties,this._class)};var V_e=U_e;function H_e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.tileset,n=e.class;i["a"].typeOf.object("options.tileset",t),i["a"].typeOf.object("options.class",n);const a=Object(r["a"])(t.properties)?t.properties:{};this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(H_e.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),H_e.prototype.hasProperty=function(e){return QJ.hasProperty(e,this._properties,this._class)},H_e.prototype.hasPropertyBySemantic=function(e){return QJ.hasPropertyBySemantic(e,this._properties,this._class)},H_e.prototype.getPropertyIds=function(e){return QJ.getPropertyIds(this._properties,this._class,e)},H_e.prototype.getProperty=function(e){return QJ.getProperty(e,this._properties,this._class)},H_e.prototype.setProperty=function(e,t){return QJ.setProperty(e,t,this._properties,this._class)},H_e.prototype.getPropertyBySemantic=function(e){return QJ.getPropertyBySemantic(e,this._properties,this._class)},H_e.prototype.setPropertyBySemantic=function(e,t){return QJ.setPropertyBySemantic(e,t,this._properties,this._class)};var G_e=H_e;function W_e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.metadataJson,n=e.schema;i["a"].typeOf.object("options.metadataJson",t),i["a"].typeOf.object("options.schema",n);const a=Object(o["a"])(t.metadata,t.tileset);let s;Object(r["a"])(a)&&(s=new G_e({tileset:a,class:n.classes[a.class]}));let c=[];const l=[],u=t.groups;if(Array.isArray(u)){const e=u.length;for(let t=0;t<e;t++){const e=u[t];l.push(new V_e({group:e,class:n.classes[e.class]}))}}else if(Object(r["a"])(u)){c=Object.keys(u).sort();const e=c.length;for(let t=0;t<e;t++){const e=c[t];if(u.hasOwnProperty(e)){const t=u[e];l.push(new V_e({id:e,group:u[e],class:n.classes[t.class]}))}}}this._schema=n,this._groups=l,this._groupIds=c,this._tileset=s,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(W_e.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var q_e=W_e;const Y_e={},X_e=new g;Y_e.checkChildrenWithinParent=function(e){i["a"].typeOf.object("tile",e);const t=e.children,n=t.length,o=e.boundingVolume;if(o instanceof r_e||o instanceof hme){const i=o._orientedBoundingBox;e._optimChildrenWithinParent=Tfe.USE_OPTIMIZATION;for(let o=0;o<n;++o){const n=t[o],r=n.boundingVolume;if(!(r instanceof r_e||r instanceof hme)){e._optimChildrenWithinParent=Tfe.SKIP_OPTIMIZATION;break}const a=r._orientedBoundingBox,s=g.subtract(a.center,i.center,X_e),c=g.magnitude(s);g.divideByScalar(s,c,s);const l=Math.abs(i.halfAxes[0]*s.x)+Math.abs(i.halfAxes[1]*s.y)+Math.abs(i.halfAxes[2]*s.z)+Math.abs(i.halfAxes[3]*s.x)+Math.abs(i.halfAxes[4]*s.y)+Math.abs(i.halfAxes[5]*s.z)+Math.abs(i.halfAxes[6]*s.x)+Math.abs(i.halfAxes[7]*s.y)+Math.abs(i.halfAxes[8]*s.z),u=Math.abs(a.halfAxes[0]*s.x)+Math.abs(a.halfAxes[1]*s.y)+Math.abs(a.halfAxes[2]*s.z)+Math.abs(a.halfAxes[3]*s.x)+Math.abs(a.halfAxes[4]*s.y)+Math.abs(a.halfAxes[5]*s.z)+Math.abs(a.halfAxes[6]*s.x)+Math.abs(a.halfAxes[7]*s.y)+Math.abs(a.halfAxes[8]*s.z);if(l<=u+c){e._optimChildrenWithinParent=Tfe.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===Tfe.USE_OPTIMIZATION};var K_e=Y_e;function $_e(){this._list=new Uv,this._sentinel=this._list.add(),this._trimTiles=!1}$_e.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},$_e.prototype.touch=function(e){const t=e.cacheNode;Object(r["a"])(t)&&this._list.splice(this._sentinel,t)},$_e.prototype.add=function(e){Object(r["a"])(e.cacheNode)||(e.cacheNode=this._list.add(e))},$_e.prototype.unloadTile=function(e,t,n){const i=t.cacheNode;Object(r["a"])(i)&&(this._list.remove(i),t.cacheNode=void 0,n(e,t))},$_e.prototype.unloadTiles=function(e,t){const n=this._trimTiles;this._trimTiles=!1;const i=this._list,o=1024*e.maximumMemoryUsage*1024,r=this._sentinel;let a=i.head;while(a!==r&&(e.totalMemoryUsageInBytes>o||n)){const n=a.item;a=a.next,this.unloadTile(e,n,t)}},$_e.prototype.trim=function(){this._trimTiles=!0};var J_e=$_e;function Q_e(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function Z_e(e,t){let n;return n="_loadTimestamp"===t?mo.toDate(e).getTime():e,n}function ege(e,t){const n=e.tilePropertyName;if(Object(r["a"])(n)){const i=Z_e(t[n],n);return Object(r["a"])(i)?(e._maximum=Math.max(i,e._maximum),e._minimum=Math.min(i,e._minimum),i):(e.tilePropertyName=void 0,i)}}Q_e.prototype.setReferenceMinimumMaximum=function(e,t,n){this._referenceMinimum[n]=Z_e(e,n),this._referenceMaximum[n]=Z_e(t,n)};const tge=[new Dm(.1,.1,.1,1),new Dm(.153,.278,.878,1),new Dm(.827,.231,.49,1),new Dm(.827,.188,.22,1),new Dm(1,.592,.259,1),new Dm(1,.843,0,1)];Q_e.prototype.colorize=function(e,t){const n=this.tilePropertyName;if(!Object(r["a"])(n)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const i=ege(this,e),o=this._previousMinimum,a=this._previousMaximum;if(o===Number.MAX_VALUE||a===-Number.MAX_VALUE)return;const c=a-o+s["a"].EPSILON7,l=s["a"].clamp(i-o,0,c),u=l/c,h=tge.length-1,d=u*h,f=Math.floor(d),p=Math.ceil(d),m=d-f,_=tge[f],g=tge[p],b=Dm.clone(Dm.WHITE);b.red=s["a"].lerp(_.red,g.red,m),b.green=s["a"].lerp(_.green,g.green,m),b.blue=s["a"].lerp(_.blue,g.blue,m),e._debugColor=b},Q_e.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if(Object(r["a"])(e)){const t=this._referenceMinimum[e],n=this._referenceMaximum[e],i=Object(r["a"])(t)&&Object(r["a"])(n);this._previousMinimum=i?t:this._minimum,this._previousMaximum=i?n:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};var nge=Q_e;function ige(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function oge(e,t,n,i){const o=t.innerContents,a=t.pointsLength,s=t.trianglesLength,c=t.featuresLength,l=t.geometryByteLength,u=t.texturesByteLength,h=t.batchTableByteLength;if(i?(e.numberOfFeaturesLoaded+=n?-c:c,e.numberOfPointsLoaded+=n?-a:a,e.geometryByteLength+=n?-l:l,e.texturesByteLength+=n?-u:u,e.batchTableByteLength+=n?-h:h):(e.numberOfFeaturesSelected+=n?-c:c,e.numberOfPointsSelected+=n?-a:a,e.numberOfTrianglesSelected+=n?-s:s),Object(r["a"])(o)){const t=o.length;for(let r=0;r<t;++r)oge(e,o[r],n,i)}}ige.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},ige.prototype.incrementSelectionCounts=function(e){oge(this,e,!1,!1)},ige.prototype.incrementLoadCounts=function(e){oge(this,e,!1,!0)},ige.prototype.decrementLoadCounts=function(e){oge(this,e,!0,!0)},ige.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength};var rge=ige;function age(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(age.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}}),age.prototype.makeDirty=function(){this._styleDirty=!0},age.prototype.resetDirty=function(){this._styleDirty=!1},age.prototype.applyStyle=function(e){if(!e.ready)return;if(Object(r["a"])(this._style)&&!this._style._ready)return;const t=this._styleDirty;t&&++this._lastStyleTime;const n=this._lastStyleTime,i=e._statistics,o=t?e._selectedTiles:e._selectedTilesToStyle,a=o.length;for(let r=0;r<a;++r){const e=o[r];if(e.lastStyleTime!==n){const t=e.content;e.lastStyleTime=n,t.applyStyle(this._style),i.numberOfFeaturesStyled+=t.featuresLength,++i.numberOfTilesStyled}}};var sge=age;function cge(e,t,n){const o=HJ(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;i["a"].typeOf.object("implicitTiling",o),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=n;const a=t.boundingVolume;if(!Object(r["a"])(a.box)&&!Object(r["a"])(a.region)&&!HJ(a,"3DTILES_bounding_volume_S2"))throw new ye["a"]("Only box, region and 3DTILES_bounding_volume_S2 are supported for implicit tiling");this.boundingVolume=a,this.refine=t.refine,this.subtreeUriTemplate=new Et["a"]({url:o.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const s=lge(t);for(let i=0;i<s.length;i++){const e=s[i];this.contentHeaders.push(Object(RL["a"])(e,!0));const t=new Et["a"]({url:e.uri});this.contentUriTemplates.push(t)}this.contentCount=this.contentHeaders.length,this.tileHeader=uge(t),this.subdivisionScheme=$J[o.subdivisionScheme],this.branchingFactor=$J.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=o.subtreeLevels,Object(r["a"])(o.availableLevels)?this.availableLevels=o.availableLevels:this.availableLevels=o.maximumLevel+1}function lge(e){if(HJ(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return Object(r["a"])(t.contents)?t.contents:t.content}return Object(r["a"])(e.contents)?e.contents:Object(r["a"])(e.content)?[e.content]:[]}function uge(e){const t=Object(RL["a"])(e,!0);return Object(r["a"])(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}var hge=cge;function dge(e){if(i["a"].typeOf.string("options.subdivisionScheme",e.subdivisionScheme),i["a"].typeOf.number("options.subtreeLevels",e.subtreeLevels),i["a"].typeOf.number("options.level",e.level),i["a"].typeOf.number("options.x",e.x),i["a"].typeOf.number("options.y",e.y),e.subdivisionScheme===$J.OCTREE&&i["a"].typeOf.number("options.z",e.z),e.level<0)throw new a["a"]("level must be non-negative");if(e.x<0)throw new a["a"]("x must be non-negative");if(e.y<0)throw new a["a"]("y must be non-negative");if(e.subdivisionScheme===$J.OCTREE&&e.z<0)throw new a["a"]("z must be non-negative");const t=1<<e.level;if(e.x>=t)throw new a["a"]("x is out of range");if(e.y>=t)throw new a["a"]("y is out of range");if(e.subdivisionScheme===$J.OCTREE&&e.z>=t)throw new a["a"]("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===$J.OCTREE&&(this.z=e.z)}function fge(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new a["a"]("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new a["a"]("coordinates must have same subtreeLevels")}Object.defineProperties(dge.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===$J.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===$J.OCTREE?CE.encode3D(this.x,this.y,this.z):CE.encode2D(this.x,this.y)}},tileIndex:{get:function(){const e=this.subdivisionScheme===$J.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3,t=this.mortonIndex;return e+t}}}),dge.prototype.getDescendantCoordinates=function(e){i["a"].typeOf.object("offsetCoordinates",e),fge(this,e);const t=this.level+e.level,n=(this.x<<e.level)+e.x,o=(this.y<<e.level)+e.y;if(this.subdivisionScheme===$J.OCTREE){const i=(this.z<<e.level)+e.z;return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:o,z:i})}return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:o})},dge.prototype.getAncestorCoordinates=function(e){if(i["a"].typeOf.number("offsetLevels",e),e<0)throw new a["a"]("offsetLevels must be non-negative");if(e>this.level)throw new a["a"]("ancestor cannot be above the tileset root");const t=1<<e,n=this.level-e,o=Math.floor(this.x/t),r=Math.floor(this.y/t);if(this.subdivisionScheme===$J.OCTREE){const e=Math.floor(this.z/t);return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:o,y:r,z:e})}return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:o,y:r})},dge.prototype.getOffsetCoordinates=function(e){if(i["a"].typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new a["a"]("this is not an ancestor of descendant");fge(this,e);const t=e.level-this.level,n=1<<t,o=e.x%n,r=e.y%n;if(this.subdivisionScheme===$J.OCTREE){const i=e.z%n;return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:o,y:r,z:i})}return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:o,y:r})},dge.prototype.getChildCoordinates=function(e){i["a"].typeOf.number("childIndex",e);const t=$J.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new a["a"](`childIndex must be at least 0 and less than ${t}`);const n=this.level+1,o=2*this.x+e%2,r=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===$J.OCTREE){const t=2*this.z+Math.floor(e/4)%2;return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:o,y:r,z:t})}return new dge({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:n,x:o,y:r})},dge.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},dge.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},dge.prototype.isAncestor=function(e){i["a"].typeOf.object("descendantCoordinates",e),fge(this,e);const t=e.level-this.level;if(t<=0)return!1;const n=e.x>>t,o=e.y>>t,r=this.x===n,a=this.y===o;if(this.subdivisionScheme===$J.OCTREE){const n=e.z>>t,i=this.z===n;return r&&a&&i}return r&&a},dge.prototype.isEqual=function(e){return i["a"].typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==$J.OCTREE||this.z===e.z)},dge.prototype.isImplicitTilesetRoot=function(){return 0===this.level},dge.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0},dge.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1},dge.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===$J.OCTREE&&(e.z=this.z),e};const pge=[0,0,0];dge.fromMortonIndex=function(e,t,n,i){let o;return e===$J.OCTREE?(o=CE.decode3D(i,pge),new dge({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1],z:o[2]})):(o=CE.decode2D(i,pge),new dge({subdivisionScheme:e,subtreeLevels:t,level:n,x:o[0],y:o[1]}))},dge.fromTileIndex=function(e,t,n){let i,o,r;return e===$J.OCTREE?(i=Math.floor(s["a"].log2(7*n+1)/3),o=((1<<3*i)-1)/7,r=n-o):(i=Math.floor(s["a"].log2(3*n+1)/2),o=((1<<2*i)-1)/3,r=n-o),dge.fromMortonIndex(e,t,i,r)};var mge=dge;function _ge(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.url",e.url),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new J_e,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=Object(o["a"])(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=Object(o["a"])(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new mE,this._maximumScreenSpaceError=Object(o["a"])(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=Object(o["a"])(e.maximumMemoryUsage,512),this._styleEngine=new sge,this._styleApplied=!1,this._modelMatrix=Object(r["a"])(e.modelMatrix)?Me.clone(e.modelMatrix):Me.clone(Me.IDENTITY),this._statistics=new rge,this._statisticsLast=new rge,this._statisticsPerPass=new Array(Ape.NUMBER_OF_PASSES);for(let i=0;i<Ape.NUMBER_OF_PASSES;++i)this._statisticsPerPass[i]=new rge;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new nge(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=Object(o["a"])(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=Object(o["a"])(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=s["a"].clamp(Object(o["a"])(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=Object(o["a"])(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84),this._initialClippingPlanesOriginMatrix=Me.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=Object(o["a"])(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=Object(o["a"])(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=Object(o["a"])(e.preloadWhenHidden,!1),this.preloadFlightDestinations=Object(o["a"])(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=Object(o["a"])(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=Object(o["a"])(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=Object(o["a"])(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=Object(o["a"])(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=Object(o["a"])(e.foveatedInterpolationCallback,s["a"].lerp),this.foveatedTimeDelay=Object(o["a"])(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=Object(o["a"])(e.shadows,DH.ENABLED),this.show=Object(o["a"])(e.show,!0),this.colorBlendMode=fK.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new Y8(e.pointCloudShading),this._pointCloudEyeDomeLighting=new W8,this.loadProgress=new dn["a"],this.allTilesLoaded=new dn["a"],this.initialTilesLoaded=new dn["a"],this.tileLoad=new dn["a"],this.tileUnload=new dn["a"],this.tileFailed=new dn["a"],this.tileVisible=new dn["a"],this.skipLevelOfDetail=Object(o["a"])(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=Object(o["a"])(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=Object(o["a"])(e.skipScreenSpaceErrorFactor,16),this.skipLevels=Object(o["a"])(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=Object(o["a"])(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=Object(o["a"])(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,Object(r["a"])(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new CX,this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=Object(o["a"])(e.backFaceCulling,!0),this._enableShowOutline=Object(o["a"])(e.enableShowOutline,!0),this.showOutline=Object(o["a"])(e.showOutline,!0),this.outlineColor=Object(o["a"])(e.outlineColor,Dm.BLACK),this.splitDirection=Object(o["a"])(e.splitDirection,m9.NONE),this._projectTo2D=Object(o["a"])(e.projectTo2D,!1),this.debugFreezeFrame=Object(o["a"])(e.debugFreezeFrame,!1),this.debugColorizeTiles=Object(o["a"])(e.debugColorizeTiles,!1),this._enableDebugWireframe=Object(o["a"])(e.enableDebugWireframe,!1),this.debugWireframe=Object(o["a"])(e.debugWireframe,!1),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=Object(o["a"])(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=Object(o["a"])(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=Object(o["a"])(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=Object(o["a"])(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=Object(o["a"])(e.debugShowMemoryUsage,!1),this.debugShowUrl=Object(o["a"])(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader;let t=Object(o["a"])(e.featureIdLabel,"featureId_0");"number"===typeof t&&(t=`featureId_${t}`),this._featureIdLabel=t;let n=Object(o["a"])(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof n&&(n=`instanceFeatureId_${n}`),this._instanceFeatureIdLabel=n,this._schemaLoader=void 0;const a=this;let c;this._readyPromise=Promise.resolve(e.url).then((function(e){let t;return c=Et["a"].createIfNeeded(e),a._resource=c,a._credits=c.credits,"json"===c.extension?t=c.getBaseUri(!0):c.isDataUri&&(t=""),a._url=c.url,a._basePath=t,_ge.loadJson(c)})).then((function(e){if(!a.isDestroyed())return bge(a,e)})).then((function(t){if(a.isDestroyed())return;a._root=a.loadTileset(c,t);const n=Object(r["a"])(t.asset.gltfUpAxis)?IX.fromName(t.asset.gltfUpAxis):IX.Y,i=Object(o["a"])(e.modelUpAxis,n),s=Object(o["a"])(e.modelForwardAxis,IX.X),l=t.asset;a._asset=l,a._properties=t.properties,a._geometricError=t.geometricError,a._extensionsUsed=t.extensionsUsed,a._extensions=t.extensions,a._modelUpAxis=i,a._modelForwardAxis=s,a._extras=t.extras;const u=l.extras;if(Object(r["a"])(u)&&Object(r["a"])(u.cesium)&&Object(r["a"])(u.cesium.credits)){const e=u.cesium.credits;let t=a._credits;Object(r["a"])(t)||(t=[],a._credits=t);for(let n=0;n<e.length;++n){const i=e[n];t.push(new hn(i.html,a._showCreditsOnScreen))}}const h=a._root.createBoundingVolume(t.root.boundingVolume,Me.IDENTITY),d=h.boundingSphere.center,f=a._ellipsoid.cartesianToCartographic(d);return Object(r["a"])(f)&&f.height>rn._defaultMinTerrainHeight&&(a._initialClippingPlanesOriginMatrix=ka.eastNorthUpToFixedFrame(d)),a._clippingPlanesOriginMatrix=Me.clone(a._initialClippingPlanesOriginMatrix),a}))}function gge(e,t,n,i){const o=Object(r["a"])(n.implicitTiling)||HJ(n,"3DTILES_implicit_tiling");if(o){const o=e.schema,r=new hge(t,n,o),a=new mge({subdivisionScheme:r.subdivisionScheme,subtreeLevels:r.subtreeLevels,level:0,x:0,y:0,z:0}),s=r.subtreeUriTemplate.getDerivedResource({templateValues:a.getTemplateValues()}).url,c=!0,l=Object(RL["a"])(n,c);l.contents=[{uri:s}],delete l.content,delete l.extensions;const u=new k_e(e,t,l,i);return u.implicitTileset=r,u.implicitCoordinates=a,u}return new k_e(e,t,n,i)}function bge(e,t){const n=HJ(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let i;if(Object(r["a"])(n.schemaUri)){const t=e._resource.getDerivedResource({url:n.schemaUri});i=r3.loadSchema({resource:t})}else{if(!Object(r["a"])(n.schema))return Promise.resolve(t);i=r3.loadSchema({schema:n.schema})}return e._schemaLoader=i,i.promise.then((function(i){return e._metadataExtension=new q_e({schema:i.schema,metadataJson:n}),t}))}Object.defineProperties(_ge.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._asset}},extensions:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){A4.setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._properties}},ready:{get:function(){return Object(r["a"])(this._root)}},readyPromise:{get:function(){return this._readyPromise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return IL("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(Object(r["a"])(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(Object(r["a"])(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){i["a"].defined("pointCloudShading",e),this._pointCloudShading=e}},root:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root}},boundingSphere:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=Me.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return Object(r["a"])(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(Me.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):Me.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),i["a"].typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),i["a"].typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){if(!this.ready)throw new a["a"]("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){i["a"].typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"===typeof e&&(e=`featureId_${e}`),i["a"].typeOf.string("value",e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"===typeof e&&(e=`instanceFeatureId_${e}`),i["a"].typeOf.string("value",e),this._instanceFeatureIdLabel=e}}}),_ge.loadJson=function(e){const t=Et["a"].createIfNeeded(e);return t.fetchJson()},_ge.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},_ge.prototype.loadTileset=function(e,t,n){const i=t.asset;if(!Object(r["a"])(i))throw new ye["a"]("Tileset must have an asset property.");if("0.0"!==i.version&&"1.0"!==i.version&&"1.1"!==i.version)throw new ye["a"]("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");Object(r["a"])(t.extensionsRequired)&&_ge.checkSupportedExtensions(t.extensionsRequired);const o=this._statistics,a=i.tilesetVersion;Object(r["a"])(a)&&(this._basePath+=`?v=${a}`,e=e.clone(),e.setQueryParameters({v:a}));const s=gge(this,e,t.root,n);Object(r["a"])(n)&&(n.children.push(s),s._depth=n._depth+1);const c=[];c.push(s);while(c.length>0){const t=c.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===foe.ADD;const n=t._header.children;if(Object(r["a"])(n)){const i=n.length;for(let o=0;o<i;++o){const i=n[o],r=gge(this,e,i,t);t.children.push(r),r._depth=t._depth+1,c.push(r)}}this._cullWithChildrenBounds&&K_e.checkChildrenWithinParent(t)}return s};const yge=new g,vge=new I,Oge=new Me,Age=new g,wge=new g,Tge=new g;function Cge(e,t){let n,i,o,r,a;const c=t.camera,l=e._root,u=l.contentBoundingVolume;if(u instanceof hme)n=g.normalize(c.positionWC,yge),i=c.directionWC,o=c.positionCartographic.height,r=u.minimumHeight,a=u.maximumHeight;else{const e=Me.inverseTransformation(l.computedTransform,Oge),s=t.mapProjection.ellipsoid,h=u.boundingVolume,d=Me.multiplyByPoint(e,h.center,Age);if(g.magnitude(d)>s.minimumRadius){const e=I.fromCartesian(d,s,vge);n=g.normalize(c.positionWC,yge),i=c.directionWC,o=c.positionCartographic.height,r=0,a=2*e.height}else{const t=Me.multiplyByPoint(e,c.positionWC,wge);if(n=g.UNIT_Z,i=Me.multiplyByPointAsVector(e,c.directionWC,Tge),i=g.normalize(i,i),o=t.z,u instanceof r_e){const e=l._header.boundingVolume.box[11];r=d.z-e,a=d.z+e}else if(u instanceof $me){const e=h.radius;r=d.z-e,a=d.z+e}}}const h=e.dynamicScreenSpaceErrorHeightFalloff,d=r+(a-r)*h,f=a,p=s["a"].clamp((o-d)/(f-d),0,1),m=Math.abs(g.dot(i,n));let _=1-m;_*=1-p;let b=e.dynamicScreenSpaceErrorDensity;b*=_,e._dynamicScreenSpaceErrorComputedDensity=b}function Ege(e,t){if(t.hasEmptyContent)return;const n=e._statistics,i=t.contentExpired,o=t.requestContent();o>0?n.numberOfAttemptedRequests+=o:(i&&(t.hasTilesetContent||t.hasImplicitContent?Hge(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(Dge(e,t)).catch((function(e){})),t.contentReadyPromise.then(jge(e,t)).catch(Pge(e,t)))}function xge(e,t){return e._priority-t._priority}function Sge(e,t){const n=e._requestedTilesInFlight;let i=0;const o=n.length;for(let r=0;r<o;++r){const e=n[r],o=t.frameNumber-e._touchedFrame>=1;e._contentState===vfe.LOADING?o?(e.cancelRequests(),++i):i>0&&(n[r-i]=e):++i}n.length-=i}function Ige(e,t){const n=e._requestedTiles,i=n.length;n.sort(xge);for(let o=0;o<i;++o)Ege(e,n[o])}function Dge(e,t){return function(){e._processingQueue.push(t),++e._statistics.numberOfTilesProcessing}}function Pge(e,t){return function(n){if(t._contentState!==vfe.FAILED)return;const i=t._contentResource.url,o=Object(r["a"])(n.message)?n.message:n.toString();e.tileFailed.numberOfListeners>0?e.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`))}}function jge(e,t){return function(n){--e._statistics.numberOfTilesProcessing,Object(r["a"])(n)&&(t.hasTilesetContent||t.hasImplicitContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t))}}function Rge(e){const t=e._processingQueue,n=t.length;let i=0;for(let o=0;o<n;++o){const e=t[o];e._contentState===vfe.PROCESSING?i>0&&(t[o-i]=e):++i}t.length-=i}function Lge(e,t){Rge(e);const n=e._processingQueue,i=n.length;for(let o=0;o<i;++o)n[o].process(e,t)}_ge.prototype.postPassesUpdate=function(e){this.ready&&(Sge(this,e),qge(this,e),this._cache.unloadTiles(this,Gge),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)},_ge.prototype.prePassesUpdate=function(e){if(!this.ready)return;Lge(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,Object(r["a"])(t)&&t.enabled&&t.update(e),Object(r["a"])(this._loadTimestamp)||(this._loadTimestamp=mo.clone(e.time)),this._timeSinceLoad=Math.max(1e3*mo.secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!Object(r["a"])(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&Cge(this,e),e.newFrame&&this._cache.reset()};const Mge=new g,Nge={maximumFractionDigits:3};function Bge(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,Nge):Math.round(t).toLocaleString()}function Fge(e){const t=e.boundingVolume.boundingVolume,n=t.halfAxes,i=t.radius;let o=g.clone(t.center,Mge);if(Object(r["a"])(n))o.x+=.75*(n[0]+n[3]+n[6]),o.y+=.75*(n[1]+n[4]+n[7]),o.z+=.75*(n[2]+n[5]+n[8]);else if(Object(r["a"])(i)){let e=g.normalize(t.center,Mge);e=g.multiplyByScalar(e,.75*i,Mge),o=g.add(e,t.center,Mge)}return o}function zge(e,t,n){let i="",o=0;if(t.debugShowGeometricError&&(i+=`\nGeometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics){i+=`\nCommands: ${e.commandsLength}`,o++;const t=e.content.pointsLength;t>0&&(i+=`\nPoints: ${e.content.pointsLength}`,o++);const n=e.content.trianglesLength;n>0&&(i+=`\nTriangles: ${e.content.trianglesLength}`,o++),i+=`\nFeatures: ${e.content.featuresLength}`,o++}if(t.debugShowMemoryUsage&&(i+=`\nTexture Memory: ${Bge(e.content.texturesByteLength)}`,i+=`\nGeometry Memory: ${Bge(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)i+=`\n- ${t[e]}`;o+=t.length}else i+=`\nUrl: ${e._contentHeader.uri}`,o++;const r={text:i.substring(1),position:n,font:`${19-o}px sans-serif`,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}function kge(e,t){let n,i;const o=e._selectedTiles,a=o.length,s=e._emptyTiles,c=s.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(Object(r["a"])(e.debugPickedTile)){const t=Object(r["a"])(e.debugPickPosition)?e.debugPickPosition:Fge(e.debugPickedTile),n=zge(e.debugPickedTile,e,t);n.pixelOffset=new Gt(15,-15)}}else{for(n=0;n<a;++n)i=o[n],zge(i,e,Fge(i));for(n=0;n<c;++n)i=s[n],(i.hasTilesetContent||i.hasImplicitContent)&&zge(i,e,Fge(i))}e._tileDebugLabels.update(t)}function Uge(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;const i=n.isRender,o=e._statistics,a=t.commandList,s=a.length,c=e._selectedTiles,l=c.length,u=e._emptyTiles,h=u.length,d=e.tileVisible;let f,p;const m=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&l>0;e._backfaceCommands.length=0,m&&(Object(r["a"])(e._stencilClearCommand)||(e._stencilClearCommand=new xX({stencil:0,pass:hF.CESIUM_3D_TILE,renderState:UF.fromCache({stencilMask:cW.SKIP_LOD_MASK})})),a.push(e._stencilClearCommand));const _=a.length;for(f=0;f<l;++f)p=c[f],i&&d.raiseEvent(p),p.update(e,t,n),o.incrementSelectionCounts(p.content),++o.selected;for(f=0;f<h;++f)p=u[f],p.update(e,t,n);let g=a.length-_;if(e._backfaceCommands.trim(),m){const t=e._backfaceCommands.values,n=t.length;for(a.length+=n,f=g-1;f>=0;--f)a[_+n+f]=a[_+f];for(f=0;f<n;++f)a[_+f]=t[f]}g=a.length-s,o.numberOfCommands=g,i&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&g>0&&e._pointCloudEyeDomeLighting.update(t,s,e.pointCloudShading,e.boundingSphere),i&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(Object(r["a"])(e._tileDebugLabels)||(e._tileDebugLabels=new Uue),kge(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}const Vge=[];function Hge(e,t){const n=t,i=Vge;i.push(t);while(i.length>0){t=i.pop();const o=t.children,r=o.length;for(let e=0;e<r;++e)i.push(o[e]);t!==n&&(Wge(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}function Gge(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function Wge(e,t){e._cache.unloadTile(e,t,Gge),t.destroy()}function qge(e,t){const n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,a=i.numberOfPendingRequests,s=i.numberOfTilesProcessing;rge.clone(n,i);const c=o!==a||r!==s;c&&t.afterRender.push((function(){e.loadProgress.raiseEvent(o,r)})),e._tilesLoaded=0===n.numberOfPendingRequests&&0===n.numberOfTilesProcessing&&0===n.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}function Yge(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function Xge(e,t){t.frameNumber===e._updatedModelMatrixFrame&&Object(r["a"])(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!Me.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=Me.clone(e.modelMatrix,e._previousModelMatrix)))}function Kge(e,t,n,i){if(t.mode===SH.MORPHING)return!1;if(!e.ready)return!1;const o=e._statistics;o.clear();const a=i.isRender;++e._updatedVisibilityFrame,Yge(e),Xge(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const s=i.traversal.selectTiles(e,t);if(i.requestTiles&&Ige(e),Uge(e,t,i),rge.clone(o,n),a){const n=e._credits;if(Object(r["a"])(n)&&0!==o.selected){const i=n.length;for(let o=0;o<i;++o){const i=n[o];i.showOnScreen=e._showCreditsOnScreen,t.creditDisplay.addCredit(i)}}}return s}_ge.prototype.trimLoadedTiles=function(){this._cache.trim()},_ge.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},_ge.prototype.updateForPass=function(e,t){i["a"].typeOf.object("frameState",e),i["a"].typeOf.object("tilesetPassState",t);const n=t.pass;if(n===Ape.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===Ape.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===Ape.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const r=e.commandList,a=e.camera,s=e.cullingVolume;t.ready=!1;const c=Ape.getPassOptions(n),l=c.ignoreCommands,u=Object(o["a"])(t.commandList,r),h=u.length;e.commandList=u,e.camera=Object(o["a"])(t.camera,a),e.cullingVolume=Object(o["a"])(t.cullingVolume,s);const d=this._statisticsPerPass[n];(this.show||l)&&(this._pass=n,t.ready=Kge(this,e,d,c)),l&&(u.length=h),e.commandList=r,e.camera=a,e.cullingVolume=s},_ge.prototype.hasExtension=function(e){return!!Object(r["a"])(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},_ge.prototype.isDestroyed=function(){return!1},_ge.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(r["a"])(this._schemaLoader)&&r3.unload(this._schemaLoader),Object(r["a"])(this._root)){const e=Vge;e.push(this._root);while(e.length>0){const t=e.pop();t.destroy();const n=t.children,i=n.length;for(let o=0;o<i;++o)e.push(n[o])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Wc(this)},_ge.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},_ge.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!_ge.supportedExtensions[e[t]])throw new ye["a"](`Unsupported 3D Tiles Extension: ${e[t]}`)};var $ge=_ge;const Jge=new Me;function Qge(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");if(!Object(r["a"])(t))throw new a["a"]("entityCollection is required.");t.collectionChanged.addEventListener(Qge.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new pu,this._onCollectionChanged(t,t.values,[],[])}function Zge(e,t,n,i){const o=n[t.id];Object(r["a"])(o)&&(i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}function ebe(e,t,n){e.readyPromise.catch((function(e){console.error(e),n[t.id].loadFail=!0}))}Qge.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,a=t.length;o<a;o++){const a=t[o],s=a._tileset;let c,l=n[a.id];const u=a.isShowing&&a.isAvailable(e)&&aN.getValueOrDefault(s._show,e,!0);let h;if(u&&(h=a.computeModelMatrix(e,Jge),c=Et["a"].createIfNeeded(aN.getValueOrUndefined(s._uri,e))),!u){Object(r["a"])(l)&&(l.tilesetPrimitive.show=!1);continue}let d=Object(r["a"])(l)?l.tilesetPrimitive:void 0;Object(r["a"])(d)&&c.url===l.url||(Object(r["a"])(d)&&(i.removeAndDestroy(d),delete n[a.id]),d=new $ge({url:c}),d.id=a,i.add(d),l={tilesetPrimitive:d,url:c.url,loadFail:!1},n[a.id]=l,ebe(d,a,n)),d.show=!0,Object(r["a"])(h)&&(d.modelMatrix=h),d.maximumScreenSpaceError=aN.getValueOrDefault(s.maximumScreenSpaceError,e,d.maximumScreenSpaceError)}return!0},Qge.prototype.isDestroyed=function(){return!1},Qge.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(Qge.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)Zge(this,e[i],t,n);return Wc(this)},Qge.prototype.getBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");if(!Object(r["a"])(t))throw new a["a"]("result is required.");const n=this._tilesetHash[e.id];if(!Object(r["a"])(n)||n.loadFail)return oN.FAILED;const i=n.tilesetPrimitive;return Object(r["a"])(i)&&i.show?i.ready?(Tt.clone(i.boundingSphere,t),oN.DONE):oN.PENDING:oN.FAILED},Qge.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._entitiesToVisualize,c=this._tilesetHash,l=this._primitives;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._tileset)&&s.set(a.id,a);for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._tileset)?s.set(a.id,a):(Zge(this,a,c,l),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],Zge(this,a,c,l),s.remove(a.id)};var tbe=Qge;const nbe=Dm.WHITE,ibe=Dm.BLACK,obe=new Gt(2,2);function rbe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.repeat=e.repeat}Object.defineProperties(rbe.prototype,{isConstant:{get:function(){return aN.isConstant(this._evenColor)&&aN.isConstant(this._oddColor)&&aN.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},evenColor:XM("evenColor"),oddColor:XM("oddColor"),repeat:XM("repeat")}),rbe.prototype.getType=function(e){return"Checkerboard"},rbe.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.lightColor=aN.getValueOrClonedDefault(this._evenColor,e,nbe,t.lightColor),t.darkColor=aN.getValueOrClonedDefault(this._oddColor,e,ibe,t.darkColor),t.repeat=aN.getValueOrDefault(this._repeat,e,obe),t},rbe.prototype.equals=function(e){return this===e||e instanceof rbe&&aN.equals(this._evenColor,e._evenColor)&&aN.equals(this._oddColor,e._oddColor)&&aN.equals(this._repeat,e._repeat)};var abe=rbe;const sbe={id:void 0};function cbe(e){if(e._firing)e._refire=!0;else if(0===e._suspendCount){const t=e._addedEntities,n=e._removedEntities,i=e._changedEntities;if(0!==i.length||0!==t.length||0!==n.length){e._firing=!0;do{e._refire=!1;const o=t.values.slice(0),r=n.values.slice(0),a=i.values.slice(0);t.removeAll(),n.removeAll(),i.removeAll(),e._collectionChanged.raiseEvent(e,o,r,a)}while(e._refire);e._firing=!1}}}function lbe(e){this._owner=e,this._entities=new pu,this._addedEntities=new pu,this._removedEntities=new pu,this._changedEntities=new pu,this._suspendCount=0,this._collectionChanged=new dn["a"],this._id=ML(),this._show=!0,this._firing=!1,this._refire=!1}lbe.prototype.suspendEvents=function(){this._suspendCount++},lbe.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new a["a"]("resumeEvents can not be called before suspendEvents.");this._suspendCount--,cbe(this)},Object.defineProperties(lbe.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");if(e===this._show)return;let t;this.suspendEvents();const n=[],i=this._entities.values,o=i.length;for(t=0;t<o;t++)n.push(i[t].isShowing);for(this._show=e,t=0;t<o;t++){const e=n[t],o=i[t];e!==o.isShowing&&o.definitionChanged.raiseEvent(o,"isShowing",o.isShowing,e)}this.resumeEvents()}},owner:{get:function(){return this._owner}}}),lbe.prototype.computeAvailability=function(){let e=oE.MAXIMUM_VALUE,t=oE.MINIMUM_VALUE;const n=this._entities.values;for(let i=0,o=n.length;i<o;i++){const o=n[i],a=o.availability;if(Object(r["a"])(a)){const n=a.start,i=a.stop;mo.lessThan(n,e)&&!n.equals(oE.MINIMUM_VALUE)&&(e=n),mo.greaterThan(i,t)&&!i.equals(oE.MAXIMUM_VALUE)&&(t=i)}}return oE.MAXIMUM_VALUE.equals(e)&&(e=oE.MINIMUM_VALUE),oE.MINIMUM_VALUE.equals(t)&&(t=oE.MAXIMUM_VALUE),new ZC({start:e,stop:t})},lbe.prototype.add=function(e){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");e instanceof SY||(e=new SY(e));const t=e.id,n=this._entities;if(n.contains(t))throw new ye["a"](`An entity with id ${t} already exists in this collection.`);return e.entityCollection=this,n.set(t,e),this._removedEntities.remove(t)||this._addedEntities.set(t,e),e.definitionChanged.addEventListener(lbe.prototype._onEntityDefinitionChanged,this),cbe(this),e},lbe.prototype.remove=function(e){return!!Object(r["a"])(e)&&this.removeById(e.id)},lbe.prototype.contains=function(e){if(!Object(r["a"])(e))throw new a["a"]("entity is required");return this._entities.get(e.id)===e},lbe.prototype.removeById=function(e){if(!Object(r["a"])(e))return!1;const t=this._entities,n=t.get(e);return!!this._entities.remove(e)&&(this._addedEntities.remove(e)||(this._removedEntities.set(e,n),this._changedEntities.remove(e)),this._entities.remove(e),n.definitionChanged.removeEventListener(lbe.prototype._onEntityDefinitionChanged,this),cbe(this),!0)},lbe.prototype.removeAll=function(){const e=this._entities,t=e.length,n=e.values,i=this._addedEntities,o=this._removedEntities;for(let a=0;a<t;a++){const e=n[a],t=e.id,s=i.get(t);Object(r["a"])(s)||(e.definitionChanged.removeEventListener(lbe.prototype._onEntityDefinitionChanged,this),o.set(t,e))}e.removeAll(),i.removeAll(),this._changedEntities.removeAll(),cbe(this)},lbe.prototype.getById=function(e){if(!Object(r["a"])(e))throw new a["a"]("id is required.");return this._entities.get(e)},lbe.prototype.getOrCreateEntity=function(e){if(!Object(r["a"])(e))throw new a["a"]("id is required.");let t=this._entities.get(e);return Object(r["a"])(t)||(sbe.id=e,t=new SY(sbe),this.add(t)),t},lbe.prototype._onEntityDefinitionChanged=function(e){const t=e.id;this._addedEntities.contains(t)||this._changedEntities.set(t,e),cbe(this)};var ube=lbe;const hbe={id:void 0},dbe=new Array(2);function fbe(e){const t=e.propertyNames,n=t.length;for(let i=0;i<n;i++)e[t[i]]=void 0;e._name=void 0,e._availability=void 0}function pbe(e,t,n,i){dbe[0]=n,dbe[1]=i.id,t[JSON.stringify(dbe)]=i.definitionChanged.addEventListener(gbe.prototype._onDefinitionChanged,e)}function mbe(e,t,n,i){dbe[0]=n,dbe[1]=i.id;const o=JSON.stringify(dbe);t[o](),t[o]=void 0}function _be(e){if(e._shouldRecomposite=!0,0!==e._suspendCount)return;const t=e._collections,n=t.length,i=e._collectionsCopy,o=i.length;let a,s,c,l,u;const h=e._composite,d=new ube(e),f=e._eventHash;let p;for(a=0;a<o;a++)for(u=i[a],u.collectionChanged.removeEventListener(gbe.prototype._onCollectionChanged,e),c=u.values,p=u.id,l=c.length-1;l>-1;l--)s=c[l],mbe(e,f,p,s);for(a=n-1;a>=0;a--)for(u=t[a],u.collectionChanged.addEventListener(gbe.prototype._onCollectionChanged,e),c=u.values,p=u.id,l=c.length-1;l>-1;l--){s=c[l],pbe(e,f,p,s);let t=d.getById(s.id);Object(r["a"])(t)||(t=h.getById(s.id),Object(r["a"])(t)?fbe(t):(hbe.id=s.id,t=new SY(hbe)),d.add(t)),t.merge(s)}e._collectionsCopy=t.slice(0),h.suspendEvents(),h.removeAll();const m=d.values;for(a=0;a<m.length;a++)h.add(m[a]);h.resumeEvents()}function gbe(e,t){this._owner=t,this._composite=new ube(this),this._suspendCount=0,this._collections=Object(r["a"])(e)?e.slice():[],this._collectionsCopy=[],this._id=ML(),this._eventHash={},_be(this),this._shouldRecomposite=!1}function bbe(e,t){if(!Object(r["a"])(t))throw new a["a"]("collection is required.");const n=e.indexOf(t);if(-1===n)throw new a["a"]("collection is not in this composite.");return n}function ybe(e,t,n){const i=e._collections;if(t=s["a"].clamp(t,0,i.length-1),n=s["a"].clamp(n,0,i.length-1),t===n)return;const o=i[t];i[t]=i[n],i[n]=o,_be(e)}Object.defineProperties(gbe.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._composite.values}},owner:{get:function(){return this._owner}}}),gbe.prototype.addCollection=function(e,t){const n=Object(r["a"])(t);if(!Object(r["a"])(e))throw new a["a"]("collection is required.");if(n){if(t<0)throw new a["a"]("index must be greater than or equal to zero.");if(t>this._collections.length)throw new a["a"]("index must be less than or equal to the number of collections.")}n?this._collections.splice(t,0,e):(t=this._collections.length,this._collections.push(e)),_be(this)},gbe.prototype.removeCollection=function(e){const t=this._collections.indexOf(e);return-1!==t&&(this._collections.splice(t,1),_be(this),!0)},gbe.prototype.removeAllCollections=function(){this._collections.length=0,_be(this)},gbe.prototype.containsCollection=function(e){return-1!==this._collections.indexOf(e)},gbe.prototype.contains=function(e){return this._composite.contains(e)},gbe.prototype.indexOfCollection=function(e){return this._collections.indexOf(e)},gbe.prototype.getCollection=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.","index");return this._collections[e]},gbe.prototype.getCollectionsLength=function(){return this._collections.length},gbe.prototype.raiseCollection=function(e){const t=bbe(this._collections,e);ybe(this,t,t+1)},gbe.prototype.lowerCollection=function(e){const t=bbe(this._collections,e);ybe(this,t,t-1)},gbe.prototype.raiseCollectionToTop=function(e){const t=bbe(this._collections,e);t!==this._collections.length-1&&(this._collections.splice(t,1),this._collections.push(e),_be(this))},gbe.prototype.lowerCollectionToBottom=function(e){const t=bbe(this._collections,e);0!==t&&(this._collections.splice(t,1),this._collections.splice(0,0,e),_be(this))},gbe.prototype.suspendEvents=function(){this._suspendCount++,this._composite.suspendEvents()},gbe.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new a["a"]("resumeEvents can not be called before suspendEvents.");this._suspendCount--,this._shouldRecomposite&&0===this._suspendCount&&(_be(this),this._shouldRecomposite=!1),this._composite.resumeEvents()},gbe.prototype.computeAvailability=function(){return this._composite.computeAvailability()},gbe.prototype.getById=function(e){return this._composite.getById(e)},gbe.prototype._onCollectionChanged=function(e,t,n){const i=this._collectionsCopy,o=i.length,a=this._composite;let s,c,l,u;a.suspendEvents();const h=n.length,d=this._eventHash,f=e.id;for(s=0;s<h;s++){const e=n[s];mbe(this,d,f,e);const t=e.id;for(c=o-1;c>=0;c--)l=i[c].getById(t),Object(r["a"])(l)&&(Object(r["a"])(u)||(u=a.getById(t),fbe(u)),u.merge(l));Object(r["a"])(u)||a.removeById(t),u=void 0}const p=t.length;for(s=0;s<p;s++){const e=t[s];pbe(this,d,f,e);const n=e.id;for(c=o-1;c>=0;c--)l=i[c].getById(n),Object(r["a"])(l)&&(Object(r["a"])(u)||(u=a.getById(n),Object(r["a"])(u)?fbe(u):(hbe.id=n,u=new SY(hbe),a.add(u))),u.merge(l));u=void 0}a.resumeEvents()},gbe.prototype._onDefinitionChanged=function(e,t,n,i){const o=this._collections,a=this._composite,s=o.length,c=e.id,l=a.getById(c);let u=l[t];const h=!Object(r["a"])(u);let d=!0;for(let f=s-1;f>=0;f--){const n=o[f].getById(e.id);if(Object(r["a"])(n)){const e=n[t];if(Object(r["a"])(e)){if(d){if(d=!1,!Object(r["a"])(e.merge)||!Object(r["a"])(e.clone)){u=e;break}u=e.clone(u)}u.merge(e)}}}h&&-1===l.propertyNames.indexOf(t)&&l.addProperty(t),l[t]=u};var vbe=gbe;function Obe(e,t,n,i){function o(){n.raiseEvent(e)}const a=[];t.removeAll();const s=i.length;for(let c=0;c<s;c++){const e=i.get(c);Object(r["a"])(e.data)&&-1===a.indexOf(e.data)&&t.add(e.data.definitionChanged,o)}}function Abe(){this._eventHelper=new gO,this._definitionChanged=new dn["a"],this._intervals=new xR,this._intervals.changedEvent.addEventListener(Abe.prototype._intervalsChanged,this)}Object.defineProperties(Abe.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),Abe.prototype.getValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("time is required");const n=this._intervals.findDataForIntervalContainingDate(e);if(Object(r["a"])(n))return n.getValue(e,t)},Abe.prototype.equals=function(e){return this===e||e instanceof Abe&&this._intervals.equals(e._intervals,aN.equals)},Abe.prototype._intervalsChanged=function(){Obe(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};var wbe=Abe;function Tbe(){this._definitionChanged=new dn["a"],this._composite=new wbe,this._composite.definitionChanged.addEventListener(Tbe.prototype._raiseDefinitionChanged,this)}Object.defineProperties(Tbe.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}}),Tbe.prototype.getType=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required");const t=this._composite._intervals.findDataForIntervalContainingDate(e);if(Object(r["a"])(t))return t.getType(e)},Tbe.prototype.getValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("time is required");const n=this._composite._intervals.findDataForIntervalContainingDate(e);if(Object(r["a"])(n))return n.getValue(e,t)},Tbe.prototype.equals=function(e){return this===e||e instanceof Tbe&&this._composite.equals(e._composite,aN.equals)},Tbe.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var Cbe=Tbe;function Ebe(e){this._referenceFrame=Object(o["a"])(e,iD.FIXED),this._definitionChanged=new dn["a"],this._composite=new wbe,this._composite.definitionChanged.addEventListener(Ebe.prototype._raiseDefinitionChanged,this)}Object.defineProperties(Ebe.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}}),Ebe.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},Ebe.prototype.getValueInReferenceFrame=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceFrame is required.");const i=this._composite._intervals.findDataForIntervalContainingDate(e);if(Object(r["a"])(i))return i.getValueInReferenceFrame(e,t,n)},Ebe.prototype.equals=function(e){return this===e||e instanceof Ebe&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,aN.equals)},Ebe.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var xbe=Ebe;const Sbe=new GM(0);function Ibe(e){FY.call(this,e),this._zIndex=0,this._terrainOffsetProperty=void 0}Object(r["a"])(Object.create)&&(Ibe.prototype=Object.create(FY.prototype),Ibe.prototype.constructor=Ibe),Object.defineProperties(Ibe.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),Ibe.prototype._isOnTerrain=function(e,t){return this._fillEnabled&&!Object(r["a"])(t.height)&&!Object(r["a"])(t.extrudedHeight)&&kW.isSupported(this._scene)},Ibe.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight;return 0===t||Object(r["a"])(n)&&n!==t},Ibe.prototype._computeCenter=a["a"].throwInstantiationError,Ibe.prototype._onEntityPropertyChanged=function(e,t,n,i){if(FY.prototype._onEntityPropertyChanged.call(this,e,t,n,i),-1===this._observedPropertyNames.indexOf(t))return;const a=this._entity[this._geometryPropertyName];if(!Object(r["a"])(a))return;Object(r["a"])(a.zIndex)&&(Object(r["a"])(a.height)||Object(r["a"])(a.extrudedHeight))&&ab(ab.geometryZIndex),this._zIndex=Object(o["a"])(a.zIndex,Sbe),Object(r["a"])(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const s=a.heightReference,c=a.extrudedHeightReference;if(Object(r["a"])(s)||Object(r["a"])(c)){const e=new kY(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new GY(this._scene,e,s,c)}},Ibe.prototype.destroy=function(){Object(r["a"])(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),FY.prototype.destroy.call(this)},Ibe.getGeometryHeight=function(e,t){if(i["a"].defined("heightReference",t),Object(r["a"])(e))return t!==QM.CLAMP_TO_GROUND?e:0;t!==QM.NONE&&ab(ab.geometryHeightReference)},Ibe.getGeometryExtrudedHeight=function(e,t){if(i["a"].defined("extrudedHeightReference",t),Object(r["a"])(e))return t!==QM.CLAMP_TO_GROUND?e:Ibe.CLAMP_TO_GROUND;t!==QM.NONE&&ab(ab.geometryExtrudedHeightReference)},Ibe.CLAMP_TO_GROUND="clamp",Ibe.computeGeometryOffsetAttribute=function(e,t,n,i){Object(r["a"])(e)&&Object(r["a"])(t)||(t=QM.NONE),Object(r["a"])(n)&&Object(r["a"])(i)||(i=QM.NONE);let o=0;return t!==QM.NONE&&o++,i===QM.RELATIVE_TO_GROUND&&o++,2===o?Gu.ALL:1===o?Gu.TOP:void 0};var Dbe=Ibe;const Pbe=new Dm,jbe=g.ZERO,Rbe=new g,Lbe=new Fe;function Mbe(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function Nbe(e,t){Dbe.call(this,{entity:e,scene:t,geometryOptions:new Mbe(e),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(e,"corridor",e.corridor,void 0)}function Bbe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(Nbe.prototype=Object.create(Dbe.prototype),Nbe.prototype.constructor=Nbe),Nbe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,Pbe)),Object(r["a"])(t)||(t=Dm.WHITE),o.color=jm.fromColor(t)}return Object(r["a"])(this._options.offsetAttribute)&&(o.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,jbe,Rbe))),new Sd({id:t,geometry:new Gy(this._options),attributes:o})},Nbe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,Pbe),s={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(s.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,jbe,Rbe))),new Sd({id:t,geometry:new ev(this._options),attributes:s})},Nbe.prototype._computeCenter=function(e,t){const n=aN.getValueOrUndefined(this._entity.corridor.positions,e);if(Object(r["a"])(n)&&0!==n.length)return g.clone(n[Math.floor(n.length/2)],t)},Nbe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.positions)||!Object(r["a"])(t.width)||FY.prototype._isHidden.call(this,e,t)},Nbe.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!aN.isConstant(t.height)||!aN.isConstant(t.extrudedHeight)||!aN.isConstant(t.granularity)||!aN.isConstant(t.width)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.cornerType)||!aN.isConstant(t.zIndex)||this._onTerrain&&!aN.isConstant(this._materialProperty)&&!(this._materialProperty instanceof oF)},Nbe.prototype._setStaticOptions=function(e,t){let n=aN.getValueOrUndefined(t.height,oE.MINIMUM_VALUE);const i=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE);let o=aN.getValueOrUndefined(t.extrudedHeight,oE.MINIMUM_VALUE);const a=aN.getValueOrDefault(t.extrudedHeightReference,oE.MINIMUM_VALUE,QM.NONE);Object(r["a"])(o)&&!Object(r["a"])(n)&&(n=0);const s=this._options;s.vertexFormat=this._materialProperty instanceof oF?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,s.positions=t.positions.getValue(oE.MINIMUM_VALUE,s.positions),s.width=t.width.getValue(oE.MINIMUM_VALUE),s.granularity=aN.getValueOrUndefined(t.granularity,oE.MINIMUM_VALUE),s.cornerType=aN.getValueOrUndefined(t.cornerType,oE.MINIMUM_VALUE),s.offsetAttribute=Dbe.computeGeometryOffsetAttribute(n,i,o,a),s.height=Dbe.getGeometryHeight(n,i),o=Dbe.getGeometryExtrudedHeight(o,a),o===Dbe.CLAMP_TO_GROUND&&(o=rn.getMinimumMaximumHeights(Gy.computeRectangle(s,Lbe)).minimumTerrainHeight),s.extrudedHeight=o},Nbe.DynamicGeometryUpdater=Bbe,Object(r["a"])(Object.create)&&(Bbe.prototype=Object.create(GW.prototype),Bbe.prototype.constructor=Bbe),Bbe.prototype._isHidden=function(e,t,n){const i=this._options;return!Object(r["a"])(i.positions)||!Object(r["a"])(i.width)||GW.prototype._isHidden.call(this,e,t,n)},Bbe.prototype._setOptions=function(e,t,n){const i=this._options;let o=aN.getValueOrUndefined(t.height,n);const a=aN.getValueOrDefault(t.heightReference,n,QM.NONE);let s=aN.getValueOrUndefined(t.extrudedHeight,n);const c=aN.getValueOrDefault(t.extrudedHeightReference,n,QM.NONE);Object(r["a"])(s)&&!Object(r["a"])(o)&&(o=0),i.positions=aN.getValueOrUndefined(t.positions,n),i.width=aN.getValueOrUndefined(t.width,n),i.granularity=aN.getValueOrUndefined(t.granularity,n),i.cornerType=aN.getValueOrUndefined(t.cornerType,n),i.offsetAttribute=Dbe.computeGeometryOffsetAttribute(o,a,s,c),i.height=Dbe.getGeometryHeight(o,a),s=Dbe.getGeometryExtrudedHeight(s,c),s===Dbe.CLAMP_TO_GROUND&&(s=rn.getMinimumMaximumHeights(Gy.computeRectangle(i,Lbe)).minimumTerrainHeight),i.extrudedHeight=s};var Fbe=Nbe;function zbe(){a["a"].throwInstantiationError()}Object.defineProperties(zbe.prototype,{name:{get:a["a"].throwInstantiationError},clock:{get:a["a"].throwInstantiationError},entities:{get:a["a"].throwInstantiationError},isLoading:{get:a["a"].throwInstantiationError},changedEvent:{get:a["a"].throwInstantiationError},errorEvent:{get:a["a"].throwInstantiationError},loadingEvent:{get:a["a"].throwInstantiationError},show:{get:a["a"].throwInstantiationError},clustering:{get:a["a"].throwInstantiationError}}),zbe.prototype.update=function(e){a["a"].throwInstantiationError()},zbe.setLoading=function(e,t){e._isLoading!==t&&(t?e._entityCollection.suspendEvents():e._entityCollection.resumeEvents(),e._isLoading=t,e._loading.raiseEvent(e,t))};var kbe=zbe;function Ube(e,t){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),Object(r["a"])(e.disableDepthTestDistance)&&e.disableDepthTestDistance<0)throw new a["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");let n=e.translucencyByDistance,i=e.scaleByDistance,s=e.distanceDisplayCondition;if(Object(r["a"])(n)){if(n.far<=n.near)throw new a["a"]("translucencyByDistance.far must be greater than translucencyByDistance.near.");n=xE.clone(n)}if(Object(r["a"])(i)){if(i.far<=i.near)throw new a["a"]("scaleByDistance.far must be greater than scaleByDistance.near.");i=xE.clone(i)}if(Object(r["a"])(s)){if(s.far<=s.near)throw new a["a"]("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");s=Sv.clone(s)}this._show=Object(o["a"])(e.show,!0),this._position=g.clone(Object(o["a"])(e.position,g.ZERO)),this._actualPosition=g.clone(this._position),this._color=Dm.clone(Object(o["a"])(e.color,Dm.WHITE)),this._outlineColor=Dm.clone(Object(o["a"])(e.outlineColor,Dm.TRANSPARENT)),this._outlineWidth=Object(o["a"])(e.outlineWidth,0),this._pixelSize=Object(o["a"])(e.pixelSize,10),this._scaleByDistance=i,this._translucencyByDistance=n,this._distanceDisplayCondition=s,this._disableDepthTestDistance=Object(o["a"])(e.disableDepthTestDistance,0),this._id=e.id,this._collection=Object(o["a"])(e.collection,t),this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=t,this._dirty=!1,this._index=-1}const Vbe=Ube.SHOW_INDEX=0,Hbe=Ube.POSITION_INDEX=1,Gbe=Ube.COLOR_INDEX=2,Wbe=Ube.OUTLINE_COLOR_INDEX=3,qbe=Ube.OUTLINE_WIDTH_INDEX=4,Ybe=Ube.PIXEL_SIZE_INDEX=5,Xbe=Ube.SCALE_BY_DISTANCE_INDEX=6,Kbe=Ube.TRANSLUCENCY_BY_DISTANCE_INDEX=7,$be=Ube.DISTANCE_DISPLAY_CONDITION_INDEX=8,Jbe=Ube.DISABLE_DEPTH_DISTANCE_INDEX=9;function Qbe(e,t){const n=e._pointPrimitiveCollection;Object(r["a"])(n)&&(n._updatePointPrimitive(e,t),e._dirty=!0)}Ube.NUMBER_OF_PROPERTIES=10,Object.defineProperties(Ube.prototype,{show:{get:function(){return this._show},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._show!==e&&(this._show=e,Qbe(this,Vbe))}},position:{get:function(){return this._position},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._position;g.equals(t,e)||(g.clone(e,t),g.clone(e,this._actualPosition),Qbe(this,Hbe))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");const t=this._scaleByDistance;xE.equals(t,e)||(this._scaleByDistance=xE.clone(e,t),Qbe(this,Xbe))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far distance must be greater than near distance.");const t=this._translucencyByDistance;xE.equals(t,e)||(this._translucencyByDistance=xE.clone(e,t),Qbe(this,Kbe))}},pixelSize:{get:function(){return this._pixelSize},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._pixelSize!==e&&(this._pixelSize=e,Qbe(this,Ybe))}},color:{get:function(){return this._color},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._color;Dm.equals(t,e)||(Dm.clone(e,t),Qbe(this,Gbe))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");const t=this._outlineColor;Dm.equals(t,e)||(Dm.clone(e,t),Qbe(this,Wbe))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._outlineWidth!==e&&(this._outlineWidth=e,Qbe(this,qbe))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(Object(r["a"])(e)&&e.far<=e.near)throw new a["a"]("far must be greater than near");Sv.equals(this._distanceDisplayCondition,e)||(this._distanceDisplayCondition=Sv.clone(e,this._distanceDisplayCondition),Qbe(this,$be))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(this._disableDepthTestDistance!==e){if(!Object(r["a"])(e)||e<0)throw new a["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance=e,Qbe(this,Jbe)}}},id:{get:function(){return this._id},set:function(e){this._id=e,Object(r["a"])(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,Qbe(this,Vbe))}}}),Ube.prototype.getPickId=function(e){return Object(r["a"])(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId},Ube.prototype._getActualPosition=function(){return this._actualPosition},Ube.prototype._setActualPosition=function(e){g.clone(e,this._actualPosition),Qbe(this,Hbe)};const Zbe=new be;Ube._computeActualPosition=function(e,t,n){return t.mode===SH.SCENE3D?e:(Me.multiplyByPoint(n,e,Zbe),f9.computeActualWgs84Position(t,Zbe))};const eye=new be;Ube._computeScreenSpacePosition=function(e,t,n,i){const o=Me.multiplyByVector(e,be.fromElements(t.x,t.y,t.z,1,eye),eye),r=f9.wgs84ToWindowCoordinates(n,o,i);return r},Ube.prototype.computeScreenSpacePosition=function(e,t){const n=this._pointPrimitiveCollection;if(Object(r["a"])(t)||(t=new Gt),!Object(r["a"])(n))throw new a["a"]("PointPrimitive must be in a collection.");if(!Object(r["a"])(e))throw new a["a"]("scene is required.");const i=n.modelMatrix,o=Ube._computeScreenSpacePosition(i,this._actualPosition,e,t);if(Object(r["a"])(o))return o.y=e.canvas.clientHeight-o.y,o},Ube.getScreenSpaceBoundingBox=function(e,t,n){const i=e.pixelSize,o=.5*i,a=t.x-o,s=t.y-o,c=i,l=i;return Object(r["a"])(n)||(n=new Au),n.x=a,n.y=s,n.width=c,n.height=l,n},Ube.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&this._id===e._id&&g.equals(this._position,e._position)&&Dm.equals(this._color,e._color)&&this._pixelSize===e._pixelSize&&this._outlineWidth===e._outlineWidth&&this._show===e._show&&Dm.equals(this._outlineColor,e._outlineColor)&&xE.equals(this._scaleByDistance,e._scaleByDistance)&&xE.equals(this._translucencyByDistance,e._translucencyByDistance)&&Sv.equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance},Ube.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0};var tye=Ube,nye="varying vec4 v_color;\nvarying vec4 v_outlineColor;\nvarying float v_innerPercent;\nvarying float v_pixelDistance;\nvarying vec4 v_pickColor;\n\nvoid main()\n{\n    // The distance in UV space from this fragment to the center of the point, at most 0.5.\n    float distanceToCenter = length(gl_PointCoord - vec2(0.5));\n    // The max distance stops one pixel shy of the edge to leave space for anti-aliasing.\n    float maxDistance = max(0.0, 0.5 - v_pixelDistance);\n    float wholeAlpha = 1.0 - smoothstep(maxDistance, 0.5, distanceToCenter);\n    float innerAlpha = 1.0 - smoothstep(maxDistance * v_innerPercent, 0.5 * v_innerPercent, distanceToCenter);\n\n    vec4 color = mix(v_outlineColor, v_color, innerAlpha);\n    color.a *= wholeAlpha;\n\n// Fully transparent parts of the billboard are not pickable.\n#if !defined(OPAQUE) && !defined(TRANSLUCENT)\n    if (color.a < 0.005)   // matches 0/255 and 1/255\n    {\n        discard;\n    }\n#else\n// The billboard is rendered twice. The opaque pass discards translucent fragments\n// and the translucent pass discards opaque fragments.\n#ifdef OPAQUE\n    if (color.a < 0.995)   // matches < 254/255\n    {\n        discard;\n    }\n#else\n    if (color.a >= 0.995)  // matches 254/255 and 255/255\n    {\n        discard;\n    }\n#endif\n#endif\n\n    gl_FragColor = czm_gammaCorrect(color);\n    czm_writeLogDepth();\n}\n",iye='uniform float u_maxTotalPointSize;\n\nattribute vec4 positionHighAndSize;\nattribute vec4 positionLowAndOutline;\nattribute vec4 compressedAttribute0;                       // color, outlineColor, pick color\nattribute vec4 compressedAttribute1;                       // show, translucency by distance, some free space\nattribute vec4 scaleByDistance;                            // near, nearScale, far, farScale\nattribute vec3 distanceDisplayConditionAndDisableDepth;    // near, far, disableDepthTestDistance\n\nvarying vec4 v_color;\nvarying vec4 v_outlineColor;\nvarying float v_innerPercent;\nvarying float v_pixelDistance;\nvarying vec4 v_pickColor;\n\nconst float SHIFT_LEFT8 = 256.0;\nconst float SHIFT_RIGHT8 = 1.0 / 256.0;\n\nvoid main()\n{\n    // Modifying this shader may also require modifications to PointPrimitive._computeScreenSpacePosition\n\n    // unpack attributes\n    vec3 positionHigh = positionHighAndSize.xyz;\n    vec3 positionLow = positionLowAndOutline.xyz;\n    float outlineWidthBothSides = 2.0 * positionLowAndOutline.w;\n    float totalSize = positionHighAndSize.w + outlineWidthBothSides;\n    float outlinePercent = outlineWidthBothSides / totalSize;\n    // Scale in response to browser-zoom.\n    totalSize *= czm_pixelRatio;\n    // Add padding for anti-aliasing on both sides.\n    totalSize += 3.0;\n\n    float temp = compressedAttribute1.x * SHIFT_RIGHT8;\n    float show = floor(temp);\n\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    vec4 translucencyByDistance;\n    translucencyByDistance.x = compressedAttribute1.z;\n    translucencyByDistance.z = compressedAttribute1.w;\n\n    translucencyByDistance.y = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n\n    temp = compressedAttribute1.y * SHIFT_RIGHT8;\n    translucencyByDistance.w = ((temp - floor(temp)) * SHIFT_LEFT8) / 255.0;\n#endif\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 color;\n    vec4 outlineColor;\n    vec4 pickColor;\n\n    // compressedAttribute0.z => pickColor.rgb\n\n    temp = compressedAttribute0.z * SHIFT_RIGHT8;\n    pickColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    pickColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor.r = floor(temp);\n\n    // compressedAttribute0.x => color.rgb\n\n    temp = compressedAttribute0.x * SHIFT_RIGHT8;\n    color.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    color.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    color.r = floor(temp);\n\n    // compressedAttribute0.y => outlineColor.rgb\n\n    temp = compressedAttribute0.y * SHIFT_RIGHT8;\n    outlineColor.b = (temp - floor(temp)) * SHIFT_LEFT8;\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.g = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor.r = floor(temp);\n\n    // compressedAttribute0.w => color.a, outlineColor.a, pickColor.a\n\n    temp = compressedAttribute0.w * SHIFT_RIGHT8;\n    pickColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    pickColor = pickColor / 255.0;\n\n    temp = floor(temp) * SHIFT_RIGHT8;\n    outlineColor.a = (temp - floor(temp)) * SHIFT_LEFT8;\n    outlineColor /= 255.0;\n    color.a = floor(temp);\n    color /= 255.0;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n\n    ///////////////////////////////////////////////////////////////////////////\n\n#if defined(EYE_DISTANCE_SCALING) || defined(EYE_DISTANCE_TRANSLUCENCY) || defined(DISTANCE_DISPLAY_CONDITION) || defined(DISABLE_DEPTH_DISTANCE)\n    float lengthSq;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        // 2D camera distance is a special case\n        // treat all billboards as flattened to the z=0.0 plane\n        lengthSq = czm_eyeHeight2D.y;\n    }\n    else\n    {\n        lengthSq = dot(positionEC.xyz, positionEC.xyz);\n    }\n#endif\n\n#ifdef EYE_DISTANCE_SCALING\n    totalSize *= czm_nearFarScalar(scaleByDistance, lengthSq);\n#endif\n    // Clamp to max point size.\n    totalSize = min(totalSize, u_maxTotalPointSize);\n    // If size is too small, push vertex behind near plane for clipping.\n    // Note that context.minimumAliasedPointSize "will be at most 1.0".\n    if (totalSize < 1.0)\n    {\n        positionEC.xyz = vec3(0.0);\n        totalSize = 1.0;\n    }\n\n    float translucency = 1.0;\n#ifdef EYE_DISTANCE_TRANSLUCENCY\n    translucency = czm_nearFarScalar(translucencyByDistance, lengthSq);\n    // push vertex behind near plane for clipping\n    if (translucency < 0.004)\n    {\n        positionEC.xyz = vec3(0.0);\n    }\n#endif\n\n#ifdef DISTANCE_DISPLAY_CONDITION\n    float nearSq = distanceDisplayConditionAndDisableDepth.x;\n    float farSq = distanceDisplayConditionAndDisableDepth.y;\n    if (lengthSq < nearSq || lengthSq > farSq) {\n        // push vertex behind camera to force it to be clipped\n        positionEC.xyz = vec3(0.0, 0.0, 1.0);\n    }\n#endif\n\n    gl_Position = czm_projection * positionEC;\n    czm_vertexLogDepth();\n\n#ifdef DISABLE_DEPTH_DISTANCE\n    float disableDepthTestDistance = distanceDisplayConditionAndDisableDepth.z;\n    if (disableDepthTestDistance == 0.0 && czm_minimumDisableDepthTestDistance != 0.0)\n    {\n        disableDepthTestDistance = czm_minimumDisableDepthTestDistance;\n    }\n\n    if (disableDepthTestDistance != 0.0)\n    {\n        // Don\'t try to "multiply both sides" by w.  Greater/less-than comparisons won\'t work for negative values of w.\n        float zclip = gl_Position.z / gl_Position.w;\n        bool clipped = (zclip < -1.0 || zclip > 1.0);\n        if (!clipped && (disableDepthTestDistance < 0.0 || (lengthSq > 0.0 && lengthSq < disableDepthTestDistance)))\n        {\n            // Position z on the near plane.\n            gl_Position.z = -gl_Position.w;\n#ifdef LOG_DEPTH\n            czm_vertexLogDepth(vec4(czm_currentFrustum.x));\n#endif\n        }\n    }\n#endif\n\n    v_color = color;\n    v_color.a *= translucency * show;\n    v_outlineColor = outlineColor;\n    v_outlineColor.a *= translucency * show;\n\n    v_innerPercent = 1.0 - outlinePercent;\n    v_pixelDistance = 2.0 / totalSize;\n    gl_PointSize = totalSize * show;\n    gl_Position *= show;\n\n    v_pickColor = pickColor;\n}\n';const oye=tye.SHOW_INDEX,rye=tye.POSITION_INDEX,aye=tye.COLOR_INDEX,sye=tye.OUTLINE_COLOR_INDEX,cye=tye.OUTLINE_WIDTH_INDEX,lye=tye.PIXEL_SIZE_INDEX,uye=tye.SCALE_BY_DISTANCE_INDEX,hye=tye.TRANSLUCENCY_BY_DISTANCE_INDEX,dye=tye.DISTANCE_DISPLAY_CONDITION_INDEX,fye=tye.DISABLE_DEPTH_DISTANCE_INDEX,pye=tye.NUMBER_OF_PROPERTIES,mye={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepth:5};function _ye(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(pye),this._maxPixelSize=1,this._baseVolume=new Tt,this._baseVolumeWC=new Tt,this._baseVolume2D=new Tt,this._boundingVolume=new Tt,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=Me.clone(Me.IDENTITY),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.blendOption=Object(o["a"])(e.blendOption,Tce.OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=SH.SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW,LV.STATIC_DRAW];const t=this;this._uniforms={u_maxTotalPointSize:function(){return t._maxTotalPointSize}}}function gye(e){const t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}function bye(e){if(e._pointPrimitivesRemoved){e._pointPrimitivesRemoved=!1;const t=[],n=e._pointPrimitives,i=n.length;for(let e=0,o=0;e<i;++e){const i=n[e];i&&(i._index=o++,t.push(i))}e._pointPrimitives=t}}function yye(e,t,n){return new Kse(e,[{index:mye.positionHighAndSize,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[rye]},{index:mye.positionLowAndShow,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[rye]},{index:mye.compressedAttribute0,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[aye]},{index:mye.compressedAttribute1,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[hye]},{index:mye.scaleByDistance,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:n[uye]},{index:mye.distanceDisplayConditionAndDisableDepth,componentsPerAttribute:3,componentDatatype:Ks.FLOAT,usage:n[dye]}],t)}Object.defineProperties(_ye.prototype,{length:{get:function(){return bye(this),this._pointPrimitives.length}}}),_ye.prototype.add=function(e){const t=new tye(e,this);return t._index=this._pointPrimitives.length,this._pointPrimitives.push(t),this._createVertexArray=!0,t},_ye.prototype.remove=function(e){return!!this.contains(e)&&(this._pointPrimitives[e._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},_ye.prototype.removeAll=function(){gye(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0},_ye.prototype._updatePointPrimitive=function(e,t){e._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=e),++this._propertiesChanged[t]},_ye.prototype.contains=function(e){return Object(r["a"])(e)&&e._pointPrimitiveCollection===this},_ye.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return bye(this),this._pointPrimitives[e]},_ye.prototype.computeNewBuffersUsage=function(){const e=this._buffersUsage;let t=!1;const n=this._propertiesChanged;for(let i=0;i<pye;++i){const o=0===n[i]?LV.STATIC_DRAW:LV.STREAM_DRAW;t=t||e[i]!==o,e[i]=o}return t};const vye=new Bd;function Oye(e,t,n,i){const o=i._index,r=i._getActualPosition();e._mode===SH.SCENE3D&&(Tt.expand(e._baseVolume,r,e._baseVolume),e._boundingVolumeDirty=!0),Bd.fromCartesian(r,vye);const a=i.pixelSize,s=i.outlineWidth;e._maxPixelSize=Math.max(e._maxPixelSize,a+s);const c=n[mye.positionHighAndSize],l=vye.high;c(o,l.x,l.y,l.z,a);const u=n[mye.positionLowAndOutline],h=vye.low;u(o,h.x,h.y,h.z,s)}const Aye=65536,wye=256;function Tye(e,t,n,i){const o=i._index,r=i.color,a=i.getPickId(t).color,s=i.outlineColor;let c=Dm.floatToByte(r.red),l=Dm.floatToByte(r.green),u=Dm.floatToByte(r.blue);const h=c*Aye+l*wye+u;c=Dm.floatToByte(s.red),l=Dm.floatToByte(s.green),u=Dm.floatToByte(s.blue);const d=c*Aye+l*wye+u;c=Dm.floatToByte(a.red),l=Dm.floatToByte(a.green),u=Dm.floatToByte(a.blue);const f=c*Aye+l*wye+u,p=Dm.floatToByte(r.alpha)*Aye+Dm.floatToByte(s.alpha)*wye+Dm.floatToByte(a.alpha),m=n[mye.compressedAttribute0];m(o,h,d,f,p)}function Cye(e,t,n,i){const o=i._index;let a=0,c=1,l=1,u=1;const h=i.translucencyByDistance;Object(r["a"])(h)&&(a=h.near,c=h.nearValue,l=h.far,u=h.farValue,1===c&&1===u||(e._shaderTranslucencyByDistance=!0));let d=i.show&&i.clusterShow;0===i.color.alpha&&0===i.outlineColor.alpha&&(d=!1),c=s["a"].clamp(c,0,1),c=1===c?255:255*c|0;const f=(d?1:0)*wye+c;u=s["a"].clamp(u,0,1),u=1===u?255:255*u|0;const p=u,m=n[mye.compressedAttribute1];m(o,f,p,a,l)}function Eye(e,t,n,i){const o=i._index,a=n[mye.scaleByDistance];let s=0,c=1,l=1,u=1;const h=i.scaleByDistance;Object(r["a"])(h)&&(s=h.near,c=h.nearValue,l=h.far,u=h.farValue,1===c&&1===u||(e._shaderScaleByDistance=!0)),a(o,s,c,l,u)}function xye(e,t,n,i){const o=i._index,a=n[mye.distanceDisplayConditionAndDisableDepth];let s=0,c=Number.MAX_VALUE;const l=i.distanceDisplayCondition;Object(r["a"])(l)&&(s=l.near,c=l.far,s*=s,c*=c,e._shaderDistanceDisplayCondition=!0);let u=i.disableDepthTestDistance;u*=u,u>0&&(e._shaderDisableDepthDistance=!0,u===Number.POSITIVE_INFINITY&&(u=-1)),a(o,s,c,u)}function Sye(e,t,n,i){Oye(e,t,n,i),Tye(e,t,n,i),Cye(e,t,n,i),Eye(e,t,n,i),xye(e,t,n,i)}function Iye(e,t,n,i,o,a){let s;i.mode===SH.SCENE3D?(s=e._baseVolume,e._boundingVolumeDirty=!0):s=e._baseVolume2D;const c=[];for(let l=0;l<n;++l){const e=t[l],n=e.position,u=tye._computeActualPosition(n,i,o);Object(r["a"])(u)&&(e._setActualPosition(u),a?c.push(u):Tt.expand(s,u,s))}a&&Tt.fromPoints(c,s)}function Dye(e,t){const n=t.mode,i=e._pointPrimitives,o=e._pointPrimitivesToUpdate,r=e._modelMatrix;e._createVertexArray||e._mode!==n||n!==SH.SCENE3D&&!Me.equals(r,e.modelMatrix)?(e._mode=n,Me.clone(e.modelMatrix,r),e._createVertexArray=!0,n!==SH.SCENE3D&&n!==SH.SCENE2D&&n!==SH.COLUMBUS_VIEW||Iye(e,i,i.length,t,r,!0)):n===SH.MORPHING?Iye(e,i,i.length,t,r,!0):n!==SH.SCENE2D&&n!==SH.COLUMBUS_VIEW||Iye(e,o,e._pointPrimitivesToUpdateIndex,t,r,!1)}function Pye(e,t,n){const i=t.camera.getPixelSize(n,t.context.drawingBufferWidth,t.context.drawingBufferHeight),o=i*e._maxPixelSize;n.radius+=o}const jye=[];_ye.prototype.update=function(e){if(bye(this),!this.show)return;this._maxTotalPointSize=YN.maximumAliasedPointSize,Dye(this,e);const t=this._pointPrimitives,n=t.length,i=this._pointPrimitivesToUpdate,o=this._pointPrimitivesToUpdateIndex,a=this._propertiesChanged,s=this._createVertexArray;let c;const l=e.context,u=e.passes,h=u.pick;if(s||!h&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let e=0;e<pye;++e)a[e]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=yye(l,n,this._buffersUsage),c=this._vaf.writers;for(let e=0;e<n;++e){const t=this._pointPrimitives[e];t._dirty=!1,Sye(this,l,c,t)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(o>0){const e=jye;e.length=0,(a[rye]||a[cye]||a[lye])&&e.push(Oye),(a[aye]||a[sye])&&e.push(Tye),(a[oye]||a[hye])&&e.push(Cye),a[uye]&&e.push(Eye),(a[dye]||a[fye])&&e.push(xye);const t=e.length;if(c=this._vaf.writers,o/n>.1){for(let n=0;n<o;++n){const o=i[n];o._dirty=!1;for(let n=0;n<t;++n)e[n](this,l,c,o)}this._vaf.commit()}else{for(let n=0;n<o;++n){const o=i[n];o._dirty=!1;for(let n=0;n<t;++n)e[n](this,l,c,o);this._vaf.subCommit(o._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(o>1.5*n&&(i.length=n),!Object(r["a"])(this._vaf)||!Object(r["a"])(this._vaf.va))return;let d;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,Tt.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let f=Me.IDENTITY;e.mode===SH.SCENE3D?(f=this.modelMatrix,d=Tt.clone(this._baseVolumeWC,this._boundingVolume)):d=Tt.clone(this._baseVolume2D,this._boundingVolume),Pye(this,e,d);const p=this._blendOption!==this.blendOption;let m,_,g,b,y,v;this._blendOption=this.blendOption,p&&(this._blendOption===Tce.OPAQUE||this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=UF.fromCache({depthTest:{enabled:!0,func:Ys.LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===Tce.TRANSLUCENT||this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=UF.fromCache({depthTest:{enabled:!0,func:Ys.LEQUAL},depthMask:!1,blending:UN.ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==e.minimumDisableDepthTestDistance,(p||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(m=new EV({sources:[iye]}),this._shaderScaleByDistance&&m.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&m.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&m.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&m.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT&&(_=new EV({defines:["OPAQUE"],sources:[nye]}),this._sp=Nz.replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:m,fragmentShaderSource:_,attributeLocations:mye}),_=new EV({defines:["TRANSLUCENT"],sources:[nye]}),this._spTranslucent=Nz.replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:m,fragmentShaderSource:_,attributeLocations:mye})),this._blendOption===Tce.OPAQUE&&(_=new EV({sources:[nye]}),this._sp=Nz.replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:m,fragmentShaderSource:_,attributeLocations:mye})),this._blendOption===Tce.TRANSLUCENT&&(_=new EV({sources:[nye]}),this._spTranslucent=Nz.replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:m,fragmentShaderSource:_,attributeLocations:mye})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);const O=e.commandList;if(u.render||h){const e=this._colorCommands,t=this._blendOption===Tce.OPAQUE,n=this._blendOption===Tce.OPAQUE_AND_TRANSLUCENT;g=this._vaf.va,b=g.length,e.length=b;const i=n?2*b:b;for(v=0;v<i;++v){const i=t||n&&v%2===0;y=e[v],Object(r["a"])(y)||(y=e[v]=new lF),y.primitiveType=Eu.POINTS,y.pass=i||!n?hF.OPAQUE:hF.TRANSLUCENT,y.owner=this;const o=n?Math.floor(v/2):v;y.boundingVolume=d,y.modelMatrix=f,y.shaderProgram=i?this._sp:this._spTranslucent,y.uniformMap=this._uniforms,y.vertexArray=g[o].va,y.renderState=i?this._rsOpaque:this._rsTranslucent,y.debugShowBoundingVolume=this.debugShowBoundingVolume,y.pickId="v_pickColor",O.push(y)}}},_ye.prototype.isDestroyed=function(){return!1},_ye.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),gye(this._pointPrimitives),Wc(this)};var Rye=_ye;function Lye(e,t,n,i,o,r){if(o-i<=n)return;const a=i+o>>1;Mye(e,t,a,i,o,r%2),Lye(e,t,n,i,a-1,r+1),Lye(e,t,n,a+1,o,r+1)}function Mye(e,t,n,i,o,r){while(o>i){if(o-i>600){const a=o-i+1,s=n-i+1,c=Math.log(a),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(a-l)/a)*(s-a/2<0?-1:1),h=Math.max(i,Math.floor(n-s*l/a+u)),d=Math.min(o,Math.floor(n+(a-s)*l/a+u));Mye(e,t,n,h,d,r)}const a=t[2*n+r];let s=i,c=o;Nye(e,t,i,n),t[2*o+r]>a&&Nye(e,t,i,o);while(s<c){Nye(e,t,s,c),s++,c--;while(t[2*s+r]<a)s++;while(t[2*c+r]>a)c--}t[2*i+r]===a?Nye(e,t,i,c):(c++,Nye(e,t,c,o)),c<=n&&(i=c+1),n<=c&&(o=c-1)}}function Nye(e,t,n,i){Bye(e,n,i),Bye(t,2*n,2*i),Bye(t,2*n+1,2*i+1)}function Bye(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Fye(e,t,n,i,o,r,a){const s=[0,e.length-1,0],c=[];let l,u;while(s.length){const h=s.pop(),d=s.pop(),f=s.pop();if(d-f<=a){for(let a=f;a<=d;a++)l=t[2*a],u=t[2*a+1],l>=n&&l<=o&&u>=i&&u<=r&&c.push(e[a]);continue}const p=Math.floor((f+d)/2);l=t[2*p],u=t[2*p+1],l>=n&&l<=o&&u>=i&&u<=r&&c.push(e[p]);const m=(h+1)%2;(0===h?n<=l:i<=u)&&(s.push(f),s.push(p-1),s.push(m)),(0===h?o>=l:r>=u)&&(s.push(p+1),s.push(d),s.push(m))}return c}function zye(e,t,n,i,o,r){const a=[0,e.length-1,0],s=[],c=o*o;while(a.length){const l=a.pop(),u=a.pop(),h=a.pop();if(u-h<=r){for(let o=h;o<=u;o++)kye(t[2*o],t[2*o+1],n,i)<=c&&s.push(e[o]);continue}const d=Math.floor((h+u)/2),f=t[2*d],p=t[2*d+1];kye(f,p,n,i)<=c&&s.push(e[d]);const m=(l+1)%2;(0===l?n-o<=f:i-o<=p)&&(a.push(h),a.push(d-1),a.push(m)),(0===l?n+o>=f:i+o>=p)&&(a.push(d+1),a.push(u),a.push(m))}return s}function kye(e,t,n,i){const o=e-n,r=t-i;return o*o+r*r}const Uye=e=>e[0],Vye=e=>e[1];class Hye{constructor(e,t=Uye,n=Vye,i=64,o=Float64Array){this.nodeSize=i,this.points=e;const r=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new r(e.length),s=this.coords=new o(2*e.length);for(let c=0;c<e.length;c++)a[c]=c,s[2*c]=t(e[c]),s[2*c+1]=n(e[c]);Lye(a,s,i,0,a.length-1,0)}range(e,t,n,i){return Fye(this.ids,this.coords,e,t,n,i,this.nodeSize)}within(e,t,n){return zye(this.ids,this.coords,e,t,n,this.nodeSize)}}function Gye(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._enabled=Object(o["a"])(e.enabled,!1),this._pixelRange=Object(o["a"])(e.pixelRange,80),this._minimumClusterSize=Object(o["a"])(e.minimumClusterSize,2),this._clusterBillboards=Object(o["a"])(e.clusterBillboards,!0),this._clusterLabels=Object(o["a"])(e.clusterLabels,!0),this._clusterPoints=Object(o["a"])(e.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new dn["a"],this.show=Object(o["a"])(e.show,!0)}function Wye(e){return e.coord.x}function qye(e){return e.coord.y}function Yye(e,t){e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t}const Xye=new Au;function Kye(e,t,n,i,o){if(Object(r["a"])(e._labelCollection)&&i._clusterLabels?o=yue.getScreenSpaceBoundingBox(e,t,o):Object(r["a"])(e._billboardCollection)&&i._clusterBillboards?o=Ace.getScreenSpaceBoundingBox(e,t,o):Object(r["a"])(e._pointPrimitiveCollection)&&i._clusterPoints&&(o=tye.getScreenSpaceBoundingBox(e,t,o)),Yye(o,n),i._clusterLabels&&!Object(r["a"])(e._labelCollection)&&Object(r["a"])(e.id)&&Qye(i,e.id.id)&&Object(r["a"])(e.id._label)){const r=i._collectionIndicesByEntity[e.id.id].labelIndex,a=i._labelCollection.get(r),s=yue.getScreenSpaceBoundingBox(a,t,Xye);Yye(s,n),o=Au.union(o,s,o)}return o}function $ye(e,t){if(e.clusterShow=!0,!Object(r["a"])(e._labelCollection)&&Object(r["a"])(e.id)&&Qye(t,e.id.id)&&Object(r["a"])(e.id._label)){const n=t._collectionIndicesByEntity[e.id.id].labelIndex,i=t._labelCollection.get(n);i.clusterShow=!0}}function Jye(e,t,n,i){const o={billboard:i._clusterBillboardCollection.add(),label:i._clusterLabelCollection.add(),point:i._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=t.toLocaleString(),o.label.id=n,o.billboard.position=o.label.position=o.point.position=e,i._clusterEvent.raiseEvent(n,o)}function Qye(e,t){return Object(r["a"])(e)&&Object(r["a"])(e._collectionIndicesByEntity[t])&&Object(r["a"])(e._collectionIndicesByEntity[t].labelIndex)}function Zye(e,t,n,i,o){if(!Object(r["a"])(e))return;const a=e.length;for(let s=0;s<a;++s){const a=e.get(s);if(a.clusterShow=!1,!a.show||o._scene.mode===SH.SCENE3D&&!i.isPointVisible(a.position))continue;const c=o._clusterLabels&&Object(r["a"])(a._labelCollection),l=o._clusterBillboards&&Object(r["a"])(a.id._billboard),u=o._clusterPoints&&Object(r["a"])(a.id._point);if(c&&(u||l))continue;const h=a.computeScreenSpacePosition(n);Object(r["a"])(h)&&t.push({index:s,collection:e,clustered:!1,coord:h})}}const eve=new Au,tve=new Au,nve=new Au;function ive(e){return function(t){if(Object(r["a"])(t)&&t<.05||!e.enabled)return;const n=e._scene,i=e._labelCollection,o=e._billboardCollection,a=e._pointCollection;if(!Object(r["a"])(i)&&!Object(r["a"])(o)&&!Object(r["a"])(a)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let s=e._clusterLabelCollection,c=e._clusterBillboardCollection,l=e._clusterPointCollection;Object(r["a"])(s)?s.removeAll():s=e._clusterLabelCollection=new Uue({scene:n}),Object(r["a"])(c)?c.removeAll():c=e._clusterBillboardCollection=new Hle({scene:n}),Object(r["a"])(l)?l.removeAll():l=e._clusterPointCollection=new Rye;const u=e._pixelRange,h=e._minimumClusterSize,d=e._previousClusters,f=[],p=e._previousHeight,m=n.camera.positionCartographic.height,_=n.mapProjection.ellipsoid,b=n.camera.positionWC,y=new Mn(_,b),v=[];let O,A,w,T,C,E,x,S,I,D,P,j;e._clusterLabels&&Zye(i,v,n,y,e),e._clusterBillboards&&Zye(o,v,n,y,e),e._clusterPoints&&Zye(a,v,n,y,e);const R=new Hye(v,Wye,qye,64,Int32Array);if(m<p)for(w=d.length,O=0;O<w;++O){const t=d[O];if(!y.isPointVisible(t.position))continue;const i=Ace._computeScreenSpacePosition(Me.IDENTITY,t.position,g.ZERO,Gt.ZERO,n);if(!Object(r["a"])(i))continue;const o=1-m/p;let a=t.width=t.width*o,s=t.height=t.height*o;a=Math.max(a,t.minimumWidth),s=Math.max(s,t.minimumHeight);const c=i.x-.5*a,l=i.y-.5*s,u=i.x+a,_=i.y+s;for(C=R.range(c,l,u,_),E=C.length,D=0,I=[],A=0;A<E;++A)x=C[A],S=v[x],S.clustered||(++D,P=S.collection,j=S.index,I.push(P.get(j).id));if(D>=h)for(Jye(t.position,D,I,e),f.push(t),A=0;A<E;++A)v[C[A]].clustered=!0}for(w=v.length,O=0;O<w;++O){const t=v[O];if(t.clustered)continue;t.clustered=!0,P=t.collection,j=t.index;const n=P.get(j);T=Kye(n,t.coord,u,e,eve);const i=Au.clone(T,tve);C=R.range(T.x,T.y,T.x+T.width,T.y+T.height),E=C.length;const o=g.clone(n.position);for(D=1,I=[n.id],A=0;A<E;++A)if(x=C[A],S=v[x],!S.clustered){const t=S.collection.get(S.index),n=Kye(t,S.coord,u,e,nve);g.add(t.position,o,o),Au.union(i,n,i),++D,I.push(t.id)}if(D>=h){const t=g.multiplyByScalar(o,1/D,o);for(Jye(t,D,I,e),f.push({position:t,width:i.width,height:i.height,minimumWidth:T.width,minimumHeight:T.height}),A=0;A<E;++A)v[C[A]].clustered=!0}else $ye(n,e)}0===s.length&&(s.destroy(),e._clusterLabelCollection=void 0),0===c.length&&(c.destroy(),e._clusterBillboardCollection=void 0),0===l.length&&(l.destroy(),e._clusterPointCollection=void 0),e._previousClusters=f,e._previousHeight=m}}function ove(e,t,n,i){return function(o){let a=this[e];Object(r["a"])(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let s,c,l=this._collectionIndicesByEntity[o.id];if(Object(r["a"])(l)||(l=this._collectionIndicesByEntity[o.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),Object(r["a"])(a)&&Object(r["a"])(l[i]))return a.get(l[i]);Object(r["a"])(a)||(a=this[e]=new t({scene:this._scene}));const u=this[n];u.length>0?(s=u.pop(),c=a.get(s)):(c=a.add(),s=a.length-1),l[i]=s;const h=this;return Promise.resolve().then((function(){h._clusterDirty=!0})),c}}function rve(e,t){const n=e._collectionIndicesByEntity[t];Object(r["a"])(n.billboardIndex)||Object(r["a"])(n.labelIndex)||Object(r["a"])(n.pointIndex)||delete e._collectionIndicesByEntity[t]}function ave(e){if(!Object(r["a"])(e))return;const t=e.length;for(let n=0;n<t;++n)e.get(n).clusterShow=!0}function sve(e){e.enabled||(Object(r["a"])(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy(),Object(r["a"])(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy(),Object(r["a"])(e._clusterPointCollection)&&e._clusterPointCollection.destroy(),e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,ave(e._labelCollection),ave(e._billboardCollection),ave(e._pointCollection))}Gye.prototype._initialize=function(e){this._scene=e;const t=ive(this);this._cluster=t,this._removeEventListener=e.camera.changed.addEventListener(t)},Object.defineProperties(Gye.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this._enabledDirty=e!==this._enabled,this._enabled=e}},pixelRange:{get:function(){return this._pixelRange},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._pixelRange,this._pixelRange=e}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._minimumClusterSize,this._minimumClusterSize=e}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterBillboards,this._clusterBillboards=e}},clusterLabels:{get:function(){return this._clusterLabels},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterLabels,this._clusterLabels=e}},clusterPoints:{get:function(){return this._clusterPoints},set:function(e){this._clusterDirty=this._clusterDirty||e!==this._clusterPoints,this._clusterPoints=e}}}),Gye.prototype.getLabel=ove("_labelCollection",Uue,"_unusedLabelIndices","labelIndex"),Gye.prototype.removeLabel=function(e){const t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!Object(r["a"])(this._labelCollection)||!Object(r["a"])(t)||!Object(r["a"])(t.labelIndex))return;const n=t.labelIndex;t.labelIndex=void 0,rve(this,e.id);const i=this._labelCollection.get(n);i.show=!1,i.text="",i.id=void 0,this._unusedLabelIndices.push(n),this._clusterDirty=!0},Gye.prototype.getBillboard=ove("_billboardCollection",Hle,"_unusedBillboardIndices","billboardIndex"),Gye.prototype.removeBillboard=function(e){const t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!Object(r["a"])(this._billboardCollection)||!Object(r["a"])(t)||!Object(r["a"])(t.billboardIndex))return;const n=t.billboardIndex;t.billboardIndex=void 0,rve(this,e.id);const i=this._billboardCollection.get(n);i.id=void 0,i.show=!1,i.image=void 0,this._unusedBillboardIndices.push(n),this._clusterDirty=!0},Gye.prototype.getPoint=ove("_pointCollection",Rye,"_unusedPointIndices","pointIndex"),Gye.prototype.removePoint=function(e){const t=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!Object(r["a"])(this._pointCollection)||!Object(r["a"])(t)||!Object(r["a"])(t.pointIndex))return;const n=t.pointIndex;t.pointIndex=void 0,rve(this,e.id);const i=this._pointCollection.get(n);i.show=!1,i.id=void 0,this._unusedPointIndices.push(n),this._clusterDirty=!0},Gye.prototype.update=function(e){if(!this.show)return;let t;Object(r["a"])(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(t=e.commandList,e.commandList=[],this._labelCollection.update(e),e.commandList=t),Object(r["a"])(this._billboardCollection)&&this._billboardCollection.length>0&&!Object(r["a"])(this._billboardCollection.get(0).width)&&(t=e.commandList,e.commandList=[],this._billboardCollection.update(e),e.commandList=t),this._enabledDirty&&(this._enabledDirty=!1,sve(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),Object(r["a"])(this._clusterLabelCollection)&&this._clusterLabelCollection.update(e),Object(r["a"])(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(e),Object(r["a"])(this._clusterPointCollection)&&this._clusterPointCollection.update(e),Object(r["a"])(this._labelCollection)&&this._labelCollection.update(e),Object(r["a"])(this._billboardCollection)&&this._billboardCollection.update(e),Object(r["a"])(this._pointCollection)&&this._pointCollection.update(e)},Gye.prototype.destroy=function(){this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),Object(r["a"])(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1};var cve=Gye;function lve(e){this._name=e,this._clock=void 0,this._changed=new dn["a"],this._error=new dn["a"],this._isLoading=!1,this._loading=new dn["a"],this._entityCollection=new ube(this),this._entityCluster=new cve}Object.defineProperties(lve.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._changed.raiseEvent(this))}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading},set:function(e){kbe.setLoading(this,e)}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value must be defined.");this._entityCluster=e}}}),lve.prototype.update=function(e){return!0};var uve=lve;const hve=g.ZERO,dve=new g,fve=new g,pve=new Dm;function mve(e){this.id=e,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function _ve(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new mve(e),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(e,"cylinder",e.cylinder,void 0)}function gve(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(_ve.prototype=Object.create(FY.prototype),_ve.prototype.constructor=_ve),Object.defineProperties(_ve.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),_ve.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),s=this._distanceDisplayConditionProperty.getValue(e),c=Dv.fromDistanceDisplayCondition(s),l={show:o,distanceDisplayCondition:c,color:void 0,offset:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,pve)),Object(r["a"])(t)||(t=Dm.WHITE),l.color=jm.fromColor(t)}return Object(r["a"])(this._options.offsetAttribute)&&(l.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,hve,dve))),new Sd({id:t,geometry:new vv(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:l})},_ve.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,pve),s=this._distanceDisplayConditionProperty.getValue(e),c={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(s),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(c.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,hve,dve))),new Sd({id:t,geometry:new Tv(this._options),modelMatrix:t.computeModelMatrixForHeightReference(e,t.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:c})},_ve.prototype._computeCenter=function(e,t){return aN.getValueOrUndefined(this._entity.position,e,t)},_ve.prototype._isHidden=function(e,t){return!Object(r["a"])(e.position)||!Object(r["a"])(t.length)||!Object(r["a"])(t.topRadius)||!Object(r["a"])(t.bottomRadius)||FY.prototype._isHidden.call(this,e,t)},_ve.prototype._isDynamic=function(e,t){return!e.position.isConstant||!aN.isConstant(e.orientation)||!t.length.isConstant||!t.topRadius.isConstant||!t.bottomRadius.isConstant||!aN.isConstant(t.slices)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.numberOfVerticalLines)},_ve.prototype._setStaticOptions=function(e,t){const n=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof oF?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,i.length=t.length.getValue(oE.MINIMUM_VALUE),i.topRadius=t.topRadius.getValue(oE.MINIMUM_VALUE),i.bottomRadius=t.bottomRadius.getValue(oE.MINIMUM_VALUE),i.slices=aN.getValueOrUndefined(t.slices,oE.MINIMUM_VALUE),i.numberOfVerticalLines=aN.getValueOrUndefined(t.numberOfVerticalLines,oE.MINIMUM_VALUE),i.offsetAttribute=n!==QM.NONE?Gu.ALL:void 0},_ve.prototype._onEntityPropertyChanged=qY,_ve.DynamicGeometryUpdater=gve,Object(r["a"])(Object.create)&&(gve.prototype=Object.create(GW.prototype),gve.prototype.constructor=gve),gve.prototype._isHidden=function(e,t,n){const i=this._options,o=aN.getValueOrUndefined(e.position,n,fve);return!Object(r["a"])(o)||!Object(r["a"])(i.length)||!Object(r["a"])(i.topRadius)||!Object(r["a"])(i.bottomRadius)||GW.prototype._isHidden.call(this,e,t,n)},gve.prototype._setOptions=function(e,t,n){const i=aN.getValueOrDefault(t.heightReference,n,QM.NONE),o=this._options;o.length=aN.getValueOrUndefined(t.length,n),o.topRadius=aN.getValueOrUndefined(t.topRadius,n),o.bottomRadius=aN.getValueOrUndefined(t.bottomRadius,n),o.slices=aN.getValueOrUndefined(t.slices,n),o.numberOfVerticalLines=aN.getValueOrUndefined(t.numberOfVerticalLines,n),o.offsetAttribute=i!==QM.NONE?Gu.ALL:void 0};var bve=_ve;function yve(){this._definitionChanged=new dn["a"],this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0}Object.defineProperties(yve.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:Rq("startTime"),stopTime:Rq("stopTime"),currentTime:Rq("currentTime"),clockRange:Rq("clockRange"),clockStep:Rq("clockStep"),multiplier:Rq("multiplier")}),yve.prototype.clone=function(e){return Object(r["a"])(e)||(e=new yve),e.startTime=this.startTime,e.stopTime=this.stopTime,e.currentTime=this.currentTime,e.clockRange=this.clockRange,e.clockStep=this.clockStep,e.multiplier=this.multiplier,e},yve.prototype.equals=function(e){return this===e||Object(r["a"])(e)&&mo.equals(this.startTime,e.startTime)&&mo.equals(this.stopTime,e.stopTime)&&mo.equals(this.currentTime,e.currentTime)&&this.clockRange===e.clockRange&&this.clockStep===e.clockStep&&this.multiplier===e.multiplier},yve.prototype.merge=function(e){if(!Object(r["a"])(e))throw new a["a"]("source is required.");this.startTime=Object(o["a"])(this.startTime,e.startTime),this.stopTime=Object(o["a"])(this.stopTime,e.stopTime),this.currentTime=Object(o["a"])(this.currentTime,e.currentTime),this.clockRange=Object(o["a"])(this.clockRange,e.clockRange),this.clockStep=Object(o["a"])(this.clockStep,e.clockStep),this.multiplier=Object(o["a"])(this.multiplier,e.multiplier)},yve.prototype.getValue=function(e){return Object(r["a"])(e)||(e=new vm),e.startTime=Object(o["a"])(this.startTime,e.startTime),e.stopTime=Object(o["a"])(this.stopTime,e.stopTime),e.currentTime=Object(o["a"])(this.currentTime,e.currentTime),e.clockRange=Object(o["a"])(this.clockRange,e.clockRange),e.multiplier=Object(o["a"])(this.multiplier,e.multiplier),e.clockStep=Object(o["a"])(this.clockStep,e.clockStep),e};var vve=yve;const Ove=Dm.WHITE,Ave=.1,wve=new Gt(8,8),Tve=new Gt(0,0),Cve=new Gt(1,1);function Eve(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=e.color,this.cellAlpha=e.cellAlpha,this.lineCount=e.lineCount,this.lineThickness=e.lineThickness,this.lineOffset=e.lineOffset}Object.defineProperties(Eve.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)&&aN.isConstant(this._cellAlpha)&&aN.isConstant(this._lineCount)&&aN.isConstant(this._lineThickness)&&aN.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color"),cellAlpha:XM("cellAlpha"),lineCount:XM("lineCount"),lineThickness:XM("lineThickness"),lineOffset:XM("lineOffset")}),Eve.prototype.getType=function(e){return"Grid"},Eve.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Ove,t.color),t.cellAlpha=aN.getValueOrDefault(this._cellAlpha,e,Ave),t.lineCount=aN.getValueOrClonedDefault(this._lineCount,e,wve,t.lineCount),t.lineThickness=aN.getValueOrClonedDefault(this._lineThickness,e,Cve,t.lineThickness),t.lineOffset=aN.getValueOrClonedDefault(this._lineOffset,e,Tve,t.lineOffset),t},Eve.prototype.equals=function(e){return this===e||e instanceof Eve&&aN.equals(this._color,e._color)&&aN.equals(this._cellAlpha,e._cellAlpha)&&aN.equals(this._lineCount,e._lineCount)&&aN.equals(this._lineThickness,e._lineThickness)&&aN.equals(this._lineOffset,e._lineOffset)};var xve=Eve;function Sve(e){this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(Sve.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color")}),Sve.prototype.getType=function(e){return"PolylineArrow"},Sve.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Dm.WHITE,t.color),t},Sve.prototype.equals=function(e){return this===e||e instanceof Sve&&aN.equals(this._color,e._color)};var Ive=Sve;const Dve=Dm.WHITE,Pve=Dm.TRANSPARENT,jve=16,Rve=255;function Lve(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this._gapColor=void 0,this._gapColorSubscription=void 0,this._dashLength=void 0,this._dashLengthSubscription=void 0,this._dashPattern=void 0,this._dashPatternSubscription=void 0,this.color=e.color,this.gapColor=e.gapColor,this.dashLength=e.dashLength,this.dashPattern=e.dashPattern}Object.defineProperties(Lve.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)&&aN.isConstant(this._gapColor)&&aN.isConstant(this._dashLength)&&aN.isConstant(this._dashPattern)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color"),gapColor:XM("gapColor"),dashLength:XM("dashLength"),dashPattern:XM("dashPattern")}),Lve.prototype.getType=function(e){return"PolylineDash"},Lve.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Dve,t.color),t.gapColor=aN.getValueOrClonedDefault(this._gapColor,e,Pve,t.gapColor),t.dashLength=aN.getValueOrDefault(this._dashLength,e,jve,t.dashLength),t.dashPattern=aN.getValueOrDefault(this._dashPattern,e,Rve,t.dashPattern),t},Lve.prototype.equals=function(e){return this===e||e instanceof Lve&&aN.equals(this._color,e._color)&&aN.equals(this._gapColor,e._gapColor)&&aN.equals(this._dashLength,e._dashLength)&&aN.equals(this._dashPattern,e._dashPattern)};var Mve=Lve;const Nve=Dm.WHITE,Bve=.25,Fve=1;function zve(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=e.color,this.glowPower=e.glowPower,this.taperPower=e.taperPower}Object.defineProperties(zve.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)&&aN.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color"),glowPower:XM("glowPower"),taperPower:XM("taperPower")}),zve.prototype.getType=function(e){return"PolylineGlow"},zve.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Nve,t.color),t.glowPower=aN.getValueOrDefault(this._glowPower,e,Bve,t.glowPower),t.taperPower=aN.getValueOrDefault(this._taperPower,e,Fve,t.taperPower),t},zve.prototype.equals=function(e){return this===e||e instanceof zve&&aN.equals(this._color,e._color)&&aN.equals(this._glowPower,e._glowPower)&&aN.equals(this._taperPower,e._taperPower)};var kve=zve;const Uve=Dm.WHITE,Vve=Dm.BLACK,Hve=1;function Gve(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this.color=e.color,this.outlineColor=e.outlineColor,this.outlineWidth=e.outlineWidth}Object.defineProperties(Gve.prototype,{isConstant:{get:function(){return aN.isConstant(this._color)&&aN.isConstant(this._outlineColor)&&aN.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:XM("color"),outlineColor:XM("outlineColor"),outlineWidth:XM("outlineWidth")}),Gve.prototype.getType=function(e){return"PolylineOutline"},Gve.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.color=aN.getValueOrClonedDefault(this._color,e,Uve,t.color),t.outlineColor=aN.getValueOrClonedDefault(this._outlineColor,e,Vve,t.outlineColor),t.outlineWidth=aN.getValueOrDefault(this._outlineWidth,e,Hve),t},Gve.prototype.equals=function(e){return this===e||e instanceof Gve&&aN.equals(this._color,e._color)&&aN.equals(this._outlineColor,e._outlineColor)&&aN.equals(this._outlineWidth,e._outlineWidth)};var Wve=Gve;function qve(e,t){this._value=void 0,this._definitionChanged=new dn["a"],this._eventHelper=new gO,this._referenceFrame=Object(o["a"])(t,iD.FIXED),this.setValue(e)}Object.defineProperties(qve.prototype,{isConstant:{get:function(){const e=this._value;if(!Object(r["a"])(e))return!0;const t=e.length;for(let n=0;n<t;n++)if(!aN.isConstant(e[n]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),qve.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},qve.prototype.getValueInReferenceFrame=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceFrame is required.");const i=this._value;if(!Object(r["a"])(i))return;const o=i.length;Object(r["a"])(n)||(n=new Array(o));let s=0,c=0;while(s<o){const o=i[s],a=o.getValueInReferenceFrame(e,t,n[s]);Object(r["a"])(a)&&(n[c]=a,c++),s++}return n.length=c,n},qve.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),Object(r["a"])(e)){this._value=e.slice();const n=e.length;for(let i=0;i<n;i++){const n=e[i];Object(r["a"])(n)&&t.add(n.definitionChanged,qve.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},qve.prototype.equals=function(e){return this===e||e instanceof qve&&this._referenceFrame===e._referenceFrame&&aN.arrayEquals(this._value,e._value)},qve.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var Yve=qve;function Xve(e){this._value=void 0,this._definitionChanged=new dn["a"],this._eventHelper=new gO,this.setValue(e)}Object.defineProperties(Xve.prototype,{isConstant:{get:function(){const e=this._value;if(!Object(r["a"])(e))return!0;const t=e.length;for(let n=0;n<t;n++)if(!aN.isConstant(e[n]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),Xve.prototype.getValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const n=this._value;if(!Object(r["a"])(n))return;const i=n.length;Object(r["a"])(t)||(t=new Array(i));let o=0,s=0;while(o<i){const n=this._value[o],i=n.getValue(e,t[o]);Object(r["a"])(i)&&(t[s]=i,s++),o++}return t.length=s,t},Xve.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),Object(r["a"])(e)){this._value=e.slice();const n=e.length;for(let i=0;i<n;i++){const n=e[i];Object(r["a"])(n)&&t.add(n.definitionChanged,Xve.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},Xve.prototype.equals=function(e){return this===e||e instanceof Xve&&aN.arrayEquals(this._value,e._value)},Xve.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var Kve=Xve;function $ve(e){let t=e._targetProperty;if(!Object(r["a"])(t)){let n=e._targetEntity;if(!Object(r["a"])(n)){if(n=e._targetCollection.getById(e._targetId),!Object(r["a"])(n))return void(e._targetEntity=e._targetProperty=void 0);n.definitionChanged.addEventListener(Jve.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=n}const i=e._targetPropertyNames;t=e._targetEntity;for(let e=0,o=i.length;e<o&&Object(r["a"])(t);++e)t=t[i[e]];e._targetProperty=t}return t}function Jve(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("targetCollection is required.");if(!Object(r["a"])(t)||""===t)throw new a["a"]("targetId is required.");if(!Object(r["a"])(n)||0===n.length)throw new a["a"]("targetPropertyNames is required.");for(let i=0;i<n.length;i++){const e=n[i];if(!Object(r["a"])(e)||""===e)throw new a["a"]("reference contains invalid properties.")}this._targetCollection=e,this._targetId=t,this._targetPropertyNames=n,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new dn["a"],e.collectionChanged.addEventListener(Jve.prototype._onCollectionChanged,this)}Object.defineProperties(Jve.prototype,{isConstant:{get:function(){return aN.isConstant($ve(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const e=$ve(this);return Object(r["a"])(e)?e.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return $ve(this)}}}),Jve.fromString=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("targetCollection is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceString is required.");let n;const i=[];let o=!0,s=!1,c="";for(let r=0;r<t.length;++r){const e=t.charAt(r);s?(c+=e,s=!1):"\\"===e?s=!0:o&&"#"===e?(n=c,o=!1,c=""):o||"."!==e?c+=e:(i.push(c),c="")}return i.push(c),new Jve(e,n,i)},Jve.prototype.getValue=function(e,t){const n=$ve(this);return Object(r["a"])(n)?n.getValue(e,t):void 0},Jve.prototype.getValueInReferenceFrame=function(e,t,n){const i=$ve(this);return Object(r["a"])(i)?i.getValueInReferenceFrame(e,t,n):void 0},Jve.prototype.getType=function(e){const t=$ve(this);return Object(r["a"])(t)?t.getType(e):void 0},Jve.prototype.equals=function(e){if(this===e)return!0;const t=this._targetPropertyNames,n=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==n.length)return!1;const i=this._targetPropertyNames.length;for(let o=0;o<i;o++)if(t[o]!==n[o])return!1;return!0},Jve.prototype._onTargetEntityDefinitionChanged=function(e,t,n,i){Object(r["a"])(this._targetProperty)&&this._targetPropertyNames[0]===t&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},Jve.prototype._onCollectionChanged=function(e,t,n){let i=this._targetEntity;Object(r["a"])(i)&&-1!==n.indexOf(i)?(i.definitionChanged.removeEventListener(Jve.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):Object(r["a"])(i)||(i=$ve(this),Object(r["a"])(i)&&this._definitionChanged.raiseEvent(this))};var Qve=Jve;const Zve={packedLength:1,pack:function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("value is required");if(!Object(r["a"])(t))throw new a["a"]("array is required");return n=Object(o["a"])(n,0),t[n]=e,t},unpack:function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("array is required");return t=Object(o["a"])(t,0),e[t]},convertPackedArrayForInterpolation:function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("packedArray is required");let c;Object(r["a"])(i)||(i=[]),t=Object(o["a"])(t,0),n=Object(o["a"])(n,e.length);for(let o=0,r=n-t+1;o<r;o++){const n=e[t+o];0===o||Math.abs(c-n)<Math.PI?i[o]=n:i[o]=n-s["a"].TWO_PI,c=n}},unpackInterpolationResult:function(e,t,n,i,o){if(!Object(r["a"])(e))throw new a["a"]("array is required");if(!Object(r["a"])(t))throw new a["a"]("sourceArray is required");return o=e[0],o<0?o+s["a"].TWO_PI:o}};var eOe=Zve;const tOe={packedLength:1,pack:function(e,t,n){n=Object(o["a"])(n,0),t[n]=e},unpack:function(e,t,n){return t=Object(o["a"])(t,0),e[t]}};function nOe(e,t,n){let i;const o=e.length,r=n.length,a=o+r;if(e.length=a,o!==t){let n=o-1;for(i=a-1;i>=t;i--)e[i]=e[n--]}for(i=0;i<r;i++)e[t++]=n[i]}function iOe(e,t){return e instanceof mo?e:"string"===typeof e?mo.fromIso8601(e):mo.addSeconds(t,e,new mo)}const oOe=[],rOe=[];function aOe(e,t,n,i,o){let a,s,c,l,u,h,d=0;while(d<i.length){u=iOe(i[d],e),c=Li(t,u,mo.compare);let f=0,p=0;if(c<0){c=~c,l=c*o,s=void 0,h=t[c];while(d<i.length){if(u=iOe(i[d],e),Object(r["a"])(s)&&mo.compare(s,u)>=0||Object(r["a"])(h)&&mo.compare(u,h)>=0)break;for(oOe[f++]=u,d+=1,a=0;a<o;a++)rOe[p++]=i[d],d+=1;s=u}f>0&&(rOe.length=p,nOe(n,l,rOe),oOe.length=f,nOe(t,c,oOe))}else{for(a=0;a<o;a++)d++,n[c*o+a]=i[d];d++}}}function sOe(e,t){i["a"].defined("type",e);let n=e;n===Number&&(n=tOe);let a,s=n.packedLength,c=Object(o["a"])(n.packedInterpolationLength,s),l=0;if(Object(r["a"])(t)){const e=t.length;a=new Array(e);for(let n=0;n<e;n++){let e=t[n];e===Number&&(e=tOe);const i=e.packedLength;s+=i,c+=Object(o["a"])(e.packedInterpolationLength,i),a[n]=e}l=e}this._type=e,this._innerType=n,this._interpolationDegree=1,this._interpolationAlgorithm=fE,this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=s,this._packedInterpolationLength=c,this._updateTableLength=!0,this._interpolationResult=new Array(c),this._definitionChanged=new dn["a"],this._derivativeTypes=t,this._innerDerivativeTypes=a,this._inputOrder=l,this._forwardExtrapolationType=yO.NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=yO.NONE,this._backwardExtrapolationDuration=0}function cOe(e,t,n){const i=e._packedLength;e._times.splice(t,n),e._values.splice(t*i,n*i),e._updateTableLength=!0,e._definitionChanged.raiseEvent(e)}Object.defineProperties(sOe.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){this._forwardExtrapolationType!==e&&(this._forwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){this._forwardExtrapolationDuration!==e&&(this._forwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){this._backwardExtrapolationType!==e&&(this._backwardExtrapolationType=e,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){this._backwardExtrapolationDuration!==e&&(this._backwardExtrapolationDuration=e,this._definitionChanged.raiseEvent(this))}}}),sOe.prototype.getValue=function(e,t){i["a"].defined("time",e);const n=this._times,o=n.length;if(0===o)return;let a;const s=this._innerType,c=this._values;let l=Li(n,e,mo.compare);if(l<0){if(l=~l,0===l){const i=n[l];if(a=this._backwardExtrapolationDuration,this._backwardExtrapolationType===yO.NONE||0!==a&&mo.secondsDifference(i,e)>a)return;if(this._backwardExtrapolationType===yO.HOLD)return s.unpack(c,0,t)}if(l>=o){l=o-1;const i=n[l];if(a=this._forwardExtrapolationDuration,this._forwardExtrapolationType===yO.NONE||0!==a&&mo.secondsDifference(e,i)>a)return;if(this._forwardExtrapolationType===yO.HOLD)return l=o-1,s.unpack(c,l*s.packedLength,t)}const i=this._xTable,u=this._yTable,h=this._interpolationAlgorithm,d=this._packedInterpolationLength,f=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;const e=Math.min(h.getRequiredDataPoints(this._interpolationDegree,f),o);e!==this._numberOfPoints&&(this._numberOfPoints=e,i.length=e,u.length=e*d)}const p=this._numberOfPoints-1;if(p<1)return;let m=0,_=o-1;const g=_-m+1;if(g>=p+1){let e=l-(p/2|0)-1;e<m&&(e=m);let t=e+p;t>_&&(t=_,e=t-p,e<m&&(e=m)),m=e,_=t}const b=_-m+1;for(let e=0;e<b;++e)i[e]=mo.secondsDifference(n[m+e],n[_]);if(Object(r["a"])(s.convertPackedArrayForInterpolation))s.convertPackedArrayForInterpolation(c,m,_,u);else{let e=0;const t=this._packedLength;let n=m*t;const i=(_+1)*t;while(n<i)u[e]=c[n],n++,e++}const y=mo.secondsDifference(e,n[_]);let v;if(0!==f&&Object(r["a"])(h.interpolate)){const e=Math.floor(d/(f+1));v=h.interpolate(y,i,u,e,f,f,this._interpolationResult)}else v=h.interpolateOrderZero(y,i,u,d,this._interpolationResult);return Object(r["a"])(s.unpackInterpolationResult)?s.unpackInterpolationResult(v,c,m,_,t):s.unpack(v,0,t)}return s.unpack(c,l*this._packedLength,t)},sOe.prototype.setInterpolationOptions=function(e){if(!Object(r["a"])(e))return;let t=!1;const n=e.interpolationAlgorithm,i=e.interpolationDegree;Object(r["a"])(n)&&this._interpolationAlgorithm!==n&&(this._interpolationAlgorithm=n,t=!0),Object(r["a"])(i)&&this._interpolationDegree!==i&&(this._interpolationDegree=i,t=!0),t&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},sOe.prototype.addSample=function(e,t,n){const o=this._innerDerivativeTypes,a=Object(r["a"])(o);i["a"].defined("time",e),i["a"].defined("value",t),a&&i["a"].defined("derivatives",n);const s=this._innerType,c=[];if(c.push(e),s.pack(t,c,c.length),a){const e=o.length;for(let t=0;t<e;t++)o[t].pack(n[t],c,c.length)}aOe(void 0,this._times,this._values,c,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},sOe.prototype.addSamples=function(e,t,n){const o=this._innerDerivativeTypes,s=Object(r["a"])(o);if(i["a"].defined("times",e),i["a"].defined("values",t),e.length!==t.length)throw new a["a"]("times and values must be the same length.");if(s&&(!Object(r["a"])(n)||n.length!==e.length))throw new a["a"]("times and derivativeValues must be the same length.");const c=this._innerType,l=e.length,u=[];for(let i=0;i<l;i++)if(u.push(e[i]),c.pack(t[i],u,u.length),s){const e=n[i],t=o.length;for(let n=0;n<t;n++)o[n].pack(e[n],u,u.length)}aOe(void 0,this._times,this._values,u,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},sOe.prototype.addSamplesPackedArray=function(e,t){i["a"].defined("packedSamples",e),aOe(t,this._times,this._values,e,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},sOe.prototype.removeSample=function(e){i["a"].defined("time",e);const t=Li(this._times,e,mo.compare);return!(t<0)&&(cOe(this,t,1),!0)},sOe.prototype.removeSamples=function(e){i["a"].defined("timeInterval",e);const t=this._times;let n=Li(t,e.start,mo.compare);n<0?n=~n:e.isStartIncluded||++n;let o=Li(t,e.stop,mo.compare);o<0?o=~o:e.isStopIncluded&&++o,cOe(this,n,o-n)},sOe.prototype.equals=function(e){if(this===e)return!0;if(!Object(r["a"])(e))return!1;if(this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm)return!1;const t=this._derivativeTypes,n=Object(r["a"])(t),i=e._derivativeTypes,o=Object(r["a"])(i);if(n!==o)return!1;let a,s;if(n){if(s=t.length,s!==i.length)return!1;for(a=0;a<s;a++)if(t[a]!==i[a])return!1}const c=this._times,l=e._times;if(s=c.length,s!==l.length)return!1;for(a=0;a<s;a++)if(!mo.equals(c[a],l[a]))return!1;const u=this._values,h=e._values;for(s=u.length,a=0;a<s;a++)if(u[a]!==h[a])return!1;return!0},sOe._mergeNewSamples=aOe;var lOe=sOe;function uOe(e,t){let n;if(t=Object(o["a"])(t,0),t>0){n=new Array(t);for(let e=0;e<t;e++)n[e]=g}this._numberOfDerivatives=t,this._property=new lOe(g,n),this._definitionChanged=new dn["a"],this._referenceFrame=Object(o["a"])(e,iD.FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object.defineProperties(uOe.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}}),uOe.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},uOe.prototype.getValueInReferenceFrame=function(e,t,n){if(i["a"].defined("time",e),i["a"].defined("referenceFrame",t),n=this._property.getValue(e,n),Object(r["a"])(n))return Eq.convertToReferenceFrame(e,n,this._referenceFrame,t,n)},uOe.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)},uOe.prototype.addSample=function(e,t,n){const i=this._numberOfDerivatives;if(i>0&&(!Object(r["a"])(n)||n.length!==i))throw new a["a"]("derivatives length must be equal to the number of derivatives.");this._property.addSample(e,t,n)},uOe.prototype.addSamples=function(e,t,n){this._property.addSamples(e,t,n)},uOe.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)},uOe.prototype.removeSample=function(e){return this._property.removeSample(e)},uOe.prototype.removeSamples=function(e){this._property.removeSamples(e)},uOe.prototype.equals=function(e){return this===e||e instanceof uOe&&aN.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};var hOe=uOe;const dOe={HORIZONTAL:0,VERTICAL:1};var fOe=Object.freeze(dOe);const pOe=fOe.HORIZONTAL,mOe=Dm.WHITE,_Oe=Dm.BLACK,gOe=0,bOe=1;function yOe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._definitionChanged=new dn["a"],this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.orientation=e.orientation,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.offset=e.offset,this.repeat=e.repeat}Object.defineProperties(yOe.prototype,{isConstant:{get:function(){return aN.isConstant(this._orientation)&&aN.isConstant(this._evenColor)&&aN.isConstant(this._oddColor)&&aN.isConstant(this._offset)&&aN.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:XM("orientation"),evenColor:XM("evenColor"),oddColor:XM("oddColor"),offset:XM("offset"),repeat:XM("repeat")}),yOe.prototype.getType=function(e){return"Stripe"},yOe.prototype.getValue=function(e,t){return Object(r["a"])(t)||(t={}),t.horizontal=aN.getValueOrDefault(this._orientation,e,pOe)===fOe.HORIZONTAL,t.evenColor=aN.getValueOrClonedDefault(this._evenColor,e,mOe,t.evenColor),t.oddColor=aN.getValueOrClonedDefault(this._oddColor,e,_Oe,t.oddColor),t.offset=aN.getValueOrDefault(this._offset,e,gOe),t.repeat=aN.getValueOrDefault(this._repeat,e,bOe),t},yOe.prototype.equals=function(e){return this===e||e instanceof yOe&&aN.equals(this._orientation,e._orientation)&&aN.equals(this._evenColor,e._evenColor)&&aN.equals(this._oddColor,e._oddColor)&&aN.equals(this._offset,e._offset)&&aN.equals(this._repeat,e._repeat)};var vOe=yOe;function OOe(e){this._definitionChanged=new dn["a"],this._intervals=new xR,this._intervals.changedEvent.addEventListener(OOe.prototype._intervalsChanged,this),this._referenceFrame=Object(o["a"])(e,iD.FIXED)}Object.defineProperties(OOe.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),OOe.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},OOe.prototype.getValueInReferenceFrame=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceFrame is required.");const i=this._intervals.findDataForIntervalContainingDate(e);if(Object(r["a"])(i))return Eq.convertToReferenceFrame(e,i,this._referenceFrame,t,n)},OOe.prototype.equals=function(e){return this===e||e instanceof OOe&&this._intervals.equals(e._intervals,aN.equals)&&this._referenceFrame===e._referenceFrame},OOe.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};var AOe=OOe;function wOe(){this._definitionChanged=new dn["a"],this._intervals=new xR,this._intervals.changedEvent.addEventListener(wOe.prototype._intervalsChanged,this)}Object.defineProperties(wOe.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),wOe.prototype.getValue=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("time is required");const n=this._intervals.findDataForIntervalContainingDate(e);return Object(r["a"])(n)&&"function"===typeof n.clone?n.clone(t):n},wOe.prototype.equals=function(e){return this===e||e instanceof wOe&&this._intervals.equals(e._intervals,aN.equals)},wOe.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};var TOe=wOe;function COe(e,t){this._position=void 0,this._subscription=void 0,this._definitionChanged=new dn["a"],this._normalize=Object(o["a"])(t,!0),this.position=e}Object.defineProperties(COe.prototype,{isConstant:{get:function(){return aN.isConstant(this._position)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._position},set:function(e){const t=this._position;t!==e&&(Object(r["a"])(t)&&this._subscription(),this._position=e,Object(r["a"])(e)&&(this._subscription=e._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)),this._definitionChanged.raiseEvent(this))}},normalize:{get:function(){return this._normalize},set:function(e){this._normalize!==e&&(this._normalize=e,this._definitionChanged.raiseEvent(this))}}});const EOe=new g,xOe=new g,SOe=new mo,IOe=1/60;COe.prototype.getValue=function(e,t){return this._getValue(e,t)},COe.prototype._getValue=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required");Object(r["a"])(t)||(t=new g);const i=this._position;if(aN.isConstant(i))return this._normalize?void 0:g.clone(g.ZERO,t);let o=i.getValue(e,EOe),s=i.getValue(mo.addSeconds(e,IOe,SOe),xOe);if(!Object(r["a"])(o))return;if(!Object(r["a"])(s)&&(s=o,o=i.getValue(mo.addSeconds(e,-IOe,SOe),xOe),!Object(r["a"])(o)))return;if(g.equals(o,s))return this._normalize?void 0:g.clone(g.ZERO,t);Object(r["a"])(n)&&o.clone(n);const c=g.subtract(s,o,t);return this._normalize?g.normalize(c,t):g.divideByScalar(c,IOe,t)},COe.prototype.equals=function(e){return this===e||e instanceof COe&&aN.equals(this._position,e._position)};var DOe=COe;function POe(e,t){this._velocityVectorProperty=new DOe(e,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new dn["a"],this.ellipsoid=Object(o["a"])(t,k.WGS84);const n=this;this._velocityVectorProperty.definitionChanged.addEventListener((function(){n._definitionChanged.raiseEvent(n)}))}Object.defineProperties(POe.prototype,{isConstant:{get:function(){return aN.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(e){this._velocityVectorProperty.position=e}},ellipsoid:{get:function(){return this._ellipsoid},set:function(e){const t=this._ellipsoid;t!==e&&(this._ellipsoid=e,this._definitionChanged.raiseEvent(this))}}});const jOe=new g,ROe=new g,LOe=new ce;POe.prototype.getValue=function(e,t){const n=this._velocityVectorProperty._getValue(e,ROe,jOe);if(Object(r["a"])(n))return ka.rotationMatrixFromPositionVelocity(jOe,n,this._ellipsoid,LOe),Kr.fromRotationMatrix(LOe,t)},POe.prototype.equals=function(e){return this===e||e instanceof POe&&aN.equals(this._velocityVectorProperty,e._velocityVectorProperty)&&(this._ellipsoid===e._ellipsoid||this._ellipsoid.equals(e._ellipsoid))};var MOe=POe;function NOe(){}let BOe;function FOe(e,t){return"#"===t[0]&&(t=BOe+t),Qve.fromString(e,t)}function zOe(e,t,n){if(Object(r["a"])(n.reference))return FOe(t,n.reference);if(Object(r["a"])(n.velocityReference)){const i=FOe(t,n.velocityReference);switch(e){case g:case NOe:return new DOe(i,e===NOe);case Kr:return new MOe(i)}}throw new ye["a"](`${JSON.stringify(n)} is not valid CZML.`)}function kOe(e,t){return new kY((function(n,i){return t(e.getValue(n,i))}),e.isConstant)}NOe.packedLength=g.packedLength,NOe.unpack=g.unpack,NOe.pack=g.pack;const UOe=new g,VOe=new uR,HOe=new I,GOe=new ZC,WOe=new Kr;function qOe(e){let t=e.rgbaf;if(Object(r["a"])(t))return t;const n=e.rgba;if(!Object(r["a"])(n))return;const i=n.length;if(i===Dm.packedLength)return[Dm.byteToFloat(n[0]),Dm.byteToFloat(n[1]),Dm.byteToFloat(n[2]),Dm.byteToFloat(n[3])];t=new Array(i);for(let o=0;o<i;o+=5)t[o]=n[o],t[o+1]=Dm.byteToFloat(n[o+1]),t[o+2]=Dm.byteToFloat(n[o+2]),t[o+3]=Dm.byteToFloat(n[o+3]),t[o+4]=Dm.byteToFloat(n[o+4]);return t}function YOe(e,t){const n=Object(o["a"])(e.uri,e);return Object(r["a"])(t)?t.getDerivedResource({url:n}):Et["a"].createIfNeeded(n)}function XOe(e){let t=e.wsen;if(Object(r["a"])(t))return t;const n=e.wsenDegrees;if(!Object(r["a"])(n))return;const i=n.length;if(i===Fe.packedLength)return[s["a"].toRadians(n[0]),s["a"].toRadians(n[1]),s["a"].toRadians(n[2]),s["a"].toRadians(n[3])];t=new Array(i);for(let o=0;o<i;o+=5)t[o]=n[o],t[o+1]=s["a"].toRadians(n[o+1]),t[o+2]=s["a"].toRadians(n[o+2]),t[o+3]=s["a"].toRadians(n[o+3]),t[o+4]=s["a"].toRadians(n[o+4]);return t}function KOe(e){const t=e.length;if(VOe.magnitude=1,2===t)return VOe.clock=e[0],VOe.cone=e[1],g.fromSpherical(VOe,UOe),[UOe.x,UOe.y,UOe.z];const n=new Array(t/3*4);for(let i=0,o=0;i<t;i+=3,o+=4)n[o]=e[i],VOe.clock=e[i+1],VOe.cone=e[i+2],g.fromSpherical(VOe,UOe),n[o+1]=UOe.x,n[o+2]=UOe.y,n[o+3]=UOe.z;return n}function $Oe(e){const t=e.length;if(3===t)return VOe.clock=e[0],VOe.cone=e[1],VOe.magnitude=e[2],g.fromSpherical(VOe,UOe),[UOe.x,UOe.y,UOe.z];const n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],VOe.clock=e[i+1],VOe.cone=e[i+2],VOe.magnitude=e[i+3],g.fromSpherical(VOe,UOe),n[i+1]=UOe.x,n[i+2]=UOe.y,n[i+3]=UOe.z;return n}function JOe(e){const t=e.length;if(3===t)return HOe.longitude=e[0],HOe.latitude=e[1],HOe.height=e[2],k.WGS84.cartographicToCartesian(HOe,UOe),[UOe.x,UOe.y,UOe.z];const n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],HOe.longitude=e[i+1],HOe.latitude=e[i+2],HOe.height=e[i+3],k.WGS84.cartographicToCartesian(HOe,UOe),n[i+1]=UOe.x,n[i+2]=UOe.y,n[i+3]=UOe.z;return n}function QOe(e){const t=e.length;if(3===t)return HOe.longitude=s["a"].toRadians(e[0]),HOe.latitude=s["a"].toRadians(e[1]),HOe.height=e[2],k.WGS84.cartographicToCartesian(HOe,UOe),[UOe.x,UOe.y,UOe.z];const n=new Array(t);for(let i=0;i<t;i+=4)n[i]=e[i],HOe.longitude=s["a"].toRadians(e[i+1]),HOe.latitude=s["a"].toRadians(e[i+2]),HOe.height=e[i+3],k.WGS84.cartographicToCartesian(HOe,UOe),n[i+1]=UOe.x,n[i+2]=UOe.y,n[i+3]=UOe.z;return n}function ZOe(e){const t=e.cartesian;if(Object(r["a"])(t))return t;const n=e.cartesianVelocity;if(Object(r["a"])(n))return n;const i=e.unitCartesian;if(Object(r["a"])(i))return i;const o=e.unitSpherical;if(Object(r["a"])(o))return KOe(o);const a=e.spherical;if(Object(r["a"])(a))return $Oe(a);const s=e.cartographicRadians;if(Object(r["a"])(s))return JOe(s);const c=e.cartographicDegrees;if(Object(r["a"])(c))return QOe(c);throw new ye["a"](`${JSON.stringify(e)} is not a valid CZML interval.`)}function eAe(e,t){g.unpack(e,t,UOe),g.normalize(UOe,UOe),g.pack(UOe,e,t)}function tAe(e){const t=ZOe(e);if(3===t.length)return eAe(t,0),t;for(let n=1;n<t.length;n+=4)eAe(t,n);return t}function nAe(e,t){Kr.unpack(e,t,WOe),Kr.normalize(WOe,WOe),Kr.pack(WOe,e,t)}function iAe(e){const t=e.unitQuaternion;if(Object(r["a"])(t)){if(4===t.length)return nAe(t,0),t;for(let e=1;e<t.length;e+=5)nAe(t,e)}return t}function oAe(e){return"boolean"===typeof e?Boolean:"number"===typeof e?Number:"string"===typeof e?String:e.hasOwnProperty("array")?Array:e.hasOwnProperty("boolean")?Boolean:e.hasOwnProperty("boundingRectangle")?Au:e.hasOwnProperty("cartesian2")?Gt:e.hasOwnProperty("cartesian")||e.hasOwnProperty("spherical")||e.hasOwnProperty("cartographicRadians")||e.hasOwnProperty("cartographicDegrees")?g:e.hasOwnProperty("unitCartesian")||e.hasOwnProperty("unitSpherical")?NOe:e.hasOwnProperty("rgba")||e.hasOwnProperty("rgbaf")?Dm:e.hasOwnProperty("arcType")?uu:e.hasOwnProperty("classificationType")?DV:e.hasOwnProperty("colorBlendMode")?T4:e.hasOwnProperty("cornerType")?Tg:e.hasOwnProperty("heightReference")?QM:e.hasOwnProperty("horizontalOrigin")?eN:e.hasOwnProperty("date")?mo:e.hasOwnProperty("labelStyle")?Zle:e.hasOwnProperty("number")?Number:e.hasOwnProperty("nearFarScalar")?xE:e.hasOwnProperty("distanceDisplayCondition")?Sv:e.hasOwnProperty("object")||e.hasOwnProperty("value")?Object:e.hasOwnProperty("unitQuaternion")?Kr:e.hasOwnProperty("shadowMode")?DH:e.hasOwnProperty("string")?String:e.hasOwnProperty("stripeOrientation")?fOe:e.hasOwnProperty("wsen")||e.hasOwnProperty("wsenDegrees")?Fe:e.hasOwnProperty("uri")?Uc.a:e.hasOwnProperty("verticalOrigin")?nN:Object}function rAe(e,t,n){switch(e){case uu:return uu[Object(o["a"])(t.arcType,t)];case Array:return t.array;case Boolean:return Object(o["a"])(t["boolean"],t);case Au:return t.boundingRectangle;case Gt:return t.cartesian2;case g:return ZOe(t);case NOe:return tAe(t);case Dm:return qOe(t);case DV:return DV[Object(o["a"])(t.classificationType,t)];case T4:return T4[Object(o["a"])(t.colorBlendMode,t)];case Tg:return Tg[Object(o["a"])(t.cornerType,t)];case QM:return QM[Object(o["a"])(t.heightReference,t)];case eN:return eN[Object(o["a"])(t.horizontalOrigin,t)];case Image:return YOe(t,n);case mo:return mo.fromIso8601(Object(o["a"])(t.date,t));case Zle:return Zle[Object(o["a"])(t.labelStyle,t)];case Number:return Object(o["a"])(t.number,t);case xE:return t.nearFarScalar;case Sv:return t.distanceDisplayCondition;case Object:return Object(o["a"])(Object(o["a"])(t.object,t.value),t);case Kr:return iAe(t);case eOe:return Object(o["a"])(t.number,t);case DH:return DH[Object(o["a"])(Object(o["a"])(t.shadowMode,t.shadows),t)];case String:return Object(o["a"])(t.string,t);case fOe:return fOe[Object(o["a"])(t.stripeOrientation,t)];case Fe:return XOe(t);case Uc.a:return YOe(t,n);case nN:return nN[Object(o["a"])(t.verticalOrigin,t)];default:throw new ye["a"](e)}}const aAe={HERMITE:oC,LAGRANGE:hE,LINEAR:fE};function sAe(e,t){const n=e.interpolationAlgorithm,i=e.interpolationDegree;(Object(r["a"])(n)||Object(r["a"])(i))&&t.setInterpolationOptions({interpolationAlgorithm:aAe[n],interpolationDegree:i});const o=e.forwardExtrapolationType;Object(r["a"])(o)&&(t.forwardExtrapolationType=yO[o]);const a=e.forwardExtrapolationDuration;Object(r["a"])(a)&&(t.forwardExtrapolationDuration=a);const s=e.backwardExtrapolationType;Object(r["a"])(s)&&(t.backwardExtrapolationType=yO[s]);const c=e.backwardExtrapolationDuration;Object(r["a"])(c)&&(t.backwardExtrapolationDuration=c)}const cAe={iso8601:void 0};function lAe(e){if(Object(r["a"])(e))return cAe.iso8601=e,ZC.fromIso8601(cAe)}function uAe(e){const t=oE.MAXIMUM_INTERVAL.clone();return t.data=e,t}function hAe(e){const t=new wbe;return t.intervals.addInterval(uAe(e)),t}function dAe(e){const t=new xbe(e.referenceFrame);return t.intervals.addInterval(uAe(e)),t}function fAe(e,t,n,i,a,s,c){let l,u,h,d=lAe(i.interval);Object(r["a"])(a)&&(d=Object(r["a"])(d)?ZC.intersect(d,a,GOe):a);const f=!Object(r["a"])(i.reference)&&!Object(r["a"])(i.velocityReference),p=Object(r["a"])(d)&&!d.equals(oE.MAXIMUM_INTERVAL);if(!0===i.delete)return p?pAe(t[n],d):void(t[n]=void 0);let m=!1;if(f){if(u=rAe(e,i,s),!Object(r["a"])(u))return;l=Object(o["a"])(e.packedLength,1),h=Object(o["a"])(u.length,1),m=!Object(r["a"])(i.array)&&"string"!==typeof u&&h>l&&e!==Object}const _="function"===typeof e.unpack&&e!==eOe;if(!m&&!p)return void(t[n]=f?new GM(_?e.unpack(u,0):u):zOe(e,c,i));let g,b=t[n];const y=i.epoch;if(Object(r["a"])(y)&&(g=mo.fromIso8601(y)),m&&!p)return b instanceof lOe||(t[n]=b=new lOe(e)),b.addSamplesPackedArray(u,g),void sAe(i,b);let v;if(!m&&p)return d=d.clone(),d.data=f?_?e.unpack(u,0):u:zOe(e,c,i),Object(r["a"])(b)||(t[n]=b=f?new TOe:new wbe),void(f&&b instanceof TOe?b.intervals.addInterval(d):b instanceof wbe?(f&&(d.data=new GM(d.data)),b.intervals.addInterval(d)):(t[n]=b=hAe(b),f&&(d.data=new GM(d.data)),b.intervals.addInterval(d)));Object(r["a"])(b)||(t[n]=b=new wbe),b instanceof wbe||(t[n]=b=hAe(b));const O=b.intervals;v=O.findInterval(d),Object(r["a"])(v)&&v.data instanceof lOe||(v=d.clone(),v.data=new lOe(e),O.addInterval(v)),v.data.addSamplesPackedArray(u,g),sAe(i,v.data)}function pAe(e,t){if(e instanceof lOe)e.removeSamples(t);else if(e instanceof TOe)e.intervals.removeInterval(t);else if(e instanceof wbe){const n=e.intervals;for(let e=0;e<n.length;++e){const i=ZC.intersect(n.get(e),t,GOe);i.isEmpty||pAe(i.data,t)}n.removeInterval(t)}else;}function mAe(e,t,n,i,o,a,s){if(Object(r["a"])(i))if(Array.isArray(i))for(let r=0,c=i.length;r<c;++r)fAe(e,t,n,i[r],o,a,s);else fAe(e,t,n,i,o,a,s)}function _Ae(e,t,n,i,a,s){let c=lAe(n.interval);Object(r["a"])(i)&&(c=Object(r["a"])(c)?ZC.intersect(c,i,GOe):i);const l=Object(r["a"])(n.cartesianVelocity)?1:0,u=g.packedLength*(l+1);let h,d;const f=!Object(r["a"])(n.reference),p=Object(r["a"])(c)&&!c.equals(oE.MAXIMUM_INTERVAL);if(!0===n.delete)return p?gAe(e[t],c):void(e[t]=void 0);let m,_=!1;if(f&&(Object(r["a"])(n.referenceFrame)&&(m=iD[n.referenceFrame]),m=Object(o["a"])(m,iD.FIXED),h=ZOe(n),d=Object(o["a"])(h.length,1),_=d>u),!_&&!p)return void(e[t]=f?new Sq(g.unpack(h),m):FOe(s,n.reference));let b,y=e[t];const v=n.epoch;if(Object(r["a"])(v)&&(b=mo.fromIso8601(v)),_&&!p)return y instanceof hOe&&(!Object(r["a"])(m)||y.referenceFrame===m)||(e[t]=y=new hOe(m,l)),y.addSamplesPackedArray(h,b),void sAe(n,y);let O;if(!_&&p)return c=c.clone(),c.data=f?g.unpack(h):FOe(s,n.reference),Object(r["a"])(y)||(y=f?new AOe(m):new xbe(m),e[t]=y),void(f&&y instanceof AOe&&Object(r["a"])(m)&&y.referenceFrame===m?y.intervals.addInterval(c):y instanceof xbe?(f&&(c.data=new Sq(c.data,m)),y.intervals.addInterval(c)):(e[t]=y=dAe(y),f&&(c.data=new Sq(c.data,m)),y.intervals.addInterval(c)));Object(r["a"])(y)?y instanceof xbe||(e[t]=y=dAe(y)):e[t]=y=new xbe(m);const A=y.intervals;O=A.findInterval(c),Object(r["a"])(O)&&O.data instanceof hOe&&(!Object(r["a"])(m)||O.data.referenceFrame===m)||(O=c.clone(),O.data=new hOe(m,l),A.addInterval(O)),O.data.addSamplesPackedArray(h,b),sAe(n,O.data)}function gAe(e,t){if(e instanceof hOe)e.removeSamples(t);else if(e instanceof AOe)e.intervals.removeInterval(t);else if(e instanceof xbe){const n=e.intervals;for(let e=0;e<n.length;++e){const i=ZC.intersect(n.get(e),t,GOe);i.isEmpty||gAe(i.data,t)}n.removeInterval(t)}else;}function bAe(e,t,n,i,o,a){if(Object(r["a"])(n))if(Array.isArray(n))for(let r=0,s=n.length;r<s;++r)_Ae(e,t,n[r],i,o,a);else _Ae(e,t,n,i,o,a)}function yAe(e,t,n,i){Object(r["a"])(n.references)?SAe(e,t,n.references,n.interval,i,Kve,wbe):(Object(r["a"])(n.cartesian2)?n.array=Gt.unpackArray(n.cartesian2):Object(r["a"])(n.cartesian)&&(n.array=Gt.unpackArray(n.cartesian)),Object(r["a"])(n.array)&&mAe(Array,e,t,n,void 0,void 0,i))}function vAe(e,t,n,i,o,a){let s=lAe(n.interval);Object(r["a"])(i)&&(s=Object(r["a"])(s)?ZC.intersect(s,i,GOe):i);let c,l,u,h=e[t];if(Object(r["a"])(s)){h instanceof Cbe||(h=new Cbe,e[t]=h);const n=h.intervals;l=n.findInterval({start:s.start,stop:s.stop}),Object(r["a"])(l)?c=l.data:(l=s.clone(),n.addInterval(l))}else c=h;Object(r["a"])(n.solidColor)?(c instanceof oF||(c=new oF),u=n.solidColor,mAe(Dm,c,"color",u.color,void 0,void 0,a)):Object(r["a"])(n.grid)?(c instanceof xve||(c=new xve),u=n.grid,mAe(Dm,c,"color",u.color,void 0,o,a),mAe(Number,c,"cellAlpha",u.cellAlpha,void 0,o,a),mAe(Gt,c,"lineCount",u.lineCount,void 0,o,a),mAe(Gt,c,"lineThickness",u.lineThickness,void 0,o,a),mAe(Gt,c,"lineOffset",u.lineOffset,void 0,o,a)):Object(r["a"])(n.image)?(c instanceof bq||(c=new bq),u=n.image,mAe(Image,c,"image",u.image,void 0,o,a),mAe(Gt,c,"repeat",u.repeat,void 0,o,a),mAe(Dm,c,"color",u.color,void 0,o,a),mAe(Boolean,c,"transparent",u.transparent,void 0,o,a)):Object(r["a"])(n.stripe)?(c instanceof vOe||(c=new vOe),u=n.stripe,mAe(fOe,c,"orientation",u.orientation,void 0,o,a),mAe(Dm,c,"evenColor",u.evenColor,void 0,o,a),mAe(Dm,c,"oddColor",u.oddColor,void 0,o,a),mAe(Number,c,"offset",u.offset,void 0,o,a),mAe(Number,c,"repeat",u.repeat,void 0,o,a)):Object(r["a"])(n.polylineOutline)?(c instanceof Wve||(c=new Wve),u=n.polylineOutline,mAe(Dm,c,"color",u.color,void 0,o,a),mAe(Dm,c,"outlineColor",u.outlineColor,void 0,o,a),mAe(Number,c,"outlineWidth",u.outlineWidth,void 0,o,a)):Object(r["a"])(n.polylineGlow)?(c instanceof kve||(c=new kve),u=n.polylineGlow,mAe(Dm,c,"color",u.color,void 0,o,a),mAe(Number,c,"glowPower",u.glowPower,void 0,o,a),mAe(Number,c,"taperPower",u.taperPower,void 0,o,a)):Object(r["a"])(n.polylineArrow)?(c instanceof Ive||(c=new Ive),u=n.polylineArrow,mAe(Dm,c,"color",u.color,void 0,void 0,a)):Object(r["a"])(n.polylineDash)?(c instanceof Mve||(c=new Mve),u=n.polylineDash,mAe(Dm,c,"color",u.color,void 0,void 0,a),mAe(Dm,c,"gapColor",u.gapColor,void 0,void 0,a),mAe(Number,c,"dashLength",u.dashLength,void 0,o,a),mAe(Number,c,"dashPattern",u.dashPattern,void 0,o,a)):Object(r["a"])(n.checkerboard)&&(c instanceof abe||(c=new abe),u=n.checkerboard,mAe(Dm,c,"evenColor",u.evenColor,void 0,o,a),mAe(Dm,c,"oddColor",u.oddColor,void 0,o,a),mAe(Gt,c,"repeat",u.repeat,void 0,o,a)),Object(r["a"])(l)?l.data=c:e[t]=c}function OAe(e,t,n,i,o,a){if(Object(r["a"])(n))if(Array.isArray(n))for(let r=0,s=n.length;r<s;++r)vAe(e,t,n[r],i,o,a);else vAe(e,t,n,i,o,a)}function AAe(e,t,n,i){const o=t.name;Object(r["a"])(o)&&(e.name=t.name)}function wAe(e,t,n,i){const o=t.description;Object(r["a"])(o)&&mAe(String,e,"description",o,void 0,i,n)}function TAe(e,t,n,i){const o=t.position;Object(r["a"])(o)&&bAe(e,"position",o,void 0,i,n)}function CAe(e,t,n,i){const o=t.viewFrom;Object(r["a"])(o)&&mAe(g,e,"viewFrom",o,void 0,i,n)}function EAe(e,t,n,i){const o=t.orientation;Object(r["a"])(o)&&mAe(Kr,e,"orientation",o,void 0,i,n)}function xAe(e,t,n,i){const o=t.properties;if(Object(r["a"])(o)){Object(r["a"])(e.properties)||(e.properties=new Xq);for(const t in o)if(o.hasOwnProperty(t)){e.properties.hasProperty(t)||e.properties.addProperty(t);const r=o[t];if(Array.isArray(r))for(let o=0,a=r.length;o<a;++o)fAe(oAe(r[o]),e.properties,t,r[o],void 0,i,n);else fAe(oAe(r),e.properties,t,r,void 0,i,n)}}}function SAe(e,t,n,i,o,a,s){const c=n.map((function(e){return FOe(o,e)}));if(Object(r["a"])(i)){i=lAe(i);let n=e[t];if(!(n instanceof s)){const i=new s;i.intervals.addInterval(uAe(n)),e[t]=n=i}i.data=new a(c),n.intervals.addInterval(i)}else e[t]=new a(c)}function IAe(e,t,n,i){const o=n.references;Object(r["a"])(o)?SAe(e,t,o,n.interval,i,Kve,wbe):mAe(Array,e,t,n,void 0,void 0,i)}function DAe(e,t,n,i){if(Object(r["a"])(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)IAe(e,t,n[o],i);else IAe(e,t,n,i)}function PAe(e,t,n,i){const o=n.references;Object(r["a"])(o)?SAe(e,t,o,n.interval,i,Yve,xbe):(Object(r["a"])(n.cartesian)?n.array=g.unpackArray(n.cartesian):Object(r["a"])(n.cartographicRadians)?n.array=g.fromRadiansArrayHeights(n.cartographicRadians):Object(r["a"])(n.cartographicDegrees)&&(n.array=g.fromDegreesArrayHeights(n.cartographicDegrees)),Object(r["a"])(n.array)&&mAe(Array,e,t,n,void 0,void 0,i))}function jAe(e,t,n,i){if(Object(r["a"])(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)PAe(e,t,n[o],i);else PAe(e,t,n,i)}function RAe(e){return g.unpackArray(e)}function LAe(e){return g.fromRadiansArrayHeights(e)}function MAe(e){return g.fromDegreesArrayHeights(e)}function NAe(e,t,n,i){const o=n.references;if(Object(r["a"])(o)){const r=o.map((function(e){const t={};return SAe(t,"positions",e,n.interval,i,Yve,xbe),t.positions}));e[t]=new Yve(r)}else Object(r["a"])(n.cartesian)?n.array=n.cartesian.map(RAe):Object(r["a"])(n.cartographicRadians)?n.array=n.cartographicRadians.map(LAe):Object(r["a"])(n.cartographicDegrees)&&(n.array=n.cartographicDegrees.map(MAe)),Object(r["a"])(n.array)&&mAe(Array,e,t,n,void 0,void 0,i)}function BAe(e,t,n,i){if(Object(r["a"])(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;++o)NAe(e,t,n[o],i);else NAe(e,t,n,i)}function FAe(e,t,n,i){if(Object(r["a"])(n))if(Array.isArray(n))for(let o=0,r=n.length;o<r;o++)yAe(e,t,n[o],i);else yAe(e,t,n,i)}function zAe(e,t,n,i){const o=t.availability;if(!Object(r["a"])(o))return;let a;if(Array.isArray(o))for(let s=0,c=o.length;s<c;++s)Object(r["a"])(a)||(a=new xR),a.addInterval(lAe(o[s]));else a=new xR,a.addInterval(lAe(o));e.availability=a}function kAe(e,t,n,i,o){Object(r["a"])(t)&&mAe(NOe,e,"alignedAxis",t,n,i,o)}function UAe(e,t,n,i){const o=t.billboard;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.billboard;Object(r["a"])(s)||(e.billboard=s=new $M),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Image,s,"image",o.image,a,i,n),mAe(Number,s,"scale",o.scale,a,i,n),mAe(Gt,s,"pixelOffset",o.pixelOffset,a,i,n),mAe(g,s,"eyeOffset",o.eyeOffset,a,i,n),mAe(eN,s,"horizontalOrigin",o.horizontalOrigin,a,i,n),mAe(nN,s,"verticalOrigin",o.verticalOrigin,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Dm,s,"color",o.color,a,i,n),mAe(eOe,s,"rotation",o.rotation,a,i,n),kAe(s,o.alignedAxis,a,i,n),mAe(Boolean,s,"sizeInMeters",o.sizeInMeters,a,i,n),mAe(Number,s,"width",o.width,a,i,n),mAe(Number,s,"height",o.height,a,i,n),mAe(xE,s,"scaleByDistance",o.scaleByDistance,a,i,n),mAe(xE,s,"translucencyByDistance",o.translucencyByDistance,a,i,n),mAe(xE,s,"pixelOffsetScaleByDistance",o.pixelOffsetScaleByDistance,a,i,n),mAe(Au,s,"imageSubRegion",o.imageSubRegion,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(Number,s,"disableDepthTestDistance",o.disableDepthTestDistance,a,i,n)}function VAe(e,t,n,i){const o=t.box;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.box;Object(r["a"])(s)||(e.box=s=new wq),mAe(Boolean,s,"show",o.show,a,i,n),mAe(g,s,"dimensions",o.dimensions,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function HAe(e,t,n,i){const o=t.corridor;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.corridor;Object(r["a"])(s)||(e.corridor=s=new Dq),mAe(Boolean,s,"show",o.show,a,i,n),jAe(s,"positions",o.positions,n),mAe(Number,s,"width",o.width,a,i,n),mAe(Number,s,"height",o.height,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Number,s,"extrudedHeight",o.extrudedHeight,a,i,n),mAe(QM,s,"extrudedHeightReference",o.extrudedHeightReference,a,i,n),mAe(Tg,s,"cornerType",o.cornerType,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(DV,s,"classificationType",o.classificationType,a,i,n),mAe(Number,s,"zIndex",o.zIndex,a,i,n)}function GAe(e,t,n,i){const o=t.cylinder;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.cylinder;Object(r["a"])(s)||(e.cylinder=s=new Mq),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Number,s,"length",o.length,a,i,n),mAe(Number,s,"topRadius",o.topRadius,a,i,n),mAe(Number,s,"bottomRadius",o.bottomRadius,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(Number,s,"numberOfVerticalLines",o.numberOfVerticalLines,a,i,n),mAe(Number,s,"slices",o.slices,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function WAe(e,t){const n=e.version;if(Object(r["a"])(n)&&"string"===typeof n){const e=n.split(".");if(2===e.length){if("1"!==e[0])throw new ye["a"]("Cesium only supports CZML version 1.");t._version=n}}if(!Object(r["a"])(t._version))throw new ye["a"]("CZML version information invalid.  It is expected to be a property on the document object in the <Major>.<Minor> version format.");const i=t._documentPacket;Object(r["a"])(e.name)&&(i.name=e.name);const a=e.clock;if(Object(r["a"])(a)){const e=i.clock;Object(r["a"])(e)?(e.interval=Object(o["a"])(a.interval,e.interval),e.currentTime=Object(o["a"])(a.currentTime,e.currentTime),e.range=Object(o["a"])(a.range,e.range),e.step=Object(o["a"])(a.step,e.step),e.multiplier=Object(o["a"])(a.multiplier,e.multiplier)):i.clock={interval:a.interval,currentTime:a.currentTime,range:a.range,step:a.step,multiplier:a.multiplier}}}function qAe(e,t,n,i){const o=t.ellipse;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.ellipse;Object(r["a"])(s)||(e.ellipse=s=new Bq),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Number,s,"semiMajorAxis",o.semiMajorAxis,a,i,n),mAe(Number,s,"semiMinorAxis",o.semiMinorAxis,a,i,n),mAe(Number,s,"height",o.height,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Number,s,"extrudedHeight",o.extrudedHeight,a,i,n),mAe(QM,s,"extrudedHeightReference",o.extrudedHeightReference,a,i,n),mAe(eOe,s,"rotation",o.rotation,a,i,n),mAe(eOe,s,"stRotation",o.stRotation,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(Number,s,"numberOfVerticalLines",o.numberOfVerticalLines,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(DV,s,"classificationType",o.classificationType,a,i,n),mAe(Number,s,"zIndex",o.zIndex,a,i,n)}function YAe(e,t,n,i){const o=t.ellipsoid;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.ellipsoid;Object(r["a"])(s)||(e.ellipsoid=s=new zq),mAe(Boolean,s,"show",o.show,a,i,n),mAe(g,s,"radii",o.radii,a,i,n),mAe(g,s,"innerRadii",o.innerRadii,a,i,n),mAe(Number,s,"minimumClock",o.minimumClock,a,i,n),mAe(Number,s,"maximumClock",o.maximumClock,a,i,n),mAe(Number,s,"minimumCone",o.minimumCone,a,i,n),mAe(Number,s,"maximumCone",o.maximumCone,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(Number,s,"stackPartitions",o.stackPartitions,a,i,n),mAe(Number,s,"slicePartitions",o.slicePartitions,a,i,n),mAe(Number,s,"subdivisions",o.subdivisions,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function XAe(e,t,n,i){const o=t.label;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.label;Object(r["a"])(s)||(e.label=s=new Uq),mAe(Boolean,s,"show",o.show,a,i,n),mAe(String,s,"text",o.text,a,i,n),mAe(String,s,"font",o.font,a,i,n),mAe(Zle,s,"style",o.style,a,i,n),mAe(Number,s,"scale",o.scale,a,i,n),mAe(Boolean,s,"showBackground",o.showBackground,a,i,n),mAe(Dm,s,"backgroundColor",o.backgroundColor,a,i,n),mAe(Gt,s,"backgroundPadding",o.backgroundPadding,a,i,n),mAe(Gt,s,"pixelOffset",o.pixelOffset,a,i,n),mAe(g,s,"eyeOffset",o.eyeOffset,a,i,n),mAe(eN,s,"horizontalOrigin",o.horizontalOrigin,a,i,n),mAe(nN,s,"verticalOrigin",o.verticalOrigin,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Dm,s,"fillColor",o.fillColor,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(xE,s,"translucencyByDistance",o.translucencyByDistance,a,i,n),mAe(xE,s,"pixelOffsetScaleByDistance",o.pixelOffsetScaleByDistance,a,i,n),mAe(xE,s,"scaleByDistance",o.scaleByDistance,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(Number,s,"disableDepthTestDistance",o.disableDepthTestDistance,a,i,n)}function KAe(e,t,n,i){const o=t.model;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s,c,l=e.model;Object(r["a"])(l)||(e.model=l=new Zq),mAe(Boolean,l,"show",o.show,a,i,n),mAe(Uc.a,l,"uri",o.gltf,a,i,n),mAe(Number,l,"scale",o.scale,a,i,n),mAe(Number,l,"minimumPixelSize",o.minimumPixelSize,a,i,n),mAe(Number,l,"maximumScale",o.maximumScale,a,i,n),mAe(Boolean,l,"incrementallyLoadTextures",o.incrementallyLoadTextures,a,i,n),mAe(Boolean,l,"runAnimations",o.runAnimations,a,i,n),mAe(Boolean,l,"clampAnimations",o.clampAnimations,a,i,n),mAe(DH,l,"shadows",o.shadows,a,i,n),mAe(QM,l,"heightReference",o.heightReference,a,i,n),mAe(Dm,l,"silhouetteColor",o.silhouetteColor,a,i,n),mAe(Number,l,"silhouetteSize",o.silhouetteSize,a,i,n),mAe(Dm,l,"color",o.color,a,i,n),mAe(T4,l,"colorBlendMode",o.colorBlendMode,a,i,n),mAe(Number,l,"colorBlendAmount",o.colorBlendAmount,a,i,n),mAe(Sv,l,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n);const u=o.nodeTransformations;if(Object(r["a"])(u))if(Array.isArray(u))for(s=0,c=u.length;s<c;++s)$Ae(l,u[s],a,i,n);else $Ae(l,u,a,i,n);const h=o.articulations;if(Object(r["a"])(h))if(Array.isArray(h))for(s=0,c=h.length;s<c;++s)JAe(l,h[s],a,i,n);else JAe(l,h,a,i,n)}function $Ae(e,t,n,i,o){let a=lAe(t.interval);Object(r["a"])(n)&&(a=Object(r["a"])(a)?ZC.intersect(a,n,GOe):n);let s=e.nodeTransformations;const c=Object.keys(t);for(let l=0,u=c.length;l<u;++l){const n=c[l];if("interval"===n)continue;const u=t[n];if(!Object(r["a"])(u))continue;Object(r["a"])(s)||(e.nodeTransformations=s=new Xq),s.hasProperty(n)||s.addProperty(n);let h=s[n];Object(r["a"])(h)||(s[n]=h=new Gq),mAe(g,h,"translation",u.translation,a,i,o),mAe(Kr,h,"rotation",u.rotation,a,i,o),mAe(g,h,"scale",u.scale,a,i,o)}}function JAe(e,t,n,i,o){let a=lAe(t.interval);Object(r["a"])(n)&&(a=Object(r["a"])(a)?ZC.intersect(a,n,GOe):n);let s=e.articulations;const c=Object.keys(t);for(let l=0,u=c.length;l<u;++l){const n=c[l];if("interval"===n)continue;const u=t[n];Object(r["a"])(u)&&(Object(r["a"])(s)||(e.articulations=s=new Xq),s.hasProperty(n)||s.addProperty(n),mAe(Number,s,n,u,a,i,o))}}function QAe(e,t,n,i){const o=t.path;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.path;Object(r["a"])(s)||(e.path=s=new iY),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Number,s,"leadTime",o.leadTime,a,i,n),mAe(Number,s,"trailTime",o.trailTime,a,i,n),mAe(Number,s,"width",o.width,a,i,n),mAe(Number,s,"resolution",o.resolution,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function ZAe(e,t,n,i){const o=t.point;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.point;Object(r["a"])(s)||(e.point=s=new sY),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Number,s,"pixelSize",o.pixelSize,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Dm,s,"color",o.color,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(xE,s,"scaleByDistance",o.scaleByDistance,a,i,n),mAe(xE,s,"translucencyByDistance",o.translucencyByDistance,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(Number,s,"disableDepthTestDistance",o.disableDepthTestDistance,a,i,n)}function ewe(e){this.polygon=e,this._definitionChanged=new dn["a"]}function twe(e,t,n,i){const o=t.polygon;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.polygon;Object(r["a"])(s)||(e.polygon=s=new uY),mAe(Boolean,s,"show",o.show,a,i,n),jAe(s,"_positions",o.positions,n),BAe(s,"_holes",o.holes,n),(Object(r["a"])(s._positions)||Object(r["a"])(s._holes))&&(s.hierarchy=new ewe(s)),mAe(Number,s,"height",o.height,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Number,s,"extrudedHeight",o.extrudedHeight,a,i,n),mAe(QM,s,"extrudedHeightReference",o.extrudedHeightReference,a,i,n),mAe(eOe,s,"stRotation",o.stRotation,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(Boolean,s,"perPositionHeight",o.perPositionHeight,a,i,n),mAe(Boolean,s,"closeTop",o.closeTop,a,i,n),mAe(Boolean,s,"closeBottom",o.closeBottom,a,i,n),mAe(uu,s,"arcType",o.arcType,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(DV,s,"classificationType",o.classificationType,a,i,n),mAe(Number,s,"zIndex",o.zIndex,a,i,n)}function nwe(e){return e?uu.GEODESIC:uu.NONE}function iwe(e,t,n,i){const o=t.polyline;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.polyline;if(Object(r["a"])(s)||(e.polyline=s=new dY),mAe(Boolean,s,"show",o.show,a,i,n),jAe(s,"positions",o.positions,n),mAe(Number,s,"width",o.width,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),OAe(s,"material",o.material,a,i,n),OAe(s,"depthFailMaterial",o.depthFailMaterial,a,i,n),mAe(uu,s,"arcType",o.arcType,a,i,n),mAe(Boolean,s,"clampToGround",o.clampToGround,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(DV,s,"classificationType",o.classificationType,a,i,n),mAe(Number,s,"zIndex",o.zIndex,a,i,n),Object(r["a"])(o.followSurface)&&!Object(r["a"])(o.arcType)){const e={};mAe(Boolean,e,"followSurface",o.followSurface,a,i,n),s.arcType=kOe(e.followSurface,nwe)}}function owe(e,t,n,i){const o=t.polylineVolume;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.polylineVolume;Object(r["a"])(s)||(e.polylineVolume=s=new pY),jAe(s,"positions",o.positions,n),FAe(s,"shape",o.shape,n),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Tg,s,"cornerType",o.cornerType,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function rwe(e,t,n,i){const o=t.rectangle;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.rectangle;Object(r["a"])(s)||(e.rectangle=s=new _Y),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Fe,s,"coordinates",o.coordinates,a,i,n),mAe(Number,s,"height",o.height,a,i,n),mAe(QM,s,"heightReference",o.heightReference,a,i,n),mAe(Number,s,"extrudedHeight",o.extrudedHeight,a,i,n),mAe(QM,s,"extrudedHeightReference",o.extrudedHeightReference,a,i,n),mAe(eOe,s,"rotation",o.rotation,a,i,n),mAe(eOe,s,"stRotation",o.stRotation,a,i,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n),mAe(DV,s,"classificationType",o.classificationType,a,i,n),mAe(Number,s,"zIndex",o.zIndex,a,i,n)}function awe(e,t,n,i){const o=t.tileset;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.tileset;Object(r["a"])(s)||(e.tileset=s=new tY),mAe(Boolean,s,"show",o.show,a,i,n),mAe(Uc.a,s,"uri",o.uri,a,i,n),mAe(Number,s,"maximumScreenSpaceError",o.maximumScreenSpaceError,a,i,n)}function swe(e,t,n,i){const o=t.wall;if(!Object(r["a"])(o))return;const a=lAe(o.interval);let s=e.wall;Object(r["a"])(s)||(e.wall=s=new bY),mAe(Boolean,s,"show",o.show,a,i,n),jAe(s,"positions",o.positions,n),DAe(s,"minimumHeights",o.minimumHeights,n),DAe(s,"maximumHeights",o.maximumHeights,n),mAe(Number,s,"granularity",o.granularity,a,i,n),mAe(Boolean,s,"fill",o.fill,a,i,n),OAe(s,"material",o.material,a,i,n),mAe(Boolean,s,"outline",o.outline,a,i,n),mAe(Dm,s,"outlineColor",o.outlineColor,a,i,n),mAe(Number,s,"outlineWidth",o.outlineWidth,a,i,n),mAe(DH,s,"shadows",o.shadows,a,i,n),mAe(Sv,s,"distanceDisplayCondition",o.distanceDisplayCondition,a,i,n)}function cwe(e,t,n,i,o){let a=e.id;if(Object(r["a"])(a)||(a=ML()),BOe=a,!Object(r["a"])(o._version)&&"document"!==a)throw new ye["a"]("The first CZML packet is required to be the document object.");if(!0===e["delete"])t.removeById(a);else if("document"===a)WAe(e,o);else{const o=t.getOrCreateEntity(a),s=e.parent;Object(r["a"])(s)&&(o.parent=t.getOrCreateEntity(s));for(let r=n.length-1;r>-1;r--)n[r](o,e,t,i)}BOe=void 0}function lwe(e){let t;const n=e._documentPacket.clock;if(!Object(r["a"])(n)){if(!Object(r["a"])(e._clock)){const n=e._entityCollection.computeAvailability();if(!n.start.equals(oE.MINIMUM_VALUE)){const i=n.start,o=n.stop,r=mo.secondsDifference(o,i),a=Math.round(r/120);return t=new vve,t.startTime=mo.clone(i),t.stopTime=mo.clone(o),t.clockRange=pm.LOOP_STOP,t.multiplier=a,t.currentTime=mo.clone(i),t.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,e._clock=t,!0}}return!1}Object(r["a"])(e._clock)?t=e._clock.clone():(t=new vve,t.startTime=oE.MINIMUM_VALUE.clone(),t.stopTime=oE.MAXIMUM_VALUE.clone(),t.currentTime=oE.MINIMUM_VALUE.clone(),t.clockRange=pm.LOOP_STOP,t.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=1);const i=lAe(n.interval);return Object(r["a"])(i)&&(t.startTime=i.start,t.stopTime=i.stop),Object(r["a"])(n.currentTime)&&(t.currentTime=mo.fromIso8601(n.currentTime)),Object(r["a"])(n.range)&&(t.clockRange=Object(o["a"])(pm[n.range],pm.LOOP_STOP)),Object(r["a"])(n.step)&&(t.clockStep=Object(o["a"])(_m[n.step],_m.SYSTEM_CLOCK_MULTIPLIER)),Object(r["a"])(n.multiplier)&&(t.multiplier=n.multiplier),!t.equals(e._clock)&&(e._clock=t.clone(e._clock),!0)}function uwe(e,t,n,i){if(!Object(r["a"])(t))throw new a["a"]("czml is required.");n=Object(o["a"])(n,o["a"].EMPTY_OBJECT);let s=t,c=n.sourceUri,l=n.credit;if("string"===typeof l&&(l=new hn(l)),e._credit=l,"string"===typeof t||t instanceof Et["a"]){t=Et["a"].createIfNeeded(t),s=t.fetchJson(),c=Object(o["a"])(c,t.clone());const n=e._resourceCredits,i=t.credits;if(Object(r["a"])(i)){const e=i.length;for(let t=0;t<e;t++)n.push(i[t])}}return c=Et["a"].createIfNeeded(c),kbe.setLoading(e,!0),Promise.resolve(s).then((function(t){return hwe(e,t,c,i)})).catch((function(t){return kbe.setLoading(e,!1),e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}function hwe(e,t,n,i){kbe.setLoading(e,!0);const o=e._entityCollection;i&&(e._version=void 0,e._documentPacket=new dwe,o.removeAll()),fwe._processCzml(t,o,n,void 0,e);let a=lwe(e);const s=e._documentPacket;return Object(r["a"])(s.name)&&e._name!==s.name?(e._name=s.name,a=!0):!Object(r["a"])(e._name)&&Object(r["a"])(n)&&(e._name=$L(n.getUrlComponent()),a=!0),kbe.setLoading(e,!1),a&&e._changed.raiseEvent(e),e}function dwe(){this.name=void 0,this.clock=void 0}function fwe(e){this._name=e,this._changed=new dn["a"],this._error=new dn["a"],this._isLoading=!1,this._loading=new dn["a"],this._clock=void 0,this._documentPacket=new dwe,this._version=void 0,this._entityCollection=new ube(this),this._entityCluster=new cve,this._credit=void 0,this._resourceCredits=[]}Object.defineProperties(ewe.prototype,{isConstant:{get:function(){const e=this.polygon._positions,t=this.polygon._holes;return(!Object(r["a"])(e)||e.isConstant)&&(!Object(r["a"])(t)||t.isConstant)}},definitionChanged:{get:function(){return this._definitionChanged}}}),ewe.prototype.getValue=function(e,t){let n,i;return Object(r["a"])(this.polygon._positions)&&(n=this.polygon._positions.getValue(e)),Object(r["a"])(this.polygon._holes)&&(i=this.polygon._holes.getValue(e),Object(r["a"])(i)&&(i=i.map((function(e){return new aS(e)})))),Object(r["a"])(t)?(t.positions=n,t.holes=i,t):new aS(n,i)},ewe.prototype.equals=function(e){return this===e||e instanceof ewe&&aN.equals(this.polygon._positions,e.polygon._positions)&&aN.equals(this.polygon._holes,e.polygon._holes)},fwe.load=function(e,t){return(new fwe).load(e,t)},Object.defineProperties(fwe.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),fwe.updaters=[UAe,VAe,HAe,GAe,qAe,YAe,XAe,KAe,AAe,wAe,QAe,ZAe,twe,iwe,owe,xAe,rwe,TAe,awe,CAe,swe,EAe,zAe],fwe.prototype.process=function(e,t){return uwe(this,e,t,!1)},fwe.prototype.load=function(e,t){return uwe(this,e,t,!0)},fwe.prototype.update=function(e){return!0},fwe.processPacketData=mAe,fwe.processPositionPacketData=bAe,fwe.processMaterialPacketData=OAe,fwe._processCzml=function(e,t,n,i,r){if(i=Object(o["a"])(i,fwe.updaters),Array.isArray(e))for(let o=0,a=e.length;o<a;++o)cwe(e[o],t,i,n,r);else cwe(e,t,i,n,r)};var pwe=fwe;function mwe(){this._dataSources=[],this._dataSourceAdded=new dn["a"],this._dataSourceRemoved=new dn["a"],this._dataSourceMoved=new dn["a"]}function _we(e,t){if(!Object(r["a"])(t))throw new a["a"]("dataSource is required.");const n=e.indexOf(t);if(-1===n)throw new a["a"]("dataSource is not in this collection.");return n}function gwe(e,t,n){const i=e._dataSources,o=i.length-1;if(t=s["a"].clamp(t,0,o),n=s["a"].clamp(n,0,o),t===n)return;const r=i[t];i[t]=i[n],i[n]=r,e.dataSourceMoved.raiseEvent(r,n,t)}Object.defineProperties(mwe.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),mwe.prototype.add=function(e){if(!Object(r["a"])(e))throw new a["a"]("dataSource is required.");const t=this,n=this._dataSources;return Promise.resolve(e).then((function(e){return n===t._dataSources&&(t._dataSources.push(e),t._dataSourceAdded.raiseEvent(t,e)),e}))},mwe.prototype.remove=function(e,t){t=Object(o["a"])(t,!1);const n=this._dataSources.indexOf(e);return-1!==n&&(this._dataSources.splice(n,1),this._dataSourceRemoved.raiseEvent(this,e),t&&"function"===typeof e.destroy&&e.destroy(),!0)},mwe.prototype.removeAll=function(e){e=Object(o["a"])(e,!1);const t=this._dataSources;for(let n=0,i=t.length;n<i;++n){const i=t[n];this._dataSourceRemoved.raiseEvent(this,i),e&&"function"===typeof i.destroy&&i.destroy()}this._dataSources=[]},mwe.prototype.contains=function(e){return-1!==this.indexOf(e)},mwe.prototype.indexOf=function(e){return this._dataSources.indexOf(e)},mwe.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return this._dataSources[e]},mwe.prototype.getByName=function(e){if(!Object(r["a"])(e))throw new a["a"]("name is required.");return this._dataSources.filter((function(t){return t.name===e}))},mwe.prototype.raise=function(e){const t=_we(this._dataSources,e);gwe(this,t,t+1)},mwe.prototype.lower=function(e){const t=_we(this._dataSources,e);gwe(this,t,t-1)},mwe.prototype.raiseToTop=function(e){const t=_we(this._dataSources,e);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(e),this.dataSourceMoved.raiseEvent(e,this._dataSources.length-1,t))},mwe.prototype.lowerToBottom=function(e){const t=_we(this._dataSources,e);0!==t&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,e),this.dataSourceMoved.raiseEvent(e,0,t))},mwe.prototype.isDestroyed=function(){return!1},mwe.prototype.destroy=function(){return this.removeAll(!0),Wc(this)};var bwe=mwe;function ywe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._primitives=[],this._guid=ML(),this._zIndex=void 0,this.show=Object(o["a"])(e.show,!0),this.destroyPrimitives=Object(o["a"])(e.destroyPrimitives,!0)}function vwe(e,t){if(!e.contains(t))throw new a["a"]("primitive is not in this collection.");return e._primitives.indexOf(t)}Object.defineProperties(ywe.prototype,{length:{get:function(){return this._primitives.length}}}),ywe.prototype.add=function(e,t){const n=Object(r["a"])(t);if(!Object(r["a"])(e))throw new a["a"]("primitive is required.");if(n){if(t<0)throw new a["a"]("index must be greater than or equal to zero.");if(t>this._primitives.length)throw new a["a"]("index must be less than or equal to the number of primitives.")}const i=e._external=e._external||{},o=i._composites=i._composites||{};return o[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),e},ywe.prototype.remove=function(e){if(this.contains(e)){const t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},ywe.prototype.removeAndDestroy=function(e){const t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},ywe.prototype.removeAll=function(){const e=this._primitives,t=e.length;for(let n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy();this._primitives=[]},ywe.prototype.contains=function(e){return!!(Object(r["a"])(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},ywe.prototype.raise=function(e){if(Object(r["a"])(e)){const t=vwe(this,e),n=this._primitives;if(t!==n.length-1){const e=n[t];n[t]=n[t+1],n[t+1]=e}}},ywe.prototype.raiseToTop=function(e){if(Object(r["a"])(e)){const t=vwe(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}},ywe.prototype.lower=function(e){if(Object(r["a"])(e)){const t=vwe(this,e),n=this._primitives;if(0!==t){const e=n[t];n[t]=n[t-1],n[t-1]=e}}},ywe.prototype.lowerToBottom=function(e){if(Object(r["a"])(e)){const t=vwe(this,e),n=this._primitives;0!==t&&(n.splice(t,1),n.unshift(e))}},ywe.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return this._primitives[e]},ywe.prototype.update=function(e){if(!this.show)return;const t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)},ywe.prototype.prePassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];Object(r["a"])(i.prePassesUpdate)&&i.prePassesUpdate(e)}},ywe.prototype.updateForPass=function(e,t){const n=this._primitives;for(let i=0;i<n.length;++i){const o=n[i];Object(r["a"])(o.updateForPass)&&o.updateForPass(e,t)}},ywe.prototype.postPassesUpdate=function(e){const t=this._primitives;for(let n=0;n<t.length;++n){const i=t[n];Object(r["a"])(i.postPassesUpdate)&&i.postPassesUpdate(e)}},ywe.prototype.isDestroyed=function(){return!1},ywe.prototype.destroy=function(){return this.removeAll(),Wc(this)};var Owe=ywe;function Awe(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(Awe.prototype,{length:{get:function(){return this._length}}}),Awe.prototype.add=function(e,t){i["a"].defined("primitive",e),Object(r["a"])(t)&&i["a"].typeOf.number("zIndex",t),t=Object(o["a"])(t,0);let n=this._collections[t];if(!Object(r["a"])(n)){n=new Owe({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;const e=this._collectionsArray;let i=0;while(i<e.length&&e[i]._zIndex<t)i++;e.splice(i,0,n)}return n.add(e),this._length++,e._zIndex=t,e},Awe.prototype.set=function(e,t){return i["a"].defined("primitive",e),i["a"].typeOf.number("zIndex",t),t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e},Awe.prototype.remove=function(e,t){if(this.contains(e)){const n=e._zIndex,i=this._collections[n];let o;return o=t?i.remove(e):i.removeAndDestroy(e),o&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1},Awe.prototype.removeAll=function(){const e=this._collectionsArray;for(let t=0;t<e.length;t++){const n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0},Awe.prototype.contains=function(e){if(!Object(r["a"])(e))return!1;const t=this._collections[e._zIndex];return Object(r["a"])(t)&&t.contains(e)},Awe.prototype.update=function(e){if(!this.show)return;const t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)},Awe.prototype.isDestroyed=function(){return!1},Awe.prototype.destroy=function(){return this.removeAll(),Wc(this)};var wwe=Awe;function Twe(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new pu}Twe.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},Twe.prototype.remove=function(e){const t=e.id,n=this._dynamicUpdaters.get(t);Object(r["a"])(n)&&(this._dynamicUpdaters.remove(t),n.destroy())},Twe.prototype.update=function(e){const t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0},Twe.prototype.removeAllPrimitives=function(){const e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()},Twe.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),Object(r["a"])(e)&&Object(r["a"])(e.getBoundingSphere)?e.getBoundingSphere(t):oN.FAILED};var Cwe=Twe;const Ewe=new Dm,xwe=g.ZERO,Swe=new g,Iwe=new Fe;function Dwe(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function Pwe(e,t){Dbe.call(this,{entity:e,scene:t,geometryOptions:new Dwe(e),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(e,"ellipse",e.ellipse,void 0)}function jwe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(Pwe.prototype=Object.create(Dbe.prototype),Pwe.prototype.constructor=Pwe),Pwe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,Ewe)),Object(r["a"])(t)||(t=Dm.WHITE),o.color=jm.fromColor(t)}return Object(r["a"])(this._options.offsetAttribute)&&(o.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,xwe,Swe))),new Sd({id:t,geometry:new Yp(this._options),attributes:o})},Pwe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,Ewe),s=this._distanceDisplayConditionProperty.getValue(e),c={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(s),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(c.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,xwe,Swe))),new Sd({id:t,geometry:new cm(this._options),attributes:c})},Pwe.prototype._computeCenter=function(e,t){return aN.getValueOrUndefined(this._entity.position,e,t)},Pwe.prototype._isHidden=function(e,t){const n=e.position;return!Object(r["a"])(n)||!Object(r["a"])(t.semiMajorAxis)||!Object(r["a"])(t.semiMinorAxis)||FY.prototype._isHidden.call(this,e,t)},Pwe.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!aN.isConstant(t.rotation)||!aN.isConstant(t.height)||!aN.isConstant(t.extrudedHeight)||!aN.isConstant(t.granularity)||!aN.isConstant(t.stRotation)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.numberOfVerticalLines)||!aN.isConstant(t.zIndex)||this._onTerrain&&!aN.isConstant(this._materialProperty)&&!(this._materialProperty instanceof oF)},Pwe.prototype._setStaticOptions=function(e,t){let n=aN.getValueOrUndefined(t.height,oE.MINIMUM_VALUE);const i=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE);let o=aN.getValueOrUndefined(t.extrudedHeight,oE.MINIMUM_VALUE);const a=aN.getValueOrDefault(t.extrudedHeightReference,oE.MINIMUM_VALUE,QM.NONE);Object(r["a"])(o)&&!Object(r["a"])(n)&&(n=0);const s=this._options;s.vertexFormat=this._materialProperty instanceof oF?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,s.center=e.position.getValue(oE.MINIMUM_VALUE,s.center),s.semiMajorAxis=t.semiMajorAxis.getValue(oE.MINIMUM_VALUE,s.semiMajorAxis),s.semiMinorAxis=t.semiMinorAxis.getValue(oE.MINIMUM_VALUE,s.semiMinorAxis),s.rotation=aN.getValueOrUndefined(t.rotation,oE.MINIMUM_VALUE),s.granularity=aN.getValueOrUndefined(t.granularity,oE.MINIMUM_VALUE),s.stRotation=aN.getValueOrUndefined(t.stRotation,oE.MINIMUM_VALUE),s.numberOfVerticalLines=aN.getValueOrUndefined(t.numberOfVerticalLines,oE.MINIMUM_VALUE),s.offsetAttribute=Dbe.computeGeometryOffsetAttribute(n,i,o,a),s.height=Dbe.getGeometryHeight(n,i),o=Dbe.getGeometryExtrudedHeight(o,a),o===Dbe.CLAMP_TO_GROUND&&(o=rn.getMinimumMaximumHeights(Yp.computeRectangle(s,Iwe)).minimumTerrainHeight),s.extrudedHeight=o},Pwe.DynamicGeometryUpdater=jwe,Object(r["a"])(Object.create)&&(jwe.prototype=Object.create(GW.prototype),jwe.prototype.constructor=jwe),jwe.prototype._isHidden=function(e,t,n){const i=this._options;return!Object(r["a"])(i.center)||!Object(r["a"])(i.semiMajorAxis)||!Object(r["a"])(i.semiMinorAxis)||GW.prototype._isHidden.call(this,e,t,n)},jwe.prototype._setOptions=function(e,t,n){const i=this._options;let o=aN.getValueOrUndefined(t.height,n);const a=aN.getValueOrDefault(t.heightReference,n,QM.NONE);let s=aN.getValueOrUndefined(t.extrudedHeight,n);const c=aN.getValueOrDefault(t.extrudedHeightReference,n,QM.NONE);Object(r["a"])(s)&&!Object(r["a"])(o)&&(o=0),i.center=aN.getValueOrUndefined(e.position,n,i.center),i.semiMajorAxis=aN.getValueOrUndefined(t.semiMajorAxis,n),i.semiMinorAxis=aN.getValueOrUndefined(t.semiMinorAxis,n),i.rotation=aN.getValueOrUndefined(t.rotation,n),i.granularity=aN.getValueOrUndefined(t.granularity,n),i.stRotation=aN.getValueOrUndefined(t.stRotation,n),i.numberOfVerticalLines=aN.getValueOrUndefined(t.numberOfVerticalLines,n),i.offsetAttribute=Dbe.computeGeometryOffsetAttribute(o,a,s,c),i.height=Dbe.getGeometryHeight(o,a),s=Dbe.getGeometryExtrudedHeight(s,c),s===Dbe.CLAMP_TO_GROUND&&(s=rn.getMinimumMaximumHeights(Yp.computeRectangle(i,Iwe)).minimumTerrainHeight),i.extrudedHeight=s};var Rwe=Pwe;const Lwe=new oF(Dm.WHITE),Mwe=g.ZERO,Nwe=new g,Bwe=new g,Fwe=new g,zwe=new Dm,kwe=new g(1,1,1);function Uwe(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function Vwe(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new Uwe(e),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(e,"ellipsoid",e.ellipsoid,void 0)}function Hwe(e,t,n){GW.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new Me,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new g,this._material={}}Object(r["a"])(Object.create)&&(Vwe.prototype=Object.create(FY.prototype),Vwe.prototype.constructor=Vwe),Object.defineProperties(Vwe.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),Vwe.prototype.createFillGeometryInstance=function(e,t,n){i["a"].defined("time",e);const o=this._entity,a=o.isAvailable(e);let s;const c=new wP(a&&o.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),l=this._distanceDisplayConditionProperty.getValue(e),u=Dv.fromDistanceDisplayCondition(l),h={show:c,distanceDisplayCondition:u,color:void 0,offset:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(t=this._materialProperty.color.getValue(e,zwe)),Object(r["a"])(t)||(t=Dm.WHITE),s=jm.fromColor(t),h.color=s}return Object(r["a"])(this._options.offsetAttribute)&&(h.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,Mwe,Nwe))),new Sd({id:o,geometry:new rO(this._options),modelMatrix:t?void 0:o.computeModelMatrixForHeightReference(e,o.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:h})},Vwe.prototype.createOutlineGeometryInstance=function(e,t,n){i["a"].defined("time",e);const o=this._entity,a=o.isAvailable(e),s=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,zwe),c=this._distanceDisplayConditionProperty.getValue(e),l={show:new wP(a&&o.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(s),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(c),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(l.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,Mwe,Nwe))),new Sd({id:o,geometry:new fO(this._options),modelMatrix:t?void 0:o.computeModelMatrixForHeightReference(e,o.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:l})},Vwe.prototype._computeCenter=function(e,t){return aN.getValueOrUndefined(this._entity.position,e,t)},Vwe.prototype._isHidden=function(e,t){return!Object(r["a"])(e.position)||!Object(r["a"])(t.radii)||FY.prototype._isHidden.call(this,e,t)},Vwe.prototype._isDynamic=function(e,t){return!e.position.isConstant||!aN.isConstant(e.orientation)||!t.radii.isConstant||!aN.isConstant(t.innerRadii)||!aN.isConstant(t.stackPartitions)||!aN.isConstant(t.slicePartitions)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.minimumClock)||!aN.isConstant(t.maximumClock)||!aN.isConstant(t.minimumCone)||!aN.isConstant(t.maximumCone)||!aN.isConstant(t.subdivisions)},Vwe.prototype._setStaticOptions=function(e,t){const n=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof oF?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(oE.MINIMUM_VALUE,i.radii),i.innerRadii=aN.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=aN.getValueOrUndefined(t.minimumClock,oE.MINIMUM_VALUE),i.maximumClock=aN.getValueOrUndefined(t.maximumClock,oE.MINIMUM_VALUE),i.minimumCone=aN.getValueOrUndefined(t.minimumCone,oE.MINIMUM_VALUE),i.maximumCone=aN.getValueOrUndefined(t.maximumCone,oE.MINIMUM_VALUE),i.stackPartitions=aN.getValueOrUndefined(t.stackPartitions,oE.MINIMUM_VALUE),i.slicePartitions=aN.getValueOrUndefined(t.slicePartitions,oE.MINIMUM_VALUE),i.subdivisions=aN.getValueOrUndefined(t.subdivisions,oE.MINIMUM_VALUE),i.offsetAttribute=n!==QM.NONE?Gu.ALL:void 0},Vwe.prototype._onEntityPropertyChanged=qY,Vwe.DynamicGeometryUpdater=Hwe,Object(r["a"])(Object.create)&&(Hwe.prototype=Object.create(GW.prototype),Hwe.prototype.constructor=Hwe),Hwe.prototype.update=function(e){i["a"].defined("time",e);const t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!aN.getValueOrDefault(n.show,e,!0))return Object(r["a"])(this._primitive)&&(this._primitive.show=!1),void(Object(r["a"])(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const a=aN.getValueOrUndefined(n.radii,e,Bwe);let s=Object(r["a"])(a)?t.computeModelMatrixForHeightReference(e,n.heightReference,.5*a.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!Object(r["a"])(s)||!Object(r["a"])(a))return Object(r["a"])(this._primitive)&&(this._primitive.show=!1),void(Object(r["a"])(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));const c=aN.getValueOrDefault(n.fill,e,!0),l=aN.getValueOrDefault(n.outline,e,!1),u=aN.getValueOrClonedDefault(n.outlineColor,e,Dm.BLACK,zwe),h=VW.getValue(e,Object(o["a"])(n.material,Lwe),this._material),d=aN.getValueOrUndefined(n.innerRadii,e,Fwe),f=aN.getValueOrUndefined(n.minimumClock,e),p=aN.getValueOrUndefined(n.maximumClock,e),m=aN.getValueOrUndefined(n.minimumCone,e),_=aN.getValueOrUndefined(n.maximumCone,e),b=aN.getValueOrUndefined(n.stackPartitions,e),y=aN.getValueOrUndefined(n.slicePartitions,e),v=aN.getValueOrUndefined(n.subdivisions,e),O=aN.getValueOrDefault(n.outlineWidth,e,1),A=aN.getValueOrDefault(n.heightReference,e,QM.NONE),w=A!==QM.NONE?Gu.ALL:void 0,T=this._scene.mode,C=T===SH.SCENE3D&&A===QM.NONE,E=this._options,x=this._geometryUpdater.shadowsProperty.getValue(e),S=this._geometryUpdater.distanceDisplayConditionProperty,I=S.getValue(e),D=aN.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,Mwe,Nwe),P=!C||this._lastSceneMode!==T||!Object(r["a"])(this._primitive)||E.stackPartitions!==b||E.slicePartitions!==y||Object(r["a"])(d)&&!g.equals(E.innerRadii!==d)||E.minimumClock!==f||E.maximumClock!==p||E.minimumCone!==m||E.maximumCone!==_||E.subdivisions!==v||this._lastOutlineWidth!==O||E.offsetAttribute!==w;if(P){const t=this._primitives;if(t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=T,this._lastOutlineWidth=O,E.stackPartitions=b,E.slicePartitions=y,E.subdivisions=v,E.offsetAttribute=w,E.radii=g.clone(C?kwe:a,E.radii),Object(r["a"])(d))if(C){const e=g.magnitude(a);E.innerRadii=g.fromElements(d.x/e,d.y/e,d.z/e,E.innerRadii)}else E.innerRadii=g.clone(d,E.innerRadii);else E.innerRadii=void 0;E.minimumClock=f,E.maximumClock=p,E.minimumCone=m,E.maximumCone=_;const n=new $B({material:h,translucent:h.isTranslucent(),closed:!0});E.vertexFormat=n.vertexFormat;const i=this._geometryUpdater.createFillGeometryInstance(e,C,this._modelMatrix);this._primitive=t.add(new EG({geometryInstances:i,appearance:n,asynchronous:!1,shadows:x}));const o=this._geometryUpdater.createOutlineGeometryInstance(e,C,this._modelMatrix);this._outlinePrimitive=t.add(new EG({geometryInstances:o,appearance:new nF({flat:!0,translucent:255!==o.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(O)}}),asynchronous:!1,shadows:x})),this._lastShow=c,this._lastOutlineShow=l,this._lastOutlineColor=Dm.clone(u,this._lastOutlineColor),this._lastDistanceDisplayCondition=I,this._lastOffset=g.clone(D,this._lastOffset)}else if(this._primitive.ready){const e=this._primitive,n=this._outlinePrimitive;e.show=!0,n.show=!0,e.appearance.material=h;let i=this._attributes;Object(r["a"])(i)||(i=e.getGeometryInstanceAttributes(t),this._attributes=i),c!==this._lastShow&&(i.show=wP.toValue(c,i.show),this._lastShow=c);let o=this._outlineAttributes;Object(r["a"])(o)||(o=n.getGeometryInstanceAttributes(t),this._outlineAttributes=o),l!==this._lastOutlineShow&&(o.show=wP.toValue(l,o.show),this._lastOutlineShow=l),Dm.equals(u,this._lastOutlineColor)||(o.color=jm.toValue(u,o.color),Dm.clone(u,this._lastOutlineColor)),Sv.equals(I,this._lastDistanceDisplayCondition)||(i.distanceDisplayCondition=Dv.toValue(I,i.distanceDisplayCondition),o.distanceDisplayCondition=Dv.toValue(I,o.distanceDisplayCondition),Sv.clone(I,this._lastDistanceDisplayCondition)),g.equals(D,this._lastOffset)||(i.offset=WE.toValue(D,i.offset),o.offset=WE.toValue(D,i.offset),g.clone(D,this._lastOffset))}C&&(a.x=Math.max(a.x,.001),a.y=Math.max(a.y,.001),a.z=Math.max(a.z,.001),s=Me.multiplyByScale(s,a,s),this._primitive.modelMatrix=s,this._outlinePrimitive.modelMatrix=s)};var Gwe=Vwe;const Wwe=new g,qwe=new Dm;function Ywe(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function Xwe(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new Ywe(e),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(e,"plane",e.plane,void 0)}function Kwe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(Xwe.prototype=Object.create(FY.prototype),Xwe.prototype.constructor=Xwe),Xwe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let o,s;const c=new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),l=this._distanceDisplayConditionProperty.getValue(e),u=Dv.fromDistanceDisplayCondition(l);if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,qwe)),Object(r["a"])(t)||(t=Dm.WHITE),s=jm.fromColor(t),o={show:c,distanceDisplayCondition:u,color:s}}else o={show:c,distanceDisplayCondition:u};const h=t.plane,d=this._options;let f=t.computeModelMatrix(e);const p=aN.getValueOrDefault(h.plane,e,d.plane),m=aN.getValueOrUndefined(h.dimensions,e,d.dimensions);return d.plane=p,d.dimensions=m,f=iTe(p,m,f,f),new Sd({id:t,geometry:new yx(this._options),modelMatrix:f,attributes:o})},Xwe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,qwe),r=this._distanceDisplayConditionProperty.getValue(e),s=t.plane,c=this._options;let l=t.computeModelMatrix(e);const u=aN.getValueOrDefault(s.plane,e,c.plane),h=aN.getValueOrUndefined(s.dimensions,e,c.dimensions);return c.plane=u,c.dimensions=h,l=iTe(u,h,l,l),new Sd({id:t,geometry:new wx,modelMatrix:l,attributes:{show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(r)}})},Xwe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.plane)||!Object(r["a"])(t.dimensions)||!Object(r["a"])(e.position)||FY.prototype._isHidden.call(this,e,t)},Xwe.prototype._getIsClosed=function(e){return!1},Xwe.prototype._isDynamic=function(e,t){return!e.position.isConstant||!aN.isConstant(e.orientation)||!t.plane.isConstant||!t.dimensions.isConstant||!aN.isConstant(t.outlineWidth)},Xwe.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof oF,i=this._options;i.vertexFormat=n?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(oE.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(oE.MINIMUM_VALUE,i.dimensions)},Xwe.DynamicGeometryUpdater=Kwe,Object(r["a"])(Object.create)&&(Kwe.prototype=Object.create(GW.prototype),Kwe.prototype.constructor=Kwe),Kwe.prototype._isHidden=function(e,t,n){const i=this._options,o=aN.getValueOrUndefined(e.position,n,Wwe);return!Object(r["a"])(o)||!Object(r["a"])(i.plane)||!Object(r["a"])(i.dimensions)||GW.prototype._isHidden.call(this,e,t,n)},Kwe.prototype._setOptions=function(e,t,n){const i=this._options;i.plane=aN.getValueOrDefault(t.plane,n,i.plane),i.dimensions=aN.getValueOrUndefined(t.dimensions,n,i.dimensions)};const $we=new g,Jwe=new g,Qwe=new g,Zwe=new g,eTe=new ce,tTe=new ce,nTe=new Me;function iTe(e,t,n,i){const o=e.normal,r=e.distance,a=g.multiplyByScalar(o,-r,Qwe);let c=g.clone(g.UNIT_Z,Jwe);s["a"].equalsEpsilon(Math.abs(g.dot(c,o)),1,s["a"].EPSILON8)&&(c=g.clone(g.UNIT_Y,c));const l=g.cross(c,o,$we);c=g.cross(o,l,c),g.normalize(l,l),g.normalize(c,c);const u=eTe;ce.setColumn(u,0,l,u),ce.setColumn(u,1,c,u),ce.setColumn(u,2,o,u);const h=g.fromElements(t.x,t.y,1,Zwe),d=ce.multiplyByScale(u,h,tTe),f=Me.fromRotationTranslation(d,a,nTe);return Me.multiplyTransformation(n,f,i)}Xwe.createPrimitiveMatrix=iTe;var oTe=Xwe;const rTe="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",aTe="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",sTe=new Dm,cTe=g.ZERO,lTe=new g,uTe=new Fe,hTe=[],dTe=new Gt;function fTe(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function pTe(e,t){Dbe.call(this,{entity:e,scene:t,geometryOptions:new fTe(e),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(e,"polygon",e.polygon,void 0)}function mTe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(pTe.prototype=Object.create(Dbe.prototype),pTe.prototype.constructor=pTe),pTe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o=this._options,s={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,sTe)),Object(r["a"])(t)||(t=Dm.WHITE),s.color=jm.fromColor(t)}let c;return Object(r["a"])(o.offsetAttribute)&&(s.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,cTe,lTe))),c=o.perPositionHeight&&!Object(r["a"])(o.extrudedHeight)?new bg(o):new oS(o),new Sd({id:t,geometry:c,attributes:s})},pTe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=this._options,s=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,sTe),c=this._distanceDisplayConditionProperty.getValue(e),l={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(s),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(c),offset:void 0};let u;return Object(r["a"])(o.offsetAttribute)&&(l.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,cTe,lTe))),u=o.perPositionHeight&&!Object(r["a"])(o.extrudedHeight)?new Ag(o):new pS(o),new Sd({id:t,geometry:u,attributes:l})},pTe.prototype._computeCenter=function(e,t){const n=aN.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!Object(r["a"])(n))return;const i=n.positions;if(0===i.length)return;const o=this._scene.mapProjection.ellipsoid,a=Ya.fromPoints(i,o),s=a.projectPointsOntoPlane(i,hTe),c=s.length;let l=0,u=c-1,h=new Gt;for(let r=0;r<c;u=r++){const e=s[r],t=s[u],n=e.x*t.y-t.x*e.y;let i=Gt.add(e,t,dTe);i=Gt.multiplyByScalar(i,n,i),h=Gt.add(h,i,h),l+=n}const d=1/(3*l);return h=Gt.multiplyByScalar(h,d,h),a.projectPointOntoEllipsoid(h,t)},pTe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.hierarchy)||FY.prototype._isHidden.call(this,e,t)},pTe.prototype._isOnTerrain=function(e,t){const n=Dbe.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=Object(r["a"])(i)&&(!i.isConstant||i.getValue(oE.MINIMUM_VALUE));return n&&!o},pTe.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!aN.isConstant(t.height)||!aN.isConstant(t.extrudedHeight)||!aN.isConstant(t.granularity)||!aN.isConstant(t.stRotation)||!aN.isConstant(t.textureCoordinates)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.perPositionHeight)||!aN.isConstant(t.closeTop)||!aN.isConstant(t.closeBottom)||!aN.isConstant(t.zIndex)||!aN.isConstant(t.arcType)||this._onTerrain&&!aN.isConstant(this._materialProperty)&&!(this._materialProperty instanceof oF)},pTe.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof oF,i=this._options;i.vertexFormat=n?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat;const o=t.hierarchy.getValue(oE.MINIMUM_VALUE);let a=aN.getValueOrUndefined(t.height,oE.MINIMUM_VALUE);const s=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE);let c=aN.getValueOrUndefined(t.extrudedHeight,oE.MINIMUM_VALUE);const l=aN.getValueOrDefault(t.extrudedHeightReference,oE.MINIMUM_VALUE,QM.NONE),u=aN.getValueOrDefault(t.perPositionHeight,oE.MINIMUM_VALUE,!1);let h;a=Dbe.getGeometryHeight(a,s),u?(Object(r["a"])(a)&&(a=void 0,ab(rTe)),s!==QM.NONE&&u&&(a=void 0,ab(aTe))):(Object(r["a"])(c)&&!Object(r["a"])(a)&&(a=0),h=Dbe.computeGeometryOffsetAttribute(a,s,c,l)),i.polygonHierarchy=o,i.granularity=aN.getValueOrUndefined(t.granularity,oE.MINIMUM_VALUE),i.stRotation=aN.getValueOrUndefined(t.stRotation,oE.MINIMUM_VALUE),i.perPositionHeight=u,i.closeTop=aN.getValueOrDefault(t.closeTop,oE.MINIMUM_VALUE,!0),i.closeBottom=aN.getValueOrDefault(t.closeBottom,oE.MINIMUM_VALUE,!0),i.offsetAttribute=h,i.height=a,i.arcType=aN.getValueOrDefault(t.arcType,oE.MINIMUM_VALUE,uu.GEODESIC),i.textureCoordinates=aN.getValueOrUndefined(t.textureCoordinates,oE.MINIMUM_VALUE),c=Dbe.getGeometryExtrudedHeight(c,l),c===Dbe.CLAMP_TO_GROUND&&(c=rn.getMinimumMaximumHeights(oS.computeRectangle(i,uTe)).minimumTerrainHeight),i.extrudedHeight=c},pTe.prototype._getIsClosed=function(e){const t=e.height,n=e.extrudedHeight,i=Object(r["a"])(n)&&n!==t;return!e.perPositionHeight&&(!i&&0===t||i&&e.closeTop&&e.closeBottom)},pTe.DynamicGeometryUpdater=mTe,Object(r["a"])(Object.create)&&(mTe.prototype=Object.create(GW.prototype),mTe.prototype.constructor=mTe),mTe.prototype._isHidden=function(e,t,n){return!Object(r["a"])(this._options.polygonHierarchy)||GW.prototype._isHidden.call(this,e,t,n)},mTe.prototype._setOptions=function(e,t,n){const i=this._options;i.polygonHierarchy=aN.getValueOrUndefined(t.hierarchy,n);let o=aN.getValueOrUndefined(t.height,n);const a=aN.getValueOrDefault(t.heightReference,n,QM.NONE),s=aN.getValueOrDefault(t.extrudedHeightReference,n,QM.NONE);let c=aN.getValueOrUndefined(t.extrudedHeight,n);const l=aN.getValueOrUndefined(t.perPositionHeight,n);let u;o=Dbe.getGeometryHeight(o,s),l?(Object(r["a"])(o)&&(o=void 0,ab(rTe)),a!==QM.NONE&&l&&(o=void 0,ab(aTe))):(Object(r["a"])(c)&&!Object(r["a"])(o)&&(o=0),u=Dbe.computeGeometryOffsetAttribute(o,a,c,s)),i.granularity=aN.getValueOrUndefined(t.granularity,n),i.stRotation=aN.getValueOrUndefined(t.stRotation,n),i.textureCoordinates=aN.getValueOrUndefined(t.textureCoordinates,n),i.perPositionHeight=aN.getValueOrUndefined(t.perPositionHeight,n),i.closeTop=aN.getValueOrDefault(t.closeTop,n,!0),i.closeBottom=aN.getValueOrDefault(t.closeBottom,n,!0),i.offsetAttribute=u,i.height=o,i.arcType=aN.getValueOrDefault(t.arcType,n,uu.GEODESIC),c=Dbe.getGeometryExtrudedHeight(c,s),c===Dbe.CLAMP_TO_GROUND&&(c=rn.getMinimumMaximumHeights(oS.computeRectangle(i,uTe)).minimumTerrainHeight),i.extrudedHeight=c};var _Te=pTe;const gTe=new Dm;function bTe(e){this.id=e,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function yTe(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new bTe(e),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(e,"polylineVolume",e.polylineVolume,void 0)}function vTe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(yTe.prototype=Object.create(FY.prototype),yTe.prototype.constructor=yTe),yTe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let o,s;const c=new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),l=this._distanceDisplayConditionProperty.getValue(e),u=Dv.fromDistanceDisplayCondition(l);if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,gTe)),Object(r["a"])(t)||(t=Dm.WHITE),s=jm.fromColor(t),o={show:c,distanceDisplayCondition:u,color:s}}else o={show:c,distanceDisplayCondition:u};return new Sd({id:t,geometry:new jS(this._options),attributes:o})},yTe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,gTe),r=this._distanceDisplayConditionProperty.getValue(e);return new Sd({id:t,geometry:new FS(this._options),attributes:{show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(r)}})},yTe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.positions)||!Object(r["a"])(t.shape)||FY.prototype._isHidden.call(this,e,t)},yTe.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!t.shape.isConstant||!aN.isConstant(t.granularity)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.cornerType)},yTe.prototype._setStaticOptions=function(e,t){const n=t.granularity,i=t.cornerType,o=this._options,a=this._materialProperty instanceof oF;o.vertexFormat=a?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=t.positions.getValue(oE.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=t.shape.getValue(oE.MINIMUM_VALUE,o.shape),o.granularity=Object(r["a"])(n)?n.getValue(oE.MINIMUM_VALUE):void 0,o.cornerType=Object(r["a"])(i)?i.getValue(oE.MINIMUM_VALUE):void 0},yTe.DynamicGeometryUpdater=vTe,Object(r["a"])(Object.create)&&(vTe.prototype=Object.create(GW.prototype),vTe.prototype.constructor=vTe),vTe.prototype._isHidden=function(e,t,n){const i=this._options;return!Object(r["a"])(i.polylinePositions)||!Object(r["a"])(i.shapePositions)||GW.prototype._isHidden.call(this,e,t,n)},vTe.prototype._setOptions=function(e,t,n){const i=this._options;i.polylinePositions=aN.getValueOrUndefined(t.positions,n,i.polylinePositions),i.shapePositions=aN.getValueOrUndefined(t.shape,n),i.granularity=aN.getValueOrUndefined(t.granularity,n),i.cornerType=aN.getValueOrUndefined(t.cornerType,n)};var OTe=yTe;const ATe=new Dm,wTe=g.ZERO,TTe=new g,CTe=new Fe,ETe=new Fe,xTe=new I;function STe(e){this.id=e,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function ITe(e,t){Dbe.call(this,{entity:e,scene:t,geometryOptions:new STe(e),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(e,"rectangle",e.rectangle,void 0)}function DTe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(ITe.prototype=Object.create(Dbe.prototype),ITe.prototype.constructor=ITe),ITe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),o={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,ATe)),Object(r["a"])(t)||(t=Dm.WHITE),o.color=jm.fromColor(t)}return Object(r["a"])(this._options.offsetAttribute)&&(o.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,wTe,TTe))),new Sd({id:t,geometry:new HI(this._options),attributes:o})},ITe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,ATe),s=this._distanceDisplayConditionProperty.getValue(e),c={show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(s),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(c.offset=WE.fromCartesian3(aN.getValueOrDefault(this._terrainOffsetProperty,e,wTe,TTe))),new Sd({id:t,geometry:new tD(this._options),attributes:c})},ITe.prototype._computeCenter=function(e,t){const n=aN.getValueOrUndefined(this._entity.rectangle.coordinates,e,ETe);if(!Object(r["a"])(n))return;const i=Fe.center(n,xTe);return I.toCartesian(i,k.WGS84,t)},ITe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.coordinates)||FY.prototype._isHidden.call(this,e,t)},ITe.prototype._isDynamic=function(e,t){return!t.coordinates.isConstant||!aN.isConstant(t.height)||!aN.isConstant(t.extrudedHeight)||!aN.isConstant(t.granularity)||!aN.isConstant(t.stRotation)||!aN.isConstant(t.rotation)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.zIndex)||this._onTerrain&&!aN.isConstant(this._materialProperty)&&!(this._materialProperty instanceof oF)},ITe.prototype._setStaticOptions=function(e,t){const n=this._materialProperty instanceof oF;let i=aN.getValueOrUndefined(t.height,oE.MINIMUM_VALUE);const o=aN.getValueOrDefault(t.heightReference,oE.MINIMUM_VALUE,QM.NONE);let a=aN.getValueOrUndefined(t.extrudedHeight,oE.MINIMUM_VALUE);const s=aN.getValueOrDefault(t.extrudedHeightReference,oE.MINIMUM_VALUE,QM.NONE);Object(r["a"])(a)&&!Object(r["a"])(i)&&(i=0);const c=this._options;c.vertexFormat=n?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,c.rectangle=t.coordinates.getValue(oE.MINIMUM_VALUE,c.rectangle),c.granularity=aN.getValueOrUndefined(t.granularity,oE.MINIMUM_VALUE),c.stRotation=aN.getValueOrUndefined(t.stRotation,oE.MINIMUM_VALUE),c.rotation=aN.getValueOrUndefined(t.rotation,oE.MINIMUM_VALUE),c.offsetAttribute=Dbe.computeGeometryOffsetAttribute(i,o,a,s),c.height=Dbe.getGeometryHeight(i,o),a=Dbe.getGeometryExtrudedHeight(a,s),a===Dbe.CLAMP_TO_GROUND&&(a=rn.getMinimumMaximumHeights(HI.computeRectangle(c,CTe)).minimumTerrainHeight),c.extrudedHeight=a},ITe.DynamicGeometryUpdater=DTe,Object(r["a"])(Object.create)&&(DTe.prototype=Object.create(GW.prototype),DTe.prototype.constructor=DTe),DTe.prototype._isHidden=function(e,t,n){return!Object(r["a"])(this._options.rectangle)||GW.prototype._isHidden.call(this,e,t,n)},DTe.prototype._setOptions=function(e,t,n){const i=this._options;let o=aN.getValueOrUndefined(t.height,n);const a=aN.getValueOrDefault(t.heightReference,n,QM.NONE);let s=aN.getValueOrUndefined(t.extrudedHeight,n);const c=aN.getValueOrDefault(t.extrudedHeightReference,n,QM.NONE);Object(r["a"])(s)&&!Object(r["a"])(o)&&(o=0),i.rectangle=aN.getValueOrUndefined(t.coordinates,n,i.rectangle),i.granularity=aN.getValueOrUndefined(t.granularity,n),i.stRotation=aN.getValueOrUndefined(t.stRotation,n),i.rotation=aN.getValueOrUndefined(t.rotation,n),i.offsetAttribute=Dbe.computeGeometryOffsetAttribute(o,a,s,c),i.height=Dbe.getGeometryHeight(o,a),s=Dbe.getGeometryExtrudedHeight(s,c),s===Dbe.CLAMP_TO_GROUND&&(s=rn.getMinimumMaximumHeights(HI.computeRectangle(i,CTe)).minimumTerrainHeight),i.extrudedHeight=s};var PTe=ITe;const jTe=new Dm,RTe=new Sv,LTe=new Sv,MTe=g.ZERO,NTe=new g;function BTe(e,t,n,i,o,a,s){let c;this.translucent=t,this.appearanceType=n,this.depthFailAppearanceType=i,this.depthFailMaterialProperty=o,this.depthFailMaterial=void 0,this.closed=a,this.shadows=s,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.updaters=new pu,this.updatersWithAttributes=new pu,this.attributes=new pu,this.subscriptions=new pu,this.showsUpdated=new pu,this.itemsToRemove=[],this.invalidated=!1,Object(r["a"])(o)&&(c=o.definitionChanged.addEventListener(BTe.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=c}function FTe(e,t,n,i,o){this._solidItems=[],this._translucentItems=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}function zTe(e,t){const n=e.length;for(let i=n-1;i>=0;i--){const n=e[i];if(n.remove(t))return 0===n.updaters.length&&(e.splice(i,1),n.destroy()),!0}return!1}function kTe(e,t,n){let i=!1;const o=t.length;for(let r=0;r<o;++r){const o=t[r],a=o.itemsToRemove,s=a.length;if(s>0)for(r=0;r<s;r++){const t=a[r];o.remove(t),e.add(n,t),i=!0}}return i}function UTe(e,t,n,i){let o,r=t.length;for(o=r-1;o>=0;o--){const i=t[o];if(i.invalidated){t.splice(o,1);const r=i.updaters.values,a=r.length;for(let t=0;t<a;t++)e.add(n,r[t]);i.destroy()}}for(r=t.length,o=0;o<r;++o)i=t[o].update(n)&&i;return i}function VTe(e,t,n){const i=e.length;for(let o=0;o<i;o++){const i=e[o];if(i.contains(t))return i.getBoundingSphere(t,n)}return oN.FAILED}function HTe(e){const t=e.length;for(let n=0;n<t;n++)e[n].destroy();e.length=0}BTe.prototype.onMaterialChanged=function(){this.invalidated=!0},BTe.prototype.isMaterial=function(e){const t=this.depthFailMaterialProperty,n=e.depthFailMaterialProperty;return n===t||!!Object(r["a"])(t)&&t.equals(n)},BTe.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&aN.isConstant(e.distanceDisplayConditionProperty)&&aN.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},BTe.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},BTe.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const o=this.primitives;let a;if(this.createPrimitive){const n=this.geometry.values,a=n.length;if(a>0){let a;Object(r["a"])(i)&&(Object(r["a"])(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i),Object(r["a"])(this.depthFailAppearanceType)&&(Object(r["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=VW.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial)),a=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),i=new EG({show:!1,asynchronous:!0,geometryInstances:n.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:a,shadows:this.shadows}),o.add(i),t=!1}else{Object(r["a"])(i)&&(o.remove(i),i=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(o.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(r["a"])(i)&&i.ready){i.show=!0,Object(r["a"])(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0),!Object(r["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof oF||(this.depthFailMaterial=VW.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,s=t.length,c=this.waitingOnCreate;for(a=0;a<s;a++){const o=t[a],s=this.geometry.get(o.id);let l=this.attributes.get(s.id.id);if(Object(r["a"])(l)||(l=i.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,l)),!o.fillMaterialProperty.isConstant||c){const t=o.fillMaterialProperty.color,i=aN.getValueOrDefault(t,e,Dm.WHITE,jTe);Dm.equals(l._lastColor,i)||(l._lastColor=Dm.clone(i,l._lastColor),l.color=jm.toValue(i,l.color),(this.translucent&&255===l.color[3]||!this.translucent&&255!==l.color[3])&&(this.itemsToRemove[n++]=o))}if(Object(r["a"])(this.depthFailAppearanceType)&&o.depthFailMaterialProperty instanceof oF&&(!o.depthFailMaterialProperty.isConstant||c)){const t=o.depthFailMaterialProperty.color,n=aN.getValueOrDefault(t,e,Dm.WHITE,jTe);Dm.equals(l._lastDepthFailColor,n)||(l._lastDepthFailColor=Dm.clone(n,l._lastDepthFailColor),l.depthFailColor=jm.toValue(n,l.depthFailColor))}const u=o.entity.isShowing&&(o.hasConstantFill||o.isFilled(e)),h=1===l.show[0];u!==h&&(l.show=wP.toValue(u,l.show));const d=o.distanceDisplayConditionProperty;if(!aN.isConstant(d)){const t=aN.getValueOrDefault(d,e,LTe,RTe);Sv.equals(t,l._lastDistanceDisplayCondition)||(l._lastDistanceDisplayCondition=Sv.clone(t,l._lastDistanceDisplayCondition),l.distanceDisplayCondition=Dv.toValue(t,l.distanceDisplayCondition))}const f=o.terrainOffsetProperty;if(!aN.isConstant(f)){const t=aN.getValueOrDefault(f,e,MTe,NTe);g.equals(t,l._lastOffset)||(l._lastOffset=g.clone(t,l._lastOffset),l.offset=WE.toValue(t,l.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else Object(r["a"])(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},BTe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let a=this.attributes.get(o.id.id);Object(r["a"])(a)||(a=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,a));const s=n.entity.isShowing,c=1===a.show[0];s!==c&&(a.show=wP.toValue(s,a.show),o.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},BTe.prototype.contains=function(e){return this.updaters.contains(e.id)},BTe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!Object(r["a"])(i)||!Object(r["a"])(i.boundingSphere)||Object(r["a"])(i.show)&&0===i.show[0]?oN.FAILED:(i.boundingSphere.clone(t),oN.DONE)},BTe.prototype.destroy=function(){const e=this.primitive,t=this.primitives;Object(r["a"])(e)&&t.remove(e);const n=this.oldPrimitive;Object(r["a"])(n)&&t.remove(n),Object(r["a"])(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},FTe.prototype.add=function(e,t){let n,i;const o=t.createFillGeometryInstance(e);255===o.attributes.color.value[3]?(n=this._solidItems,i=!1):(n=this._translucentItems,i=!0);const r=n.length;for(let s=0;s<r;s++){const e=n[s];if(e.isMaterial(t))return void e.add(t,o)}const a=new BTe(this._primitives,i,this._appearanceType,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);a.add(t,o),n.push(a)},FTe.prototype.remove=function(e){zTe(this._solidItems,e)||zTe(this._translucentItems,e)},FTe.prototype.update=function(e){let t=UTe(this,this._solidItems,e,!0);t=UTe(this,this._translucentItems,e,t)&&t;const n=kTe(this,this._solidItems,e),i=kTe(this,this._translucentItems,e);return(n||i)&&(t=UTe(this,this._solidItems,e,t)&&t,t=UTe(this,this._translucentItems,e,t)&&t),t},FTe.prototype.getBoundingSphere=function(e,t){const n=VTe(this._solidItems,e,t);return n===oN.FAILED?VTe(this._translucentItems,e,t):n},FTe.prototype.removeAllPrimitives=function(){HTe(this._solidItems),HTe(this._translucentItems)};var GTe=FTe;const WTe=new Sv,qTe=new Sv,YTe=g.ZERO,XTe=new g;function KTe(e,t,n,i,o,r,a){this.primitives=e,this.appearanceType=t,this.materialProperty=n,this.depthFailAppearanceType=i,this.depthFailMaterialProperty=o,this.closed=r,this.shadows=a,this.updaters=new pu,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new pu,this.attributes=new pu,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(KTe.prototype.onMaterialChanged,this),this.subscriptions=new pu,this.showsUpdated=new pu}KTe.prototype.onMaterialChanged=function(){this.invalidated=!0},KTe.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty,i=this.depthFailMaterialProperty,o=e.depthFailMaterialProperty;if(n===t&&o===i)return!0;let a=Object(r["a"])(t)&&t.equals(n);return a=(!Object(r["a"])(i)&&!Object(r["a"])(o)||Object(r["a"])(i)&&i.equals(o))&&a,a},KTe.prototype.add=function(e,t){const n=t.id;if(this.updaters.set(n,t),this.geometry.set(n,t.createFillGeometryInstance(e)),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&aN.isConstant(t.distanceDisplayConditionProperty)&&aN.isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(n,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(n,t);this.createPrimitive=!0},KTe.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1};const $Te=new Dm;function JTe(e,t,n,i,o){this._items=[],this._primitives=e,this._appearanceType=t,this._depthFailAppearanceType=n,this._closed=i,this._shadows=o}KTe.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,o=this.geometry.values;let a;if(this.createPrimitive){const a=o.length;if(a>0){let a;Object(r["a"])(n)&&(Object(r["a"])(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=VW.getValue(e,this.materialProperty,this.material),Object(r["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=VW.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),a=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),n=new EG({show:!1,asynchronous:!0,geometryInstances:o.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:a,shadows:this.shadows}),i.add(n),t=!1}else{Object(r["a"])(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(Object(r["a"])(n)&&n.ready){n.show=!0,Object(r["a"])(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=VW.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!Object(r["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof oF||(this.depthFailMaterial=VW.getValue(e,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const t=this.updatersWithAttributes.values,o=t.length;for(a=0;a<o;a++){const i=t[a],o=i.entity,s=this.geometry.get(i.id);let c=this.attributes.get(s.id.id);if(Object(r["a"])(c)||(c=n.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,c)),Object(r["a"])(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof oF&&!i.depthFailMaterialProperty.isConstant){const t=i.depthFailMaterialProperty.color,n=aN.getValueOrDefault(t,e,Dm.WHITE,$Te);Dm.equals(c._lastDepthFailColor,n)||(c._lastDepthFailColor=Dm.clone(n,c._lastDepthFailColor),c.depthFailColor=jm.toValue(n,c.depthFailColor))}const l=o.isShowing&&(i.hasConstantFill||i.isFilled(e)),u=1===c.show[0];l!==u&&(c.show=wP.toValue(l,c.show));const h=i.distanceDisplayConditionProperty;if(!aN.isConstant(h)){const t=aN.getValueOrDefault(h,e,qTe,WTe);Sv.equals(t,c._lastDistanceDisplayCondition)||(c._lastDistanceDisplayCondition=Sv.clone(t,c._lastDistanceDisplayCondition),c.distanceDisplayCondition=Dv.toValue(t,c.distanceDisplayCondition))}const d=i.terrainOffsetProperty;if(!aN.isConstant(d)){const t=aN.getValueOrDefault(d,e,YTe,XTe);g.equals(t,c._lastOffset)||(c._lastOffset=g.clone(t,c._lastOffset),c.offset=WE.toValue(t,c.offset))}}this.updateShows(n)}else Object(r["a"])(n)&&!n.ready&&(t=!1);return t},KTe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,a=this.geometry.get(n.id);let s=this.attributes.get(a.id.id);Object(r["a"])(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));const c=o.isShowing,l=1===s.show[0];c!==l&&(s.show=wP.toValue(c,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},KTe.prototype.contains=function(e){return this.updaters.contains(e.id)},KTe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!Object(r["a"])(i)||!Object(r["a"])(i.boundingSphere)||Object(r["a"])(i.show)&&0===i.show[0]?oN.FAILED:(i.boundingSphere.clone(t),oN.DONE)},KTe.prototype.destroy=function(){const e=this.primitive,t=this.primitives;Object(r["a"])(e)&&t.remove(e);const n=this.oldPrimitive;Object(r["a"])(n)&&t.remove(n),this.removeMaterialSubscription()},JTe.prototype.add=function(e,t){const n=this._items,i=n.length;for(let r=0;r<i;r++){const i=n[r];if(i.isMaterial(t))return void i.add(e,t)}const o=new KTe(this._primitives,this._appearanceType,t.fillMaterialProperty,this._depthFailAppearanceType,t.depthFailMaterialProperty,this._closed,this._shadows);o.add(e,t),n.push(o)},JTe.prototype.remove=function(e){const t=this._items,n=t.length;for(let i=n-1;i>=0;i--){const n=t[i];if(n.remove(e)){0===n.updaters.length&&(t.splice(i,1),n.destroy());break}}},JTe.prototype.update=function(e){let t;const n=this._items,i=n.length;for(t=i-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o},JTe.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return oN.FAILED},JTe.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var QTe=JTe;const ZTe=new Dm,eCe=new Sv,tCe=new Sv;function nCe(e,t,n,i){this.primitives=e,this.zIndex=i,this.classificationType=t,this.color=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.updaters=new pu,this.updatersWithAttributes=new pu,this.attributes=new pu,this.subscriptions=new pu,this.showsUpdated=new pu,this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new JS}function iCe(e,t){this._batches=[],this._primitives=e,this._classificationType=t}nCe.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},nCe.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),this.rectangleCollisionCheck.insert(n,t.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&aN.isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},nCe.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},nCe.prototype.update=function(e){let t=!0;const n=0;let i=this.primitive;const o=this.primitives;let a;if(this.createPrimitive){const e=this.geometry.values,n=e.length;if(n>0)Object(r["a"])(i)&&(Object(r["a"])(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i),i=new kW({show:!1,asynchronous:!0,geometryInstances:e.slice(),classificationType:this.classificationType}),o.add(i,this.zIndex),t=!1;else{Object(r["a"])(i)&&(o.remove(i),i=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(o.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(r["a"])(i)&&i.ready){i.show=!0,Object(r["a"])(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,n=t.length,s=this.waitingOnCreate;for(a=0;a<n;a++){const n=t[a],o=this.geometry.get(n.id);let c=this.attributes.get(o.id.id);if(Object(r["a"])(c)||(c=i.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,c)),!n.fillMaterialProperty.isConstant||s){const t=n.fillMaterialProperty.color,i=aN.getValueOrDefault(t,e,Dm.WHITE,ZTe);Dm.equals(c._lastColor,i)||(c._lastColor=Dm.clone(i,c._lastColor),c.color=jm.toValue(i,c.color))}const l=n.entity.isShowing&&(n.hasConstantFill||n.isFilled(e)),u=1===c.show[0];l!==u&&(c.show=wP.toValue(l,c.show));const h=n.distanceDisplayConditionProperty;if(!aN.isConstant(h)){const t=aN.getValueOrDefault(h,e,tCe,eCe);Sv.equals(t,c._lastDistanceDisplayCondition)||(c._lastDistanceDisplayCondition=Sv.clone(t,c._lastDistanceDisplayCondition),c.distanceDisplayCondition=Dv.toValue(t,c.distanceDisplayCondition))}}this.updateShows(i),this.waitingOnCreate=!1}else Object(r["a"])(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},nCe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let a=this.attributes.get(o.id.id);Object(r["a"])(a)||(a=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,a));const s=n.entity.isShowing,c=1===a.show[0];s!==c&&(a.show=wP.toValue(s,a.show),o.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},nCe.prototype.contains=function(e){return this.updaters.contains(e.id)},nCe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getBoundingSphere(e.entity);return Object(r["a"])(i)?(i.clone(t),oN.DONE):oN.FAILED},nCe.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;Object(r["a"])(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;Object(r["a"])(n)&&(e.remove(n),this.oldPrimitive=void 0)},iCe.prototype.add=function(e,t){const n=t.createFillGeometryInstance(e),i=this._batches,o=aN.getValueOrDefault(t.zIndex,0);let a;const s=i.length;for(let r=0;r<s;++r){const e=i[r];if(e.zIndex===o&&!e.overlapping(n.geometry.rectangle)){a=e;break}}return Object(r["a"])(a)||(a=new nCe(this._primitives,this._classificationType,n.attributes.color.value,o),i.push(a)),a.add(t,n),a},iCe.prototype.remove=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;++i)if(t[i].remove(e))return},iCe.prototype.update=function(e){let t,n,i=!0;const o=this._batches,r=o.length;for(t=0;t<r;++t)i=o[t].update(e)&&i;for(t=0;t<r;++t){const i=o[t],r=i.itemsToRemove,a=r.length;for(let t=0;t<a;t++){n=r[t],i.remove(n);const o=this.add(e,n);i.isDirty=!0,o.isDirty=!0}}for(t=r-1;t>=0;--t){const n=o[t];n.isDirty&&(i=o[t].update(e)&&i,n.isDirty=!1),0===n.geometry.length&&o.splice(t,1)}return i},iCe.prototype.getBoundingSphere=function(e,t){const n=this._batches,i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return oN.FAILED},iCe.prototype.removeAllPrimitives=function(){const e=this._batches,t=e.length;for(let n=0;n<t;++n)e[n].removeAllPrimitives()};var oCe=iCe;const rCe=new Sv,aCe=new Sv;function sCe(e,t,n,i,o,r){this.primitives=e,this.classificationType=t,this.appearanceType=n,this.materialProperty=i,this.updaters=new pu,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.material=void 0,this.updatersWithAttributes=new pu,this.attributes=new pu,this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(sCe.prototype.onMaterialChanged,this),this.subscriptions=new pu,this.showsUpdated=new pu,this.usingSphericalTextureCoordinates=o,this.zIndex=r,this.rectangleCollisionCheck=new JS}function cCe(e,t,n){this._items=[],this._primitives=e,this._classificationType=t,this._appearanceType=n}sCe.prototype.onMaterialChanged=function(){this.invalidated=!0},sCe.prototype.overlapping=function(e){return this.rectangleCollisionCheck.collides(e)},sCe.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof oF&&t instanceof oF||Object(r["a"])(t)&&t.equals(n)},sCe.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),this.rectangleCollisionCheck.insert(i,n.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&aN.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},sCe.prototype.remove=function(e){const t=e.id,n=this.geometry.get(t);if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.rectangleCollisionCheck.remove(t,n.geometry.rectangle),this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},sCe.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.primitives,o=this.geometry.values;let a;if(this.createPrimitive){const a=o.length;if(a>0)Object(r["a"])(n)&&(Object(r["a"])(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),this.material=VW.getValue(e,this.materialProperty,this.material),n=new kW({show:!1,asynchronous:!0,geometryInstances:o.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),i.add(n,this.zIndex),t=!1;else{Object(r["a"])(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(Object(r["a"])(n)&&n.ready){n.show=!0,Object(r["a"])(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=VW.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material;const t=this.updatersWithAttributes.values,o=t.length;for(a=0;a<o;a++){const i=t[a],o=i.entity,s=this.geometry.get(i.id);let c=this.attributes.get(s.id.id);Object(r["a"])(c)||(c=n.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,c));const l=o.isShowing&&(i.hasConstantFill||i.isFilled(e)),u=1===c.show[0];l!==u&&(c.show=wP.toValue(l,c.show));const h=i.distanceDisplayConditionProperty;if(!aN.isConstant(h)){const t=aN.getValueOrDefault(h,e,aCe,rCe);Sv.equals(t,c._lastDistanceDisplayCondition)||(c._lastDistanceDisplayCondition=Sv.clone(t,c._lastDistanceDisplayCondition),c.distanceDisplayCondition=Dv.toValue(t,c.distanceDisplayCondition))}}this.updateShows(n)}else Object(r["a"])(n)&&!n.ready&&(t=!1);return t},sCe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,a=this.geometry.get(n.id);let s=this.attributes.get(a.id.id);Object(r["a"])(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));const c=o.isShowing,l=1===s.show[0];c!==l&&(s.show=wP.toValue(c,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},sCe.prototype.contains=function(e){return this.updaters.contains(e.id)},sCe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!Object(r["a"])(i)||!Object(r["a"])(i.boundingSphere)||Object(r["a"])(i.show)&&0===i.show[0]?oN.FAILED:(i.boundingSphere.clone(t),oN.DONE)},sCe.prototype.destroy=function(){const e=this.primitive,t=this.primitives;Object(r["a"])(e)&&t.remove(e);const n=this.oldPrimitive;Object(r["a"])(n)&&t.remove(n),this.removeMaterialSubscription()},cCe.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=nW.shouldUseSphericalCoordinates(o.geometry.rectangle),a=aN.getValueOrDefault(t.zIndex,0);for(let c=0;c<i;++c){const i=n[c];if(i.isMaterial(t)&&i.usingSphericalTextureCoordinates===r&&i.zIndex===a&&!i.overlapping(o.geometry.rectangle))return void i.add(e,t,o)}const s=new sCe(this._primitives,this._classificationType,this._appearanceType,t.fillMaterialProperty,r,a);s.add(e,t,o),n.push(s)},cCe.prototype.remove=function(e){const t=this._items,n=t.length;for(let i=n-1;i>=0;i--){const n=t[i];if(n.remove(e)){0===n.updaters.length&&(t.splice(i,1),n.destroy());break}}},cCe.prototype.update=function(e){let t;const n=this._items,i=n.length;for(t=i-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o},cCe.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return oN.FAILED},cCe.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var lCe=cCe;const uCe=new Dm,hCe=new Sv,dCe=new Sv,fCe=g.ZERO,pCe=new g;function mCe(e,t,n,i){this.translucent=t,this.width=n,this.shadows=i,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.updaters=new pu,this.updatersWithAttributes=new pu,this.attributes=new pu,this.itemsToRemove=[],this.subscriptions=new pu,this.showsUpdated=new pu}function _Ce(e,t,n){this._primitives=e,this._scene=t,this._shadows=n,this._solidBatches=new pu,this._translucentBatches=new pu}mCe.prototype.add=function(e,t){const n=e.id;if(this.createPrimitive=!0,this.geometry.set(n,t),this.updaters.set(n,e),e.hasConstantOutline&&e.outlineColorProperty.isConstant&&aN.isConstant(e.distanceDisplayConditionProperty)&&aN.isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(n,e.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(n,e)},mCe.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t),this.showsUpdated.remove(t)),!0}return!1},mCe.prototype.update=function(e){let t=!0,n=0,i=this.primitive;const o=this.primitives;let a;if(this.createPrimitive){const e=this.geometry.values,n=e.length;if(n>0)Object(r["a"])(i)&&(Object(r["a"])(this.oldPrimitive)?o.remove(i):this.oldPrimitive=i),i=new EG({show:!1,asynchronous:!0,geometryInstances:e.slice(),appearance:new nF({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),o.add(i),t=!1;else{Object(r["a"])(i)&&(o.remove(i),i=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(o.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(r["a"])(i)&&i.ready){i.show=!0,Object(r["a"])(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0);const t=this.updatersWithAttributes.values,s=t.length,c=this.waitingOnCreate;for(a=0;a<s;a++){const o=t[a],s=this.geometry.get(o.id);let l=this.attributes.get(s.id.id);if(Object(r["a"])(l)||(l=i.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,l)),!o.outlineColorProperty.isConstant||c){const t=o.outlineColorProperty,i=aN.getValueOrDefault(t,e,Dm.WHITE,uCe);Dm.equals(l._lastColor,i)||(l._lastColor=Dm.clone(i,l._lastColor),l.color=jm.toValue(i,l.color),(this.translucent&&255===l.color[3]||!this.translucent&&255!==l.color[3])&&(this.itemsToRemove[n++]=o))}const u=o.entity.isShowing&&(o.hasConstantOutline||o.isOutlineVisible(e)),h=1===l.show[0];u!==h&&(l.show=wP.toValue(u,l.show));const d=o.distanceDisplayConditionProperty;if(!aN.isConstant(d)){const t=aN.getValueOrDefault(d,e,dCe,hCe);Sv.equals(t,l._lastDistanceDisplayCondition)||(l._lastDistanceDisplayCondition=Sv.clone(t,l._lastDistanceDisplayCondition),l.distanceDisplayCondition=Dv.toValue(t,l.distanceDisplayCondition))}const f=o.terrainOffsetProperty;if(!aN.isConstant(f)){const t=aN.getValueOrDefault(f,e,fCe,pCe);g.equals(t,l._lastOffset)||(l._lastOffset=g.clone(t,l._lastOffset),l.offset=WE.toValue(t,l.offset))}}this.updateShows(i),this.waitingOnCreate=!1}else Object(r["a"])(i)&&!i.ready&&(t=!1);return this.itemsToRemove.length=n,t},mCe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=this.geometry.get(n.id);let a=this.attributes.get(o.id.id);Object(r["a"])(a)||(a=e.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,a));const s=n.entity.isShowing,c=1===a.show[0];s!==c&&(a.show=wP.toValue(s,a.show),o.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},mCe.prototype.contains=function(e){return this.updaters.contains(e.id)},mCe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!Object(r["a"])(i)||!Object(r["a"])(i.boundingSphere)||Object(r["a"])(i.show)&&0===i.show[0]?oN.FAILED:(i.boundingSphere.clone(t),oN.DONE)},mCe.prototype.removeAllPrimitives=function(){const e=this.primitives,t=this.primitive;Object(r["a"])(t)&&(e.remove(t),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const n=this.oldPrimitive;Object(r["a"])(n)&&(e.remove(n),this.oldPrimitive=void 0)},_Ce.prototype.add=function(e,t){const n=t.createOutlineGeometryInstance(e),i=this._scene.clampLineWidth(t.outlineWidth);let o,a;255===n.attributes.color.value[3]?(o=this._solidBatches,a=o.get(i),Object(r["a"])(a)||(a=new mCe(this._primitives,!1,i,this._shadows),o.set(i,a)),a.add(t,n)):(o=this._translucentBatches,a=o.get(i),Object(r["a"])(a)||(a=new mCe(this._primitives,!0,i,this._shadows),o.set(i,a)),a.add(t,n))},_Ce.prototype.remove=function(e){let t;const n=this._solidBatches.values,i=n.length;for(t=0;t<i;t++)if(n[t].remove(e))return;const o=this._translucentBatches.values,r=o.length;for(t=0;t<r;t++)if(o[t].remove(e))return},_Ce.prototype.update=function(e){let t,n,i,o;const r=this._solidBatches.values,a=r.length,s=this._translucentBatches.values,c=s.length;let l,u=!0,h=!1;do{for(h=!1,n=0;n<a;n++){o=r[n],u=o.update(e),l=o.itemsToRemove;const a=l.length;if(a>0)for(h=!0,t=0;t<a;t++)i=l[t],o.remove(i),this.add(e,i)}for(n=0;n<c;n++){o=s[n],u=o.update(e),l=o.itemsToRemove;const r=l.length;if(r>0)for(h=!0,t=0;t<r;t++)i=l[t],o.remove(i),this.add(e,i)}}while(h);return u},_Ce.prototype.getBoundingSphere=function(e,t){let n;const i=this._solidBatches.values,o=i.length;for(n=0;n<o;n++){const o=i[n];if(o.contains(e))return o.getBoundingSphere(e,t)}const r=this._translucentBatches.values,a=r.length;for(n=0;n<a;n++){const i=r[n];if(i.contains(e))return i.getBoundingSphere(e,t)}return oN.FAILED},_Ce.prototype.removeAllPrimitives=function(){let e;const t=this._solidBatches.values,n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._translucentBatches.values,o=i.length;for(e=0;e<o;e++)i[e].removeAllPrimitives()};var gCe=_Ce;const bCe=new Dm;function yCe(e){this.id=e,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function vCe(e,t){FY.call(this,{entity:e,scene:t,geometryOptions:new yCe(e),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(e,"wall",e.wall,void 0)}function OCe(e,t,n){GW.call(this,e,t,n)}Object(r["a"])(Object.create)&&(vCe.prototype=Object.create(FY.prototype),vCe.prototype.constructor=vCe),vCe.prototype.createFillGeometryInstance=function(e){if(i["a"].defined("time",e),!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e);let o,s;const c=new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),l=this._distanceDisplayConditionProperty.getValue(e),u=Dv.fromDistanceDisplayCondition(l);if(this._materialProperty instanceof oF){let t;Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(t=this._materialProperty.color.getValue(e,bCe)),Object(r["a"])(t)||(t=Dm.WHITE),s=jm.fromColor(t),o={show:c,distanceDisplayCondition:u,color:s}}else o={show:c,distanceDisplayCondition:u};return new Sd({id:t,geometry:new dL(this._options),attributes:o})},vCe.prototype.createOutlineGeometryInstance=function(e){if(i["a"].defined("time",e),!this._outlineEnabled)throw new a["a"]("This instance does not represent an outlined geometry.");const t=this._entity,n=t.isAvailable(e),o=aN.getValueOrDefault(this._outlineColorProperty,e,Dm.BLACK,bCe),r=this._distanceDisplayConditionProperty.getValue(e);return new Sd({id:t,geometry:new bL(this._options),attributes:{show:new wP(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:jm.fromColor(o),distanceDisplayCondition:Dv.fromDistanceDisplayCondition(r)}})},vCe.prototype._isHidden=function(e,t){return!Object(r["a"])(t.positions)||FY.prototype._isHidden.call(this,e,t)},vCe.prototype._getIsClosed=function(e){return!1},vCe.prototype._isDynamic=function(e,t){return!t.positions.isConstant||!aN.isConstant(t.minimumHeights)||!aN.isConstant(t.maximumHeights)||!aN.isConstant(t.outlineWidth)||!aN.isConstant(t.granularity)},vCe.prototype._setStaticOptions=function(e,t){const n=t.minimumHeights,i=t.maximumHeights,o=t.granularity,a=this._materialProperty instanceof oF,s=this._options;s.vertexFormat=a?nF.VERTEX_FORMAT:$B.MaterialSupport.TEXTURED.vertexFormat,s.positions=t.positions.getValue(oE.MINIMUM_VALUE,s.positions),s.minimumHeights=Object(r["a"])(n)?n.getValue(oE.MINIMUM_VALUE,s.minimumHeights):void 0,s.maximumHeights=Object(r["a"])(i)?i.getValue(oE.MINIMUM_VALUE,s.maximumHeights):void 0,s.granularity=Object(r["a"])(o)?o.getValue(oE.MINIMUM_VALUE):void 0},vCe.DynamicGeometryUpdater=OCe,Object(r["a"])(Object.create)&&(OCe.prototype=Object.create(GW.prototype),OCe.prototype.constructor=OCe),OCe.prototype._isHidden=function(e,t,n){return!Object(r["a"])(this._options.positions)||GW.prototype._isHidden.call(this,e,t,n)},OCe.prototype._setOptions=function(e,t,n){const i=this._options;i.positions=aN.getValueOrUndefined(t.positions,n,i.positions),i.minimumHeights=aN.getValueOrUndefined(t.minimumHeights,n,i.minimumHeights),i.maximumHeights=aN.getValueOrUndefined(t.maximumHeights,n,i.maximumHeights),i.granularity=aN.getValueOrUndefined(t.granularity,n)};var ACe=vCe;const wCe=[],TCe=[eX,bve,Fbe,Rwe,Gwe,oTe,_Te,OTe,PTe,ACe];function CCe(e,t){this.entity=e,this.scene=t;const n=new Array(TCe.length),i=new dn["a"];function o(e){i.raiseEvent(e)}const r=new gO;for(let a=0;a<n.length;a++){const i=new TCe[a](e,t);r.add(i.geometryChanged,o),n[a]=i}this.updaters=n,this.geometryChanged=i,this.eventHelper=r,this._removeEntitySubscription=e.definitionChanged.addEventListener(CCe.prototype._onEntityPropertyChanged,this)}function ECe(e,t,n,r){i["a"].defined("scene",e),i["a"].defined("entityCollection",t),n=Object(o["a"])(n,e.primitives),r=Object(o["a"])(r,e.groundPrimitives),this._scene=e,this._primitives=n,this._groundPrimitives=r,this._entityCollection=void 0,this._addedObjects=new pu,this._removedObjects=new pu,this._changedObjects=new pu;const a=DH.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);const s=SY.supportsMaterialsforEntitiesOnTerrain(e);let c;for(this._supportsMaterialsforEntitiesOnTerrain=s,c=0;c<a;++c)this._outlineBatches[c]=new gCe(n,e,c,!1),this._outlineBatches[a+c]=new gCe(n,e,c,!0),this._closedColorBatches[c]=new GTe(n,nF,void 0,!0,c,!0),this._closedColorBatches[a+c]=new GTe(n,nF,void 0,!0,c,!1),this._closedMaterialBatches[c]=new QTe(n,$B,void 0,!0,c,!0),this._closedMaterialBatches[a+c]=new QTe(n,$B,void 0,!0,c,!1),this._openColorBatches[c]=new GTe(n,nF,void 0,!1,c,!0),this._openColorBatches[a+c]=new GTe(n,nF,void 0,!1,c,!1),this._openMaterialBatches[c]=new QTe(n,$B,void 0,!1,c,!0),this._openMaterialBatches[a+c]=new QTe(n,$B,void 0,!1,c,!1);const l=DV.NUMBER_OF_CLASSIFICATION_TYPES,u=new Array(l),h=[];if(s)for(c=0;c<l;++c)h.push(new lCe(r,c,$B)),u[c]=new oCe(r,c);else for(c=0;c<l;++c)u[c]=new oCe(r,c);this._groundColorBatches=u,this._groundMaterialBatches=h,this._dynamicBatch=new Cwe(n,r),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new pu,this._updaterSets=new pu,this._entityCollection=t,t.collectionChanged.addEventListener(ECe.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,wCe)}CCe.prototype._onEntityPropertyChanged=function(e,t,n,i){const o=this.updaters;for(let r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(e,t,n,i)},CCe.prototype.forEach=function(e){const t=this.updaters;for(let n=0;n<t.length;n++)e(t[n])},CCe.prototype.destroy=function(){this.eventHelper.removeAll();const e=this.updaters;for(let t=0;t<e.length;t++)e[t].destroy();this._removeEntitySubscription(),Wc(this)},ECe.prototype.update=function(e){i["a"].defined("time",e);const t=this._addedObjects,n=t.values,o=this._removedObjects,r=o.values,a=this._changedObjects,s=a.values;let c,l,u,h;const d=this;for(c=s.length-1;c>-1;c--)l=s[c],u=l.id,h=this._updaterSets.get(u),h.entity===l?h.forEach((function(t){d._removeUpdater(t),d._insertUpdaterIntoBatch(e,t)})):(r.push(l),n.push(l));for(c=r.length-1;c>-1;c--)l=r[c],u=l.id,h=this._updaterSets.get(u),h.forEach(this._removeUpdater.bind(this)),h.destroy(),this._updaterSets.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,h=new CCe(l,this._scene),this._updaterSets.set(u,h),h.forEach((function(t){d._insertUpdaterIntoBatch(e,t)})),this._subscriptions.set(u,h.geometryChanged.addEventListener(ECe._onGeometryChanged,this));t.removeAll(),o.removeAll(),a.removeAll();let f=!0;const p=this._batches,m=p.length;for(c=0;c<m;c++)f=p[c].update(e)&&f;return f};const xCe=[],SCe=new Tt;ECe.prototype.getBoundingSphere=function(e,t){i["a"].defined("entity",e),i["a"].defined("result",t);const n=xCe,o=SCe;let r=0,a=oN.DONE;const s=this._batches,c=s.length,l=e.id,u=this._updaterSets.get(l).updaters;for(let i=0;i<u.length;i++){const e=u[i];for(let t=0;t<c;t++){if(a=s[t].getBoundingSphere(e,o),a===oN.PENDING)return oN.PENDING;a===oN.DONE&&(n[r]=Tt.clone(o,n[r]),r++)}}return 0===r?oN.FAILED:(n.length=r,Tt.fromBoundingSpheres(n,t),oN.DONE)},ECe.prototype.isDestroyed=function(){return!1},ECe.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(ECe.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();this._subscriptions.removeAll();const o=this._updaterSets.values;for(n=o.length,e=0;e<n;e++)o[e].destroy();return this._updaterSets.removeAll(),Wc(this)},ECe.prototype._removeUpdater=function(e){const t=this._batches,n=t.length;for(let i=0;i<n;i++)t[i].remove(e)},ECe.prototype._insertUpdaterIntoBatch=function(e,t){if(t.isDynamic)return void this._dynamicBatch.add(e,t);let n;(t.outlineEnabled||t.fillEnabled)&&(n=t.shadowsProperty.getValue(e));const i=DH.NUMBER_OF_SHADOW_MODES;if(t.outlineEnabled&&(Object(r["a"])(t.terrainOffsetProperty)?this._outlineBatches[i+n].add(e,t):this._outlineBatches[n].add(e,t)),t.fillEnabled)if(t.onTerrain){const n=t.classificationTypeProperty.getValue(e);t.fillMaterialProperty instanceof oF?this._groundColorBatches[n].add(e,t):this._groundMaterialBatches[n].add(e,t)}else t.isClosed?t.fillMaterialProperty instanceof oF?Object(r["a"])(t.terrainOffsetProperty)?this._closedColorBatches[i+n].add(e,t):this._closedColorBatches[n].add(e,t):Object(r["a"])(t.terrainOffsetProperty)?this._closedMaterialBatches[i+n].add(e,t):this._closedMaterialBatches[n].add(e,t):t.fillMaterialProperty instanceof oF?Object(r["a"])(t.terrainOffsetProperty)?this._openColorBatches[i+n].add(e,t):this._openColorBatches[n].add(e,t):Object(r["a"])(t.terrainOffsetProperty)?this._openMaterialBatches[i+n].add(e,t):this._openMaterialBatches[n].add(e,t)},ECe._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;Object(r["a"])(t.get(o))||Object(r["a"])(n.get(o))||n.set(o,i)},ECe.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let a,s,c;for(a=n.length-1;a>-1;a--)c=n[a],s=c.id,i.remove(s)||(o.set(s,c),r.remove(s));for(a=t.length-1;a>-1;a--)c=t[a],s=c.id,o.remove(s)?r.set(s,c):i.set(s,c)};var ICe=ECe;const DCe=1,PCe="30px sans-serif",jCe=Zle.FILL,RCe=Dm.WHITE,LCe=Dm.BLACK,MCe=1,NCe=!1,BCe=new Dm(.165,.165,.165,.8),FCe=new Gt(7,5),zCe=Gt.ZERO,kCe=g.ZERO,UCe=QM.NONE,VCe=eN.CENTER,HCe=nN.CENTER,GCe=new g,WCe=new Dm,qCe=new Dm,YCe=new Dm,XCe=new Gt,KCe=new g,$Ce=new Gt,JCe=new xE,QCe=new xE,ZCe=new xE,eEe=new Sv;function tEe(e){this.entity=e,this.label=void 0,this.index=void 0}function nEe(e,t){if(!Object(r["a"])(e))throw new a["a"]("entityCluster is required.");if(!Object(r["a"])(t))throw new a["a"]("entityCollection is required.");t.collectionChanged.addEventListener(nEe.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new pu,this._onCollectionChanged(t,t.values,[],[])}function iEe(e,t,n){Object(r["a"])(e)&&(e.label=void 0,n.removeLabel(t))}nEe.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.entity,s=a._label;let c,l,u=o.label,h=a.isShowing&&a.isAvailable(e)&&aN.getValueOrDefault(s._show,e,!0);if(h&&(l=aN.getValueOrUndefined(a._position,e,GCe),c=aN.getValueOrUndefined(s._text,e),h=Object(r["a"])(l)&&Object(r["a"])(c)),!h){iEe(o,a,n);continue}aN.isConstant(a._position)||(n._clusterDirty=!0);let d=!1;const f=aN.getValueOrDefault(s._heightReference,e,UCe);Object(r["a"])(u)||(u=n.getLabel(a),u.id=a,o.label=u,d=g.equals(u.position,l)&&u.heightReference===f),u.show=!0,u.position=l,u.text=c,u.scale=aN.getValueOrDefault(s._scale,e,DCe),u.font=aN.getValueOrDefault(s._font,e,PCe),u.style=aN.getValueOrDefault(s._style,e,jCe),u.fillColor=aN.getValueOrDefault(s._fillColor,e,RCe,WCe),u.outlineColor=aN.getValueOrDefault(s._outlineColor,e,LCe,qCe),u.outlineWidth=aN.getValueOrDefault(s._outlineWidth,e,MCe),u.showBackground=aN.getValueOrDefault(s._showBackground,e,NCe),u.backgroundColor=aN.getValueOrDefault(s._backgroundColor,e,BCe,YCe),u.backgroundPadding=aN.getValueOrDefault(s._backgroundPadding,e,FCe,XCe),u.pixelOffset=aN.getValueOrDefault(s._pixelOffset,e,zCe,$Ce),u.eyeOffset=aN.getValueOrDefault(s._eyeOffset,e,kCe,KCe),u.heightReference=f,u.horizontalOrigin=aN.getValueOrDefault(s._horizontalOrigin,e,VCe),u.verticalOrigin=aN.getValueOrDefault(s._verticalOrigin,e,HCe),u.translucencyByDistance=aN.getValueOrUndefined(s._translucencyByDistance,e,JCe),u.pixelOffsetScaleByDistance=aN.getValueOrUndefined(s._pixelOffsetScaleByDistance,e,QCe),u.scaleByDistance=aN.getValueOrUndefined(s._scaleByDistance,e,ZCe),u.distanceDisplayCondition=aN.getValueOrUndefined(s._distanceDisplayCondition,e,eEe),u.disableDepthTestDistance=aN.getValueOrUndefined(s._disableDepthTestDistance,e),d&&u._updateClamping()}return!0},nEe.prototype.getBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");if(!Object(r["a"])(t))throw new a["a"]("result is required.");const n=this._items.get(e.id);if(!Object(r["a"])(n)||!Object(r["a"])(n.label))return oN.FAILED;const i=n.label;return t.center=g.clone(Object(o["a"])(i._clampedPosition,i.position),t.center),t.radius=0,oN.DONE},nEe.prototype.isDestroyed=function(){return!1},nEe.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(nEe.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removeLabel(e[t]);return Wc(this)},nEe.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._items,c=this._cluster;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._label)&&Object(r["a"])(a._position)&&s.set(a.id,new tEe(a));for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._label)&&Object(r["a"])(a._position)?s.contains(a.id)||s.set(a.id,new tEe(a)):(iEe(s.get(a.id),a,c),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],iEe(s.get(a.id),a,c),s.remove(a.id)};var oEe=nEe;const rEe=1,aEe=0,sEe=!0,cEe=!0,lEe=DH.ENABLED,uEe=QM.NONE,hEe=Dm.RED,dEe=0,fEe=Dm.WHITE,pEe=T4.HIGHLIGHT,mEe=.5,_Ee=new Gt(1,1),gEe=new Me,bEe=new Me,yEe=new Dm;function vEe(e,t){i["a"].typeOf.object("scene",e),i["a"].typeOf.object("entityCollection",t),t.collectionChanged.addEventListener(vEe.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._modelHash={},this._entitiesToVisualize=new pu,this._onCollectionChanged(t,t.values,[],[])}vEe.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._entitiesToVisualize.values,n=this._modelHash,i=this._primitives;for(let o=0,a=t.length;o<a;o++){const a=t[o],s=a._model;let c,l,u=n[a.id],h=a.isShowing&&a.isAvailable(e)&&aN.getValueOrDefault(s._show,e,!0);if(h&&(l=a.computeModelMatrix(e,gEe),c=Et["a"].createIfNeeded(aN.getValueOrUndefined(s._uri,e)),h=Object(r["a"])(l)&&Object(r["a"])(c)),!h){Object(r["a"])(u)&&(u.modelPrimitive.show=!1);continue}let d=Object(r["a"])(u)?u.modelPrimitive:void 0;if(Object(r["a"])(d)&&c.url===u.url||(Object(r["a"])(d)&&(i.removeAndDestroy(d),delete n[a.id]),d=Bse.fromGltf({url:c,incrementallyLoadTextures:aN.getValueOrDefault(s._incrementallyLoadTextures,e,sEe),scene:this._scene}),d.id=a,i.add(d),u={modelPrimitive:d,url:c.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFail:!1,awaitingSampleTerrain:!1,clampedBoundingSphere:void 0,sampleTerrainFailed:!1},n[a.id]=u,CEe(d,a,n)),d.show=!0,d.scale=aN.getValueOrDefault(s._scale,e,rEe),d.minimumPixelSize=aN.getValueOrDefault(s._minimumPixelSize,e,aEe),d.maximumScale=aN.getValueOrUndefined(s._maximumScale,e),d.modelMatrix=Me.clone(l,d.modelMatrix),d.shadows=aN.getValueOrDefault(s._shadows,e,lEe),d.heightReference=aN.getValueOrDefault(s._heightReference,e,uEe),d.distanceDisplayCondition=aN.getValueOrUndefined(s._distanceDisplayCondition,e),d.silhouetteColor=aN.getValueOrDefault(s._silhouetteColor,e,hEe,yEe),d.silhouetteSize=aN.getValueOrDefault(s._silhouetteSize,e,dEe),d.color=aN.getValueOrDefault(s._color,e,fEe,yEe),d.colorBlendMode=aN.getValueOrDefault(s._colorBlendMode,e,pEe),d.colorBlendAmount=aN.getValueOrDefault(s._colorBlendAmount,e,mEe),d.clippingPlanes=aN.getValueOrUndefined(s._clippingPlanes,e),d.clampAnimations=aN.getValueOrDefault(s._clampAnimations,e,cEe),d.imageBasedLighting.imageBasedLightingFactor=aN.getValueOrDefault(s._imageBasedLightingFactor,e,_Ee),d.lightColor=aN.getValueOrUndefined(s._lightColor,e),d.customShader=aN.getValueOrUndefined(s._customShader,e),d.ready){const t=aN.getValueOrDefault(s._runAnimations,e,!0);u.animationsRunning!==t&&(t?d.activeAnimations.addAll({loop:r4.REPEAT}):d.activeAnimations.removeAll(),u.animationsRunning=t);const n=aN.getValueOrUndefined(s._nodeTransformations,e,u.nodeTransformationsScratch);if(Object(r["a"])(n)){const e=Object.keys(n);for(let t=0,i=e.length;t<i;++t){const i=e[t],o=n[i];if(!Object(r["a"])(o))continue;const a=d.getNode(i);if(!Object(r["a"])(a))continue;const s=Me.fromTranslationRotationScale(o,bEe);a.matrix=Me.multiply(a.originalMatrix,s,s)}}let i=!1;const o=aN.getValueOrUndefined(s._articulations,e,u.articulationsScratch);if(Object(r["a"])(o)){const e=Object.keys(o);for(let t=0,n=e.length;t<n;++t){const n=e[t],a=o[n];Object(r["a"])(a)&&(i=!0,d.setArticulationStage(n,a))}}i&&d.applyArticulations()}}return!0},vEe.prototype.isDestroyed=function(){return!1},vEe.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(vEe.prototype._onCollectionChanged,this);const e=this._entitiesToVisualize.values,t=this._modelHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)wEe(this,e[i],t,n);return Wc(this)},vEe._sampleTerrainMostDetailed=NM;const OEe=new g,AEe=new I;function wEe(e,t,n,i){const o=n[t.id];Object(r["a"])(o)&&(i.removeAndDestroy(o.modelPrimitive),delete n[t.id])}function TEe(e,t){const n=t[e.id];Object(r["a"])(n)&&(n.nodeTransformationsScratch={},n.articulationsScratch={})}function CEe(e,t,n){e.readyPromise.catch((function(e){console.error(e),n[t.id].loadFail=!0}))}vEe.prototype.getBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");if(!Object(r["a"])(t))throw new a["a"]("result is required.");const n=this._modelHash[e.id];if(!Object(r["a"])(n)||n.loadFail)return oN.FAILED;const i=n.modelPrimitive;if(!Object(r["a"])(i)||!i.show)return oN.FAILED;if(!i.ready)return oN.PENDING;const o=this._scene,s=o.globe,c=s.ellipsoid,l=s.terrainProvider,u=i.heightReference!==QM.NONE;if(u){if(!l.ready)return oN.PENDING;const n=i.modelMatrix;OEe.x=n[12],OEe.y=n[13],OEe.z=n[14];const o=c.cartesianToCartographic(OEe);if(!Object(r["a"])(l.availability)){i.heightReference===QM.CLAMP_TO_GROUND&&(o.height=0);const e=c.cartographicToCartesian(o);return Tt.clone(i.boundingSphere,t),t.center=e,oN.DONE}let a=this._modelHash[e.id].clampedBoundingSphere;const s=this._modelHash[e.id].sampleTerrainFailed;if(s)return this._modelHash[e.id].sampleTerrainFailed=!1,oN.FAILED;if(!Object(r["a"])(a)){a=new Tt;const t=this._modelHash[e.id].awaitingSampleTerrain;return t||(I.clone(o,AEe),this._modelHash[e.id].awaitingSampleTerrain=!0,vEe._sampleTerrainMostDetailed(l,[AEe]).then(t=>{this._modelHash[e.id].awaitingSampleTerrain=!1;const n=t[0];i.heightReference===QM.RELATIVE_TO_GROUND&&(n.height+=o.height),c.cartographicToCartesian(n,OEe),Tt.clone(i.boundingSphere,a),a.center=OEe,this._modelHash[e.id].clampedBoundingSphere=Tt.clone(a)}).catch(t=>{this._modelHash[e.id].sampleTerrainFailed=!0,this._modelHash[e.id].awaitingSampleTerrain=!1})),oN.PENDING}return Tt.clone(a,t),oN.DONE}return Tt.clone(i.boundingSphere,t),oN.DONE},vEe.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._entitiesToVisualize,c=this._modelHash,l=this._primitives;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._model)&&Object(r["a"])(a._position)&&s.set(a.id,a);for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._model)&&Object(r["a"])(a._position)?(TEe(a,c),s.set(a.id,a)):(wEe(this,a,c,l),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],wEe(this,a,c,l),s.remove(a.id)};var EEe=vEe;function xEe(e){this._definitionChanged=new dn["a"],this._value=void 0,this._removeSubscription=void 0,this.setValue(e)}Object.defineProperties(xEe.prototype,{isConstant:{get:function(){return aN.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return Object(r["a"])(this._value)?this._value.referenceFrame:iD.FIXED}}}),xEe.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,iD.FIXED,t)},xEe.prototype.setValue=function(e){this._value!==e&&(this._value=e,Object(r["a"])(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),Object(r["a"])(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},xEe.prototype.getValueInReferenceFrame=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!Object(r["a"])(t))throw new a["a"]("referenceFrame is required.");if(Object(r["a"])(this._value))return n=this._value.getValueInReferenceFrame(e,t,n),Object(r["a"])(n)?k.WGS84.scaleToGeodeticSurface(n,n):void 0},xEe.prototype.equals=function(e){return this===e||e instanceof xEe&&this._value===e._value},xEe.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var SEe=xEe;const IEe=60,DEe=1,PEe=new ZC,jEe=new ZC,REe=new ZC;function LEe(e){this.entity=e,this.polyline=void 0,this.index=void 0,this.updater=void 0}function MEe(e,t,n,i,o,a,s,c,l){let u,h=c;u=e.getValueInReferenceFrame(t,a,l[h]),Object(r["a"])(u)&&(l[h++]=u);let d=!Object(r["a"])(o)||mo.lessThanOrEquals(o,t)||mo.greaterThanOrEquals(o,n),f=0;const p=i.length;let m=i[f];const _=n;let g,b,y,v=!1;while(f<p){if(!d&&mo.greaterThanOrEquals(m,o)&&(u=e.getValueInReferenceFrame(o,a,l[h]),Object(r["a"])(u)&&(l[h++]=u),d=!0),mo.greaterThan(m,t)&&mo.lessThan(m,_)&&!m.equals(o)&&(u=e.getValueInReferenceFrame(m,a,l[h]),Object(r["a"])(u)&&(l[h++]=u)),f<p-1){if(s>0&&!v){const e=i[f+1],t=mo.secondsDifference(e,m);v=t>s,v&&(g=Math.ceil(t/s),b=0,y=t/Math.max(g,2),g=Math.max(g-1,1))}if(v&&b<g){m=mo.addSeconds(m,y,new mo),b++;continue}}v=!1,f++,m=i[f]}return u=e.getValueInReferenceFrame(n,a,l[h]),Object(r["a"])(u)&&(l[h++]=u),h}function NEe(e,t,n,i,o,a,s,c){let l,u=0,h=s,d=t;const f=Math.max(a,60);let p=!Object(r["a"])(i)||mo.lessThanOrEquals(i,t)||mo.greaterThanOrEquals(i,n);while(mo.lessThan(d,n))!p&&mo.greaterThanOrEquals(d,i)&&(p=!0,l=e.getValueInReferenceFrame(i,o,c[h]),Object(r["a"])(l)&&(c[h]=l,h++)),l=e.getValueInReferenceFrame(d,o,c[h]),Object(r["a"])(l)&&(c[h]=l,h++),u++,d=mo.addSeconds(t,f*u,new mo);return l=e.getValueInReferenceFrame(n,o,c[h]),Object(r["a"])(l)&&(c[h]=l,h++),h}function BEe(e,t,n,i,o,a,s,c){REe.start=t,REe.stop=n;let l=s;const u=e.intervals;for(let h=0;h<u.length;h++){const t=u.get(h);if(!ZC.intersect(t,REe,PEe).isEmpty){let n=t.start;t.isStartIncluded||(n=t.isStopIncluded?t.stop:mo.addSeconds(t.start,mo.secondsDifference(t.stop,t.start)/2,new mo));const i=e.getValueInReferenceFrame(n,o,c[l]);Object(r["a"])(i)&&(c[l]=i,l++)}}return l}function FEe(e,t,n,i,o,a,s,c){const l=e.getValueInReferenceFrame(t,o,c[s]);return Object(r["a"])(l)&&(c[s++]=l),s}function zEe(e,t,n,i,o,r,a,s){jEe.start=t,jEe.stop=n;let c=a;const l=e.intervals;for(let u=0;u<l.length;u++){const e=l.get(u);if(!ZC.intersect(e,jEe,PEe).isEmpty){const a=e.start,l=e.stop;let u=t;mo.greaterThan(a,u)&&(u=a);let h=n;mo.lessThan(l,h)&&(h=l),c=kEe(e.data,u,h,i,o,r,c,s)}}return c}function kEe(e,t,n,i,o,r,a,s){while(e instanceof Qve)e=e.resolvedProperty;if(e instanceof hOe){const c=e._property._times;a=MEe(e,t,n,c,i,o,r,a,s)}else a=e instanceof xbe?zEe(e,t,n,i,o,r,a,s):e instanceof AOe?BEe(e,t,n,i,o,r,a,s):e instanceof Sq||e instanceof SEe&&aN.isConstant(e)?FEe(e,t,n,i,o,r,a,s):NEe(e,t,n,i,o,r,a,s);return a}function UEe(e,t,n,i,o,a,s){Object(r["a"])(s)||(s=[]);const c=kEe(e,t,n,i,o,a,0,s);return s.length=c,s}const VEe=new ce;function HEe(e,t){this._unusedIndexes=[],this._polylineCollection=new qhe,this._scene=e,this._referenceFrame=t,e.primitives.add(this._polylineCollection)}function GEe(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");if(!Object(r["a"])(t))throw new a["a"]("entityCollection is required.");t.collectionChanged.addEventListener(GEe.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=t,this._items=new pu,this._onCollectionChanged(t,t.values,[],[])}HEe.prototype.update=function(e){if(this._referenceFrame===iD.INERTIAL){let t=ka.computeIcrfToFixedMatrix(e,VEe);Object(r["a"])(t)||(t=ka.computeTemeToPseudoFixedMatrix(e,VEe)),Me.fromRotationTranslation(t,g.ZERO,this._polylineCollection.modelMatrix)}},HEe.prototype.updateObject=function(e,t){const n=t.entity,i=n._path,o=n._position;let a,s;const c=i._show;let l=t.polyline,u=n.isShowing&&n.isAvailable(e)&&(!Object(r["a"])(c)||c.getValue(e));if(u){const t=aN.getValueOrUndefined(i._leadTime,e),o=aN.getValueOrUndefined(i._trailTime,e),c=n._availability,l=Object(r["a"])(c),h=Object(r["a"])(t),d=Object(r["a"])(o);if(u=l||h&&d,u){if(d&&(a=mo.addSeconds(e,-o,new mo)),h&&(s=mo.addSeconds(e,t,new mo)),l){const e=c.start,t=c.stop;d&&!mo.greaterThan(e,a)||(a=e),h&&!mo.lessThan(t,s)||(s=t)}u=mo.lessThan(a,s)}}if(!u)return void(Object(r["a"])(l)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,l.show=!1,t.index=void 0));if(!Object(r["a"])(l)){const e=this._unusedIndexes,i=e.length;if(i>0){const n=e.pop();l=this._polylineCollection.get(n),t.index=n}else t.index=this._polylineCollection.length,l=this._polylineCollection.add();l.id=n,t.polyline=l}const h=aN.getValueOrDefault(i._resolution,e,IEe);l.show=!0,l.positions=UEe(o,a,s,e,this._referenceFrame,h,l.positions.slice()),l.material=VW.getValue(e,i._material,l.material),l.width=aN.getValueOrDefault(i._width,e,DEe),l.distanceDisplayCondition=aN.getValueOrUndefined(i._distanceDisplayCondition,e,l.distanceDisplayCondition)},HEe.prototype.removeObject=function(e){const t=e.polyline;Object(r["a"])(t)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,t.show=!1,t.id=void 0,e.index=void 0)},HEe.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),Wc(this)},GEe.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._updaters;for(const i in t)t.hasOwnProperty(i)&&t[i].update(e);const n=this._items.values;if(0===n.length&&Object(r["a"])(this._updaters)&&Object.keys(this._updaters).length>0){for(const e in t)t.hasOwnProperty(e)&&t[e].destroy();this._updaters={}}for(let i=0,o=n.length;i<o;i++){const t=n[i],o=t.entity,a=o._position,s=t.updater;let c=iD.FIXED;this._scene.mode===SH.SCENE3D&&(c=a.referenceFrame);let l=this._updaters[c];s===l&&Object(r["a"])(l)?l.updateObject(e,t):(Object(r["a"])(s)&&s.removeObject(t),Object(r["a"])(l)||(l=new HEe(this._scene,c),l.update(e),this._updaters[c]=l),t.updater=l,Object(r["a"])(l)&&l.updateObject(e,t))}return!0},GEe.prototype.isDestroyed=function(){return!1},GEe.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(GEe.prototype._onCollectionChanged,this);const e=this._updaters;for(const t in e)e.hasOwnProperty(t)&&e[t].destroy();return Wc(this)},GEe.prototype._onCollectionChanged=function(e,t,n,i){let o,a,s;const c=this._items;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._path)&&Object(r["a"])(a._position)&&c.set(a.id,new LEe(a));for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._path)&&Object(r["a"])(a._position)?c.contains(a.id)||c.set(a.id,new LEe(a)):(s=c.get(a.id),Object(r["a"])(s)&&(Object(r["a"])(s.updater)&&s.updater.removeObject(s),c.remove(a.id)));for(o=n.length-1;o>-1;o--)a=n[o],s=c.get(a.id),Object(r["a"])(s)&&(Object(r["a"])(s.updater)&&s.updater.removeObject(s),c.remove(a.id))},GEe._subSample=UEe;var WEe=GEe;const qEe=Dm.WHITE,YEe=Dm.BLACK,XEe=0,KEe=1,$Ee=0,JEe=new Dm,QEe=new g,ZEe=new Dm,exe=new xE,txe=new xE,nxe=new Sv;function ixe(e){this.entity=e,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function oxe(e,t){if(!Object(r["a"])(e))throw new a["a"]("entityCluster is required.");if(!Object(r["a"])(t))throw new a["a"]("entityCollection is required.");t.collectionChanged.addEventListener(oxe.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=t,this._items=new pu,this._onCollectionChanged(t,t.values,[],[])}function rxe(e,t,n){if(Object(r["a"])(e)){const i=e.pointPrimitive;if(Object(r["a"])(i))return e.pointPrimitive=void 0,void n.removePoint(t);const o=e.billboard;Object(r["a"])(o)&&(e.billboard=void 0,n.removeBillboard(t))}}oxe.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");const t=this._items.values,n=this._cluster;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.entity,s=a._point;let c=o.pointPrimitive,l=o.billboard;const u=aN.getValueOrDefault(s._heightReference,e,QM.NONE);let h,d=a.isShowing&&a.isAvailable(e)&&aN.getValueOrDefault(s._show,e,!0);if(d&&(h=aN.getValueOrUndefined(a._position,e,QEe),d=Object(r["a"])(h)),!d){rxe(o,a,n);continue}aN.isConstant(a._position)||(n._clusterDirty=!0);let f=!1,p=!1;if(u===QM.NONE||Object(r["a"])(l)?u!==QM.NONE||Object(r["a"])(c)||(Object(r["a"])(l)&&(rxe(o,a,n),l=void 0),c=n.getPoint(a),c.id=a,o.pointPrimitive=c):(Object(r["a"])(c)&&(rxe(o,a,n),c=void 0),l=n.getBillboard(a),l.id=a,l.image=void 0,o.billboard=l,f=!0,p=g.equals(l.position,h)&&l.heightReference===u),Object(r["a"])(c))c.show=!0,c.position=h,c.scaleByDistance=aN.getValueOrUndefined(s._scaleByDistance,e,exe),c.translucencyByDistance=aN.getValueOrUndefined(s._translucencyByDistance,e,txe),c.color=aN.getValueOrDefault(s._color,e,qEe,JEe),c.outlineColor=aN.getValueOrDefault(s._outlineColor,e,YEe,ZEe),c.outlineWidth=aN.getValueOrDefault(s._outlineWidth,e,XEe),c.pixelSize=aN.getValueOrDefault(s._pixelSize,e,KEe),c.distanceDisplayCondition=aN.getValueOrUndefined(s._distanceDisplayCondition,e,nxe),c.disableDepthTestDistance=aN.getValueOrDefault(s._disableDepthTestDistance,e,$Ee);else if(Object(r["a"])(l)){l.show=!0,l.position=h,l.scaleByDistance=aN.getValueOrUndefined(s._scaleByDistance,e,exe),l.translucencyByDistance=aN.getValueOrUndefined(s._translucencyByDistance,e,txe),l.distanceDisplayCondition=aN.getValueOrUndefined(s._distanceDisplayCondition,e,nxe),l.disableDepthTestDistance=aN.getValueOrDefault(s._disableDepthTestDistance,e,$Ee),l.heightReference=u;const t=aN.getValueOrDefault(s._color,e,qEe,JEe),n=aN.getValueOrDefault(s._outlineColor,e,YEe,ZEe),i=Math.round(aN.getValueOrDefault(s._outlineWidth,e,XEe));let r=Math.max(1,Math.round(aN.getValueOrDefault(s._pixelSize,e,KEe)));if(i>0?(l.scale=1,f=f||i!==o.outlineWidth||r!==o.pixelSize||!Dm.equals(t,o.color)||!Dm.equals(n,o.outlineColor)):(l.scale=r/50,r=50,f=f||i!==o.outlineWidth||!Dm.equals(t,o.color)||!Dm.equals(n,o.outlineColor)),f){o.color=Dm.clone(t,o.color),o.outlineColor=Dm.clone(n,o.outlineColor),o.pixelSize=r,o.outlineWidth=i;const e=t.alpha,a=t.toCssColorString(),s=n.toCssColorString(),c=JSON.stringify([a,r,s,i]);l.setImage(c,Wle(e,a,s,i,r))}p&&l._updateClamping()}}return!0},oxe.prototype.getBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required.");if(!Object(r["a"])(t))throw new a["a"]("result is required.");const n=this._items.get(e.id);if(!Object(r["a"])(n)||!Object(r["a"])(n.pointPrimitive)&&!Object(r["a"])(n.billboard))return oN.FAILED;if(Object(r["a"])(n.pointPrimitive))t.center=g.clone(n.pointPrimitive.position,t.center);else{const e=n.billboard;if(!Object(r["a"])(e._clampedPosition))return oN.PENDING;t.center=g.clone(e._clampedPosition,t.center)}return t.radius=0,oN.DONE},oxe.prototype.isDestroyed=function(){return!1},oxe.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(oxe.prototype._onCollectionChanged,this);const e=this._entityCollection.values;for(let t=0;t<e.length;t++)this._cluster.removePoint(e[t]);return Wc(this)},oxe.prototype._onCollectionChanged=function(e,t,n,i){let o,a;const s=this._items,c=this._cluster;for(o=t.length-1;o>-1;o--)a=t[o],Object(r["a"])(a._point)&&Object(r["a"])(a._position)&&s.set(a.id,new ixe(a));for(o=i.length-1;o>-1;o--)a=i[o],Object(r["a"])(a._point)&&Object(r["a"])(a._position)?s.contains(a.id)||s.set(a.id,new ixe(a)):(rxe(s.get(a.id),a,c),s.remove(a.id));for(o=n.length-1;o>-1;o--)a=n[o],rxe(s.get(a.id),a,c),s.remove(a.id)};var axe=oxe;const sxe=new GM(0),cxe={},lxe=new Dm,uxe=new oF(Dm.WHITE),hxe=new GM(!0),dxe=new GM(DH.DISABLED),fxe=new GM(new Sv),pxe=new GM(DV.BOTH);function mxe(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function _xe(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function gxe(e,t){if(!Object(r["a"])(e))throw new a["a"]("entity is required");if(!Object(r["a"])(t))throw new a["a"]("scene is required");this._entity=e,this._scene=t,this._entitySubscription=e.definitionChanged.addEventListener(gxe.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new dn["a"],this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new mxe,this._groundGeometryOptions=new _xe,this._id=`polyline-${e.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=SY.supportsPolylinesOnTerrain(t),this._zIndex=0,this._onEntityPropertyChanged(e,"polyline",e.polyline,void 0)}Object.defineProperties(gxe.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!Object(r["a"])(this._entity.availability)&&aN.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),gxe.prototype.isOutlineVisible=function(e){return!1},gxe.prototype.isFilled=function(e){const t=this._entity,n=this._fillEnabled&&t.isAvailable(e)&&this._showProperty.getValue(e);return Object(o["a"])(n,!1)},gxe.prototype.createFillGeometryInstance=function(e){if(!Object(r["a"])(e))throw new a["a"]("time is required.");if(!this._fillEnabled)throw new a["a"]("This instance does not represent a filled geometry.");const t=this._entity,n=t.isAvailable(e),i=new wP(n&&t.isShowing&&this._showProperty.getValue(e)),o=this._distanceDisplayConditionProperty.getValue(e),s=Dv.fromDistanceDisplayCondition(o),c={show:i,distanceDisplayCondition:s};let l;return this._materialProperty instanceof oF&&(Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(l=this._materialProperty.color.getValue(e,lxe)),Object(r["a"])(l)||(l=Dm.WHITE),c.color=jm.fromColor(l)),this.clampToGround?new Sd({id:t,geometry:new KT(this._groundGeometryOptions),attributes:c}):(Object(r["a"])(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof oF&&(Object(r["a"])(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||n)&&(l=this._depthFailMaterialProperty.color.getValue(e,lxe)),Object(r["a"])(l)||(l=Dm.WHITE),c.depthFailColor=jm.fromColor(l)),new Sd({id:t,geometry:new CS(this._geometryOptions),attributes:c}))},gxe.prototype.createOutlineGeometryInstance=function(e){throw new a["a"]("This instance does not represent an outlined geometry.")},gxe.prototype.isDestroyed=function(){return!1},gxe.prototype.destroy=function(){this._entitySubscription(),Wc(this)},gxe.prototype._onEntityPropertyChanged=function(e,t,n,i){if("availability"!==t&&"polyline"!==t)return;const a=this._entity.polyline;if(!Object(r["a"])(a))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const s=a.positions,c=a.show;if(Object(r["a"])(c)&&c.isConstant&&!c.getValue(oE.MINIMUM_VALUE)||!Object(r["a"])(s))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const l=a.zIndex,u=Object(o["a"])(a.material,uxe),h=u instanceof oF;this._materialProperty=u,this._depthFailMaterialProperty=a.depthFailMaterial,this._showProperty=Object(o["a"])(c,hxe),this._shadowsProperty=Object(o["a"])(a.shadows,dxe),this._distanceDisplayConditionProperty=Object(o["a"])(a.distanceDisplayCondition,fxe),this._classificationTypeProperty=Object(o["a"])(a.classificationType,pxe),this._fillEnabled=!0,this._zIndex=Object(o["a"])(l,sxe);const d=a.width,f=a.arcType,p=a.clampToGround,m=a.granularity;if(s.isConstant&&aN.isConstant(d)&&aN.isConstant(f)&&aN.isConstant(m)&&aN.isConstant(p)&&aN.isConstant(l)){const e=this._geometryOptions,t=s.getValue(oE.MINIMUM_VALUE,e.positions);if(!Object(r["a"])(t)||t.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));let n;n=h&&(!Object(r["a"])(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof oF)?eq.VERTEX_FORMAT:aq.VERTEX_FORMAT,e.vertexFormat=n,e.positions=t,e.width=Object(r["a"])(d)?d.getValue(oE.MINIMUM_VALUE):void 0,e.arcType=Object(r["a"])(f)?f.getValue(oE.MINIMUM_VALUE):void 0,e.granularity=Object(r["a"])(m)?m.getValue(oE.MINIMUM_VALUE):void 0;const i=this._groundGeometryOptions;i.positions=t,i.width=e.width,i.arcType=e.arcType,i.granularity=e.granularity,this._clampToGround=!!Object(r["a"])(p)&&p.getValue(oE.MINIMUM_VALUE),!this._clampToGround&&Object(r["a"])(l)&&ab("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))},gxe.prototype.createDynamicUpdater=function(e,t){if(i["a"].defined("primitives",e),i["a"].defined("groundPrimitives",t),!this._dynamic)throw new a["a"]("This instance does not represent dynamic geometry.");return new yxe(e,t,this)};const bxe={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function yxe(e,t,n){this._line=void 0,this._primitives=e,this._groundPrimitives=t,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=n,this._positions=[]}function vxe(e){if(Object(r["a"])(e._line))return e._line;const t=e._geometryUpdater._scene.id;let n=cxe[t];const i=e._primitives;!Object(r["a"])(n)||n.isDestroyed()?(n=new qhe,cxe[t]=n,i.add(n)):i.contains(n)||i.add(n);const o=n.add();return o.id=e._geometryUpdater._entity,e._line=o,o}yxe.prototype.update=function(e){const t=this._geometryUpdater,n=t._entity,i=n.polyline,o=i.positions;let a=aN.getValueOrUndefined(o,e,this._positions);t._clampToGround=aN.getValueOrDefault(i._clampToGround,e,!1),t._groundGeometryOptions.positions=a,t._groundGeometryOptions.width=aN.getValueOrDefault(i._width,e,1),t._groundGeometryOptions.arcType=aN.getValueOrDefault(i._arcType,e,uu.GEODESIC),t._groundGeometryOptions.granularity=aN.getValueOrDefault(i._granularity,e,9999);const s=this._groundPrimitives;if(Object(r["a"])(this._groundPolylinePrimitive)&&(s.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),t.clampToGround){if(!n.isShowing||!n.isAvailable(e)||!aN.getValueOrDefault(i._show,e,!0))return;if(!Object(r["a"])(a)||a.length<2)return;const o=t.fillMaterialProperty;let c;if(o instanceof oF)c=new eq;else{const t=VW.getValue(e,o,this._material);c=new aq({material:t,translucent:t.isTranslucent()}),this._material=t}return this._groundPolylinePrimitive=s.add(new fq({geometryInstances:t.createFillGeometryInstance(e),appearance:c,classificationType:t.classificationTypeProperty.getValue(e),asynchronous:!1}),aN.getValueOrUndefined(t.zIndex,e)),void(Object(r["a"])(this._line)&&(this._line.show=!1))}const c=vxe(this);if(!n.isShowing||!n.isAvailable(e)||!aN.getValueOrDefault(i._show,e,!0))return void(c.show=!1);if(!Object(r["a"])(a)||a.length<2)return void(c.show=!1);let l=uu.GEODESIC;l=aN.getValueOrDefault(i._arcType,e,l);const u=t._scene.globe;l!==uu.NONE&&Object(r["a"])(u)&&(bxe.ellipsoid=u.ellipsoid,bxe.positions=a,bxe.granularity=aN.getValueOrUndefined(i._granularity,e),bxe.height=ib.extractHeights(a,u.ellipsoid),a=l===uu.GEODESIC?ib.generateCartesianArc(bxe):ib.generateCartesianRhumbArc(bxe)),c.show=!0,c.positions=a.slice(),c.material=VW.getValue(e,t.fillMaterialProperty,c.material),c.width=aN.getValueOrDefault(i._width,e,1),c.distanceDisplayCondition=aN.getValueOrUndefined(i._distanceDisplayCondition,e,c.distanceDisplayCondition)},yxe.prototype.getBoundingSphere=function(e){if(i["a"].defined("result",e),this._geometryUpdater.clampToGround){const t=this._groundPolylinePrimitive;if(Object(r["a"])(t)&&t.show&&t.ready){const n=t.getGeometryInstanceAttributes(this._geometryUpdater._entity);if(Object(r["a"])(n)&&Object(r["a"])(n.boundingSphere))return Tt.clone(n.boundingSphere,e),oN.DONE}return Object(r["a"])(t)&&!t.ready?oN.PENDING:oN.DONE}{const t=vxe(this);if(t.show&&t.positions.length>0)return Tt.fromPoints(t.positions,e),oN.DONE}return oN.FAILED},yxe.prototype.isDestroyed=function(){return!1},yxe.prototype.destroy=function(){const e=this._geometryUpdater,t=e._scene.id,n=cxe[t];Object(r["a"])(n)&&(n.remove(this._line),0===n.length&&(this._primitives.removeAndDestroy(n),delete cxe[t])),Object(r["a"])(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),Wc(this)};var Oxe=gxe;const Axe=new Dm,wxe=new Sv,Txe=new Sv;function Cxe(e,t,n,i,o){let r;r=n instanceof oF?eq:aq,this.orderedGroundPrimitives=e,this.classificationType=t,this.appearanceType=r,this.materialProperty=n,this.updaters=new pu,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new pu,this.material=void 0,this.updatersWithAttributes=new pu,this.attributes=new pu,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(Cxe.prototype.onMaterialChanged,this),this.subscriptions=new pu,this.showsUpdated=new pu,this.zIndex=i,this._asynchronous=o}function Exe(e,t,n){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=t,this._asynchronous=Object(o["a"])(n,!0)}Cxe.prototype.onMaterialChanged=function(){this.invalidated=!0},Cxe.prototype.isMaterial=function(e){const t=this.materialProperty,n=e.fillMaterialProperty;return n===t||n instanceof oF&&t instanceof oF||Object(r["a"])(t)&&t.equals(n)},Cxe.prototype.add=function(e,t,n){const i=t.id;if(this.updaters.set(i,t),this.geometry.set(i,n),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&aN.isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(n,i,o,r){"isShowing"===i&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t);this.createPrimitive=!0},Cxe.prototype.remove=function(e){const t=e.id;if(this.createPrimitive=this.geometry.remove(t)||this.createPrimitive,this.updaters.remove(t)){this.updatersWithAttributes.remove(t);const e=this.subscriptions.get(t);return Object(r["a"])(e)&&(e(),this.subscriptions.remove(t)),!0}return!1},Cxe.prototype.update=function(e){let t=!0,n=this.primitive;const i=this.orderedGroundPrimitives,o=this.geometry.values;let a;if(this.createPrimitive){const a=o.length;if(a>0)Object(r["a"])(n)&&(Object(r["a"])(this.oldPrimitive)?i.remove(n):this.oldPrimitive=n),n=new fq({show:!1,asynchronous:this._asynchronous,geometryInstances:o.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===aq&&(this.material=VW.getValue(e,this.materialProperty,this.material),n.appearance.material=this.material),i.add(n,this.zIndex),t=!1;else{Object(r["a"])(n)&&(i.remove(n),n=void 0);const e=this.oldPrimitive;Object(r["a"])(e)&&(i.remove(e),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=n,this.createPrimitive=!1}else if(Object(r["a"])(n)&&n.ready){n.show=!0,Object(r["a"])(this.oldPrimitive)&&(i.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===aq&&(this.material=VW.getValue(e,this.materialProperty,this.material),this.primitive.appearance.material=this.material);const t=this.updatersWithAttributes.values,o=t.length;for(a=0;a<o;a++){const i=t[a],o=i.entity,s=this.geometry.get(i.id);let c=this.attributes.get(s.id.id);if(Object(r["a"])(c)||(c=n.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,c)),!i.fillMaterialProperty.isConstant){const t=i.fillMaterialProperty.color,n=aN.getValueOrDefault(t,e,Dm.WHITE,Axe);Dm.equals(c._lastColor,n)||(c._lastColor=Dm.clone(n,c._lastColor),c.color=jm.toValue(n,c.color))}const l=o.isShowing&&(i.hasConstantFill||i.isFilled(e)),u=1===c.show[0];l!==u&&(c.show=wP.toValue(l,c.show));const h=i.distanceDisplayConditionProperty;if(!aN.isConstant(h)){const t=aN.getValueOrDefault(h,e,Txe,wxe);Sv.equals(t,c._lastDistanceDisplayCondition)||(c._lastDistanceDisplayCondition=Sv.clone(t,c._lastDistanceDisplayCondition),c.distanceDisplayCondition=Dv.toValue(t,c.distanceDisplayCondition))}}this.updateShows(n)}else Object(r["a"])(n)&&!n.ready&&(t=!1);return t},Cxe.prototype.updateShows=function(e){const t=this.showsUpdated.values,n=t.length;for(let i=0;i<n;i++){const n=t[i],o=n.entity,a=this.geometry.get(n.id);let s=this.attributes.get(a.id.id);Object(r["a"])(s)||(s=e.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));const c=o.isShowing,l=1===s.show[0];c!==l&&(s.show=wP.toValue(c,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},Cxe.prototype.contains=function(e){return this.updaters.contains(e.id)},Cxe.prototype.getBoundingSphere=function(e,t){const n=this.primitive;if(!n.ready)return oN.PENDING;const i=n.getGeometryInstanceAttributes(e.entity);return!Object(r["a"])(i)||!Object(r["a"])(i.boundingSphere)||Object(r["a"])(i.show)&&0===i.show[0]?oN.FAILED:(i.boundingSphere.clone(t),oN.DONE)},Cxe.prototype.destroy=function(){const e=this.primitive,t=this.orderedGroundPrimitives;Object(r["a"])(e)&&t.remove(e);const n=this.oldPrimitive;Object(r["a"])(n)&&t.remove(n),this.removeMaterialSubscription()},Exe.prototype.add=function(e,t){const n=this._items,i=n.length,o=t.createFillGeometryInstance(e),r=aN.getValueOrDefault(t.zIndex,0);for(let s=0;s<i;++s){const i=n[s];if(i.isMaterial(t)&&i.zIndex===r)return void i.add(e,t,o)}const a=new Cxe(this._orderedGroundPrimitives,this._classificationType,t.fillMaterialProperty,r,this._asynchronous);a.add(e,t,o),n.push(a)},Exe.prototype.remove=function(e){const t=this._items,n=t.length;for(let i=n-1;i>=0;i--){const n=t[i];if(n.remove(e)){0===n.updaters.length&&(t.splice(i,1),n.destroy());break}}},Exe.prototype.update=function(e){let t;const n=this._items,i=n.length;for(t=i-1;t>=0;t--){const i=n[t];if(i.invalidated){n.splice(t,1);const o=i.updaters.values,r=o.length;for(let t=0;t<r;t++)this.add(e,o[t]);i.destroy()}}let o=!0;for(t=0;t<n.length;t++)o=n[t].update(e)&&o;return o},Exe.prototype.getBoundingSphere=function(e,t){const n=this._items,i=n.length;for(let o=0;o<i;o++){const i=n[o];if(i.contains(e))return i.getBoundingSphere(e,t)}return oN.FAILED},Exe.prototype.removeAllPrimitives=function(){const e=this._items,t=e.length;for(let n=0;n<t;n++)e[n].destroy();this._items.length=0};var xxe=Exe;const Sxe=[];function Ixe(e,t){const n=e._batches,i=n.length;for(let o=0;o<i;o++)n[o].remove(t)}function Dxe(e,t,n){if(n.isDynamic)return void e._dynamicBatch.add(t,n);if(n.clampToGround&&n.fillEnabled){const i=n.classificationTypeProperty.getValue(t);return void e._groundBatches[i].add(t,n)}let i;n.fillEnabled&&(i=n.shadowsProperty.getValue(t));let o,a=0;Object(r["a"])(n.depthFailMaterialProperty)&&(a=n.depthFailMaterialProperty instanceof oF?1:2),Object(r["a"])(i)&&(o=i+a*DH.NUMBER_OF_SHADOW_MODES),n.fillEnabled&&(n.fillMaterialProperty instanceof oF?e._colorBatches[o].add(t,n):e._materialBatches[o].add(t,n))}function Pxe(e,t,n,r){let a;i["a"].defined("scene",e),i["a"].defined("entityCollection",t),r=Object(o["a"])(r,e.groundPrimitives),n=Object(o["a"])(n,e.primitives),this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new pu,this._removedObjects=new pu,this._changedObjects=new pu;const s=DH.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*s),this._materialBatches=new Array(3*s),a=0;a<s;++a)this._colorBatches[a]=new GTe(n,eq,void 0,!1,a),this._materialBatches[a]=new QTe(n,aq,void 0,!1,a),this._colorBatches[a+s]=new GTe(n,eq,eq,!1,a),this._materialBatches[a+s]=new QTe(n,aq,eq,!1,a),this._colorBatches[a+2*s]=new GTe(n,eq,aq,!1,a),this._materialBatches[a+2*s]=new QTe(n,aq,aq,!1,a);this._dynamicBatch=new Cwe(n,r);const c=DV.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(c),a=0;a<c;++a)this._groundBatches[a]=new xxe(r,a);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new pu,this._updaters=new pu,this._entityCollection=t,t.collectionChanged.addEventListener(Pxe.prototype._onCollectionChanged,this),this._onCollectionChanged(t,t.values,Sxe)}Pxe.prototype.update=function(e){i["a"].defined("time",e);const t=this._addedObjects,n=t.values,o=this._removedObjects,r=o.values,a=this._changedObjects,s=a.values;let c,l,u,h;for(c=s.length-1;c>-1;c--)l=s[c],u=l.id,h=this._updaters.get(u),h.entity===l?(Ixe(this,h),Dxe(this,e,h)):(r.push(l),n.push(l));for(c=r.length-1;c>-1;c--)l=r[c],u=l.id,h=this._updaters.get(u),Ixe(this,h),h.destroy(),this._updaters.remove(u),this._subscriptions.get(u)(),this._subscriptions.remove(u);for(c=n.length-1;c>-1;c--)l=n[c],u=l.id,h=new Oxe(l,this._scene),this._updaters.set(u,h),Dxe(this,e,h),this._subscriptions.set(u,h.geometryChanged.addEventListener(Pxe._onGeometryChanged,this));t.removeAll(),o.removeAll(),a.removeAll();let d=!0;const f=this._batches,p=f.length;for(c=0;c<p;c++)d=f[c].update(e)&&d;return d};const jxe=[],Rxe=new Tt;Pxe.prototype.getBoundingSphere=function(e,t){i["a"].defined("entity",e),i["a"].defined("result",t);const n=jxe,o=Rxe;let r=0,a=oN.DONE;const s=this._batches,c=s.length,l=this._updaters.get(e.id);for(let i=0;i<c;i++){if(a=s[i].getBoundingSphere(l,o),a===oN.PENDING)return oN.PENDING;a===oN.DONE&&(n[r]=Tt.clone(o,n[r]),r++)}return 0===r?oN.FAILED:(n.length=r,Tt.fromBoundingSpheres(n,t),oN.DONE)},Pxe.prototype.isDestroyed=function(){return!1},Pxe.prototype.destroy=function(){let e;this._entityCollection.collectionChanged.removeEventListener(Pxe.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const t=this._batches;let n=t.length;for(e=0;e<n;e++)t[e].removeAllPrimitives();const i=this._subscriptions.values;for(n=i.length,e=0;e<n;e++)i[e]();return this._subscriptions.removeAll(),Wc(this)},Pxe._onGeometryChanged=function(e){const t=this._removedObjects,n=this._changedObjects,i=e.entity,o=i.id;Object(r["a"])(t.get(o))||Object(r["a"])(n.get(o))||n.set(o,i)},Pxe.prototype._onCollectionChanged=function(e,t,n){const i=this._addedObjects,o=this._removedObjects,r=this._changedObjects;let a,s,c;for(a=n.length-1;a>-1;a--)c=n[a],s=c.id,i.remove(s)||(o.set(s,c),r.remove(s));for(a=t.length-1;a>-1;a--)c=t[a],s=c.id,o.remove(s)?r.set(s,c):i.set(s,c)};var Lxe=Pxe;function Mxe(e){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.scene",e.scene),i["a"].typeOf.object("options.dataSourceCollection",e.dataSourceCollection),kW.initializeTerrainHeights(),fq.initializeTerrainHeights();const t=e.scene,n=e.dataSourceCollection;this._eventHelper=new gO,this._eventHelper.add(n.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(n.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(n.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(t.postRender,this._postRender,this),this._dataSourceCollection=n,this._scene=t,this._visualizersCallback=Object(o["a"])(e.visualizersCallback,Mxe.defaultVisualizersCallback);let r=!1;const a=new Owe,s=new Owe;n.length>0&&(t.primitives.add(a),t.groundPrimitives.add(s),r=!0),this._primitives=a,this._groundPrimitives=s;for(let i=0,o=n.length;i<o;i++)this._onDataSourceAdded(n,n.get(i));const c=new uve;let l,u;if(this._onDataSourceAdded(void 0,c),this._defaultDataSource=c,!r){const e=this,i=function(){t.primitives.add(a),t.groundPrimitives.add(s),l(),u(),e._removeDefaultDataSourceListener=void 0,e._removeDataSourceCollectionListener=void 0};l=c.entities.collectionChanged.addEventListener(i),u=n.dataSourceAdded.addEventListener(i)}this._removeDefaultDataSourceListener=l,this._removeDataSourceCollectionListener=u,this._ready=!1}Mxe.defaultVisualizersCallback=function(e,t,n){const i=n.entities;return[new IN(t,i),new ICe(e,i,n._primitives,n._groundPrimitives),new oEe(t,i),new EEe(e,i),new tbe(e,i),new axe(t,i),new WEe(e,i),new Lxe(e,i,n._primitives,n._groundPrimitives)]},Object.defineProperties(Mxe.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),Mxe.prototype.isDestroyed=function(){return!1},Mxe.prototype.destroy=function(){this._eventHelper.removeAll();const e=this._dataSourceCollection;for(let t=0,n=e.length;t<n;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),Object(r["a"])(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),Wc(this)},Mxe.prototype.update=function(e){if(i["a"].defined("time",e),!rn.initialized)return this._ready=!1,!1;let t,n,o,a,s=!0;const c=this._dataSourceCollection,l=c.length;for(t=0;t<l;t++){const i=c.get(t);for(Object(r["a"])(i.update)&&(s=i.update(e)&&s),o=i._visualizers,a=o.length,n=0;n<a;n++)s=o[n].update(e)&&s}for(o=this._defaultDataSource._visualizers,a=o.length,n=0;n<a;n++)s=o[n].update(e)&&s;return this._ready=s,s},Mxe.prototype._postRender=function(){const e=this._scene.frameState,t=this._dataSourceCollection,n=t.length;for(let i=0;i<n;i++){const n=t.get(i),o=n.credit;Object(r["a"])(o)&&e.creditDisplay.addCredit(o);const a=n._resourceCredits;if(Object(r["a"])(a)){const t=a.length;for(let n=0;n<t;n++)e.creditDisplay.addCredit(a[n])}}};const Nxe=[],Bxe=new Tt;Mxe.prototype.getBoundingSphere=function(e,t,n){if(i["a"].defined("entity",e),i["a"].typeOf.bool("allowPartial",t),i["a"].defined("result",n),!this._ready)return oN.PENDING;let o,a,s=this._defaultDataSource;if(!s.entities.contains(e)){s=void 0;const t=this._dataSourceCollection;for(a=t.length,o=0;o<a;o++){const n=t.get(o);if(n.entities.contains(e)){s=n;break}}}if(!Object(r["a"])(s))return oN.FAILED;const c=Nxe,l=Bxe;let u=0,h=oN.DONE;const d=s._visualizers,f=d.length;for(o=0;o<f;o++){const n=d[o];if(Object(r["a"])(n.getBoundingSphere)){if(h=d[o].getBoundingSphere(e,l),!t&&h===oN.PENDING)return oN.PENDING;h===oN.DONE&&(c[u]=Tt.clone(l,c[u]),u++)}}return 0===u?oN.FAILED:(c.length=u,Tt.fromBoundingSpheres(c,n),oN.DONE)},Mxe.prototype._onDataSourceAdded=function(e,t){const n=this._scene,i=this._primitives,o=this._groundPrimitives,r=i.add(new Owe),a=o.add(new wwe);t._primitives=r,t._groundPrimitives=a;const s=t.clustering;s._initialize(n),r.add(s),t._visualizers=this._visualizersCallback(n,s,t)},Mxe.prototype._onDataSourceRemoved=function(e,t){const n=this._primitives,i=this._groundPrimitives,o=t._primitives,r=t._groundPrimitives,a=t.clustering;o.remove(a);const s=t._visualizers,c=s.length;for(let l=0;l<c;l++)s[l].destroy();n.remove(o),i.remove(r),t._visualizers=void 0},Mxe.prototype._onDataSourceMoved=function(e,t,n){const i=this._primitives,o=this._groundPrimitives,r=e._primitives,a=e._groundPrimitives;t===n+1?(i.raise(r),o.raise(a)):t===n-1?(i.lower(r),o.lower(a)):0===t?(i.lowerToBottom(r),o.lowerToBottom(a),i.raise(r),o.raise(a)):(i.raiseToTop(r),o.raiseToTop(a))};var Fxe=Mxe;const zxe=new ce,kxe=new ce,Uxe=new ce,Vxe=new Me,Hxe=new g,Gxe=new g,Wxe=new g,qxe=new g,Yxe=new g,Xxe=new g,Kxe=new mo,$xe=1.25;function Jxe(e,t,n,i,o,a,c){const l=e.scene.mode;let u=o.getValue(a,e._lastCartesian);if(Object(r["a"])(u)){let n,h,d,f,p,m,_=!1,b=!1;if(l===SH.SCENE3D){mo.addSeconds(a,.001,Kxe);let e=o.getValue(Kxe,Hxe);if(Object(r["a"])(e)||(mo.addSeconds(a,-.001,Kxe),e=o.getValue(Kxe,Hxe),b=!0),Object(r["a"])(e)){let t,i=ka.computeFixedToIcrfMatrix(a,zxe),o=ka.computeFixedToIcrfMatrix(Kxe,kxe);Object(r["a"])(i)&&Object(r["a"])(o)?t=ce.transpose(i,Uxe):(t=ka.computeTemeToPseudoFixedMatrix(a,Uxe),i=ce.transpose(t,zxe),o=ka.computeTemeToPseudoFixedMatrix(Kxe,kxe),ce.transpose(o,o));const l=ce.multiplyByVector(i,u,Yxe),f=ce.multiplyByVector(o,e,Xxe);g.subtract(l,f,qxe);const p=1e3*g.magnitude(qxe),m=s["a"].GRAVITATIONALPARAMETER,y=-m/(p*p-2*m/g.magnitude(l));y<0||y>$xe*c.maximumRadius?(n=Gxe,g.normalize(u,n),g.negate(n,n),d=g.clone(g.UNIT_Z,Wxe),h=g.cross(d,n,Hxe),g.magnitude(h)>s["a"].EPSILON7&&(g.normalize(n,n),g.normalize(h,h),d=g.cross(n,h,Wxe),g.normalize(d,d),_=!0)):g.equalsEpsilon(u,e,s["a"].EPSILON7)||(d=Gxe,g.normalize(l,d),g.normalize(f,f),h=g.cross(d,f,Wxe),b&&(h=g.multiplyByScalar(h,-1,h)),g.equalsEpsilon(h,g.ZERO,s["a"].EPSILON7)||(n=g.cross(h,d,Hxe),ce.multiplyByVector(t,n,n),ce.multiplyByVector(t,h,h),ce.multiplyByVector(t,d,d),g.normalize(n,n),g.normalize(h,h),g.normalize(d,d),_=!0))}}Object(r["a"])(e.boundingSphere)&&(u=e.boundingSphere.center),i&&(f=g.clone(t.position,qxe),p=g.clone(t.direction,Yxe),m=g.clone(t.up,Xxe));const y=Vxe;_?(y[0]=n.x,y[1]=n.y,y[2]=n.z,y[3]=0,y[4]=h.x,y[5]=h.y,y[6]=h.z,y[7]=0,y[8]=d.x,y[9]=d.y,y[10]=d.z,y[11]=0,y[12]=u.x,y[13]=u.y,y[14]=u.z,y[15]=0):ka.eastNorthUpToFixedFrame(u,c,y),t._setTransform(y),i&&(g.clone(f,t.position),g.clone(p,t.direction),g.clone(m,t.up),g.cross(p,m,t.right))}if(n){const n=l===SH.SCENE2D||g.equals(e._offset3D,g.ZERO)?void 0:e._offset3D;t.lookAtTransform(t.transform,n)}}function Qxe(e,t,n){i["a"].defined("entity",e),i["a"].defined("scene",t),this.entity=e,this.scene=t,this.ellipsoid=Object(o["a"])(n,k.WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new g,this._defaultOffset3D=void 0,this._offset3D=new g}Object.defineProperties(Qxe,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(e){this._defaultOffset3D=g.clone(e,new g)}}}),Qxe.defaultOffset3D=new g(-14e3,3500,3500);const Zxe=new JT,eSe=new g;Qxe.prototype.update=function(e,t){i["a"].defined("time",e);const n=this.scene,o=this.ellipsoid,a=n.mode;if(a===SH.MORPHING)return;const c=this.entity,l=c.position;if(!Object(r["a"])(l))return;const u=c!==this._lastEntity,h=a!==this._mode,d=n.camera;let f=u||h,p=!0;if(u){const n=c.viewFrom,i=Object(r["a"])(n);if(!i&&Object(r["a"])(t)){Zxe.pitch=-s["a"].PI_OVER_FOUR,Zxe.range=0;const n=l.getValue(e,eSe);if(Object(r["a"])(n)){const e=2-1/Math.max(1,g.magnitude(n)/o.maximumRadius);Zxe.pitch*=e}d.viewBoundingSphere(t,Zxe),this.boundingSphere=t,f=!1,p=!1}else i&&Object(r["a"])(n.getValue(e,this._offset3D))||g.clone(Qxe._defaultOffset3D,this._offset3D)}else h||this._mode===SH.SCENE2D||g.clone(d.position,this._offset3D);this._lastEntity=c,this._mode=a,Jxe(this,d,f,p,l,e,o)};var tSe=Qxe,nSe=function(e){return e},iSe=function(e){if(null==e)return nSe;var t,n,i=e.scale[0],o=e.scale[1],r=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var c=2,l=e.length,u=new Array(l);u[0]=(t+=e[0])*i+r,u[1]=(n+=e[1])*o+a;while(c<l)u[c]=e[c],++c;return u}},oSe=function(e,t){var n,i=e.length,o=i-t;while(o<--i)n=e[o],e[o++]=e[i],e[i]=n},rSe=function(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return aSe(e,t)}))}:aSe(e,t)};function aSe(e,t){var n=t.id,i=t.bbox,o=null==t.properties?{}:t.properties,r=sSe(e,t);return null==n&&null==i?{type:"Feature",properties:o,geometry:r}:null==i?{type:"Feature",id:n,properties:o,geometry:r}:{type:"Feature",id:n,bbox:i,properties:o,geometry:r}}function sSe(e,t){var n=iSe(e.transform),i=e.arcs;function o(e,t){t.length&&t.pop();for(var o=i[e<0?~e:e],r=0,a=o.length;r<a;++r)t.push(n(o[r],r));e<0&&oSe(t,a)}function r(e){return n(e)}function a(e){for(var t=[],n=0,i=e.length;n<i;++n)o(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){var t=a(e);while(t.length<4)t.push(t[0]);return t}function c(e){return e.map(s)}function l(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(l)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=a(e.arcs);break;case"MultiLineString":t=e.arcs.map(a);break;case"Polygon":t=c(e.arcs);break;case"MultiPolygon":t=e.arcs.map(c);break;default:return null}return{type:n,coordinates:t}}return l(t)}function cSe(e){return g.fromDegrees(e[0],e[1],e[2])}const lSe={"urn:ogc:def:crs:OGC:1.3:CRS84":cSe,"EPSG:4326":cSe,"urn:ogc:def:crs:EPSG::4326":cSe},uSe={},hSe={};let dSe,fSe=48,pSe=Dm.ROYALBLUE,mSe=Dm.YELLOW,_Se=2,gSe=Dm.fromBytes(255,255,0,100),bSe=!1;const ySe={small:24,medium:48,large:64},vSe=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function OSe(e,t){let n="";for(const i in e)if(e.hasOwnProperty(i)){if(i===t||-1!==vSe.indexOf(i))continue;const o=e[i];Object(r["a"])(o)&&(n+="object"===typeof o?`<tr><th>${i}</th><td>${OSe(o)}</td></tr>`:`<tr><th>${i}</th><td>${o}</td></tr>`)}return n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function ASe(e,t,n){let i;return function(o,a){return Object(r["a"])(i)||(i=e(t,n)),i}}function wSe(e,t){return new kY(ASe(OSe,e,t),!0)}function TSe(e,t,n){let i=e.id;if(Object(r["a"])(i)&&"Feature"===e.type){let e=2,n=i;while(Object(r["a"])(t.getById(n)))n=`${i}_${e}`,e++;i=n}else i=ML();const o=t.getOrCreateEntity(i),a=e.properties;if(Object(r["a"])(a)){let e;o.properties=a;const t=a.title;if(Object(r["a"])(t))o.name=t,e="title";else{let t=Number.MAX_VALUE;for(const n in a)if(a.hasOwnProperty(n)&&a[n]){const i=n.toLowerCase();if(t>1&&"title"===i){t=1,e=n;break}t>2&&"name"===i?(t=2,e=n):t>3&&/title/i.test(n)?(t=3,e=n):t>4&&/name/i.test(n)&&(t=4,e=n)}Object(r["a"])(e)&&(o.name=a[e])}const i=a.description;null!==i&&(o.description=Object(r["a"])(i)?new GM(i):n(a,e))}return o}function CSe(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=t(e[i]);return n}const ESe={Feature:SSe,FeatureCollection:ISe,GeometryCollection:DSe,LineString:MSe,MultiLineString:NSe,MultiPoint:RSe,MultiPolygon:zSe,Point:jSe,Polygon:FSe,Topology:kSe},xSe={GeometryCollection:DSe,LineString:MSe,MultiLineString:NSe,MultiPoint:RSe,MultiPolygon:zSe,Point:jSe,Polygon:FSe,Topology:kSe};function SSe(e,t,n,i,o){if(null===t.geometry)return void TSe(t,e._entityCollection,o.describe);if(!Object(r["a"])(t.geometry))throw new ye["a"]("feature.geometry is required.");const a=t.geometry.type,s=xSe[a];if(!Object(r["a"])(s))throw new ye["a"](`Unknown geometry type: ${a}`);s(e,t,t.geometry,i,o)}function ISe(e,t,n,i,o){const r=t.features;for(let a=0,s=r.length;a<s;a++)SSe(e,r[a],void 0,i,o)}function DSe(e,t,n,i,o){const a=n.geometries;for(let s=0,c=a.length;s<c;s++){const n=a[s],c=n.type,l=xSe[c];if(!Object(r["a"])(l))throw new ye["a"](`Unknown geometry type: ${c}`);l(e,t,n,i,o)}}function PSe(e,t,n,i,a){let s=a.markerSymbol,c=a.markerColor,l=a.markerSize;const u=t.properties;if(Object(r["a"])(u)){const e=u["marker-color"];Object(r["a"])(e)&&(c=Dm.fromCssColorString(e)),l=Object(o["a"])(ySe[u["marker-size"]],l);const t=u["marker-symbol"];Object(r["a"])(t)&&(s=t)}let h;h=Object(r["a"])(s)?1===s.length?e._pinBuilder.fromText(s.toUpperCase(),c,l):e._pinBuilder.fromMakiIconId(s,c,l):e._pinBuilder.fromColor(c,l);const d=new $M;d.verticalOrigin=new GM(nN.BOTTOM),2===i.length&&a.clampToGround&&(d.heightReference=QM.CLAMP_TO_GROUND);const f=TSe(t,e._entityCollection,a.describe);f.billboard=d,f.position=new Sq(n(i));const p=Promise.resolve(h).then((function(e){d.image=new GM(e)})).catch((function(){d.image=new GM(e._pinBuilder.fromColor(c,l))}));e._promises.push(p)}function jSe(e,t,n,i,o){PSe(e,t,i,n.coordinates,o)}function RSe(e,t,n,i,o){const r=n.coordinates;for(let a=0;a<r.length;a++)PSe(e,t,i,r[a],o)}function LSe(e,t,n,i,o){let a=o.strokeMaterialProperty,s=o.strokeWidthProperty;const c=t.properties;if(Object(r["a"])(c)){const e=c["stroke-width"];let t;Object(r["a"])(e)&&(s=new GM(e));const n=c.stroke;Object(r["a"])(n)&&(t=Dm.fromCssColorString(n));const i=c["stroke-opacity"];Object(r["a"])(i)&&1!==i&&(Object(r["a"])(t)||(t=a.color.getValue().clone()),t.alpha=i),Object(r["a"])(t)&&(a=new oF(t))}const l=TSe(t,e._entityCollection,o.describe),u=new dY;l.polyline=u,u.clampToGround=o.clampToGround,u.material=a,u.width=s,u.positions=new GM(CSe(i,n)),u.arcType=uu.RHUMB}function MSe(e,t,n,i,o){LSe(e,t,i,n.coordinates,o)}function NSe(e,t,n,i,o){const r=n.coordinates;for(let a=0;a<r.length;a++)LSe(e,t,i,r[a],o)}function BSe(e,t,n,i,o){if(0===i.length||0===i[0].length)return;let a=o.strokeMaterialProperty.color,s=o.fillMaterialProperty,c=o.strokeWidthProperty;const l=t.properties;if(Object(r["a"])(l)){const e=l["stroke-width"];let t;Object(r["a"])(e)&&(c=new GM(e));const n=l.stroke;Object(r["a"])(n)&&(t=Dm.fromCssColorString(n));let i,o=l["stroke-opacity"];Object(r["a"])(o)&&1!==o&&(Object(r["a"])(t)||(t=a.getValue().clone()),t.alpha=o),Object(r["a"])(t)&&(a=new GM(t));const u=l.fill,h=s.color.getValue();Object(r["a"])(u)&&(i=Dm.fromCssColorString(u),i.alpha=h.alpha),o=l["fill-opacity"],Object(r["a"])(o)&&o!==h.alpha&&(Object(r["a"])(i)||(i=h.clone()),i.alpha=o),Object(r["a"])(i)&&(s=new oF(i))}const u=new uY;u.outline=new GM(!0),u.outlineColor=a,u.outlineWidth=c,u.material=s,u.arcType=uu.RHUMB;const h=[];for(let r=1,p=i.length;r<p;r++)h.push(new aS(CSe(i[r],n)));const d=i[0];u.hierarchy=new GM(new aS(CSe(d,n),h)),d[0].length>2?u.perPositionHeight=new GM(!0):o.clampToGround||(u.height=0);const f=TSe(t,e._entityCollection,o.describe);f.polygon=u}function FSe(e,t,n,i,o){BSe(e,t,i,n.coordinates,o)}function zSe(e,t,n,i,o){const r=n.coordinates;for(let a=0;a<r.length;a++)BSe(e,t,i,r[a],o)}function kSe(e,t,n,i,o){for(const r in n.objects)if(n.objects.hasOwnProperty(r)){const t=rSe(n,n.objects[r]),a=ESe[t.type];a(e,t,t,i,o)}}function USe(e){this._name=e,this._changed=new dn["a"],this._error=new dn["a"],this._isLoading=!1,this._loading=new dn["a"],this._entityCollection=new ube(this),this._promises=[],this._pinBuilder=new lx,this._entityCluster=new cve,this._credit=void 0,this._resourceCredits=[]}function VSe(e,t,n,i){if(!Object(r["a"])(t))throw new a["a"]("data is required.");kbe.setLoading(e,!0),n=Object(o["a"])(n,o["a"].EMPTY_OBJECT);let s=n.credit;"string"===typeof s&&(s=new hn(s)),e._credit=s;let c=t,l=n.sourceUri;if("string"===typeof t||t instanceof Et["a"]){t=Et["a"].createIfNeeded(t),c=t.fetchJson(),l=Object(o["a"])(l,t.getUrlComponent());const n=e._resourceCredits,i=t.credits;if(Object(r["a"])(i)){const e=i.length;for(let t=0;t<e;t++)n.push(i[t])}}return n={describe:Object(o["a"])(n.describe,wSe),markerSize:Object(o["a"])(n.markerSize,fSe),markerSymbol:Object(o["a"])(n.markerSymbol,dSe),markerColor:Object(o["a"])(n.markerColor,pSe),strokeWidthProperty:new GM(Object(o["a"])(n.strokeWidth,_Se)),strokeMaterialProperty:new oF(Object(o["a"])(n.stroke,mSe)),fillMaterialProperty:new oF(Object(o["a"])(n.fill,gSe)),clampToGround:Object(o["a"])(n.clampToGround,bSe)},Promise.resolve(c).then((function(t){return HSe(e,t,n,l,i)})).catch((function(t){throw kbe.setLoading(e,!1),e._error.raiseEvent(e,t),t}))}function HSe(e,t,n,i,o){let a;Object(r["a"])(i)&&(a=$L(i)),Object(r["a"])(a)&&e._name!==a&&(e._name=a,e._changed.raiseEvent(e));const s=ESe[t.type];if(!Object(r["a"])(s))throw new ye["a"](`Unsupported GeoJSON object type: ${t.type}`);const c=t.crs;let l=null!==c?cSe:null;if(Object(r["a"])(c)){if(!Object(r["a"])(c.properties))throw new ye["a"]("crs.properties is undefined.");const e=c.properties;if("name"===c.type){if(l=lSe[e.name],!Object(r["a"])(l))throw new ye["a"](`Unknown crs name: ${e.name}`)}else if("link"===c.type){let t=uSe[e.href];if(Object(r["a"])(t)||(t=hSe[e.type]),!Object(r["a"])(t))throw new ye["a"](`Unable to resolve crs link: ${JSON.stringify(e)}`);l=t(e)}else{if("EPSG"!==c.type)throw new ye["a"](`Unknown crs type: ${c.type}`);if(l=lSe[`EPSG:${e.code}`],!Object(r["a"])(l))throw new ye["a"](`Unknown crs EPSG code: ${e.code}`)}}return Promise.resolve(l).then((function(i){return o&&e._entityCollection.removeAll(),null!==i&&s(e,t,t,i,n),Promise.all(e._promises).then((function(){return e._promises.length=0,kbe.setLoading(e,!1),e}))}))}USe.load=function(e,t){return(new USe).load(e,t)},Object.defineProperties(USe,{markerSize:{get:function(){return fSe},set:function(e){fSe=e}},markerSymbol:{get:function(){return dSe},set:function(e){dSe=e}},markerColor:{get:function(){return pSe},set:function(e){pSe=e}},stroke:{get:function(){return mSe},set:function(e){mSe=e}},strokeWidth:{get:function(){return _Se},set:function(e){_Se=e}},fill:{get:function(){return gSe},set:function(e){gSe=e}},clampToGround:{get:function(){return bSe},set:function(e){bSe=e}},crsNames:{get:function(){return lSe}},crsLinkHrefs:{get:function(){return uSe}},crsLinkTypes:{get:function(){return hSe}}}),Object.defineProperties(USe.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),USe.prototype.load=function(e,t){return VSe(this,e,t,!0)},USe.prototype.process=function(e,t){return VSe(this,e,t,!1)},USe.prototype.update=function(e){return!0};var GSe=USe,WSe="3.16.0";function qSe(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}function YSe(e,t,n){var i;return e.length>t&&(null==n?(n="&hellip;",i=3):i=n.length,e=e.substring(0,t-i)+n),e}function XSe(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function KSe(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)}function $Se(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");var n,i=[],o=0;while(n=t.exec(e))i.push(e.substring(o,n.index)),i.push(n[0]),o=n.index+n[0].length;return i.push(e.substring(o)),i}function JSe(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var QSe=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){var n=this.getAttrs();return n[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){var t,n=this.getClass(),i=this.whitespaceRegex,o=n?n.split(i):[],r=e.split(i);while(t=r.shift())-1===XSe(o,t)&&o.push(t);return this.getAttrs()["class"]=o.join(" "),this},e.prototype.removeClass=function(e){var t,n=this.getClass(),i=this.whitespaceRegex,o=n?n.split(i):[],r=e.split(i);while(o.length&&(t=r.shift())){var a=XSe(o,t);-1!==a&&o.splice(a,1)}return this.getAttrs()["class"]=o.join(" "),this},e.prototype.getClass=function(){return this.getAttrs()["class"]||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return t=t?" "+t:"",["<",e,t,">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}();function ZSe(e,t,n){var i,o;null==n?(n="&hellip;",o=3,i=8):(o=n.length,i=n.length);var r=function(e){var t={},n=e,i=n.match(/^([a-z]+):\/\//i);return i&&(t.scheme=i[1],n=n.substr(i[0].length)),i=n.match(/^(.*?)(?=(\?|#|\/|$))/i),i&&(t.host=i[1],n=n.substr(i[0].length)),i=n.match(/^\/(.*?)(?=(\?|#|$))/i),i&&(t.path=i[1],n=n.substr(i[0].length)),i=n.match(/^\?(.*?)(?=(#|$))/i),i&&(t.query=i[1],n=n.substr(i[0].length)),i=n.match(/^#(.*?)$/i),i&&(t.fragment=i[1]),t},a=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},s=function(e,t){var i=t/2,o=Math.ceil(i),r=-1*Math.floor(i),a="";return r<0&&(a=e.substr(r)),e.substr(0,o)+n+a};if(e.length<=t)return e;var c=t-o,l=r(e);if(l.query){var u=l.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);u&&(l.query=l.query.substr(0,u[1].length),e=a(l))}if(e.length<=t)return e;if(l.host&&(l.host=l.host.replace(/^www\./,""),e=a(l)),e.length<=t)return e;var h="";if(l.host&&(h+=l.host),h.length>=c)return l.host.length==t?(l.host.substr(0,t-o)+n).substr(0,c+i):s(h,c).substr(0,c+i);var d="";if(l.path&&(d+="/"+l.path),l.query&&(d+="?"+l.query),d){if((h+d).length>=c){if((h+d).length==t)return(h+d).substr(0,t);var f=c-h.length;return(h+s(d,f)).substr(0,c+i)}h+=d}if(l.fragment){var p="#"+l.fragment;if((h+p).length>=c){if((h+p).length==t)return(h+p).substr(0,t);var m=c-h.length;return(h+s(p,m)).substr(0,c+i)}h+=p}if(l.scheme&&l.host){var _=l.scheme+"://";if((h+_).length<c)return(_+h).substr(0,t)}if(h.length<=t)return h;var g="";return c>0&&(g=h.substr(-1*Math.floor(c/2))),(h.substr(0,Math.ceil(c/2))+n+g).substr(0,c+i)}function eIe(e,t,n){if(e.length<=t)return e;var i,o;null==n?(n="&hellip;",i=8,o=3):(i=n.length,o=n.length);var r=t-o,a="";return r>0&&(a=e.substr(-1*Math.floor(r/2))),(e.substr(0,Math.ceil(r/2))+n+a).substr(0,r+i)}function tIe(e,t,n){return YSe(e,t,n)}var nIe=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new QSe({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t["class"]=n),this.newWindow&&(t["target"]="_blank",t["rel"]="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t["title"]=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],i=e.getCssClassSuffixes(),o=0,r=i.length;o<r;o++)n.push(t+"-"+i[o]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e),e},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,i=t.location;return"smart"===i?ZSe(e,n):"middle"===i?eIe(e,n):tIe(e,n)},e}(),iIe=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),oIe=function(e,t){return oIe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},oIe(e,t)};function rIe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}oIe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var aIe=function(){return aIe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},aIe.apply(this,arguments)};Object.create;Object.create;var sIe=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return rIe(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(iIe),cIe=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return rIe(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;case"tiktok":return"https://www.tiktok.com/tag/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(iIe),lIe=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return rIe(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(iIe),uIe=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return rIe(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(iIe),hIe=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return rIe(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){var e=this.getUrl();return e.replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(n){return t}},t}(iIe),dIe=function(){function e(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder}return e}(),fIe=/[A-Za-z]/,pIe=/[\d]/,mIe=/[\D]/,_Ie=/\s/,gIe=/['"]/,bIe=/[\x00-\x1F\x7F]/,yIe=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,vIe=/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source,OIe=/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,AIe=yIe+vIe+OIe,wIe=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,TIe=AIe+wIe,CIe=AIe+wIe,EIe="(?:["+wIe+"]{1,3}\\.){3}["+wIe+"]{1,3}",xIe="["+CIe+"](?:["+CIe+"\\-_]{0,61}["+CIe+"])?",SIe=function(e){return"(?=("+xIe+"))\\"+e},IIe=function(e){return"(?:"+SIe(e)+"(?:\\."+SIe(e+1)+"){0,126}|"+EIe+")"},DIe=(new RegExp("["+CIe+".\\-]*["+CIe+"\\-]"),new RegExp("[".concat(CIe,"]"))),PIe=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|travelchannel|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|موريتانيا|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|etisalat|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|اتصالات|البحرين|الجزائر|العليان|پاکستان|كاثوليك|இந்தியா|abarth|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|loans|locus|lotte|lotto|macys|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|ישראל|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|adac|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|アマゾン|グーグル|クラウド|ポイント|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ລາວ|ストア|セール|みんな|中文网|亚马逊|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|ευ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|广东|微博|慈善|手机|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/,jIe=new RegExp("[".concat(CIe,"!#$%&'*+/=?^_`{|}~-]")),RIe=new RegExp("^".concat(PIe.source,"$")),LIe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=jIe,t.strictTldRegex=RIe,t}return rIe(t,e),t.prototype.parseMatches=function(e){var t=this.tagBuilder,n=this.localPartCharRegex,i=this.strictTldRegex,o=[],r=e.length,a=new MIe,s={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},c=0,l=0,u=a;while(c<r){var h=e.charAt(c);switch(l){case 0:d(h);break;case 1:f(e.charAt(c-1),h);break;case 2:p(h);break;case 3:m(h);break;case 4:_(h);break;case 5:g(h);break;case 6:b(h);break;case 7:y(h);break;default:JSe(l)}c++}return A(),o;function d(e){"m"===e?v(1):n.test(e)&&v()}function f(e,t){":"===e?n.test(t)?(l=2,u=new MIe(aIe(aIe({},u),{hasMailtoPrefix:!0}))):O():s[e]===t||(n.test(t)?l=2:"."===t?l=3:"@"===t?l=4:O())}function p(e){"."===e?l=3:"@"===e?l=4:n.test(e)||O()}function m(e){"."===e||"@"===e?O():n.test(e)?l=2:O()}function _(e){DIe.test(e)?l=5:O()}function g(e){"."===e?l=7:"-"===e?l=6:DIe.test(e)||A()}function b(e){"-"===e||"."===e?A():DIe.test(e)?l=5:A()}function y(e){"."===e||"-"===e?A():DIe.test(e)?(l=5,u=new MIe(aIe(aIe({},u),{hasDomainDot:!0}))):A()}function v(e){void 0===e&&(e=2),l=e,u=new MIe({idx:c})}function O(){l=0,u=a}function A(){if(u.hasDomainDot){var n=e.slice(u.idx,c);/[-.]$/.test(n)&&(n=n.slice(0,-1));var r=u.hasMailtoPrefix?n.slice("mailto:".length):n;a(r)&&o.push(new sIe({tagBuilder:t,matchedText:n,offset:u.idx,email:r}))}function a(e){var t=e.split(".").pop()||"",n=t.toLowerCase(),o=i.test(n);return o}O()}},t}(dIe),MIe=function(){function e(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot}return e}(),NIe=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source),n=e.match(t);return null!==n},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!!e&&(!t||!this.hasFullProtocolRegex.test(t))&&-1===e.indexOf(".")},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&(!this.hasFullProtocolRegex.test(t)&&!this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+yIe+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),BIe=function(){var e=/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/,t=/(?:www\.)/,n=new RegExp("[/?#](?:["+CIe+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^✓]*["+CIe+"\\-+&@#/%=~_()|'$*\\[\\]{}✓])?");return new RegExp(["(?:","(",e.source,IIe(2),")","|","(","(//)?",t.source,IIe(6),")","|","(","(//)?",IIe(10)+"\\.",PIe.source,"(?![-"+TIe+"])",")",")","(?::[0-9]+)?","(?:"+n.source+")?"].join(""),"gi")}(),FIe=new RegExp("["+CIe+"]"),zIe=function(e){function t(t){var n=e.call(this,t)||this;return n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.matcherRegex=BIe,n.wordCharRegExp=FIe,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return rIe(t,e),t.prototype.parseMatches=function(e){var t,n=this.matcherRegex,i=this.stripPrefix,o=this.stripTrailingSlash,r=this.decodePercentEncoding,a=this.tagBuilder,s=[],c=function(){var n=t[0],c=t[1],u=t[4],h=t[5],d=t[9],f=t.index,p=h||d,m=e.charAt(f-1);if(!NIe.isValid(n,c))return"continue";if(f>0&&"@"===m)return"continue";if(f>0&&p&&l.wordCharRegExp.test(m))return"continue";if(/\?$/.test(n)&&(n=n.substr(0,n.length-1)),l.matchHasUnbalancedClosingParen(n))n=n.substr(0,n.length-1);else{var _=l.matchHasInvalidCharAfterTld(n,c);_>-1&&(n=n.substr(0,_))}var g=["http://","https://"].find((function(e){return!!c&&-1!==c.indexOf(e)}));if(g){var b=n.indexOf(g);n=n.substr(b),c=c.substr(b),f+=b}var y=c?"scheme":u?"www":"tld",v=!!c;s.push(new hIe({tagBuilder:a,matchedText:n,offset:f,urlMatchType:y,url:n,protocolUrlMatch:v,protocolRelativeMatch:!!p,stripPrefix:i,stripTrailingSlash:o,decodePercentEncoding:r}))},l=this;while(null!==(t=n.exec(e)))c();return s},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,n=e.charAt(e.length-1);if(")"===n)t="(";else if("]"===n)t="[";else{if("}"!==n)return!1;t="{"}for(var i=0,o=0,r=e.length-1;o<r;o++){var a=e.charAt(o);a===t?i++:a===n&&(i=Math.max(i-1,0))}return 0===i},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var i=new RegExp("^((.?//)?[-."+CIe+"]*[-"+CIe+"]\\.[-"+CIe+"]+)"),o=i.exec(e);return null===o?-1:(n+=o[1].length,e=e.slice(o[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(dIe),kIe=new RegExp("#[_".concat(CIe,"]{1,139}(?![_").concat(CIe,"])"),"g"),UIe=new RegExp("[^"+CIe+"]"),VIe=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=kIe,n.nonWordCharRegex=UIe,n.serviceName=t.serviceName,n}return rIe(t,e),t.prototype.parseMatches=function(e){var t,n=this.matcherRegex,i=this.nonWordCharRegex,o=this.serviceName,r=this.tagBuilder,a=[];while(null!==(t=n.exec(e))){var s=t.index,c=e.charAt(s-1);if(0===s||i.test(c)){var l=t[0],u=t[0].slice(1);a.push(new cIe({tagBuilder:r,matchedText:l,offset:s,serviceName:o,hashtag:u}))}}return a},t}(dIe),HIe=/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/,GIe=/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/,WIe=new RegExp("".concat(HIe.source,"|").concat(GIe.source),"g"),qIe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=WIe,t}return rIe(t,e),t.prototype.parseMatches=function(e){var t,n=this.matcherRegex,i=this.tagBuilder,o=[];while(null!==(t=n.exec(e))){var r=t[0],a=r.replace(/[^0-9,;#]/g,""),s=!(!t[1]&&!t[2]),c=0==t.index?"":e.substr(t.index-1,1),l=e.substr(t.index+r.length,1),u=!c.match(/\d/)&&!l.match(/\d/);this.testMatch(t[3])&&this.testMatch(r)&&u&&o.push(new uIe({tagBuilder:i,matchedText:r,offset:t.index,number:a,plusSign:s}))}return o},t.prototype.testMatch=function(e){return mIe.test(e)},t}(dIe),YIe=new RegExp("@[_".concat(CIe,"]{1,50}(?![_").concat(CIe,"])"),"g"),XIe=new RegExp("@[_.".concat(CIe,"]{1,30}(?![_").concat(CIe,"])"),"g"),KIe=new RegExp("@[-_.".concat(CIe,"]{1,50}(?![-_").concat(CIe,"])"),"g"),$Ie=new RegExp("@[_.".concat(CIe,"]{1,23}[_").concat(CIe,"](?![_").concat(CIe,"])"),"g"),JIe=new RegExp("[^"+CIe+"]"),QIe=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:YIe,instagram:XIe,soundcloud:KIe,tiktok:$Ie},n.nonWordCharRegex=JIe,n.serviceName=t.serviceName,n}return rIe(t,e),t.prototype.parseMatches=function(e){var t,n=this.serviceName,i=this.matcherRegexes[this.serviceName],o=this.nonWordCharRegex,r=this.tagBuilder,a=[];if(!i)return a;while(null!==(t=i.exec(e))){var s=t.index,c=e.charAt(s-1);if(0===s||o.test(c)){var l=t[0].replace(/\.+$/g,""),u=l.slice(1);a.push(new lIe({tagBuilder:r,matchedText:l,offset:s,serviceName:n,mention:u}))}}return a},t}(dIe);function ZIe(e,t){var n=t.onOpenTag,i=t.onCloseTag,o=t.onText,r=t.onComment,a=t.onDoctype,s=new eDe,c=0,l=e.length,u=0,h=0,d=s;while(c<l){var f=e.charAt(c);switch(u){case 0:p(f);break;case 1:m(f);break;case 2:g(f);break;case 3:_(f);break;case 4:b(f);break;case 5:y(f);break;case 6:v(f);break;case 7:O(f);break;case 8:A(f);break;case 9:w(f);break;case 10:T(f);break;case 11:C(f);break;case 12:E(f);break;case 13:x(f);break;case 14:S(f);break;case 15:I(f);break;case 16:D(f);break;case 17:P(f);break;case 18:j(f);break;case 19:R(f);break;case 20:L(f);break;default:JSe(u)}c++}function p(e){"<"===e&&N()}function m(e){"!"===e?u=13:"/"===e?(u=2,d=new eDe(aIe(aIe({},d),{isClosing:!0}))):"<"===e?N():fIe.test(e)?(u=3,d=new eDe(aIe(aIe({},d),{isOpening:!0}))):(u=0,d=s)}function _(e){_Ie.test(e)?(d=new eDe(aIe(aIe({},d),{name:z()})),u=4):"<"===e?N():"/"===e?(d=new eDe(aIe(aIe({},d),{name:z()})),u=12):">"===e?(d=new eDe(aIe(aIe({},d),{name:z()})),B()):fIe.test(e)||pIe.test(e)||":"===e||M()}function g(e){">"===e?M():fIe.test(e)?u=3:M()}function b(e){_Ie.test(e)||("/"===e?u=12:">"===e?B():"<"===e?N():"="===e||gIe.test(e)||bIe.test(e)?M():u=5)}function y(e){_Ie.test(e)?u=6:"/"===e?u=12:"="===e?u=7:">"===e?B():"<"===e?N():gIe.test(e)&&M()}function v(e){_Ie.test(e)||("/"===e?u=12:"="===e?u=7:">"===e?B():"<"===e?N():gIe.test(e)?M():u=5)}function O(e){_Ie.test(e)||('"'===e?u=8:"'"===e?u=9:/[>=`]/.test(e)?M():"<"===e?N():u=10)}function A(e){'"'===e&&(u=11)}function w(e){"'"===e&&(u=11)}function T(e){_Ie.test(e)?u=4:">"===e?B():"<"===e&&N()}function C(e){_Ie.test(e)?u=4:"/"===e?u=12:">"===e?B():"<"===e?N():(u=4,k())}function E(e){">"===e?(d=new eDe(aIe(aIe({},d),{isClosing:!0})),B()):u=4}function x(t){"--"===e.substr(c,2)?(c+=2,d=new eDe(aIe(aIe({},d),{type:"comment"})),u=14):"DOCTYPE"===e.substr(c,7).toUpperCase()?(c+=7,d=new eDe(aIe(aIe({},d),{type:"doctype"})),u=20):M()}function S(e){"-"===e?u=15:">"===e?M():u=16}function I(e){"-"===e?u=18:">"===e?M():u=16}function D(e){"-"===e&&(u=17)}function P(e){u="-"===e?18:16}function j(e){">"===e?B():"!"===e?u=19:"-"===e||(u=16)}function R(e){"-"===e?u=17:">"===e?B():u=16}function L(e){">"===e?B():"<"===e&&N()}function M(){u=0,d=s}function N(){u=1,d=new eDe({idx:c})}function B(){var t=e.slice(h,d.idx);t&&o(t,h),"comment"===d.type?r(d.idx):"doctype"===d.type?a(d.idx):(d.isOpening&&n(d.name,d.idx),d.isClosing&&i(d.name,d.idx)),M(),h=c+1}function F(){var t=e.slice(h,c);o(t,h),h=c+1}function z(){var t=d.idx+(d.isClosing?2:1);return e.slice(t,c).toLowerCase()}function k(){c--}h<c&&F()}var eDe=function(){function e(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing}return e}(),tDe=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"===typeof t.email?t.email:this.email,this.phone="boolean"===typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"===typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"===typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"===typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&-1===["twitter","instagram","soundcloud","tiktok"].indexOf(n))throw new Error("invalid `mention` cfg '".concat(n,"' - see docs"));var i=this.hashtag;if(!1!==i&&-1===["twitter","facebook","instagram","tiktok"].indexOf(i))throw new Error("invalid `hashtag` cfg '".concat(i,"' - see docs"));this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){var i=new e(n);return i.link(t)},e.parse=function(t,n){var i=new e(n);return i.parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"===typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!==typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!==typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!==typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"===typeof e?{scheme:e,www:e}:{scheme:"boolean"!==typeof e.scheme||e.scheme,www:"boolean"!==typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"===typeof e?{length:e,location:"end"}:qSe(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,n=["a","style","script"],i=0,o=[];return ZIe(e,{onOpenTag:function(e){n.indexOf(e)>=0&&i++},onText:function(e,n){if(0===i){var r=/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,a=$Se(e,r),s=n;a.forEach((function(e,n){if(n%2===0){var i=t.parseText(e,s);o.push.apply(o,i)}s+=e.length}))}},onCloseTag:function(e){n.indexOf(e)>=0&&(i=Math.max(i-1,0))},onComment:function(e){},onDoctype:function(e){}}),o=this.compactMatches(o),o=this.removeUnwantedMatches(o),o},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));var t=0;while(t<e.length-1){var n=e[t],i=n.getOffset(),o=n.getMatchedText().length,r=i+o;if(t+1<e.length){if(e[t+1].getOffset()===i){var a=e[t+1].getMatchedText().length>o?t:t+1;e.splice(a,1);continue}if(e[t+1].getOffset()<r){e.splice(t+1,1);continue}}t++}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||KSe(e,(function(e){return"hashtag"===e.getType()})),this.email||KSe(e,(function(e){return"email"===e.getType()})),this.phone||KSe(e,(function(e){return"phone"===e.getType()})),this.mention||KSe(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||KSe(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||KSe(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||KSe(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var n=this.getMatchers(),i=[],o=0,r=n.length;o<r;o++){for(var a=n[o].parseMatches(e),s=0,c=a.length;s<c;s++)a[s].setOffset(t+a[s].getOffset());i.push.apply(i,a)}return i},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),n=[],i=0,o=0,r=t.length;o<r;o++){var a=t[o];n.push(e.substring(i,a.getOffset())),n.push(this.createMatchReturnVal(a)),i=a.getOffset()+a.getMatchedText().length}return n.push(e.substring(i)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;if(this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"===typeof t)return t;if(!1===t)return e.getMatchedText();if(t instanceof QSe)return t.toAnchorString();var n=e.buildTag();return n.toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new VIe({tagBuilder:e,serviceName:this.hashtag}),new LIe({tagBuilder:e}),new qIe({tagBuilder:e}),new QIe({tagBuilder:e,serviceName:this.mention}),new zIe({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new nIe({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version=WSe,e.AnchorTagBuilder=nIe,e.HtmlTag=QSe,e.matcher={Email:LIe,Hashtag:VIe,Matcher:dIe,Mention:QIe,Phone:qIe,Url:zIe},e.match={Email:sIe,Hashtag:cIe,Match:iIe,Mention:lIe,Phone:uIe,Url:hIe},e}(),nDe=tDe,iDe=nDe;let oDe;"undefined"!==typeof DOMParser&&(oDe=new DOMParser);const rDe=new iDe({stripPrefix:!1,email:!1,replaceFn:function(e,t){if(!t.protocolUrlMatch)return!1}}),aDe=32,sDe=2414016,cDe=1,lDe=16093e3,uDe=.1,hDe=[null,void 0,"http://www.topografix.com/GPX/1/1"],dDe={gpx:hDe};function fDe(e){return new Promise((t,n)=>{const i=new FileReader;i.addEventListener("load",(function(){t(i.result)})),i.addEventListener("error",(function(){n(i.error)})),i.readAsText(e)})}function pDe(e,t){let n=gDe(e,"id");n=Object(r["a"])(n)?n:ML();const i=t.getOrCreateEntity(n);return i}function mDe(e){const t=_De(e,"lon"),n=_De(e,"lat"),i=vDe(e,"ele",dDe.gpx);return g.fromDegrees(t,n,i)}function _De(e,t){if(!Object(r["a"])(e))return;const n=e.getAttribute(t);if(null!==n){const e=parseFloat(n);return isNaN(e)?void 0:e}}function gDe(e,t){if(!Object(r["a"])(e))return;const n=e.getAttribute(t);return null!==n?n:void 0}function bDe(e,t,n){if(!Object(r["a"])(e))return;const i=e.childNodes,o=i.length;for(let r=0;r<o;r++){const e=i[r];if(e.localName===t&&-1!==n.indexOf(e.namespaceURI))return e}}function yDe(e,t,n){if(!Object(r["a"])(e))return;const i=[],o=e.getElementsByTagName(t),a=o.length;for(let r=0;r<a;r++){const e=o[r];e.localName===t&&-1!==n.indexOf(e.namespaceURI)&&i.push(e)}return i}function vDe(e,t,n){const i=bDe(e,t,n);if(Object(r["a"])(i)){const e=parseFloat(i.textContent);return isNaN(e)?void 0:e}}function ODe(e,t,n){const i=bDe(e,t,n);if(Object(r["a"])(i))return i.textContent.trim()}function ADe(e){const t=new $M;return t.width=aDe,t.height=aDe,t.scaleByDistance=new xE(sDe,cDe,lDe,uDe),t.pixelOffsetScaleByDistance=new xE(sDe,cDe,lDe,uDe),t.verticalOrigin=new GM(nN.BOTTOM),t.image=e,t}function wDe(){const e=new Uq;return e.translucencyByDistance=new xE(3e6,1,5e6,0),e.pixelOffset=new Gt(17,0),e.horizontalOrigin=eN.LEFT,e.font="16px sans-serif",e.style=Zle.FILL_AND_OUTLINE,e}function TDe(e){const t=new dY;return t.width=4,t.material=new Wve,t.material.color=Object(r["a"])(e)?e:Dm.RED,t.material.outlineWidth=2,t.material.outlineColor=Dm.BLACK,t}const CDe={time:{text:"Time",tag:"time"},comment:{text:"Comment",tag:"cmt"},description:{text:"Description",tag:"desc"},source:{text:"Source",tag:"src"},number:{text:"GPS track/route number",tag:"number"},type:{text:"Type",tag:"type"}};let EDe;function xDe(e,t){let n,i="";const a=Object.keys(CDe),s=a.length;for(n=0;n<s;n++){const t=a[n],s=CDe[t];s.value=Object(o["a"])(ODe(e,s.tag,dDe.gpx),""),Object(r["a"])(s.value)&&""!==s.value&&(i=`${i}<p>${s.text}: ${s.value}</p>`)}if(!Object(r["a"])(i)||""===i)return;i=rDe.link(i),EDe.innerHTML=i;const c=EDe.querySelectorAll("a");for(n=0;n<c.length;n++)c[n].setAttribute("target","_blank");const l=Dm.WHITE,u=Dm.BLACK;let h='<div class="cesium-infoBox-description-lighter" style="';return h+="overflow:auto;",h+="word-wrap:break-word;",h+=`background-color:${l.toCssColorString()};`,h+=`color:${u.toCssColorString()};`,h+='">',h+=`${EDe.innerHTML}</div>`,EDe.innerHTML="",h}function SDe(e,t,n,i){const o=mDe(t),a=pDe(t,n);a.position=o;const s=Object(r["a"])(i.waypointImage)?i.waypointImage:e._pinBuilder.fromMakiIconId("marker",Dm.RED,aDe);a.billboard=ADe(s);const c=ODe(t,"name",dDe.gpx);a.name=c,a.label=wDe(),a.label.text=c,a.description=xDe(t,a),i.clampToGround&&(a.billboard.heightReference=QM.CLAMP_TO_GROUND,a.label.heightReference=QM.CLAMP_TO_GROUND)}function IDe(e,t,n,i){const o=pDe(t,n);o.description=xDe(t,o);const r=yDe(t,"rtept",dDe.gpx),a=new Array(r.length);for(let s=0;s<r.length;s++)SDe(e,r[s],n,i),a[s]=mDe(r[s]);o.polyline=TDe(i.routeColor),i.clampToGround&&(o.polyline.clampToGround=!0),o.polyline.positions=a}function DDe(e,t,n,i){const o=pDe(t,n);o.description=xDe(t,o);const a=yDe(t,"trkseg",dDe.gpx);let s,c=[],l=[],u=!0;const h=new hOe;for(let r=0;r<a.length;r++)s=PDe(a[r]),c=c.concat(s.positions),s.times.length>0?(l=l.concat(s.times),h.addSamples(l,c),u=u&&!0):u=!1;if(u){const t=Object(r["a"])(i.waypointImage)?i.waypointImage:e._pinBuilder.fromMakiIconId("marker",Dm.RED,aDe);o.billboard=ADe(t),o.position=h,i.clampToGround&&(o.billboard.heightReference=QM.CLAMP_TO_GROUND),o.availability=new xR,o.availability.addInterval(new ZC({start:l[0],stop:l[l.length-1]}))}o.polyline=TDe(i.trackColor),o.polyline.positions=c,i.clampToGround&&(o.polyline.clampToGround=!0)}function PDe(e){const t={positions:[],times:[]},n=yDe(e,"trkpt",dDe.gpx);let i;for(let o=0;o<n.length;o++){const e=mDe(n[o]);t.positions.push(e),i=ODe(n[o],"time",dDe.gpx),Object(r["a"])(i)&&t.times.push(mo.fromIso8601(i))}return t}function jDe(e){const t=bDe(e,"metadata",dDe.gpx);if(Object(r["a"])(t)){const e={name:ODe(t,"name",dDe.gpx),desc:ODe(t,"desc",dDe.gpx),author:RDe(t),copyright:NDe(t),link:MDe(t),time:ODe(t,"time",dDe.gpx),keywords:ODe(t,"keywords",dDe.gpx),bounds:BDe(t)};if(Object(r["a"])(e.name)||Object(r["a"])(e.desc)||Object(r["a"])(e.author)||Object(r["a"])(e.copyright)||Object(r["a"])(e.link)||Object(r["a"])(e.time)||Object(r["a"])(e.keywords)||Object(r["a"])(e.bounds))return e}}function RDe(e){const t=bDe(e,"author",dDe.gpx);if(Object(r["a"])(t)){const e={name:ODe(t,"name",dDe.gpx),email:LDe(t),link:MDe(t)};if(Object(r["a"])(e.name)||Object(r["a"])(e.email)||Object(r["a"])(e.link))return e}}function LDe(e){const t=bDe(e,"email",dDe.gpx);if(Object(r["a"])(t)){const e=ODe(t,"id",dDe.gpx),n=ODe(t,"domain",dDe.gpx);return`${e}@${n}`}}function MDe(e){const t=bDe(e,"link",dDe.gpx);if(Object(r["a"])(t)){const e={href:gDe(t,"href"),text:ODe(t,"text",dDe.gpx),mimeType:ODe(t,"type",dDe.gpx)};if(Object(r["a"])(e.href)||Object(r["a"])(e.text)||Object(r["a"])(e.mimeType))return e}}function NDe(e){const t=bDe(e,"copyright",dDe.gpx);if(Object(r["a"])(t)){const e={author:gDe(t,"author"),year:ODe(t,"year",dDe.gpx),license:ODe(t,"license",dDe.gpx)};if(Object(r["a"])(e.author)||Object(r["a"])(e.year)||Object(r["a"])(e.license))return e}}function BDe(e){const t=bDe(e,"bounds",dDe.gpx);if(Object(r["a"])(t)){const e={minLat:vDe(t,"minlat",dDe.gpx),maxLat:vDe(t,"maxlat",dDe.gpx),minLon:vDe(t,"minlon",dDe.gpx),maxLon:vDe(t,"maxlon",dDe.gpx)};if(Object(r["a"])(e.minLat)||Object(r["a"])(e.maxLat)||Object(r["a"])(e.minLon)||Object(r["a"])(e.maxLon))return e}}"undefined"!==typeof document&&(EDe=document.createElement("div"));const FDe={wpt:SDe,rte:IDe,trk:DDe};function zDe(e,t,n,i){const o=Object.keys(FDe),r=o.length;for(let a=0;a<r;a++){const r=o[a],s=FDe[r],c=t.childNodes,l=c.length;for(let t=0;t<l;t++){const o=c[t];o.localName===r&&-1!==dDe.gpx.indexOf(o.namespaceURI)&&s(e,o,n,i)}}}function kDe(e,t,n){const i=e._entityCollection;i.removeAll();const o=t.documentElement,a=gDe(o,"version"),s=gDe(o,"creator");let c;const l=jDe(o);let u;Object(r["a"])(l)&&(c=l.name),"gpx"===o.localName?zDe(e,o,i,n):console.log(`GPX - Unsupported node: ${o.localName}`);const h=i.computeAvailability();let d=h.start,f=h.stop;const p=mo.equals(d,oE.MINIMUM_VALUE),m=mo.equals(f,oE.MAXIMUM_VALUE);if(!p||!m){let e;p&&(e=new Date,e.setHours(0,0,0,0),d=mo.fromDate(e)),m&&(e=new Date,e.setHours(24,0,0,0),f=mo.fromDate(e)),u=new vve,u.startTime=d,u.stopTime=f,u.currentTime=mo.clone(d),u.clockRange=pm.LOOP_STOP,u.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,u.multiplier=Math.round(Math.min(Math.max(mo.secondsDifference(f,d)/60,1),31556900))}let _=!1;return e._name!==c&&(e._name=c,_=!0),e._creator!==s&&(e._creator=s,_=!0),UDe(e._metadata,l)&&(e._metadata=l,_=!0),e._version!==a&&(e._version=a,_=!0),u!==e._clock&&(_=!0,e._clock=u),_&&e._changed.raiseEvent(e),kbe.setLoading(e,!1),e}function UDe(e,t){return!(!Object(r["a"])(e)&&!Object(r["a"])(t))&&(!Object(r["a"])(e)||!Object(r["a"])(t)||(e.name!==t.name||e.dec!==t.desc||e.src!==t.src||e.author!==t.author||e.copyright!==t.copyright||e.link!==t.link||e.time!==t.time||e.bounds!==t.bounds))}function VDe(e,t,n,i){i=Object(o["a"])(i,o["a"].EMPTY_OBJECT);let a=n;if("string"===typeof n||n instanceof Et["a"]){n=Et["a"].createIfNeeded(n),a=n.fetchBlob();const t=e._resourceCredits,i=n.credits;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;n++)t.push(i[n])}}return Promise.resolve(a).then((function(t){return t instanceof Blob?fDe(t).then((function(t){let n,o;try{n=oDe.parseFromString(t,"application/xml")}catch(a){o=a.toString()}if(Object(r["a"])(o)||n.body||"parsererror"===n.documentElement.tagName){let e=Object(r["a"])(o)?o:n.documentElement.firstChild.nodeValue;throw e||(e=n.body.innerText),new ye["a"](e)}return kDe(e,n,i)})):kDe(e,t,i)})).catch((function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}function HDe(){this._changed=new dn["a"],this._error=new dn["a"],this._loading=new dn["a"],this._clock=void 0,this._entityCollection=new ube,this._entityCluster=new cve,this._name=void 0,this._version=void 0,this._creator=void 0,this._metadata=void 0,this._isLoading=!1,this._pinBuilder=new lx}HDe.load=function(e,t){return(new HDe).load(e,t)},Object.defineProperties(HDe.prototype,{name:{get:function(){return this._name}},version:{get:function(){return this._version}},creator:{get:function(){return this._creator}},metadata:{get:function(){return this._metadata}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value must be defined.");this._entityCluster=e}}}),HDe.prototype.update=function(e){return!0},HDe.prototype.load=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("data is required.");t=Object(o["a"])(t,o["a"].EMPTY_OBJECT),kbe.setLoading(this,!0);const n=this._name,i=this;return VDe(this,this._entityCollection,e,t).then((function(){let e;const t=i._entityCollection.computeAvailability();let o=t.start,r=t.stop;const a=mo.equals(o,oE.MINIMUM_VALUE),s=mo.equals(r,oE.MAXIMUM_VALUE);if(!a||!s){let t;a&&(t=new Date,t.setHours(0,0,0,0),o=mo.fromDate(t)),s&&(t=new Date,t.setHours(24,0,0,0),r=mo.fromDate(t)),e=new vve,e.startTime=o,e.stopTime=r,e.currentTime=mo.clone(o),e.clockRange=pm.LOOP_STOP,e.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(mo.secondsDifference(r,o)/60,1),31556900))}let c=!1;return e!==i._clock&&(i._clock=e,c=!0),n!==i._name&&(c=!0),c&&i._changed.raiseEvent(i),kbe.setLoading(i,!1),i})).catch((function(e){return kbe.setLoading(i,!1),i._error.raiseEvent(i,e),console.log(e),Promise.reject(e)}))};var GDe=HDe;function WDe(e,t){this.position=e,this.headingPitchRoll=t}var qDe=WDe;const YDe=15,XDe=30,KDe=19,$De=29,JDe=256,QDe=JDe+1+$De,ZDe=2*QDe+1,ePe=256,tPe=7,nPe=16,iPe=17,oPe=18,rPe=16,aPe=-1,sPe=1,cPe=2,lPe=0,uPe=0,hPe=1,dPe=3,fPe=4,pPe=0,mPe=1,_Pe=2,gPe=-2,bPe=-3,yPe=-5;function vPe(e){return OPe(e.map(([e,t])=>new Array(e).fill(t,0,e)))}function OPe(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?OPe(t):t),[])}const APe=[0,1,2,3].concat(...vPe([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function wPe(){const e=this;function t(t){const n=e.dyn_tree,i=e.stat_desc.static_tree,o=e.stat_desc.extra_bits,r=e.stat_desc.extra_base,a=e.stat_desc.max_length;let s,c,l,u,h,d,f=0;for(u=0;u<=YDe;u++)t.bl_count[u]=0;for(n[2*t.heap[t.heap_max]+1]=0,s=t.heap_max+1;s<ZDe;s++)c=t.heap[s],u=n[2*n[2*c+1]+1]+1,u>a&&(u=a,f++),n[2*c+1]=u,c>e.max_code||(t.bl_count[u]++,h=0,c>=r&&(h=o[c-r]),d=n[2*c],t.opt_len+=d*(u+h),i&&(t.static_len+=d*(i[2*c+1]+h)));if(0!==f){do{u=a-1;while(0===t.bl_count[u])u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[a]--,f-=2}while(f>0);for(u=a;0!==u;u--){c=t.bl_count[u];while(0!==c)l=t.heap[--s],l>e.max_code||(n[2*l+1]!=u&&(t.opt_len+=(u-n[2*l+1])*n[2*l],n[2*l+1]=u),c--)}}}function n(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function i(e,t,i){const o=[];let r,a,s,c=0;for(r=1;r<=YDe;r++)o[r]=c=c+i[r-1]<<1;for(a=0;a<=t;a++)s=e[2*a+1],0!==s&&(e[2*a]=n(o[s]++,s))}e.build_tree=function(n){const o=e.dyn_tree,r=e.stat_desc.static_tree,a=e.stat_desc.elems;let s,c,l,u=-1;for(n.heap_len=0,n.heap_max=ZDe,s=0;s<a;s++)0!==o[2*s]?(n.heap[++n.heap_len]=u=s,n.depth[s]=0):o[2*s+1]=0;while(n.heap_len<2)l=n.heap[++n.heap_len]=u<2?++u:0,o[2*l]=1,n.depth[l]=0,n.opt_len--,r&&(n.static_len-=r[2*l+1]);for(e.max_code=u,s=Math.floor(n.heap_len/2);s>=1;s--)n.pqdownheap(o,s);l=a;do{s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),c=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=c,o[2*l]=o[2*s]+o[2*c],n.depth[l]=Math.max(n.depth[s],n.depth[c])+1,o[2*s+1]=o[2*c+1]=l,n.heap[1]=l++,n.pqdownheap(o,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],t(n),i(o,e.max_code,n.bl_count)}}function TPe(e,t,n,i,o){const r=this;r.static_tree=e,r.extra_bits=t,r.extra_base=n,r.elems=i,r.max_length=o}wPe._length_code=[0,1,2,3,4,5,6,7].concat(...vPe([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),wPe.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],wPe.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],wPe.d_code=function(e){return e<256?APe[e]:APe[256+(e>>>7)]},wPe.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],wPe.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],wPe.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],wPe.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const CPe=[12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227],EPe=vPe([[144,8],[112,9],[24,7],[8,8]]);TPe.static_ltree=OPe(CPe.map((e,t)=>[e,EPe[t]]));const xPe=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23],SPe=vPe([[30,5]]);TPe.static_dtree=OPe(xPe.map((e,t)=>[e,SPe[t]])),TPe.static_l_desc=new TPe(TPe.static_ltree,wPe.extra_lbits,JDe+1,QDe,YDe),TPe.static_d_desc=new TPe(TPe.static_dtree,wPe.extra_dbits,0,XDe,YDe),TPe.static_bl_desc=new TPe(null,wPe.extra_blbits,0,KDe,tPe);const IPe=9,DPe=8;function PPe(e,t,n,i,o){const r=this;r.good_length=e,r.max_lazy=t,r.nice_length=n,r.max_chain=i,r.func=o}const jPe=0,RPe=1,LPe=2,MPe=[new PPe(0,0,0,0,jPe),new PPe(4,4,8,4,RPe),new PPe(4,5,16,8,RPe),new PPe(4,6,32,32,RPe),new PPe(4,4,16,16,LPe),new PPe(8,16,32,32,LPe),new PPe(8,16,128,128,LPe),new PPe(8,32,128,256,LPe),new PPe(32,128,258,1024,LPe),new PPe(32,258,258,4096,LPe)],NPe=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],BPe=0,FPe=1,zPe=2,kPe=3,UPe=32,VPe=42,HPe=113,GPe=666,WPe=8,qPe=0,YPe=1,XPe=2,KPe=3,$Pe=258,JPe=$Pe+KPe+1;function QPe(e,t,n,i){const o=e[2*t],r=e[2*n];return o<r||o==r&&i[t]<=i[n]}function ZPe(){const e=this;let t,n,i,o,r,a,s,c,l,u,h,d,f,p,m,_,g,b,y,v,O,A,w,T,C,E,x,S,I,D,P,j,R;const L=new wPe,M=new wPe,N=new wPe;let B,F,z,k,U,V;function H(){l=2*r,h[f-1]=0;for(let e=0;e<f-1;e++)h[e]=0;E=MPe[x].max_lazy,I=MPe[x].good_length,D=MPe[x].nice_length,C=MPe[x].max_chain,O=0,g=0,w=0,b=T=KPe-1,v=0,d=0}function G(){let t;for(t=0;t<QDe;t++)P[2*t]=0;for(t=0;t<XDe;t++)j[2*t]=0;for(t=0;t<KDe;t++)R[2*t]=0;P[2*ePe]=1,e.opt_len=e.static_len=0,F=z=0}function W(){L.dyn_tree=P,L.stat_desc=TPe.static_l_desc,M.dyn_tree=j,M.stat_desc=TPe.static_d_desc,N.dyn_tree=R,N.stat_desc=TPe.static_bl_desc,U=0,V=0,k=8,G()}function q(e,t){let n,i=-1,o=e[1],r=0,a=7,s=4;0===o&&(a=138,s=3),e[2*(t+1)+1]=65535;for(let c=0;c<=t;c++)n=o,o=e[2*(c+1)+1],++r<a&&n==o||(r<s?R[2*n]+=r:0!==n?(n!=i&&R[2*n]++,R[2*nPe]++):r<=10?R[2*iPe]++:R[2*oPe]++,r=0,i=n,0===o?(a=138,s=3):n==o?(a=6,s=3):(a=7,s=4))}function Y(){let t;for(q(P,L.max_code),q(j,M.max_code),N.build_tree(e),t=KDe-1;t>=3;t--)if(0!==R[2*wPe.bl_order[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t}function X(t){e.pending_buf[e.pending++]=t}function K(e){X(255&e),X(e>>>8&255)}function $(e){X(e>>8&255),X(255&e)}function J(e,t){let n;const i=t;V>rPe-i?(n=e,U|=n<<V&65535,K(U),U=n>>>rPe-V,V+=i-rPe):(U|=e<<V&65535,V+=i)}function Q(e,t){const n=2*e;J(65535&t[n],65535&t[n+1])}function Z(e,t){let n,i,o=-1,r=e[1],a=0,s=7,c=4;for(0===r&&(s=138,c=3),n=0;n<=t;n++)if(i=r,r=e[2*(n+1)+1],!(++a<s&&i==r)){if(a<c)do{Q(i,R)}while(0!==--a);else 0!==i?(i!=o&&(Q(i,R),a--),Q(nPe,R),J(a-3,2)):a<=10?(Q(iPe,R),J(a-3,3)):(Q(oPe,R),J(a-11,7));a=0,o=i,0===r?(s=138,c=3):i==r?(s=6,c=3):(s=7,c=4)}}function ee(e,t,n){let i;for(J(e-257,5),J(t-1,5),J(n-4,4),i=0;i<n;i++)J(R[2*wPe.bl_order[i]+1],3);Z(P,e-1),Z(j,t-1)}function te(){16==V?(K(U),U=0,V=0):V>=8&&(X(255&U),U>>>=8,V-=8)}function ne(){J(YPe<<1,3),Q(ePe,TPe.static_ltree),te(),1+k+10-V<9&&(J(YPe<<1,3),Q(ePe,TPe.static_ltree),te()),k=7}function ie(t,n){let i,o,r;if(e.dist_buf[F]=t,e.lc_buf[F]=255&n,F++,0===t?P[2*n]++:(z++,t--,P[2*(wPe._length_code[n]+JDe+1)]++,j[2*wPe.d_code(t)]++),0===(8191&F)&&x>2){for(i=8*F,o=O-g,r=0;r<XDe;r++)i+=j[2*r]*(5+wPe.extra_dbits[r]);if(i>>>=3,z<Math.floor(F/2)&&i<Math.floor(o/2))return!0}return F==B-1}function oe(t,n){let i,o,r,a,s=0;if(0!==F)do{i=e.dist_buf[s],o=e.lc_buf[s],s++,0===i?Q(o,t):(r=wPe._length_code[o],Q(r+JDe+1,t),a=wPe.extra_lbits[r],0!==a&&(o-=wPe.base_length[r],J(o,a)),i--,r=wPe.d_code(i),Q(r,n),a=wPe.extra_dbits[r],0!==a&&(i-=wPe.base_dist[r],J(i,a)))}while(s<F);Q(ePe,t),k=t[2*ePe+1]}function re(){V>8?K(U):V>0&&X(255&U),U=0,V=0}function ae(t,n,i){re(),k=8,i&&(K(n),K(~n)),e.pending_buf.set(c.subarray(t,t+n),e.pending),e.pending+=n}function se(e,t,n){J((qPe<<1)+(n?1:0),3),ae(e,t,!0)}function ce(t,n,i){let o,r,a=0;x>0?(L.build_tree(e),M.build_tree(e),a=Y(),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!=t?se(t,n,i):r==o?(J((YPe<<1)+(i?1:0),3),oe(TPe.static_ltree,TPe.static_dtree)):(J((XPe<<1)+(i?1:0),3),ee(L.max_code+1,M.max_code+1,a+1),oe(P,j)),G(),i&&re()}function le(e){ce(g>=0?g:-1,O-g,e),g=O,t.flush_pending()}function ue(){let e,n,i,o;do{if(o=l-w-O,0===o&&0===O&&0===w)o=r;else if(-1==o)o--;else if(O>=r+r-JPe){c.set(c.subarray(r,r+r),0),A-=r,O-=r,g-=r,e=f,i=e;do{n=65535&h[--i],h[i]=n>=r?n-r:0}while(0!==--e);e=r,i=e;do{n=65535&u[--i],u[i]=n>=r?n-r:0}while(0!==--e);o+=r}if(0===t.avail_in)return;e=t.read_buf(c,O+w,o),w+=e,w>=KPe&&(d=255&c[O],d=(d<<_^255&c[O+1])&m)}while(w<JPe&&0!==t.avail_in)}function he(e){let n,o=65535;o>i-5&&(o=i-5);while(1){if(w<=1){if(ue(),0===w&&e==uPe)return BPe;if(0===w)break}if(O+=w,w=0,n=g+o,(0===O||O>=n)&&(w=O-n,O=n,le(!1),0===t.avail_out))return BPe;if(O-g>=r-JPe&&(le(!1),0===t.avail_out))return BPe}return le(e==fPe),0===t.avail_out?e==fPe?zPe:BPe:e==fPe?kPe:FPe}function de(e){let t,n,i=C,o=O,a=T;const l=O>r-JPe?O-(r-JPe):0;let h=D;const d=s,f=O+$Pe;let p=c[o+a-1],m=c[o+a];T>=I&&(i>>=2),h>w&&(h=w);do{if(t=e,c[t+a]==m&&c[t+a-1]==p&&c[t]==c[o]&&c[++t]==c[o+1]){o+=2,t++;do{}while(c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&c[++o]==c[++t]&&o<f);if(n=$Pe-(f-o),o=f-$Pe,n>a){if(A=e,a=n,n>=h)break;p=c[o+a-1],m=c[o+a]}}}while((e=65535&u[e&d])>l&&0!==--i);return a<=w?a:w}function fe(e){let n,i=0;while(1){if(w<JPe){if(ue(),w<JPe&&e==uPe)return BPe;if(0===w)break}if(w>=KPe&&(d=(d<<_^255&c[O+(KPe-1)])&m,i=65535&h[d],u[O&s]=h[d],h[d]=O),0!==i&&(O-i&65535)<=r-JPe&&S!=cPe&&(b=de(i)),b>=KPe)if(n=ie(O-A,b-KPe),w-=b,b<=E&&w>=KPe){b--;do{O++,d=(d<<_^255&c[O+(KPe-1)])&m,i=65535&h[d],u[O&s]=h[d],h[d]=O}while(0!==--b);O++}else O+=b,b=0,d=255&c[O],d=(d<<_^255&c[O+1])&m;else n=ie(0,255&c[O]),w--,O++;if(n&&(le(!1),0===t.avail_out))return BPe}return le(e==fPe),0===t.avail_out?e==fPe?zPe:BPe:e==fPe?kPe:FPe}function pe(e){let n,i,o=0;while(1){if(w<JPe){if(ue(),w<JPe&&e==uPe)return BPe;if(0===w)break}if(w>=KPe&&(d=(d<<_^255&c[O+(KPe-1)])&m,o=65535&h[d],u[O&s]=h[d],h[d]=O),T=b,y=A,b=KPe-1,0!==o&&T<E&&(O-o&65535)<=r-JPe&&(S!=cPe&&(b=de(o)),b<=5&&(S==sPe||b==KPe&&O-A>4096)&&(b=KPe-1)),T>=KPe&&b<=T){i=O+w-KPe,n=ie(O-1-y,T-KPe),w-=T-1,T-=2;do{++O<=i&&(d=(d<<_^255&c[O+(KPe-1)])&m,o=65535&h[d],u[O&s]=h[d],h[d]=O)}while(0!==--T);if(v=0,b=KPe-1,O++,n&&(le(!1),0===t.avail_out))return BPe}else if(0!==v){if(n=ie(0,255&c[O-1]),n&&le(!1),O++,w--,0===t.avail_out)return BPe}else v=1,O++,w--}return 0!==v&&(n=ie(0,255&c[O-1]),v=0),le(e==fPe),0===t.avail_out?e==fPe?zPe:BPe:e==fPe?kPe:FPe}function me(t){return t.total_in=t.total_out=0,t.msg=null,e.pending=0,e.pending_out=0,n=HPe,o=uPe,W(),H(),pPe}e.depth=[],e.bl_count=[],e.heap=[],P=[],j=[],R=[],e.pqdownheap=function(t,n){const i=e.heap,o=i[n];let r=n<<1;while(r<=e.heap_len){if(r<e.heap_len&&QPe(t,i[r+1],i[r],e.depth)&&r++,QPe(t,o,i[r],e.depth))break;i[n]=i[r],n=r,r<<=1}i[n]=o},e.deflateInit=function(t,n,o,l,d,g){return l||(l=WPe),d||(d=DPe),g||(g=lPe),t.msg=null,n==aPe&&(n=6),d<1||d>IPe||l!=WPe||o<9||o>15||n<0||n>9||g<0||g>cPe?gPe:(t.dstate=e,a=o,r=1<<a,s=r-1,p=d+7,f=1<<p,m=f-1,_=Math.floor((p+KPe-1)/KPe),c=new Uint8Array(2*r),u=[],h=[],B=1<<d+6,e.pending_buf=new Uint8Array(4*B),i=4*B,e.dist_buf=new Uint16Array(B),e.lc_buf=new Uint8Array(B),x=n,S=g,me(t))},e.deflateEnd=function(){return n!=VPe&&n!=HPe&&n!=GPe?gPe:(e.lc_buf=null,e.dist_buf=null,e.pending_buf=null,h=null,u=null,c=null,e.dstate=null,n==HPe?bPe:pPe)},e.deflateParams=function(e,t,n){let i=pPe;return t==aPe&&(t=6),t<0||t>9||n<0||n>cPe?gPe:(MPe[x].func!=MPe[t].func&&0!==e.total_in&&(i=e.deflate(hPe)),x!=t&&(x=t,E=MPe[x].max_lazy,I=MPe[x].good_length,D=MPe[x].nice_length,C=MPe[x].max_chain),S=n,i)},e.deflateSetDictionary=function(e,t,i){let o,a=i,l=0;if(!t||n!=VPe)return gPe;if(a<KPe)return pPe;for(a>r-JPe&&(a=r-JPe,l=i-a),c.set(t.subarray(l,l+a),0),O=a,g=a,d=255&c[0],d=(d<<_^255&c[1])&m,o=0;o<=a-KPe;o++)d=(d<<_^255&c[o+(KPe-1)])&m,u[o&s]=h[d],h[d]=o;return pPe},e.deflate=function(i,r){let s,c,l,u,d;if(r>fPe||r<0)return gPe;if(!i.next_out||!i.next_in&&0!==i.avail_in||n==GPe&&r!=fPe)return i.msg=NPe[_Pe-gPe],gPe;if(0===i.avail_out)return i.msg=NPe[_Pe-yPe],yPe;if(t=i,u=o,o=r,n==VPe&&(c=WPe+(a-8<<4)<<8,l=(x-1&255)>>1,l>3&&(l=3),c|=l<<6,0!==O&&(c|=UPe),c+=31-c%31,n=HPe,$(c)),0!==e.pending){if(t.flush_pending(),0===t.avail_out)return o=-1,pPe}else if(0===t.avail_in&&r<=u&&r!=fPe)return t.msg=NPe[_Pe-yPe],yPe;if(n==GPe&&0!==t.avail_in)return i.msg=NPe[_Pe-yPe],yPe;if(0!==t.avail_in||0!==w||r!=uPe&&n!=GPe){switch(d=-1,MPe[x].func){case jPe:d=he(r);break;case RPe:d=fe(r);break;case LPe:d=pe(r);break;default:}if(d!=zPe&&d!=kPe||(n=GPe),d==BPe||d==zPe)return 0===t.avail_out&&(o=-1),pPe;if(d==FPe){if(r==hPe)ne();else if(se(0,0,!1),r==dPe)for(s=0;s<f;s++)h[s]=0;if(t.flush_pending(),0===t.avail_out)return o=-1,pPe}}return r!=fPe?pPe:mPe}}function eje(){const e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}function tje(e){const t=this,n=new eje,i=nje(e&&e.chunkSize?e.chunkSize:65536),o=uPe,r=new Uint8Array(i);let a=e?e.level:aPe;"undefined"==typeof a&&(a=aPe),n.deflateInit(a),n.next_out=r,t.append=function(e,t){let a,s,c=0,l=0,u=0;const h=[];if(e.length){n.next_in_index=0,n.next_in=e,n.avail_in=e.length;do{if(n.next_out_index=0,n.avail_out=i,a=n.deflate(o),a!=pPe)throw new Error("deflating: "+n.msg);n.next_out_index&&(n.next_out_index==i?h.push(new Uint8Array(r)):h.push(r.slice(0,n.next_out_index))),u+=n.next_out_index,t&&n.next_in_index>0&&n.next_in_index!=c&&(t(n.next_in_index),c=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return h.length>1?(s=new Uint8Array(u),h.forEach((function(e){s.set(e,l),l+=e.length}))):s=h[0]||new Uint8Array(0),s}},t.flush=function(){let e,t,o=0,a=0;const s=[];do{if(n.next_out_index=0,n.avail_out=i,e=n.deflate(fPe),e!=mPe&&e!=pPe)throw new Error("deflating: "+n.msg);i-n.avail_out>0&&s.push(r.slice(0,n.next_out_index)),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),t=new Uint8Array(a),s.forEach((function(e){t.set(e,o),o+=e.length})),t}}function nje(e){return e+5*(Math.floor(e/16383)+1)}eje.prototype={deflateInit:function(e,t){const n=this;return n.dstate=new ZPe,t||(t=YDe),n.dstate.deflateInit(n,e,t)},deflate:function(e){const t=this;return t.dstate?t.dstate.deflate(t,e):gPe},deflateEnd:function(){const e=this;if(!e.dstate)return gPe;const t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){const n=this;return n.dstate?n.dstate.deflateParams(n,e,t):gPe},deflateSetDictionary:function(e,t){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):gPe},read_buf:function(e,t,n){const i=this;let o=i.avail_in;return o>n&&(o=n),0===o?0:(i.avail_in-=o,e.set(i.next_in.subarray(i.next_in_index,i.next_in_index+o),t),i.next_in_index+=o,i.total_in+=o,o)},flush_pending:function(){const e=this;let t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};var ije=tje;const oje=15,rje=0,aje=1,sje=2,cje=-2,lje=-3,uje=-4,hje=-5,dje=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],fje=1440,pje=0,mje=4,_je=9,gje=5,bje=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],yje=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],vje=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Oje=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Aje=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],wje=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tje=15;function Cje(){const e=this;let t,n,i,o,r,a;function s(e,t,n,s,c,l,u,h,d,f,p){let m,_,g,b,y,v,O,A,w,T,C,E,x,S,I;T=0,y=n;do{i[e[t+T]]++,T++,y--}while(0!==y);if(i[0]==n)return u[0]=-1,h[0]=0,rje;for(A=h[0],v=1;v<=Tje;v++)if(0!==i[v])break;for(O=v,A<v&&(A=v),y=Tje;0!==y;y--)if(0!==i[y])break;for(g=y,A>y&&(A=y),h[0]=A,S=1<<v;v<y;v++,S<<=1)if((S-=i[v])<0)return lje;if((S-=i[y])<0)return lje;i[y]+=S,a[1]=v=0,T=1,x=2;while(0!==--y)a[x]=v+=i[T],x++,T++;y=0,T=0;do{0!==(v=e[t+T])&&(p[a[v]++]=y),T++}while(++y<n);for(n=a[g],a[0]=y=0,T=0,b=-1,E=-A,r[0]=0,C=0,I=0;O<=g;O++){m=i[O];while(0!==m--){while(O>E+A){if(b++,E+=A,I=g-E,I=I>A?A:I,(_=1<<(v=O-E))>m+1&&(_-=m+1,x=O,v<I))while(++v<I){if((_<<=1)<=i[++x])break;_-=i[x]}if(I=1<<v,f[0]+I>fje)return lje;r[b]=C=f[0],f[0]+=I,0!==b?(a[b]=y,o[0]=v,o[1]=A,v=y>>>E-A,o[2]=C-r[b-1]-v,d.set(o,3*(r[b-1]+v))):u[0]=C}for(o[1]=O-E,T>=n?o[0]=192:p[T]<s?(o[0]=p[T]<256?0:96,o[2]=p[T++]):(o[0]=l[p[T]-s]+16+64,o[2]=c[p[T++]-s]),_=1<<O-E,v=y>>>E;v<I;v+=_)d.set(o,3*(C+v));for(v=1<<O-1;0!==(y&v);v>>>=1)y^=v;y^=v,w=(1<<E)-1;while((y&w)!=a[b])b--,E-=A,w=(1<<E)-1}}return 0!==S&&1!=g?hje:rje}function c(e){let s;for(t||(t=[],n=[],i=new Int32Array(Tje+1),o=[],r=new Int32Array(Tje),a=new Int32Array(Tje+1)),n.length<e&&(n=[]),s=0;s<e;s++)n[s]=0;for(s=0;s<Tje+1;s++)i[s]=0;for(s=0;s<3;s++)o[s]=0;r.set(i.subarray(0,Tje),0),a.set(i.subarray(0,Tje+1),0)}e.inflate_trees_bits=function(e,i,o,r,a){let l;return c(19),t[0]=0,l=s(e,0,19,19,null,null,o,i,r,t,n),l==lje?a.msg="oversubscribed dynamic bit lengths tree":l!=hje&&0!==i[0]||(a.msg="incomplete dynamic bit lengths tree",l=lje),l},e.inflate_trees_dynamic=function(e,i,o,r,a,l,u,h,d){let f;return c(288),t[0]=0,f=s(o,0,e,257,vje,Oje,l,r,h,t,n),f!=rje||0===r[0]?(f==lje?d.msg="oversubscribed literal/length tree":f!=uje&&(d.msg="incomplete literal/length tree",f=lje),f):(c(288),f=s(o,e,i,0,Aje,wje,u,a,h,t,n),f!=rje||0===a[0]&&e>257?(f==lje?d.msg="oversubscribed distance tree":f==hje?(d.msg="incomplete distance tree",f=lje):f!=uje&&(d.msg="empty distance tree with lengths",f=lje),f):rje)}}Cje.inflate_trees_fixed=function(e,t,n,i){return e[0]=_je,t[0]=gje,n[0]=bje,i[0]=yje,rje};const Eje=0,xje=1,Sje=2,Ije=3,Dje=4,Pje=5,jje=6,Rje=7,Lje=8,Mje=9;function Nje(){const e=this;let t,n,i,o,r=0,a=0,s=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0;function m(e,t,n,i,o,r,a,s){let c,l,u,h,d,f,p,m,_,g,b,y,v,O,A,w;p=s.next_in_index,m=s.avail_in,d=a.bitb,f=a.bitk,_=a.write,g=_<a.read?a.read-_-1:a.end-_,b=dje[e],y=dje[t];do{while(f<20)m--,d|=(255&s.read_byte(p++))<<f,f+=8;if(c=d&b,l=n,u=i,w=3*(u+c),0!==(h=l[w]))do{if(d>>=l[w+1],f-=l[w+1],0!==(16&h)){h&=15,v=l[w+2]+(d&dje[h]),d>>=h,f-=h;while(f<15)m--,d|=(255&s.read_byte(p++))<<f,f+=8;c=d&y,l=o,u=r,w=3*(u+c),h=l[w];do{if(d>>=l[w+1],f-=l[w+1],0!==(16&h)){h&=15;while(f<h)m--,d|=(255&s.read_byte(p++))<<f,f+=8;if(O=l[w+2]+(d&dje[h]),d>>=h,f-=h,g-=v,_>=O)A=_-O,_-A>0&&2>_-A?(a.win[_++]=a.win[A++],a.win[_++]=a.win[A++],v-=2):(a.win.set(a.win.subarray(A,A+2),_),_+=2,A+=2,v-=2);else{A=_-O;do{A+=a.end}while(A<0);if(h=a.end-A,v>h){if(v-=h,_-A>0&&h>_-A)do{a.win[_++]=a.win[A++]}while(0!==--h);else a.win.set(a.win.subarray(A,A+h),_),_+=h,A+=h,h=0;A=0}}if(_-A>0&&v>_-A)do{a.win[_++]=a.win[A++]}while(0!==--v);else a.win.set(a.win.subarray(A,A+v),_),_+=v,A+=v,v=0;break}if(0!==(64&h))return s.msg="invalid distance code",v=s.avail_in-m,v=f>>3<v?f>>3:v,m+=v,p-=v,f-=v<<3,a.bitb=d,a.bitk=f,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=_,lje;c+=l[w+2],c+=d&dje[h],w=3*(u+c),h=l[w]}while(1);break}if(0!==(64&h))return 0!==(32&h)?(v=s.avail_in-m,v=f>>3<v?f>>3:v,m+=v,p-=v,f-=v<<3,a.bitb=d,a.bitk=f,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=_,aje):(s.msg="invalid literal/length code",v=s.avail_in-m,v=f>>3<v?f>>3:v,m+=v,p-=v,f-=v<<3,a.bitb=d,a.bitk=f,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=_,lje);if(c+=l[w+2],c+=d&dje[h],w=3*(u+c),0===(h=l[w])){d>>=l[w+1],f-=l[w+1],a.win[_++]=l[w+2],g--;break}}while(1);else d>>=l[w+1],f-=l[w+1],a.win[_++]=l[w+2],g--}while(g>=258&&m>=10);return v=s.avail_in-m,v=f>>3<v?f>>3:v,m+=v,p-=v,f-=v<<3,a.bitb=d,a.bitk=f,s.avail_in=m,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=_,rje}e.init=function(e,r,a,s,c,l){t=Eje,h=e,d=r,i=a,f=s,o=c,p=l,n=null},e.proc=function(e,_,g){let b,y,v,O,A,w,T,C=0,E=0,x=0;x=_.next_in_index,O=_.avail_in,C=e.bitb,E=e.bitk,A=e.write,w=A<e.read?e.read-A-1:e.end-A;while(1)switch(t){case Eje:if(w>=258&&O>=10&&(e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,g=m(h,d,i,f,o,p,e,_),x=_.next_in_index,O=_.avail_in,C=e.bitb,E=e.bitk,A=e.write,w=A<e.read?e.read-A-1:e.end-A,g!=rje)){t=g==aje?Rje:Mje;break}s=h,n=i,a=f,t=xje;case xje:b=s;while(E<b){if(0===O)return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);g=rje,O--,C|=(255&_.read_byte(x++))<<E,E+=8}if(y=3*(a+(C&dje[b])),C>>>=n[y+1],E-=n[y+1],v=n[y],0===v){c=n[y+2],t=jje;break}if(0!==(16&v)){l=15&v,r=n[y+2],t=Sje;break}if(0===(64&v)){s=v,a=y/3+n[y+2];break}if(0!==(32&v)){t=Rje;break}return t=Mje,_.msg="invalid literal/length code",g=lje,e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);case Sje:b=l;while(E<b){if(0===O)return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);g=rje,O--,C|=(255&_.read_byte(x++))<<E,E+=8}r+=C&dje[b],C>>=b,E-=b,s=d,n=o,a=p,t=Ije;case Ije:b=s;while(E<b){if(0===O)return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);g=rje,O--,C|=(255&_.read_byte(x++))<<E,E+=8}if(y=3*(a+(C&dje[b])),C>>=n[y+1],E-=n[y+1],v=n[y],0!==(16&v)){l=15&v,u=n[y+2],t=Dje;break}if(0===(64&v)){s=v,a=y/3+n[y+2];break}return t=Mje,_.msg="invalid distance code",g=lje,e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);case Dje:b=l;while(E<b){if(0===O)return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);g=rje,O--,C|=(255&_.read_byte(x++))<<E,E+=8}u+=C&dje[b],C>>=b,E-=b,t=Pje;case Pje:T=A-u;while(T<0)T+=e.end;while(0!==r){if(0===w&&(A==e.end&&0!==e.read&&(A=0,w=A<e.read?e.read-A-1:e.end-A),0===w&&(e.write=A,g=e.inflate_flush(_,g),A=e.write,w=A<e.read?e.read-A-1:e.end-A,A==e.end&&0!==e.read&&(A=0,w=A<e.read?e.read-A-1:e.end-A),0===w)))return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);e.win[A++]=e.win[T++],w--,T==e.end&&(T=0),r--}t=Eje;break;case jje:if(0===w&&(A==e.end&&0!==e.read&&(A=0,w=A<e.read?e.read-A-1:e.end-A),0===w&&(e.write=A,g=e.inflate_flush(_,g),A=e.write,w=A<e.read?e.read-A-1:e.end-A,A==e.end&&0!==e.read&&(A=0,w=A<e.read?e.read-A-1:e.end-A),0===w)))return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);g=rje,e.win[A++]=c,w--,t=Eje;break;case Rje:if(E>7&&(E-=8,O++,x--),e.write=A,g=e.inflate_flush(_,g),A=e.write,w=A<e.read?e.read-A-1:e.end-A,e.read!=e.write)return e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);t=Lje;case Lje:return g=aje,e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);case Mje:return g=lje,e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g);default:return g=cje,e.bitb=C,e.bitk=E,_.avail_in=O,_.total_in+=x-_.next_in_index,_.next_in_index=x,e.write=A,e.inflate_flush(_,g)}},e.free=function(){}}const Bje=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fje=0,zje=1,kje=2,Uje=3,Vje=4,Hje=5,Gje=6,Wje=7,qje=8,Yje=9;function Xje(e,t){const n=this;let i,o=Fje,r=0,a=0,s=0;const c=[0],l=[0],u=new Nje;let h=0,d=new Int32Array(3*fje);const f=0,p=new Cje;n.bitk=0,n.bitb=0,n.win=new Uint8Array(t),n.end=t,n.read=0,n.write=0,n.reset=function(e,t){t&&(t[0]=f),o==Gje&&u.free(e),o=Fje,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(e,null),n.inflate_flush=function(e,t){let i,o,r;return o=e.next_out_index,r=n.read,i=(r<=n.write?n.write:n.end)-r,i>e.avail_out&&(i=e.avail_out),0!==i&&t==hje&&(t=rje),e.avail_out-=i,e.total_out+=i,e.next_out.set(n.win.subarray(r,r+i),o),o+=i,r+=i,r==n.end&&(r=0,n.write==n.end&&(n.write=0),i=n.write-r,i>e.avail_out&&(i=e.avail_out),0!==i&&t==hje&&(t=rje),e.avail_out-=i,e.total_out+=i,e.next_out.set(n.win.subarray(r,r+i),o),o+=i,r+=i),e.next_out_index=o,n.read=r,t},n.proc=function(e,t){let f,m,_,g,b,y,v,O;g=e.next_in_index,b=e.avail_in,m=n.bitb,_=n.bitk,y=n.write,v=y<n.read?n.read-y-1:n.end-y;while(1){let A,w,T,C,E,x,S,I;switch(o){case Fje:while(_<3){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}switch(f=7&m,h=1&f,f>>>1){case 0:m>>>=3,_-=3,f=7&_,m>>>=f,_-=f,o=zje;break;case 1:A=[],w=[],T=[[]],C=[[]],Cje.inflate_trees_fixed(A,w,T,C),u.init(A[0],w[0],T[0],0,C[0],0),m>>>=3,_-=3,o=Gje;break;case 2:m>>>=3,_-=3,o=Uje;break;case 3:return m>>>=3,_-=3,o=Yje,e.msg="invalid block type",t=lje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t)}break;case zje:while(_<32){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}if((~m>>>16&65535)!=(65535&m))return o=Yje,e.msg="invalid stored block lengths",t=lje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);r=65535&m,m=_=0,o=0!==r?kje:0!==h?Wje:Fje;break;case kje:if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);if(0===v&&(y==n.end&&0!==n.read&&(y=0,v=y<n.read?n.read-y-1:n.end-y),0===v&&(n.write=y,t=n.inflate_flush(e,t),y=n.write,v=y<n.read?n.read-y-1:n.end-y,y==n.end&&0!==n.read&&(y=0,v=y<n.read?n.read-y-1:n.end-y),0===v)))return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);if(t=rje,f=r,f>b&&(f=b),f>v&&(f=v),n.win.set(e.read_buf(g,f),y),g+=f,b-=f,y+=f,v-=f,0!==(r-=f))break;o=0!==h?Wje:Fje;break;case Uje:while(_<14){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}if(a=f=16383&m,(31&f)>29||(f>>5&31)>29)return o=Yje,e.msg="too many length or distance symbols",t=lje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);if(f=258+(31&f)+(f>>5&31),!i||i.length<f)i=[];else for(O=0;O<f;O++)i[O]=0;m>>>=14,_-=14,s=0,o=Vje;case Vje:while(s<4+(a>>>10)){while(_<3){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}i[Bje[s++]]=7&m,m>>>=3,_-=3}while(s<19)i[Bje[s++]]=0;if(c[0]=7,f=p.inflate_trees_bits(i,c,l,d,e),f!=rje)return t=f,t==lje&&(i=null,o=Yje),n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);s=0,o=Hje;case Hje:while(1){if(f=a,s>=258+(31&f)+(f>>5&31))break;let r,u;f=c[0];while(_<f){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}if(f=d[3*(l[0]+(m&dje[f]))+1],u=d[3*(l[0]+(m&dje[f]))+2],u<16)m>>>=f,_-=f,i[s++]=u;else{O=18==u?7:u-14,r=18==u?11:3;while(_<f+O){if(0===b)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);t=rje,b--,m|=(255&e.read_byte(g++))<<_,_+=8}if(m>>>=f,_-=f,r+=m&dje[O],m>>>=O,_-=O,O=s,f=a,O+r>258+(31&f)+(f>>5&31)||16==u&&O<1)return i=null,o=Yje,e.msg="invalid bit length repeat",t=lje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);u=16==u?i[O-1]:0;do{i[O++]=u}while(0!==--r);s=O}}if(l[0]=-1,E=[],x=[],S=[],I=[],E[0]=9,x[0]=6,f=a,f=p.inflate_trees_dynamic(257+(31&f),1+(f>>5&31),i,E,x,S,I,d,e),f!=rje)return f==lje&&(i=null,o=Yje),t=f,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);u.init(E[0],x[0],d,S[0],d,I[0]),o=Gje;case Gje:if(n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,(t=u.proc(n,e,t))!=aje)return n.inflate_flush(e,t);if(t=rje,u.free(e),g=e.next_in_index,b=e.avail_in,m=n.bitb,_=n.bitk,y=n.write,v=y<n.read?n.read-y-1:n.end-y,0===h){o=Fje;break}o=Wje;case Wje:if(n.write=y,t=n.inflate_flush(e,t),y=n.write,v=y<n.read?n.read-y-1:n.end-y,n.read!=n.write)return n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);o=qje;case qje:return t=aje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);case Yje:return t=lje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t);default:return t=cje,n.bitb=m,n.bitk=_,e.avail_in=b,e.total_in+=g-e.next_in_index,e.next_in_index=g,n.write=y,n.inflate_flush(e,t)}}},n.free=function(e){n.reset(e,null),n.win=null,d=null},n.set_dictionary=function(e,t,i){n.win.set(e.subarray(t,t+i),0),n.read=n.write=i},n.sync_point=function(){return o==zje?1:0}}const Kje=32,$je=8,Jje=0,Qje=1,Zje=2,eRe=3,tRe=4,nRe=5,iRe=6,oRe=7,rRe=12,aRe=13,sRe=[0,0,255,255];function cRe(){const e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=oRe,e.istate.blocks.reset(e,null),rje):cje}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,rje},e.inflateInit=function(n,i){return n.msg=null,e.blocks=null,i<8||i>15?(e.inflateEnd(n),cje):(e.wbits=i,n.istate.blocks=new Xje(n,1<<i),t(n),rje)},e.inflate=function(e,t){let n,i;if(!e||!e.istate||!e.next_in)return cje;const o=e.istate;t=t==mje?hje:rje,n=hje;while(1)switch(o.mode){case Jje:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,(15&(o.method=e.read_byte(e.next_in_index++)))!=$je){o.mode=aRe,e.msg="unknown compression method",o.marker=5;break}if(8+(o.method>>4)>o.wbits){o.mode=aRe,e.msg="invalid win size",o.marker=5;break}o.mode=Qje;case Qje:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,i=255&e.read_byte(e.next_in_index++),((o.method<<8)+i)%31!==0){o.mode=aRe,e.msg="incorrect header check",o.marker=5;break}if(0===(i&Kje)){o.mode=oRe;break}o.mode=Zje;case Zje:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,o.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,o.mode=eRe;case eRe:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,o.mode=tRe;case tRe:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,o.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,o.mode=nRe;case nRe:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,o.need+=255&e.read_byte(e.next_in_index++),o.mode=iRe,sje);case iRe:return o.mode=aRe,e.msg="need dictionary",o.marker=0,cje;case oRe:if(n=o.blocks.proc(e,n),n==lje){o.mode=aRe,o.marker=0;break}if(n==rje&&(n=t),n!=aje)return n;n=t,o.blocks.reset(e,o.was),o.mode=rRe;case rRe:return e.avail_in=0,aje;case aRe:return lje;default:return cje}},e.inflateSetDictionary=function(e,t,n){let i=0,o=n;if(!e||!e.istate||e.istate.mode!=iRe)return cje;const r=e.istate;return o>=1<<r.wbits&&(o=(1<<r.wbits)-1,i=n-o),r.blocks.set_dictionary(t,i,o),r.mode=oRe,rje},e.inflateSync=function(e){let n,i,o,r,a;if(!e||!e.istate)return cje;const s=e.istate;if(s.mode!=aRe&&(s.mode=aRe,s.marker=0),0===(n=e.avail_in))return hje;i=e.next_in_index,o=s.marker;while(0!==n&&o<4)e.read_byte(i)==sRe[o]?o++:o=0!==e.read_byte(i)?0:4-o,i++,n--;return e.total_in+=i-e.next_in_index,e.next_in_index=i,e.avail_in=n,s.marker=o,4!=o?lje:(r=e.total_in,a=e.total_out,t(e),e.total_in=r,e.total_out=a,s.mode=oRe,rje)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():cje}}function lRe(){}function uRe(e){const t=this,n=new lRe,i=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,o=pje,r=new Uint8Array(i);let a=!1;n.inflateInit(),n.next_out=r,t.append=function(e,t){const s=[];let c,l,u=0,h=0,d=0;if(0!==e.length){n.next_in_index=0,n.next_in=e,n.avail_in=e.length;do{if(n.next_out_index=0,n.avail_out=i,0!==n.avail_in||a||(n.next_in_index=0,a=!0),c=n.inflate(o),a&&c===hje){if(0!==n.avail_in)throw new Error("inflating: bad input")}else if(c!==rje&&c!==aje)throw new Error("inflating: "+n.msg);if((a||c===aje)&&n.avail_in===e.length)throw new Error("inflating: bad input");n.next_out_index&&(n.next_out_index===i?s.push(new Uint8Array(r)):s.push(r.slice(0,n.next_out_index))),d+=n.next_out_index,t&&n.next_in_index>0&&n.next_in_index!=u&&(t(n.next_in_index),u=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return s.length>1?(l=new Uint8Array(d),s.forEach((function(e){l.set(e,h),h+=e.length}))):l=s[0]||new Uint8Array(0),l}},t.flush=function(){n.inflateEnd()}}lRe.prototype={inflateInit:function(e){const t=this;return t.istate=new cRe,e||(e=oje),t.istate.inflateInit(t,e)},inflate:function(e){const t=this;return t.istate?t.istate.inflate(t,e):cje},inflateEnd:function(){const e=this;if(!e.istate)return cje;const t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){const e=this;return e.istate?e.istate.inflateSync(e):cje},inflateSetDictionary:function(e,t){const n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):cje},read_byte:function(e){const t=this;return t.next_in[e]},read_buf:function(e,t){const n=this;return n.next_in.subarray(e,e+t)}};var hRe=uRe;const dRe={chunkSize:524288,maxWorkers:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},fRe=Object.assign({},dRe);function pRe(){return fRe}function mRe(e){if(void 0!==e.baseURL&&(fRe.baseURL=e.baseURL),void 0!==e.chunkSize&&(fRe.chunkSize=e.chunkSize),void 0!==e.maxWorkers&&(fRe.maxWorkers=e.maxWorkers),void 0!==e.terminateWorkerTimeout&&(fRe.terminateWorkerTimeout=e.terminateWorkerTimeout),void 0!==e.useWebWorkers&&(fRe.useWebWorkers=e.useWebWorkers),void 0!==e.Deflate&&(fRe.Deflate=e.Deflate),void 0!==e.Inflate&&(fRe.Inflate=e.Inflate),void 0!==e.workerScripts){if(e.workerScripts.deflate){if(!Array.isArray(e.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");fRe.workerScripts||(fRe.workerScripts={}),fRe.workerScripts.deflate=e.workerScripts.deflate}if(e.workerScripts.inflate){if(!Array.isArray(e.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");fRe.workerScripts||(fRe.workerScripts={}),fRe.workerScripts.inflate=e.workerScripts.inflate}}}const _Re=[];for(let Set=0;Set<256;Set++){let e=Set;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;_Re[Set]=e}class gRe{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let n=0,i=0|e.length;n<i;n++)t=t>>>8^_Re[255&(t^e[n])];this.crc=t}get(){return~this.crc}}var bRe=gRe,yRe=vRe;function vRe(e){if("undefined"==typeof TextEncoder){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new TextEncoder).encode(e)}const ORe={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],i=ORe.getPartial(n);return 32===i?e.concat(t):ORe._shiftRight(t,i,0|n,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+ORe.getPartial(n)},clamp(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));const n=e.length;return t&=31,n>0&&t&&(e[n-1]=ORe.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial(e){return Math.round(e/1099511627776)||32},_shiftRight(e,t,n,i){for(void 0===i&&(i=[]);t>=32;t-=32)i.push(n),n=0;if(0===t)return i.concat(e);for(let a=0;a<e.length;a++)i.push(n|e[a]>>>t),n=e[a]<<32-t;const o=e.length?e[e.length-1]:0,r=ORe.getPartial(o);return i.push(ORe.partial(t+r&31,t+r>32?n:i.pop(),1)),i}},ARe={bytes:{fromBits(e){const t=ORe.bitLength(e),n=t/8,i=new Uint8Array(n);let o;for(let r=0;r<n;r++)0===(3&r)&&(o=e[r/4]),i[r]=o>>>24,o<<=8;return i},toBits(e){const t=[];let n,i=0;for(n=0;n<e.length;n++)i=i<<8|e[n],3===(3&n)&&(t.push(i),i=0);return 3&n&&t.push(ORe.partial(8*(3&n),i)),t}}},wRe={sha1:function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()}};wRe.sha1.prototype={blockSize:512,reset:function(){const e=this;return e._h=this._init.slice(0),e._buffer=[],e._length=0,e},update:function(e){const t=this;"string"===typeof e&&(e=ARe.utf8String.toBits(e));const n=t._buffer=ORe.concat(t._buffer,e),i=t._length,o=t._length=i+ORe.bitLength(e);if(o>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const r=new Uint32Array(n);let a=0;for(let s=t.blockSize+i-(t.blockSize+i&t.blockSize-1);s<=o;s+=t.blockSize)t._block(r.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),t},finalize:function(){const e=this;let t=e._buffer;const n=e._h;t=ORe.concat(t,[ORe.partial(1,1)]);for(let i=t.length+2;15&i;i++)t.push(0);t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);while(t.length)e._block(t.splice(0,16));return e.reset(),n},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,t,n,i){return e<=19?t&n|~t&i:e<=39?t^n^i:e<=59?t&n|t&i|n&i:e<=79?t^n^i:void 0},_S:function(e,t){return t<<e|t>>>32-e},_block:function(e){const t=this,n=t._h,i=Array(80);for(let l=0;l<16;l++)i[l]=e[l];let o=n[0],r=n[1],a=n[2],s=n[3],c=n[4];for(let l=0;l<=79;l++){l>=16&&(i[l]=t._S(1,i[l-3]^i[l-8]^i[l-14]^i[l-16]));const e=t._S(5,o)+t._f(l,r,a,s)+c+i[l]+t._key[Math.floor(l/20)]|0;c=s,s=a,a=t._S(30,r),r=o,o=e}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0}};const TRe={aes:class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const n=t._tables[0][4],i=t._tables[1],o=e.length;let r,a,s,c=1;if(4!==o&&6!==o&&8!==o)throw new Error("invalid aes key size");for(t._key=[a=e.slice(0),s=[]],r=o;r<4*o+28;r++){let e=a[r-1];(r%o===0||8===o&&r%o===4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],r%o===0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),a[r]=a[r-o]^e}for(let l=0;r;l++,r--){const e=a[3&l?r:r-4];s[l]=r<=4||l<4?e:i[0][n[e>>>24]]^i[1][n[e>>16&255]]^i[2][n[e>>8&255]]^i[3][n[255&e]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],n=e[4],i=t[4],o=[],r=[];let a,s,c,l;for(let u=0;u<256;u++)r[(o[u]=u<<1^283*(u>>7))^u]=u;for(let u=a=0;!n[u];u^=s||1,a=r[a]||1){let r=a^a<<1^a<<2^a<<3^a<<4;r=r>>8^255&r^99,n[u]=r,i[r]=u,l=o[c=o[s=o[u]]];let h=16843009*l^65537*c^257*s^16843008*u,d=257*o[r]^16843008*r;for(let n=0;n<4;n++)e[n][u]=d=d<<24^d>>>8,t[n][r]=h=h<<24^h>>>8}for(let u=0;u<5;u++)e[u]=e[u].slice(0),t[u]=t[u].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const n=this._key[t],i=n.length/4-2,o=[0,0,0,0],r=this._tables[t],a=r[0],s=r[1],c=r[2],l=r[3],u=r[4];let h,d,f,p=e[0]^n[0],m=e[t?3:1]^n[1],_=e[2]^n[2],g=e[t?1:3]^n[3],b=4;for(let y=0;y<i;y++)h=a[p>>>24]^s[m>>16&255]^c[_>>8&255]^l[255&g]^n[b],d=a[m>>>24]^s[_>>16&255]^c[g>>8&255]^l[255&p]^n[b+1],f=a[_>>>24]^s[g>>16&255]^c[p>>8&255]^l[255&m]^n[b+2],g=a[g>>>24]^s[p>>16&255]^c[m>>8&255]^l[255&_]^n[b+3],b+=4,p=h,m=d,_=f;for(let y=0;y<4;y++)o[t?3&-y:y]=u[p>>>24]<<24^u[m>>16&255]<<16^u[_>>8&255]<<8^u[255&g]^n[b++],h=p,p=m,m=_,_=g,g=h;return o}}},CRe={getRandomValues(e){const t=new Uint32Array(e.buffer),n=e=>{let t=987654321;const n=4294967295;return function(){t=36969*(65535&t)+(t>>16)&n,e=18e3*(65535&e)+(e>>16)&n;const i=((t<<16)+e&n)/4294967296+.5;return i*(Math.random()>.5?1:-1)}};for(let i,o=0;o<e.length;o+=4){const e=n(4294967296*(i||Math.random()));i=987654071*e(),t[o/4]=4294967296*e()|0}return e}},ERe={ctrGladman:class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255===(e>>24&255)){let t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,n){let i;if(!(i=t.length))return[];const o=ORe.bitLength(t);for(let r=0;r<i;r+=4){this.incCounter(n);const i=e.encrypt(n);t[r]^=i[0],t[r+1]^=i[1],t[r+2]^=i[2],t[r+3]^=i[3]}return ORe.clamp(t,o)}}},xRe={importKey(e){return new xRe.hmacSha1(ARe.bytes.toBits(e))},pbkdf2(e,t,n,i){if(n=n||1e4,i<0||n<0)throw new Error("invalid params to pbkdf2");const o=1+(i>>5)<<2;let r,a,s,c,l;const u=new ArrayBuffer(o),h=new DataView(u);let d=0;const f=ORe;for(t=ARe.bytes.toBits(t),l=1;d<(o||1);l++){for(r=a=e.encrypt(f.concat(t,[l])),s=1;s<n;s++)for(a=e.encrypt(a),c=0;c<a.length;c++)r[c]^=a[c];for(s=0;d<(o||1)&&s<r.length;s++)h.setInt32(d,r[s]),d+=4}return u.slice(0,i/8)},hmacSha1:class{constructor(e){const t=this,n=t._hash=wRe.sha1,i=[[],[]],o=n.prototype.blockSize/32;t._baseHash=[new n,new n],e.length>o&&(e=n.hash(e));for(let r=0;r<o;r++)i[0][r]=909522486^e[r],i[1][r]=1549556828^e[r];t._baseHash[0].update(i[0]),t._baseHash[1].update(i[1]),t._resultHash=new n(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){const t=this;t._updated=!0,t._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}encrypt(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},SRe="Invalid pasword",IRe=16,DRe="raw",PRe={name:"PBKDF2"},jRe={name:"HMAC"},RRe="SHA-1",LRe=Object.assign({hash:jRe},PRe),MRe=Object.assign({iterations:1e3,hash:{name:RRe}},PRe),NRe=["deriveBits"],BRe=[8,12,16],FRe=[16,24,32],zRe=10,kRe=[0,0,0,0],URe="undefined"!=typeof crypto,VRe=URe&&"undefined"!=typeof crypto.subtle,HRe=ARe.bytes,GRe=TRe.aes,WRe=ERe.ctrGladman,qRe=xRe.hmacSha1;class YRe{constructor(e,t,n){Object.assign(this,{password:e,signed:t,strength:n-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;if(t.password){const n=oLe(e,0,BRe[t.strength]+2);await $Re(t,n,t.password),t.password=null,t.aesCtrGladman=new WRe(new GRe(t.keys.key),Array.from(kRe)),t.hmac=new qRe(t.keys.authentication),e=oLe(e,BRe[t.strength]+2)}const n=new Uint8Array(e.length-zRe-(e.length-zRe)%IRe);return KRe(t,e,n,0,zRe,!0)}flush(){const e=this,t=e.pendingInput,n=oLe(t,0,t.length-zRe),i=oLe(t,t.length-zRe);let o=new Uint8Array(0);if(n.length){const t=HRe.toBits(n);e.hmac.update(t);const i=e.aesCtrGladman.update(t);o=HRe.fromBits(i)}let r=!0;if(e.signed){const t=oLe(HRe.fromBits(e.hmac.digest()),0,zRe);for(let e=0;e<zRe;e++)t[e]!=i[e]&&(r=!1)}return{valid:r,data:o}}}class XRe{constructor(e,t){Object.assign(this,{password:e,strength:t-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;let n=new Uint8Array(0);t.password&&(n=await JRe(t,t.password),t.password=null,t.aesCtrGladman=new WRe(new GRe(t.keys.key),Array.from(kRe)),t.hmac=new qRe(t.keys.authentication));const i=new Uint8Array(n.length+e.length-e.length%IRe);return i.set(n,0),KRe(t,e,i,n.length,0)}flush(){const e=this;let t=new Uint8Array(0);if(e.pendingInput.length){const n=e.aesCtrGladman.update(HRe.toBits(e.pendingInput));e.hmac.update(n),t=HRe.fromBits(n)}const n=oLe(HRe.fromBits(e.hmac.digest()),0,zRe);return{data:nLe(t,n),signature:n}}}function KRe(e,t,n,i,o,r){const a=t.length-o;let s;for(e.pendingInput.length&&(t=nLe(e.pendingInput,t),n=iLe(n,a-a%IRe)),s=0;s<=a-IRe;s+=IRe){const o=HRe.toBits(oLe(t,s,s+IRe));r&&e.hmac.update(o);const a=e.aesCtrGladman.update(o);r||e.hmac.update(a),n.set(HRe.fromBits(a),s+i)}return e.pendingInput=oLe(t,s),n}async function $Re(e,t,n){await QRe(e,n,oLe(t,0,BRe[e.strength]));const i=oLe(t,BRe[e.strength]),o=e.keys.passwordVerification;if(o[0]!=i[0]||o[1]!=i[1])throw new Error(SRe)}async function JRe(e,t){const n=ZRe(new Uint8Array(BRe[e.strength]));return await QRe(e,t,n),nLe(n,e.keys.passwordVerification)}async function QRe(e,t,n){const i=yRe(t),o=await eLe(DRe,i,LRe,!1,NRe),r=await tLe(Object.assign({salt:n},MRe),o,8*(2*FRe[e.strength]+2)),a=new Uint8Array(r);e.keys={key:HRe.toBits(oLe(a,0,FRe[e.strength])),authentication:HRe.toBits(oLe(a,FRe[e.strength],2*FRe[e.strength])),passwordVerification:oLe(a,2*FRe[e.strength])}}function ZRe(e){return URe&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(e):CRe.getRandomValues(e)}function eLe(e,t,n,i,o){return URe&&VRe&&"function"==typeof crypto.subtle.importKey?crypto.subtle.importKey(e,t,n,i,o):xRe.importKey(t)}async function tLe(e,t,n){return URe&&VRe&&"function"==typeof crypto.subtle.deriveBits?await crypto.subtle.deriveBits(e,t,n):xRe.pbkdf2(t,e.salt,MRe.iterations,n)}function nLe(e,t){let n=e;return e.length+t.length&&(n=new Uint8Array(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function iLe(e,t){if(t&&t>e.length){const n=e;e=new Uint8Array(t),e.set(n,0)}return e}function oLe(e,t,n){return e.subarray(t,n)}const rLe=12;class aLe{constructor(e,t){const n=this;Object.assign(n,{password:e,passwordVerification:t}),uLe(n,e)}append(e){const t=this;if(t.password){const n=cLe(t,e.subarray(0,rLe));if(t.password=null,n[rLe-1]!=t.passwordVerification)throw new Error(SRe);e=e.subarray(rLe)}return cLe(t,e)}flush(){return{valid:!0,data:new Uint8Array(0)}}}class sLe{constructor(e,t){const n=this;Object.assign(n,{password:e,passwordVerification:t}),uLe(n,e)}append(e){const t=this;let n,i;if(t.password){t.password=null;const o=crypto.getRandomValues(new Uint8Array(rLe));o[rLe-1]=t.passwordVerification,n=new Uint8Array(e.length+o.length),n.set(lLe(t,o),0),i=rLe}else n=new Uint8Array(e.length),i=0;return n.set(lLe(t,e),i),n}flush(){return{data:new Uint8Array(0)}}}function cLe(e,t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=dLe(e)^t[i],hLe(e,n[i]);return n}function lLe(e,t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=dLe(e)^t[i],hLe(e,t[i]);return n}function uLe(e,t){e.keys=[305419896,591751049,878082192],e.crcKey0=new bRe(e.keys[0]),e.crcKey2=new bRe(e.keys[2]);for(let n=0;n<t.length;n++)hLe(e,t.charCodeAt(n))}function hLe(e,t){e.crcKey0.append([t]),e.keys[0]=~e.crcKey0.get(),e.keys[1]=pLe(e.keys[1]+fLe(e.keys[0])),e.keys[1]=pLe(Math.imul(e.keys[1],134775813)+1),e.crcKey2.append([e.keys[1]>>>24]),e.keys[2]=~e.crcKey2.get()}function dLe(e){const t=2|e.keys[2];return fLe(Math.imul(t,1^t)>>>8)}function fLe(e){return 255&e}function pLe(e){return 4294967295&e}const mLe="deflate",_Le="inflate",gLe="Invalid signature";class bLe{constructor(e,{signature:t,password:n,signed:i,compressed:o,zipCrypto:r,passwordVerification:a,encryptionStrength:s},{chunkSize:c}){const l=Boolean(n);Object.assign(this,{signature:t,encrypted:l,signed:i,compressed:o,inflate:o&&new e({chunkSize:c}),crc32:i&&new bRe,zipCrypto:r,decrypt:l&&r?new aLe(n,a):new YRe(n,i,s)})}async append(e){const t=this;return t.encrypted&&e.length&&(e=await t.decrypt.append(e)),t.compressed&&e.length&&(e=await t.inflate.append(e)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),e}async flush(){const e=this;let t,n=new Uint8Array(0);if(e.encrypted){const t=e.decrypt.flush();if(!t.valid)throw new Error(gLe);n=t.data}if((!e.encrypted||e.zipCrypto)&&e.signed){const n=new DataView(new Uint8Array(4).buffer);if(t=e.crc32.get(),n.setUint32(0,t),e.signature!=n.getUint32(0,!1))throw new Error(gLe)}return e.compressed&&(n=await e.inflate.append(n)||new Uint8Array(0),await e.inflate.flush()),{data:n,signature:t}}}class yLe{constructor(e,{encrypted:t,signed:n,compressed:i,level:o,zipCrypto:r,password:a,passwordVerification:s,encryptionStrength:c},{chunkSize:l}){Object.assign(this,{encrypted:t,signed:n,compressed:i,deflate:i&&new e({level:o||5,chunkSize:l}),crc32:n&&new bRe,zipCrypto:r,encrypt:t&&r?new sLe(a,s):new XRe(a,c)})}async append(e){const t=this;let n=e;return t.compressed&&e.length&&(n=await t.deflate.append(e)),t.encrypted&&n.length&&(n=await t.encrypt.append(n)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),n}async flush(){const e=this;let t,n=new Uint8Array(0);if(e.compressed&&(n=await e.deflate.flush()||new Uint8Array(0)),e.encrypted){n=await e.encrypt.append(n);const i=e.encrypt.flush();t=i.signature;const o=new Uint8Array(n.length+i.data.length);o.set(n,0),o.set(i.data,n.length),n=o}return e.encrypted&&!e.zipCrypto||!e.signed||(t=e.crc32.get()),{data:n,signature:t}}}function vLe(e,t,n){return t.codecType.startsWith(mLe)?new yLe(e,t,n):t.codecType.startsWith(_Le)?new bLe(e,t,n):void 0}const OLe="init",ALe="append",wLe="flush",TLe="message";let CLe=!0;var ELe=(e,t,n,i,o,r,a)=>(Object.assign(e,{busy:!0,codecConstructor:t,options:Object.assign({},n),scripts:a,terminate(){e.worker&&!e.busy&&(e.worker.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,o(e)}}),r?SLe(e,i):xLe(e,i));function xLe(e,t){const n=vLe(e.codecConstructor,e.options,t);return{async append(t){try{return await n.append(t)}catch(i){throw e.onTaskFinished(),i}},async flush(){try{return await n.flush()}finally{e.onTaskFinished()}},abort(){e.onTaskFinished()}}}function SLe(e,t){let n;const i={type:"module"};if(!e.interface){if(CLe)try{e.worker=o({},t.baseURL)}catch(c){CLe=!1,e.worker=o(i,t.baseURL)}else e.worker=o(i,t.baseURL);e.worker.addEventListener(TLe,s,!1),e.interface={append(e){return r({type:ALe,data:e})},flush(){return r({type:wLe})},abort(){e.onTaskFinished()}}}return e.interface;function o(t,n){let i,o;i=e.scripts[0],"function"==typeof i&&(i=i());try{o=new URL(i,n)}catch(c){o=i}return new Worker(o,t)}async function r(i){if(!n){const n=e.options,i=e.scripts.slice(1);await a({scripts:i,type:OLe,options:n,config:{chunkSize:t.chunkSize}})}return a(i)}function a(t){const i=e.worker,o=new Promise((e,t)=>n={resolve:e,reject:t});try{if(t.data)try{t.data=t.data.buffer,i.postMessage(t,[t.data])}catch(c){i.postMessage(t)}else i.postMessage(t)}catch(r){n.reject(r),n=null,e.onTaskFinished()}return o}function s(t){const i=t.data;if(n){const t=i.error,o=i.type;if(t){const i=new Error(t.message);i.stack=t.stack,n.reject(i),n=null,e.onTaskFinished()}else if(o==OLe||o==wLe||o==ALe){const t=i.data;o==wLe?(n.resolve({data:new Uint8Array(t),signature:i.signature}),n=null,e.onTaskFinished()):n.resolve(t&&new Uint8Array(t))}}}}let ILe=[];const DLe=[];function PLe(e,t,n){const i=!t.compressed&&!t.signed&&!t.encrypted,o=!i&&(t.useWebWorkers||void 0===t.useWebWorkers&&n.useWebWorkers),r=o&&n.workerScripts?n.workerScripts[t.codecType]:[];if(ILe.length<n.maxWorkers){const i={};return ILe.push(i),ELe(i,e,t,n,a,o,r)}{const i=ILe.find(e=>!e.busy);return i?(jLe(i),ELe(i,e,t,n,a,o,r)):new Promise(n=>DLe.push({resolve:n,codecConstructor:e,options:t,webWorker:o,scripts:r}))}function a(e){if(DLe.length){const[{resolve:t,codecConstructor:i,options:o,webWorker:r,scripts:s}]=DLe.splice(0,1);t(ELe(e,i,o,n,a,r,s))}else e.worker?(jLe(e),Number.isFinite(n.terminateWorkerTimeout)&&n.terminateWorkerTimeout>=0&&(e.terminateTimeout=setTimeout(()=>{ILe=ILe.filter(t=>t!=e),e.terminate()},n.terminateWorkerTimeout))):ILe=ILe.filter(t=>t!=e)}}function jLe(e){e.terminateTimeout&&(clearTimeout(e.terminateTimeout),e.terminateTimeout=null)}const RLe=64,LLe="Abort error";async function MLe(e,t,n,i,o,r,a){const s=Math.max(r.chunkSize,RLe);return c();async function c(r=0,l=0){const u=a.signal,h=o();if(r<h){NLe(u,e);const o=await t.readUint8Array(r+i,Math.min(s,h-r)),f=o.length;NLe(u,e);const p=await e.append(o);if(NLe(u,e),l+=await BLe(n,p),a.onprogress)try{a.onprogress(r+f,h)}catch(d){}return c(r+s,l)}{const t=await e.flush();return l+=await BLe(n,t.data),{signature:t.signature,length:l}}}}function NLe(e,t){if(e&&e.aborted)throw t.abort(),new Error(LLe)}async function BLe(e,t){return t.length&&await e.writeUint8Array(t),t.length}const FLe="text/plain";class zLe{constructor(){this.size=0}init(){this.initialized=!0}}class kLe extends zLe{}class ULe extends zLe{writeUint8Array(e){this.size+=e.length}}class VLe extends kLe{constructor(e){super(),this.blobReader=new WLe(new Blob([e],{type:FLe}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}class HLe extends ULe{constructor(e){super(),this.encoding=e,this.blob=new Blob([],{type:FLe})}writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:FLe})}getData(){if(this.blob.text)return this.blob.text();{const e=new FileReader;return new Promise((t,n)=>{e.onload=e=>t(e.target.result),e.onerror=()=>n(e.error),e.readAsText(this.blob,this.encoding)})}}}class GLe extends ULe{constructor(e){super(),this.data="data:"+(e||"")+";base64,",this.pending=[]}writeUint8Array(e){super.writeUint8Array(e);let t=0,n=this.pending;const i=this.pending.length;for(this.pending="",t=0;t<3*Math.floor((i+e.length)/3)-i;t++)n+=String.fromCharCode(e[t]);for(;t<e.length;t++)this.pending+=String.fromCharCode(e[t]);n.length>2?this.data+=btoa(n):this.pending=n}getData(){return this.data+btoa(this.pending)}}class WLe extends kLe{constructor(e){super(),this.blob=e,this.size=e.size}async readUint8Array(e,t){if(this.blob.arrayBuffer)return new Uint8Array(await this.blob.slice(e,e+t).arrayBuffer());{const n=new FileReader;return new Promise((i,o)=>{n.onload=e=>i(new Uint8Array(e.target.result)),n.onerror=()=>o(n.error),n.readAsArrayBuffer(this.blob.slice(e,e+t))})}}}class qLe extends ULe{constructor(e){super(),this.contentType=e,this.arrayBuffersMaxlength=8,YLe(this)}writeUint8Array(e){super.writeUint8Array(e),this.arrayBuffers.length==this.arrayBuffersMaxlength&&XLe(this),this.arrayBuffers.push(e.buffer)}getData(){return this.blob||(this.arrayBuffers.length&&XLe(this),this.blob=this.pendingBlob,YLe(this)),this.blob}}function YLe(e){e.pendingBlob=new Blob([],{type:e.contentType}),e.arrayBuffers=[]}function XLe(e){e.pendingBlob=new Blob([e.pendingBlob,...e.arrayBuffers],{type:e.contentType}),e.arrayBuffers=[]}const KLe=4294967295,$Le=65535,JLe=8,QLe=0,ZLe=99,eMe=67324752,tMe=134695760,nMe=33639248,iMe=101010256,oMe=101075792,rMe=117853008,aMe=22,sMe=20,cMe=56,lMe=aMe+sMe+cMe,uMe=1,hMe=1,dMe=39169,fMe=10,pMe=1,mMe=21589,_Me=28789,gMe=25461,bMe=1,yMe=6,vMe=8,OMe=2048,AMe=16,wMe=20,TMe=45,CMe=51,EMe="/",xMe=new Date(2107,11,31),SMe=new Date(1980,0,1),IMe="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split("");var DMe=e=>{let t="";for(let n=0;n<e.length;n++)t+=IMe[e[n]];return t},PMe=jMe;function jMe(e,t){if(t&&"cp437"==t.trim().toLowerCase())return DMe(e);if("undefined"==typeof TextDecoder){const t=new FileReader;return new Promise((n,i)=>{t.onload=e=>n(e.target.result),t.onerror=()=>i(t.error),t.readAsText(new Blob([e]))})}return new TextDecoder(t).decode(e)}const RMe=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class LMe{constructor(e){RMe.forEach(t=>this[t]=e[t])}}const MMe="File format is not recognized",NMe="End of central directory not found",BMe="End of Zip64 central directory not found",FMe="End of Zip64 central directory locator not found",zMe="Central directory header not found",kMe="Local file header not found",UMe="Zip64 extra field not found",VMe="File contains encrypted entry",HMe="Encryption method not supported",GMe="Compression method not supported",WMe="utf-8",qMe="cp437",YMe=["uncompressedSize","compressedSize","offset"];class XMe{constructor(e,t={}){Object.assign(this,{reader:e,options:t,config:pRe()})}async*getEntriesGenerator(e={}){const t=this,n=t.reader;if(n.initialized||await n.init(),n.size<aMe)throw new Error(MMe);const i=await iNe(n,iMe,n.size,aMe,16*$Le);if(!i)throw new Error(NMe);const o=dNe(i);let r=lNe(o,12),a=lNe(o,16),s=cNe(o,8),c=0;if(a==KLe||r==KLe||s==$Le){const e=await fNe(n,i.offset-sMe,sMe),t=dNe(e);if(lNe(t,0)!=rMe)throw new Error(BMe);a=uNe(t,8);let o=await fNe(n,a,cMe),l=dNe(o);const u=i.offset-sMe-cMe;if(lNe(l,0)!=oMe&&a!=u){const e=a;a=u,c=a-e,o=await fNe(n,a,cMe),l=dNe(o)}if(lNe(l,0)!=oMe)throw new Error(FMe);s=uNe(l,32),r=uNe(l,40),a-=r}if(a<0||a>=n.size)throw new Error(MMe);let l=0,u=await fNe(n,a,r),h=dNe(u);if(r){const e=i.offset-r;if(lNe(h,l)!=nMe&&a!=e){const t=a;a=e,c=a-t,u=await fNe(n,a,r),h=dNe(u)}}if(a<0||a>=n.size)throw new Error(MMe);for(let f=0;f<s;f++){const i=new KMe(n,t.config,t.options);if(lNe(h,l)!=nMe)throw new Error(zMe);$Me(i,h,l+6);const o=Boolean(i.bitFlag.languageEncodingFlag),r=l+46,a=r+i.filenameLength,p=a+i.extraFieldLength,m=cNe(h,l+4),_=0==(0&m);Object.assign(i,{versionMadeBy:m,msDosCompatible:_,compressedSize:0,uncompressedSize:0,commentLength:cNe(h,l+32),directory:_&&(sNe(h,l+38)&AMe)==AMe,offset:lNe(h,l+42)+c,internalFileAttribute:lNe(h,l+34),externalFileAttribute:lNe(h,l+38),rawFilename:u.subarray(r,a),filenameUTF8:o,commentUTF8:o,rawExtraField:u.subarray(a,p)});const g=p+i.commentLength;i.rawComment=u.subarray(p,g);const b=oNe(t,e,"filenameEncoding"),y=oNe(t,e,"commentEncoding"),[v,O]=await Promise.all([PMe(i.rawFilename,i.filenameUTF8?WMe:b||qMe),PMe(i.rawComment,i.commentUTF8?WMe:y||qMe)]);i.filename=v,i.comment=O,!i.directory&&i.filename.endsWith(EMe)&&(i.directory=!0),await JMe(i,i,h,l+6);const A=new LMe(i);if(A.getData=(e,t)=>i.getData(e,A,t),l=g,e.onprogress)try{e.onprogress(f+1,s,new LMe(i))}catch(d){}yield A}return!0}async getEntries(e={}){const t=[],n=this.getEntriesGenerator(e);let i=n.next();while(!(await i).done)t.push((await i).value),i=n.next();return t}async close(){}}class KMe{constructor(e,t,n){Object.assign(this,{reader:e,config:t,options:n})}async getData(e,t,n={}){const i=this,{reader:o,offset:r,extraFieldAES:a,compressionMethod:s,config:c,bitFlag:l,signature:u,rawLastModDate:h,compressedSize:d}=i,f=i.localDirectory={};o.initialized||await o.init();let p=await fNe(o,r,30);const m=dNe(p);let _=oNe(i,n,"password");if(_=_&&_.length&&_,a&&a.originalCompressionMethod!=ZLe)throw new Error(GMe);if(s!=QLe&&s!=JLe)throw new Error(GMe);if(lNe(m,0)!=eMe)throw new Error(kMe);$Me(f,m,4),p=await fNe(o,r,30+f.filenameLength+f.extraFieldLength),f.rawExtraField=p.subarray(30+f.filenameLength),await JMe(i,f,m,4),t.lastAccessDate=f.lastAccessDate,t.creationDate=f.creationDate;const g=i.encrypted&&f.encrypted,b=g&&!a;if(g){if(!b&&void 0===a.strength)throw new Error(HMe);if(!_)throw new Error(VMe)}const y=await PLe(c.Inflate,{codecType:_Le,password:_,zipCrypto:b,encryptionStrength:a&&a.strength,signed:oNe(i,n,"checkSignature"),passwordVerification:b&&(l.dataDescriptor?h>>>8&255:u>>>24&255),signature:u,compressed:0!=s,encrypted:g,useWebWorkers:oNe(i,n,"useWebWorkers")},c);e.initialized||await e.init();const v=oNe(i,n,"signal"),O=r+30+f.filenameLength+f.extraFieldLength;return await MLe(y,o,e,O,()=>d,c,{onprogress:n.onprogress,signal:v}),e.getData()}}function $Me(e,t,n){const i=e.rawBitFlag=cNe(t,n+2),o=(i&bMe)==bMe,r=lNe(t,n+6);Object.assign(e,{encrypted:o,version:cNe(t,n),bitFlag:{level:(i&yMe)>>1,dataDescriptor:(i&vMe)==vMe,languageEncodingFlag:(i&OMe)==OMe},rawLastModDate:r,lastModDate:rNe(r),filenameLength:cNe(t,n+22),extraFieldLength:cNe(t,n+24)})}async function JMe(e,t,n,i){const o=t.rawExtraField,r=t.extraField=new Map,a=dNe(new Uint8Array(o));let s=0;try{while(s<o.length){const e=cNe(a,s),t=cNe(a,s+2);r.set(e,{type:e,data:o.slice(s+4,s+4+t)}),s+=4+t}}catch(m){}const c=cNe(n,i+4);t.signature=lNe(n,i+10),t.uncompressedSize=lNe(n,i+18),t.compressedSize=lNe(n,i+14);const l=r.get(hMe);l&&(QMe(l,t),t.extraFieldZip64=l);const u=r.get(_Me);u&&(await ZMe(u,"filename","rawFilename",t,e),t.extraFieldUnicodePath=u);const h=r.get(gMe);h&&(await ZMe(h,"comment","rawComment",t,e),t.extraFieldUnicodeComment=h);const d=r.get(dMe);d?(eNe(d,t,c),t.extraFieldAES=d):t.compressionMethod=c;const f=r.get(fMe);f&&(tNe(f,t),t.extraFieldNTFS=f);const p=r.get(mMe);p&&(nNe(p,t),t.extraFieldExtendedTimestamp=p)}function QMe(e,t){t.zip64=!0;const n=dNe(e.data);e.values=[];for(let o=0;o<Math.floor(e.data.length/8);o++)e.values.push(uNe(n,0+8*o));const i=YMe.filter(e=>t[e]==KLe);for(let o=0;o<i.length;o++)e[i[o]]=e.values[o];YMe.forEach(n=>{if(t[n]==KLe){if(void 0===e[n])throw new Error(UMe);t[n]=e[n]}})}async function ZMe(e,t,n,i,o){const r=dNe(e.data);e.version=sNe(r,0),e.signature=lNe(r,1);const a=new bRe;a.append(o[n]);const s=dNe(new Uint8Array(4));s.setUint32(0,a.get(),!0),e[t]=await PMe(e.data.subarray(5)),e.valid=!o.bitFlag.languageEncodingFlag&&e.signature==lNe(s,0),e.valid&&(i[t]=e[t],i[t+"UTF8"]=!0)}function eNe(e,t,n){const i=dNe(e.data);e.vendorVersion=sNe(i,0),e.vendorId=sNe(i,2);const o=sNe(i,4);e.strength=o,e.originalCompressionMethod=n,t.compressionMethod=e.compressionMethod=cNe(i,5)}function tNe(e,t){const n=dNe(e.data);let i,o=4;try{while(o<e.data.length&&!i){const t=cNe(n,o),r=cNe(n,o+2);t==pMe&&(i=e.data.slice(o+4,o+4+r)),o+=4+r}}catch(r){}try{if(i&&24==i.length){const n=dNe(i),o=n.getBigUint64(0,!0),r=n.getBigUint64(8,!0),a=n.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:o,rawLastAccessDate:r,rawCreationDate:a});const s=aNe(o),c=aNe(r),l=aNe(a),u={lastModDate:s,lastAccessDate:c,creationDate:l};Object.assign(e,u),Object.assign(t,u)}}catch(r){}}function nNe(e,t){const n=dNe(e.data),i=sNe(n,0),o=[],r=[];1==(1&i)&&(o.push("lastModDate"),r.push("rawLastModDate")),2==(2&i)&&(o.push("lastAccessDate"),r.push("rawLastAccessDate")),4==(4&i)&&(o.push("creationDate"),r.push("rawCreationDate"));let a=1;o.forEach((i,o)=>{if(e.data.length>=a+4){const s=lNe(n,a);t[i]=e[i]=new Date(1e3*s);const c=r[o];e[c]=s}a+=4})}async function iNe(e,t,n,i,o){const r=new Uint8Array(4),a=dNe(r);hNe(a,0,t);const s=i+o;return await c(i)||await c(Math.min(s,n));async function c(t){const o=n-t,a=await fNe(e,o,t);for(let e=a.length-i;e>=0;e--)if(a[e]==r[0]&&a[e+1]==r[1]&&a[e+2]==r[2]&&a[e+3]==r[3])return{offset:o+e,buffer:a.slice(e,e+i).buffer}}}function oNe(e,t,n){return void 0===t[n]?e.options[n]:t[n]}function rNe(e){const t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(i){}}function aNe(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function sNe(e,t){return e.getUint8(t)}function cNe(e,t){return e.getUint16(t,!0)}function lNe(e,t){return e.getUint32(t,!0)}function uNe(e,t){return Number(e.getBigUint64(t,!0))}function hNe(e,t,n){e.setUint32(t,n,!0)}function dNe(e){return new DataView(e.buffer)}function fNe(e,t,n){return e.readUint8Array(t,n)}const pNe="File already exists",mNe="Zip file comment exceeds 64KB",_Ne="File entry comment exceeds 64KB",gNe="File entry name exceeds 64KB",bNe="Version exceeds 65535",yNe="The strength must equal 1, 2, or 3",vNe="Extra field type exceeds 65535",ONe="Extra field data exceeds 64KB",ANe="Zip64 is not supported",wNe=new Uint8Array([7,0,2,0,65,69,3,0,0]),TNe=24;let CNe=0;class ENe{constructor(e,t={}){Object.assign(this,{writer:e,options:t,config:pRe(),files:new Map,offset:e.size,pendingCompressedSize:0,pendingEntries:[],pendingAddFileCalls:new Set})}async add(e="",t,n={}){const i=this;if(!(CNe<i.config.maxWorkers))return new Promise((o,r)=>i.pendingEntries.push({name:e,reader:t,options:n,resolve:o,reject:r}));{let o;CNe++;try{return o=xNe(i,e,t,n),this.pendingAddFileCalls.add(o),await o}finally{this.pendingAddFileCalls.delete(o),CNe--;const e=i.pendingEntries.shift();e&&i.add(e.name,e.reader,e.options).then(e.resolve).catch(e.reject)}}}async close(e=new Uint8Array(0),t={}){while(this.pendingAddFileCalls.size)await Promise.all(Array.from(this.pendingAddFileCalls));return await DNe(this,e,t),this.writer.getData()}}async function xNe(e,t,n,i){if(t=t.trim(),i.directory&&!t.endsWith(EMe)?t+=EMe:i.directory=t.endsWith(EMe),e.files.has(t))throw new Error(pNe);const o=yRe(t);if(o.length>$Le)throw new Error(gNe);const r=i.comment||"",a=yRe(r);if(a.length>$Le)throw new Error(_Ne);const s=e.options.version||i.version||0;if(s>$Le)throw new Error(bNe);const c=e.options.versionMadeBy||i.versionMadeBy||20;if(c>$Le)throw new Error(bNe);const l=LNe(e,i,"lastModDate")||new Date,u=LNe(e,i,"lastAccessDate"),h=LNe(e,i,"creationDate"),d=LNe(e,i,"password"),f=LNe(e,i,"encryptionStrength")||3,p=LNe(e,i,"zipCrypto");if(void 0!==d&&void 0!==f&&(f<1||f>3))throw new Error(yNe);let m=new Uint8Array(0);const _=i.extraField;if(_){let e=0,t=0;_.forEach(t=>e+=4+t.length),m=new Uint8Array(e),_.forEach((e,n)=>{if(n>$Le)throw new Error(vNe);if(e.length>$Le)throw new Error(ONe);kNe(m,new Uint16Array([n]),t),kNe(m,new Uint16Array([e.length]),t+2),kNe(m,e,t+4),t+=4+e.length})}let g=LNe(e,i,"extendedTimestamp");void 0===g&&(g=!0);let b=0,y=LNe(e,i,"keepOrder");void 0===y&&(y=!0);let v=0,O=LNe(e,i,"msDosCompatible");void 0===O&&(O=!0);const A=LNe(e,i,"internalFileAttribute")||0,w=LNe(e,i,"externalFileAttribute")||0;n&&(n.initialized||await n.init(),v=n.size,b=MNe(v));let T=i.zip64||e.options.zip64||!1;if(e.offset+e.pendingCompressedSize>=KLe||v>=KLe||b>=KLe){if(!1===i.zip64||!1===e.options.zip64||!y)throw new Error(ANe);T=!0}e.pendingCompressedSize+=b,await Promise.resolve();const C=LNe(e,i,"level"),E=LNe(e,i,"useWebWorkers"),x=LNe(e,i,"bufferedWrite");let S=LNe(e,i,"dataDescriptor"),I=LNe(e,i,"dataDescriptorSignature");const D=LNe(e,i,"signal");void 0===S&&(S=!0),S&&void 0===I&&(I=!1);const P=await SNe(e,t,n,Object.assign({},i,{rawFilename:o,rawComment:a,version:s,versionMadeBy:c,lastModDate:l,lastAccessDate:u,creationDate:h,rawExtraField:m,zip64:T,password:d,level:C,useWebWorkers:E,encryptionStrength:f,extendedTimestamp:g,zipCrypto:p,bufferedWrite:x,keepOrder:y,dataDescriptor:S,dataDescriptorSignature:I,signal:D,msDosCompatible:O,internalFileAttribute:A,externalFileAttribute:w}));return b&&(e.pendingCompressedSize-=b),Object.assign(P,{name:t,comment:r,extraField:_}),new LMe(P)}async function SNe(e,t,n,i){const o=e.files,r=e.writer,a=Array.from(o.values()).pop();let s,c,l,u={};o.set(t,u);try{let h,d,f;if(i.keepOrder&&(h=a&&a.lock),u.lock=f=new Promise(e=>l=e),i.bufferedWrite||e.lockWrite||!i.dataDescriptor?(d=new qLe,d.init(),s=!0):(e.lockWrite=new Promise(e=>c=e),r.initialized||await r.init(),d=r),u=await INe(n,d,e.config,i),u.lock=f,o.set(t,u),u.filename=t,s){let t=0;const n=d.getData();let a;await Promise.all([e.lockWrite,h]);do{a=Array.from(o.values()).find(e=>e.writingBufferedData),a&&await a.lock}while(a&&a.lock);if(u.writingBufferedData=!0,!i.dataDescriptor){const e=26,o=await PNe(n,0,e),a=new DataView(o);u.encrypted&&!i.zipCrypto||FNe(a,14,u.signature),u.zip64?(FNe(a,18,KLe),FNe(a,22,KLe)):(FNe(a,18,u.compressedSize),FNe(a,22,u.uncompressedSize)),await r.writeUint8Array(new Uint8Array(o)),t=e}await jNe(r,n,t),delete u.writingBufferedData}if(u.offset=e.offset,u.zip64){const e=UNe(u.rawExtraFieldZip64);zNe(e,20,BigInt(u.offset))}else if(u.offset>=KLe)throw new Error(ANe);return e.offset+=u.length,u}catch(h){throw(s&&u.writingBufferedData||!s&&u.dataWritten)&&(h.corruptedEntry=e.hasCorruptedEntries=!0,u.uncompressedSize&&(e.offset+=u.uncompressedSize)),o.delete(t),h}finally{l(),c&&c()}}async function INe(e,t,n,i){const{rawFilename:o,lastAccessDate:r,creationDate:a,password:s,level:c,zip64:l,zipCrypto:u,dataDescriptor:h,dataDescriptorSignature:d,directory:f,version:p,versionMadeBy:m,rawComment:_,rawExtraField:g,useWebWorkers:b,onprogress:y,signal:v,encryptionStrength:O,extendedTimestamp:A,msDosCompatible:w,internalFileAttribute:T,externalFileAttribute:C}=i,E=Boolean(s&&s.length),x=0!==c&&!f;let S,I,D;if(E&&!u){S=new Uint8Array(wNe.length+2);const e=UNe(S);BNe(e,0,dMe),kNe(S,wNe,2),NNe(e,8,O)}else S=new Uint8Array(0);if(A){D=new Uint8Array(9+(r?4:0)+(a?4:0));const e=UNe(D);BNe(e,0,mMe),BNe(e,2,D.length-4);const t=1+(r?2:0)+(a?4:0);NNe(e,4,t),FNe(e,5,Math.floor(i.lastModDate.getTime()/1e3)),r&&FNe(e,9,Math.floor(r.getTime()/1e3)),a&&FNe(e,13,Math.floor(a.getTime()/1e3));try{I=new Uint8Array(36);const e=UNe(I),t=RNe(i.lastModDate);BNe(e,0,fMe),BNe(e,2,32),BNe(e,8,pMe),BNe(e,10,24),zNe(e,12,t),zNe(e,20,RNe(r)||t),zNe(e,28,RNe(a)||t)}catch($){I=new Uint8Array(0)}}else I=D=new Uint8Array(0);const P={version:p||wMe,versionMadeBy:m,zip64:l,directory:Boolean(f),filenameUTF8:!0,rawFilename:o,commentUTF8:!0,rawComment:_,rawExtraFieldZip64:l?new Uint8Array(TNe+4):new Uint8Array(0),rawExtraFieldExtendedTimestamp:D,rawExtraFieldNTFS:I,rawExtraFieldAES:S,rawExtraField:g,extendedTimestamp:A,msDosCompatible:w,internalFileAttribute:T,externalFileAttribute:C};let j=P.uncompressedSize=0,R=OMe;h&&(R|=vMe);let L=QLe;x&&(L=JLe),l&&(P.version=P.version>TMe?P.version:TMe),E&&(R|=bMe,u||(P.version=P.version>CMe?P.version:CMe,L=ZLe,x&&(P.rawExtraFieldAES[9]=JLe))),P.compressionMethod=L;const M=P.headerArray=new Uint8Array(26),N=UNe(M);BNe(N,0,P.version),BNe(N,2,R),BNe(N,4,L);const B=new Uint32Array(1),F=UNe(B);let z;z=i.lastModDate<SMe?SMe:i.lastModDate>xMe?xMe:i.lastModDate,BNe(F,0,(z.getHours()<<6|z.getMinutes())<<5|z.getSeconds()/2),BNe(F,2,(z.getFullYear()-1980<<4|z.getMonth()+1)<<5|z.getDate());const k=B[0];FNe(N,6,k),BNe(N,22,o.length);const U=S.length+D.length+I.length+P.rawExtraField.length;BNe(N,24,U);const V=new Uint8Array(30+o.length+U),H=UNe(V);let G;FNe(H,0,eMe),kNe(V,M,4),kNe(V,o,30),kNe(V,S,30+o.length),kNe(V,D,30+o.length+S.length),kNe(V,I,30+o.length+S.length+D.length),kNe(V,P.rawExtraField,30+o.length+S.length+D.length+I.length);let W=0;if(e){const i=await PLe(n.Deflate,{codecType:mLe,level:c,password:s,encryptionStrength:O,zipCrypto:E&&u,passwordVerification:E&&u&&k>>8&255,signed:!0,compressed:x,encrypted:E,useWebWorkers:b},n);await t.writeUint8Array(V),P.dataWritten=!0,G=await MLe(i,e,t,0,()=>e.size,n,{onprogress:y,signal:v}),j=P.uncompressedSize=e.size,W=G.length}else await t.writeUint8Array(V),P.dataWritten=!0;let q,Y=new Uint8Array(0),X=0;if(h&&(Y=new Uint8Array(l?d?24:20:d?16:12),q=UNe(Y),d&&(X=4,FNe(q,0,tMe))),e){const e=G.signature;if(E&&!u||void 0===e||(FNe(N,10,e),P.signature=e,h&&FNe(q,X,e)),l){const e=UNe(P.rawExtraFieldZip64);BNe(e,0,hMe),BNe(e,2,TNe),FNe(N,14,KLe),zNe(e,12,BigInt(W)),FNe(N,18,KLe),zNe(e,4,BigInt(j)),h&&(zNe(q,X+4,BigInt(W)),zNe(q,X+12,BigInt(j)))}else FNe(N,14,W),FNe(N,18,j),h&&(FNe(q,X+4,W),FNe(q,X+8,j))}h&&await t.writeUint8Array(Y);const K=V.length+W+Y.length;return Object.assign(P,{compressedSize:W,lastModDate:z,rawLastModDate:k,creationDate:a,lastAccessDate:r,encrypted:E,length:K}),P}async function DNe(e,t,n){const i=e.writer,o=e.files;let r=0,a=0,s=e.offset,c=o.size;for(const[,f]of o)a+=46+f.rawFilename.length+f.rawComment.length+f.rawExtraFieldZip64.length+f.rawExtraFieldAES.length+f.rawExtraFieldExtendedTimestamp.length+f.rawExtraFieldNTFS.length+f.rawExtraField.length;let l=n.zip64||e.options.zip64||!1;if(s>=KLe||a>=KLe||c>=$Le){if(!1===n.zip64||!1===e.options.zip64)throw new Error(ANe);l=!0}const u=new Uint8Array(a+(l?lMe:aMe)),h=UNe(u);if(t&&t.length){if(!(t.length<=$Le))throw new Error(mNe);BNe(h,r+20,t.length)}for(const[f,p]of Array.from(o.values()).entries()){const{rawFilename:e,rawExtraFieldZip64:t,rawExtraFieldAES:i,rawExtraField:a,rawComment:s,versionMadeBy:c,headerArray:l,directory:m,zip64:_,msDosCompatible:g,internalFileAttribute:b,externalFileAttribute:y}=p;let v,O;if(p.extendedTimestamp){O=p.rawExtraFieldNTFS,v=new Uint8Array(9);const e=UNe(v);BNe(e,0,mMe),BNe(e,2,v.length-4),NNe(e,4,1),FNe(e,5,Math.floor(p.lastModDate.getTime()/1e3))}else O=v=new Uint8Array(0);const A=t.length+i.length+v.length+O.length+a.length;if(FNe(h,r,nMe),BNe(h,r+4,c),kNe(u,l,r+6),BNe(h,r+30,A),BNe(h,r+32,s.length),FNe(h,r+34,b),y?FNe(h,r+38,y):m&&g&&NNe(h,r+38,AMe),FNe(h,r+42,_?KLe:p.offset),kNe(u,e,r+46),kNe(u,t,r+46+e.length),kNe(u,i,r+46+e.length+t.length),kNe(u,v,r+46+e.length+t.length+i.length),kNe(u,O,r+46+e.length+t.length+i.length+v.length),kNe(u,a,r+46+e.length+t.length+i.length+v.length+O.length),kNe(u,s,r+46+e.length+A),r+=46+e.length+A+s.length,n.onprogress)try{n.onprogress(f+1,o.size,new LMe(p))}catch(d){}}l&&(FNe(h,r,oMe),zNe(h,r+4,BigInt(44)),BNe(h,r+12,45),BNe(h,r+14,45),zNe(h,r+24,BigInt(c)),zNe(h,r+32,BigInt(c)),zNe(h,r+40,BigInt(a)),zNe(h,r+48,BigInt(s)),FNe(h,r+56,rMe),zNe(h,r+64,BigInt(s)+BigInt(a)),FNe(h,r+72,uMe),c=$Le,s=KLe,a=KLe,r+=76),FNe(h,r,iMe),BNe(h,r+8,c),BNe(h,r+10,c),FNe(h,r+12,a),FNe(h,r+16,s),await i.writeUint8Array(u),t&&t.length&&await i.writeUint8Array(t)}function PNe(e,t,n){if(e.arrayBuffer)return t||n?e.slice(t,n).arrayBuffer():e.arrayBuffer();{const i=new FileReader;return new Promise((o,r)=>{i.onload=e=>o(e.target.result),i.onerror=()=>r(i.error),i.readAsArrayBuffer(t||n?e.slice(t,n):e)})}}async function jNe(e,t,n=0){const i=536870912;async function o(){if(n<t.size){const r=await PNe(t,n,n+i);await e.writeUint8Array(new Uint8Array(r)),n+=i,await o()}}await o()}function RNe(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function LNe(e,t,n){return void 0===t[n]?e.options[n]:t[n]}function MNe(e){return e+5*(Math.floor(e/16383)+1)}function NNe(e,t,n){e.setUint8(t,n)}function BNe(e,t,n){e.setUint16(t,n,!0)}function FNe(e,t,n){e.setUint32(t,n,!0)}function zNe(e,t,n){e.setBigUint64(t,n,!0)}function kNe(e,t,n){e.set(t,n)}function UNe(e){return new DataView(e.buffer)}function VNe(e){if("string"===typeof e){const t=document.getElementById(e);if(null===t)throw new a["a"](`Element with id "${e}" does not exist in the document.`);e=t}return e}mRe({Deflate:ije,Inflate:hRe});var HNe=VNe;function GNe(e,t){this.position=e,this.headingPitchRange=t}var WNe=GNe;function qNe(e,t){this.id=t,this.name=e,this.playlistIndex=0,this.playlist=[],this.tourStart=new dn["a"],this.tourEnd=new dn["a"],this.entryStart=new dn["a"],this.entryEnd=new dn["a"],this._activeEntries=[]}function YNe(e){for(let t=e.pop();void 0!==t;t=e.pop())t.stop()}function XNe(e,t,n){const i=this.playlist[this.playlistIndex];if(i){const o=KNe.bind(this,e,t,n);if(this._activeEntries.push(i),this.entryStart.raiseEvent(i),i.blocking)i.play(o,e.scene.camera,t);else{const r=this;i.play((function(){r.entryEnd.raiseEvent(i);const e=r._activeEntries.indexOf(i);e>=0&&r._activeEntries.splice(e,1)})),o(e,t,n)}}else Object(r["a"])(n)&&n(!1)}function KNe(e,t,n,i){const o=this.playlist[this.playlistIndex];if(this.entryEnd.raiseEvent(o,i),i)n(i);else{const i=this._activeEntries.indexOf(o);i>=0&&this._activeEntries.splice(i,1),this.playlistIndex++,XNe.call(this,e,t,n)}}qNe.prototype.addPlaylistEntry=function(e){this.playlist.push(e)},qNe.prototype.play=function(e,t){this.tourStart.raiseEvent();const n=this;XNe.call(this,e,t,(function(e){n.playlistIndex=0,e||YNe(n._activeEntries),n.tourEnd.raiseEvent(e)}))},qNe.prototype.stop=function(){YNe(this._activeEntries)};var $Ne=qNe;function JNe(e,t,n){this.type="KmlTourFlyTo",this.blocking=!0,this.activeCamera=null,this.activeCallback=null,this.duration=e,this.view=n,this.flyToMode=t}JNe.prototype.play=function(e,t,n){if(this.activeCamera=t,Object(r["a"])(e)&&null!==e){const t=this;this.activeCallback=function(n){delete t.activeCallback,delete t.activeCamera,e(!Object(r["a"])(n)&&n)}}const i=this.getCameraOptions(n);if(this.view.headingPitchRoll)t.flyTo(i);else if(this.view.headingPitchRange){const e=new Tt(this.view.position);t.flyToBoundingSphere(e,i)}},JNe.prototype.stop=function(){Object(r["a"])(this.activeCamera)&&this.activeCamera.cancelFlight(),Object(r["a"])(this.activeCallback)&&this.activeCallback(!0)},JNe.prototype.getCameraOptions=function(e){let t={duration:this.duration};return Object(r["a"])(this.activeCallback)&&(t.complete=this.activeCallback),"smooth"===this.flyToMode&&(t.easingFunction=Gv.LINEAR_NONE),this.view.headingPitchRoll?(t.destination=this.view.position,t.orientation=this.view.headingPitchRoll):this.view.headingPitchRange&&(t.offset=this.view.headingPitchRange),Object(r["a"])(e)&&(t=Object(qE["a"])(t,e)),t};var QNe=JNe;function ZNe(e){this.type="KmlTourWait",this.blocking=!0,this.duration=e,this.timeout=null}ZNe.prototype.play=function(e){const t=this;this.activeCallback=e,this.timeout=setTimeout((function(){delete t.activeCallback,e(!1)}),1e3*this.duration)},ZNe.prototype.stop=function(){clearTimeout(this.timeout),Object(r["a"])(this.activeCallback)&&this.activeCallback(!0)};var eBe=ZNe;const tBe={avi:"video/x-msvideo",bmp:"image/bmp",bz2:"application/x-bzip2",chm:"application/vnd.ms-htmlhelp",css:"text/css",csv:"text/csv",doc:"application/msword",dvi:"application/x-dvi",eps:"application/postscript",flv:"video/x-flv",gif:"image/gif",gz:"application/x-gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",jnlp:"application/x-java-jnlp-file",jpeg:"image/jpeg",jpg:"image/jpeg",m3u:"audio/x-mpegurl",m4v:"video/mp4",mathml:"application/mathml+xml",mid:"audio/midi",midi:"audio/midi",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",ogg:"application/ogg",pdf:"application/pdf",png:"image/png",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",ps:"application/postscript",qt:"video/quicktime",rdf:"application/rdf+xml",rss:"application/rss+xml",rtf:"application/rtf",svg:"image/svg+xml",swf:"application/x-shockwave-flash",text:"text/plain",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"application/xml",zip:"application/zip",detectFromFilename:function(e){let t=e.toLowerCase();return t=Object(XL["a"])(t),tBe[t]}};let nBe;"undefined"!==typeof DOMParser&&(nBe=new DOMParser);const iBe=new iDe({stripPrefix:!1,email:!1,replaceFn:function(e){if(!e.protocolUrlMatch)return!1}}),oBe=32,rBe=2414016,aBe=1,sBe=16093e3,cBe=.1,lBe=[null,void 0,"http://www.opengis.net/kml/2.2","http://earth.google.com/kml/2.2","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.0"],uBe=["http://www.google.com/kml/ext/2.2"],hBe=["http://www.w3.org/2005/Atom"],dBe={kml:lBe,gx:uBe,atom:hBe,kmlgx:lBe.concat(uBe)},fBe={Document:mFe,Folder:_Fe,Placemark:gFe,NetworkLink:MFe,GroundOverlay:EFe,PhotoOverlay:xFe,ScreenOverlay:CFe,Tour:yFe};function pBe(e){this._dataSource=e,this._deferred=Object(Vc["a"])(),this._stack=[],this._promises=[],this._timeoutSet=!1,this._used=!1,this._started=0,this._timeThreshold=1e3}function mBe(e){const t=e.slice(0,Math.min(4,e.size)),n=Object(Vc["a"])(),i=new FileReader;return i.addEventListener("load",(function(){n.resolve(1347093252===new DataView(i.result).getUint32(0,!1))})),i.addEventListener("error",(function(){n.reject(i.error)})),i.readAsArrayBuffer(t),n.promise}function _Be(e){const t=Object(Vc["a"])(),n=new FileReader;return n.addEventListener("load",(function(){t.resolve(n.result)})),n.addEventListener("error",(function(){t.reject(n.error)})),n.readAsText(e),t.promise}function gBe(e){const t={xsi:"http://www.w3.org/2001/XMLSchema-instance"};let n,i,o,a;for(const s in t)t.hasOwnProperty(s)&&(o=RegExp(`[< ]${s}:`),a=`xmlns:${s}=`,o.test(e)&&-1===e.indexOf(a)&&(Object(r["a"])(n)||(n=e.substr(0,e.indexOf("<kml")+4),i=e.substr(n.length)),n+=` ${a}"${t[s]}"`));return Object(r["a"])(n)&&(e=n+i),e}function bBe(e){let t=e.indexOf("xmlns:");const n=e.indexOf(">",t);let i,o,r;while(-1!==t&&t<n)i=e.slice(t,e.indexOf('"',t)),o=t,t=e.indexOf(i,t+1),-1!==t?(r=e.indexOf('"',e.indexOf('"',t)+1),e=e.slice(0,t-1)+e.slice(r+1,e.length),t=e.indexOf("xmlns:",o-1)):t=e.indexOf("xmlns:",o+1);return e}function yBe(e,t){return Promise.resolve(e.getData(new HLe)).then((function(e){e=gBe(e),e=bBe(e),t.kml=nBe.parseFromString(e,"application/xml")}))}function vBe(e,t){const n=Object(o["a"])(tBe.detectFromFilename(e.filename),"application/octet-stream");return Promise.resolve(e.getData(new GLe(n))).then((function(n){t[e.filename]=n}))}function OBe(e,t,n,i){const o=i.keys,a=new Uc.a("."),s=e.querySelectorAll(t);for(let c=0;c<s.length;c++){const e=s[c],l=e.getAttribute(n);if(Object(r["a"])(l)){const r=new Uc.a(l),s=r.absoluteTo(a).toString(),c=o.indexOf(s);if(-1!==c){const r=o[c];e.setAttribute(n,i[r]),"a"===t&&null===e.getAttribute("download")&&e.setAttribute("download",r)}}}}function ABe(e,t,n,i){const o=e.querySelectorAll(t);for(let a=0;a<o.length;a++){const e=o[a],t=e.getAttribute(n),s=MBe(t,i);Object(r["a"])(s)&&e.setAttribute(n,s.url)}}function wBe(e,t,n){let i=SBe(e,"id");i=Object(r["a"])(i)&&0!==i.length?i:ML(),Object(r["a"])(n)&&(i=n+i);let o=t.getById(i);return Object(r["a"])(o)&&(i=ML(),Object(r["a"])(n)&&(i=n+i)),o=t.add(new SY({id:i})),Object(r["a"])(o.kml)||(o.addProperty("kml"),o.kml=new GFe),o}function TBe(e,t){return"absolute"===e||"relativeToGround"===e||"relativeToSeaFloor"===t}function CBe(e,t){if(!Object(r["a"])(e))return g.fromDegrees(0,0,0,t);const n=e.match(/[^\s,\n]+/g);if(!Object(r["a"])(n))return g.fromDegrees(0,0,0,t);let i=parseFloat(n[0]),o=parseFloat(n[1]),a=parseFloat(n[2]);return i=isNaN(i)?0:i,o=isNaN(o)?0:o,a=isNaN(a)?0:a,g.fromDegrees(i,o,a,t)}function EBe(e,t){if(!Object(r["a"])(e))return;const n=e.textContent.match(/[^\s\n]+/g);if(!Object(r["a"])(n))return;const i=n.length,o=new Array(i);let a=0;for(let r=0;r<i;r++)o[a++]=CBe(n[r],t);return o}function xBe(e,t){if(!Object(r["a"])(e))return;const n=e.getAttribute(t);if(null!==n){const e=parseFloat(n);return isNaN(e)?void 0:e}}function SBe(e,t){if(!Object(r["a"])(e))return;const n=e.getAttribute(t);return null!==n?n:void 0}function IBe(e,t,n){if(!Object(r["a"])(e))return;const i=e.childNodes,o=i.length;for(let r=0;r<o;r++){const e=i[r];if(e.localName===t&&-1!==n.indexOf(e.namespaceURI))return e}}function DBe(e,t,n){if(!Object(r["a"])(e))return;const i=[],o=e.getElementsByTagNameNS("*",t),a=o.length;for(let r=0;r<a;r++){const e=o[r];e.localName===t&&-1!==n.indexOf(e.namespaceURI)&&i.push(e)}return i}function PBe(e,t,n){if(!Object(r["a"])(e))return[];const i=[],o=e.childNodes,a=o.length;for(let r=0;r<a;r++){const e=o[r];e.localName===t&&-1!==n.indexOf(e.namespaceURI)&&i.push(e)}return i}function jBe(e,t,n){const i=IBe(e,t,n);if(Object(r["a"])(i)){const e=parseFloat(i.textContent);return isNaN(e)?void 0:e}}function RBe(e,t,n){const i=IBe(e,t,n);if(Object(r["a"])(i))return i.textContent.trim()}function LBe(e,t,n){const i=IBe(e,t,n);if(Object(r["a"])(i)){const e=i.textContent.trim();return"1"===e||/^true$/i.test(e)}}function MBe(e,t,n){if(!Object(r["a"])(e))return;let i;if(Object(r["a"])(n)){e=e.replace(/\\/g,"/");let o=n[e];if(Object(r["a"])(o))i=new Et["a"]({url:o});else{const a=new Uc.a(t.getUrlComponent()),s=new Uc.a(e);o=n[s.absoluteTo(a)],Object(r["a"])(o)&&(i=new Et["a"]({url:o}))}}return Object(r["a"])(i)||(i=t.getDerivedResource({url:e})),i}Object.defineProperties(pBe.prototype,{dataSource:{get:function(){return this._dataSource}}}),pBe.prototype.addNodes=function(e,t){this._stack.push({nodes:e,index:0,processingData:t}),this._used=!0},pBe.prototype.addPromise=function(e){this._promises.push(e)},pBe.prototype.wait=function(){const e=this._deferred;return this._used||e.resolve(),Promise.all([e.promise,Promise.all(this._promises)])},pBe.prototype.process=function(){const e=1===this._stack.length;return e&&(this._started=kFe._getTimestamp()),this._process(e)},pBe.prototype._giveUpTime=function(){if(this._timeoutSet)return;this._timeoutSet=!0,this._timeThreshold=50;const e=this;setTimeout((function(){e._timeoutSet=!1,e._started=kFe._getTimestamp(),e._process(!0)}),0)},pBe.prototype._nextNode=function(){const e=this._stack,t=e[e.length-1],n=t.index,i=t.nodes;if(n!==i.length)return++t.index,i[n]},pBe.prototype._pop=function(){const e=this._stack;return e.pop(),0!==e.length||(this._deferred.resolve(),!1)},pBe.prototype._process=function(e){const t=this.dataSource,n=this._stack[this._stack.length-1].processingData;let i=this._nextNode();while(Object(r["a"])(i)){const e=fBe[i.localName];if(Object(r["a"])(e)&&(-1!==dBe.kml.indexOf(i.namespaceURI)||-1!==dBe.gx.indexOf(i.namespaceURI))&&(e(t,i,n,this),this._timeoutSet||kFe._getTimestamp()>this._started+this._timeThreshold))return void this._giveUpTime();i=this._nextNode()}this._pop()&&e&&this._process(!0)};const NBe={maximumRed:void 0,red:void 0,maximumGreen:void 0,green:void 0,maximumBlue:void 0,blue:void 0};function BBe(e,t){if(!Object(r["a"])(e)||/^\s*$/gm.test(e))return;"#"===e[0]&&(e=e.substring(1));const n=parseInt(e.substring(0,2),16)/255,i=parseInt(e.substring(2,4),16)/255,o=parseInt(e.substring(4,6),16)/255,a=parseInt(e.substring(6,8),16)/255;return t?(a>0?(NBe.maximumRed=a,NBe.red=void 0):(NBe.maximumRed=void 0,NBe.red=0),o>0?(NBe.maximumGreen=o,NBe.green=void 0):(NBe.maximumGreen=void 0,NBe.green=0),i>0?(NBe.maximumBlue=i,NBe.blue=void 0):(NBe.maximumBlue=void 0,NBe.blue=0),NBe.alpha=n,Dm.fromRandom(NBe)):new Dm(a,o,i,n)}function FBe(e,t,n){const i=RBe(e,t,n);if(Object(r["a"])(i))return BBe(i,"random"===RBe(e,"colorMode",n))}function zBe(e){const t=IBe(e,"TimeStamp",dBe.kmlgx),n=RBe(t,"when",dBe.kmlgx);if(!Object(r["a"])(t)||!Object(r["a"])(n)||0===n.length)return;const i=mo.fromIso8601(n),o=new xR;return o.addInterval(new ZC({start:i,stop:oE.MAXIMUM_VALUE})),o}function kBe(e){const t=IBe(e,"TimeSpan",dBe.kmlgx);if(!Object(r["a"])(t))return;let n;const i=IBe(t,"begin",dBe.kmlgx);let o=Object(r["a"])(i)?mo.fromIso8601(i.textContent):void 0;const a=IBe(t,"end",dBe.kmlgx);let s=Object(r["a"])(a)?mo.fromIso8601(a.textContent):void 0;if(Object(r["a"])(o)&&Object(r["a"])(s)){if(mo.lessThan(s,o)){const e=o;o=s,s=e}n=new xR,n.addInterval(new ZC({start:o,stop:s}))}else Object(r["a"])(o)?(n=new xR,n.addInterval(new ZC({start:o,stop:oE.MAXIMUM_VALUE}))):Object(r["a"])(s)&&(n=new xR,n.addInterval(new ZC({start:oE.MINIMUM_VALUE,stop:s})));return n}function UBe(){const e=new $M;return e.width=oBe,e.height=oBe,e.scaleByDistance=new xE(rBe,aBe,sBe,cBe),e.pixelOffsetScaleByDistance=new xE(rBe,aBe,sBe,cBe),e}function VBe(){const e=new uY;return e.outline=!0,e.outlineColor=Dm.WHITE,e}function HBe(){const e=new Uq;return e.translucencyByDistance=new xE(3e6,1,5e6,0),e.pixelOffset=new Gt(17,0),e.horizontalOrigin=eN.LEFT,e.font="16px sans-serif",e.style=Zle.FILL_AND_OUTLINE,e}function GBe(e,t,n,i,a){let s=RBe(e,"href",dBe.kml);if(!Object(r["a"])(s)||0===s.length)return;if(0===s.indexOf("root://icons/palette-")){const t=s.charAt(21);let n=Object(o["a"])(jBe(e,"x",dBe.gx),0),i=Object(o["a"])(jBe(e,"y",dBe.gx),0);n=Math.min(n/32,7),i=7-Math.min(i/32,7);const r=8*i+n;s=`https://maps.google.com/mapfiles/kml/pal${t}/icon${r}.png`}const c=MBe(s,n,i);if(a){const n=RBe(e,"refreshMode",dBe.kml),i=RBe(e,"viewRefreshMode",dBe.kml);"onInterval"===n||"onExpire"===n?ab(`kml-refreshMode-${n}`,`KML - Unsupported Icon refreshMode: ${n}`):"onStop"!==i&&"onRegion"!==i||ab(`kml-refreshMode-${i}`,`KML - Unsupported Icon viewRefreshMode: ${i}`);const a=Object(o["a"])(RBe(e,"viewBoundScale",dBe.kml),1),s="onStop"===i?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",l=Object(o["a"])(RBe(e,"viewFormat",dBe.kml),s),u=RBe(e,"httpQuery",dBe.kml);Object(r["a"])(l)&&c.setQueryParameters(Object(yM["a"])(IFe(l))),Object(r["a"])(u)&&c.setQueryParameters(Object(yM["a"])(IFe(u)));const h=t._ellipsoid;return LFe(c,t.camera,t.canvas,a,t._lastCameraView.bbox,h),c}return c}function WBe(e,t,n,i,a){let c=jBe(t,"scale",dBe.kml);const l=jBe(t,"heading",dBe.kml),u=FBe(t,"color",dBe.kml),h=IBe(t,"Icon",dBe.kml);let d=GBe(h,e,i,a,!1);Object(r["a"])(h)&&!Object(r["a"])(d)&&(d=!1);const f=jBe(h,"x",dBe.gx),p=jBe(h,"y",dBe.gx),m=jBe(h,"w",dBe.gx),_=jBe(h,"h",dBe.gx),b=IBe(t,"hotSpot",dBe.kml),y=xBe(b,"x"),v=xBe(b,"y"),O=SBe(b,"xunits"),A=SBe(b,"yunits");let w,T,C=n.billboard;Object(r["a"])(C)||(C=UBe(),n.billboard=C),C.image=d,C.scale=c,C.color=u,(Object(r["a"])(f)||Object(r["a"])(p)||Object(r["a"])(m)||Object(r["a"])(_))&&(C.imageSubRegion=new Au(f,p,m,_)),Object(r["a"])(l)&&0!==l&&(C.rotation=s["a"].toRadians(-l),C.alignedAxis=g.UNIT_Z),c=Object(o["a"])(c,1),Object(r["a"])(y)&&("pixels"===O?w=-y*c:"insetPixels"===O?w=(y-oBe)*c:"fraction"===O&&(w=-y*oBe*c),w+=.5*oBe*c),Object(r["a"])(v)&&("pixels"===A?T=v*c:"insetPixels"===A?T=(-v+oBe)*c:"fraction"===A&&(T=v*oBe*c),T-=.5*oBe*c),(Object(r["a"])(w)||Object(r["a"])(T))&&(C.pixelOffset=new Gt(w,T))}function qBe(e,t,n,i,a){for(let s=0,c=t.childNodes.length;s<c;s++){const c=t.childNodes.item(s);if("IconStyle"===c.localName)WBe(e,c,n,i,a);else if("LabelStyle"===c.localName){let e=n.label;Object(r["a"])(e)||(e=HBe(),n.label=e),e.scale=Object(o["a"])(jBe(c,"scale",dBe.kml),e.scale),e.fillColor=Object(o["a"])(FBe(c,"color",dBe.kml),e.fillColor),e.text=n.name}else if("LineStyle"===c.localName){let e=n.polyline;Object(r["a"])(e)||(e=new dY,n.polyline=e),e.width=jBe(c,"width",dBe.kml),e.material=FBe(c,"color",dBe.kml),Object(r["a"])(FBe(c,"outerColor",dBe.gx))&&ab("kml-gx:outerColor","KML - gx:outerColor is not supported in a LineStyle"),Object(r["a"])(jBe(c,"outerWidth",dBe.gx))&&ab("kml-gx:outerWidth","KML - gx:outerWidth is not supported in a LineStyle"),Object(r["a"])(jBe(c,"physicalWidth",dBe.gx))&&ab("kml-gx:physicalWidth","KML - gx:physicalWidth is not supported in a LineStyle"),Object(r["a"])(LBe(c,"labelVisibility",dBe.gx))&&ab("kml-gx:labelVisibility","KML - gx:labelVisibility is not supported in a LineStyle")}else if("PolyStyle"===c.localName){let e=n.polygon;Object(r["a"])(e)||(e=VBe(),n.polygon=e),e.material=Object(o["a"])(FBe(c,"color",dBe.kml),e.material),e.fill=Object(o["a"])(LBe(c,"fill",dBe.kml),e.fill),e.outline=Object(o["a"])(LBe(c,"outline",dBe.kml),e.outline)}else if("BalloonStyle"===c.localName){const e=Object(o["a"])(BBe(RBe(c,"bgColor",dBe.kml)),Dm.WHITE),t=Object(o["a"])(BBe(RBe(c,"textColor",dBe.kml)),Dm.BLACK),i=RBe(c,"text",dBe.kml);n.addProperty("balloonStyle"),n.balloonStyle={bgColor:e,textColor:t,text:i}}else if("ListStyle"===c.localName){const e=RBe(c,"listItemType",dBe.kml);"radioFolder"!==e&&"checkOffOnly"!==e||ab(`kml-listStyle-${e}`,`KML - Unsupported ListStyle with listItemType: ${e}`)}}}function YBe(e,t,n,i,o){const a=new SY;let s,c=-1;const l=t.childNodes,u=l.length;for(let r=0;r<u;r++){const e=l[r];"Style"!==e.localName&&"StyleMap"!==e.localName||(c=r)}if(-1!==c){const t=l[c];if("Style"===t.localName)qBe(e,t,a,i,o);else{const c=PBe(t,"Pair",dBe.kml);for(let t=0;t<c.length;t++){const l=c[t],u=RBe(l,"key",dBe.kml);if("normal"===u){const t=RBe(l,"styleUrl",dBe.kml);if(Object(r["a"])(t))s=n.getById(t),Object(r["a"])(s)||(s=n.getById(`#${t}`)),Object(r["a"])(s)&&a.merge(s);else{const t=IBe(l,"Style",dBe.kml);qBe(e,t,a,i,o)}}else ab(`kml-styleMap-${u}`,`KML - Unsupported StyleMap key: ${u}`)}}}const h=RBe(t,"styleUrl",dBe.kml);if(Object(r["a"])(h)){let e=h;if("#"!==h[0]&&-1!==h.indexOf("#")){const t=h.split("#"),n=t[0],o=i.getDerivedResource({url:n});e=`${o.getUrlComponent()}#${t[1]}`}s=n.getById(e),Object(r["a"])(s)||(s=n.getById(`#${e}`)),Object(r["a"])(s)&&a.merge(s)}return a}function XBe(e,t,n){return t.fetchXML().then((function(i){return KBe(e,i,n,t,!0)}))}function KBe(e,t,n,i,o,a){let s,c,l,u;const h=DBe(t,"Style",dBe.kml);if(Object(r["a"])(h)){const t=h.length;for(s=0;s<t;s++)u=h[s],c=SBe(u,"id"),Object(r["a"])(c)&&(c=`#${c}`,o&&Object(r["a"])(i)&&(c=i.getUrlComponent()+c),Object(r["a"])(n.getById(c))||(l=new SY({id:c}),n.add(l),qBe(e,u,l,i,a)))}const d=DBe(t,"StyleMap",dBe.kml);if(Object(r["a"])(d)){const t=d.length;for(s=0;s<t;s++){const t=d[s];if(c=SBe(t,"id"),Object(r["a"])(c)){const s=PBe(t,"Pair",dBe.kml);for(let t=0;t<s.length;t++){const h=s[t],d=RBe(h,"key",dBe.kml);if("normal"===d){if(c=`#${c}`,o&&Object(r["a"])(i)&&(c=i.getUrlComponent()+c),!Object(r["a"])(n.getById(c))){l=n.getOrCreateEntity(c);let t=RBe(h,"styleUrl",dBe.kml);if(Object(r["a"])(t)){"#"!==t[0]&&(t=`#${t}`),o&&Object(r["a"])(i)&&(t=i.getUrlComponent()+t);const e=n.getById(t);Object(r["a"])(e)&&l.merge(e)}else u=IBe(h,"Style",dBe.kml),qBe(e,u,l,i,a)}}else ab(`kml-styleMap-${d}`,`KML - Unsupported StyleMap key: ${d}`)}}}}const f=[],p=t.getElementsByTagName("styleUrl"),m=p.length;for(s=0;s<m;s++){const t=p[s].textContent;if("#"!==t[0]){const o=t.split("#");if(2===o.length){const t=o[0],r=i.getDerivedResource({url:t});f.push(XBe(e,r,n))}}}return f}function $Be(e,t,n){const i=new Qve(e,t.id,["position"]),o=new SEe(t.position);t.polyline=Object(r["a"])(n.polyline)?n.polyline.clone():new dY,t.polyline.positions=new Yve([i,o])}function JBe(e,t){return!Object(r["a"])(e)&&!Object(r["a"])(t)||"clampToGround"===e?QM.CLAMP_TO_GROUND:"relativeToGround"===e?QM.RELATIVE_TO_GROUND:"absolute"===e?QM.NONE:"clampToSeaFloor"===t?(ab("kml-gx:altitudeMode-clampToSeaFloor","KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."),QM.CLAMP_TO_GROUND):"relativeToSeaFloor"===t?(ab("kml-gx:altitudeMode-relativeToSeaFloor","KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."),QM.RELATIVE_TO_GROUND):(Object(r["a"])(e)?ab("kml-altitudeMode-unknown",`KML - Unknown <kml:altitudeMode>:${e}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`):ab("kml-gx:altitudeMode-unknown",`KML - Unknown <gx:altitudeMode>:${t}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`),QM.CLAMP_TO_GROUND)}function QBe(e,t,n){return"relativeToSeaFloor"===n||"absolute"===t||"relativeToGround"===t?e:((Object(r["a"])(t)&&"clampToGround"!==t||Object(r["a"])(n)&&"clampToSeaFloor"!==n)&&ab("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${Object(o["a"])(t,n)}`),new SEe(e))}function ZBe(e,t,n,i){if(!Object(r["a"])(e))return;if("relativeToSeaFloor"===n||"absolute"===t||"relativeToGround"===t)return e;(Object(r["a"])(t)&&"clampToGround"!==t||Object(r["a"])(n)&&"clampToSeaFloor"!==n)&&ab("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${Object(o["a"])(t,n)}`);const a=e.length;for(let o=0;o<a;o++){const t=e[o];i.scaleToGeodeticSurface(t,t)}return e}function eFe(e,t,n,i){let o=t.label;Object(r["a"])(o)||(o=Object(r["a"])(n.label)?n.label.clone():HBe(),t.label=o),o.text=t.name;let a=t.billboard;Object(r["a"])(a)||(a=Object(r["a"])(n.billboard)?n.billboard.clone():UBe(),t.billboard=a),Object(r["a"])(a.image)?a.image.getValue()||(a.image=void 0):a.image=e._pinBuilder.fromColor(Dm.YELLOW,64);let s=1;Object(r["a"])(a.scale)&&(s=a.scale.getValue(),0!==s?o.pixelOffset=new Gt(16*s+1,0):(o.pixelOffset=void 0,o.horizontalOrigin=void 0)),Object(r["a"])(i)&&e._clampToGround&&(a.heightReference=i,o.heightReference=i)}function tFe(e,t){let n=e.path;Object(r["a"])(n)||(n=new iY,n.leadTime=0,e.path=n);const i=t.polyline;Object(r["a"])(i)&&(n.material=i.material,n.width=i.width)}function nFe(e,t,n,i,o){const r=RBe(n,"coordinates",dBe.kml),a=RBe(n,"altitudeMode",dBe.kml),s=RBe(n,"altitudeMode",dBe.gx),c=LBe(n,"extrude",dBe.kml),l=e._ellipsoid,u=CBe(r,l);return i.position=u,eFe(e,i,o,JBe(a,s)),c&&TBe(a,s)&&$Be(t,i,o),!0}function iFe(e,t,n,i,a){const s=IBe(n,"coordinates",dBe.kml),c=RBe(n,"altitudeMode",dBe.kml),l=RBe(n,"altitudeMode",dBe.gx),u=LBe(n,"extrude",dBe.kml),h=LBe(n,"tessellate",dBe.kml),d=TBe(c,l),f=jBe(n,"drawOrder",dBe.gx),p=e._ellipsoid,m=EBe(s,p);let _=a.polyline;if(d&&u){const e=new bY;i.wall=e,e.positions=m;const t=a.polygon;Object(r["a"])(t)&&(e.fill=t.fill,e.material=t.material),e.outline=!0,Object(r["a"])(_)?(e.outlineColor=Object(r["a"])(_.material)?_.material.color:Dm.WHITE,e.outlineWidth=_.width):Object(r["a"])(t)&&(e.outlineColor=Object(r["a"])(t.material)?t.material.color:Dm.WHITE)}else if(e._clampToGround&&!d&&h){const e=new dY;e.clampToGround=!0,i.polyline=e,e.positions=m,Object(r["a"])(_)?(e.material=Object(r["a"])(_.material)?_.material.color.getValue(oE.MINIMUM_VALUE):Dm.WHITE,e.width=Object(o["a"])(_.width,1)):(e.material=Dm.WHITE,e.width=1),e.zIndex=f}else Object(r["a"])(f)&&ab("kml-gx:drawOrder","KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"),e._clampToGround&&!h&&ab("kml-line-tesselate","Ignoring clampToGround for KML lines without the tessellate flag."),_=Object(r["a"])(_)?_.clone():new dY,i.polyline=_,_.positions=ZBe(m,c,l,p),h&&!d||(_.arcType=uu.NONE);return!0}function oFe(e,t,n,i,o){const a=IBe(n,"outerBoundaryIs",dBe.kml);let s=IBe(a,"LinearRing",dBe.kml),c=IBe(s,"coordinates",dBe.kml);const l=e._ellipsoid;let u=EBe(c,l);const h=LBe(n,"extrude",dBe.kml),d=RBe(n,"altitudeMode",dBe.kml),f=RBe(n,"altitudeMode",dBe.gx),p=TBe(d,f),m=Object(r["a"])(o.polygon)?o.polygon.clone():VBe(),_=o.polyline;if(Object(r["a"])(_)&&(m.outlineColor=Object(r["a"])(_.material)?_.material.color:Dm.WHITE,m.outlineWidth=_.width),i.polygon=m,p?(m.perPositionHeight=!0,m.extrudedHeight=h?0:void 0):e._clampToGround||(m.height=0),Object(r["a"])(u)){const e=new aS(u),t=PBe(n,"innerBoundaryIs",dBe.kml);for(let n=0;n<t.length;n++){s=PBe(t[n],"LinearRing",dBe.kml);for(let t=0;t<s.length;t++)c=IBe(s[t],"coordinates",dBe.kml),u=EBe(c,l),Object(r["a"])(u)&&e.holes.push(new aS(u))}m.hierarchy=e}return!0}function rFe(e,t,n,i,o){const r=RBe(n,"altitudeMode",dBe.kml),a=RBe(n,"altitudeMode",dBe.gx),s=PBe(n,"coord",dBe.gx),c=PBe(n,"angles",dBe.gx),l=PBe(n,"when",dBe.kml),u=LBe(n,"extrude",dBe.kml),h=TBe(r,a),d=e._ellipsoid;c.length>0&&ab("kml-gx:angles","KML - gx:angles are not supported in gx:Tracks");const f=Math.min(s.length,l.length),p=[],m=[];for(let g=0;g<f;g++){const e=CBe(s[g].textContent,d);p.push(e),m.push(mo.fromIso8601(l[g].textContent))}const _=new hOe;return _.addSamples(m,p),i.position=_,eFe(e,i,o,JBe(r,a)),tFe(i,o),i.availability=new xR,l.length>0&&i.availability.addInterval(new ZC({start:m[0],stop:m[m.length-1]})),h&&u&&$Be(t,i,o),!0}function aFe(e,t,n,i,o,r,a,s,c){const l=e[0],u=e[e.length-1],h=new hOe;h.addSamples(e,t),n.intervals.addInterval(new ZC({start:l,stop:u,isStartIncluded:c,isStopIncluded:c,data:QBe(h,a,s)})),i.addInterval(new ZC({start:l,stop:u,isStartIncluded:c,isStopIncluded:c})),o.intervals.addInterval(new ZC({start:l,stop:u,isStartIncluded:c,isStopIncluded:c,data:r}))}function sFe(e,t,n,i,o){const a=LBe(n,"interpolate",dBe.gx),s=PBe(n,"Track",dBe.gx);let c,l,u,h=!1;const d=new TOe,f=new xR,p=new xbe,m=e._ellipsoid;for(let _=0,g=s.length;_<g;_++){const e=s[_],t=PBe(e,"when",dBe.kml),n=PBe(e,"coord",dBe.gx),i=RBe(e,"altitudeMode",dBe.kml),o=RBe(e,"altitudeMode",dBe.gx),g=TBe(i,o),b=LBe(e,"extrude",dBe.kml),y=Math.min(n.length,t.length),v=[];c=[];for(let r=0;r<y;r++){const e=CBe(n[r].textContent,m);v.push(e),c.push(mo.fromIso8601(t[r].textContent))}a&&(Object(r["a"])(l)&&aFe([l,c[0]],[u,v[0]],p,f,d,!1,"absolute",void 0,!1),l=c[y-1],u=v[v.length-1]),aFe(c,v,p,f,d,g&&b,i,o,!0),h=h||g&&b}return i.availability=f,i.position=p,eFe(e,i,o),tFe(i,o),h&&($Be(t,i,o),i.polyline.show=d),!0}const cFe={Point:nFe,LineString:iFe,LinearRing:iFe,Polygon:oFe,Track:rFe,MultiTrack:sFe,MultiGeometry:lFe,Model:uFe};function lFe(e,t,n,i,o,a){const s=n.childNodes;let c=!1;for(let l=0,u=s.length;l<u;l++){const n=s.item(l),u=cFe[n.localName];if(Object(r["a"])(u)){const r=wBe(n,t,a);r.parent=i,r.name=i.name,r.availability=i.availability,r.description=i.description,r.kml=i.kml,u(e,t,n,r,o)&&(c=!0)}}return c}function uFe(e,t,n,i,o){return ab("kml-unsupportedGeometry",`KML - Unsupported geometry: ${n.localName}`),!1}function hFe(e,t){const n=IBe(e,"ExtendedData",dBe.kml);if(!Object(r["a"])(n))return;Object(r["a"])(IBe(n,"SchemaData",dBe.kml))&&ab("kml-schemaData","KML - SchemaData is unsupported"),Object(r["a"])(SBe(n,"xmlns:prefix"))&&ab("kml-extendedData","KML - ExtendedData with xmlns:prefix is unsupported");const i={},o=PBe(n,"Data",dBe.kml);if(Object(r["a"])(o)){const e=o.length;for(let t=0;t<e;t++){const e=o[t],n=SBe(e,"name");Object(r["a"])(n)&&(i[n]={displayName:RBe(e,"displayName",dBe.kml),value:RBe(e,"value",dBe.kml)})}}t.kml.extendedData=i}let dFe;function fFe(e,t,n,i,a){let s,c,l;const u=t.kml,h=u.extendedData,d=RBe(e,"description",dBe.kml),f=Object(o["a"])(t.balloonStyle,n.balloonStyle);let p,m=Dm.WHITE,_=Dm.BLACK,g=d;if(Object(r["a"])(f)&&(m=Object(o["a"])(f.bgColor,Dm.WHITE),_=Object(o["a"])(f.textColor,Dm.BLACK),g=Object(o["a"])(f.text,d)),Object(r["a"])(g)){if(g=g.replace("$[name]",Object(o["a"])(t.name,"")),g=g.replace("$[description]",Object(o["a"])(d,"")),g=g.replace("$[address]",Object(o["a"])(u.address,"")),g=g.replace("$[Snippet]",Object(o["a"])(u.snippet,"")),g=g.replace("$[id]",t.id),g=g.replace("$[geDirections]",""),Object(r["a"])(h)){const e=g.match(/\$\[.+?\]/g);if(null!==e)for(s=0;s<e.length;s++){const t=e[s];let n=t.substr(2,t.length-3);const i=/\/displayName$/.test(n);n=n.replace(/\/displayName$/,""),p=h[n],Object(r["a"])(p)&&(p=i?p.displayName:p.value),Object(r["a"])(p)&&(g=g.replace(t,Object(o["a"])(p,"")))}}}else if(Object(r["a"])(h)&&(l=Object.keys(h),l.length>0)){for(g='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',s=0;s<l.length;s++)c=l[s],p=h[c],g+=`<tr><th>${Object(o["a"])(p.displayName,c)}</th><td>${Object(o["a"])(p.value,"")}</td></tr>`;g+="</tbody></table>"}if(!Object(r["a"])(g))return;g=iBe.link(g),dFe.innerHTML=g;const b=dFe.querySelectorAll("a");for(s=0;s<b.length;s++)b[s].setAttribute("target","_blank");Object(r["a"])(i)&&i.keys.length>1&&(OBe(dFe,"a","href",i),OBe(dFe,"link","href",i),OBe(dFe,"area","href",i),OBe(dFe,"img","src",i),OBe(dFe,"iframe","src",i),OBe(dFe,"video","src",i),OBe(dFe,"audio","src",i),OBe(dFe,"source","src",i),OBe(dFe,"track","src",i),OBe(dFe,"input","src",i),OBe(dFe,"embed","src",i),OBe(dFe,"script","src",i),OBe(dFe,"video","poster",i)),ABe(dFe,"a","href",a),ABe(dFe,"link","href",a),ABe(dFe,"area","href",a),ABe(dFe,"img","src",a),ABe(dFe,"iframe","src",a),ABe(dFe,"video","src",a),ABe(dFe,"audio","src",a),ABe(dFe,"source","src",a),ABe(dFe,"track","src",a),ABe(dFe,"input","src",a),ABe(dFe,"embed","src",a),ABe(dFe,"script","src",a),ABe(dFe,"video","poster",a);let y='<div class="cesium-infoBox-description-lighter" style="';y+="overflow:auto;",y+="word-wrap:break-word;",y+=`background-color:${m.toCssColorString()};`,y+=`color:${_.toCssColorString()};`,y+='">',y+=`${dFe.innerHTML}</div>`,dFe.innerHTML="",t.description=y}function pFe(e,t,n){const i=n.entityCollection,a=n.parentEntity,s=n.sourceResource,c=n.uriResolver,l=wBe(t,i,n.context),u=l.kml,h=YBe(e,t,n.styleCollection,s,c),d=RBe(t,"name",dBe.kml);l.name=d,l.parent=a;let f=kBe(t);function p(e){return!e||e.show&&p(e.parent)}Object(r["a"])(f)||(f=zBe(t)),l.availability=f,UFe(l);const m=LBe(t,"visibility",dBe.kml);l.show=p(a)&&Object(o["a"])(m,!0);const _=IBe(t,"author",dBe.atom),g=u.author;g.name=RBe(_,"name",dBe.atom),g.uri=RBe(_,"uri",dBe.atom),g.email=RBe(_,"email",dBe.atom);const b=IBe(t,"link",dBe.atom),y=u.link;y.href=SBe(b,"href"),y.hreflang=SBe(b,"hreflang"),y.rel=SBe(b,"rel"),y.type=SBe(b,"type"),y.title=SBe(b,"title"),y.length=SBe(b,"length"),u.address=RBe(t,"address",dBe.kml),u.phoneNumber=RBe(t,"phoneNumber",dBe.kml),u.snippet=RBe(t,"Snippet",dBe.kml),hFe(t,l),fFe(t,l,h,c,s);const v=e._ellipsoid;return TFe(t,l,v),wFe(t,l,v),Object(r["a"])(IBe(t,"Region",dBe.kml))&&ab("kml-region","KML - Placemark Regions are unsupported"),{entity:l,styleEntity:h}}function mFe(e,t,n,i){i.addNodes(t.childNodes,n),i.process()}function _Fe(e,t,n,i){const o=pFe(e,t,n),r=Object(RL["a"])(n);r.parentEntity=o.entity,mFe(e,t,r,i)}function gFe(e,t,n,i){const o=pFe(e,t,n),a=o.entity,s=o.styleEntity;let c=!1;const l=t.childNodes;for(let u=0,h=l.length;u<h&&!c;u++){const t=l.item(u),i=cFe[t.localName];Object(r["a"])(i)&&(i(e,n.entityCollection,t,a,s,a.id),c=!0)}c||(a.merge(s),eFe(e,a,s))}"undefined"!==typeof document&&(dFe=document.createElement("div"));const bFe={FlyTo:AFe,Wait:OFe,SoundCue:vFe,AnimatedUpdate:vFe,TourControl:vFe};function yFe(e,t,n,i){const o=RBe(t,"name",dBe.kml),r=SBe(t,"id"),a=new $Ne(o,r),s=IBe(t,"Playlist",dBe.gx);if(s){const t=e._ellipsoid,n=s.childNodes;for(let e=0;e<n.length;e++){const i=n[e];if(i.localName){const e=bFe[i.localName];e?e(a,i,t):console.log(`Unknown KML Tour playlist entry type ${i.localName}`)}}}e._kmlTours.push(a)}function vFe(e,t){ab(`KML Tour unsupported node ${t.localName}`)}function OFe(e,t){const n=jBe(t,"duration",dBe.gx);e.addPlaylistEntry(new eBe(n))}function AFe(e,t,n){const i=jBe(t,"duration",dBe.gx),o=RBe(t,"flyToMode",dBe.gx),r={kml:{}};TFe(t,r,n),wFe(t,r,n);const a=r.kml.lookAt||r.kml.camera,s=new QNe(i,o,a);e.addPlaylistEntry(s)}function wFe(e,t,n){const i=IBe(e,"Camera",dBe.kml);if(Object(r["a"])(i)){const e=Object(o["a"])(jBe(i,"longitude",dBe.kml),0),r=Object(o["a"])(jBe(i,"latitude",dBe.kml),0),a=Object(o["a"])(jBe(i,"altitude",dBe.kml),0),s=Object(o["a"])(jBe(i,"heading",dBe.kml),0),c=Object(o["a"])(jBe(i,"tilt",dBe.kml),0),l=Object(o["a"])(jBe(i,"roll",dBe.kml),0),u=g.fromDegrees(e,r,a,n),h=To.fromDegrees(s,c-90,l);t.kml.camera=new qDe(u,h)}}function TFe(e,t,n){const i=IBe(e,"LookAt",dBe.kml);if(Object(r["a"])(i)){const e=Object(o["a"])(jBe(i,"longitude",dBe.kml),0),r=Object(o["a"])(jBe(i,"latitude",dBe.kml),0),a=Object(o["a"])(jBe(i,"altitude",dBe.kml),0);let c=jBe(i,"heading",dBe.kml),l=jBe(i,"tilt",dBe.kml);const u=Object(o["a"])(jBe(i,"range",dBe.kml),0);l=s["a"].toRadians(Object(o["a"])(l,0)),c=s["a"].toRadians(Object(o["a"])(c,0));const h=new JT(c,l-s["a"].PI_OVER_TWO,u),d=g.fromDegrees(e,r,a,n);t.kml.lookAt=new WNe(d,h)}}function CFe(e,t,n,i){const o=n.screenOverlayContainer;if(!Object(r["a"])(o))return;const a=n.sourceResource,s=n.uriResolver,c=IBe(t,"Icon",dBe.kml),l=GBe(c,e,a,s,!1);if(!Object(r["a"])(l))return;const u=document.createElement("img");e._screenOverlays.push(u),u.src=l.url,u.onload=function(){const e=["position: absolute"],n=IBe(t,"screenXY",dBe.kml),i=IBe(t,"overlayXY",dBe.kml),o=IBe(t,"size",dBe.kml);let a,s,c,l,h,d;Object(r["a"])(o)&&(a=xBe(o,"x"),s=xBe(o,"y"),c=SBe(o,"xunits"),l=SBe(o,"yunits"),Object(r["a"])(a)&&-1!==a&&0!==a&&("fraction"===c?h=`width: ${Math.floor(100*a)}%`:"pixels"===c&&(h=`width: ${a}px`),e.push(h)),Object(r["a"])(s)&&-1!==s&&0!==s&&("fraction"===l?d=`height: ${Math.floor(100*s)}%`:"pixels"===l&&(d=`height: ${s}px`),e.push(d))),u.style=e.join(";");let f=0,p=u.height;Object(r["a"])(i)&&(a=xBe(i,"x"),s=xBe(i,"y"),c=SBe(i,"xunits"),l=SBe(i,"yunits"),Object(r["a"])(a)&&("fraction"===c?f=a*u.width:("pixels"===c||"insetPixels"===c)&&(f=a)),Object(r["a"])(s)&&("fraction"===l?p=s*u.height:("pixels"===l||"insetPixels"===l)&&(p=s))),Object(r["a"])(n)&&(a=xBe(n,"x"),s=xBe(n,"y"),c=SBe(n,"xunits"),l=SBe(n,"yunits"),Object(r["a"])(a)&&("fraction"===c?h=`left: calc(${Math.floor(100*a)}% - ${f}px)`:"pixels"===c?h=`left: ${a-f}px`:"insetPixels"===c&&(h=`right: ${a-f}px`),e.push(h)),Object(r["a"])(s)&&("fraction"===l?d=`bottom: calc(${Math.floor(100*s)}% - ${p}px)`:"pixels"===l?d=`bottom: ${s-p}px`:"insetPixels"===l&&(d=`top: ${s-p}px`),e.push(d))),u.style=e.join(";")},o.appendChild(u)}function EFe(e,t,n,i){const o=pFe(e,t,n),a=o.entity;let c,l=!1;const u=e._ellipsoid,h=EBe(IBe(t,"LatLonQuad",dBe.gx),u),d=jBe(t,"drawOrder",dBe.kml);if(Object(r["a"])(h))c=VBe(),c.hierarchy=new aS(h),c.zIndex=d,a.polygon=c,l=!0;else{c=new _Y,c.zIndex=d,a.rectangle=c;const e=IBe(t,"LatLonBox",dBe.kml);if(Object(r["a"])(e)){let t=jBe(e,"west",dBe.kml),n=jBe(e,"south",dBe.kml),i=jBe(e,"east",dBe.kml),o=jBe(e,"north",dBe.kml);Object(r["a"])(t)&&(t=s["a"].negativePiToPi(s["a"].toRadians(t))),Object(r["a"])(n)&&(n=s["a"].clampToLatitudeRange(s["a"].toRadians(n))),Object(r["a"])(i)&&(i=s["a"].negativePiToPi(s["a"].toRadians(i))),Object(r["a"])(o)&&(o=s["a"].clampToLatitudeRange(s["a"].toRadians(o))),c.coordinates=new Fe(t,n,i,o);const a=jBe(e,"rotation",dBe.kml);if(Object(r["a"])(a)){const e=s["a"].toRadians(a);c.rotation=e,c.stRotation=e}}}const f=IBe(t,"Icon",dBe.kml),p=GBe(f,e,n.sourceResource,n.uriResolver,!0);if(Object(r["a"])(p)){l&&ab("kml-gx:LatLonQuad","KML - gx:LatLonQuad Icon does not support texture projection.");const e=jBe(f,"x",dBe.gx),n=jBe(f,"y",dBe.gx),i=jBe(f,"w",dBe.gx),o=jBe(f,"h",dBe.gx);(Object(r["a"])(e)||Object(r["a"])(n)||Object(r["a"])(i)||Object(r["a"])(o))&&ab("kml-groundOverlay-xywh","KML - gx:x, gx:y, gx:w, gx:h aren't supported for GroundOverlays"),c.material=p,c.material.color=FBe(t,"color",dBe.kml),c.material.transparent=!0}else c.material=FBe(t,"color",dBe.kml);let m=RBe(t,"altitudeMode",dBe.kml);Object(r["a"])(m)?"absolute"===m?(c.height=jBe(t,"altitude",dBe.kml),c.zIndex=void 0):"clampToGround"!==m&&ab("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${m}`):(m=RBe(t,"altitudeMode",dBe.gx),"relativeToSeaFloor"===m?(ab("kml-altitudeMode-relativeToSeaFloor","KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."),c.height=jBe(t,"altitude",dBe.kml),c.zIndex=void 0):"clampToSeaFloor"===m?ab("kml-altitudeMode-clampToSeaFloor","KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."):Object(r["a"])(m)&&ab("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${m}`))}function xFe(e,t,n,i){e._unsupportedNode.raiseEvent(e,n.parentEntity,t,n.entityCollection,n.styleCollection,n.sourceResource,n.uriResolver),ab(`kml-unsupportedFeature-${t.nodeName}`,`KML - Unsupported feature: ${t.nodeName}`)}const SFe={INTERVAL:0,EXPIRE:1,STOP:2};function IFe(e){if(!Object(r["a"])(e)||0===e.length)return"";const t=e[0];return"&"!==t&&"?"!==t||(e=e.substring(1)),e}const DFe=new Fe,PFe=new I,jFe=new Gt,RFe=new g;function LFe(e,t,n,i,a,c){function l(e){return e<-s["a"].PI_OVER_TWO?-s["a"].PI_OVER_TWO:e>s["a"].PI_OVER_TWO?s["a"].PI_OVER_TWO:e}function u(e){return e>s["a"].PI?e-s["a"].TWO_PI:e<-s["a"].PI?e+s["a"].TWO_PI:e}let h=Object(pM["a"])(e.queryParameters);if(h=h.replace(/%5B/g,"[").replace(/%5D/g,"]"),Object(r["a"])(t)&&t._mode!==SH.MORPHING){let e,d;if(a=Object(o["a"])(a,DFe),Object(r["a"])(n)&&(jFe.x=.5*n.clientWidth,jFe.y=.5*n.clientHeight,e=t.pickEllipsoid(jFe,c,RFe)),Object(r["a"])(e)?d=c.cartesianToCartographic(e,PFe):(d=Fe.center(a,PFe),e=c.cartographicToCartesian(d)),Object(r["a"])(i)&&!s["a"].equalsEpsilon(i,1,s["a"].EPSILON9)){const e=a.width*i*.5,t=a.height*i*.5;a=new Fe(u(d.longitude-e),l(d.latitude-t),u(d.longitude+e),l(d.latitude+t))}h=h.replace("[bboxWest]",s["a"].toDegrees(a.west).toString()),h=h.replace("[bboxSouth]",s["a"].toDegrees(a.south).toString()),h=h.replace("[bboxEast]",s["a"].toDegrees(a.east).toString()),h=h.replace("[bboxNorth]",s["a"].toDegrees(a.north).toString());const f=s["a"].toDegrees(d.longitude).toString(),p=s["a"].toDegrees(d.latitude).toString();h=h.replace("[lookatLon]",f),h=h.replace("[lookatLat]",p),h=h.replace("[lookatTilt]",s["a"].toDegrees(t.pitch).toString()),h=h.replace("[lookatHeading]",s["a"].toDegrees(t.heading).toString()),h=h.replace("[lookatRange]",g.distance(t.positionWC,e)),h=h.replace("[lookatTerrainLon]",f),h=h.replace("[lookatTerrainLat]",p),h=h.replace("[lookatTerrainAlt]",d.height.toString()),c.cartesianToCartographic(t.positionWC,PFe),h=h.replace("[cameraLon]",s["a"].toDegrees(PFe.longitude).toString()),h=h.replace("[cameraLat]",s["a"].toDegrees(PFe.latitude).toString()),h=h.replace("[cameraAlt]",s["a"].toDegrees(PFe.height).toString());const m=t.frustum,_=m.aspectRatio;let b="",y="";if(Object(r["a"])(_)){const e=s["a"].toDegrees(m.fov);_>1?(b=e,y=e/_):(y=e,b=e*_)}h=h.replace("[horizFov]",b.toString()),h=h.replace("[vertFov]",y.toString())}else h=h.replace("[bboxWest]","-180"),h=h.replace("[bboxSouth]","-90"),h=h.replace("[bboxEast]","180"),h=h.replace("[bboxNorth]","90"),h=h.replace("[lookatLon]",""),h=h.replace("[lookatLat]",""),h=h.replace("[lookatRange]",""),h=h.replace("[lookatTilt]",""),h=h.replace("[lookatHeading]",""),h=h.replace("[lookatTerrainLon]",""),h=h.replace("[lookatTerrainLat]",""),h=h.replace("[lookatTerrainAlt]",""),h=h.replace("[cameraLon]",""),h=h.replace("[cameraLat]",""),h=h.replace("[cameraAlt]",""),h=h.replace("[horizFov]",""),h=h.replace("[vertFov]","");Object(r["a"])(n)?(h=h.replace("[horizPixels]",n.clientWidth),h=h.replace("[vertPixels]",n.clientHeight)):(h=h.replace("[horizPixels]",""),h=h.replace("[vertPixels]","")),h=h.replace("[terrainEnabled]","1"),h=h.replace("[clientVersion]","1"),h=h.replace("[kmlVersion]","2.2"),h=h.replace("[clientName]","Cesium"),h=h.replace("[language]","English"),e.setQueryParameters(Object(yM["a"])(h))}function MFe(e,t,n,i){const a=pFe(e,t,n),s=a.entity,c=n.sourceResource,l=n.uriResolver;let u=IBe(t,"Link",dBe.kml);if(Object(r["a"])(u)||(u=IBe(t,"Url",dBe.kml)),Object(r["a"])(u)){let t,a,h=RBe(u,"href",dBe.kml);if(Object(r["a"])(h)){let d=h;if(h=MBe(h,c,n.uriResolver),/^data:/.test(h.getUrlComponent()))/\.kmz/i.test(c.getUrlComponent())||(d=c.getDerivedResource({url:d}));else{d=h.clone(),t=RBe(u,"viewRefreshMode",dBe.kml),a=Object(o["a"])(RBe(u,"viewBoundScale",dBe.kml),1);const n="onStop"===t?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",i=Object(o["a"])(RBe(u,"viewFormat",dBe.kml),n),s=RBe(u,"httpQuery",dBe.kml);Object(r["a"])(i)&&h.setQueryParameters(Object(yM["a"])(IFe(i))),Object(r["a"])(s)&&h.setQueryParameters(Object(yM["a"])(IFe(s)));const c=e._ellipsoid;LFe(h,e.camera,e.canvas,a,e._lastCameraView.bbox,c)}const f={sourceUri:d,uriResolver:l,context:s.id,screenOverlayContainer:n.screenOverlayContainer},p=new ube,m=zFe(e,p,h,f).then((function(n){const i=e._entityCollection,c=p.values;i.suspendEvents();for(let e=0;e<c.length;e++){const t=c[e];Object(r["a"])(t.parent)||(t.parent=s,UFe(t)),i.add(t)}i.resumeEvents();const l=RBe(u,"refreshMode",dBe.kml);let d=Object(o["a"])(jBe(u,"refreshInterval",dBe.kml),0);if("onInterval"===l&&d>0||"onExpire"===l||"onStop"===t){const t=IBe(n,"NetworkLinkControl",dBe.kml),i=Object(r["a"])(t),c=mo.now(),p={id:ML(),href:h,cookie:{},lastUpdated:c,updating:!1,entity:s,viewBoundScale:a,needsUpdate:!1,cameraUpdateTime:c};let m=0;if(i&&(p.cookie=Object(yM["a"])(Object(o["a"])(RBe(t,"cookie",dBe.kml),"")),m=Object(o["a"])(jBe(t,"minRefreshPeriod",dBe.kml),0)),"onInterval"===l)i&&(d=Math.max(m,d)),p.refreshMode=SFe.INTERVAL,p.time=d;else if("onExpire"===l){let e;if(i&&(e=RBe(t,"expires",dBe.kml)),Object(r["a"])(e))try{const t=mo.fromIso8601(e),n=mo.secondsDifference(t,c);n>0&&n<m&&mo.addSeconds(c,m,t),p.refreshMode=SFe.EXPIRE,p.time=t}catch(f){ab("kml-refreshMode-onInterval-onExpire","KML - NetworkLinkControl expires is not a valid date")}else ab("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element")}else Object(r["a"])(e.camera)?(p.refreshMode=SFe.STOP,p.time=Object(o["a"])(jBe(u,"viewRefreshTime",dBe.kml),0)):ab("kml-refrehMode-onStop-noCamera","A NetworkLink with viewRefreshMode=onStop requires the `camera` property to be defined.");Object(r["a"])(p.refreshMode)&&e._networkLinks.set(p.id,p)}else"onRegion"===t&&ab("kml-refrehMode-onRegion","KML - Unsupported viewRefreshMode: onRegion")})).catch((function(t){ab(`An error occured during loading ${h.url}`),e._error.raiseEvent(e,t)}));i.addPromise(m)}}}function NFe(e,t,n,i){const o=fBe[t.localName];return Object(r["a"])(o)?o(e,t,n,i):xFe(e,t,n,i)}function BFe(e,t,n,i,o,a,s){t.removeAll();const c=n.documentElement,l="Document"===c.localName?c:IBe(c,"Document",dBe.kml);let u=RBe(l,"name",dBe.kml);Object(r["a"])(u)||(u=$L(i.getUrlComponent())),Object(r["a"])(e._name)||(e._name=u);const h=new kFe._DeferredLoading(e),d=new ube(e);return Promise.all(KBe(e,n,d,i,!1,o)).then((function(){let c=n.documentElement;if("kml"===c.localName){const e=c.childNodes;for(let t=0;t<e.length;t++){const n=e[t];if(Object(r["a"])(fBe[n.localName])){c=n;break}}}const l={parentEntity:void 0,entityCollection:t,styleCollection:d,sourceResource:i,uriResolver:o,context:s,screenOverlayContainer:a};return t.suspendEvents(),NFe(e,c,l,h),t.resumeEvents(),h.wait().then((function(){return n.documentElement}))}))}function FFe(e,t,n,i,o){const a=Bt("ThirdParty/Workers/z-worker-pako.js");mRe({workerScripts:{deflate:[a,"./pako_deflate.min.js"],inflate:[a,"./pako_inflate.min.js"]}});const s=new XMe(new WLe(n));return Promise.resolve(s.getEntries()).then((function(n){const a=[],c={};let l;for(let e=0;e<n.length;e++){const t=n[e];t.directory||(/\.kml$/i.test(t.filename)?Object(r["a"])(l)&&/\//i.test(t.filename)?a.push(vBe(t,c)):(Object(r["a"])(l)&&a.push(vBe(l,c)),l=t):a.push(vBe(t,c)))}return Object(r["a"])(l)&&a.push(yBe(l,c)),Promise.all(a).then((function(){if(s.close(),!Object(r["a"])(c.kml))throw new ye["a"]("KMZ file does not contain a KML document.");return c.keys=Object.keys(c),BFe(e,t,c.kml,i,c,o)}))}))}function zFe(e,t,n,i){i=Object(o["a"])(i,o["a"].EMPTY_OBJECT);let a=i.sourceUri;const s=i.uriResolver,c=i.context;let l=i.screenOverlayContainer,u=n;if("string"===typeof n||n instanceof Et["a"]){n=Et["a"].createIfNeeded(n),u=n.fetchBlob(),a=Object(o["a"])(a,n.clone());const t=e._resourceCredits,i=n.credits;if(Object(r["a"])(i)){const e=i.length;for(let n=0;n<e;n++)t.push(i[n])}}else a=Object(o["a"])(a,Et["a"].DEFAULT.clone());return a=Et["a"].createIfNeeded(a),Object(r["a"])(l)&&(l=HNe(l)),Promise.resolve(u).then((function(n){return n instanceof Blob?mBe(n).then((function(i){return i?FFe(e,t,n,a,l):_Be(n).then((function(n){let i,o;n=gBe(n),n=bBe(n);try{i=nBe.parseFromString(n,"application/xml")}catch(u){o=u.toString()}if(Object(r["a"])(o)||i.body||"parsererror"===i.documentElement.tagName){let e=Object(r["a"])(o)?o:i.documentElement.firstChild.nodeValue;throw e||(e=i.body.innerText),new ye["a"](e)}return BFe(e,t,i,a,s,l,c)}))})):BFe(e,t,n,a,s,l,c)})).catch((function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}function kFe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.camera,n=e.canvas;this._changed=new dn["a"],this._error=new dn["a"],this._loading=new dn["a"],this._refresh=new dn["a"],this._unsupportedNode=new dn["a"],this._clock=void 0,this._entityCollection=new ube(this),this._name=void 0,this._isLoading=!1,this._pinBuilder=new lx,this._networkLinks=new pu,this._entityCluster=new cve,this.canvas=n,this.camera=t,this._lastCameraView={position:Object(r["a"])(t)?g.clone(t.positionWC):void 0,direction:Object(r["a"])(t)?g.clone(t.directionWC):void 0,up:Object(r["a"])(t)?g.clone(t.upWC):void 0,bbox:Object(r["a"])(t)?t.computeViewRectangle():Fe.clone(Fe.MAX_VALUE)},this._ellipsoid=Object(o["a"])(e.ellipsoid,k.WGS84);let i=e.credit;"string"===typeof i&&(i=new hn(i)),this._credit=i,this._resourceCredits=[],this._kmlTours=[],this._screenOverlays=[]}function UFe(e){const t=e.parent;if(Object(r["a"])(t)){const n=t.availability;if(Object(r["a"])(n)){const t=e.availability;Object(r["a"])(t)?t.intersect(n):e.availability=n}}}function VFe(e,t,n,i,a){return function(s){if(!i.contains(t.id))return;let c=!1;const l=IBe(s,"NetworkLinkControl",dBe.kml),u=Object(r["a"])(l);let h=0;if(u){if(Object(r["a"])(IBe(l,"Update",dBe.kml)))return ab("kml-networkLinkControl-update","KML - NetworkLinkControl updates aren't supported."),t.updating=!1,void i.remove(t.id);t.cookie=Object(yM["a"])(Object(o["a"])(RBe(l,"cookie",dBe.kml),"")),h=Object(o["a"])(jBe(l,"minRefreshPeriod",dBe.kml),0)}const d=mo.now(),f=t.refreshMode;if(f===SFe.INTERVAL)Object(r["a"])(l)&&(t.time=Math.max(h,t.time));else if(f===SFe.EXPIRE){let e;if(Object(r["a"])(l)&&(e=RBe(l,"expires",dBe.kml)),Object(r["a"])(e))try{const n=mo.fromIso8601(e),i=mo.secondsDifference(n,d);i>0&&i<h&&mo.addSeconds(d,h,n),t.time=n}catch(C){ab("kml-networkLinkControl-expires","KML - NetworkLinkControl expires is not a valid date"),c=!0}else ab("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"),c=!0}const p=t.entity,m=e._entityCollection,_=n.values;function g(e){m.remove(e);const t=e._children,n=t.length;for(let i=0;i<n;++i)g(t[i])}m.suspendEvents();const b=m.values.slice();let y;for(y=0;y<b.length;++y){const e=b[y];e.parent===p&&(e.parent=void 0,g(e))}for(m.resumeEvents(),m.suspendEvents(),y=0;y<_.length;y++){const e=_[y];Object(r["a"])(e.parent)||(e.parent=p,UFe(e)),m.add(e)}m.resumeEvents(),c?i.remove(t.id):t.lastUpdated=d;const v=m.computeAvailability(),O=v.start,A=v.stop,w=mo.equals(O,oE.MINIMUM_VALUE),T=mo.equals(A,oE.MAXIMUM_VALUE);if(!w||!T){const t=e._clock;t.startTime===O&&t.stopTime===A||(t.startTime=O,t.stopTime=A,e._changed.raiseEvent(e))}t.updating=!1,t.needsUpdate=!1,e._refresh.raiseEvent(e,a.getUrlComponent(!0))}}kFe.load=function(e,t){t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=new kFe(t);return n.load(e,t)},Object.defineProperties(kFe.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},refreshEvent:{get:function(){return this._refresh}},unsupportedNodeEvent:{get:function(){return this._unsupportedNode}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}},kmlTours:{get:function(){return this._kmlTours}}}),kFe.prototype.load=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("data is required.");t=Object(o["a"])(t,o["a"].EMPTY_OBJECT),kbe.setLoading(this,!0);const n=this._name;this._name=void 0,this._clampToGround=Object(o["a"])(t.clampToGround,!1);const i=this;return zFe(this,this._entityCollection,e,t).then((function(){let e;const t=i._entityCollection.computeAvailability();let o=t.start,r=t.stop;const a=mo.equals(o,oE.MINIMUM_VALUE),s=mo.equals(r,oE.MAXIMUM_VALUE);if(!a||!s){let t;a&&(t=new Date,t.setHours(0,0,0,0),o=mo.fromDate(t)),s&&(t=new Date,t.setHours(24,0,0,0),r=mo.fromDate(t)),e=new vve,e.startTime=o,e.stopTime=r,e.currentTime=mo.clone(o),e.clockRange=pm.LOOP_STOP,e.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(mo.secondsDifference(r,o)/60,1),31556900))}let c=!1;return e!==i._clock&&(i._clock=e,c=!0),n!==i._name&&(c=!0),c&&i._changed.raiseEvent(i),kbe.setLoading(i,!1),i})).catch((function(e){return kbe.setLoading(i,!1),i._error.raiseEvent(i,e),console.log(e),Promise.reject(e)}))},kFe.prototype.destroy=function(){while(this._screenOverlays.length>0){const e=this._screenOverlays.pop();e.remove()}};const HFe=new pu;function GFe(){this.author={name:void 0,uri:void 0,email:void 0},this.link={href:void 0,hreflang:void 0,rel:void 0,type:void 0,title:void 0,length:void 0},this.address=void 0,this.phoneNumber=void 0,this.snippet=void 0,this.extendedData=void 0}kFe.prototype.update=function(e){const t=this._networkLinks;if(0===t.length)return!0;const n=mo.now(),i=this;function a(e){const t=e._children,n=t.length;for(let i=0;i<n;++i){const e=t[i];HFe.set(e.id,e),a(e)}}HFe.removeAll();let c=!1;const l=this._lastCameraView,u=this.camera;!Object(r["a"])(u)||u.positionWC.equalsEpsilon(l.position,s["a"].EPSILON7)&&u.directionWC.equalsEpsilon(l.direction,s["a"].EPSILON7)&&u.upWC.equalsEpsilon(l.up,s["a"].EPSILON7)||(l.position=g.clone(u.positionWC),l.direction=g.clone(u.directionWC),l.up=g.clone(u.upWC),l.bbox=u.computeViewRectangle(),c=!0);const h=new pu;let d=!1;return t.values.forEach((function(e){const t=e.entity;if(!HFe.contains(t.id)){if(!e.updating){let r=!1;if(e.refreshMode===SFe.INTERVAL?mo.secondsDifference(n,e.lastUpdated)>e.time&&(r=!0):e.refreshMode===SFe.EXPIRE?mo.greaterThan(n,e.time)&&(r=!0):e.refreshMode===SFe.STOP&&(c&&(e.needsUpdate=!0,e.cameraUpdateTime=n),e.needsUpdate&&mo.secondsDifference(n,e.cameraUpdateTime)>=e.time&&(r=!0)),r){a(t),e.updating=!0;const n=new ube,r=e.href.clone();r.setQueryParameters(e.cookie);const s=Object(o["a"])(i._ellipsoid,k.WGS84);LFe(r,i.camera,i.canvas,e.viewBoundScale,l.bbox,s),zFe(i,n,r,{context:t.id}).then(VFe(i,e,n,h,r)).catch((function(t){const n=`NetworkLink ${e.href} refresh failed: ${t}`;console.log(n),i._error.raiseEvent(i,n)})),d=!0}}h.set(e.id,e)}})),d&&(this._networkLinks=h,this._changed.raiseEvent(this)),!0},kFe._DeferredLoading=pBe,kFe._getTimestamp=bm;var WFe=kFe;function qFe(){a["a"].throwInstantiationError()}qFe.prototype.update=a["a"].throwInstantiationError,qFe.prototype.getBoundingSphere=a["a"].throwInstantiationError,qFe.prototype.isDestroyed=a["a"].throwInstantiationError,qFe.prototype.destroy=a["a"].throwInstantiationError;var YFe=qFe;const XFe=32,KFe="http://www.opengis.net/kml/2.2",$Fe="http://www.google.com/kml/ext/2.2",JFe="http://www.w3.org/2000/xmlns/";function QFe(e){this._files={},this._promises=[],this._count=0,this._modelCallback=e}const ZFe=/^data:image\/([^,;]+)/;function eze(e,t){return function(n){e._files[t]=n}}function tze(e){this._time=e}function nze(){this._ids={},this._styles={},this._count=0}function ize(){this._ids={}}function oze(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.entities,n=Object(o["a"])(e.kmz,!1);if(!Object(r["a"])(t))throw new a["a"]("entities is required.");const i=oze._createState(e),s=t.values.filter((function(e){return!Object(r["a"])(e.parent)})),c=i.kmlDoc,l=c.documentElement;l.setAttributeNS(JFe,"xmlns:gx",$Fe);const u=c.createElement("Document");l.appendChild(u),sze(i,u,s),i.styleCache.save(u);const h=i.externalFileHandler;return h.promise.then((function(){const e=new XMLSerializer,t=e.serializeToString(i.kmlDoc);return n?rze(t,h.files):{kml:t,externalFiles:h.files}}))}function rze(e,t){const n=Bt("ThirdParty/Workers/z-worker-pako.js");mRe({workerScripts:{deflate:[n,"./pako_deflate.min.js"],inflate:[n,"./pako_inflate.min.js"]}});const i=new qLe,o=new ENe(i);return o.add("doc.kml",new VLe(e)).then((function(){const e=Object.keys(t);return aze(o,e,t,0)})).then((function(){return o.close()})).then((function(e){return{kmz:e}}))}function aze(e,t,n,i){if(t.length===i)return;const o=t[i];return e.add(o,new WLe(n[o])).then((function(){return aze(e,t,n,i+1)}))}function sze(e,t,n){const i=e.kmlDoc,o=e.styleCache,a=e.valueGetter,s=e.idManager,c=n.length;let l,u,h;for(let d=0;d<c;++d){const c=n[d];let f;l=[],u=[],h=[],hze(e,c,u,h),mze(e,c.polyline,u,h),yze(e,c.rectangle,u,h,l),yze(e,c.polygon,u,h,l),Aze(e,c,c.model,u,h);const p=c.availability;Object(r["a"])(p)&&(f=i.createElement("TimeSpan"),mo.equals(p.start,oE.MINIMUM_VALUE)||f.appendChild(Eze(i,"begin",mo.toIso8601(p.start))),mo.equals(p.stop,oE.MAXIMUM_VALUE)||f.appendChild(Eze(i,"end",mo.toIso8601(p.stop))));for(let e=0;e<l.length;++e){const n=l[e];n.setAttribute("id",s.get(c.id)),n.appendChild(Eze(i,"name",c.name)),n.appendChild(Eze(i,"visibility",c.show)),n.appendChild(Eze(i,"description",c.description)),Object(r["a"])(f)&&n.appendChild(f),t.appendChild(n)}const m=u.length;if(m>0){const e=i.createElement("Placemark");e.setAttribute("id",s.get(c.id));let n=c.name;const l=c.label;if(Object(r["a"])(l)){const e=i.createElement("LabelStyle"),t=a.get(l.text);n=Object(r["a"])(t)&&t.length>0?t:n;const o=a.getColor(l.fillColor);Object(r["a"])(o)&&(e.appendChild(Eze(i,"color",o)),e.appendChild(Eze(i,"colorMode","normal")));const s=a.get(l.scale);Object(r["a"])(s)&&e.appendChild(Eze(i,"scale",s)),h.push(e)}e.appendChild(Eze(i,"name",n)),e.appendChild(Eze(i,"visibility",c.show)),e.appendChild(Eze(i,"description",c.description)),Object(r["a"])(f)&&e.appendChild(f),t.appendChild(e);const d=h.length;if(d>0){const t=i.createElement("Style");for(let e=0;e<d;++e)t.appendChild(h[e]);e.appendChild(Eze(i,"styleUrl",o.get(t)))}if(1===u.length)e.appendChild(u[0]);else if(u.length>1){const t=i.createElement("MultiGeometry");for(let e=0;e<m;++e)t.appendChild(u[e]);e.appendChild(t)}}const _=c._children;if(_.length>0){const n=i.createElement("Folder");n.setAttribute("id",s.get(c.id)),n.appendChild(Eze(i,"name",c.name)),n.appendChild(Eze(i,"visibility",c.show)),n.appendChild(Eze(i,"description",c.description)),t.appendChild(n),sze(e,n,_)}}}QFe.prototype.texture=function(e){const t=this;let n;if("string"===typeof e||e instanceof Et["a"]){if(e=Et["a"].createIfNeeded(e),!e.isDataUri)return e.url;const i=e.url.match(ZFe);n=`texture_${++this._count}`,Object(r["a"])(i)&&(n+=`.${i[1]}`);const o=e.fetchBlob().then((function(e){t._files[n]=e}));return this._promises.push(o),n}if(e instanceof HTMLCanvasElement){n=`texture_${++this._count}.png`;const i=new Promise(i=>{e.toBlob((function(e){t._files[n]=e,i()}))});return this._promises.push(i),n}return""},QFe.prototype.model=function(e,t){const n=this._modelCallback;if(!Object(r["a"])(n))throw new ye["a"]("Encountered a model entity while exporting to KML, but no model callback was supplied.");const i={},o=n(e,t,i);for(const r in i)if(i.hasOwnProperty(r)){const e=Promise.resolve(i[r]);this._promises.push(e),e.then(eze(this,r))}return o},Object.defineProperties(QFe.prototype,{promise:{get:function(){return Promise.all(this._promises)}},files:{get:function(){return this._files}}}),tze.prototype.get=function(e,t,n){let i;return Object(r["a"])(e)&&(i=Object(r["a"])(e.getValue)?e.getValue(this._time,n):e),Object(o["a"])(i,t)},tze.prototype.getColor=function(e,t){const n=this.get(e,t);if(Object(r["a"])(n))return xze(n)},tze.prototype.getMaterialType=function(e){if(Object(r["a"])(e))return e.getType(this._time)},nze.prototype.get=function(e){const t=this._ids,n=e.innerHTML;if(Object(r["a"])(t[n]))return t[n];let i=`style-${++this._count}`;return e.setAttribute("id",i),i=`#${i}`,t[n]=i,this._styles[n]=e,i},nze.prototype.save=function(e){const t=this._styles,n=e.childNodes[0];for(const i in t)t.hasOwnProperty(i)&&e.insertBefore(t[i],n)},ize.prototype.get=function(e){if(!Object(r["a"])(e))return this.get(ML());const t=this._ids;return Object(r["a"])(t[e])?`${e.toString()}-${++t[e]}`:(t[e]=0,e)},oze._createState=function(e){const t=e.entities,n=new nze,i=t.computeAvailability(),a=Object(r["a"])(e.time)?e.time:i.start;let s=Object(o["a"])(e.defaultAvailability,i);const c=Object(o["a"])(e.sampleDuration,60);s.start===oE.MINIMUM_VALUE?s.stop===oE.MAXIMUM_VALUE?s=new ZC:mo.addSeconds(s.stop,-10*c,s.start):s.stop===oE.MAXIMUM_VALUE&&mo.addSeconds(s.start,10*c,s.stop);const l=new QFe(e.modelCallback),u=document.implementation.createDocument(KFe,"kml");return{kmlDoc:u,ellipsoid:Object(o["a"])(e.ellipsoid,k.WGS84),idManager:new ize,styleCache:n,externalFileHandler:l,time:a,valueGetter:new tze(a),sampleDuration:c,defaultAvailability:new xR([s])}};const cze=new g,lze=new I,uze=new mo;function hze(e,t,n,i){const a=e.kmlDoc,s=e.ellipsoid,c=e.valueGetter,l=Object(o["a"])(t.billboard,t.point);if(!Object(r["a"])(l)&&!Object(r["a"])(t.path))return;const u=t.position;if(!u.isConstant)return void dze(e,t,l,n,i);c.get(u,void 0,cze);const h=Eze(a,"coordinates",Cze(cze,s)),d=a.createElement("Point"),f=a.createElement("altitudeMode");f.appendChild(Tze(e,l.heightReference)),d.appendChild(f),d.appendChild(h),n.push(d);const p=l instanceof $M?pze(e,l):fze(e,l);i.push(p)}function dze(e,t,n,i,a){const s=e.kmlDoc,c=e.ellipsoid,l=e.valueGetter;let u;const h=t.position;let d=!0;h instanceof xbe?(u=h.intervals,d=!1):u=Object(o["a"])(t.availability,e.defaultAvailability);const f=n instanceof Zq;let p,m,_;const b=[];for(p=0;p<u.length;++p){const t=u.get(p);let i=d?h:t.data;const o=s.createElement("altitudeMode");i instanceof SEe?(i=i._value,o.appendChild(Tze(e,QM.CLAMP_TO_GROUND))):Object(r["a"])(n)?o.appendChild(Tze(e,n.heightReference)):o.appendChild(Tze(e,QM.NONE));const a=[],y=[];if(i.isConstant){l.get(i,void 0,cze);const e=Eze(s,"coordinates",Cze(cze,c));a.push(mo.toIso8601(t.start)),y.push(e),a.push(mo.toIso8601(t.stop)),y.push(e)}else if(i instanceof hOe)for(_=i._property._times,m=0;m<_.length;++m)a.push(mo.toIso8601(_[m])),i.getValueInReferenceFrame(_[m],iD.FIXED,cze),y.push(Cze(cze,c));else if(i instanceof lOe){_=i._times;const e=i._values;for(m=0;m<_.length;++m)a.push(mo.toIso8601(_[m])),g.fromArray(e,3*m,cze),y.push(Cze(cze,c))}else{const n=e.sampleDuration;t.start.clone(uze),t.isStartIncluded||mo.addSeconds(uze,n,uze);const o=t.stop;while(mo.lessThan(uze,o))i.getValue(uze,cze),a.push(mo.toIso8601(uze)),y.push(Cze(cze,c)),mo.addSeconds(uze,n,uze);t.isStopIncluded&&mo.equals(uze,o)&&(i.getValue(uze,cze),a.push(mo.toIso8601(uze)),y.push(Cze(cze,c)))}const v=s.createElementNS($Fe,"Track");v.appendChild(o);for(let e=0;e<a.length;++e){const t=Eze(s,"when",a[e]),n=Eze(s,"coord",y[e],$Fe);v.appendChild(t),v.appendChild(n)}f&&v.appendChild(Oze(e,n)),b.push(v)}if(1===b.length)i.push(b[0]);else if(b.length>1){const e=s.createElementNS($Fe,"MultiTrack");for(p=0;p<b.length;++p)e.appendChild(b[p]);i.push(e)}if(Object(r["a"])(n)&&!f){const t=n instanceof $M?pze(e,n):fze(e,n);a.push(t)}const y=t.path;if(Object(r["a"])(y)){const t=l.get(y.width),n=y.material;if(Object(r["a"])(n)||Object(r["a"])(t)){const i=s.createElement("LineStyle");Object(r["a"])(t)&&i.appendChild(Eze(s,"width",t)),wze(e,n,i),a.push(i)}}}function fze(e,t){const n=e.kmlDoc,i=e.valueGetter,o=n.createElement("IconStyle"),a=i.getColor(t.color);Object(r["a"])(a)&&(o.appendChild(Eze(n,"color",a)),o.appendChild(Eze(n,"colorMode","normal")));const s=i.get(t.pixelSize);return Object(r["a"])(s)&&o.appendChild(Eze(n,"scale",s/XFe)),o}function pze(e,t){const n=e.kmlDoc,i=e.valueGetter,a=e.externalFileHandler,c=n.createElement("IconStyle");let l=i.get(t.image);if(Object(r["a"])(l)){l=a.texture(l);const e=n.createElement("Icon");e.appendChild(Eze(n,"href",l));const o=i.get(t.imageSubRegion);Object(r["a"])(o)&&(e.appendChild(Eze(n,"x",o.x,$Fe)),e.appendChild(Eze(n,"y",o.y,$Fe)),e.appendChild(Eze(n,"w",o.width,$Fe)),e.appendChild(Eze(n,"h",o.height,$Fe))),c.appendChild(e)}const u=i.getColor(t.color);Object(r["a"])(u)&&(c.appendChild(Eze(n,"color",u)),c.appendChild(Eze(n,"colorMode","normal")));let h=i.get(t.scale);Object(r["a"])(h)&&c.appendChild(Eze(n,"scale",h));const d=i.get(t.pixelOffset);if(Object(r["a"])(d)){h=Object(o["a"])(h,1),Gt.divideByScalar(d,h,d);const e=i.get(t.width,XFe),r=i.get(t.height,XFe),a=i.get(t.horizontalOrigin,eN.CENTER);a===eN.CENTER?d.x-=.5*e:a===eN.RIGHT&&(d.x-=e);const s=i.get(t.verticalOrigin,nN.CENTER);s===nN.TOP?d.y+=r:s===nN.CENTER&&(d.y+=.5*r);const l=n.createElement("hotSpot");l.setAttribute("x",-d.x),l.setAttribute("y",d.y),l.setAttribute("xunits","pixels"),l.setAttribute("yunits","pixels"),c.appendChild(l)}let f=i.get(t.rotation);const p=i.get(t.alignedAxis);return Object(r["a"])(f)&&g.equals(g.UNIT_Z,p)&&(f=s["a"].toDegrees(-f),0===f&&(f=360),c.appendChild(Eze(n,"heading",f))),c}function mze(e,t,n,i){const o=e.kmlDoc,a=e.ellipsoid,s=e.valueGetter;if(!Object(r["a"])(t))return;const c=o.createElement("LineString"),l=o.createElement("altitudeMode"),u=s.get(t.clampToGround,!1);let h;u?(c.appendChild(Eze(o,"tessellate",!0)),h=o.createTextNode("clampToGround")):h=o.createTextNode("absolute"),l.appendChild(h),c.appendChild(l);const d=t.positions,f=s.get(d),p=Eze(o,"coordinates",Cze(f,a));c.appendChild(p);const m=s.get(t.zIndex);u&&Object(r["a"])(m)&&c.appendChild(Eze(o,"drawOrder",m,$Fe)),n.push(c);const _=o.createElement("LineStyle"),g=s.get(t.width);Object(r["a"])(g)&&_.appendChild(Eze(o,"width",g)),wze(e,t.material,_),i.push(_)}function _ze(e,t,n){const i=e.kmlDoc,o=e.valueGetter;let r=o.get(t.height,0);n>0&&(r=n);const a=t.coordinates,c=o.get(a),l=[],u=[Fe.northeast,Fe.southeast,Fe.southwest,Fe.northwest];for(let p=0;p<4;++p)u[p](c,lze),l.push(`${s["a"].toDegrees(lze.longitude)},${s["a"].toDegrees(lze.latitude)},${r}`);const h=Eze(i,"coordinates",l.join(" ")),d=i.createElement("outerBoundaryIs"),f=i.createElement("LinearRing");return f.appendChild(h),d.appendChild(f),[d]}function gze(e,t,n,i){const o=e.kmlDoc,r=e.ellipsoid,a=[],c=t.length;for(let h=0;h<c;++h)I.fromCartesian(t[h],r,lze),a.push(`${s["a"].toDegrees(lze.longitude)},${s["a"].toDegrees(lze.latitude)},${i?lze.height:n}`);const l=Eze(o,"coordinates",a.join(" ")),u=o.createElement("LinearRing");return u.appendChild(l),u}function bze(e,t,n){const i=e.kmlDoc,o=e.valueGetter;let a=o.get(t.height,0);const s=o.get(t.perPositionHeight,!1);!s&&n>0&&(a=n);const c=[],l=t.hierarchy,u=o.get(l),h=Array.isArray(u)?u:u.positions,d=i.createElement("outerBoundaryIs");d.appendChild(gze(e,h,a,s)),c.push(d);const f=u.holes;if(Object(r["a"])(f)){const t=f.length;for(let n=0;n<t;++n){const t=i.createElement("innerBoundaryIs");t.appendChild(gze(e,f[n].positions,a,s)),c.push(t)}}return c}function yze(e,t,n,i,o){const a=e.kmlDoc,s=e.valueGetter;if(!Object(r["a"])(t))return;const c=t instanceof _Y;if(c&&"Image"===s.getMaterialType(t.material))return void vze(e,t,o);const l=a.createElement("Polygon"),u=s.get(t.extrudedHeight,0);u>0&&l.appendChild(Eze(a,"extrude",!0));const h=c?_ze(e,t,u):bze(e,t,u),d=h.length;for(let r=0;r<d;++r)l.appendChild(h[r]);const f=a.createElement("altitudeMode");f.appendChild(Tze(e,t.heightReference)),l.appendChild(f),n.push(l);const p=a.createElement("PolyStyle"),m=s.get(t.fill,!1);m&&p.appendChild(Eze(a,"fill",m)),wze(e,t.material,p);const _=s.get(t.outline,!1);if(_){p.appendChild(Eze(a,"outline",_));const e=a.createElement("LineStyle"),n=s.get(t.outlineWidth,1);e.appendChild(Eze(a,"width",n));const o=s.getColor(t.outlineColor,Dm.BLACK);e.appendChild(Eze(a,"color",o)),e.appendChild(Eze(a,"colorMode","normal")),i.push(e)}i.push(p)}function vze(e,t,n){const i=e.kmlDoc,o=e.valueGetter,a=e.externalFileHandler,c=i.createElement("GroundOverlay"),l=i.createElement("altitudeMode");l.appendChild(Tze(e,t.heightReference)),c.appendChild(l);const u=o.get(t.height);Object(r["a"])(u)&&c.appendChild(Eze(i,"altitude",u));const h=o.get(t.coordinates),d=i.createElement("LatLonBox");d.appendChild(Eze(i,"north",s["a"].toDegrees(h.north))),d.appendChild(Eze(i,"south",s["a"].toDegrees(h.south))),d.appendChild(Eze(i,"east",s["a"].toDegrees(h.east))),d.appendChild(Eze(i,"west",s["a"].toDegrees(h.west))),c.appendChild(d);const f=o.get(t.material),p=a.texture(f.image),m=i.createElement("Icon");m.appendChild(Eze(i,"href",p)),c.appendChild(m);const _=f.color;Object(r["a"])(_)&&c.appendChild(Eze(i,"color",xze(f.color))),n.push(c)}function Oze(e,t){const n=e.kmlDoc,i=e.valueGetter,o=e.externalFileHandler,a=n.createElement("Model"),s=i.get(t.scale);if(Object(r["a"])(s)){const e=n.createElement("scale");e.appendChild(Eze(n,"x",s)),e.appendChild(Eze(n,"y",s)),e.appendChild(Eze(n,"z",s)),a.appendChild(e)}const c=n.createElement("Link"),l=o.model(t,e.time);return c.appendChild(Eze(n,"href",l)),a.appendChild(c),a}function Aze(e,t,n,i,o){const a=e.kmlDoc,c=e.ellipsoid,l=e.valueGetter;if(!Object(r["a"])(n))return;const u=t.position;if(!u.isConstant)return void dze(e,t,n,i,o);const h=Oze(e,n),d=a.createElement("altitudeMode");d.appendChild(Tze(e,n.heightReference)),h.appendChild(d),l.get(u,void 0,cze),I.fromCartesian(cze,c,lze);const f=a.createElement("Location");f.appendChild(Eze(a,"longitude",s["a"].toDegrees(lze.longitude))),f.appendChild(Eze(a,"latitude",s["a"].toDegrees(lze.latitude))),f.appendChild(Eze(a,"altitude",lze.height)),h.appendChild(f),i.push(h)}function wze(e,t,n){const i=e.kmlDoc,o=e.valueGetter;if(!Object(r["a"])(t))return;const a=o.get(t);if(!Object(r["a"])(a))return;let s;const c=o.getMaterialType(t);let l,u;switch(c){case"Image":s=xze(Dm.WHITE);break;case"Color":case"Grid":case"PolylineGlow":case"PolylineArrow":case"PolylineDash":s=xze(a.color);break;case"PolylineOutline":s=xze(a.color),l=xze(a.outlineColor),u=a.outlineWidth,n.appendChild(Eze(i,"outerColor",l,$Fe)),n.appendChild(Eze(i,"outerWidth",u,$Fe));break;case"Stripe":s=xze(a.oddColor);break}Object(r["a"])(s)&&(n.appendChild(Eze(i,"color",s)),n.appendChild(Eze(i,"colorMode","normal")))}function Tze(e,t){const n=e.kmlDoc,i=e.valueGetter,o=i.get(t,QM.NONE);let r;switch(o){case QM.NONE:r=n.createTextNode("absolute");break;case QM.CLAMP_TO_GROUND:r=n.createTextNode("clampToGround");break;case QM.RELATIVE_TO_GROUND:r=n.createTextNode("relativeToGround");break}return r}function Cze(e,t){Array.isArray(e)||(e=[e]);const n=e.length,i=[];for(let o=0;o<n;++o)I.fromCartesian(e[o],t,lze),i.push(`${s["a"].toDegrees(lze.longitude)},${s["a"].toDegrees(lze.latitude)},${lze.height}`);return i.join(" ")}function Eze(e,t,n,i){n=Object(o["a"])(n,""),"boolean"===typeof n&&(n=n?"1":"0");const a=Object(r["a"])(i)?e.createElementNS(i,t):e.createElement(t),s="string"===n&&-1!==n.indexOf("<")?e.createCDATASection(n):e.createTextNode(n);return a.appendChild(s),a}function xze(e){let t="";const n=e.toBytes();for(let i=3;i>=0;--i)t+=n[i]<16?`0${n[i].toString(16)}`:n[i].toString(16);return t}var Sze=oze,Ize="attribute vec4 position;\nattribute vec2 textureCoordinates;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() \n{\n    gl_Position = position;\n    v_textureCoordinates = textureCoordinates;\n}\n";function Dze(e){this._context=e}let Pze;const jze=new lF({primitiveType:Eu.TRIANGLES}),Rze=new xX({color:new Dm(0,0,0,0)});function Lze(e,t){return new S8({context:e,colorTextures:[t],destroyAttachments:!1})}function Mze(e,t){return Nz.fromCache({context:e,vertexShaderSource:Ize,fragmentShaderSource:t,attributeLocations:{position:0,textureCoordinates:1}})}function Nze(e,t){return Object(r["a"])(Pze)&&Pze.viewport.width===e&&Pze.viewport.height===t||(Pze=UF.fromCache({viewport:new Au(0,0,e,t)})),Pze}Dze.prototype.execute=function(e){if(i["a"].defined("computeCommand",e),Object(r["a"])(e.preExecute)&&e.preExecute(e),!Object(r["a"])(e.fragmentShaderSource)&&!Object(r["a"])(e.shaderProgram))throw new a["a"]("computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.");i["a"].defined("computeCommand.outputTexture",e.outputTexture);const t=e.outputTexture,n=t.width,o=t.height,s=this._context,c=Object(r["a"])(e.vertexArray)?e.vertexArray:s.getViewportQuadVertexArray(),l=Object(r["a"])(e.shaderProgram)?e.shaderProgram:Mze(s,e.fragmentShaderSource),u=Lze(s,t),h=Nze(n,o),d=e.uniformMap,f=Rze;f.framebuffer=u,f.renderState=h,f.execute(s);const p=jze;p.vertexArray=c,p.renderState=h,p.shaderProgram=l,p.uniformMap=d,p.framebuffer=u,p.execute(s),u.destroy(),e.persists||(l.destroy(),Object(r["a"])(e.vertexArray)&&c.destroy()),Object(r["a"])(e.postExecute)&&e.postExecute(t)},Dze.prototype.isDestroyed=function(){return!1},Dze.prototype.destroy=function(){return Wc(this)};var Bze=Dze;function Fze(e){this.context=e,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0,this.viewport=void 0}var zze=Fze;function kze(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function Uze(e){const t=Object.keys(e).sort();return JSON.stringify(e,t)}function Vze(e,t){const n=t.derivedKeywords,i=n.length;for(let o=0;o<i;++o){const i=n[o]+t.keyword,r=e._shaders[i];Vze(e,r)}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(kze.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),kze.prototype.replaceShaderProgram=function(e){return Object(r["a"])(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},kze.prototype.getShaderProgram=function(e){let t=e.vertexShaderSource,n=e.fragmentShaderSource;const i=e.attributeLocations;"string"===typeof t&&(t=new EV({sources:[t]})),"string"===typeof n&&(n=new EV({sources:[n]}));const o=t.getCacheKey(),a=n.getCacheKey(),s=Object(r["a"])(i)?Uze(i):"",c=`${o}:${a}:${s}`;let l;if(Object(r["a"])(this._shaders[c]))l=this._shaders[c],delete this._shadersToRelease[c];else{const e=this._context,o=t.createCombinedVertexShader(e),r=n.createCombinedFragmentShader(e),a=new Nz({gl:e._gl,logShaderCompilation:e.logShaderCompilation,debugShaders:e.debugShaders,vertexShaderSource:t,vertexShaderText:o,fragmentShaderSource:n,fragmentShaderText:r,attributeLocations:i});l={cache:this,shaderProgram:a,keyword:c,derivedKeywords:[],count:0},a._cachedShader=l,this._shaders[c]=l,++this._numberOfShaders}return++l.count,l.shaderProgram},kze.prototype.replaceDerivedShaderProgram=function(e,t,n){const i=e._cachedShader,o=t+i.keyword,a=this._shaders[o];if(Object(r["a"])(a)){Vze(this,a);const e=i.derivedKeywords.indexOf(t);e>-1&&i.derivedKeywords.splice(e,1)}return this.createDerivedShaderProgram(e,t,n)},kze.prototype.getDerivedShaderProgram=function(e,t){const n=e._cachedShader,i=t+n.keyword,o=this._shaders[i];if(Object(r["a"])(o))return o.shaderProgram},kze.prototype.createDerivedShaderProgram=function(e,t,n){const i=e._cachedShader,o=t+i.keyword;let r=n.vertexShaderSource,a=n.fragmentShaderSource;const s=n.attributeLocations;"string"===typeof r&&(r=new EV({sources:[r]})),"string"===typeof a&&(a=new EV({sources:[a]}));const c=this._context,l=r.createCombinedVertexShader(c),u=a.createCombinedFragmentShader(c),h=new Nz({gl:c._gl,logShaderCompilation:c.logShaderCompilation,debugShaders:c.debugShaders,vertexShaderSource:r,vertexShaderText:l,fragmentShaderSource:a,fragmentShaderText:u,attributeLocations:s}),d={cache:this,shaderProgram:h,keyword:o,derivedKeywords:[],count:0};return i.derivedKeywords.push(t),h._cachedShader=d,this._shaders[o]=d,h},kze.prototype.destroyReleasedShaderPrograms=function(){const e=this._shadersToRelease;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];Vze(this,n),--this._numberOfShaders}this._shadersToRelease={}},kze.prototype.releaseShaderProgram=function(e){if(Object(r["a"])(e)){const t=e._cachedShader;t&&0===--t.count&&(this._shadersToRelease[t.keyword]=t)}},kze.prototype.isDestroyed=function(){return!1},kze.prototype.destroy=function(){const e=this._shaders;for(const t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return Wc(this)};var Hze=kze;function Gze(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(Gze.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),Gze.prototype.getTexture=function(e){const t=this._textures[e];if(Object(r["a"])(t))return delete this._texturesToRelease[e],++t.count,t.texture},Gze.prototype.addTexture=function(e,t){const n={texture:t,count:1};t.finalDestroy=t.destroy;const i=this;t.destroy=function(){0===--n.count&&(i._texturesToRelease[e]=n)},this._textures[e]=n,++this._numberOfTextures},Gze.prototype.destroyReleasedTextures=function(){const e=this._texturesToRelease;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];delete this._textures[t],n.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},Gze.prototype.isDestroyed=function(){return!1},Gze.prototype.destroy=function(){const e=this._textures;for(const t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return Wc(this)};var Wze=Gze;function qze(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.color=Dm.clone(Object(o["a"])(e.color,Dm.WHITE)),this.intensity=Object(o["a"])(e.intensity,2)}var Yze=qze;function Xze(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new Au,this._viewportCartesian4=new be,this._viewportDirty=!1,this._viewportOrthographicMatrix=Me.clone(Me.IDENTITY),this._viewportTransformation=Me.clone(Me.IDENTITY),this._model=Me.clone(Me.IDENTITY),this._view=Me.clone(Me.IDENTITY),this._inverseView=Me.clone(Me.IDENTITY),this._projection=Me.clone(Me.IDENTITY),this._infiniteProjection=Me.clone(Me.IDENTITY),this._entireFrustum=new Gt,this._currentFrustum=new Gt,this._frustumPlanes=new be,this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=ce.clone(Me.IDENTITY),this._view3DDirty=!0,this._view3D=new Me,this._inverseView3DDirty=!0,this._inverseView3D=new Me,this._inverseModelDirty=!0,this._inverseModel=new Me,this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new ce,this._viewRotation=new ce,this._inverseViewRotation=new ce,this._viewRotation3D=new ce,this._inverseViewRotation3D=new ce,this._inverseProjectionDirty=!0,this._inverseProjection=new Me,this._modelViewDirty=!0,this._modelView=new Me,this._modelView3DDirty=!0,this._modelView3D=new Me,this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new Me,this._inverseModelViewDirty=!0,this._inverseModelView=new Me,this._inverseModelView3DDirty=!0,this._inverseModelView3D=new Me,this._viewProjectionDirty=!0,this._viewProjection=new Me,this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new Me,this._modelViewProjectionDirty=!0,this._modelViewProjection=new Me,this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new Me,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new Me,this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new Me,this._normalDirty=!0,this._normal=new ce,this._normal3DDirty=!0,this._normal3D=new ce,this._inverseNormalDirty=!0,this._inverseNormal=new ce,this._inverseNormal3DDirty=!0,this._inverseNormal3D=new ce,this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new Bd,this._cameraPosition=new g,this._sunPositionWC=new g,this._sunPositionColumbusView=new g,this._sunDirectionWC=new g,this._sunDirectionEC=new g,this._moonDirectionEC=new g,this._lightDirectionWC=new g,this._lightDirectionEC=new g,this._lightColor=new g,this._lightColorHdr=new g,this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new g,this._cameraRight=new g,this._cameraUp=new g,this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new Gt,this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new Dm,this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new Gt,this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._splitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}function Kze(e,t){Me.clone(t,e._view),Me.getMatrix3(t,e._viewRotation),e._view3DDirty=!0,e._inverseView3DDirty=!0,e._modelViewDirty=!0,e._modelView3DDirty=!0,e._modelViewRelativeToEyeDirty=!0,e._inverseModelViewDirty=!0,e._inverseModelView3DDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0,e._modelViewInfiniteProjectionDirty=!0,e._normalDirty=!0,e._inverseNormalDirty=!0,e._normal3DDirty=!0,e._inverseNormal3DDirty=!0}function $ze(e,t){Me.clone(t,e._inverseView),Me.getMatrix3(t,e._inverseViewRotation)}function Jze(e,t){Me.clone(t,e._projection),e._inverseProjectionDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0}function Qze(e,t){Me.clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}function Zze(e,t){g.clone(t.positionWC,e._cameraPosition),g.clone(t.directionWC,e._cameraDirection),g.clone(t.rightWC,e._cameraRight),g.clone(t.upWC,e._cameraUp);const n=t.positionCartographic;Object(r["a"])(n)?e._eyeHeight=n.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}Object.defineProperties(Xze.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!Au.equals(e,this._viewport)){Au.clone(e,this._viewport);const t=this._viewport,n=this._viewportCartesian4;n.x=t.x,n.y=t.y,n.z=t.width,n.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return rke(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return rke(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){Me.clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,Me.inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){const e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,Me.getMatrix3(this.inverseModel,e),ce.transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return jke(this),this._view3D}},viewRotation:{get:function(){return jke(this),this._viewRotation}},viewRotation3D:{get:function(){return jke(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return Rke(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return Rke(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return ake(this),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return ske(this),this._modelView}},modelView3D:{get:function(){return cke(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return pke(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return lke(this),this._inverseModelView}},inverseModelView3D:{get:function(){return uke(this),this._inverseModelView3D}},viewProjection:{get:function(){return hke(this),this._viewProjection}},inverseViewProjection:{get:function(){return dke(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return fke(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return mke(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return _ke(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return gke(this),this._modelViewInfiniteProjection}},normal:{get:function(){return bke(this),this._normal}},normal3D:{get:function(){return yke(this),this._normal3D}},inverseNormal:{get:function(){return vke(this),this._inverseNormal}},inverseNormal3D:{get:function(){return Oke(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return wke(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return wke(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},splitPosition:{get:function(){return this._splitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return Object(o["a"])(this._ellipsoid,k.WGS84)}}});let eke=new ce;const tke=new I;function nke(e,t){Object(r["a"])(ka.computeIcrfToFixedMatrix(t.time,eke))||(eke=ka.computeTemeToPseudoFixedMatrix(t.time,eke));let n=Xj.computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);ce.multiplyByVector(eke,n,n),g.normalize(n,e._sunDirectionWC),n=ce.multiplyByVector(e.viewRotation3D,n,e._sunDirectionEC),g.normalize(n,n),n=Xj.computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),ce.multiplyByVector(eke,n,n),ce.multiplyByVector(e.viewRotation3D,n,n),g.normalize(n,n);const i=t.mapProjection,o=i.ellipsoid,a=o.cartesianToCartographic(e._sunPositionWC,tke);i.project(a,e._sunPositionColumbusView)}Xze.prototype.updateCamera=function(e){Kze(this,e.viewMatrix),$ze(this,e.inverseViewMatrix),Zze(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==SH.SCENE2D&&e.frustum instanceof IO},Xze.prototype.updateFrustum=function(e){Jze(this,e.projectionMatrix),Object(r["a"])(e.infiniteProjectionMatrix)&&Qze(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=s["a"].log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne,Object(r["a"])(e._offCenterFrustum)&&(e=e._offCenterFrustum),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},Xze.prototype.updatePass=function(e){this._pass=e};const ike=[],oke=new Yze;function rke(e){if(e._viewportDirty){const t=e._viewport;Me.computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),Me.computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}function ake(e){e._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===SH.SCENE2D||e._mode===SH.MORPHING||e._orthographicIn3D?Me.clone(Me.ZERO,e._inverseProjection):Me.inverse(e._projection,e._inverseProjection))}function ske(e){e._modelViewDirty&&(e._modelViewDirty=!1,Me.multiplyTransformation(e._view,e._model,e._modelView))}function cke(e){e._modelView3DDirty&&(e._modelView3DDirty=!1,Me.multiplyTransformation(e.view3D,e._model,e._modelView3D))}function lke(e){e._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,Me.inverse(e.modelView,e._inverseModelView))}function uke(e){e._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,Me.inverse(e.modelView3D,e._inverseModelView3D))}function hke(e){e._viewProjectionDirty&&(e._viewProjectionDirty=!1,Me.multiply(e._projection,e._view,e._viewProjection))}function dke(e){e._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,Me.inverse(e.viewProjection,e._inverseViewProjection))}function fke(e){e._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,Me.multiply(e._projection,e.modelView,e._modelViewProjection))}function pke(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;const t=e.modelView,n=e._modelViewRelativeToEye;n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=0,n[13]=0,n[14]=0,n[15]=t[15]}}function mke(e){e._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,Me.inverse(e.modelViewProjection,e._inverseModelViewProjection))}function _ke(e){e._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,Me.multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye))}function gke(e){e._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,Me.multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection))}function bke(e){if(e._normalDirty){e._normalDirty=!1;const t=e._normal;Me.getMatrix3(e.inverseModelView,t),ce.getRotation(t,t),ce.transpose(t,t)}}function yke(e){if(e._normal3DDirty){e._normal3DDirty=!1;const t=e._normal3D;Me.getMatrix3(e.inverseModelView3D,t),ce.getRotation(t,t),ce.transpose(t,t)}}function vke(e){e._inverseNormalDirty&&(e._inverseNormalDirty=!1,Me.getMatrix3(e.inverseModelView,e._inverseNormal),ce.getRotation(e._inverseNormal,e._inverseNormal))}function Oke(e){e._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,Me.getMatrix3(e.inverseModelView3D,e._inverseNormal3D),ce.getRotation(e._inverseNormal3D,e._inverseNormal3D))}Xze.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;const t=e.camera;this.updateCamera(t),e.mode===SH.SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),nke(this,e);const n=Object(o["a"])(e.light,oke);n instanceof Yze?(this._lightDirectionWC=g.clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=g.clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=g.normalize(g.negate(n.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=ce.multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));const i=n.color;let a=g.fromElements(i.red,i.green,i.blue,this._lightColorHdr);a=g.multiplyByScalar(a,n.intensity,a);const s=g.maximumComponent(a);s>1?g.divideByScalar(a,s,this._lightColor):g.clone(a,this._lightColor);const c=e.brdfLutGenerator,l=Object(r["a"])(c)?c.colorTexture:void 0;this._brdfLut=l,this._environmentMap=Object(o["a"])(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=Object(o["a"])(e.sphericalHarmonicCoefficients,ike),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,Object(r["a"])(this._specularEnvironmentMaps)&&Gt.clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=ka.computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._splitPosition=e.splitPosition*e.context.drawingBufferWidth;const u=t.frustum.fov,h=this._viewport;let d;d=Object(r["a"])(u)?h.height>h.width?2*Math.tan(.5*u)/h.height:2*Math.tan(.5*u)/h.width:1/Math.max(h.width,h.height),this._geometricToleranceOverMeter=d*e.maximumScreenSpaceError,Dm.clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};const Ake=new g;function wke(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,Me.multiplyByPoint(e.inverseModel,e._cameraPosition,Ake),Bd.fromCartesian(Ake,e._encodedCameraPositionMC))}const Tke=new g,Cke=new g,Eke=new g,xke=new g,Ske=new I,Ike=new g,Dke=new Me;function Pke(e,t,n,i,o,a,c,l){const u=Tke;u.x=e.y,u.y=e.z,u.z=e.x;const h=Cke;h.x=n.y,h.y=n.z,h.z=n.x;const d=Eke;d.x=i.y,d.y=i.z,d.z=i.x;const f=xke;f.x=t.y,f.y=t.z,f.z=t.x,a===SH.SCENE2D&&(u.z=.5*o);const p=c.unproject(u,Ske);p.longitude=s["a"].clamp(p.longitude,-Math.PI,Math.PI),p.latitude=s["a"].clamp(p.latitude,-s["a"].PI_OVER_TWO,s["a"].PI_OVER_TWO);const m=c.ellipsoid,_=m.cartographicToCartesian(p,Ike),b=ka.eastNorthUpToFixedFrame(_,m,Dke);return Me.multiplyByPointAsVector(b,h,h),Me.multiplyByPointAsVector(b,d,d),Me.multiplyByPointAsVector(b,f,f),Object(r["a"])(l)||(l=new Me),l[0]=h.x,l[1]=d.x,l[2]=-f.x,l[3]=0,l[4]=h.y,l[5]=d.y,l[6]=-f.y,l[7]=0,l[8]=h.z,l[9]=d.z,l[10]=-f.z,l[11]=0,l[12]=-g.dot(h,_),l[13]=-g.dot(d,_),l[14]=g.dot(f,_),l[15]=1,l}function jke(e){e._view3DDirty&&(e._mode===SH.SCENE3D?Me.clone(e._view,e._view3D):Pke(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),Me.getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function Rke(e){e._inverseView3DDirty&&(Me.inverseTransformation(e.view3D,e._inverseView3D),Me.getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}var Lke=Xze;function Mke(e,t){let n="WebGL Error:  ";switch(t){case e.INVALID_ENUM:n+="INVALID_ENUM";break;case e.INVALID_VALUE:n+="INVALID_VALUE";break;case e.INVALID_OPERATION:n+="INVALID_OPERATION";break;case e.OUT_OF_MEMORY:n+="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:n+="CONTEXT_LOST_WEBGL lost";break;default:n+=`Unknown (${t})`}return n}function Nke(e,t,n,i){let o=`${Mke(e,i)}: ${t.name}(`;for(let r=0;r<n.length;++r)0!==r&&(o+=", "),o+=n[r];return o+=");",o}function Bke(e,t,n){const i=e.getError();if(i!==e.NO_ERROR)throw new ye["a"](Nke(e,t,n,i))}function Fke(e,t,n){return{get:function(){const i=e[t];return n(e,`get: ${t}`,i),e[t]},set:function(i){e[t]=i,n(e,`set: ${t}`,i)}}}function zke(e,t){if(!Object(r["a"])(t))return e;function n(n){return function(){const i=n.apply(e,arguments);return t(e,n,arguments),i}}const i={};for(const o in e){const r=e[o];r instanceof Function?i[o]=n(r):Object.defineProperty(i,o,Fke(e,o,t))}return i}function kke(e,t){const n=t.length;for(let i=0;i<n;++i){const n=e.getExtension(t[i]);if(n)return n}}function Uke(e,t){if("undefined"===typeof WebGLRenderingContext)throw new ye["a"]("The browser does not support WebGL.  Visit http://get.webgl.org.");i["a"].defined("canvas",e),this._canvas=e,t=Object(RL["a"])(t,!0),t=Object(o["a"])(t,{}),t.allowTextureFilterAnisotropic=Object(o["a"])(t.allowTextureFilterAnisotropic,!0);const n=Object(o["a"])(t.webgl,{});n.alpha=Object(o["a"])(n.alpha,!1),n.stencil=Object(o["a"])(n.stencil,!0);const a=Object(o["a"])(t.requestWebgl2,!1)&&"undefined"!==typeof WebGL2RenderingContext;let s,c=!1;const l=t.getWebGLStub;if(Object(r["a"])(l))s=l(e,n);else if(a&&(s=e.getContext("webgl2",n)||e.getContext("experimental-webgl2",n)||void 0,Object(r["a"])(s)&&(c=!0)),Object(r["a"])(s)||(s=e.getContext("webgl",n)||e.getContext("experimental-webgl",n)||void 0),!Object(r["a"])(s))throw new ye["a"]("The browser supports WebGL, but initialization failed.");this._originalGLContext=s,this._gl=s,this._webgl2=c,this._id=ML(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new Hze(this),this._textureCache=new Wze;const u=s;this._stencilBits=u.getParameter(u.STENCIL_BITS),YN._maximumCombinedTextureImageUnits=u.getParameter(u.MAX_COMBINED_TEXTURE_IMAGE_UNITS),YN._maximumCubeMapSize=u.getParameter(u.MAX_CUBE_MAP_TEXTURE_SIZE),YN._maximumFragmentUniformVectors=u.getParameter(u.MAX_FRAGMENT_UNIFORM_VECTORS),YN._maximumTextureImageUnits=u.getParameter(u.MAX_TEXTURE_IMAGE_UNITS),YN._maximumRenderbufferSize=u.getParameter(u.MAX_RENDERBUFFER_SIZE),YN._maximumTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),YN._maximumVaryingVectors=u.getParameter(u.MAX_VARYING_VECTORS),YN._maximumVertexAttributes=u.getParameter(u.MAX_VERTEX_ATTRIBS),YN._maximumVertexTextureImageUnits=u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS),YN._maximumVertexUniformVectors=u.getParameter(u.MAX_VERTEX_UNIFORM_VECTORS),YN._maximumSamples=this._webgl2?u.getParameter(u.MAX_SAMPLES):0;const h=u.getParameter(u.ALIASED_LINE_WIDTH_RANGE);YN._minimumAliasedLineWidth=h[0],YN._maximumAliasedLineWidth=h[1];const d=u.getParameter(u.ALIASED_POINT_SIZE_RANGE);YN._minimumAliasedPointSize=d[0],YN._maximumAliasedPointSize=d[1];const f=u.getParameter(u.MAX_VIEWPORT_DIMS);YN._maximumViewportWidth=f[0],YN._maximumViewportHeight=f[1];const p=u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT);YN._highpFloatSupported=0!==p.precision;const m=u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_INT);YN._highpIntSupported=0!==m.rangeMax,this._antialias=u.getContextAttributes().antialias,this._standardDerivatives=!!kke(u,["OES_standard_derivatives"]),this._blendMinmax=!!kke(u,["EXT_blend_minmax"]),this._elementIndexUint=!!kke(u,["OES_element_index_uint"]),this._depthTexture=!!kke(u,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._fragDepth=!!kke(u,["EXT_frag_depth"]),this._debugShaders=kke(u,["WEBGL_debug_shaders"]),this._textureFloat=!!kke(u,["OES_texture_float"]),this._textureHalfFloat=!!kke(u,["OES_texture_half_float"]),this._textureFloatLinear=!!kke(u,["OES_texture_float_linear"]),this._textureHalfFloatLinear=!!kke(u,["OES_texture_half_float_linear"]),this._colorBufferFloat=!!kke(u,["EXT_color_buffer_float","WEBGL_color_buffer_float"]),this._floatBlend=!!kke(u,["EXT_float_blend"]),this._colorBufferHalfFloat=!!kke(u,["EXT_color_buffer_half_float"]),this._s3tc=!!kke(u,["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"]),this._pvrtc=!!kke(u,["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"]),this._astc=!!kke(u,["WEBGL_compressed_texture_astc"]),this._etc=!!kke(u,["WEBG_compressed_texture_etc"]),this._etc1=!!kke(u,["WEBGL_compressed_texture_etc1"]),this._bc7=!!kke(u,["EXT_texture_compression_bptc"]),sM.setKTX2SupportedFormats(this._s3tc,this._pvrtc,this._astc,this._etc,this._etc1,this._bc7);const _=t.allowTextureFilterAnisotropic?kke(u,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;let g,b,y,v,O,A,w,T,C,E;if(this._textureFilterAnisotropic=_,YN._maximumTextureFilterAnisotropy=Object(r["a"])(_)?u.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,c){const e=this;g=function(){return e._gl.createVertexArray()},b=function(t){e._gl.bindVertexArray(t)},y=function(t){e._gl.deleteVertexArray(t)},v=function(e,t,n,i,o){u.drawElementsInstanced(e,t,n,i,o)},O=function(e,t,n,i){u.drawArraysInstanced(e,t,n,i)},A=function(e,t){u.vertexAttribDivisor(e,t)},w=function(e){u.drawBuffers(e)}}else T=kke(u,["OES_vertex_array_object"]),Object(r["a"])(T)&&(g=function(){return T.createVertexArrayOES()},b=function(e){T.bindVertexArrayOES(e)},y=function(e){T.deleteVertexArrayOES(e)}),C=kke(u,["ANGLE_instanced_arrays"]),Object(r["a"])(C)&&(v=function(e,t,n,i,o){C.drawElementsInstancedANGLE(e,t,n,i,o)},O=function(e,t,n,i){C.drawArraysInstancedANGLE(e,t,n,i)},A=function(e,t){C.vertexAttribDivisorANGLE(e,t)}),E=kke(u,["WEBGL_draw_buffers"]),Object(r["a"])(E)&&(w=function(e){E.drawBuffersWEBGL(e)});this.glCreateVertexArray=g,this.glBindVertexArray=b,this.glDeleteVertexArray=y,this.glDrawElementsInstanced=v,this.glDrawArraysInstanced=O,this.glVertexAttribDivisor=A,this.glDrawBuffers=w,this._vertexArrayObject=!!T,this._instancedArrays=!!C,this._drawBuffers=!!E,YN._maximumDrawBuffers=this.drawBuffers?u.getParameter(Ys.MAX_DRAW_BUFFERS):1,YN._maximumColorAttachments=this.drawBuffers?u.getParameter(Ys.MAX_COLOR_ATTACHMENTS):1,this._clearColor=new Dm(0,0,0,0),this._clearDepth=1,this._clearStencil=0;const x=new Lke,S=new zze(this),I=UF.fromCache();this._defaultPassState=S,this._defaultRenderState=I,this._defaultTexture=void 0,this._defaultEmissiveTexture=void 0,this._defaultNormalTexture=void 0,this._defaultCubeMap=void 0,this._us=x,this._currentRenderState=I,this._currentPassState=S,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._vertexAttribDivisors=[],this._previousDrawInstanced=!1;for(let i=0;i<YN._maximumVertexAttributes;i++)this._vertexAttribDivisors.push(0);this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options=t,this.cache={},UF.apply(u,I,S)}const Vke={};function Hke(e){if(e.validateFramebuffer){const t=e._gl,n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE){let e;switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case t.FRAMEBUFFER_UNSUPPORTED:e="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions.";break}throw new a["a"](e)}}}function Gke(e,t,n,i){const o=e._currentRenderState,r=e._currentPassState;e._currentRenderState=t,e._currentPassState=n,UF.partialApply(e._gl,o,t,r,n,i)}let Wke;function qke(e,t){if(t!==e._currentFramebuffer){e._currentFramebuffer=t;let n=Wke;if(Object(r["a"])(t))t._bind(),Hke(e),n=t._getActiveColorAttachments();else{const t=e._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}e.drawBuffers&&e.glDrawBuffers(n)}}Object.defineProperties(Uke.prototype,{id:{get:function(){return this._id}},webgl2:{get:function(){return this._webgl2}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},textureCache:{get:function(){return this._textureCache}},uniformState:{get:function(){return this._us}},stencilBits:{get:function(){return this._stencilBits}},stencilBuffer:{get:function(){return this._stencilBits>=8}},antialias:{get:function(){return this._antialias}},msaa:{get:function(){return this._webgl2}},standardDerivatives:{get:function(){return this._standardDerivatives||this._webgl2}},floatBlend:{get:function(){return this._floatBlend}},blendMinmax:{get:function(){return this._blendMinmax||this._webgl2}},elementIndexUint:{get:function(){return this._elementIndexUint||this._webgl2}},depthTexture:{get:function(){return this._depthTexture||this._webgl2}},floatingPointTexture:{get:function(){return this._webgl2||this._textureFloat}},halfFloatingPointTexture:{get:function(){return this._webgl2||this._textureHalfFloat}},textureFloatLinear:{get:function(){return this._textureFloatLinear}},textureHalfFloatLinear:{get:function(){return this._webgl2&&this._textureFloatLinear||!this._webgl2&&this._textureHalfFloatLinear}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},s3tc:{get:function(){return this._s3tc}},pvrtc:{get:function(){return this._pvrtc}},astc:{get:function(){return this._astc}},etc:{get:function(){return this._etc}},etc1:{get:function(){return this._etc1}},bc7:{get:function(){return this._bc7}},supportsBasis:{get:function(){return this._s3tc||this._pvrtc||this._astc||this._etc||this._etc1||this._bc7}},vertexArrayObject:{get:function(){return this._vertexArrayObject||this._webgl2}},fragmentDepth:{get:function(){return this._fragDepth||this._webgl2}},instancedArrays:{get:function(){return this._instancedArrays||this._webgl2}},colorBufferFloat:{get:function(){return this._colorBufferFloat}},colorBufferHalfFloat:{get:function(){return this._webgl2&&this._colorBufferFloat||!this._webgl2&&this._colorBufferHalfFloat}},drawBuffers:{get:function(){return this._drawBuffers||this._webgl2}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(e){this._throwOnWebGLError=e,this._gl=zke(this._originalGLContext,e?Bke:void 0)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=new lB({context:this,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1})),this._defaultTexture}},defaultEmissiveTexture:{get:function(){return void 0===this._defaultEmissiveTexture&&(this._defaultEmissiveTexture=new lB({context:this,pixelFormat:fx.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0])},flipY:!1})),this._defaultEmissiveTexture}},defaultNormalTexture:{get:function(){return void 0===this._defaultNormalTexture&&(this._defaultNormalTexture=new lB({context:this,pixelFormat:fx.RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([128,128,255])},flipY:!1})),this._defaultNormalTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){const e={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=new sB({context:this,source:{positiveX:e,negativeX:e,positiveY:e,negativeY:e,positiveZ:e,negativeZ:e},flipY:!1})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return Vke}}}),"undefined"!==typeof WebGLRenderingContext&&(Wke=[Ys.BACK]);const Yke=new xX;function Xke(e,t,n,i,o){if(Object(r["a"])(t)&&o.depthTest&&o.depthTest.enabled&&!t.hasDepthAttachment)throw new a["a"]("The depth test can not be enabled (drawCommand.renderState.depthTest.enabled) because the framebuffer (drawCommand.framebuffer) does not have a depth or depth-stencil renderbuffer.");qke(e,t),Gke(e,o,n,!1),i._bind(),e._maxFrameTextureUnitIndex=Math.max(e._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex)}function Kke(e,t,n,s){const c=t._primitiveType,l=t._vertexArray;let u=t._offset,h=t._count;const d=t.instanceCount;if(!Eu.validate(c))throw new a["a"]("drawCommand.primitiveType is required and must be valid.");if(i["a"].defined("drawCommand.vertexArray",l),i["a"].typeOf.number.greaterThanOrEquals("drawCommand.offset",u,0),Object(r["a"])(h)&&i["a"].typeOf.number.greaterThanOrEquals("drawCommand.count",h,0),i["a"].typeOf.number.greaterThanOrEquals("drawCommand.instanceCount",d,0),d>0&&!e.instancedArrays)throw new a["a"]("Instanced arrays extension is not supported");e._us.model=Object(o["a"])(t._modelMatrix,Me.IDENTITY),n._setUniforms(s,e._us,e.validateShaderProgram),l._bind();const f=l.indexBuffer;Object(r["a"])(f)?(u*=f.bytesPerIndex,h=Object(o["a"])(h,f.numberOfIndices),0===d?e._gl.drawElements(c,h,f.indexDatatype,u):e.glDrawElementsInstanced(c,h,f.indexDatatype,u,d)):(h=Object(o["a"])(h,l.numberOfVertices),0===d?e._gl.drawArrays(c,u,h):e.glDrawArraysInstanced(c,u,h,d)),l._unBind()}Uke.prototype.clear=function(e,t){e=Object(o["a"])(e,Yke),t=Object(o["a"])(t,this._defaultPassState);const n=this._gl;let i=0;const a=e.color,s=e.depth,c=e.stencil;Object(r["a"])(a)&&(Dm.equals(this._clearColor,a)||(Dm.clone(a,this._clearColor),n.clearColor(a.red,a.green,a.blue,a.alpha)),i|=n.COLOR_BUFFER_BIT),Object(r["a"])(s)&&(s!==this._clearDepth&&(this._clearDepth=s,n.clearDepth(s)),i|=n.DEPTH_BUFFER_BIT),Object(r["a"])(c)&&(c!==this._clearStencil&&(this._clearStencil=c,n.clearStencil(c)),i|=n.STENCIL_BUFFER_BIT);const l=Object(o["a"])(e.renderState,this._defaultRenderState);Gke(this,l,t,!0);const u=Object(o["a"])(e.framebuffer,t.framebuffer);qke(this,u),n.clear(i)},Uke.prototype.draw=function(e,t,n,r){i["a"].defined("drawCommand",e),i["a"].defined("drawCommand.shaderProgram",e._shaderProgram),t=Object(o["a"])(t,this._defaultPassState);const a=Object(o["a"])(e._framebuffer,t.framebuffer),s=Object(o["a"])(e._renderState,this._defaultRenderState);n=Object(o["a"])(n,e._shaderProgram),r=Object(o["a"])(r,e._uniformMap),Xke(this,a,t,n,s),Kke(this,e,n,r)},Uke.prototype.endFrame=function(){const e=this._gl;e.useProgram(null),this._currentFramebuffer=void 0,e.bindFramebuffer(e.FRAMEBUFFER,null);const t=Wke;this.drawBuffers&&this.glDrawBuffers(t);const n=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(let i=0;i<n;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},Uke.prototype.readPixels=function(e){const t=this._gl;e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const n=Math.max(Object(o["a"])(e.x,0),0),a=Math.max(Object(o["a"])(e.y,0),0),s=Object(o["a"])(e.width,t.drawingBufferWidth),c=Object(o["a"])(e.height,t.drawingBufferHeight),l=e.framebuffer;i["a"].typeOf.number.greaterThan("readState.width",s,0),i["a"].typeOf.number.greaterThan("readState.height",c,0);let u=hx.UNSIGNED_BYTE;Object(r["a"])(l)&&l.numberOfColorAttachments>0&&(u=l.getColorTexture(0).pixelDatatype);const h=fx.createTypedArray(fx.RGBA,u,s,c);return qke(this,l),t.readPixels(n,a,s,c,fx.RGBA,hx.toWebGLConstant(u,this),h),h};const $ke={position:0,textureCoordinates:1};function Jke(e,t,n){this._pickObjects=e,this.key=t,this.color=n}Uke.prototype.getViewportQuadVertexArray=function(){let e=this.cache.viewportQuad_vertexArray;if(!Object(r["a"])(e)){const t=new Fu({attributes:{position:new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:Eu.TRIANGLES});e=WV.fromGeometry({context:this,geometry:t,attributeLocations:$ke,bufferUsage:LV.STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=e}return e},Uke.prototype.createViewportQuadCommand=function(e,t){return t=Object(o["a"])(t,o["a"].EMPTY_OBJECT),new lF({vertexArray:this.getViewportQuadVertexArray(),primitiveType:Eu.TRIANGLES,renderState:t.renderState,shaderProgram:Nz.fromCache({context:this,vertexShaderSource:Ize,fragmentShaderSource:e,attributeLocations:$ke}),uniformMap:t.uniformMap,owner:t.owner,framebuffer:t.framebuffer,pass:t.pass})},Uke.prototype.getObjectByPickColor=function(e){return i["a"].defined("pickColor",e),this._pickObjects[e.toRgba()]},Object.defineProperties(Jke.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(e){this._pickObjects[this.key]=e}}}),Jke.prototype.destroy=function(){delete this._pickObjects[this.key]},Uke.prototype.createPickId=function(e){i["a"].defined("object",e),++this._nextPickColor[0];const t=this._nextPickColor[0];if(0===t)throw new ye["a"]("Out of unique Pick IDs.");return this._pickObjects[t]=e,new Jke(this._pickObjects,t,Dm.fromRgba(t))},Uke.prototype.isDestroyed=function(){return!1},Uke.prototype.destroy=function(){const e=this.cache;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];Object(r["a"])(n.destroy)&&n.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._textureCache=this._textureCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultEmissiveTexture=this._defaultEmissiveTexture&&this._defaultEmissiveTexture.destroy(),this._defaultNormalTexture=this._defaultNormalTexture&&this._defaultNormalTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),Wc(this)};var Qke=Uke;function Zke(e,t,n){if(i["a"].defined("context",e),!Object(r["a"])(t)||!Object(r["a"])(t.positiveX)||!Object(r["a"])(t.negativeX)||!Object(r["a"])(t.positiveY)||!Object(r["a"])(t.negativeY)||!Object(r["a"])(t.positiveZ)||!Object(r["a"])(t.negativeZ))throw new a["a"]("urls is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const o={flipY:!0,skipColorSpaceConversion:n,preferImageBitmap:!0},s=[Et["a"].createIfNeeded(t.positiveX).fetchImage(o),Et["a"].createIfNeeded(t.negativeX).fetchImage(o),Et["a"].createIfNeeded(t.positiveY).fetchImage(o),Et["a"].createIfNeeded(t.negativeY).fetchImage(o),Et["a"].createIfNeeded(t.positiveZ).fetchImage(o),Et["a"].createIfNeeded(t.negativeZ).fetchImage(o)];return Promise.all(s).then((function(t){return new sB({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})}))}var eUe=Zke;function tUe(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.missingImageUrl))throw new a["a"]("options.missingImageUrl is required.");if(!Object(r["a"])(e.pixelsToCheck))throw new a["a"]("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=Et["a"].createIfNeeded(e.missingImageUrl),n=this;function i(t){Object(r["a"])(t.blob)&&(n._missingImageByteLength=t.blob.size);let i=Object(LR["a"])(t);if(e.disableCheckIfAllPixelsAreTransparent){let n=!0;const o=t.width,r=e.pixelsToCheck;for(let e=0,t=r.length;n&&e<t;++e){const t=r[e],a=4*t.x+t.y*o,s=i[a+3];s>0&&(n=!1)}n&&(i=void 0)}n._missingImagePixels=i,n._isReady=!0}function s(){n._missingImagePixels=void 0,n._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(i).catch(s)}tUe.prototype.isReady=function(){return this._isReady},tUe.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new a["a"]("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,n=this._missingImagePixels;if(!Object(r["a"])(n))return!1;if(Object(r["a"])(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const i=Object(LR["a"])(e),o=e.width;for(let r=0,a=t.length;r<a;++r){const e=t[r],a=4*e.x+e.y*o;for(let t=0;t<4;++t){const e=a+t;if(i[e]!==n[e])return!1}}return!0};var nUe=tUe;function iUe(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}iUe.prototype.configureNameFromProperties=function(e){let t,n=10;for(const i in e)if(e.hasOwnProperty(i)&&e[i]){const e=i.toLowerCase();n>1&&"name"===e?(n=1,t=i):n>2&&"title"===e?(n=2,t=i):n>3&&/name/i.test(i)?(n=3,t=i):n>4&&/title/i.test(i)&&(n=4,t=i)}Object(r["a"])(t)&&(this.name=e[t])},iUe.prototype.configureDescriptionFromProperties=function(e){function t(e){let n='<table class="cesium-infoBox-defaultTable">';for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];Object(r["a"])(o)&&(n+="object"===typeof o?`<tr><td>${i}</td><td>${t(o)}</td></tr>`:`<tr><td>${i}</td><td>${o}</td></tr>`)}return n+="</table>",n}this.description=t(e)};var oUe=iUe;function rUe(){this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,a["a"].throwInstantiationError()}Object.defineProperties(rUe.prototype,{ready:{get:a["a"].throwInstantiationError},readyPromise:{get:a["a"].throwInstantiationError},rectangle:{get:a["a"].throwInstantiationError},tileWidth:{get:a["a"].throwInstantiationError},tileHeight:{get:a["a"].throwInstantiationError},maximumLevel:{get:a["a"].throwInstantiationError},minimumLevel:{get:a["a"].throwInstantiationError},tilingScheme:{get:a["a"].throwInstantiationError},tileDiscardPolicy:{get:a["a"].throwInstantiationError},errorEvent:{get:a["a"].throwInstantiationError},credit:{get:a["a"].throwInstantiationError},proxy:{get:a["a"].throwInstantiationError},hasAlphaChannel:{get:a["a"].throwInstantiationError}}),rUe.prototype.getTileCredits=function(e,t,n){a["a"].throwInstantiationError()},rUe.prototype.requestImage=function(e,t,n,i){a["a"].throwInstantiationError()},rUe.prototype.pickFeatures=function(e,t,n,i,o){a["a"].throwInstantiationError()};const aUe=/\.ktx2$/i;rUe.loadImage=function(e,t){i["a"].defined("url",t);const n=Et["a"].createIfNeeded(t);return aUe.test(n.url)?sM(n):Object(r["a"])(e)&&Object(r["a"])(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};var sUe=rUe;function cUe(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=Et["a"].createIfNeeded(e.url);t.appendForwardSlash(),Object(r["a"])(e.token)&&t.setQueryParameters({token:e.token}),this._resource=t,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=Object(o["a"])(e.tileWidth,256),this._tileHeight=Object(o["a"])(e.tileHeight,256),this._maximumLevel=e.maximumLevel,this._tilingScheme=Object(o["a"])(e.tilingScheme,new qt({ellipsoid:e.ellipsoid})),this._useTiles=Object(o["a"])(e.usePreCachedTilesIfAvailable,!0),this._rectangle=Object(o["a"])(e.rectangle,this._tilingScheme.rectangle),this._layers=e.layers;let n=e.credit;"string"===typeof n&&(n=new hn(n)),this._credit=n,this.enablePickFeatures=Object(o["a"])(e.enablePickFeatures,!0),this._errorEvent=new dn["a"],this._ready=!1;const i=this;let s;function c(t){const n=t.tileInfo;if(Object(r["a"])(n)){if(i._tileWidth=n.rows,i._tileHeight=n.cols,102100===n.spatialReference.wkid||102113===n.spatialReference.wkid)i._tilingScheme=new tu({ellipsoid:e.ellipsoid});else{if(4326!==t.tileInfo.spatialReference.wkid){const e=`Tile spatial reference WKID ${t.tileInfo.spatialReference.wkid} is not supported.`;return s=Zl.reportError(s,i,i._errorEvent,e,void 0,void 0,void 0),s.retry?u():Promise.reject(new ye["a"](e))}i._tilingScheme=new qt({ellipsoid:e.ellipsoid})}if(i._maximumLevel=t.tileInfo.lods.length-1,Object(r["a"])(t.fullExtent)){if(Object(r["a"])(t.fullExtent.spatialReference)&&Object(r["a"])(t.fullExtent.spatialReference.wkid))if(102100===t.fullExtent.spatialReference.wkid||102113===t.fullExtent.spatialReference.wkid){const e=new Rc,n=t.fullExtent,o=e.unproject(new g(Math.max(n.xmin,-i._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(n.ymin,-i._tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),r=e.unproject(new g(Math.min(n.xmax,i._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(n.ymax,i._tilingScheme.ellipsoid.maximumRadius*Math.PI),0));i._rectangle=new Fe(o.longitude,o.latitude,r.longitude,r.latitude)}else{if(4326!==t.fullExtent.spatialReference.wkid){const e=`fullExtent.spatialReference WKID ${t.fullExtent.spatialReference.wkid} is not supported.`;return s=Zl.reportError(s,i,i._errorEvent,e,void 0,void 0,void 0),s.retry?u():Promise.reject(new ye["a"](e))}i._rectangle=Fe.fromDegrees(t.fullExtent.xmin,t.fullExtent.ymin,t.fullExtent.xmax,t.fullExtent.ymax)}}else i._rectangle=i._tilingScheme.rectangle;Object(r["a"])(i._tileDiscardPolicy)||(i._tileDiscardPolicy=new nUe({missingImageUrl:lUe(i,0,0,i._maximumLevel).url,pixelsToCheck:[new Gt(0,0),new Gt(200,20),new Gt(20,200),new Gt(80,110),new Gt(160,130)],disableCheckIfAllPixelsAreTransparent:!0})),i._useTiles=!0}else i._useTiles=!1;return Object(r["a"])(t.copyrightText)&&t.copyrightText.length>0&&(i._credit=new hn(t.copyrightText)),i._ready=!0,Zl.reportSuccess(s),Promise.resolve(!0)}function l(e){const t=`An error occurred while accessing ${i._resource.url}.`;return s=Zl.reportError(s,i,i._errorEvent,t,void 0,void 0,void 0),Promise.reject(new ye["a"](t))}function u(){const e=i._resource.getDerivedResource({queryParameters:{f:"json"}});return e.fetchJsonp().then(c).catch(l)}this._useTiles?this._readyPromise=u():(this._ready=!0,this._readyPromise=Promise.resolve(!0))}function lUe(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{const a=e._tilingScheme.tileXYToNativeRectangle(t,n,i),s=`${a.west},${a.south},${a.east},${a.north}`,c={bbox:s,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof V?(c.bboxSR=4326,c.imageSR=4326):(c.bboxSR=3857,c.imageSR=3857),e.layers&&(c.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:"export",request:o,queryParameters:c})}return r}Object.defineProperties(cUe.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new a["a"]("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),cUe.prototype.getTileCredits=function(e,t,n){},cUe.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");return sUe.loadImage(this,lUe(this,e,t,n,i))},cUe.prototype.pickFeatures=function(e,t,n,i,o){if(!this._ready)throw new a["a"]("pickFeatures must not be called before the imagery provider is ready.");if(!this.enablePickFeatures)return;const c=this._tilingScheme.tileXYToNativeRectangle(e,t,n);let l,u,h;if(this._tilingScheme.projection instanceof V)l=s["a"].toDegrees(i),u=s["a"].toDegrees(o),h="4326";else{const e=this._tilingScheme.projection.project(new I(i,o,0));l=e.x,u=e.y,h="3857"}let d="visible";Object(r["a"])(this._layers)&&(d+=`:${this._layers}`);const f={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${l},${u}`,mapExtent:`${c.west},${c.south},${c.east},${c.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:h,layers:d},p=this._resource.getDerivedResource({url:"identify",queryParameters:f});return p.fetchJson().then((function(e){const t=[],n=e.results;if(!Object(r["a"])(n))return t;for(let i=0;i<n.length;++i){const e=n[i],o=new oUe;if(o.data=e,o.name=e.value,o.properties=e.attributes,o.configureDescriptionFromProperties(e.attributes),"esriGeometryPoint"===e.geometryType&&e.geometry){const t=e.geometry.spatialReference&&e.geometry.spatialReference.wkid?e.geometry.spatialReference.wkid:4326;if(4326===t||4283===t)o.position=I.fromDegrees(e.geometry.x,e.geometry.y,e.geometry.z);else if(102100===t||900913===t||3857===t){const t=new Rc;o.position=t.unproject(new g(e.geometry.x,e.geometry.y,e.geometry.z))}}t.push(o)}return t}))};var uUe=cUe;function hUe(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new N8,this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new Gt,this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function dUe(e){const t=e._framebuffers;if(!Object(r["a"])(t))return;const n=t.length;for(let i=0;i<n;++i)t[i].destroy();e._framebuffers=void 0,e._previousLuminance.destroy(),e._previousLuminance=void 0}function fUe(e,t){dUe(e);let n=e._width,i=e._height;const o=t.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT,r=Math.ceil(Math.log(Math.max(n,i))/Math.log(3)),a=new Array(r);for(let c=0;c<r;++c)n=Math.max(Math.ceil(n/3),1),i=Math.max(Math.ceil(i/3),1),a[c]=new N8,a[c].update(t,n,i,1,o);const s=a[r-1].getColorTexture(0);e._previousLuminance.update(t,s.width,s.height,1,o),e._framebuffers=a}function pUe(e){const t=e._commands;if(!Object(r["a"])(t))return;const n=t.length;for(let i=0;i<n;++i)t[i].shaderProgram.destroy();e._commands=void 0}function mUe(e,t){let n;if(0===t)n={colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions}};else{const i=e._framebuffers[t-1].getColorTexture(0);n={colorTexture:function(){return i},colorTextureDimensions:function(){return i.dimensions}}}return n.minMaxLuminance=function(){return e._minMaxLuminance},n.previousLuminance=function(){return e._previousLuminance.getColorTexture(0)},n}function _Ue(e,t){let n="uniform sampler2D colorTexture; \nvarying vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return n+=0===e?"    vec4 color = texture2D(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture2D(colorTexture, v_textureCoordinates + offset).r; \n",n+="}\n\n",n+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",e===t-1&&(n+="    float previous = texture2D(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),n+="    gl_FragColor = vec4(color); \n} \n",n}function gUe(e,t){pUe(e);const n=e._framebuffers,i=n.length,o=new Array(i);for(let r=0;r<i;++r)o[r]=t.createViewportQuadCommand(_Ue(r,i),{framebuffer:n[r].framebuffer,uniformMap:mUe(e,r)});e._commands=o}Object.defineProperties(hUe.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const e=this._framebuffers;if(Object(r["a"])(e))return e[e.length-1].getColorTexture(0)}}}),hUe.prototype.clear=function(e){const t=this._framebuffers;if(!Object(r["a"])(t))return;let n=this._clearCommand;Object(r["a"])(n)||(n=this._clearCommand=new xX({color:new Dm(0,0,0,0),framebuffer:void 0}));const i=t.length;for(let o=0;o<i;++o)t[o].clear(e,n)},hUe.prototype.update=function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;t===this._width&&n===this._height||(this._width=t,this._height=n,fUe(this,e),gUe(this,e),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const i=this._framebuffers,o=i[i.length-1];i[i.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=o},hUe.prototype.execute=function(e,t){this._colorTexture=t;const n=this._commands;if(!Object(r["a"])(n))return;const i=n.length;for(let o=0;o<i;++o)n[o].execute(e)},hUe.prototype.isDestroyed=function(){return!1},hUe.prototype.destroy=function(){return dUe(this),pUe(this),Wc(this)};var bUe=hUe;const yUe={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"};var vUe=Object.freeze(yUe);function OUe(e){}let AUe;OUe.prototype.isReady=function(){return!0},OUe.prototype.shouldDiscardImage=function(e){return OUe.EMPTY_IMAGE===e},Object.defineProperties(OUe,{EMPTY_IMAGE:{get:function(){return Object(r["a"])(AUe)||(AUe=new Image,AUe.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),AUe}}});var wUe=OUe;function TUe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.key;if(!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");if(!Object(r["a"])(t))throw new a["a"]("options.key is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._key=t,this._resource=Et["a"].createIfNeeded(e.url),this._resource.appendForwardSlash(),this._tileProtocol=e.tileProtocol,this._mapStyle=Object(o["a"])(e.mapStyle,vUe.AERIAL),this._culture=Object(o["a"])(e.culture,""),this._tileDiscardPolicy=e.tileDiscardPolicy,Object(r["a"])(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new wUe),this._proxy=e.proxy,this._credit=new hn(`<a href="http://www.bing.com"><img src="${TUe.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new tu({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._errorEvent=new dn["a"],this._ready=!1;let n=this._tileProtocol;if(Object(r["a"])(n))n.length>0&&":"===n[n.length-1]&&(n=n.substr(0,n.length-1));else{const e=document.location.protocol;n="http:"===e?"http":"https"}const i=this._resource.getDerivedResource({url:`REST/v1/Imagery/Metadata/${this._mapStyle}`,queryParameters:{incl:"ImageryProviders",key:this._key,uriScheme:n}}),c=this;let l;function u(e){if(1!==e.resourceSets.length)return h();const t=e.resourceSets[0].resources[0];c._tileWidth=t.imageWidth,c._tileHeight=t.imageHeight,c._maximumLevel=t.zoomMax-1,c._imageUrlSubdomains=t.imageUrlSubdomains,c._imageUrlTemplate=t.imageUrl;let n=c._attributionList=t.imageryProviders;n||(n=c._attributionList=[]);for(let i=0,o=n.length;i<o;++i){const e=n[i];if(e.credit instanceof hn)break;e.credit=new hn(e.attribution);const t=e.coverageAreas;for(let n=0,i=e.coverageAreas.length;n<i;++n){const e=t[n],i=e.bbox;e.bbox=new Fe(s["a"].toRadians(i[1]),s["a"].toRadians(i[0]),s["a"].toRadians(i[3]),s["a"].toRadians(i[2]))}}return c._ready=!0,Zl.reportSuccess(l),Promise.resolve(!0)}function h(e){const t=`An error occurred while accessing ${i.url}.`;return l=Zl.reportError(l,c,c._errorEvent,t,void 0,void 0,void 0),l.retry?f():Promise.reject(new ye["a"](t))}const d=i.url;function f(){const e=i.fetchJsonp("jsonp");return TUe._metadataCache[d]=e,e.then(u).catch(h)}const p=TUe._metadataCache[d];Object(r["a"])(p)?this._readyPromise=p.then(u).catch(h):this._readyPromise=f()}Object.defineProperties(TUe.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new a["a"]("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}});const CUe=new Fe;function EUe(e,t,n,i,o){const r=e._imageUrlTemplate,a=e._imageUrlSubdomains,s=(t+n+i)%a.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:TUe.tileXYToQuadKey(t,n,i),subdomain:a[s],culture:e._culture},queryParameters:{n:"z"}})}TUe.prototype.getTileCredits=function(e,t,n){if(!this._ready)throw new a["a"]("getTileCredits must not be called before the imagery provider is ready.");const i=this._tilingScheme.tileXYToRectangle(e,t,n,CUe),o=SUe(this._attributionList,n,i);return o},TUe.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");const o=sUe.loadImage(this,EUe(this,e,t,n,i));if(Object(r["a"])(o))return o.catch((function(e){return Object(r["a"])(e.blob)&&0===e.blob.size?wUe.EMPTY_IMAGE:Promise.reject(e)}))},TUe.prototype.pickFeatures=function(e,t,n,i,o){},TUe.tileXYToQuadKey=function(e,t,n){let i="";for(let o=n;o>=0;--o){const n=1<<o;let r=0;0!==(e&n)&&(r|=1),0!==(t&n)&&(r|=2),i+=r}return i},TUe.quadKeyToTileXY=function(e){let t=0,n=0;const i=e.length-1;for(let o=i;o>=0;--o){const r=1<<o,a=+e[i-o];0!==(1&a)&&(t|=r),0!==(2&a)&&(n|=r)}return{x:t,y:n,level:i}},TUe._logoUrl=void 0,Object.defineProperties(TUe,{logoUrl:{get:function(){return Object(r["a"])(TUe._logoUrl)||(TUe._logoUrl=Bt("Assets/Images/bing_maps_credit.png")),TUe._logoUrl},set:function(e){i["a"].defined("value",e),TUe._logoUrl=e}}});const xUe=new Fe;function SUe(e,t,n){++t;const i=[];for(let o=0,a=e.length;o<a;++o){const a=e[o],s=a.coverageAreas;let c=!1;for(let e=0,i=a.coverageAreas.length;!c&&e<i;++e){const i=s[e];if(t>=i.zoomMin&&t<=i.zoomMax){const e=Fe.intersection(n,i.bbox,xUe);Object(r["a"])(e)&&(c=!0)}}c&&i.push(a.credit)}return i}TUe._metadataCache={};var IUe=TUe;const DUe=new g(1,1,1);function PUe(e){e=Object(o["a"])(e,DUe),i["a"].defined("dimensions",e),i["a"].typeOf.number.greaterThanOrEquals("dimensions.x",e.x,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.y",e.y,0),i["a"].typeOf.number.greaterThanOrEquals("dimensions.z",e.z,0),this._dimensions=g.clone(e)}Object.defineProperties(PUe.prototype,{dimensions:{get:function(){return this._dimensions},set:function(e){i["a"].defined("value",e),i["a"].typeOf.number.greaterThanOrEquals("value.x",e.x,0),i["a"].typeOf.number.greaterThanOrEquals("value.y",e.y,0),i["a"].typeOf.number.greaterThanOrEquals("value.z",e.z,0),g.clone(e,this._dimensions)}}});const jUe=new g;PUe.prototype.emit=function(e){const t=this._dimensions,n=g.multiplyByScalar(t,.5,jUe),i=s["a"].randomBetween(-n.x,n.x),o=s["a"].randomBetween(-n.y,n.y),r=s["a"].randomBetween(-n.z,n.z);e.position=g.fromElements(i,o,r,e.position),e.velocity=g.normalize(e.position,e.velocity)};var RUe=PUe,LUe="varying vec2 v_textureCoordinates;\nconst float M_PI = 3.141592653589793;\n\nfloat vdcRadicalInverse(int i)\n{\n    float r;\n    float base = 2.0;\n    float value = 0.0;\n    float invBase = 1.0 / base;\n    float invBi = invBase;\n    for (int x = 0; x < 100; x++)\n    {\n        if (i <= 0)\n        {\n            break;\n        }\n        r = mod(float(i), base);\n        value += r * invBi;\n        invBi *= invBase;\n        i = int(float(i) * invBase);\n    }\n    return value;\n}\n\nvec2 hammersley2D(int i, int N)\n{\n    return vec2(float(i) / float(N), vdcRadicalInverse(i));\n}\n\nvec3 importanceSampleGGX(vec2 xi, float roughness, vec3 N)\n{\n    float a = roughness * roughness;\n    float phi = 2.0 * M_PI * xi.x;\n    float cosTheta = sqrt((1.0 - xi.y) / (1.0 + (a * a - 1.0) * xi.y));\n    float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n    vec3 H = vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n    vec3 upVector = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n    vec3 tangentX = normalize(cross(upVector, N));\n    vec3 tangentY = cross(N, tangentX);\n    return tangentX * H.x + tangentY * H.y + N * H.z;\n}\n\nfloat G1_Smith(float NdotV, float k)\n{\n    return NdotV / (NdotV * (1.0 - k) + k);\n}\n\nfloat G_Smith(float roughness, float NdotV, float NdotL)\n{\n    float k = roughness * roughness / 2.0;\n    return G1_Smith(NdotV, k) * G1_Smith(NdotL, k);\n}\n\nvec2 integrateBrdf(float roughness, float NdotV)\n{\n    vec3 V = vec3(sqrt(1.0 - NdotV * NdotV), 0.0, NdotV);\n    float A = 0.0;\n    float B = 0.0;\n    const int NumSamples = 1024;\n    for (int i = 0; i < NumSamples; i++)\n    {\n        vec2 xi = hammersley2D(i, NumSamples);\n        vec3 H = importanceSampleGGX(xi, roughness, vec3(0.0, 0.0, 1.0));\n        vec3 L = 2.0 * dot(V, H) * H - V;\n        float NdotL = clamp(L.z, 0.0, 1.0);\n        float NdotH = clamp(H.z, 0.0, 1.0);\n        float VdotH = clamp(dot(V, H), 0.0, 1.0);\n        if (NdotL > 0.0)\n        {\n            float G = G_Smith(roughness, NdotV, NdotL);\n            float G_Vis = G * VdotH / (NdotH * NdotV);\n            float Fc = pow(1.0 - VdotH, 5.0);\n            A += (1.0 - Fc) * G_Vis;\n            B += Fc * G_Vis;\n        }\n    }\n    return vec2(A, B) / float(NumSamples);\n}\n\nvoid main()\n{\n    gl_FragColor = vec4(integrateBrdf(v_textureCoordinates.y, v_textureCoordinates.x), 0.0, 1.0);\n}\n";function MUe(){this._colorTexture=void 0,this._drawCommand=void 0}function NUe(e,t,n){const i=t.createViewportQuadCommand(LUe,{framebuffer:n,renderState:UF.fromCache({viewport:new Au(0,0,256,256)})});e._drawCommand=i}Object.defineProperties(MUe.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),MUe.prototype.update=function(e){if(!Object(r["a"])(this._colorTexture)){const t=e.context,n=new lB({context:t,width:256,height:256,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,sampler:rB.NEAREST});this._colorTexture=n;const i=new S8({context:t,colorTextures:[n],destroyAttachments:!1});NUe(this,t,i),this._drawCommand.execute(t),i.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},MUe.prototype.isDestroyed=function(){return!1},MUe.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),Wc(this)};var BUe=MUe;const FUe={};function zUe(e,t,n){let i,o,r;if(e instanceof zO){const a=Math.tan(.5*e.fovy);return i=e.near,o=e.near*a,r=e.aspectRatio*o,Math.max(t*i/r,n*i/o)}return e instanceof NO?(i=e.near,o=e.top,r=e.right,Math.max(t*i/r,n*i/o)):Math.max(t,n)}const kUe=new g,UUe=new g;function VUe(e,t,n,i){if(Object(r["a"])(i)&&n(.5)>i){const i=n(0),o=n(1),r=n(.5),a=r-i,c=r-o;return function(r){const l=n(r);if(r<=.5){const t=(l-i)/a;return s["a"].lerp(e,-s["a"].PI_OVER_TWO,t)}const u=(l-o)/c;return s["a"].lerp(-s["a"].PI_OVER_TWO,t,1-u)}}return function(n){return s["a"].lerp(e,t,n)}}function HUe(e,t,n,i,o){let a=o;const c=Math.max(n,i);if(!Object(r["a"])(a)){const n=e.position,i=t,o=e.up,r=e.right,s=e.frustum,c=g.subtract(n,i,kUe),l=g.magnitude(g.multiplyByScalar(o,g.dot(c,o),UUe)),u=g.magnitude(g.multiplyByScalar(r,g.dot(c,r),UUe));a=Math.min(.2*zUe(s,l,u),1e9)}if(c<a){const e=8,t=1e6,o=-Math.pow((a-n)*t,1/e),r=Math.pow((a-i)*t,1/e);return function(n){const i=n*(r-o)+o;return-Math.pow(i,e)/t+a}}return function(e){return s["a"].lerp(n,i,e)}}function GUe(e,t){return s["a"].equalsEpsilon(e,s["a"].TWO_PI,s["a"].EPSILON11)&&(e=0),t>e+Math.PI?e+=s["a"].TWO_PI:t<e-Math.PI&&(e-=s["a"].TWO_PI),e}const WUe=new g;function qUe(e,t,n,i,o,r,a,c){const l=e.camera,u=g.clone(l.position,WUe),h=l.pitch,d=GUe(l.heading,i),f=GUe(l.roll,r),p=HUe(l,n,u.z,n.z,a),m=VUe(h,o,p,c);function _(e){const o=e.time/t;l.setView({orientation:{heading:s["a"].lerp(d,i,o),pitch:m(o),roll:s["a"].lerp(f,r,o)}}),Gt.lerp(u,n,o,l.position),l.position.z=p(o)}return _}function YUe(e,t){e.longitude<t.longitude?e.longitude+=s["a"].TWO_PI:t.longitude+=s["a"].TWO_PI}function XUe(e,t){const n=e.longitude-t.longitude;n<-s["a"].PI?e.longitude+=s["a"].TWO_PI:n>s["a"].PI&&(t.longitude+=s["a"].TWO_PI)}const KUe=new I,$Ue=new I;function JUe(e,t,n,i,o,a,c,l,u,h){const d=e.camera,f=e.mapProjection,p=f.ellipsoid,m=I.clone(d.positionCartographic,KUe),_=d.pitch,b=GUe(d.heading,i),y=GUe(d.roll,a),v=p.cartesianToCartographic(n,$Ue);m.longitude=s["a"].zeroToTwoPi(m.longitude),v.longitude=s["a"].zeroToTwoPi(v.longitude);let O=!1;if(Object(r["a"])(l)){const e=s["a"].zeroToTwoPi(l),t=Math.min(m.longitude,v.longitude),n=Math.max(m.longitude,v.longitude),i=e>=t&&e<=n;if(Object(r["a"])(u)){const e=Math.abs(m.longitude-v.longitude),t=s["a"].TWO_PI-e,n=i?e:t,o=i?t:e;n<o*u&&!i&&(O=!0)}else i||(O=!0)}O?YUe(m,v):XUe(m,v);const A=HUe(d,n,m.height,v.height,c),w=VUe(_,o,A,h);function T(){const e=m.longitude,n=v.longitude,o=m.latitude,r=v.latitude;return function(c){const l=c.time/t,u=g.fromRadians(s["a"].lerp(e,n,l),s["a"].lerp(o,r,l),A(l),p);d.setView({destination:u,orientation:{heading:s["a"].lerp(b,i,l),pitch:w(l),roll:s["a"].lerp(y,a,l)}})}}return T()}function QUe(e,t,n,i,o,r,a){const c=e.camera,l=g.clone(c.position,WUe),u=GUe(c.heading,i),h=c.frustum.right-c.frustum.left,d=HUe(c,n,h,n.z,a);function f(e){const o=e.time/t;c.setView({orientation:{heading:s["a"].lerp(u,i,o)}}),Gt.lerp(l,n,o,c.position);const r=d(o),a=c.frustum,h=a.top/a.right,f=.5*(r-(a.right-a.left));a.right+=f,a.left-=f,a.top=h*a.right,a.bottom=-a.top}return f}const ZUe=new I,eVe=new g;function tVe(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function nVe(e,t){function n(){"function"===typeof t&&t(),e.enableInputs=!0}return n}FUe.createTween=function(e,t){t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);let n=t.destination;if(!Object(r["a"])(e))throw new a["a"]("scene is required.");if(!Object(r["a"])(n))throw new a["a"]("destination is required.");const i=e.mode;if(i===SH.MORPHING)return tVe();const c=Object(o["a"])(t.convert,!0),l=e.mapProjection,u=l.ellipsoid,h=t.maximumHeight,d=t.flyOverLongitude,f=t.flyOverLongitudeWeight,p=t.pitchAdjustHeight;let m=t.easingFunction;c&&i!==SH.SCENE3D&&(u.cartesianToCartographic(n,ZUe),n=l.project(ZUe,eVe));const _=e.camera,b=t.endTransform;Object(r["a"])(b)&&_._setTransform(b);let y=t.duration;Object(r["a"])(y)||(y=Math.ceil(g.distance(_.position,n)/1e6)+2,y=Math.min(y,3));const v=Object(o["a"])(t.heading,0),O=Object(o["a"])(t.pitch,-s["a"].PI_OVER_TWO),A=Object(o["a"])(t.roll,0),w=e.screenSpaceCameraController;w.enableInputs=!1;const T=nVe(w,t.complete),C=nVe(w,t.cancel),E=_.frustum;let x=e.mode===SH.SCENE2D;if(x=x&&Gt.equalsEpsilon(_.position,n,s["a"].EPSILON6),x=x&&s["a"].equalsEpsilon(Math.max(E.right-E.left,E.top-E.bottom),n.z,s["a"].EPSILON6),x=x||e.mode!==SH.SCENE2D&&g.equalsEpsilon(n,_.position,s["a"].EPSILON10),x=x&&s["a"].equalsEpsilon(s["a"].negativePiToPi(v),s["a"].negativePiToPi(_.heading),s["a"].EPSILON10)&&s["a"].equalsEpsilon(s["a"].negativePiToPi(O),s["a"].negativePiToPi(_.pitch),s["a"].EPSILON10)&&s["a"].equalsEpsilon(s["a"].negativePiToPi(A),s["a"].negativePiToPi(_.roll),s["a"].EPSILON10),x)return tVe(T,C);const S=new Array(4);if(S[SH.SCENE2D]=QUe,S[SH.SCENE3D]=JUe,S[SH.COLUMBUS_VIEW]=qUe,y<=0){const t=function(){const t=S[i](e,1,n,v,O,A,h,d,f,p);t({time:1}),"function"===typeof T&&T()};return tVe(t,C)}const I=S[i](e,y,n,v,O,A,h,d,f,p);if(!Object(r["a"])(m)){const e=_.positionCartographic.height,t=i===SH.SCENE3D?u.cartesianToCartographic(n).height:n.z;m=e>t&&e>11500?Gv.CUBIC_OUT:Gv.QUINTIC_IN_OUT}return{duration:y,easingFunction:m,startObject:{time:0},stopObject:{time:y},update:I,complete:T,cancel:C}};var iVe=FUe;const oVe={ROTATE:0,INFINITE_SCROLL:1};var rVe=Object.freeze(oVe);function aVe(e){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this._scene=e,this._transform=Me.clone(Me.IDENTITY),this._invTransform=Me.clone(Me.IDENTITY),this._actualTransform=Me.clone(Me.IDENTITY),this._actualInvTransform=Me.clone(Me.IDENTITY),this._transformChanged=!1,this.position=new g,this._position=new g,this._positionWC=new g,this._positionCartographic=new I,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new g,this._direction=new g,this._directionWC=new g,this.up=new g,this._up=new g,this._upWC=new g,this.right=new g,this._right=new g,this._rightWC=new g,this.frustum=new zO,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=s["a"].toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new dn["a"],this._moveEnd=new dn["a"],this._changed=new dn["a"],this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this._changedHeading=void 0,this.percentageChanged=.5,this._viewMatrix=new Me,this._invViewMatrix=new Me,sVe(this),this._mode=SH.SCENE3D,this._modeChanged=!0;const t=e.mapProjection;this._projection=t,this._maxCoord=t.project(new I(Math.PI,s["a"].PI_OVER_TWO)),this._max2Dfrustum=void 0,IHe(this,aVe.DEFAULT_VIEW_RECTANGLE,this.position,!0);let n=g.magnitude(this.position);n+=n*aVe.DEFAULT_VIEW_FACTOR,g.normalize(this.position,this.position),g.multiplyByScalar(this.position,n,this.position)}function sVe(e){Me.computeView(e._position,e._direction,e._up,e._right,e._viewMatrix),Me.multiply(e._viewMatrix,e._actualInvTransform,e._viewMatrix),Me.inverseTransformation(e._viewMatrix,e._invViewMatrix)}function cVe(e){if(Object(r["a"])(e._oldPositionWC)){e.positionWCDeltaMagnitudeLastFrame=e.positionWCDeltaMagnitude;const t=g.subtract(e.positionWC,e._oldPositionWC,e._oldPositionWC);e.positionWCDeltaMagnitude=g.magnitude(t),e._oldPositionWC=g.clone(e.positionWC,e._oldPositionWC),e.positionWCDeltaMagnitude>0?(e.timeSinceMoved=0,e._lastMovedTimestamp=bm()):e.timeSinceMoved=Math.max(bm()-e._lastMovedTimestamp,0)/1e3}else e._oldPositionWC=g.clone(e.positionWC,e._oldPositionWC)}function lVe(e){ka.basisTo2D(e._projection,e._transform,e._actualTransform)}aVe.TRANSFORM_2D=new Me(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),aVe.TRANSFORM_2D_INVERSE=Me.inverseTransformation(aVe.TRANSFORM_2D,new Me),aVe.DEFAULT_VIEW_RECTANGLE=Fe.fromDegrees(-95,-20,-70,90),aVe.DEFAULT_VIEW_FACTOR=.5,aVe.DEFAULT_OFFSET=new JT(0,-s["a"].PI_OVER_FOUR,0),aVe.prototype.canPreloadFlight=function(){return Object(r["a"])(this._currentFlight)&&this._mode!==SH.SCENE2D},aVe.prototype._updateCameraChanged=function(){const e=this;if(cVe(e),0===e._changed.numberOfListeners)return;const t=e.percentageChanged,n=e.heading;Object(r["a"])(e._changedHeading)||(e._changedHeading=n);let i=Math.abs(e._changedHeading-n)%s["a"].TWO_PI;i=i>s["a"].PI?s["a"].TWO_PI-i:i;const o=i/Math.PI;if(o>t&&(e._changed.raiseEvent(o),e._changedHeading=n),e._mode===SH.SCENE2D){if(!Object(r["a"])(e._changedFrustum))return e._changedPosition=g.clone(e.position,e._changedPosition),void(e._changedFrustum=e.frustum.clone());const n=e.position,i=e._changedPosition,o=e.frustum,a=e._changedFrustum,s=n.x+o.left,c=n.x+o.right,l=i.x+a.left,u=i.x+a.right,h=n.y+o.bottom,d=n.y+o.top,f=i.y+a.bottom,p=i.y+a.top,m=Math.max(s,l),_=Math.min(c,u),b=Math.max(h,f),y=Math.min(d,p);let v;if(m>=_||b>=d)v=1;else{let e=a;s<l&&c>u&&h<f&&d>p&&(e=o),v=1-(_-m)*(y-b)/((e.right-e.left)*(e.top-e.bottom))}return void(v>t&&(e._changed.raiseEvent(v),e._changedPosition=g.clone(e.position,e._changedPosition),e._changedFrustum=e.frustum.clone(e._changedFrustum)))}if(!Object(r["a"])(e._changedDirection))return e._changedPosition=g.clone(e.positionWC,e._changedPosition),void(e._changedDirection=g.clone(e.directionWC,e._changedDirection));const a=s["a"].acosClamped(g.dot(e.directionWC,e._changedDirection));let c;c=Object(r["a"])(e.frustum.fovy)?a/(.5*e.frustum.fovy):a;const l=g.distance(e.positionWC,e._changedPosition),u=l/e.positionCartographic.height;(c>t||u>t)&&(e._changed.raiseEvent(Math.max(c,u)),e._changedPosition=g.clone(e.positionWC,e._changedPosition),e._changedDirection=g.clone(e.directionWC,e._changedDirection))};const uVe=new I,hVe=new g,dVe=new g,fVe=new be,pVe=new be,mVe=new be,_Ve=new be,gVe=new be;function bVe(e){const t=e._projection,n=t.ellipsoid,i=Me.getColumn(e._transform,3,fVe),o=n.cartesianToCartographic(i,uVe),r=t.project(o,hVe),a=pVe;a.x=r.z,a.y=r.x,a.z=r.y,a.w=1;const c=be.clone(be.UNIT_X,gVe),l=be.add(Me.getColumn(e._transform,0,dVe),i,dVe);n.cartesianToCartographic(l,o),t.project(o,r);const u=mVe;u.x=r.z,u.y=r.x,u.z=r.y,u.w=0,g.subtract(u,a,u),u.x=0;const h=_Ve;if(g.magnitudeSquared(u)>s["a"].EPSILON10)g.cross(c,u,h);else{const c=be.add(Me.getColumn(e._transform,1,dVe),i,dVe);n.cartesianToCartographic(c,o),t.project(o,r),h.x=r.z,h.y=r.x,h.z=r.y,h.w=0,g.subtract(h,a,h),h.x=0,g.magnitudeSquared(h)<s["a"].EPSILON10&&(be.clone(be.UNIT_Y,u),be.clone(be.UNIT_Z,h))}g.cross(h,c,u),g.normalize(u,u),g.cross(c,u,h),g.normalize(h,h),Me.setColumn(e._actualTransform,0,u,e._actualTransform),Me.setColumn(e._actualTransform,1,h,e._actualTransform),Me.setColumn(e._actualTransform,2,c,e._actualTransform),Me.setColumn(e._actualTransform,3,a,e._actualTransform)}const yVe=new g;function vVe(e){const t=e._mode;let n=!1,i=0;t===SH.SCENE2D&&(i=e.frustum.right-e.frustum.left,n=i!==e._positionCartographic.height);let o=e._position;const r=!g.equals(o,e.position)||n;r&&(o=g.clone(e.position,e._position));let a=e._direction;const c=!g.equals(a,e.direction);c&&(g.normalize(e.direction,e.direction),a=g.clone(e.direction,e._direction));let l=e._up;const u=!g.equals(l,e.up);u&&(g.normalize(e.up,e.up),l=g.clone(e.up,e._up));let h=e._right;const d=!g.equals(h,e.right);d&&(g.normalize(e.right,e.right),h=g.clone(e.right,e._right));const f=e._transformChanged||e._modeChanged;e._transformChanged=!1,f&&(Me.inverseTransformation(e._transform,e._invTransform),e._mode===SH.COLUMBUS_VIEW||e._mode===SH.SCENE2D?Me.equals(Me.IDENTITY,e._transform)?Me.clone(aVe.TRANSFORM_2D,e._actualTransform):e._mode===SH.COLUMBUS_VIEW?lVe(e):bVe(e):Me.clone(e._transform,e._actualTransform),Me.inverseTransformation(e._actualTransform,e._actualInvTransform),e._modeChanged=!1);const p=e._actualTransform;if(r||f)if(e._positionWC=Me.multiplyByPoint(p,o,e._positionWC),t===SH.SCENE3D||t===SH.MORPHING)e._positionCartographic=e._projection.ellipsoid.cartesianToCartographic(e._positionWC,e._positionCartographic);else{const n=yVe;n.x=e._positionWC.y,n.y=e._positionWC.z,n.z=e._positionWC.x,t===SH.SCENE2D&&(n.z=i),e._projection.unproject(n,e._positionCartographic)}if(c||u||d){const t=g.dot(a,g.cross(l,h,yVe));if(Math.abs(1-t)>s["a"].EPSILON2){const t=1/g.magnitudeSquared(l),n=g.dot(l,a)*t,i=g.multiplyByScalar(a,n,yVe);l=g.normalize(g.subtract(l,i,e._up),e._up),g.clone(l,e.up),h=g.cross(a,l,e._right),g.clone(h,e.right)}}(c||f)&&(e._directionWC=Me.multiplyByPointAsVector(p,a,e._directionWC),g.normalize(e._directionWC,e._directionWC)),(u||f)&&(e._upWC=Me.multiplyByPointAsVector(p,l,e._upWC),g.normalize(e._upWC,e._upWC)),(d||f)&&(e._rightWC=Me.multiplyByPointAsVector(p,h,e._rightWC),g.normalize(e._rightWC,e._rightWC)),(r||c||u||d||f)&&sVe(e)}function OVe(e,t){let n;return n=s["a"].equalsEpsilon(Math.abs(e.z),1,s["a"].EPSILON3)?Math.atan2(t.y,t.x)-s["a"].PI_OVER_TWO:Math.atan2(e.y,e.x)-s["a"].PI_OVER_TWO,s["a"].TWO_PI-s["a"].zeroToTwoPi(n)}function AVe(e){return s["a"].PI_OVER_TWO-s["a"].acosClamped(e.z)}function wVe(e,t,n){let i=0;return s["a"].equalsEpsilon(Math.abs(e.z),1,s["a"].EPSILON3)||(i=Math.atan2(-n.z,t.z),i=s["a"].zeroToTwoPi(i+s["a"].TWO_PI)),i}const TVe=new Me,CVe=new Me;Object.defineProperties(aVe.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return vVe(this),this._invTransform}},viewMatrix:{get:function(){return vVe(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return vVe(this),this._invViewMatrix}},positionCartographic:{get:function(){return vVe(this),this._positionCartographic}},positionWC:{get:function(){return vVe(this),this._positionWC}},directionWC:{get:function(){return vVe(this),this._directionWC}},upWC:{get:function(){return vVe(this),this._upWC}},rightWC:{get:function(){return vVe(this),this._rightWC}},heading:{get:function(){if(this._mode!==SH.MORPHING){const e=this._projection.ellipsoid,t=Me.clone(this._transform,TVe),n=ka.eastNorthUpToFixedFrame(this.positionWC,e,CVe);this._setTransform(n);const i=OVe(this.direction,this.up);return this._setTransform(t),i}}},pitch:{get:function(){if(this._mode!==SH.MORPHING){const e=this._projection.ellipsoid,t=Me.clone(this._transform,TVe),n=ka.eastNorthUpToFixedFrame(this.positionWC,e,CVe);this._setTransform(n);const i=AVe(this.direction);return this._setTransform(t),i}}},roll:{get:function(){if(this._mode!==SH.MORPHING){const e=this._projection.ellipsoid,t=Me.clone(this._transform,TVe),n=ka.eastNorthUpToFixedFrame(this.positionWC,e,CVe);this._setTransform(n);const i=wVe(this.direction,this.up,this.right);return this._setTransform(t),i}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),aVe.prototype.update=function(e){if(!Object(r["a"])(e))throw new a["a"]("mode is required.");if(e===SH.SCENE2D&&!(this.frustum instanceof EO))throw new a["a"]("An OrthographicOffCenterFrustum is required in 2D.");if((e===SH.SCENE3D||e===SH.COLUMBUS_VIEW)&&!(this.frustum instanceof zO)&&!(this.frustum instanceof IO))throw new a["a"]("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");let t=!1;if(e!==this._mode&&(this._mode=e,this._modeChanged=e!==SH.MORPHING,t=this._mode===SH.SCENE2D),t){const e=this._max2Dfrustum=this.frustum.clone();if(!(e instanceof EO))throw new a["a"]("The camera frustum is expected to be orthographic for 2D camera control.");const t=2,n=e.top/e.right;e.right=this._maxCoord.x*t,e.left=-e.right,e.top=n*e.right,e.bottom=-e.top}this._mode===SH.SCENE2D&&$Ve(this,this.position)};const EVe=new g,xVe=new g,SVe=new g;aVe.prototype._setTransform=function(e){const t=g.clone(this.positionWC,EVe),n=g.clone(this.upWC,xVe),i=g.clone(this.directionWC,SVe);Me.clone(e,this._transform),this._transformChanged=!0,vVe(this);const o=this._actualInvTransform;Me.multiplyByPoint(o,t,this.position),Me.multiplyByPointAsVector(o,i,this.direction),Me.multiplyByPointAsVector(o,n,this.up),g.cross(this.direction,this.up,this.right),vVe(this)};const IVe=new Gt,DVe=new Yn,PVe=new g,jVe=new g;function RVe(e){if(!Me.equals(Me.IDENTITY,e.transform))return g.magnitude(e.position);const t=e._scene,n=t.globe,i=IVe;let o,a,s;if(i.x=t.drawingBufferWidth/2,i.y=t.drawingBufferHeight/2,Object(r["a"])(n)){const r=e.getPickRay(i,DVe);o=n.pickWorldCoordinates(r,t,!0,PVe)}if(t.pickPositionSupported&&(a=t.pickPositionWorldCoordinates(i,jVe)),Object(r["a"])(o)||Object(r["a"])(a)){const t=Object(r["a"])(a)?g.distance(a,e.positionWC):Number.POSITIVE_INFINITY,n=Object(r["a"])(o)?g.distance(o,e.positionWC):Number.POSITIVE_INFINITY;s=Math.min(t,n)}else s=Math.max(e.positionCartographic.height,0);return s}aVe.prototype._adjustOrthographicFrustum=function(e){this.frustum instanceof IO&&(!e&&this._positionCartographic.height<15e4||(this.frustum.width=RVe(this)))};const LVe=new g,MVe=new Me,NVe=new Me,BVe=new Kr,FVe=new ce,zVe=new I;function kVe(e,t,n){const i=Me.clone(e.transform,MVe),o=ka.eastNorthUpToFixedFrame(t,e._projection.ellipsoid,NVe);e._setTransform(o),g.clone(g.ZERO,e.position),n.heading=n.heading-s["a"].PI_OVER_TWO;const r=Kr.fromHeadingPitchRoll(n,BVe),a=ce.fromQuaternion(r,FVe);ce.getColumn(a,0,e.direction),ce.getColumn(a,2,e.up),g.cross(e.direction,e.up,e.right),e._setTransform(i),e._adjustOrthographicFrustum(!0)}function UVe(e,t,n,i){const o=Me.clone(e.transform,MVe);if(e._setTransform(Me.IDENTITY),!g.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,zVe);t=n.project(i,LVe)}g.clone(t,e.position)}n.heading=n.heading-s["a"].PI_OVER_TWO;const r=Kr.fromHeadingPitchRoll(n,BVe),a=ce.fromQuaternion(r,FVe);ce.getColumn(a,0,e.direction),ce.getColumn(a,2,e.up),g.cross(e.direction,e.up,e.right),e._setTransform(o),e._adjustOrthographicFrustum(!0)}function VVe(e,t,n,i){const o=Me.clone(e.transform,MVe);if(e._setTransform(Me.IDENTITY),!g.equals(t,e.positionWC)){if(i){const n=e._projection,i=n.ellipsoid.cartesianToCartographic(t,zVe);t=n.project(i,LVe)}Gt.clone(t,e.position);const n=.5*-t.z,o=-n,r=e.frustum;if(o>n){const e=r.top/r.right;r.right=o,r.left=n,r.top=r.right*e,r.bottom=-r.top}}if(e._scene.mapMode2D===rVe.ROTATE){n.heading=n.heading-s["a"].PI_OVER_TWO,n.pitch=-s["a"].PI_OVER_TWO,n.roll=0;const t=Kr.fromHeadingPitchRoll(n,BVe),i=ce.fromQuaternion(t,FVe);ce.getColumn(i,2,e.up),g.cross(e.direction,e.up,e.right)}e._setTransform(o)}const HVe=new g,GVe=new g,WVe=new g;function qVe(e,t,n,i){const o=g.clone(n.direction,HVe),r=g.clone(n.up,GVe);if(e._scene.mode===SH.SCENE3D){const n=e._projection.ellipsoid,i=ka.eastNorthUpToFixedFrame(t,n,TVe),a=Me.inverseTransformation(i,CVe);Me.multiplyByPointAsVector(a,o,o),Me.multiplyByPointAsVector(a,r,r)}const a=g.cross(o,r,WVe);return i.heading=OVe(o,r),i.pitch=AVe(o),i.roll=wVe(o,r,a),i}const YVe={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},XVe=new To;aVe.prototype.setView=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=Object(o["a"])(e.orientation,o["a"].EMPTY_OBJECT);const n=this._mode;if(n===SH.MORPHING)return;Object(r["a"])(e.endTransform)&&this._setTransform(e.endTransform);let i=Object(o["a"])(e.convert,!0),a=Object(o["a"])(e.destination,g.clone(this.positionWC,LVe));Object(r["a"])(a)&&Object(r["a"])(a.west)&&(a=this.getRectangleCameraCoordinates(a,LVe),i=!1),Object(r["a"])(t.direction)&&(t=qVe(this,a,t,YVe.orientation)),XVe.heading=Object(o["a"])(t.heading,0),XVe.pitch=Object(o["a"])(t.pitch,-s["a"].PI_OVER_TWO),XVe.roll=Object(o["a"])(t.roll,0),n===SH.SCENE3D?kVe(this,a,XVe):n===SH.SCENE2D?VVe(this,a,XVe,i):UVe(this,a,XVe,i)};const KVe=new g;function $Ve(e,t){const n=e._scene.mapMode2D===rVe.ROTATE,i=e._maxCoord.x,o=e._maxCoord.y;let r,a;n?(a=i,r=-a):(a=t.x-2*i,r=t.x+2*i),t.x>i&&(t.x=a),t.x<-i&&(t.x=r),t.y>o&&(t.y=o),t.y<-o&&(t.y=-o)}aVe.prototype.flyHome=function(e){const t=this._mode;if(t===SH.MORPHING&&this._scene.completeMorph(),t===SH.SCENE2D)this.flyTo({destination:aVe.DEFAULT_VIEW_RECTANGLE,duration:e,endTransform:Me.IDENTITY});else if(t===SH.SCENE3D){const t=this.getRectangleCameraCoordinates(aVe.DEFAULT_VIEW_RECTANGLE);let n=g.magnitude(t);n+=n*aVe.DEFAULT_VIEW_FACTOR,g.normalize(t,t),g.multiplyByScalar(t,n,t),this.flyTo({destination:t,duration:e,endTransform:Me.IDENTITY})}else if(t===SH.COLUMBUS_VIEW){const t=this._projection.ellipsoid.maximumRadius;let n=new g(0,-1,1);n=g.multiplyByScalar(g.normalize(n,n),5*t,n),this.flyTo({destination:n,duration:e,orientation:{heading:0,pitch:-Math.acos(g.normalize(n,KVe).z),roll:0},endTransform:Me.IDENTITY,convert:!1})}},aVe.prototype.worldToCameraCoordinates=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new be),vVe(this),Me.multiplyByVector(this._actualInvTransform,e,t)},aVe.prototype.worldToCameraCoordinatesPoint=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new g),vVe(this),Me.multiplyByPoint(this._actualInvTransform,e,t)},aVe.prototype.worldToCameraCoordinatesVector=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new g),vVe(this),Me.multiplyByPointAsVector(this._actualInvTransform,e,t)},aVe.prototype.cameraToWorldCoordinates=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new be),vVe(this),Me.multiplyByVector(this._actualTransform,e,t)},aVe.prototype.cameraToWorldCoordinatesPoint=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new g),vVe(this),Me.multiplyByPoint(this._actualTransform,e,t)},aVe.prototype.cameraToWorldCoordinatesVector=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("cartesian is required.");return Object(r["a"])(t)||(t=new g),vVe(this),Me.multiplyByPointAsVector(this._actualTransform,e,t)};const JVe=new g;aVe.prototype.move=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("direction is required.");const n=this.position;g.multiplyByScalar(e,t,JVe),g.add(n,JVe,n),this._mode===SH.SCENE2D&&$Ve(this,n),this._adjustOrthographicFrustum(!0)},aVe.prototype.moveForward=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this._mode===SH.SCENE2D?cHe(this,e):this.move(this.direction,e)},aVe.prototype.moveBackward=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this._mode===SH.SCENE2D?cHe(this,-e):this.move(this.direction,-e)},aVe.prototype.moveUp=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this.move(this.up,e)},aVe.prototype.moveDown=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this.move(this.up,-e)},aVe.prototype.moveRight=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this.move(this.right,e)},aVe.prototype.moveLeft=function(e){e=Object(o["a"])(e,this.defaultMoveAmount),this.move(this.right,-e)},aVe.prototype.lookLeft=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this._mode!==SH.SCENE2D&&this.look(this.up,-e)},aVe.prototype.lookRight=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this._mode!==SH.SCENE2D&&this.look(this.up,e)},aVe.prototype.lookUp=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this._mode!==SH.SCENE2D&&this.look(this.right,-e)},aVe.prototype.lookDown=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this._mode!==SH.SCENE2D&&this.look(this.right,e)};const QVe=new Kr,ZVe=new ce;aVe.prototype.look=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("axis is required.");const n=Object(o["a"])(t,this.defaultLookAmount),i=Kr.fromAxisAngle(e,-n,QVe),s=ce.fromQuaternion(i,ZVe),c=this.direction,l=this.up,u=this.right;ce.multiplyByVector(s,c,c),ce.multiplyByVector(s,l,l),ce.multiplyByVector(s,u,u)},aVe.prototype.twistLeft=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this.look(this.direction,e)},aVe.prototype.twistRight=function(e){e=Object(o["a"])(e,this.defaultLookAmount),this.look(this.direction,-e)};const eHe=new Kr,tHe=new ce;aVe.prototype.rotate=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("axis is required.");const n=Object(o["a"])(t,this.defaultRotateAmount),i=Kr.fromAxisAngle(e,-n,eHe),s=ce.fromQuaternion(i,tHe);ce.multiplyByVector(s,this.position,this.position),ce.multiplyByVector(s,this.direction,this.direction),ce.multiplyByVector(s,this.up,this.up),g.cross(this.direction,this.up,this.right),g.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},aVe.prototype.rotateDown=function(e){e=Object(o["a"])(e,this.defaultRotateAmount),aHe(this,e)},aVe.prototype.rotateUp=function(e){e=Object(o["a"])(e,this.defaultRotateAmount),aHe(this,-e)};const nHe=new g,iHe=new g,oHe=new g,rHe=new g;function aHe(e,t){const n=e.position;if(Object(r["a"])(e.constrainedAxis)&&!g.equalsEpsilon(e.position,g.ZERO,s["a"].EPSILON2)){const i=g.normalize(n,nHe),o=g.equalsEpsilon(i,e.constrainedAxis,s["a"].EPSILON2),r=g.equalsEpsilon(i,g.negate(e.constrainedAxis,rHe),s["a"].EPSILON2);if(o||r)(o&&t<0||r&&t>0)&&e.rotate(e.right,t);else{const n=g.normalize(e.constrainedAxis,iHe);let o=g.dot(i,n),r=s["a"].acosClamped(o);t>0&&t>r&&(t=r-s["a"].EPSILON4),o=g.dot(i,g.negate(n,rHe)),r=s["a"].acosClamped(o),t<0&&-t>r&&(t=-r+s["a"].EPSILON4);const a=g.cross(n,i,oHe);e.rotate(a,t)}}else e.rotate(e.right,t)}function sHe(e,t){Object(r["a"])(e.constrainedAxis)?e.rotate(e.constrainedAxis,t):e.rotate(e.up,t)}function cHe(e,t){const n=e.frustum;if(!(n instanceof EO)||!Object(r["a"])(n.left)||!Object(r["a"])(n.right)||!Object(r["a"])(n.bottom)||!Object(r["a"])(n.top))throw new a["a"]("The camera frustum is expected to be orthographic for 2D camera control.");let i;if(t*=.5,Math.abs(n.top)+Math.abs(n.bottom)>Math.abs(n.left)+Math.abs(n.right)){let o=n.top-t,r=n.bottom+t,a=e._maxCoord.y;e._scene.mapMode2D===rVe.ROTATE&&(a*=e.maximumZoomFactor),r>a&&(r=a,o=-a),o<=r&&(o=1,r=-1),i=n.right/n.top,n.top=o,n.bottom=r,n.right=n.top*i,n.left=-n.right}else{let o=n.right-t,r=n.left+t,a=e._maxCoord.x;e._scene.mapMode2D===rVe.ROTATE&&(a*=e.maximumZoomFactor),o>a&&(o=a,r=-a),o<=r&&(o=1,r=-1),i=n.top/n.right,n.right=o,n.left=r,n.top=n.right*i,n.bottom=-n.top}}function lHe(e,t){e.move(e.direction,t)}aVe.prototype.rotateRight=function(e){e=Object(o["a"])(e,this.defaultRotateAmount),sHe(this,-e)},aVe.prototype.rotateLeft=function(e){e=Object(o["a"])(e,this.defaultRotateAmount),sHe(this,e)},aVe.prototype.zoomIn=function(e){e=Object(o["a"])(e,this.defaultZoomAmount),this._mode===SH.SCENE2D?cHe(this,e):lHe(this,e)},aVe.prototype.zoomOut=function(e){e=Object(o["a"])(e,this.defaultZoomAmount),this._mode===SH.SCENE2D?cHe(this,-e):lHe(this,-e)},aVe.prototype.getMagnitude=function(){return this._mode===SH.SCENE3D?g.magnitude(this.position):this._mode===SH.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===SH.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};const uHe=new Me;aVe.prototype.lookAt=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("target is required");if(!Object(r["a"])(t))throw new a["a"]("offset is required");if(this._mode===SH.MORPHING)throw new a["a"]("lookAt is not supported while morphing.");const n=ka.eastNorthUpToFixedFrame(e,k.WGS84,uHe);this.lookAtTransform(n,t)};const hHe=new g,dHe=new Kr,fHe=new Kr,pHe=new ce;function mHe(e,t,n){t=s["a"].clamp(t,-s["a"].PI_OVER_TWO,s["a"].PI_OVER_TWO),e=s["a"].zeroToTwoPi(e)-s["a"].PI_OVER_TWO;const i=Kr.fromAxisAngle(g.UNIT_Y,-t,dHe),o=Kr.fromAxisAngle(g.UNIT_Z,-e,fHe),r=Kr.multiply(o,i,o),a=ce.fromQuaternion(r,pHe),c=g.clone(g.UNIT_X,hHe);return ce.multiplyByVector(a,c,c),g.negate(c,c),g.multiplyByScalar(c,n,c),c}aVe.prototype.lookAtTransform=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("transform is required");if(this._mode===SH.MORPHING)throw new a["a"]("lookAtTransform is not supported while morphing.");if(this._setTransform(e),!Object(r["a"])(t))return;let n;if(n=Object(r["a"])(t.heading)?mHe(t.heading,t.pitch,t.range):t,this._mode===SH.SCENE2D){Gt.clone(Gt.ZERO,this.position),g.negate(n,this.up),this.up.z=0,g.magnitudeSquared(this.up)<s["a"].EPSILON10&&g.clone(g.UNIT_Y,this.up),g.normalize(this.up,this.up),this._setTransform(Me.IDENTITY),g.negate(g.UNIT_Z,this.direction),g.cross(this.direction,this.up,this.right),g.normalize(this.right,this.right);const t=this.frustum,i=t.top/t.right;return t.right=.5*g.magnitude(n),t.left=-t.right,t.top=i*t.right,t.bottom=-t.top,void this._setTransform(e)}g.clone(n,this.position),g.negate(this.position,this.direction),g.normalize(this.direction,this.direction),g.cross(this.direction,g.UNIT_Z,this.right),g.magnitudeSquared(this.right)<s["a"].EPSILON10&&g.clone(g.UNIT_X,this.right),g.normalize(this.right,this.right),g.cross(this.right,this.direction,this.up),g.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)};const _He=new I,gHe=new I,bHe=new g,yHe=new g,vHe=new g,OHe=new g,AHe=new g,wHe=new g,THe=new g,CHe=new g,EHe={direction:new g,right:new g,up:new g};let xHe;function SHe(e,t,n,i){const o=Math.abs(g.dot(t,n));return o/i-g.dot(e,n)}function IHe(e,t,n,i){const o=e._projection.ellipsoid,a=i?e:EHe,c=t.north,l=t.south;let u=t.east;const h=t.west;h>u&&(u+=s["a"].TWO_PI);const d=.5*(h+u);let f;if(l<-s["a"].PI_OVER_TWO+s["a"].RADIANS_PER_DEGREE&&c>s["a"].PI_OVER_TWO-s["a"].RADIANS_PER_DEGREE)f=0;else{const e=_He;e.longitude=d,e.latitude=c,e.height=0;const t=gHe;t.longitude=d,t.latitude=l,t.height=0;let n=xHe;Object(r["a"])(n)&&n.ellipsoid===o||(xHe=n=new Rg(void 0,void 0,o)),n.setEndPoints(e,t),f=n.interpolateUsingFraction(.5,_He).latitude}const p=_He;p.longitude=d,p.latitude=f,p.height=0;const m=o.cartographicToCartesian(p,THe),_=_He;_.longitude=u,_.latitude=c;const b=o.cartographicToCartesian(_,bHe);_.longitude=h;const y=o.cartographicToCartesian(_,vHe);_.longitude=d;const v=o.cartographicToCartesian(_,AHe);_.latitude=l;const O=o.cartographicToCartesian(_,wHe);_.longitude=u;const A=o.cartographicToCartesian(_,OHe);_.longitude=h;const w=o.cartographicToCartesian(_,yHe);g.subtract(y,m,y),g.subtract(A,m,A),g.subtract(b,m,b),g.subtract(w,m,w),g.subtract(v,m,v),g.subtract(O,m,O);const T=o.geodeticSurfaceNormal(m,a.direction);g.negate(T,T);const C=g.cross(T,g.UNIT_Z,a.right);g.normalize(C,C);const E=g.cross(C,T,a.up);let x;if(e.frustum instanceof IO){const t=Math.max(g.distance(b,y),g.distance(A,w)),n=Math.max(g.distance(b,A),g.distance(y,w));let i,o;const r=e.frustum._offCenterFrustum.right/e.frustum._offCenterFrustum.top,a=n*r;t>a?(i=t,o=i/r):(o=n,i=a),x=Math.max(i,o)}else{const t=Math.tan(.5*e.frustum.fovy),n=e.frustum.aspectRatio*t;if(x=Math.max(SHe(T,E,y,t),SHe(T,E,A,t),SHe(T,E,b,t),SHe(T,E,w,t),SHe(T,E,v,t),SHe(T,E,O,t),SHe(T,C,y,n),SHe(T,C,A,n),SHe(T,C,b,n),SHe(T,C,w,n),SHe(T,C,v,n),SHe(T,C,O,n)),l<0&&c>0){const e=_He;e.longitude=h,e.latitude=0,e.height=0;let i=o.cartographicToCartesian(e,CHe);g.subtract(i,m,i),x=Math.max(x,SHe(T,E,i,t),SHe(T,C,i,n)),e.longitude=u,i=o.cartographicToCartesian(e,CHe),g.subtract(i,m,i),x=Math.max(x,SHe(T,E,i,t),SHe(T,C,i,n))}}return g.add(m,g.multiplyByScalar(T,-x,CHe),n)}const DHe=new I,PHe=new g,jHe=new g;function RHe(e,t,n){const i=e._projection;t.west>t.east&&(t=Fe.MAX_VALUE);const o=e._actualTransform,a=e._actualInvTransform,s=DHe;s.longitude=t.east,s.latitude=t.north;const c=i.project(s,PHe);Me.multiplyByPoint(o,c,c),Me.multiplyByPoint(a,c,c),s.longitude=t.west,s.latitude=t.south;const l=i.project(s,jHe);if(Me.multiplyByPoint(o,l,l),Me.multiplyByPoint(a,l,l),n.x=.5*(c.x-l.x)+l.x,n.y=.5*(c.y-l.y)+l.y,Object(r["a"])(e.frustum.fovy)){const t=Math.tan(.5*e.frustum.fovy),i=e.frustum.aspectRatio*t;n.z=.5*Math.max((c.x-l.x)/i,(c.y-l.y)/t)}else{const e=c.x-l.x,t=c.y-l.y;n.z=Math.max(e,t)}return n}const LHe=new I,MHe=new g,NHe=new g;function BHe(e,t,n){const i=e._projection;let o=t.east;t.west>t.east&&(e._scene.mapMode2D===rVe.INFINITE_SCROLL?o+=s["a"].TWO_PI:(t=Fe.MAX_VALUE,o=t.east));let r=LHe;r.longitude=o,r.latitude=t.north;const a=i.project(r,MHe);r.longitude=t.west,r.latitude=t.south;const c=i.project(r,NHe),l=.5*Math.abs(a.x-c.x);let u,h,d=.5*Math.abs(a.y-c.y);const f=e.frustum.right/e.frustum.top,p=d*f;return l>p?(u=l,h=u/f):(h=d,u=p),d=Math.max(2*u,2*h),n.x=.5*(a.x-c.x)+c.x,n.y=.5*(a.y-c.y)+c.y,r=i.unproject(n,r),r.height=d,n=i.project(r,n),n}aVe.prototype.getRectangleCameraCoordinates=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("rectangle is required");const n=this._mode;return Object(r["a"])(t)||(t=new g),n===SH.SCENE3D?IHe(this,e,t):n===SH.COLUMBUS_VIEW?RHe(this,e,t):n===SH.SCENE2D?BHe(this,e,t):void 0};const FHe=new Yn;function zHe(e,t,n,i){n=Object(o["a"])(n,k.WGS84);const r=e.getPickRay(t,FHe),a=Ci.rayEllipsoid(r,n);if(!a)return;const s=a.start>0?a.start:a.stop;return Yn.getPoint(r,s,i)}const kHe=new Yn;function UHe(e,t,n,i){const o=e.getPickRay(t,kHe);let r=o.origin;r=g.fromElements(r.y,r.z,0,r);const a=n.unproject(r);if(!(a.latitude<-s["a"].PI_OVER_TWO||a.latitude>s["a"].PI_OVER_TWO))return n.ellipsoid.cartographicToCartesian(a,i)}const VHe=new Yn;function HHe(e,t,n,i){const o=e.getPickRay(t,VHe),r=-o.origin.x/o.direction.x;Yn.getPoint(o,r,i);const a=n.unproject(new g(i.y,i.z,0));if(!(a.latitude<-s["a"].PI_OVER_TWO||a.latitude>s["a"].PI_OVER_TWO||a.longitude<-Math.PI||a.longitude>Math.PI))return n.ellipsoid.cartographicToCartesian(a,i)}aVe.prototype.pickEllipsoid=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("windowPosition is required.");const i=this._scene.canvas;if(0!==i.clientWidth&&0!==i.clientHeight){if(Object(r["a"])(n)||(n=new g),t=Object(o["a"])(t,k.WGS84),this._mode===SH.SCENE3D)n=zHe(this,e,t,n);else if(this._mode===SH.SCENE2D)n=UHe(this,e,this._projection,n);else{if(this._mode!==SH.COLUMBUS_VIEW)return;n=HHe(this,e,this._projection,n)}return n}};const GHe=new g,WHe=new g,qHe=new g;function YHe(e,t,n){const i=e._scene.canvas,o=i.clientWidth,r=i.clientHeight,a=Math.tan(.5*e.frustum.fovy),s=e.frustum.aspectRatio*a,c=e.frustum.near,l=2/o*t.x-1,u=2/r*(r-t.y)-1,h=e.positionWC;g.clone(h,n.origin);const d=g.multiplyByScalar(e.directionWC,c,GHe);g.add(h,d,d);const f=g.multiplyByScalar(e.rightWC,l*c*s,WHe),p=g.multiplyByScalar(e.upWC,u*c*a,qHe),m=g.add(d,f,n.direction);return g.add(m,p,m),g.subtract(m,h,m),g.normalize(m,m),n}const XHe=new g;function KHe(e,t,n){const i=e._scene.canvas,o=i.clientWidth,a=i.clientHeight;let s=e.frustum;Object(r["a"])(s._offCenterFrustum)&&(s=s._offCenterFrustum);let c=2/o*t.x-1;c*=.5*(s.right-s.left);let l=2/a*(a-t.y)-1;l*=.5*(s.top-s.bottom);const u=n.origin;return g.clone(e.position,u),g.multiplyByScalar(e.right,c,XHe),g.add(XHe,u,u),g.multiplyByScalar(e.up,l,XHe),g.add(XHe,u,u),g.clone(e.directionWC,n.direction),e._mode!==SH.COLUMBUS_VIEW&&e._mode!==SH.SCENE2D||g.fromElements(n.origin.z,n.origin.x,n.origin.y,n.origin),n}aVe.prototype.getPickRay=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("windowPosition is required.");Object(r["a"])(t)||(t=new Yn);const n=this._scene.canvas;if(n.clientWidth<=0||n.clientHeight<=0)return;const i=this.frustum;return Object(r["a"])(i.aspectRatio)&&Object(r["a"])(i.fov)&&Object(r["a"])(i.near)?YHe(this,e,t):KHe(this,e,t)};const $He=new g,JHe=new g;aVe.prototype.distanceToBoundingSphere=function(e){if(!Object(r["a"])(e))throw new a["a"]("boundingSphere is required.");const t=g.subtract(this.positionWC,e.center,$He),n=g.multiplyByScalar(this.directionWC,g.dot(t,this.directionWC),JHe);return Math.max(0,g.magnitude(n)-e.radius)};const QHe=new Gt;function ZHe(e,t,n,i,o,r){const a=g.clone(t);function s(n){const i=g.lerp(t,a,n.time,new g);e.worldToCameraCoordinatesPoint(i,e.position)}return n.y>i?a.y-=n.y-i:n.y<-i&&(a.y+=-i-n.y),n.z>o?a.z-=n.z-o:n.z<-o&&(a.z+=-o-n.z),{easingFunction:Gv.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:r,update:s}}aVe.prototype.getPixelSize=function(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("boundingSphere is required.");if(!Object(r["a"])(t))throw new a["a"]("drawingBufferWidth is required.");if(!Object(r["a"])(n))throw new a["a"]("drawingBufferHeight is required.");const i=this.distanceToBoundingSphere(e),o=this.frustum.getPixelDimensions(t,n,i,this._scene.pixelRatio,QHe);return Math.max(o.x,o.y)};const eGe=new g,tGe=new g,nGe=new g,iGe=new g;function oGe(e,t){let n=e.position;const i=e.direction,o=e.worldToCameraCoordinatesVector(g.UNIT_X,eGe),r=-g.dot(o,n)/g.dot(o,i),a=g.add(n,g.multiplyByScalar(i,r,tGe),tGe);e.cameraToWorldCoordinatesPoint(a,a),n=e.cameraToWorldCoordinatesPoint(e.position,nGe);const s=Math.tan(.5*e.frustum.fovy),c=e.frustum.aspectRatio*s,l=g.magnitude(g.subtract(n,a,iGe)),u=c*l,h=s*l,d=e._maxCoord.x,f=e._maxCoord.y,p=Math.max(u-d,d),m=Math.max(h-f,f);if(n.z<-p||n.z>p||n.y<-m||n.y>m){const i=a.y<-p||a.y>p,o=a.z<-m||a.z>m;if(i||o)return ZHe(e,n,a,p,m,t)}}aVe.prototype.createCorrectPositionTween=function(e){if(!Object(r["a"])(e))throw new a["a"]("duration is required.");if(this._mode===SH.COLUMBUS_VIEW)return oGe(this,e)};const rGe=new g,aGe={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};function sGe(e,t){const n=e.frustum,i=Math.tan(.5*n.fovy),o=n.aspectRatio*i;return Math.max(t/o,t/i)}function cGe(e,t){let n,i,o=e.frustum;Object(r["a"])(o._offCenterFrustum)&&(o=o._offCenterFrustum);const a=o.right/o.top,s=t*a;return t>s?(n=t,i=n/a):(i=t,n=s),1.5*Math.max(n,i)}aVe.prototype.cancelFlight=function(){Object(r["a"])(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},aVe.prototype.completeFlight=function(){if(Object(r["a"])(this._currentFlight)){this._currentFlight.cancelTween();const e={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};e.destination=aGe.destination,e.orientation.heading=aGe.heading,e.orientation.pitch=aGe.pitch,e.orientation.roll=aGe.roll,this.setView(e),Object(r["a"])(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},aVe.prototype.flyTo=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=e.destination;if(!Object(r["a"])(t))throw new a["a"]("destination is required.");const n=this._mode;if(n===SH.MORPHING)return;this.cancelFlight();const i=t instanceof Fe;i&&(t=this.getRectangleCameraCoordinates(t,rGe));let s=Object(o["a"])(e.orientation,o["a"].EMPTY_OBJECT);if(Object(r["a"])(s.direction)&&(s=qVe(this,t,s,YVe.orientation)),Object(r["a"])(e.duration)&&e.duration<=0){const t=YVe;return t.destination=e.destination,t.orientation.heading=s.heading,t.orientation.pitch=s.pitch,t.orientation.roll=s.roll,t.convert=e.convert,t.endTransform=e.endTransform,this.setView(t),void("function"===typeof e.complete&&e.complete())}const c=this;let l;aGe.destination=t,aGe.heading=s.heading,aGe.pitch=s.pitch,aGe.roll=s.roll,aGe.duration=e.duration,aGe.complete=function(){l===c._currentFlight&&(c._currentFlight=void 0),Object(r["a"])(e.complete)&&e.complete()},aGe.cancel=e.cancel,aGe.endTransform=e.endTransform,aGe.convert=!i&&e.convert,aGe.maximumHeight=e.maximumHeight,aGe.pitchAdjustHeight=e.pitchAdjustHeight,aGe.flyOverLongitude=e.flyOverLongitude,aGe.flyOverLongitudeWeight=e.flyOverLongitudeWeight,aGe.easingFunction=e.easingFunction;const u=this._scene,h=iVe.createTween(u,aGe);if(0===h.duration)return void("function"===typeof h.complete&&h.complete());l=u.tweens.add(h),this._currentFlight=l;let d=this._scene.preloadFlightCamera;this._mode!==SH.SCENE2D&&(Object(r["a"])(d)||(d=aVe.clone(this)),d.setView({destination:t,orientation:s}),this._scene.preloadFlightCullingVolume=d.frustum.computeCullingVolume(d.positionWC,d.directionWC,d.upWC))};const lGe=100;function uGe(e,t,n){n=JT.clone(Object(r["a"])(n)?n:aVe.DEFAULT_OFFSET);const i=e._scene.screenSpaceCameraController.minimumZoomDistance,o=e._scene.screenSpaceCameraController.maximumZoomDistance,a=n.range;if(!Object(r["a"])(a)||0===a){const r=t.radius;0===r?n.range=lGe:e.frustum instanceof IO||e._mode===SH.SCENE2D?n.range=cGe(e,r):n.range=sGe(e,r),n.range=s["a"].clamp(n.range,i,o)}return n}aVe.prototype.viewBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("boundingSphere is required.");if(this._mode===SH.MORPHING)throw new a["a"]("viewBoundingSphere is not supported while morphing.");t=uGe(this,e,t),this.lookAt(e.center,t)};const hGe=new Me,dGe=new g,fGe=new g,pGe=new g,mGe=new g,_Ge=new be,gGe=new Kr,bGe=new ce;aVe.prototype.flyToBoundingSphere=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("boundingSphere is required.");t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=this._mode===SH.SCENE2D||this._mode===SH.COLUMBUS_VIEW;this._setTransform(Me.IDENTITY);const i=uGe(this,e,t.offset);let c;c=n?g.multiplyByScalar(g.UNIT_Z,i.range,dGe):mHe(i.heading,i.pitch,i.range);const l=ka.eastNorthUpToFixedFrame(e.center,k.WGS84,hGe);let u,h;if(Me.multiplyByPoint(l,c,c),!n){if(u=g.subtract(e.center,c,fGe),g.normalize(u,u),h=Me.multiplyByPointAsVector(l,g.UNIT_Z,pGe),1-Math.abs(g.dot(u,h))<s["a"].EPSILON6){const e=Kr.fromAxisAngle(u,i.heading,gGe),t=ce.fromQuaternion(e,bGe);g.fromCartesian4(Me.getColumn(l,1,_Ge),h),ce.multiplyByVector(t,h,h)}const t=g.cross(u,h,mGe);g.cross(t,u,h),g.normalize(h,h)}this.flyTo({destination:c,orientation:{direction:u,up:h},duration:t.duration,complete:t.complete,cancel:t.cancel,endTransform:t.endTransform,maximumHeight:t.maximumHeight,easingFunction:t.easingFunction,flyOverLongitude:t.flyOverLongitude,flyOverLongitudeWeight:t.flyOverLongitudeWeight,pitchAdjustHeight:t.pitchAdjustHeight})};const yGe=new g,vGe=new g,OGe=new g,AGe=new g,wGe=[new g,new g,new g,new g];function TGe(e,t){const n=t.radii,i=e.positionWC,o=g.multiplyComponents(t.oneOverRadii,i,yGe),r=g.magnitude(o),a=g.normalize(o,vGe);let c,l;g.equalsEpsilon(a,g.UNIT_Z,s["a"].EPSILON10)?(c=new g(0,1,0),l=new g(0,0,1)):(c=g.normalize(g.cross(g.UNIT_Z,a,OGe),OGe),l=g.normalize(g.cross(a,c,AGe),AGe));const u=Math.sqrt(g.magnitudeSquared(o)-1),h=g.multiplyByScalar(a,1/r,yGe),d=u/r,f=g.multiplyByScalar(c,d,vGe),p=g.multiplyByScalar(l,d,OGe),m=g.add(h,p,wGe[0]);g.subtract(m,f,m),g.multiplyComponents(n,m,m);const _=g.subtract(h,p,wGe[1]);g.subtract(_,f,_),g.multiplyComponents(n,_,_);const b=g.subtract(h,p,wGe[2]);g.add(b,f,b),g.multiplyComponents(n,b,b);const y=g.add(h,p,wGe[3]);return g.add(y,f,y),g.multiplyComponents(n,y,y),wGe}const CGe=new Gt,EGe=new g,xGe=[new I,new I,new I,new I];function SGe(e,t,n,i,o,a){CGe.x=e,CGe.y=t;const s=i.pickEllipsoid(CGe,o,EGe);return Object(r["a"])(s)?(xGe[n]=o.cartesianToCartographic(s,xGe[n]),1):(xGe[n]=o.cartesianToCartographic(a[n],xGe[n]),0)}aVe.prototype.computeViewRectangle=function(e,t){e=Object(o["a"])(e,k.WGS84);const n=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),i=new Tt(g.ZERO,e.maximumRadius),r=n.computeVisibility(i);if(r===G.OUTSIDE)return;const a=this._scene.canvas,c=a.clientWidth,l=a.clientHeight;let u=0;const h=TGe(this,e);if(u+=SGe(0,0,0,this,e,h),u+=SGe(0,l,1,this,e,h),u+=SGe(c,l,2,this,e,h),u+=SGe(c,0,3,this,e,h),u<2)return Fe.MAX_VALUE;t=Fe.fromCartographicArray(xGe,t);let d=0,f=xGe[3].longitude;for(let o=0;o<4;++o){const e=xGe[o].longitude,t=Math.abs(e-f);t>s["a"].PI?d+=s["a"].TWO_PI-t:d+=t,f=e}return s["a"].equalsEpsilon(Math.abs(d),s["a"].TWO_PI,s["a"].EPSILON9)&&(t.west=-s["a"].PI,t.east=s["a"].PI,xGe[0].latitude>=0?t.north=s["a"].PI_OVER_TWO:t.south=-s["a"].PI_OVER_TWO),t},aVe.prototype.switchToPerspectiveFrustum=function(){if(this._mode===SH.SCENE2D||this.frustum instanceof zO)return;const e=this._scene;this.frustum=new zO,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=s["a"].toRadians(60)},aVe.prototype.switchToOrthographicFrustum=function(){if(this._mode===SH.SCENE2D||this.frustum instanceof IO)return;const e=RVe(this),t=this._scene;this.frustum=new IO,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.width=e},aVe.clone=function(e,t){return Object(r["a"])(t)||(t=new aVe(e._scene)),g.clone(e.position,t.position),g.clone(e.direction,t.direction),g.clone(e.up,t.up),g.clone(e.right,t.right),Me.clone(e._transform,t.transform),t._transformChanged=!0,t.frustum=e.frustum.clone(),t};var IGe=aVe;const DGe={LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4};var PGe=Object.freeze(DGe);function jGe(e,t){let n=e;return Object(r["a"])(t)&&(n+=`+${t}`),n}function RGe(e,t){Gt.clone(e.distance.startPosition,t.distance.startPosition),Gt.clone(e.distance.endPosition,t.distance.endPosition),Gt.clone(e.angleAndHeight.startPosition,t.angleAndHeight.startPosition),Gt.clone(e.angleAndHeight.endPosition,t.angleAndHeight.endPosition)}function LGe(e,t,n){const i=jGe(PGe.PINCH,t),o=e._update,a=e._isDown,s=e._eventStartPosition,c=e._pressTime,l=e._releaseTime;o[i]=!0,a[i]=!1,s[i]=new Gt;let u=e._movement[i];Object(r["a"])(u)||(u=e._movement[i]={}),u.distance={startPosition:new Gt,endPosition:new Gt},u.angleAndHeight={startPosition:new Gt,endPosition:new Gt},u.prevAngle=0,e._eventHandler.setInputAction((function(t){e._buttonsDown++,a[i]=!0,c[i]=new Date,Gt.lerp(t.position1,t.position2,.5,s[i])}),BD.PINCH_START,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),a[i]=!1,l[i]=new Date}),BD.PINCH_END,t),e._eventHandler.setInputAction((function(e){if(a[i]){o[i]?(RGe(e,u),o[i]=!1,u.prevAngle=u.angleAndHeight.startPosition.x):(Gt.clone(e.distance.endPosition,u.distance.endPosition),Gt.clone(e.angleAndHeight.endPosition,u.angleAndHeight.endPosition));let t=u.angleAndHeight.endPosition.x;const r=u.prevAngle,a=2*Math.PI;while(t>=r+Math.PI)t-=a;while(t<r-Math.PI)t+=a;u.angleAndHeight.endPosition.x=-t*n.clientWidth/12,u.angleAndHeight.startPosition.x=-r*n.clientWidth/12}}),BD.PINCH_MOVE,t)}function MGe(e,t){const n=jGe(PGe.WHEEL,t),i=e._update;i[n]=!0;let o=e._movement[n];Object(r["a"])(o)||(o=e._movement[n]={}),o.startPosition=new Gt,o.endPosition=new Gt,e._eventHandler.setInputAction((function(e){const t=15*s["a"].toRadians(e);i[n]?(Gt.clone(Gt.ZERO,o.startPosition),o.endPosition.x=0,o.endPosition.y=t,i[n]=!1):o.endPosition.y=o.endPosition.y+t}),BD.WHEEL,t)}function NGe(e,t,n){const i=jGe(n,t),o=e._isDown,a=e._eventStartPosition,s=e._pressTime,c=e._releaseTime;o[i]=!1,a[i]=new Gt;let l,u,h=e._lastMovement[i];Object(r["a"])(h)||(h=e._lastMovement[i]={startPosition:new Gt,endPosition:new Gt,valid:!1}),n===PGe.LEFT_DRAG?(l=BD.LEFT_DOWN,u=BD.LEFT_UP):n===PGe.RIGHT_DRAG?(l=BD.RIGHT_DOWN,u=BD.RIGHT_UP):n===PGe.MIDDLE_DRAG&&(l=BD.MIDDLE_DOWN,u=BD.MIDDLE_UP),e._eventHandler.setInputAction((function(t){e._buttonsDown++,h.valid=!1,o[i]=!0,s[i]=new Date,Gt.clone(t.position,a[i])}),l,t),e._eventHandler.setInputAction((function(){e._buttonsDown=Math.max(e._buttonsDown-1,0),o[i]=!1,c[i]=new Date}),u,t)}function BGe(e,t){Gt.clone(e.startPosition,t.startPosition),Gt.clone(e.endPosition,t.endPosition)}function FGe(e,t){const n=e._update,i=e._movement,o=e._lastMovement,a=e._isDown;for(const s in PGe)if(PGe.hasOwnProperty(s)){const i=PGe[s];if(Object(r["a"])(i)){const o=jGe(i,t);n[o]=!0,Object(r["a"])(e._lastMovement[o])||(e._lastMovement[o]={startPosition:new Gt,endPosition:new Gt,valid:!1}),Object(r["a"])(e._movement[o])||(e._movement[o]={startPosition:new Gt,endPosition:new Gt})}}e._eventHandler.setInputAction((function(s){for(const e in PGe)if(PGe.hasOwnProperty(e)){const c=PGe[e];if(Object(r["a"])(c)){const e=jGe(c,t);a[e]&&(n[e]?(BGe(i[e],o[e]),o[e].valid=!0,BGe(s,i[e]),n[e]=!1):Gt.clone(s.endPosition,i[e].endPosition))}}Gt.clone(s.endPosition,e._currentMousePosition)}),BD.MOUSE_MOVE,t)}function zGe(e){if(!Object(r["a"])(e))throw new a["a"]("canvas is required.");this._eventHandler=new OP(e),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new Gt,MGe(this,void 0),LGe(this,void 0,e),NGe(this,void 0,PGe.LEFT_DRAG),NGe(this,void 0,PGe.RIGHT_DRAG),NGe(this,void 0,PGe.MIDDLE_DRAG),FGe(this,void 0);for(const t in lE)if(lE.hasOwnProperty(t)){const n=lE[t];Object(r["a"])(n)&&(MGe(this,n),LGe(this,n,e),NGe(this,n,PGe.LEFT_DRAG),NGe(this,n,PGe.RIGHT_DRAG),NGe(this,n,PGe.MIDDLE_DRAG),FGe(this,n))}}Object.defineProperties(zGe.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){const e=!this._update[jGe(PGe.WHEEL)]||!this._update[jGe(PGe.WHEEL,lE.SHIFT)]||!this._update[jGe(PGe.WHEEL,lE.CTRL)]||!this._update[jGe(PGe.WHEEL,lE.ALT)];return this._buttonsDown>0||e}}}),zGe.prototype.isMoving=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t);return!this._update[n]},zGe.prototype.getMovement=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t),i=this._movement[n];return i},zGe.prototype.getLastMovement=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t),i=this._lastMovement[n];if(i.valid)return i},zGe.prototype.isButtonDown=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t);return this._isDown[n]},zGe.prototype.getStartMousePosition=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");if(e===PGe.WHEEL)return this._currentMousePosition;const n=jGe(e,t);return this._eventStartPosition[n]},zGe.prototype.getButtonPressTime=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t);return this._pressTime[n]},zGe.prototype.getButtonReleaseTime=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("type is required.");const n=jGe(e,t);return this._releaseTime[n]},zGe.prototype.reset=function(){for(const e in this._update)this._update.hasOwnProperty(e)&&(this._update[e]=!0)},zGe.prototype.isDestroyed=function(){return!1},zGe.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),Wc(this)};var kGe=zGe;function UGe(){this.featurePropertiesDirty=!1}Object.defineProperties(UGe.prototype,{featuresLength:{get:function(){a["a"].throwInstantiationError()}},pointsLength:{get:function(){a["a"].throwInstantiationError()}},trianglesLength:{get:function(){a["a"].throwInstantiationError()}},geometryByteLength:{get:function(){a["a"].throwInstantiationError()}},texturesByteLength:{get:function(){a["a"].throwInstantiationError()}},batchTableByteLength:{get:function(){a["a"].throwInstantiationError()}},innerContents:{get:function(){a["a"].throwInstantiationError()}},readyPromise:{get:function(){a["a"].throwInstantiationError()}},tileset:{get:function(){a["a"].throwInstantiationError()}},tile:{get:function(){a["a"].throwInstantiationError()}},url:{get:function(){a["a"].throwInstantiationError()}},batchTable:{get:function(){a["a"].throwInstantiationError()}},metadata:{get:function(){a["a"].throwInstantiationError()},set:function(e){a["a"].throwInstantiationError()}},group:{get:function(){a["a"].throwInstantiationError()},set:function(e){a["a"].throwInstantiationError()}}}),UGe.prototype.hasProperty=function(e,t){a["a"].throwInstantiationError()},UGe.prototype.getFeature=function(e){a["a"].throwInstantiationError()},UGe.prototype.applyDebugSettings=function(e,t){a["a"].throwInstantiationError()},UGe.prototype.applyStyle=function(e){a["a"].throwInstantiationError()},UGe.prototype.update=function(e,t){a["a"].throwInstantiationError()},UGe.prototype.isDestroyed=function(){a["a"].throwInstantiationError()},UGe.prototype.destroy=function(){a["a"].throwInstantiationError()};var VGe=UGe;function HGe(e){i["a"].typeOf.object("options",e),i["a"].typeOf.number("options.pass",e.pass),this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}var GGe=HGe;function WGe(e,t){this._conditionsExpression=Object(RL["a"])(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,YGe(this,t)}function qGe(e,t){this.condition=e,this.expression=t}function YGe(e,t){const n=[],i=e._conditions;if(!Object(r["a"])(i))return;const o=i.length;for(let r=0;r<o;++r){const e=i[r],o=String(e[0]),a=String(e[1]);n.push(new qGe(new $$(o,t),new $$(a,t)))}e._runtimeConditions=n}Object.defineProperties(WGe.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),WGe.prototype.evaluate=function(e,t){const n=this._runtimeConditions;if(!Object(r["a"])(n))return;const i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.condition.evaluate(e))return i.expression.evaluate(e,t)}},WGe.prototype.evaluateColor=function(e,t){const n=this._runtimeConditions;if(!Object(r["a"])(n))return;const i=n.length;for(let o=0;o<i;++o){const i=n[o];if(i.condition.evaluate(e))return i.expression.evaluateColor(e,t)}},WGe.prototype.getShaderFunction=function(e,t,n,i){const o=this._runtimeConditions;if(!Object(r["a"])(o)||0===o.length)return;let a="";const s=o.length;for(let r=0;r<s;++r){const e=o[r],i=e.condition.getShaderExpression(t,n),s=e.expression.getShaderExpression(t,n);a+=`    ${0===r?"if":"else if"} (${i})\n`+"    {\n"+`        return ${s};\n`+"    }\n"}return a=`${i} ${e}\n`+`{\n${a}    return ${i}(1.0);\n`+"}\n",a},WGe.prototype.getVariables=function(){let e=[];const t=this._runtimeConditions;if(!Object(r["a"])(t)||0===t.length)return e;const n=t.length;for(let i=0;i<n;++i){const n=t[i];e.push.apply(e,n.condition.getVariables()),e.push.apply(e,n.expression.getVariables())}return e=e.filter((function(e,t,n){return n.indexOf(e)===t})),e};var XGe=WGe;function KGe(e){this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,$Ge(this,e)}function $Ge(e,t){t=Object(o["a"])(Object(RL["a"])(t,!0),e._style),e._style=t,e.show=t.show,e.color=t.color,e.pointSize=t.pointSize,e.pointOutlineColor=t.pointOutlineColor,e.pointOutlineWidth=t.pointOutlineWidth,e.labelColor=t.labelColor,e.labelOutlineColor=t.labelOutlineColor,e.labelOutlineWidth=t.labelOutlineWidth,e.labelStyle=t.labelStyle,e.font=t.font,e.labelText=t.labelText,e.backgroundColor=t.backgroundColor,e.backgroundPadding=t.backgroundPadding,e.backgroundEnabled=t.backgroundEnabled,e.scaleByDistance=t.scaleByDistance,e.translucencyByDistance=t.translucencyByDistance,e.distanceDisplayCondition=t.distanceDisplayCondition,e.heightOffset=t.heightOffset,e.anchorLineEnabled=t.anchorLineEnabled,e.anchorLineColor=t.anchorLineColor,e.image=t.image,e.disableDepthTestDistance=t.disableDepthTestDistance,e.horizontalOrigin=t.horizontalOrigin,e.verticalOrigin=t.verticalOrigin,e.labelHorizontalOrigin=t.labelHorizontalOrigin,e.labelVerticalOrigin=t.labelVerticalOrigin;const n={};if(Object(r["a"])(t.meta)){const e=t.defines,i=Object(o["a"])(t.meta,o["a"].EMPTY_OBJECT);for(const t in i)i.hasOwnProperty(t)&&(n[t]=new $$(i[t],e))}e._meta=n,e._ready=!0}function JGe(e,t){const n=Object(o["a"])(e._style,o["a"].EMPTY_OBJECT).defines;if(Object(r["a"])(t))return"boolean"===typeof t||"number"===typeof t?new $$(String(t)):"string"===typeof t?new $$(t,n):Object(r["a"])(t.conditions)?new XGe(t,n):t}function QGe(e){if(Object(r["a"])(e))return Object(r["a"])(e.expression)?e.expression:Object(r["a"])(e.conditionsExpression)?Object(RL["a"])(e.conditionsExpression,!0):e}Object.defineProperties(KGe.prototype,{style:{get:function(){return this._style}},show:{get:function(){return this._show},set:function(e){this._show=JGe(this,e),this._style.show=QGe(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){return this._color},set:function(e){this._color=JGe(this,e),this._style.color=QGe(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=JGe(this,e),this._style.pointSize=QGe(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=JGe(this,e),this._style.pointOutlineColor=QGe(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=JGe(this,e),this._style.pointOutlineWidth=QGe(this._pointOutlineWidth)}},labelColor:{get:function(){return this._labelColor},set:function(e){this._labelColor=JGe(this,e),this._style.labelColor=QGe(this._labelColor)}},labelOutlineColor:{get:function(){return this._labelOutlineColor},set:function(e){this._labelOutlineColor=JGe(this,e),this._style.labelOutlineColor=QGe(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){return this._labelOutlineWidth},set:function(e){this._labelOutlineWidth=JGe(this,e),this._style.labelOutlineWidth=QGe(this._labelOutlineWidth)}},font:{get:function(){return this._font},set:function(e){this._font=JGe(this,e),this._style.font=QGe(this._font)}},labelStyle:{get:function(){return this._labelStyle},set:function(e){this._labelStyle=JGe(this,e),this._style.labelStyle=QGe(this._labelStyle)}},labelText:{get:function(){return this._labelText},set:function(e){this._labelText=JGe(this,e),this._style.labelText=QGe(this._labelText)}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=JGe(this,e),this._style.backgroundColor=QGe(this._backgroundColor)}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){this._backgroundPadding=JGe(this,e),this._style.backgroundPadding=QGe(this._backgroundPadding)}},backgroundEnabled:{get:function(){return this._backgroundEnabled},set:function(e){this._backgroundEnabled=JGe(this,e),this._style.backgroundEnabled=QGe(this._backgroundEnabled)}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){this._scaleByDistance=JGe(this,e),this._style.scaleByDistance=QGe(this._scaleByDistance)}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){this._translucencyByDistance=JGe(this,e),this._style.translucencyByDistance=QGe(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=JGe(this,e),this._style.distanceDisplayCondition=QGe(this._distanceDisplayCondition)}},heightOffset:{get:function(){return this._heightOffset},set:function(e){this._heightOffset=JGe(this,e),this._style.heightOffset=QGe(this._heightOffset)}},anchorLineEnabled:{get:function(){return this._anchorLineEnabled},set:function(e){this._anchorLineEnabled=JGe(this,e),this._style.anchorLineEnabled=QGe(this._anchorLineEnabled)}},anchorLineColor:{get:function(){return this._anchorLineColor},set:function(e){this._anchorLineColor=JGe(this,e),this._style.anchorLineColor=QGe(this._anchorLineColor)}},image:{get:function(){return this._image},set:function(e){this._image=JGe(this,e),this._style.image=QGe(this._image)}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance=JGe(this,e),this._style.disableDepthTestDistance=QGe(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin=JGe(this,e),this._style.horizontalOrigin=QGe(this._horizontalOrigin)}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin=JGe(this,e),this._style.verticalOrigin=QGe(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){return this._labelHorizontalOrigin},set:function(e){this._labelHorizontalOrigin=JGe(this,e),this._style.labelHorizontalOrigin=QGe(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){return this._labelVerticalOrigin},set:function(e){this._labelVerticalOrigin=JGe(this,e),this._style.labelVerticalOrigin=QGe(this._labelVerticalOrigin)}},meta:{get:function(){return this._meta},set:function(e){this._meta=e}}}),KGe.fromUrl=function(e){if(!Object(r["a"])(e))throw new a["a"]("url is required");const t=Et["a"].createIfNeeded(e);return t.fetchJson(e).then((function(e){return new KGe(e)}))},KGe.prototype.getColorShaderFunction=function(e,t,n){return this._colorShaderFunctionReady?(n.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,Object(r["a"])(this.color)&&Object(r["a"])(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(e,t,n,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=n.translucent,this._colorShaderFunction)},KGe.prototype.getShowShaderFunction=function(e,t,n){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,Object(r["a"])(this.show)&&Object(r["a"])(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(e,t,n,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},KGe.prototype.getPointSizeShaderFunction=function(e,t,n){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(e,t,n,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},KGe.prototype.getVariables=function(){let e=[];return Object(r["a"])(this.color)&&Object(r["a"])(this.color.getVariables)&&e.push.apply(e,this.color.getVariables()),Object(r["a"])(this.show)&&Object(r["a"])(this.show.getVariables)&&e.push.apply(e,this.show.getVariables()),Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getVariables)&&e.push.apply(e,this.pointSize.getVariables()),e=e.filter((function(e,t,n){return n.indexOf(e)===t})),e};var ZGe=KGe;function eWe(e){e=Object(o["a"])(e,1),i["a"].typeOf.number.greaterThan("radius",e,0),this._radius=Object(o["a"])(e,1)}Object.defineProperties(eWe.prototype,{radius:{get:function(){return this._radius},set:function(e){i["a"].typeOf.number.greaterThan("value",e,0),this._radius=e}}}),eWe.prototype.emit=function(e){const t=s["a"].randomBetween(0,s["a"].TWO_PI),n=s["a"].randomBetween(0,this._radius),i=n*Math.cos(t),o=n*Math.sin(t),r=0;e.position=g.fromElements(i,o,r,e.position),e.velocity=g.clone(g.UNIT_Z,e.velocity)};var tWe=eWe;const nWe={CUMULUS:0,validate:function(e){return e===nWe.CUMULUS}};var iWe=Object.freeze(nWe),oWe="uniform sampler2D u_noiseTexture;\nuniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nvarying vec2 v_offset;\nvarying vec3 v_maximumSize;\nvarying vec4 v_color;\nvarying float v_slice;\nvarying float v_brightness;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nfloat textureSliceWidth = u_noiseTextureDimensions.x;\nfloat noiseTextureRows = u_noiseTextureDimensions.y;\nfloat inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n\nfloat textureSliceWidthSquared = textureSliceWidth * textureSliceWidth;\nvec2 inverseNoiseTextureDimensions = vec2(noiseTextureRows / textureSliceWidthSquared,\n                                          inverseNoiseTextureRows / textureSliceWidth);\n\nvec2 voxelToUV(vec3 voxelIndex) {\n    vec3 wrappedIndex = wrapVec(voxelIndex, textureSliceWidth);\n    float column = mod(wrappedIndex.z, textureSliceWidth * inverseNoiseTextureRows);\n    float row = floor(wrappedIndex.z / textureSliceWidth * noiseTextureRows);\n\n    float xPixelCoord = wrappedIndex.x + column * textureSliceWidth;\n    float yPixelCoord = wrappedIndex.y + row * textureSliceWidth;\n    return vec2(xPixelCoord, yPixelCoord) * inverseNoiseTextureDimensions;\n}\n\n// Interpolate a voxel with its neighbor (along the positive X-axis)\nvec4 lerpSamplesX(vec3 voxelIndex, float x) {\n    vec2 uv0 = voxelToUV(voxelIndex);\n    vec2 uv1 = voxelToUV(voxelIndex + vec3(1.0, 0.0, 0.0));\n    vec4 sample0 = texture2D(u_noiseTexture, uv0);\n    vec4 sample1 = texture2D(u_noiseTexture, uv1);\n    return mix(sample0, sample1, x);\n}\n\nvec4 sampleNoiseTexture(vec3 position) {\n    vec3 recenteredPos = position + vec3(textureSliceWidth / 2.0);\n    vec3 lerpValue = fract(recenteredPos);\n    vec3 voxelIndex = floor(recenteredPos);\n\n    vec4 xLerp00 = lerpSamplesX(voxelIndex, lerpValue.x);\n    vec4 xLerp01 = lerpSamplesX(voxelIndex + vec3(0.0, 0.0, 1.0), lerpValue.x);\n    vec4 xLerp10 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 0.0), lerpValue.x);\n    vec4 xLerp11 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 1.0), lerpValue.x);\n\n    vec4 yLerp0 = mix(xLerp00, xLerp10, lerpValue.y);\n    vec4 yLerp1 = mix(xLerp01, xLerp11, lerpValue.y);\n    return mix(yLerp0, yLerp1, lerpValue.z);\n}\n\n// Intersection with a unit sphere with radius 0.5 at center (0, 0, 0).\nbool intersectSphere(vec3 origin, vec3 dir, float slice,\n                     out vec3 point, out vec3 normal) {\n    float A = dot(dir, dir);\n    float B = dot(origin, dir);\n    float C = dot(origin, origin) - 0.25;\n    float discriminant = (B * B) - (A * C);\n    if(discriminant < 0.0) {\n        return false;\n    }\n    float root = sqrt(discriminant);\n    float t = (-B - root) / A;\n    if(t < 0.0) {\n        t = (-B + root) / A;\n    }\n    point = origin + t * dir;\n\n    if(slice >= 0.0) {\n        point.z = (slice / 2.0) - 0.5;\n        if(length(point) > 0.5) {\n            return false;\n        }\n    }\n\n    normal = normalize(point);\n    point -= czm_epsilon2 * normal;\n    return true;\n}\n\n// Transforms the ray origin and direction into unit sphere space,\n// then transforms the result back into the ellipsoid's space.\nbool intersectEllipsoid(vec3 origin, vec3 dir, vec3 center, vec3 scale, float slice,\n                        out vec3 point, out vec3 normal) {\n    if(scale.x <= 0.01 || scale.y < 0.01 || scale.z < 0.01) {\n        return false;\n    }\n\n    vec3 o = (origin - center) / scale;\n    vec3 d = dir / scale;\n    vec3 p, n;\n    bool intersected = intersectSphere(o, d, slice, p, n);\n    if(intersected) {\n        point = (p * scale) + center;\n        normal = n;\n    }\n    return intersected;\n}\n\n// Assume that if phase shift is being called for octave i,\n// the frequency is of i - 1. This saves us from doing extra\n// division / multiplication operations.\nvec2 phaseShift2D(vec2 p, vec2 freq) {\n    return (czm_pi / 2.0) * sin(freq.yx * p.yx);\n}\n\nvec2 phaseShift3D(vec3 p, vec2 freq) {\n    return phaseShift2D(p.xy, freq) + czm_pi * vec2(sin(freq.x * p.z));\n}\n\n// The cloud texture function derived from Gardner's 1985 paper,\n// \"Visual Simulation of Clouds.\"\n// https://www.cs.drexel.edu/~david/Classes/Papers/p297-gardner.pdf\nconst float T0    = 0.6;  // contrast of the texture pattern\nconst float k     = 0.1;  // computed to produce a maximum value of 1\nconst float C0    = 0.8;  // coefficient\nconst float FX0   = 0.6;  // frequency X\nconst float FY0   = 0.6;  // frequency Y\nconst int octaves = 5;\n\nfloat T(vec3 point) {\n    vec2 sum = vec2(0.0);\n    float Ci = C0;\n    vec2 FXY = vec2(FX0, FY0);\n    vec2 PXY = vec2(0.0);\n    for(int i = 1; i <= octaves; i++) {\n        PXY = phaseShift3D(point, FXY);\n        Ci *= 0.707;\n        FXY *= 2.0;\n        vec2 sinTerm = sin(FXY * point.xy + PXY);\n        sum += Ci * sinTerm + vec2(T0);\n    }\n    return k * sum.x * sum.y;\n}\n\nconst float a = 0.5;  // fraction of surface reflection due to ambient or scattered light,\nconst float t = 0.4;  // fraction of texture shading\nconst float s = 0.25; // fraction of specular reflection\n\nfloat I(float Id, float Is, float It) {\n    return (1.0 - a) * ((1.0 - t) * ((1.0 - s) * Id + s * Is) + t * It) + a;\n}\n\nconst vec3 lightDir = normalize(vec3(0.2, -1.0, 0.7));\n\nvec4 drawCloud(vec3 rayOrigin, vec3 rayDir, vec3 cloudCenter, vec3 cloudScale, float cloudSlice,\n               float brightness) {\n    vec3 cloudPoint, cloudNormal;\n    if(!intersectEllipsoid(rayOrigin, rayDir, cloudCenter, cloudScale, cloudSlice,\n                            cloudPoint, cloudNormal)) {\n        return vec4(0.0);\n    }\n\n    float Id = clamp(dot(cloudNormal, -lightDir), 0.0, 1.0);  // diffuse reflection\n    float Is = max(pow(dot(-lightDir, -rayDir), 2.0), 0.0);   // specular reflection\n    float It = T(cloudPoint);                                 // texture function\n    float intensity = I(Id, Is, It);\n    vec3 color = vec3(intensity * clamp(brightness, 0.1, 1.0));\n\n    vec4 noise = sampleNoiseTexture(u_noiseDetail * cloudPoint);\n    float W = noise.x;\n    float W2 = noise.y;\n    float W3 = noise.z;\n\n    // The dot product between the cloud's normal and the ray's direction is greatest\n    // in the center of the ellipsoid's surface. It decreases towards the edge.\n    // Thus, it is used to blur the areas leading to the edges of the ellipsoid,\n    // so that no harsh lines appear.\n\n    // The first (and biggest) layer of worley noise is then subtracted from this.\n    // The final result is scaled up so that the base cloud is not too translucent.\n    float ndDot = clamp(dot(cloudNormal, -rayDir), 0.0, 1.0);\n    float TR = pow(ndDot, 3.0) - W; // translucency\n    TR *= 1.3;\n\n    // Subtracting the second and third layers of worley noise is more complicated.\n    // If these layers of noise were simply subtracted from the current translucency,\n    // the shape derived from the first layer of noise would be completely deleted.\n    // The erosion of this noise should thus be constricted to the edges of the cloud.\n    // However, because the edges of the ellipsoid were already blurred away, mapping\n    // the noise to (1.0 - ndDot) will have no impact on most of the cloud's appearance.\n    // The value of (0.5 - ndDot) provides the best compromise.\n    float minusDot = 0.5 - ndDot;\n\n    // Even with the previous calculation, subtracting the second layer of wnoise\n    // erode too much of the cloud. The addition of it, however, will detailed\n    // volume to the cloud. As long as the noise is only added and not subtracted,\n    // the results are aesthetically pleasing.\n\n    // The minusDot product is mapped in a way that it is larger at the edges of\n    // the ellipsoid, so a subtraction and min operation are used instead of\n    // an addition and max one.\n    TR -= min(minusDot * W2, 0.0);\n\n    // The third level of worley noise is subtracted from the result, with some\n    // modifications. First, a scalar is added to minusDot so that the noise\n    // starts affecting the shape farther away from the center of the ellipsoid's\n    // surface. Then, it is scaled down so its impact is not too intense.\n    TR -= 0.8 * (minusDot + 0.25) * W3;\n\n    // The texture function's shading does not correlate with the shape of the cloud\n    // produced by the layers of noise, so an extra shading scalar is calculated.\n    // The darkest areas of the cloud are assigned to be where the noise erodes\n    // the cloud the most. This is then interpolated based on the translucency\n    // and the diffuse shading term of that point in the cloud.\n    float shading = mix(1.0 - 0.8 * W * W, 1.0, Id * TR);\n\n    // To avoid values that are too dark, this scalar is increased by a small amount\n    // and clamped so it never goes to zero.\n    shading = clamp(shading + 0.2, 0.3, 1.0);\n\n    // Finally, the contrast of the cloud's color is increased.\n    vec3 finalColor = mix(vec3(0.5), shading * color, 1.15);\n    return vec4(finalColor, clamp(TR, 0.0, 1.0)) * v_color;\n}\n\nvoid main() {\n#ifdef DEBUG_BILLBOARDS\n    gl_FragColor = vec4(0.0, 0.5, 0.5, 1.0);\n#endif\n    // To avoid calculations with high values,\n    // we raycast from an arbitrarily smaller space.\n    vec2 coordinate = v_maximumSize.xy * v_offset;\n\n    vec3 ellipsoidScale = 0.82 * v_maximumSize;\n    vec3 ellipsoidCenter = vec3(0.0);\n\n    float zOffset = max(ellipsoidScale.z - 10.0, 0.0);\n    vec3 eye = vec3(0, 0, -10.0 - zOffset);\n    vec3 rayDir = normalize(vec3(coordinate, 1.0) - eye);\n    vec3 rayOrigin = eye;\n#ifdef DEBUG_ELLIPSOIDS\n    vec3 point, normal;\n    if(intersectEllipsoid(rayOrigin, rayDir, ellipsoidCenter, ellipsoidScale, v_slice,\n                          point, normal)) {\n        gl_FragColor = v_brightness * v_color;\n    }\n#else\n#ifndef DEBUG_BILLBOARDS\n    vec4 cloud = drawCloud(rayOrigin, rayDir,\n                           ellipsoidCenter, ellipsoidScale, v_slice, v_brightness);\n    if(cloud.w < 0.01) {\n        discard;\n    }\n    gl_FragColor = cloud;\n#endif\n#endif\n}\n",rWe="#ifdef INSTANCED\nattribute vec2 direction;\n#endif\nattribute vec4 positionHighAndScaleX;\nattribute vec4 positionLowAndScaleY;\nattribute vec4 packedAttribute0;\nattribute vec4 packedAttribute1;\nattribute vec4 color;\n\nvarying vec2 v_offset;\nvarying vec3 v_maximumSize;\nvarying vec4 v_color;\nvarying float v_slice;\nvarying float v_brightness;\n\nvoid main() {\n    // Unpack attributes.\n    vec3 positionHigh = positionHighAndScaleX.xyz;\n    vec3 positionLow = positionLowAndScaleY.xyz;\n    vec2 scale = vec2(positionHighAndScaleX.w, positionLowAndScaleY.w);\n\n    float show = packedAttribute0.x;\n    float brightness = packedAttribute0.y;\n    vec2 coordinates = packedAttribute0.wz;\n    vec3 maximumSize = packedAttribute1.xyz;\n    float slice = packedAttribute1.w;\n\n#ifdef INSTANCED\n    vec2 dir = direction;\n#else\n    vec2 dir = coordinates;\n#endif\n\n    vec2 offset = dir - vec2(0.5, 0.5);\n    vec2 scaledOffset = scale * offset;\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n    positionEC.xy += scaledOffset;\n    \n    positionEC.xyz *= show;\n    gl_Position = czm_projection * positionEC;\n\n    v_offset = offset;\n    v_maximumSize = maximumSize;\n    v_color = color;\n    v_slice = slice;\n    v_brightness = brightness;\n}\n",aWe="uniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nuniform vec3 u_noiseOffset;\nvarying vec2 v_position;\n\nfloat textureSliceWidth = u_noiseTextureDimensions.x;\nfloat inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nvec3 random3(vec3 p) {\n    float dot1 = dot(p, vec3(127.1, 311.7, 932.8));\n    float dot2 = dot(p, vec3(269.5, 183.3, 421.4));\n    return fract(vec3(sin(dot1 - dot2), cos(dot1 * dot2), dot1 * dot2));\n}\n\n// Frequency corresponds to cell size.\n// The higher the frequency, the smaller the cell size.\nvec3 getWorleyCellPoint(vec3 centerCell, vec3 offset, float freq) {\n    vec3 cell = centerCell + offset;\n    cell = wrapVec(cell, textureSliceWidth / u_noiseDetail);\n    cell += floor(u_noiseOffset / u_noiseDetail);\n    vec3 p = offset + random3(cell);\n    return p;\n}\n\nfloat worleyNoise(vec3 p, float freq) {\n    vec3 centerCell = floor(p * freq);\n    vec3 pointInCell = fract(p * freq);\n    float shortestDistance = 1000.0;\n\n    for(float z = -1.0; z <= 1.0; z++) {\n        for(float y = -1.0; y <= 1.0; y++) {\n            for(float x = -1.0; x <= 1.0; x++) {\n                vec3 offset = vec3(x, y, z);\n                vec3 point = getWorleyCellPoint(centerCell, offset, freq);\n\n                float distance = length(pointInCell - point);\n                if(distance < shortestDistance) {\n                    shortestDistance = distance;\n                }\n            }\n        }\n    }\n\n    return shortestDistance;\n}\n\nconst float MAX_FBM_ITERATIONS = 10.0;\n\nfloat worleyFBMNoise(vec3 p, float octaves, float scale) {\n    float noise = 0.0;\n    float freq = 1.0;\n    float persistence = 0.625;\n    for(float i = 0.0; i < MAX_FBM_ITERATIONS; i++) {\n        if(i >= octaves) {\n            break;\n        }\n\n        noise += worleyNoise(p * scale, freq * scale) * persistence;\n        persistence *= 0.5;\n        freq *= 2.0;\n    }\n    return noise;\n}\n\nvoid main() {\n    float x = mod(v_position.x, textureSliceWidth);\n    float y = mod(v_position.y, textureSliceWidth);\n    float sliceRow = floor(v_position.y / textureSliceWidth);\n    float z = floor(v_position.x / textureSliceWidth) + sliceRow * inverseNoiseTextureRows * textureSliceWidth;\n\n    vec3 position = vec3(x, y, z);\n    position /= u_noiseDetail;\n    float worley0 = clamp(worleyFBMNoise(position, 3.0, 1.0), 0.0, 1.0);\n    float worley1 = clamp(worleyFBMNoise(position, 3.0, 2.0), 0.0, 1.0);\n    float worley2 = clamp(worleyFBMNoise(position, 3.0, 3.0), 0.0, 1.0);\n    gl_FragColor = vec4(worley0, worley1, worley2, 1.0);\n}\n",sWe="uniform vec3 u_noiseTextureDimensions;\nattribute vec2 position;\n\nvarying vec2 v_position;\n\nvoid main()\n{\n    gl_Position = vec4(position, 0.1, 1.0);\n\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float noiseTextureRows = u_noiseTextureDimensions.y;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n    vec2 transformedPos = (position * 0.5) + vec2(0.5);\n    transformedPos *= textureSliceWidth;\n    transformedPos.x *= textureSliceWidth * inverseNoiseTextureRows;\n    transformedPos.y *= noiseTextureRows;\n    v_position = transformedPos;\n}\n";function cWe(e,t){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._show=Object(o["a"])(e.show,!0),this._position=g.clone(Object(o["a"])(e.position,g.ZERO)),!Object(r["a"])(e.scale)&&Object(r["a"])(e.maximumSize))this._maximumSize=g.clone(e.maximumSize),this._scale=new Gt(this._maximumSize.x,this._maximumSize.y);else{this._scale=Gt.clone(Object(o["a"])(e.scale,new Gt(20,12)));const t=new g(this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=g.clone(Object(o["a"])(e.maximumSize,t))}this._slice=Object(o["a"])(e.slice,-1),this._color=Dm.clone(Object(o["a"])(e.color,Dm.WHITE)),this._brightness=Object(o["a"])(e.brightness,1),this._cloudCollection=t,this._index=-1}const lWe=cWe.SHOW_INDEX=0,uWe=cWe.POSITION_INDEX=1,hWe=cWe.SCALE_INDEX=2,dWe=cWe.MAXIMUM_SIZE_INDEX=3,fWe=cWe.SLICE_INDEX=4,pWe=cWe.BRIGHTNESS_INDEX=5,mWe=cWe.COLOR_INDEX=6;function _We(e,t){const n=e._cloudCollection;Object(r["a"])(n)&&(n._updateCloud(e,t),e._dirty=!0)}cWe.NUMBER_OF_PROPERTIES=7,Object.defineProperties(cWe.prototype,{show:{get:function(){return this._show},set:function(e){i["a"].typeOf.bool("value",e),this._show!==e&&(this._show=e,_We(this,lWe))}},position:{get:function(){return this._position},set:function(e){i["a"].typeOf.object("value",e);const t=this._position;g.equals(t,e)||(g.clone(e,t),_We(this,uWe))}},scale:{get:function(){return this._scale},set:function(e){i["a"].typeOf.object("value",e);const t=this._scale;Gt.equals(t,e)||(Gt.clone(e,t),_We(this,hWe))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){i["a"].typeOf.object("value",e);const t=this._maximumSize;g.equals(t,e)||(g.clone(e,t),_We(this,dWe))}},color:{get:function(){return this._color},set:function(e){i["a"].typeOf.object("value",e);const t=this._color;Dm.equals(t,e)||(Dm.clone(e,t),_We(this,mWe))}},slice:{get:function(){return this._slice},set:function(e){i["a"].typeOf.number("value",e);const t=this._slice;t!==e&&(this._slice=e,_We(this,fWe))}},brightness:{get:function(){return this._brightness},set:function(e){i["a"].typeOf.number("value",e);const t=this._brightness;t!==e&&(this._brightness=e,_We(this,pWe))}}}),cWe.prototype._destroy=function(){this._cloudCollection=void 0};var gWe=cWe;let bWe;const yWe=new g,vWe={positionHighAndScaleX:0,positionLowAndScaleY:1,packedAttribute0:2,packedAttribute1:3,color:4},OWe={direction:0,positionHighAndScaleX:1,positionLowAndScaleY:2,packedAttribute0:3,packedAttribute1:4,color:5},AWe=gWe.SHOW_INDEX,wWe=gWe.POSITION_INDEX,TWe=gWe.SCALE_INDEX,CWe=gWe.MAXIMUM_SIZE_INDEX,EWe=gWe.SLICE_INDEX,xWe=gWe.BRIGHTNESS_INDEX,SWe=gWe.NUMBER_OF_PROPERTIES,IWe=gWe.COLOR_INDEX;function DWe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(SWe),this._noiseTexture=void 0,this._textureSliceWidth=128,this._noiseTextureRows=4,this.noiseDetail=Object(o["a"])(e.noiseDetail,16),this.noiseOffset=g.clone(Object(o["a"])(e.noiseOffset,g.ZERO)),this._loading=!1,this._ready=!1;const t=this;this._uniforms={u_noiseTexture:function(){return t._noiseTexture},u_noiseTextureDimensions:PWe(t),u_noiseDetail:function(){return t.noiseDetail}},this._vaNoise=void 0,this._spNoise=void 0,this._spCreated=!1,this._sp=void 0,this._rs=void 0,this.show=Object(o["a"])(e.show,!0),this._colorCommands=[],this.debugBillboards=Object(o["a"])(e.debugBillboards,!1),this._compiledDebugBillboards=!1,this.debugEllipsoids=Object(o["a"])(e.debugEllipsoids,!1),this._compiledDebugEllipsoids=!1}function PWe(e){return function(){return yWe.x=e._textureSliceWidth,yWe.y=e._noiseTextureRows,yWe.z=1/e._noiseTextureRows,yWe}}function jWe(e){const t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}function RWe(e){if(e._cloudsRemoved){e._cloudsRemoved=!1;const t=[],n=e._clouds,i=n.length;for(let e=0,o=0;e<i;++e){const i=n[e];Object(r["a"])(i)&&(n._index=o++,t.push(i))}e._clouds=t}}Object.defineProperties(DWe.prototype,{length:{get:function(){return RWe(this),this._clouds.length}}}),DWe.prototype.add=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.cloudType,iWe.CUMULUS);if(!iWe.validate(t))throw new a["a"]("invalid cloud type");let n;return t===iWe.CUMULUS&&(n=new gWe(e,this),n._index=this._clouds.length,this._clouds.push(n),this._createVertexArray=!0),n},DWe.prototype.remove=function(e){return!!this.contains(e)&&(this._clouds[e._index]=void 0,this._cloudsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},DWe.prototype.removeAll=function(){jWe(this._clouds),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!0},DWe.prototype._updateCloud=function(e,t){e._dirty||(this._cloudsToUpdate[this._cloudsToUpdateIndex++]=e),++this._propertiesChanged[t]},DWe.prototype.contains=function(e){return Object(r["a"])(e)&&e._cloudCollection===this},DWe.prototype.get=function(e){return i["a"].typeOf.number("index",e),RWe(this),this._clouds[e]};const LWe=new Float32Array([-1,-1,1,-1,1,1,-1,1]),MWe=new Uint16Array([0,1,2,0,2,3]);function NWe(e){const t=NV.createVertexBuffer({context:e,typedArray:LWe,usage:LV.STATIC_DRAW}),n=NV.createIndexBuffer({context:e,typedArray:MWe,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),i=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:Ks.FLOAT}];return new WV({context:e,attributes:i,indexBuffer:n})}let BWe;function FWe(e){const t=16384;let n=e.cache.cloudCollection_indexBufferBatched;if(Object(r["a"])(n))return n;const i=6*t-6,o=new Uint16Array(i);for(let r=0,a=0;r<i;r+=6,a+=4)o[r]=a,o[r+1]=a+1,o[r+2]=a+2,o[r+3]=a,o[r+4]=a+2,o[r+5]=a+3;return n=NV.createIndexBuffer({context:e,typedArray:o,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),n.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferBatched=n,n}function zWe(e){let t=e.cache.cloudCollection_indexBufferInstanced;return Object(r["a"])(t)||(t=NV.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferInstanced=t),t}function kWe(e){let t=e.cache.cloudCollection_vertexBufferInstanced;return Object(r["a"])(t)||(t=NV.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:LV.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_vertexBufferInstanced=t),t}function UWe(e,t,n){const i=[{index:bWe.positionHighAndScaleX,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:LV.STATIC_DRAW},{index:bWe.positionLowAndScaleY,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:LV.STATIC_DRAW},{index:bWe.packedAttribute0,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:LV.STATIC_DRAW},{index:bWe.packedAttribute1,componentsPerAttribute:4,componentDatatype:Ks.FLOAT,usage:LV.STATIC_DRAW},{index:bWe.color,componentsPerAttribute:4,componentDatatype:Ks.UNSIGNED_BYTE,normalize:!0,usage:LV.STATIC_DRAW}];n&&i.push({index:bWe.direction,componentsPerAttribute:2,componentDatatype:Ks.FLOAT,vertexBuffer:kWe(e)});const o=n?t:4*t;return new Kse(e,i,o,n)}const VWe=new Bd;function HWe(e,t,n,i){let o;const r=n[bWe.positionHighAndScaleX],a=n[bWe.positionLowAndScaleY],s=i.position;Bd.fromCartesian(s,VWe);const c=i.scale,l=VWe.high,u=VWe.low;e._instanced?(o=i._index,r(o,l.x,l.y,l.z,c.x),a(o,u.x,u.y,u.z,c.y)):(o=4*i._index,r(o+0,l.x,l.y,l.z,c.x),r(o+1,l.x,l.y,l.z,c.x),r(o+2,l.x,l.y,l.z,c.x),r(o+3,l.x,l.y,l.z,c.x),a(o+0,u.x,u.y,u.z,c.y),a(o+1,u.x,u.y,u.z,c.y),a(o+2,u.x,u.y,u.z,c.y),a(o+3,u.x,u.y,u.z,c.y))}function GWe(e,t,n,i){let o;const r=n[bWe.packedAttribute0],a=i.show,s=i.brightness;e._instanced?(o=i._index,r(o,a,s,0,0)):(o=4*i._index,r(o+0,a,s,0,0),r(o+1,a,s,1,0),r(o+2,a,s,1,1),r(o+3,a,s,0,1))}function WWe(e,t,n,i){let o;const r=n[bWe.packedAttribute1],a=i.maximumSize,s=i.slice;e._instanced?(o=i._index,r(o,a.x,a.y,a.z,s)):(o=4*i._index,r(o+0,a.x,a.y,a.z,s),r(o+1,a.x,a.y,a.z,s),r(o+2,a.x,a.y,a.z,s),r(o+3,a.x,a.y,a.z,s))}function qWe(e,t,n,i){let o;const r=n[bWe.color],a=i.color,s=Dm.floatToByte(a.red),c=Dm.floatToByte(a.green),l=Dm.floatToByte(a.blue),u=Dm.floatToByte(a.alpha);e._instanced?(o=i._index,r(o,s,c,l,u)):(o=4*i._index,r(o+0,s,c,l,u),r(o+1,s,c,l,u),r(o+2,s,c,l,u),r(o+3,s,c,l,u))}function YWe(e,t,n,i){HWe(e,t,n,i),GWe(e,t,n,i),WWe(e,t,n,i),qWe(e,t,n,i)}function XWe(e,t,n,i){const o=e,r=o._textureSliceWidth,s=o._noiseTextureRows;if(r/s<1||r%s!==0)throw new a["a"]("noiseTextureRows must evenly divide textureSliceWidth");const c=t.context;o._vaNoise=NWe(c),o._spNoise=Nz.fromCache({context:c,vertexShaderSource:n,fragmentShaderSource:i,attributeLocations:{position:0}});const l=o.noiseDetail,u=o.noiseOffset;o._noiseTexture=new lB({context:c,width:r*r/s,height:r*s,pixelDatatype:hx.UNSIGNED_BYTE,pixelFormat:fx.RGBA,sampler:new rB({wrapS:iB.REPEAT,wrapT:iB.REPEAT,minificationFilter:tB.NEAREST,magnificationFilter:ZN.NEAREST})});const h=new nX({vertexArray:o._vaNoise,shaderProgram:o._spNoise,outputTexture:o._noiseTexture,uniformMap:{u_noiseTextureDimensions:PWe(o),u_noiseDetail:function(){return l},u_noiseOffset:function(){return u}},persists:!1,owner:e,postExecute:function(e){o._ready=!0,o._loading=!1}});t.commandList.push(h),o._loading=!0}function KWe(e,t){const n=e,i=t.context;n._createVertexArray=!1,n._vaf=n._vaf&&n._vaf.destroy();const o=e._clouds,r=o.length;if(r>0){n._vaf=UWe(i,r,n._instanced);const a=n._vaf.writers;let s;for(s=0;s<r;++s){const n=o[s];YWe(e,t,a,n)}n._vaf.commit(BWe(i))}}const $We=[];function JWe(e,t){const n=t.context,i=e,o=i._clouds,r=o.length,a=i._cloudsToUpdate,s=i._cloudsToUpdateIndex,c=i._propertiesChanged,l=$We;l.length=0,(c[wWe]||c[TWe])&&l.push(HWe),(c[AWe]||c[xWe])&&l.push(GWe),(c[CWe]||c[EWe])&&l.push(WWe),c[IWe]&&l.push(qWe);const u=l.length,h=i._vaf.writers;let d,f,p;if(s/r>.1){for(d=0;d<s;++d)for(f=a[d],f._dirty=!1,p=0;p<u;++p)l[p](e,t,h,f);i._vaf.commit(BWe(n))}else{for(d=0;d<s;++d){for(f=a[d],f._dirty=!1,p=0;p<u;++p)l[p](e,t,h,f);i._instanced?i._vaf.subCommit(f._index,1):i._vaf.subCommit(4*f._index,4)}i._vaf.endSubCommits()}i._cloudsToUpdateIndex=0}function QWe(e,t,n,i){const o=t.context,r=e,a=new EV({defines:[],sources:[n]});r._instanced&&a.defines.push("INSTANCED");const s=new EV({defines:[],sources:[i]});r.debugBillboards&&s.defines.push("DEBUG_BILLBOARDS"),r.debugEllipsoids&&s.defines.push("DEBUG_ELLIPSOIDS"),r._sp=Nz.replaceCache({context:o,shaderProgram:r._sp,vertexShaderSource:a,fragmentShaderSource:s,attributeLocations:bWe}),r._rs=UF.fromCache({depthTest:{enabled:!0,func:Ys.LESS},depthMask:!1,blending:UN.ALPHA_BLEND}),r._spCreated=!0,r._compiledDebugBillboards=r.debugBillboards,r._compiledDebugEllipsoids=r.debugEllipsoids}function ZWe(e,t){const n=e,i=t.passes,o=n._uniforms,a=t.commandList;if(i.render){const t=n._colorCommands,i=n._vaf.va,s=i.length;t.length=s;for(let c=0;c<s;c++){let s=t[c];Object(r["a"])(s)||(s=t[c]=new lF),s.pass=hF.TRANSLUCENT,s.owner=e,s.uniformMap=o,s.count=i[c].indicesCount,s.vertexArray=i[c].va,s.shaderProgram=n._sp,s.renderState=n._rs,n._instanced&&(s.count=6,s.instanceCount=n._clouds.length),a.push(s)}}}DWe.prototype.update=function(e){if(RWe(this),!this.show)return;const t=this.debugBillboards||this.debugEllipsoids;this._ready=!!t||Object(r["a"])(this._noiseTexture),this._ready||this._loading||t||XWe(this,e,sWe,aWe),this._instanced=e.context.instancedArrays,bWe=this._instanced?OWe:vWe,BWe=this._instanced?zWe:FWe;const n=this._clouds,i=n.length,o=this._cloudsToUpdate,a=this._cloudsToUpdateIndex;this._createVertexArray?KWe(this,e):a>0&&JWe(this,e),a>1.5*i&&(o.length=i),!Object(r["a"])(this._vaf)||!Object(r["a"])(this._vaf.va)||!this._ready&!t||(this._spCreated&&this.debugBillboards===this._compiledDebugBillboards&&this.debugEllipsoids===this._compiledDebugEllipsoids||QWe(this,e,rWe,oWe),ZWe(this,e))},DWe.prototype.isDestroyed=function(){return!1},DWe.prototype.destroy=function(){return this._noiseTexture=this._noiseTexture&&this._noiseTexture.destroy(),this._sp=this._sp&&this._sp.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),jWe(this._clouds),Wc(this)};var eqe=DWe;const tqe=s["a"].toRadians(30);function nqe(e){this._angle=Object(o["a"])(e,tqe)}Object.defineProperties(nqe.prototype,{angle:{get:function(){return this._angle},set:function(e){i["a"].typeOf.number("value",e),this._angle=e}}}),nqe.prototype.emit=function(e){const t=Math.tan(this._angle),n=s["a"].randomBetween(0,s["a"].TWO_PI),i=s["a"].randomBetween(0,t),o=i*Math.cos(n),r=i*Math.sin(n),a=1;e.velocity=g.fromElements(o,r,a,e.velocity),g.normalize(e.velocity,e.velocity),e.position=g.clone(g.ZERO,e.position)};var iqe=nqe;const oqe=576,rqe=100,aqe="#ffffff",sqe="#48b";function cqe(e,t){this.credit=e,this.count=Object(o["a"])(t,1)}function lqe(e,t){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(hn.equals(n,t))return!0}return!1}function uqe(e){const t=e._previousCesiumCredit,n=e._currentCesiumCredit;hn.equals(n,t)||(Object(r["a"])(t)&&e._cesiumCreditContainer.removeChild(t.element),Object(r["a"])(n)&&e._cesiumCreditContainer.appendChild(n.element),e._previousCesiumCredit=n)}const hqe="cesium-credit-delimiter";function dqe(e){const t=document.createElement("span");return t.textContent=e,t.className=hqe,t}function fqe(e,t){if(Object(r["a"])(t)){const n=document.createElement(t);n._creditId=e._creditId,n.appendChild(e),e=n}return e}function pqe(e,t,n,i){const o=e.childNodes;let a=-1;t.sort((function(e,t){return t.count-e.count}));for(let s=0;s<t.length;++s){const c=t[s].credit;if(Object(r["a"])(c)){if(a=s,Object(r["a"])(n)&&(a*=2,s>0)){const t=a-1;if(o.length<=t)e.appendChild(dqe(n));else{const i=o[t];i.className!==hqe&&e.replaceChild(dqe(n),i)}}const t=c.element;if(o.length<=a)e.appendChild(fqe(t,i));else{const n=o[a];n._creditId!==c._id&&e.replaceChild(fqe(t,i),n)}}}++a;while(a<o.length)e.removeChild(o[a])}function mqe(e){const t=e._lightboxCredits,n=e.viewport.clientWidth,i=e.viewport.clientHeight;n!==e._lastViewportWidth&&(n<oqe?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`),e._lastViewportWidth=n),n>=oqe&&i!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor(.5*(i-t.clientHeight))}px`,e._lastViewportHeight=i)}function _qe(e,t){let n=`${e} {`;for(const i in t)t.hasOwnProperty(i)&&(n+=`${i}: ${t[i]}; `);return n+=" }\n",n}function gqe(){let e="";e+=_qe(".cesium-credit-lightbox-overlay",{display:"none","z-index":"1",position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(80, 80, 80, 0.8)"}),e+=_qe(".cesium-credit-lightbox",{"background-color":"#303336",color:aqe,position:"relative","min-height":`${rqe}px`,margin:"auto"}),e+=_qe(".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited",{color:aqe}),e+=_qe(".cesium-credit-lightbox > ul > li a:hover",{color:sqe}),e+=_qe(".cesium-credit-lightbox.cesium-credit-lightbox-expanded",{border:"1px solid #444","border-radius":"5px","max-width":"370px"}),e+=_qe(".cesium-credit-lightbox.cesium-credit-lightbox-mobile",{height:"100%",width:"100%"}),e+=_qe(".cesium-credit-lightbox-title",{padding:"20px 20px 0 20px"}),e+=_qe(".cesium-credit-lightbox-close",{"font-size":"18pt",cursor:"pointer",position:"absolute",top:"0",right:"6px",color:aqe}),e+=_qe(".cesium-credit-lightbox-close:hover",{color:sqe}),e+=_qe(".cesium-credit-lightbox > ul",{margin:"0",padding:"12px 20px 12px 40px","font-size":"13px"}),e+=_qe(".cesium-credit-lightbox > ul > li",{"padding-bottom":"6px"}),e+=_qe(".cesium-credit-lightbox > ul > li *",{padding:"0",margin:"0"}),e+=_qe(".cesium-credit-expand-link",{"padding-left":"5px",cursor:"pointer","text-decoration":"underline",color:aqe}),e+=_qe(".cesium-credit-expand-link:hover",{color:sqe}),e+=_qe(".cesium-credit-text",{color:aqe}),e+=_qe(".cesium-credit-textContainer *, .cesium-credit-logoContainer *",{display:"inline"});const t=document.head,n=document.createElement("style");n.innerHTML=e,t.insertBefore(n,t.firstChild)}function bqe(e,t,n){i["a"].defined("container",e);const r=this;n=Object(o["a"])(n,document.body);const a=document.createElement("div");a.className="cesium-credit-lightbox-overlay",n.appendChild(a);const s=document.createElement("div");function c(e){s.contains(e.target)||r.hideLightbox()}s.className="cesium-credit-lightbox",a.appendChild(s),a.addEventListener("click",c,!1);const l=document.createElement("div");l.className="cesium-credit-lightbox-title",l.textContent="Data provided by:",s.appendChild(l);const u=document.createElement("a");u.onclick=this.hideLightbox.bind(this),u.innerHTML="&times;",u.className="cesium-credit-lightbox-close",s.appendChild(u);const h=document.createElement("ul");s.appendChild(h);const d=document.createElement("div");d.className="cesium-credit-logoContainer",d.style.display="inline",e.appendChild(d);const f=document.createElement("div");f.className="cesium-credit-textContainer",f.style.display="inline",e.appendChild(f);const p=document.createElement("a");p.className="cesium-credit-expand-link",p.onclick=this.showLightbox.bind(this),p.textContent="Data attribution",e.appendChild(p),gqe();const m=hn.clone(bqe.cesiumCredit);this._delimiter=Object(o["a"])(t," • "),this._screenContainer=f,this._cesiumCreditContainer=d,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=s,this._creditList=h,this._lightbox=a,this._hideLightbox=c,this._expandLink=p,this._expanded=!1,this._defaultCredits=[],this._cesiumCredit=m,this._previousCesiumCredit=void 0,this._currentCesiumCredit=m,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new pu,lightboxCredits:new pu},this._defaultCredit=void 0,this.viewport=n,this.container=e}function yqe(e,t,n,i){i=Object(o["a"])(i,1);let a=t.get(n.id);if(Object(r["a"])(a))a.count<Number.MAX_VALUE&&(a.count+=i);else{const o=e._creditDisplayElementPool,r=e._creditDisplayElementPoolIndex;r<o.length?(a=o[r],a.credit=n,a.count=i):(a=new cqe(n,i),o.push(a)),++e._creditDisplayElementPoolIndex,t.set(n.id,a)}}let vqe;function Oqe(){if(!Object(r["a"])(vqe)){let e=Bt("Assets/Images/ion-credit.png");if(0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")){const t=new Uc.a(e);e=t.path()}vqe=new hn(`<a href="https://cesium.com/" target="_blank"><img src="${e}" title="Cesium ion"/></a>`,!0)}return bqe._cesiumCreditInitialized||(bqe._cesiumCredit=vqe,bqe._cesiumCreditInitialized=!0),vqe}bqe.prototype.addCredit=function(e){if(i["a"].defined("credit",e),e._isIon)return Object(r["a"])(this._defaultCredit)||(this._defaultCredit=hn.clone(Oqe())),void(this._currentCesiumCredit=this._defaultCredit);let t;t=e.showOnScreen?this._currentFrameCredits.screenCredits:this._currentFrameCredits.lightboxCredits,yqe(this,t,e)},bqe.prototype.addDefaultCredit=function(e){i["a"].defined("credit",e);const t=this._defaultCredits;lqe(t,e)||t.push(e)},bqe.prototype.removeDefaultCredit=function(e){i["a"].defined("credit",e);const t=this._defaultCredits,n=t.indexOf(e);-1!==n&&t.splice(n,1)},bqe.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},bqe.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},bqe.prototype.update=function(){this._expanded&&mqe(this)},bqe.prototype.beginFrame=function(){const e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;const t=e.screenCredits;t.removeAll();const n=this._defaultCredits;for(let i=0;i<n.length;++i){const e=n[i];yqe(this,t,e,Number.MAX_VALUE)}e.lightboxCredits.removeAll(),hn.equals(bqe.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=hn.clone(bqe.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},bqe.prototype.endFrame=function(){const e=this._currentFrameCredits.screenCredits.values;pqe(this._screenContainer,e,this._delimiter,void 0);const t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",pqe(this._creditList,t,void 0,"li"),uqe(this)},bqe.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),Wc(this)},bqe.prototype.isDestroyed=function(){return!1},bqe._cesiumCredit=void 0,bqe._cesiumCreditInitialized=!1,Object.defineProperties(bqe,{cesiumCredit:{get:function(){return Oqe(),bqe._cesiumCredit},set:function(e){bqe._cesiumCredit=e,bqe._cesiumCreditInitialized=!0}}}),bqe.CreditDisplayElement=cqe;var Aqe=bqe;function wqe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.attributeName;let n=e.perInstanceAttribute;if(!Object(r["a"])(t))throw new a["a"]("options.attributeName is required.");Object(r["a"])(n)||(n=!1);let i=Object(o["a"])(e.glslDatatype,"vec3");const s=`v_${t}`;let c;if("normal"===t||"tangent"===t||"bitangent"===t)c=`vec4 getColor() { return vec4((${s} + vec3(1.0)) * 0.5, 1.0); }\n`;else switch("st"===t&&(i="vec2"),i){case"float":c=`vec4 getColor() { return vec4(vec3(${s}), 1.0); }\n`;break;case"vec2":c=`vec4 getColor() { return vec4(${s}, 0.0, 1.0); }\n`;break;case"vec3":c=`vec4 getColor() { return vec4(${s}, 1.0); }\n`;break;case"vec4":c=`vec4 getColor() { return ${s}; }\n`;break;default:throw new a["a"]("options.glslDatatype must be float, vec2, vec3, or vec4.")}const l=`attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute float batchId;\n${n?"":`attribute ${i} ${t};\n`}varying ${i} ${s};\n`+"void main()\n{\n"+`vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n${n?`${s} = czm_batchTable_${t}(batchId);\n`:`${s} = ${t};\n`}gl_Position = czm_modelViewProjectionRelativeToEye * p;\n`+"}",u=`varying ${i} ${s};\n${c}\n`+"void main()\n{\ngl_FragColor = getColor();\n}";this.material=void 0,this.translucent=Object(o["a"])(e.translucent,!1),this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,l),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,u),this._renderState=WN.getDefaultRenderState(!1,!1,e.renderState),this._closed=Object(o["a"])(e.closed,!1),this._attributeName=t,this._glslDatatype=i}Object.defineProperties(wqe.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),wqe.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,wqe.prototype.isTranslucent=WN.prototype.isTranslucent,wqe.prototype.getRenderState=WN.prototype.getRenderState;var Tqe=wqe;function Cqe(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.camera))throw new a["a"]("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=Object(o["a"])(e.color,Dm.CYAN),this._updateOnChange=Object(o["a"])(e.updateOnChange,!0),this.show=Object(o["a"])(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const Eqe=new g,xqe=new ce,Sqe=new Kr,Iqe=new zO,Dqe=new NO,Pqe=new IO,jqe=new EO,Rqe=new Dm,Lqe=[1,1e5];Cqe.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,n=this._outlinePrimitives;let i,o;if(this._updateOnChange){for(o=t.length,i=0;i<o;++i)n[i]=n[i]&&n[i].destroy(),t[i]=t[i]&&t[i].destroy();t.length=0,n.length=0}if(0===t.length){const e=this._camera,o=e.frustum;let a,s;a=o instanceof zO?Iqe:o instanceof NO?Dqe:o instanceof IO?Pqe:jqe,a=o.clone(a);let c=this._frustumSplits;!Object(r["a"])(c)||c.length<=1?(c=Lqe,c[0]=this._camera.frustum.near,c[1]=this._camera.frustum.far,s=1):s=c.length-1;const l=e.positionWC,u=e.directionWC,h=e.upWC;let d=e.rightWC;d=g.negate(d,Eqe);const f=xqe;ce.setColumn(f,0,d,f),ce.setColumn(f,1,h,f),ce.setColumn(f,2,u,f);const p=Kr.fromRotationMatrix(f,Sqe);for(t.length=n.length=s,i=0;i<s;++i)a.near=c[i],a.far=c[i+1],t[i]=new EG({geometryInstances:new Sd({geometry:new sA({origin:l,orientation:p,frustum:a,_drawNearPlane:0===i}),attributes:{color:jm.fromColor(Dm.fromAlpha(this._color,.1,Rqe))},id:this.id,pickPrimitive:this}),appearance:new nF({translucent:!0,flat:!0}),asynchronous:!1}),n[i]=new EG({geometryInstances:new Sd({geometry:new mA({origin:l,orientation:p,frustum:a,_drawNearPlane:0===i}),attributes:{color:jm.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})}for(o=t.length,i=0;i<o;++i)n[i].update(e),t[i].update(e)},Cqe.prototype.isDestroyed=function(){return!1},Cqe.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return Wc(this)};var Mqe=Cqe;function Nqe(){this._cachedShowFrustumsShaders={}}function Bqe(e){const t={},n=e.vertexAttributes;for(const i in n)n.hasOwnProperty(i)&&(t[i]=n[i].index);return t}function Fqe(e,t){const n=e.context,i=t,o=i.fragmentShaderSource.clone(),r=[];o.sources=o.sources.map((function(e){e=EV.replaceMain(e,"czm_Debug_main");const t=/gl_FragData\[(\d+)\]/g;let n;while(null!==(n=t.exec(e)))-1===r.indexOf(n[1])&&r.push(n[1]);return e}));const a=r.length;let s,c="";if(c+="uniform vec3 debugShowCommandsColor;\n",c+="uniform vec3 debugShowFrustumsColor;\n",c+="void main() \n{ \n    czm_Debug_main(); \n",a>0)for(s=0;s<a;++s)c+=`    gl_FragData[${r[s]}].rgb *= debugShowCommandsColor;\n`,c+=`    gl_FragData[${r[s]}].rgb *= debugShowFrustumsColor;\n`;else c+="    gl_FragColor.rgb *= debugShowCommandsColor;\n",c+="    gl_FragColor.rgb *= debugShowFrustumsColor;\n";c+="}",o.sources.push(c);const l=Bqe(i);return Nz.fromCache({context:n,vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:o,attributeLocations:l})}const zqe=new Dm;function kqe(e,t){let n;return n=Object(r["a"])(t.uniformMap)?t.uniformMap:{},Object(r["a"])(n.debugShowCommandsColor)||Object(r["a"])(n.debugShowFrustumsColor)||(n.debugShowCommandsColor=function(){return e.debugShowCommands?(Object(r["a"])(t._debugColor)||(t._debugColor=Dm.fromRandom()),t._debugColor):Dm.WHITE},n.debugShowFrustumsColor=function(){return e.debugShowFrustums?(zqe.red=1&t.debugOverlappingFrustums?1:0,zqe.green=2&t.debugOverlappingFrustums?1:0,zqe.blue=4&t.debugOverlappingFrustums?1:0,zqe.alpha=1,zqe):Dm.WHITE}),n}const Uqe=new lF;Nqe.prototype.executeDebugShowFrustumsCommand=function(e,t,n){const i=t.shaderProgram.id;let o=this._cachedShowFrustumsShaders[i];Object(r["a"])(o)||(o=Fqe(e,t.shaderProgram),this._cachedShowFrustumsShaders[i]=o);const a=lF.shallowClone(t,Uqe);a.shaderProgram=o,a.uniformMap=kqe(e,t),a.execute(e.context,n)};var Vqe=Nqe;function Hqe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.length=Object(o["a"])(e.length,1e7),this._length=void 0,this.width=Object(o["a"])(e.width,2),this._width=void 0,this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=new Me,this.id=e.id,this._id=void 0,this._primitive=void 0}Hqe.prototype.update=function(e){if(this.show){if(!Object(r["a"])(this._primitive)||!Me.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=Me.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,Object(r["a"])(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);const e=new Sd({geometry:new CS({positions:[g.ZERO,g.UNIT_X],width:this.width,vertexFormat:eq.VERTEX_FORMAT,colors:[Dm.RED,Dm.RED],arcType:uu.NONE}),modelMatrix:Me.multiplyByUniformScale(this.modelMatrix,this.length,new Me),id:this.id,pickPrimitive:this}),t=new Sd({geometry:new CS({positions:[g.ZERO,g.UNIT_Y],width:this.width,vertexFormat:eq.VERTEX_FORMAT,colors:[Dm.GREEN,Dm.GREEN],arcType:uu.NONE}),modelMatrix:Me.multiplyByUniformScale(this.modelMatrix,this.length,new Me),id:this.id,pickPrimitive:this}),n=new Sd({geometry:new CS({positions:[g.ZERO,g.UNIT_Z],width:this.width,vertexFormat:eq.VERTEX_FORMAT,colors:[Dm.BLUE,Dm.BLUE],arcType:uu.NONE}),modelMatrix:Me.multiplyByUniformScale(this.modelMatrix,this.length,new Me),id:this.id,pickPrimitive:this});this._primitive=new EG({geometryInstances:[e,t,n],appearance:new eq,asynchronous:!1})}this._primitive.update(e)}},Hqe.prototype.isDestroyed=function(){return!1},Hqe.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Wc(this)};var Gqe=Hqe,Wqe="varying vec4 positionEC;\n\nvoid main()\n{\n    vec3 position;\n    vec3 direction;\n    if (czm_orthographicIn3D == 1.0)\n    {\n        vec2 uv = (gl_FragCoord.xy -  czm_viewport.xy) / czm_viewport.zw;\n        vec2 minPlane = vec2(czm_frustumPlanes.z, czm_frustumPlanes.y); // left, bottom\n        vec2 maxPlane = vec2(czm_frustumPlanes.w, czm_frustumPlanes.x); // right, top\n        position = vec3(mix(minPlane, maxPlane, uv), 0.0);\n        direction = vec3(0.0, 0.0, -1.0);\n    } \n    else \n    {\n        position = vec3(0.0);\n        direction = normalize(positionEC.xyz);\n    }\n\n    czm_ray ray = czm_ray(position, direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n    if (!czm_isEmpty(intersection))\n    {\n        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n    }\n    else\n    {\n        discard;\n    }\n\n    czm_writeLogDepth();\n}\n",qqe="attribute vec4 position;\n\nvarying vec4 positionEC;\n\nvoid main()\n{\n    positionEC = czm_modelView * position;\n    gl_Position = czm_projection * positionEC;\n\n    czm_vertexLogDepth();\n}\n";function Yqe(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=Object(o["a"])(e,0)}const Xqe=Or.supportsTypedArrays()?new Float32Array(12):[],Kqe=new g,$qe=new g,Jqe=new g,Qqe=new g,Zqe=new g;function eYe(e,t){const n=e.radii,i=t.camera;let o,r,a;if(i.frustum instanceof IO)o=g.ZERO,r=i.rightWC,a=i.upWC;else{const t=i.positionWC,n=g.multiplyComponents(e.oneOverRadii,t,Kqe),s=g.normalize(n,$qe),c=g.normalize(g.cross(g.UNIT_Z,n,Jqe),Jqe),l=g.normalize(g.cross(s,c,Qqe),Qqe),u=g.magnitude(n),h=Math.sqrt(u*u-1);o=g.multiplyByScalar(s,1/u,Kqe);const d=h/u;r=g.multiplyByScalar(c,d,$qe),a=g.multiplyByScalar(l,d,Jqe)}const s=g.add(o,a,Zqe);g.subtract(s,r,s),g.multiplyComponents(n,s,s),g.pack(s,Xqe,0);const c=g.subtract(o,a,Zqe);g.subtract(c,r,c),g.multiplyComponents(n,c,c),g.pack(c,Xqe,3);const l=g.add(o,a,Zqe);g.add(l,r,l),g.multiplyComponents(n,l,l),g.pack(l,Xqe,6);const u=g.subtract(o,a,Zqe);return g.add(u,r,u),g.multiplyComponents(n,u,u),g.pack(u,Xqe,9),Xqe}Yqe.prototype.update=function(e){if(this._mode=e.mode,e.mode!==SH.SCENE3D)return;const t=e.context,n=e.mapProjection.ellipsoid.radii,i=new k(n.x+this._ellipsoidOffset,n.y+this._ellipsoidOffset,n.z+this._ellipsoidOffset),o=e.useLogDepth;if(Object(r["a"])(this._command)||(this._rs=UF.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new lF({renderState:this._rs,boundingVolume:new Tt(g.ZERO,i.maximumRadius),pass:hF.OPAQUE,owner:this})),!Object(r["a"])(this._sp)||this._useLogDepth!==o){this._useLogDepth=o;const e=new EV({sources:[qqe]}),n=new EV({sources:[Wqe]});if(o){const t="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";n.sources.push(t),n.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")}this._sp=Nz.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const a=eYe(i,e);if(Object(r["a"])(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(a);else{const e=new Fu({attributes:{position:new ku({componentDatatype:Ks.FLOAT,componentsPerAttribute:3,values:a})},indices:[0,1,2,2,1,3],primitiveType:Eu.TRIANGLES});this._va=WV.fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:LV.DYNAMIC_DRAW}),this._command.vertexArray=this._va}},Yqe.prototype.execute=function(e,t){this._mode===SH.SCENE3D&&this._command.execute(e,t)},Yqe.prototype.isDestroyed=function(){return!1},Yqe.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};var tYe=Yqe;function nYe(){}const iYe=/\bgl_FragDepthEXT\b/,oYe=/\bdiscard\b/;function rYe(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!Object(r["a"])(n)){const i=t._attributeLocations;let o,r=t.fragmentShaderSource,a=!1;const s=r.sources;let c=s.length;for(o=0;o<c;++o)if(iYe.test(s[o])||oYe.test(s[o])){a=!0;break}let l=!1;const u=r.defines;for(c=u.length,o=0;o<c;++o)if("LOG_DEPTH"===u[o]){l=!0;break}let h;a||l?!a&&l&&(h="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",r=new EV({defines:["LOG_DEPTH"],sources:[h]})):(h="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",r=new EV({sources:[h]})),n=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:i})}return n}function aYe(e,t){const n=e._depthOnlyRenderStateCache;let i=n[t.id];if(!Object(r["a"])(i)){const e=UF.getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i=UF.fromCache(e),n[t.id]=i}return i}nYe.createDepthOnlyDerivedCommand=function(e,t,n,i){let o,a;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,a=i.depthOnlyCommand.renderState),i.depthOnlyCommand=lF.shallowClone(t,i.depthOnlyCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=a):(i.depthOnlyCommand.shaderProgram=rYe(n,t.shaderProgram),i.depthOnlyCommand.renderState=aYe(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};const sYe=/\s+czm_writeLogDepth\(/,cYe=/\s+czm_vertexLogDepth\(/,lYe=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;function uYe(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!Object(r["a"])(n)){const i=t._attributeLocations,o=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();let s,c;o.defines=Object(r["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("LOG_DEPTH"),a.defines=Object(r["a"])(a.defines)?a.defines.slice(0):[],a.defines.push("LOG_DEPTH");let l=!1,u=o.sources,h=u.length;for(s=0;s<h;++s)if(cYe.test(u[s])){l=!0;break}if(!l){for(s=0;s<h;++s)u[s]=EV.replaceMain(u[s],"czm_log_depth_main");c="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",u.push(c)}for(u=a.sources,h=u.length,l=!1,s=0;s<h;++s)sYe.test(u[s])&&(l=!0);-1!==a.defines.indexOf("LOG_DEPTH_WRITE")&&(l=!0);let d=!0;for(s=0;s<h;++s)lYe.test(u[s])&&(d=!1);let f="";if(d&&(f+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!l){for(s=0;s<h;s++)u[s]=EV.replaceMain(u[s],"czm_log_depth_main");f+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}u.push(f),n=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:o,fragmentShaderSource:a,attributeLocations:i})}return n}function hYe(e,t,n){let i=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!Object(r["a"])(i)){const o=t._attributeLocations;let r=t.fragmentShaderSource;const a=r.sources,s=a.length,c=`void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = ${n}; \n`+"} \n",l=new Array(s+1);for(let e=0;e<s;++e)l[e]=EV.replaceMain(a[e],"czm_non_pick_main");l[s]=c,r=new EV({sources:l,defines:r.defines}),i=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:o})}return i}function dYe(e,t){const n=e.picking.pickRenderStateCache;let i=n[t.id];if(!Object(r["a"])(i)){const e=UF.getState(t);e.blending.enabled=!1,e.depthMask=!0,i=UF.fromCache(e),n[t.id]=i}return i}function fYe(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!Object(r["a"])(n)){const i=t._attributeLocations,o=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();o.defines=Object(r["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),a.defines=Object(r["a"])(a.defines)?a.defines.slice(0):[],a.defines.push("HDR"),n=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:o,fragmentShaderSource:a,attributeLocations:i})}return n}nYe.createLogDepthCommand=function(e,t,n){let i;return Object(r["a"])(n)||(n={}),Object(r["a"])(n.command)&&(i=n.command.shaderProgram),n.command=lF.shallowClone(e,n.command),Object(r["a"])(i)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=i:(n.command.shaderProgram=uYe(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n},nYe.createPickDerivedCommand=function(e,t,n,i){let o,a;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.pickCommand)&&(o=i.pickCommand.shaderProgram,a=i.pickCommand.renderState),i.pickCommand=lF.shallowClone(t,i.pickCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=a):(i.pickCommand.shaderProgram=hYe(n,t.shaderProgram,t.pickId),i.pickCommand.renderState=dYe(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},nYe.createHdrCommand=function(e,t,n){let i;return Object(r["a"])(n)||(n={}),Object(r["a"])(n.command)&&(i=n.command.shaderProgram),n.command=lF.shallowClone(e,n.command),Object(r["a"])(i)&&n.shaderProgramId===e.shaderProgram.id?n.command.shaderProgram=i:(n.command.shaderProgram=fYe(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id),n};var pYe=nYe;function mYe(e){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function n(e){const n=e.alpha;if(!Object(r["a"])(n))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=s["a"].toRadians(n),t._beta=s["a"].toRadians(e.beta),t._gamma=s["a"].toRadians(e.gamma)}window.addEventListener("deviceorientation",n,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",n,!1)}}const _Ye=new Kr,gYe=new Kr,bYe=new ce;function yYe(e,t,n,i){const o=e.direction,r=e.right,a=e.up,s=Kr.fromAxisAngle(o,n,gYe),c=Kr.fromAxisAngle(r,i,_Ye),l=Kr.multiply(c,s,c),u=Kr.fromAxisAngle(a,t,gYe);Kr.multiply(u,l,l);const h=ce.fromQuaternion(l,bYe);ce.multiplyByVector(h,r,r),ce.multiplyByVector(h,a,a),ce.multiplyByVector(h,o,o)}mYe.prototype.update=function(){if(!Object(r["a"])(this._alpha))return;Object(r["a"])(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,n=this._lastGamma-this._gamma;yYe(this._scene.camera,-e,t,n),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},mYe.prototype.isDestroyed=function(){return!1},mYe.prototype.destroy=function(){return this._removeListener(),Wc(this)};var vYe=mYe;function OYe(e){if(i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.direction",e.direction),g.equals(e.direction,g.ZERO))throw new a["a"]("options.direction cannot be zero-length");this.direction=g.clone(e.direction),this.color=Dm.clone(Object(o["a"])(e.color,Dm.WHITE)),this.intensity=Object(o["a"])(e.intensity,1)}var AYe=OYe,wYe="#ifdef WRITE_DEPTH\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n#endif\n\nuniform vec3 u_radii;\nuniform vec3 u_oneOverEllipsoidRadiiSquared;\n\nvarying vec3 v_positionEC;\n\nvec4 computeEllipsoidColor(czm_ray ray, float intersection, float side)\n{\n    vec3 positionEC = czm_pointAlongRay(ray, intersection);\n    vec3 positionMC = (czm_inverseModelView * vec4(positionEC, 1.0)).xyz;\n    vec3 geodeticNormal = normalize(czm_geodeticSurfaceNormal(positionMC, vec3(0.0), u_oneOverEllipsoidRadiiSquared));\n    vec3 sphericalNormal = normalize(positionMC / u_radii);\n    vec3 normalMC = geodeticNormal * side;              // normalized surface normal (always facing the viewer) in model coordinates\n    vec3 normalEC = normalize(czm_normal * normalMC);   // normalized surface normal in eye coordiantes\n\n    vec2 st = czm_ellipsoidWgs84TextureCoordinates(sphericalNormal);\n    vec3 positionToEyeEC = -positionEC;\n\n    czm_materialInput materialInput;\n    materialInput.s = st.s;\n    materialInput.st = st;\n    materialInput.str = (positionMC + u_radii) / u_radii;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(positionMC, normalEC);\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef ONLY_SUN_LIGHTING\n    return czm_private_phong(normalize(positionToEyeEC), material, czm_sunDirectionEC);\n#else\n    return czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n\nvoid main()\n{\n    // PERFORMANCE_TODO: When dynamic branching is available, compute ratio of maximum and minimum radii\n    // in the vertex shader. Only when it is larger than some constant, march along the ray.\n    // Otherwise perform one intersection test which will be the common case.\n\n    // Test if the ray intersects a sphere with the ellipsoid's maximum radius.\n    // For very oblate ellipsoids, using the ellipsoid's radii for an intersection test\n    // may cause false negatives. This will discard fragments before marching the ray forward.\n    float maxRadius = max(u_radii.x, max(u_radii.y, u_radii.z)) * 1.5;\n    vec3 direction = normalize(v_positionEC);\n    vec3 ellipsoidCenter = czm_modelView[3].xyz;\n\n    float t1 = -1.0;\n    float t2 = -1.0;\n\n    float b = -2.0 * dot(direction, ellipsoidCenter);\n    float c = dot(ellipsoidCenter, ellipsoidCenter) - maxRadius * maxRadius;\n\n    float discriminant = b * b - 4.0 * c;\n    if (discriminant >= 0.0) {\n        t1 = (-b - sqrt(discriminant)) * 0.5;\n        t2 = (-b + sqrt(discriminant)) * 0.5;\n    }\n\n    if (t1 < 0.0 && t2 < 0.0) {\n        discard;\n    }\n\n    float t = min(t1, t2);\n    if (t < 0.0) {\n        t = 0.0;\n    }\n\n    // March ray forward to intersection with larger sphere and find\n    czm_ray ray = czm_ray(t * direction, direction);\n\n    vec3 ellipsoid_inverseRadii = vec3(1.0 / u_radii.x, 1.0 / u_radii.y, 1.0 / u_radii.z);\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoidCenter, ellipsoid_inverseRadii);\n\n    if (czm_isEmpty(intersection))\n    {\n        discard;\n    }\n\n    // If the viewer is outside, compute outsideFaceColor, with normals facing outward.\n    vec4 outsideFaceColor = (intersection.start != 0.0) ? computeEllipsoidColor(ray, intersection.start, 1.0) : vec4(0.0);\n\n    // If the viewer either is inside or can see inside, compute insideFaceColor, with normals facing inward.\n    vec4 insideFaceColor = (outsideFaceColor.a < 1.0) ? computeEllipsoidColor(ray, intersection.stop, -1.0) : vec4(0.0);\n\n    gl_FragColor = mix(insideFaceColor, outsideFaceColor, outsideFaceColor.a);\n    gl_FragColor.a = 1.0 - (1.0 - insideFaceColor.a) * (1.0 - outsideFaceColor.a);\n\n#ifdef WRITE_DEPTH\n#ifdef GL_EXT_frag_depth\n    t = (intersection.start != 0.0) ? intersection.start : intersection.stop;\n    vec3 positionEC = czm_pointAlongRay(ray, t);\n    vec4 positionCC = czm_projection * vec4(positionEC, 1.0);\n#ifdef LOG_DEPTH\n    czm_writeLogDepth(1.0 + positionCC.w);\n#else\n    float z = positionCC.z / positionCC.w;\n\n    float n = czm_depthRange.near;\n    float f = czm_depthRange.far;\n\n    gl_FragDepthEXT = (z * (f - n) + f + n) * 0.5;\n#endif\n#endif\n#endif\n}\n",TYe="attribute vec3 position;\n\nuniform vec3 u_radii;\n\nvarying vec3 v_positionEC;\n\nvoid main()\n{\n    // In the vertex data, the cube goes from (-1.0, -1.0, -1.0) to (1.0, 1.0, 1.0) in model coordinates.\n    // Scale to consider the radii.  We could also do this once on the CPU when using the BoxGeometry,\n    // but doing it here allows us to change the radii without rewriting the vertex data, and\n    // allows all ellipsoids to reuse the same vertex data.\n    vec4 p = vec4(u_radii * position, 1.0);\n\n    v_positionEC = (czm_modelView * p).xyz;     // position in eye coordinates\n    gl_Position = czm_modelViewProjection * p;  // position in clip coordinates\n\n    // With multi-frustum, when the ellipsoid primitive is positioned on the intersection of two frustums\n    // and close to terrain, the terrain (writes depth) in the closest frustum can overwrite part of the\n    // ellipsoid (does not write depth) that was rendered in the farther frustum.\n    //\n    // Here, we clamp the depth in the vertex shader to avoid being overwritten; however, this creates\n    // artifacts since some fragments can be alpha blended twice.  This is solved by only rendering\n    // the ellipsoid in the closest frustum to the viewer.\n    gl_Position.z = clamp(gl_Position.z, czm_depthRange.near, czm_depthRange.far);\n\n    czm_vertexLogDepth();\n}\n";const CYe={position:0};function EYe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.center=g.clone(Object(o["a"])(e.center,g.ZERO)),this._center=new g,this.radii=g.clone(e.radii),this._radii=new g,this._oneOverEllipsoidRadiiSquared=new g,this._boundingSphere=new Tt,this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._modelMatrix=new Me,this._computedModelMatrix=new Me,this.show=Object(o["a"])(e.show,!0),this.material=Object(o["a"])(e.material,XB.fromType(XB.ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.onlySunLighting=Object(o["a"])(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=Object(o["a"])(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new lF({owner:Object(o["a"])(e._owner,this)}),this._pickCommand=new lF({owner:Object(o["a"])(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}function xYe(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if(Object(r["a"])(t))return t;const n=eh.createGeometry(eh.fromDimensions({dimensions:new g(2,2,2),vertexFormat:qu.POSITION_ONLY}));return t=WV.fromGeometry({context:e,geometry:n,attributeLocations:CYe,bufferUsage:LV.STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}const SYe="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";EYe.prototype.update=function(e){if(!this.show||e.mode!==SH.SCENE3D||!Object(r["a"])(this.center)||!Object(r["a"])(this.radii))return;if(!Object(r["a"])(this.material))throw new a["a"]("this.material must be defined.");const t=e.context,n=this.material.isTranslucent(),i=this._translucent!==n;Object(r["a"])(this._rs)&&!i||(this._translucent=n,this._rs=UF.fromCache({cull:{enabled:!0,face:HN.FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!n&&t.fragmentDepth,blending:n?UN.ALPHA_BLEND:void 0})),Object(r["a"])(this._va)||(this._va=xYe(t));let o=!1;const s=this.radii;if(!g.equals(this._radii,s)){g.clone(s,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(s.x*s.x),e.y=1/(s.y*s.y),e.z=1/(s.z*s.z),o=!0}Me.equals(this.modelMatrix,this._modelMatrix)&&g.equals(this.center,this._center)||(Me.clone(this.modelMatrix,this._modelMatrix),g.clone(this.center,this._center),Me.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),o=!0),o&&(g.clone(g.ZERO,this._boundingSphere.center),this._boundingSphere.radius=g.maximumComponent(s),Tt.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const c=this._material!==this.material;this._material=this.material,this._material.update(t);const l=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const u=e.useLogDepth,h=this._useLogDepth!==u;this._useLogDepth=u;const d=this._colorCommand;let f,p;(c||l||i||h)&&(f=new EV({sources:[TYe]}),p=new EV({sources:[this.material.shaderSource,wYe]}),this.onlySunLighting&&p.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&p.defines.push("WRITE_DEPTH"),this._useLogDepth&&(f.defines.push("LOG_DEPTH"),p.defines.push("LOG_DEPTH"),p.sources.push(SYe)),this._sp=Nz.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:f,fragmentShaderSource:p,attributeLocations:CYe}),d.vertexArray=this._va,d.renderState=this._rs,d.shaderProgram=this._sp,d.uniformMap=Object(qE["a"])(this._uniforms,this.material._uniforms),d.executeInClosestFrustum=n);const m=e.commandList,_=e.passes;if(_.render&&(d.boundingVolume=this._boundingSphere,d.debugShowBoundingVolume=this.debugShowBoundingVolume,d.modelMatrix=this._computedModelMatrix,d.pass=n?hF.TRANSLUCENT:hF.OPAQUE,m.push(d)),_.pick){const e=this._pickCommand;Object(r["a"])(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(c||l||!Object(r["a"])(this._pickSP)||h)&&(f=new EV({sources:[TYe]}),p=new EV({sources:[this.material.shaderSource,wYe],pickColorQualifier:"uniform"}),this.onlySunLighting&&p.defines.push("ONLY_SUN_LIGHTING"),!n&&t.fragmentDepth&&p.defines.push("WRITE_DEPTH"),this._useLogDepth&&(f.defines.push("LOG_DEPTH"),p.defines.push("LOG_DEPTH"),p.sources.push(SYe)),this._pickSP=Nz.replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:f,fragmentShaderSource:p,attributeLocations:CYe}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=Object(qE["a"])(Object(qE["a"])(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=n),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=n?hF.TRANSLUCENT:hF.OPAQUE,m.push(e)}},EYe.prototype.isDestroyed=function(){return!1},EYe.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Wc(this)};var IYe=EYe,DYe="varying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n\n    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    materialInput.s = v_st.s;\n    materialInput.st = v_st;\n    materialInput.str = vec3(v_st, 0.0);\n\n    // Convert tangent space material normal to eye space\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n\n    // Convert view vector to world space\n    vec3 positionToEyeEC = -v_positionEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",PYe="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionMC = position3DHigh + position3DLow;           // position in model coordinates\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n";function jYe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.translucent,!0),n=Object(o["a"])(e.aboveGround,!1);this.material=Object(r["a"])(e.material)?e.material:XB.fromType(XB.ColorType),this.translucent=Object(o["a"])(e.translucent,!0),this._vertexShaderSource=Object(o["a"])(e.vertexShaderSource,PYe),this._fragmentShaderSource=Object(o["a"])(e.fragmentShaderSource,DYe),this._renderState=WN.getDefaultRenderState(t,!n,e.renderState),this._closed=!1,this._flat=Object(o["a"])(e.flat,!1),this._faceForward=Object(o["a"])(e.faceForward,n),this._aboveGround=n}Object.defineProperties(jYe.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return jYe.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),jYe.VERTEX_FORMAT=qu.POSITION_AND_ST,jYe.prototype.getFragmentShaderSource=WN.prototype.getFragmentShaderSource,jYe.prototype.isTranslucent=WN.prototype.isTranslucent,jYe.prototype.getRenderState=WN.prototype.getRenderState;var RYe=jYe;function LYe(){this.enabled=!0,this.renderable=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}const MYe=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],NYe=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7];for(let Set=0;Set<NYe.length;++Set)NYe[Set]*=1e6;const BYe=NYe[1],FYe=NYe[NYe.length-1];for(let Set=0;Set<NYe.length;++Set)NYe[Set]=(NYe[Set]-FYe)/(BYe-FYe);let zYe=0;function kYe(e){const t=MYe,n=t.length;if(e<t[0])return zYe=0,zYe;if(e>t[n-1])return zYe=n-2,zYe;if(e>=t[zYe]){if(zYe+1<n&&e<t[zYe+1])return zYe;if(zYe+2<n&&e<t[zYe+2])return++zYe,zYe}else if(zYe-1>=0&&e>=t[zYe-1])return--zYe,zYe;let i;for(i=0;i<n-2;++i)if(e>=t[i]&&e<t[i+1])break;return zYe=i,zYe}const UYe=new g;LYe.prototype.update=function(e){const t=e.fog.enabled=this.enabled;if(!t)return;e.fog.renderable=this.renderable;const n=e.camera,i=n.positionCartographic;if(!Object(r["a"])(i)||i.height>8e5||e.mode!==SH.SCENE3D)return void(e.fog.enabled=!1);const o=i.height,a=kYe(o),c=s["a"].clamp((o-MYe[a])/(MYe[a+1]-MYe[a]),0,1);let l=s["a"].lerp(NYe[a],NYe[a+1],c);const u=1e6*this.density,h=u/BYe*FYe;l=l*(u-h)*1e-6;const d=g.normalize(n.positionWC,UYe),f=Math.abs(g.dot(n.directionWC,d));l*=1-f,e.fog.density=l,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};var VYe=LYe;function HYe(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.scene))throw new a["a"]("options.scene is required.");this._scene=e.scene,this.samplingWindow=Object(o["a"])(e.samplingWindow,HYe.defaultSettings.samplingWindow),this.quietPeriod=Object(o["a"])(e.quietPeriod,HYe.defaultSettings.quietPeriod),this.warmupPeriod=Object(o["a"])(e.warmupPeriod,HYe.defaultSettings.warmupPeriod),this.minimumFrameRateDuringWarmup=Object(o["a"])(e.minimumFrameRateDuringWarmup,HYe.defaultSettings.minimumFrameRateDuringWarmup),this.minimumFrameRateAfterWarmup=Object(o["a"])(e.minimumFrameRateAfterWarmup,HYe.defaultSettings.minimumFrameRateAfterWarmup),this._lowFrameRate=new dn["a"],this._nominalFrameRate=new dn["a"],this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;const t=this;this._preUpdateRemoveListener=this._scene.preUpdate.addEventListener((function(e,n){GYe(t,n)})),this._hiddenPropertyName=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;const n=void 0!==document.hidden?"visibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychange":void 0;function i(){WYe(t)}this._visibilityChangeRemoveListener=void 0,Object(r["a"])(n)&&(document.addEventListener(n,i,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(n,i,!1)})}function GYe(e,t){if(e._pauseCount>0)return;const n=bm();if(e._needsQuietPeriod)e._needsQuietPeriod=!1,e._frameTimes.length=0,e._quietPeriodEndTime=n+e.quietPeriod/Gi.SECONDS_PER_MILLISECOND,e._warmupPeriodEndTime=e._quietPeriodEndTime+(e.warmupPeriod+e.samplingWindow)/Gi.SECONDS_PER_MILLISECOND;else if(n>=e._quietPeriodEndTime){e._frameTimes.push(n);const t=n-e.samplingWindow/Gi.SECONDS_PER_MILLISECOND;if(e._frameTimes.length>=2&&e._frameTimes[0]<=t){while(e._frameTimes.length>=2&&e._frameTimes[1]<t)e._frameTimes.shift();const i=(n-e._frameTimes[0])/(e._frameTimes.length-1);e._lastFramesPerSecond=1e3/i;const o=1e3/(n>e._warmupPeriodEndTime?e.minimumFrameRateAfterWarmup:e.minimumFrameRateDuringWarmup);i>o?e._frameRateIsLow||(e._frameRateIsLow=!0,e._needsQuietPeriod=!0,e.lowFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond)):e._frameRateIsLow&&(e._frameRateIsLow=!1,e._needsQuietPeriod=!0,e.nominalFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond))}}}function WYe(e){document[e._hiddenPropertyName]?e.pause():e.unpause()}HYe.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8},HYe.fromScene=function(e){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");return Object(r["a"])(e._frameRateMonitor)&&!e._frameRateMonitor.isDestroyed()||(e._frameRateMonitor=new HYe({scene:e})),e._frameRateMonitor},Object.defineProperties(HYe.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}}),HYe.prototype.pause=function(){++this._pauseCount,1===this._pauseCount&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)},HYe.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)},HYe.prototype.isDestroyed=function(){return!1},HYe.prototype.destroy=function(){return this._preUpdateRemoveListener(),Object(r["a"])(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),Wc(this)};var qYe=HYe;function YYe(e,t,n){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=SH.SCENE3D,this.morphTime=SH.getMorphTime(SH.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=n,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,depth:!1,postProcess:!1,offscreen:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,density:void 0,sse:void 0,minimumBrightness:void 0},this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0}var XYe=YYe;function KYe(e,t){this.near=Object(o["a"])(e,0),this.far=Object(o["a"])(t,0);const n=hF.NUMBER_OF_PASSES,i=new Array(n),r=new Array(n);for(let o=0;o<n;++o)i[o]=[],r[o]=0;this.commands=i,this.indices=r}var $Ye=KYe;function JYe(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("type is required.");if(this.type=e,!Object(r["a"])(t))if("json"===e)t="application/json";else if("xml"===e)t="text/xml";else if("html"===e)t="text/html";else{if("text"!==e)throw new a["a"]('format is required when type is not "json", "xml", "html", or "text".');t="text/plain"}if(this.format=t,!Object(r["a"])(n))if("json"===e)n=QYe;else if("xml"===e)n=iXe;else if("html"===e)n=pXe;else{if("text"!==e)throw new a["a"]('callback is required when type is not "json", "xml", "html", or "text".');n=pXe}this.callback=n}function QYe(e){const t=[],n=e.features;for(let i=0;i<n.length;++i){const e=n[i],o=new oUe;if(o.data=e,o.properties=e.properties,o.configureNameFromProperties(e.properties),o.configureDescriptionFromProperties(e.properties),Object(r["a"])(e.geometry)&&"Point"===e.geometry.type){const t=e.geometry.coordinates[0],n=e.geometry.coordinates[1];o.position=I.fromDegrees(t,n)}t.push(o)}return t}const ZYe="http://www.mapinfo.com/mxp",eXe="http://www.esri.com/wms",tXe="http://www.opengis.net/wfs",nXe="http://www.opengis.net/gml";function iXe(e){const t=e.documentElement;if("MultiFeatureCollection"===t.localName&&t.namespaceURI===ZYe)return oXe(e);if("FeatureInfoResponse"===t.localName&&t.namespaceURI===eXe)return rXe(e);if("FeatureCollection"===t.localName&&t.namespaceURI===tXe)return aXe(e);if("ServiceExceptionReport"===t.localName)throw new ye["a"]((new XMLSerializer).serializeToString(t));return"msGMLOutput"===t.localName?sXe(e):uXe(e)}function oXe(e){const t=[],n=e.documentElement,i=n.getElementsByTagNameNS(ZYe,"Feature");for(let o=0;o<i.length;++o){const e=i[o],n={},r=e.getElementsByTagNameNS(ZYe,"Val");for(let t=0;t<r.length;++t){const e=r[t];if(e.hasAttribute("ref")){const t=e.getAttribute("ref"),i=e.textContent.trim();n[t]=i}}const a=new oUe;a.data=e,a.properties=n,a.configureNameFromProperties(n),a.configureDescriptionFromProperties(n),t.push(a)}return t}function rXe(e){const t=e.documentElement,n=[];let i;const o=t.getElementsByTagNameNS("*","FIELDS");if(o.length>0)for(let r=0;r<o.length;++r){const e=o[r];i={};const t=e.attributes;for(let n=0;n<t.length;++n){const e=t[n];i[e.name]=e.value}n.push(lXe(e,i))}else{const e=t.getElementsByTagNameNS("*","FeatureInfo");for(let t=0;t<e.length;++t){const o=e[t];i={};const r=o.childNodes;for(let e=0;e<r.length;++e){const t=r[e];t.nodeType===Node.ELEMENT_NODE&&(i[t.localName]=t.textContent)}n.push(lXe(o,i))}}return n}function aXe(e){const t=[],n=e.documentElement,i=n.getElementsByTagNameNS(nXe,"featureMember");for(let o=0;o<i.length;++o){const e=i[o],n={};cXe(e,n),t.push(lXe(e,n))}return t}function sXe(e){const t=[];let n;const i=e.documentElement.childNodes;for(let r=0;r<i.length;r++)if(i[r].nodeType===Node.ELEMENT_NODE){n=i[r];break}if(!Object(r["a"])(n))throw new ye["a"]("Unable to find first child of the feature info xml document");const o=n.childNodes;for(let r=0;r<o.length;++r){const e=o[r];if(e.nodeType===Node.ELEMENT_NODE){const n={};cXe(e,n),t.push(lXe(e,n))}}return t}function cXe(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){const o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),"Point"!==o.localName&&"LineString"!==o.localName&&"Polygon"!==o.localName&&"boundedBy"!==o.localName&&(o.hasChildNodes()&&cXe(o,t)&&(t[o.localName]=o.textContent))}return n}function lXe(e,t){const n=new oUe;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}function uXe(e){const t=(new XMLSerializer).serializeToString(e),n=document.createElement("div"),i=document.createElement("pre");i.textContent=t,n.appendChild(i);const o=new oUe;return o.data=e,o.description=n.innerHTML,[o]}const hXe=/<body>\s*<\/body>/im,dXe=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,fXe=/<title>([\s\S]*)<\/title>/im;function pXe(e){if(hXe.test(e))return;if(dXe.test(e))return;let t;const n=fXe.exec(e);n&&n.length>1&&(t=n[1]);const i=new oUe;return i.name=t,i.description=e,i.data=e,[i]}var mXe=JYe,_Xe="uniform vec4 u_initialColor;\n\n#if TEXTURE_UNITS > 0\nuniform sampler2D u_dayTextures[TEXTURE_UNITS];\nuniform vec4 u_dayTextureTranslationAndScale[TEXTURE_UNITS];\nuniform bool u_dayTextureUseWebMercatorT[TEXTURE_UNITS];\n\n#ifdef APPLY_ALPHA\nuniform float u_dayTextureAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_DAY_NIGHT_ALPHA\nuniform float u_dayTextureNightAlpha[TEXTURE_UNITS];\nuniform float u_dayTextureDayAlpha[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SPLIT\nuniform float u_dayTextureSplit[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_BRIGHTNESS\nuniform float u_dayTextureBrightness[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_CONTRAST\nuniform float u_dayTextureContrast[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_HUE\nuniform float u_dayTextureHue[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_SATURATION\nuniform float u_dayTextureSaturation[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_GAMMA\nuniform float u_dayTextureOneOverGamma[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_IMAGERY_CUTOUT\nuniform vec4 u_dayTextureCutoutRectangles[TEXTURE_UNITS];\n#endif\n\n#ifdef APPLY_COLOR_TO_ALPHA\nuniform vec4 u_colorsToAlpha[TEXTURE_UNITS];\n#endif\n\nuniform vec4 u_dayTextureTexCoordsRectangle[TEXTURE_UNITS];\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\nuniform sampler2D u_waterMask;\nuniform vec4 u_waterMaskTranslationAndScale;\nuniform float u_zoomedOutOceanSpecularIntensity;\n#endif\n\n#ifdef SHOW_OCEAN_WAVES\nuniform sampler2D u_oceanNormalMap;\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\nuniform vec2 u_lightingFadeDistance;\n#endif\n\n#ifdef TILE_LIMIT_RECTANGLE\nuniform vec4 u_cartographicLimitRectangle;\n#endif\n\n#ifdef GROUND_ATMOSPHERE\nuniform vec2 u_nightFadeDistance;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\nuniform highp sampler2D u_clippingPlanes;\nuniform mat4 u_clippingPlanesMatrix;\nuniform vec4 u_clippingPlanesEdgeStyle;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG) && defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\nuniform float u_minimumBrightness;\n#endif\n\n#ifdef COLOR_CORRECT\nuniform vec3 u_hsbShift; // Hue, saturation, brightness\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\nuniform vec4 u_fillHighlightColor;\n#endif\n\n#ifdef TRANSLUCENT\nuniform vec4 u_frontFaceAlphaByDistance;\nuniform vec4 u_backFaceAlphaByDistance;\nuniform vec4 u_translucencyRectangle;\n#endif\n\n#ifdef UNDERGROUND_COLOR\nuniform vec4 u_undergroundColor;\nuniform vec4 u_undergroundColorAlphaByDistance;\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\nuniform float u_lambertDiffuseMultiplier;\n#endif\n\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\nvarying vec3 v_textureCoordinates;\nvarying vec3 v_normalMC;\nvarying vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nvarying float v_height;\nvarying float v_slope;\nvarying float v_aspect;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nvarying float v_distance;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\nvarying vec3 v_atmosphereRayleighColor;\nvarying vec3 v_atmosphereMieColor;\nvarying float v_atmosphereOpacity;\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nfloat interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n#endif\n\n#if defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT) || defined(APPLY_MATERIAL)\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor)\n{\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\n}\n#endif\n\n#ifdef TRANSLUCENT\nbool inTranslucencyRectangle()\n{\n    return\n        v_textureCoordinates.x > u_translucencyRectangle.x &&\n        v_textureCoordinates.x < u_translucencyRectangle.z &&\n        v_textureCoordinates.y > u_translucencyRectangle.y &&\n        v_textureCoordinates.y < u_translucencyRectangle.w;\n}\n#endif\n\nvec4 sampleAndBlend(\n    vec4 previousColor,\n    sampler2D textureToSample,\n    vec2 tileTextureCoordinates,\n    vec4 textureCoordinateRectangle,\n    vec4 textureCoordinateTranslationAndScale,\n    float textureAlpha,\n    float textureNightAlpha,\n    float textureDayAlpha,\n    float textureBrightness,\n    float textureContrast,\n    float textureHue,\n    float textureSaturation,\n    float textureOneOverGamma,\n    float split,\n    vec4 colorToAlpha,\n    float nightBlend)\n{\n    // This crazy step stuff sets the alpha to 0.0 if this following condition is true:\n    //    tileTextureCoordinates.s < textureCoordinateRectangle.s ||\n    //    tileTextureCoordinates.s > textureCoordinateRectangle.p ||\n    //    tileTextureCoordinates.t < textureCoordinateRectangle.t ||\n    //    tileTextureCoordinates.t > textureCoordinateRectangle.q\n    // In other words, the alpha is zero if the fragment is outside the rectangle\n    // covered by this texture.  Would an actual 'if' yield better performance?\n    vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n    alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);\n    textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    textureAlpha *= mix(textureDayAlpha, textureNightAlpha, nightBlend);\n#endif\n\n    vec2 translation = textureCoordinateTranslationAndScale.xy;\n    vec2 scale = textureCoordinateTranslationAndScale.zw;\n    vec2 textureCoordinates = tileTextureCoordinates * scale + translation;\n    vec4 value = texture2D(textureToSample, textureCoordinates);\n    vec3 color = value.rgb;\n    float alpha = value.a;\n\n#ifdef APPLY_COLOR_TO_ALPHA\n    vec3 colorDiff = abs(color.rgb - colorToAlpha.rgb);\n    colorDiff.r = max(max(colorDiff.r, colorDiff.g), colorDiff.b);\n    alpha = czm_branchFreeTernary(colorDiff.r < colorToAlpha.a, 0.0, alpha);\n#endif\n\n#if !defined(APPLY_GAMMA)\n    vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));\n    color = tempColor.rgb;\n    alpha = tempColor.a;\n#else\n    color = pow(color, vec3(textureOneOverGamma));\n#endif\n\n#ifdef APPLY_SPLIT\n    float splitPosition = czm_splitPosition;\n    // Split to the left\n    if (split < 0.0 && gl_FragCoord.x > splitPosition) {\n       alpha = 0.0;\n    }\n    // Split to the right\n    else if (split > 0.0 && gl_FragCoord.x < splitPosition) {\n       alpha = 0.0;\n    }\n#endif\n\n#ifdef APPLY_BRIGHTNESS\n    color = mix(vec3(0.0), color, textureBrightness);\n#endif\n\n#ifdef APPLY_CONTRAST\n    color = mix(vec3(0.5), color, textureContrast);\n#endif\n\n#ifdef APPLY_HUE\n    color = czm_hue(color, textureHue);\n#endif\n\n#ifdef APPLY_SATURATION\n    color = czm_saturation(color, textureSaturation);\n#endif\n\n    float sourceAlpha = alpha * textureAlpha;\n    float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);\n    outAlpha += sign(outAlpha) - 1.0;\n\n    vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;\n\n    // When rendering imagery for a tile in multiple passes,\n    // some GPU/WebGL implementation combinations will not blend fragments in\n    // additional passes correctly if their computation includes an unmasked\n    // divide-by-zero operation,\n    // even if it's not in the output or if the output has alpha zero.\n    //\n    // For example, without sanitization for outAlpha,\n    // this renders without artifacts:\n    //   if (outAlpha == 0.0) { outColor = vec3(0.0); }\n    //\n    // but using czm_branchFreeTernary will cause portions of the tile that are\n    // alpha-zero in the additional pass to render as black instead of blending\n    // with the previous pass:\n    //   outColor = czm_branchFreeTernary(outAlpha == 0.0, vec3(0.0), outColor);\n    //\n    // So instead, sanitize against divide-by-zero,\n    // store this state on the sign of outAlpha, and correct on return.\n\n    return vec4(outColor, max(outAlpha, 0.0));\n}\n\nvec3 colorCorrect(vec3 rgb) {\n#ifdef COLOR_CORRECT\n    // Convert rgb color to hsb\n    vec3 hsb = czm_RGBToHSB(rgb);\n    // Perform hsb shift\n    hsb.x += u_hsbShift.x; // hue\n    hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n    hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n    // Convert shifted hsb back to rgb\n    rgb = czm_HSBToRGB(hsb);\n#endif\n    return rgb;\n}\n\nvec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend);\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float specularMapValue, float fade);\n\nconst float fExposure = 2.0;\n\nvec3 computeEllipsoidPosition()\n{\n    float mpp = czm_metersPerPixel(vec4(0.0, 0.0, -czm_currentFrustum.x, 1.0), 1.0);\n    vec2 xy = gl_FragCoord.xy / czm_viewport.zw * 2.0 - vec2(1.0);\n    xy *= czm_viewport.zw * mpp * 0.5;\n\n    vec3 direction = normalize(vec3(xy, -czm_currentFrustum.x));\n    czm_ray ray = czm_ray(vec3(0.0), direction);\n\n    vec3 ellipsoid_center = czm_view[3].xyz;\n\n    czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii);\n\n    vec3 ellipsoidPosition = czm_pointAlongRay(ray, intersection.start);\n    return (czm_inverseView * vec4(ellipsoidPosition, 1.0)).xyz;\n}\n\nvoid main()\n{\n#ifdef TILE_LIMIT_RECTANGLE\n    if (v_textureCoordinates.x < u_cartographicLimitRectangle.x || u_cartographicLimitRectangle.z < v_textureCoordinates.x ||\n        v_textureCoordinates.y < u_cartographicLimitRectangle.y || u_cartographicLimitRectangle.w < v_textureCoordinates.y)\n        {\n            discard;\n        }\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    float clipDistance = clip(gl_FragCoord, u_clippingPlanes, u_clippingPlanesMatrix);\n#endif\n\n#if defined(SHOW_REFLECTIVE_OCEAN) || defined(ENABLE_DAYNIGHT_SHADING) || defined(HDR)\n    vec3 normalMC = czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0));   // normalized surface normal in model coordinates\n    vec3 normalEC = czm_normal3D * normalMC;                                         // normalized surface normal in eye coordiantes\n#endif\n\n#if defined(APPLY_DAY_NIGHT_ALPHA) && defined(ENABLE_DAYNIGHT_SHADING)\n    float nightBlend = 1.0 - clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0, 0.0, 1.0);\n#else\n    float nightBlend = 0.0;\n#endif\n\n    // The clamp below works around an apparent bug in Chrome Canary v23.0.1241.0\n    // where the fragment shader sees textures coordinates < 0.0 and > 1.0 for the\n    // fragments on the edges of tiles even though the vertex shader is outputting\n    // coordinates strictly in the 0-1 range.\n    vec4 color = computeDayColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0), nightBlend);\n\n#ifdef SHOW_TILE_BOUNDARIES\n    if (v_textureCoordinates.x < (1.0/256.0) || v_textureCoordinates.x > (255.0/256.0) ||\n        v_textureCoordinates.y < (1.0/256.0) || v_textureCoordinates.y > (255.0/256.0))\n    {\n        color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n#endif\n\n#if defined(ENABLE_DAYNIGHT_SHADING) || defined(GROUND_ATMOSPHERE)\n    float cameraDist;\n    if (czm_sceneMode == czm_sceneMode2D)\n    {\n        cameraDist = max(czm_frustumPlanes.x - czm_frustumPlanes.y, czm_frustumPlanes.w - czm_frustumPlanes.z) * 0.5;\n    }\n    else if (czm_sceneMode == czm_sceneModeColumbusView)\n    {\n        cameraDist = -czm_view[3].z;\n    }\n    else\n    {\n        cameraDist = length(czm_view[3]);\n    }\n    float fadeOutDist = u_lightingFadeDistance.x;\n    float fadeInDist = u_lightingFadeDistance.y;\n    if (czm_sceneMode != czm_sceneMode3D) {\n        vec3 radii = czm_ellipsoidRadii;\n        float maxRadii = max(radii.x, max(radii.y, radii.z));\n        fadeOutDist -= maxRadii;\n        fadeInDist -= maxRadii;\n    }\n    float fade = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.0, 1.0);\n#else\n    float fade = 0.0;\n#endif\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n    vec2 waterMaskTranslation = u_waterMaskTranslationAndScale.xy;\n    vec2 waterMaskScale = u_waterMaskTranslationAndScale.zw;\n    vec2 waterMaskTextureCoordinates = v_textureCoordinates.xy * waterMaskScale + waterMaskTranslation;\n    waterMaskTextureCoordinates.y = 1.0 - waterMaskTextureCoordinates.y;\n\n    float mask = texture2D(u_waterMask, waterMaskTextureCoordinates).r;\n\n    if (mask > 0.0)\n    {\n        mat3 enuToEye = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalEC);\n\n        vec2 ellipsoidTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC);\n        vec2 ellipsoidFlippedTextureCoordinates = czm_ellipsoidWgs84TextureCoordinates(normalMC.zyx);\n\n        vec2 textureCoordinates = mix(ellipsoidTextureCoordinates, ellipsoidFlippedTextureCoordinates, czm_morphTime * smoothstep(0.9, 0.95, normalMC.z));\n\n        color = computeWaterColor(v_positionEC, textureCoordinates, enuToEye, color, mask, fade);\n    }\n#endif\n\n#ifdef APPLY_MATERIAL\n    czm_materialInput materialInput;\n    materialInput.st = v_textureCoordinates.st;\n    materialInput.normalEC = normalize(v_normalEC);\n    materialInput.positionToEyeEC = -v_positionEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, normalize(v_normalEC));     \n    materialInput.slope = v_slope;\n    materialInput.height = v_height;\n    materialInput.aspect = v_aspect;\n    czm_material material = czm_getMaterial(materialInput);\n    vec4 materialColor = vec4(material.diffuse, material.alpha);\n    color = alphaBlend(materialColor, color);\n#endif\n\n#ifdef ENABLE_VERTEX_LIGHTING\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalize(v_normalEC)) * u_lambertDiffuseMultiplier + 0.3, 0.0, 1.0);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#elif defined(ENABLE_DAYNIGHT_SHADING)\n    float diffuseIntensity = clamp(czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * 5.0 + 0.3, 0.0, 1.0);\n    diffuseIntensity = mix(1.0, diffuseIntensity, fade);\n    vec4 finalColor = vec4(color.rgb * czm_lightColor * diffuseIntensity, color.a);\n#else\n    vec4 finalColor = color;\n#endif\n\n#ifdef ENABLE_CLIPPING_PLANES\n    vec4 clippingPlanesEdgeColor = vec4(1.0);\n    clippingPlanesEdgeColor.rgb = u_clippingPlanesEdgeStyle.rgb;\n    float clippingPlanesEdgeWidth = u_clippingPlanesEdgeStyle.a;\n\n    if (clipDistance < clippingPlanesEdgeWidth)\n    {\n        finalColor = clippingPlanesEdgeColor;\n    }\n#endif\n\n#ifdef HIGHLIGHT_FILL_TILE\n    finalColor = vec4(mix(finalColor.rgb, u_fillHighlightColor.rgb, u_fillHighlightColor.a), finalColor.a);\n#endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n#if defined(GROUND_ATMOSPHERE) || defined(FOG)\n    if (!czm_backFacing())\n    {\n        bool dynamicLighting = false;\n        #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n            dynamicLighting = true;     \n        #endif\n\n        vec3 rayleighColor;\n        vec3 mieColor;\n        float opacity;\n\n        vec3 positionWC;\n        vec3 lightDirection;\n\n        // When the camera is far away (camera distance > nightFadeOutDistance), the scattering is computed in the fragment shader.\n        // Otherwise, the scattering is computed in the vertex shader.\n        #ifdef PER_FRAGMENT_GROUND_ATMOSPHERE\n            positionWC = computeEllipsoidPosition();\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            computeAtmosphereScattering(\n                positionWC,\n                lightDirection,\n                rayleighColor,\n                mieColor,\n                opacity\n            );\n        #else\n            positionWC = v_positionMC;\n            lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(positionWC));\n            rayleighColor = v_atmosphereRayleighColor;\n            mieColor = v_atmosphereMieColor;\n            opacity = v_atmosphereOpacity;\n        #endif\n\n        rayleighColor = colorCorrect(rayleighColor);\n        mieColor = colorCorrect(mieColor);\n\n        vec4 groundAtmosphereColor = computeAtmosphereColor(positionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n        // Fog is applied to tiles selected for fog, close to the Earth.\n        #ifdef FOG\n            vec3 fogColor = groundAtmosphereColor.rgb;\n            \n            // If there is lighting, apply that to the fog.\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float darken = clamp(dot(normalize(czm_viewerPositionWC), atmosphereLightDirection), u_minimumBrightness, 1.0);\n                fogColor *= darken;                \n            #endif\n\n            #ifndef HDR\n                fogColor.rgb = czm_acesTonemapping(fogColor.rgb);\n                fogColor.rgb = czm_inverseGamma(fogColor.rgb);\n            #endif\n            \n            const float modifier = 0.15;\n            finalColor = vec4(czm_fog(v_distance, finalColor.rgb, fogColor.rgb, modifier), finalColor.a);\n\n        #else\n            // The transmittance is based on optical depth i.e. the length of segment of the ray inside the atmosphere.\n            // This value is larger near the \"circumference\", as it is further away from the camera. We use it to\n            // brighten up that area of the ground atmosphere.\n            const float transmittanceModifier = 0.5;\n            float transmittance = transmittanceModifier + clamp(1.0 - groundAtmosphereColor.a, 0.0, 1.0);\n\n            vec3 finalAtmosphereColor = finalColor.rgb + groundAtmosphereColor.rgb * transmittance;\n\n            #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_VERTEX_LIGHTING) || defined(ENABLE_DAYNIGHT_SHADING))\n                float fadeInDist = u_nightFadeDistance.x;\n                float fadeOutDist = u_nightFadeDistance.y;\n            \n                float sunlitAtmosphereIntensity = clamp((cameraDist - fadeOutDist) / (fadeInDist - fadeOutDist), 0.05, 1.0);\n                float darken = clamp(dot(normalize(positionWC), atmosphereLightDirection), 0.0, 1.0);\n                vec3 darkenendGroundAtmosphereColor = mix(groundAtmosphereColor.rgb, finalAtmosphereColor.rgb, darken);\n\n                finalAtmosphereColor = mix(darkenendGroundAtmosphereColor, finalAtmosphereColor, sunlitAtmosphereIntensity);\n            #endif\n            \n            #ifndef HDR\n                finalAtmosphereColor.rgb = vec3(1.0) - exp(-fExposure * finalAtmosphereColor.rgb);\n            #else\n                finalAtmosphereColor.rgb = czm_saturation(finalAtmosphereColor.rgb, 1.6);\n            #endif\n            \n            finalColor.rgb = mix(finalColor.rgb, finalAtmosphereColor.rgb, fade);\n        #endif\n    }\n#endif\n\n#ifdef UNDERGROUND_COLOR\n    if (czm_backFacing())\n    {\n        float distanceFromEllipsoid = max(czm_eyeHeight, 0.0);\n        float distance = max(v_distance - distanceFromEllipsoid, 0.0);\n        float blendAmount = interpolateByDistance(u_undergroundColorAlphaByDistance, distance);\n        vec4 undergroundColor = vec4(u_undergroundColor.rgb, u_undergroundColor.a * blendAmount);\n        finalColor = alphaBlend(undergroundColor, finalColor);\n    }\n#endif\n\n#ifdef TRANSLUCENT\n    if (inTranslucencyRectangle())\n    {\n      vec4 alphaByDistance = gl_FrontFacing ? u_frontFaceAlphaByDistance : u_backFaceAlphaByDistance;\n      finalColor.a *= interpolateByDistance(alphaByDistance, v_distance);\n    }\n#endif\n    \n    gl_FragColor =  finalColor;\n}\n\n\n#ifdef SHOW_REFLECTIVE_OCEAN\n\nfloat waveFade(float edge0, float edge1, float x)\n{\n    float y = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return pow(1.0 - y, 5.0);\n}\n\nfloat linearFade(float edge0, float edge1, float x)\n{\n    return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n}\n\n// Based on water rendering by Jonas Wagner:\n// http://29a.ch/2012/7/19/webgl-terrain-rendering-water-fog\n\n// low altitude wave settings\nconst float oceanFrequencyLowAltitude = 825000.0;\nconst float oceanAnimationSpeedLowAltitude = 0.004;\nconst float oceanOneOverAmplitudeLowAltitude = 1.0 / 2.0;\nconst float oceanSpecularIntensity = 0.5;\n\n// high altitude wave settings\nconst float oceanFrequencyHighAltitude = 125000.0;\nconst float oceanAnimationSpeedHighAltitude = 0.008;\nconst float oceanOneOverAmplitudeHighAltitude = 1.0 / 2.0;\n\nvec4 computeWaterColor(vec3 positionEyeCoordinates, vec2 textureCoordinates, mat3 enuToEye, vec4 imageryColor, float maskValue, float fade)\n{\n    vec3 positionToEyeEC = -positionEyeCoordinates;\n    float positionToEyeECLength = length(positionToEyeEC);\n\n    // The double normalize below works around a bug in Firefox on Android devices.\n    vec3 normalizedPositionToEyeEC = normalize(normalize(positionToEyeEC));\n\n    // Fade out the waves as the camera moves far from the surface.\n    float waveIntensity = waveFade(70000.0, 1000000.0, positionToEyeECLength);\n\n#ifdef SHOW_OCEAN_WAVES\n    // high altitude waves\n    float time = czm_frameNumber * oceanAnimationSpeedHighAltitude;\n    vec4 noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyHighAltitude, time, 0.0);\n    vec3 normalTangentSpaceHighAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeHighAltitude);\n\n    // low altitude waves\n    time = czm_frameNumber * oceanAnimationSpeedLowAltitude;\n    noise = czm_getWaterNoise(u_oceanNormalMap, textureCoordinates * oceanFrequencyLowAltitude, time, 0.0);\n    vec3 normalTangentSpaceLowAltitude = vec3(noise.xy, noise.z * oceanOneOverAmplitudeLowAltitude);\n\n    // blend the 2 wave layers based on distance to surface\n    float highAltitudeFade = linearFade(0.0, 60000.0, positionToEyeECLength);\n    float lowAltitudeFade = 1.0 - linearFade(20000.0, 60000.0, positionToEyeECLength);\n    vec3 normalTangentSpace =\n        (highAltitudeFade * normalTangentSpaceHighAltitude) +\n        (lowAltitudeFade * normalTangentSpaceLowAltitude);\n    normalTangentSpace = normalize(normalTangentSpace);\n\n    // fade out the normal perturbation as we move farther from the water surface\n    normalTangentSpace.xy *= waveIntensity;\n    normalTangentSpace = normalize(normalTangentSpace);\n#else\n    vec3 normalTangentSpace = vec3(0.0, 0.0, 1.0);\n#endif\n\n    vec3 normalEC = enuToEye * normalTangentSpace;\n\n    const vec3 waveHighlightColor = vec3(0.3, 0.45, 0.6);\n\n    // Use diffuse light to highlight the waves\n    float diffuseIntensity = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC) * maskValue;\n    vec3 diffuseHighlight = waveHighlightColor * diffuseIntensity * (1.0 - fade);\n\n#ifdef SHOW_OCEAN_WAVES\n    // Where diffuse light is low or non-existent, use wave highlights based solely on\n    // the wave bumpiness and no particular light direction.\n    float tsPerturbationRatio = normalTangentSpace.z;\n    vec3 nonDiffuseHighlight = mix(waveHighlightColor * 5.0 * (1.0 - tsPerturbationRatio), vec3(0.0), diffuseIntensity);\n#else\n    vec3 nonDiffuseHighlight = vec3(0.0);\n#endif\n\n    // Add specular highlights in 3D, and in all modes when zoomed in.\n    float specularIntensity = czm_getSpecular(czm_lightDirectionEC, normalizedPositionToEyeEC, normalEC, 10.0);\n    float surfaceReflectance = mix(0.0, mix(u_zoomedOutOceanSpecularIntensity, oceanSpecularIntensity, waveIntensity), maskValue);\n    float specular = specularIntensity * surfaceReflectance;\n\n#ifdef HDR\n    specular *= 1.4;\n\n    float e = 0.2;\n    float d = 3.3;\n    float c = 1.7;\n\n    vec3 color = imageryColor.rgb + (c * (vec3(e) + imageryColor.rgb * d) * (diffuseHighlight + nonDiffuseHighlight + specular));\n#else\n    vec3 color = imageryColor.rgb + diffuseHighlight + nonDiffuseHighlight + specular;\n#endif\n\n    return vec4(color, imageryColor.a);\n}\n\n#endif // #ifdef SHOW_REFLECTIVE_OCEAN\n",gXe="#ifdef QUANTIZATION_BITS12\nattribute vec4 compressed0;\nattribute float compressed1;\n#else\nattribute vec4 position3DAndHeight;\nattribute vec4 textureCoordAndEncodedNormals;\n#endif\n\n#ifdef GEODETIC_SURFACE_NORMALS\nattribute vec3 geodeticSurfaceNormal;\n#endif\n\n#ifdef EXAGGERATION\nuniform vec2 u_terrainExaggerationAndRelativeHeight;\n#endif\n\nuniform vec3 u_center3D;\nuniform mat4 u_modifiedModelView;\nuniform mat4 u_modifiedModelViewProjection;\nuniform vec4 u_tileRectangle;\n\n// Uniforms for 2D Mercator projection\nuniform vec2 u_southAndNorthLatitude;\nuniform vec2 u_southMercatorYAndOneOverHeight;\n\nvarying vec3 v_positionMC;\nvarying vec3 v_positionEC;\n\nvarying vec3 v_textureCoordinates;\nvarying vec3 v_normalMC;\nvarying vec3 v_normalEC;\n\n#ifdef APPLY_MATERIAL\nvarying float v_slope;\nvarying float v_aspect;\nvarying float v_height;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\nvarying float v_distance;\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE)\nvarying vec3 v_atmosphereRayleighColor;\nvarying vec3 v_atmosphereMieColor;\nvarying float v_atmosphereOpacity;\n#endif\n\n// These functions are generated at runtime.\nvec4 getPosition(vec3 position, float height, vec2 textureCoordinates);\nfloat get2DYPositionFraction(vec2 textureCoordinates);\n\nvec4 getPosition3DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return u_modifiedModelViewProjection * vec4(position, 1.0);\n}\n\nfloat get2DMercatorYPositionFraction(vec2 textureCoordinates)\n{\n    // The width of a tile at level 11, in radians and assuming a single root tile, is\n    //   2.0 * czm_pi / pow(2.0, 11.0)\n    // We want to just linearly interpolate the 2D position from the texture coordinates\n    // when we're at this level or higher.  The constant below is the expression\n    // above evaluated and then rounded up at the 4th significant digit.\n    const float maxTileWidth = 0.003068;\n    float positionFraction = textureCoordinates.y;\n    float southLatitude = u_southAndNorthLatitude.x;\n    float northLatitude = u_southAndNorthLatitude.y;\n    if (northLatitude - southLatitude > maxTileWidth)\n    {\n        float southMercatorY = u_southMercatorYAndOneOverHeight.x;\n        float oneOverMercatorHeight = u_southMercatorYAndOneOverHeight.y;\n\n        float currentLatitude = mix(southLatitude, northLatitude, textureCoordinates.y);\n        currentLatitude = clamp(currentLatitude, -czm_webMercatorMaxLatitude, czm_webMercatorMaxLatitude);\n        positionFraction = czm_latitudeToWebMercatorFraction(currentLatitude, southMercatorY, oneOverMercatorHeight);\n    }\n    return positionFraction;\n}\n\nfloat get2DGeographicYPositionFraction(vec2 textureCoordinates)\n{\n    return textureCoordinates.y;\n}\n\nvec4 getPositionPlanarEarth(vec3 position, float height, vec2 textureCoordinates)\n{\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 rtcPosition2D = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    return u_modifiedModelViewProjection * rtcPosition2D;\n}\n\nvec4 getPosition2DMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, 0.0, textureCoordinates);\n}\n\nvec4 getPositionColumbusViewMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    return getPositionPlanarEarth(position, height, textureCoordinates);\n}\n\nvec4 getPositionMorphingMode(vec3 position, float height, vec2 textureCoordinates)\n{\n    // We do not do RTC while morphing, so there is potential for jitter.\n    // This is unlikely to be noticeable, though.\n    vec3 position3DWC = position + u_center3D;\n    float yPositionFraction = get2DYPositionFraction(textureCoordinates);\n    vec4 position2DWC = vec4(height, mix(u_tileRectangle.st, u_tileRectangle.pq, vec2(textureCoordinates.x, yPositionFraction)), 1.0);\n    vec4 morphPosition = czm_columbusViewMorph(position2DWC, vec4(position3DWC, 1.0), czm_morphTime);\n    return czm_modelViewProjection * morphPosition;\n}\n\n#ifdef QUANTIZATION_BITS12\nuniform vec2 u_minMaxHeight;\nuniform mat4 u_scaleAndBias;\n#endif\n\nvoid main()\n{\n#ifdef QUANTIZATION_BITS12\n    vec2 xy = czm_decompressTextureCoordinates(compressed0.x);\n    vec2 zh = czm_decompressTextureCoordinates(compressed0.y);\n    vec3 position = vec3(xy, zh.x);\n    float height = zh.y;\n    vec2 textureCoordinates = czm_decompressTextureCoordinates(compressed0.z);\n\n    height = height * (u_minMaxHeight.y - u_minMaxHeight.x) + u_minMaxHeight.x;\n    position = (u_scaleAndBias * vec4(position, 1.0)).xyz;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = compressed1;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = czm_decompressTextureCoordinates(compressed0.w).x;\n    float encodedNormal = 0.0;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = compressed0.w;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#else\n    // A single float per element\n    vec3 position = position3DAndHeight.xyz;\n    float height = position3DAndHeight.w;\n    vec2 textureCoordinates = textureCoordAndEncodedNormals.xy;\n\n#if (defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)) && defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = textureCoordAndEncodedNormals.w;\n#elif defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = textureCoordAndEncodedNormals.z;\n#elif defined(INCLUDE_WEB_MERCATOR_Y)\n    float webMercatorT = textureCoordAndEncodedNormals.z;\n    float encodedNormal = 0.0;\n#else\n    float webMercatorT = textureCoordinates.y;\n    float encodedNormal = 0.0;\n#endif\n\n#endif\n\n    vec3 position3DWC = position + u_center3D;\n\n#ifdef GEODETIC_SURFACE_NORMALS\n    vec3 ellipsoidNormal = geodeticSurfaceNormal;\n#else\n    vec3 ellipsoidNormal = normalize(position3DWC);\n#endif\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    float exaggeration = u_terrainExaggerationAndRelativeHeight.x;\n    float relativeHeight = u_terrainExaggerationAndRelativeHeight.y;\n    float newHeight = (height - relativeHeight) * exaggeration + relativeHeight;\n\n    // stop from going through center of earth\n    float minRadius = min(min(czm_ellipsoidRadii.x, czm_ellipsoidRadii.y), czm_ellipsoidRadii.z);\n    newHeight = max(newHeight, -minRadius);\n\n    vec3 offset = ellipsoidNormal * (newHeight - height);\n    position += offset;\n    position3DWC += offset;\n    height = newHeight;\n#endif\n\n    gl_Position = getPosition(position, height, textureCoordinates);\n\n    v_positionEC = (u_modifiedModelView * vec4(position, 1.0)).xyz;\n    v_positionMC = position3DWC;  // position in model coordinates\n\n    v_textureCoordinates = vec3(textureCoordinates, webMercatorT);\n\n#if defined(ENABLE_VERTEX_LIGHTING) || defined(GENERATE_POSITION_AND_NORMAL) || defined(APPLY_MATERIAL)\n    vec3 normalMC = czm_octDecode(encodedNormal);\n\n#if defined(EXAGGERATION) && defined(GEODETIC_SURFACE_NORMALS)\n    vec3 projection = dot(normalMC, ellipsoidNormal) * ellipsoidNormal;\n    vec3 rejection = normalMC - projection;\n    normalMC = normalize(projection + rejection * exaggeration);\n#endif\n\n    v_normalMC = normalMC;\n    v_normalEC = czm_normal3D * v_normalMC;\n#endif\n\n#if defined(FOG) || (defined(GROUND_ATMOSPHERE) && !defined(PER_FRAGMENT_GROUND_ATMOSPHERE))\n\n    bool dynamicLighting = false;\n\n    #if defined(DYNAMIC_ATMOSPHERE_LIGHTING) && (defined(ENABLE_DAYNIGHT_SHADING) || defined(ENABLE_VERTEX_LIGHTING))\n        dynamicLighting = true;\n    #endif\n\n#if defined(DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN)\n    vec3 atmosphereLightDirection = czm_sunDirectionWC;\n#else\n    vec3 atmosphereLightDirection = czm_lightDirectionWC;\n#endif\n\n    vec3 lightDirection = czm_branchFreeTernary(dynamicLighting, atmosphereLightDirection, normalize(position3DWC));\n\n    computeAtmosphereScattering(\n        position3DWC,\n        lightDirection,\n        v_atmosphereRayleighColor,\n        v_atmosphereMieColor,\n        v_atmosphereOpacity\n    );\n#endif\n\n#if defined(FOG) || defined(GROUND_ATMOSPHERE) || defined(UNDERGROUND_COLOR) || defined(TRANSLUCENT)\n    v_distance = length((czm_modelView3D * vec4(position3DWC, 1.0)).xyz);\n#endif\n\n#ifdef APPLY_MATERIAL\n    float northPoleZ = czm_ellipsoidRadii.z;\n    vec3 northPolePositionMC = vec3(0.0, 0.0, northPoleZ);\n    vec3 vectorEastMC = normalize(cross(northPolePositionMC - v_positionMC, ellipsoidNormal));\n    float dotProd = abs(dot(ellipsoidNormal, v_normalMC));\n    v_slope = acos(dotProd);\n    vec3 normalRejected = ellipsoidNormal * dotProd;\n    vec3 normalProjected = v_normalMC - normalRejected;\n    vec3 aspectVector = normalize(normalProjected);\n    v_aspect = acos(dot(aspectVector, vectorEastMC));\n    float determ = dot(cross(vectorEastMC, aspectVector), ellipsoidNormal);\n    v_aspect = czm_branchFreeTernary(determ < 0.0, 2.0 * czm_pi - v_aspect, v_aspect);\n    v_height = height;\n#endif\n}\n",bXe="uniform vec3 u_radiiAndDynamicAtmosphereColor;\n\nuniform float u_atmosphereLightIntensity;\nuniform float u_atmosphereRayleighScaleHeight;\nuniform float u_atmosphereMieScaleHeight;\nuniform float u_atmosphereMieAnisotropy;\nuniform vec3 u_atmosphereRayleighCoefficient;\nuniform vec3 u_atmosphereMieCoefficient;\n\nconst float ATMOSPHERE_THICKNESS = 111e3; // The thickness of the atmosphere in meters.\nconst int PRIMARY_STEPS = 16; // Number of times the ray from the camera to the world position (primary ray) is sampled.\nconst int LIGHT_STEPS = 4; // Number of times the light is sampled from the light source's intersection with the atmosphere to a sample position on the primary ray.\n\n/**\n * This function computes the colors contributed by Rayliegh and Mie scattering on a given ray, as well as\n * the transmittance value for the ray.\n *\n * @param {czm_ray} primaryRay The ray from the camera to the position.\n * @param {float} primaryRayLength The length of the primary ray.\n * @param {vec3} lightDirection The direction of the light to calculate the scattering from.\n * @param {vec3} rayleighColor The variable the Rayleigh scattering will be written to.\n * @param {vec3} mieColor The variable the Mie scattering will be written to.\n * @param {float} opacity The variable the transmittance will be written to.\n * @glslFunction\n */\nvoid computeScattering(\n    czm_ray primaryRay,\n    float primaryRayLength,\n    vec3 lightDirection,\n    float atmosphereInnerRadius,\n    out vec3 rayleighColor,\n    out vec3 mieColor,\n    out float opacity\n) {\n\n    // Initialize the default scattering amounts to 0.\n    rayleighColor = vec3(0.0);\n    mieColor = vec3(0.0);\n    opacity = 0.0;\n\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n\n    vec3 origin = vec3(0.0);\n\n    // Calculate intersection from the camera to the outer ring of the atmosphere.\n    czm_raySegment primaryRayAtmosphereIntersect = czm_raySphereIntersectionInterval(primaryRay, origin, atmosphereOuterRadius);\n\n    // Return empty colors if no intersection with the atmosphere geometry.\n    if (primaryRayAtmosphereIntersect == czm_emptyRaySegment) {\n        return;\n    }\n\n    // The ray should start from the first intersection with the outer atmopshere, or from the camera position, if it is inside the atmosphere.\n    primaryRayAtmosphereIntersect.start = max(primaryRayAtmosphereIntersect.start, 0.0);\n    // The ray should end at the exit from the atmosphere or at the distance to the vertex, whichever is smaller.\n    primaryRayAtmosphereIntersect.stop = min(primaryRayAtmosphereIntersect.stop, length(primaryRayLength));\n\n    // Setup for sampling positions along the ray - starting from the intersection with the outer ring of the atmosphere.\n    float rayStepLength = (primaryRayAtmosphereIntersect.stop - primaryRayAtmosphereIntersect.start) / float(PRIMARY_STEPS);\n    float rayPositionLength = primaryRayAtmosphereIntersect.start;\n\n    vec3 rayleighAccumulation = vec3(0.0);\n    vec3 mieAccumulation = vec3(0.0);\n    vec2 opticalDepth = vec2(0.0);\n    vec2 heightScale = vec2(u_atmosphereRayleighScaleHeight, u_atmosphereMieScaleHeight);\n\n    // Sample positions on the primary ray.\n    for (int i = 0; i < PRIMARY_STEPS; i++) {\n        // Calculate sample position along viewpoint ray.\n        vec3 samplePosition = primaryRay.origin + primaryRay.direction * (rayPositionLength + rayStepLength);\n        \n        // Calculate height of sample position above ellipsoid.\n        float sampleHeight = length(samplePosition) - atmosphereInnerRadius;\n\n        // Calculate and accumulate density of particles at the sample position.\n        vec2 sampleDensity = exp(-sampleHeight / heightScale) * rayStepLength;\n        opticalDepth += sampleDensity;\n\n        // Generate ray from the sample position segment to the light source, up to the outer ring of the atmosphere.\n        czm_ray lightRay = czm_ray(samplePosition, lightDirection);\n        czm_raySegment lightRayAtmosphereIntersect = czm_raySphereIntersectionInterval(lightRay, origin, atmosphereOuterRadius);\n        \n        float lightStepLength = lightRayAtmosphereIntersect.stop / float(LIGHT_STEPS);\n        float lightPositionLength = 0.0;\n\n        vec2 lightOpticalDepth = vec2(0.0);\n\n        // Sample positions along the light ray, to accumulate incidence of light on the latest sample segment.\n        for (int j = 0; j < LIGHT_STEPS; j++) {\n\n            // Calculate sample position along light ray.\n            vec3 lightPosition = samplePosition + lightDirection * (lightPositionLength + lightStepLength * 0.5);\n\n            // Calculate height of the light sample position above ellipsoid.\n            float lightHeight = length(lightPosition) - atmosphereInnerRadius;\n\n            // Calculate density of photons at the light sample position.\n            lightOpticalDepth += exp(-lightHeight / heightScale) * lightStepLength;\n\n            // Increment distance on light ray.\n            lightPositionLength += lightStepLength;\n        }\n\n        // Compute attenuation via the primary ray and the light ray.\n        vec3 attenuation = exp(-((u_atmosphereMieCoefficient * (opticalDepth.y + lightOpticalDepth.y)) + (u_atmosphereRayleighCoefficient * (opticalDepth.x + lightOpticalDepth.x))));\n\n        // Accumulate the scattering.\n        rayleighAccumulation += sampleDensity.x * attenuation;\n        mieAccumulation += sampleDensity.y * attenuation;\n\n        // Increment distance on primary ray.\n        rayPositionLength += rayStepLength;\n    }\n\n    // Compute the scattering amount.\n    rayleighColor = u_atmosphereRayleighCoefficient * rayleighAccumulation;\n    mieColor = u_atmosphereMieCoefficient * mieAccumulation;\n\n    // Compute the transmittance i.e. how much light is passing through the atmosphere.\n    opacity = length(exp(-((u_atmosphereMieCoefficient * opticalDepth.y) + (u_atmosphereRayleighCoefficient * opticalDepth.x))));\n}\n\nvec4 computeAtmosphereColor(\n    vec3 positionWC,\n    vec3 lightDirection,\n    vec3 rayleighColor,\n    vec3 mieColor,\n    float opacity\n) {\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n\n    float cosAngle = dot(cameraToPositionWCDirection, lightDirection);\n    float cosAngleSq = cosAngle * cosAngle;\n\n    float G = u_atmosphereMieAnisotropy;\n    float GSq = G * G;\n\n    // The Rayleigh phase function.\n    float rayleighPhase = 3.0 / (50.2654824574) * (1.0 + cosAngleSq);\n    // The Mie phase function.\n    float miePhase = 3.0 / (25.1327412287) * ((1.0 - GSq) * (cosAngleSq + 1.0)) / (pow(1.0 + GSq - 2.0 * cosAngle * G, 1.5) * (2.0 + GSq));\n\n    // The final color is generated by combining the effects of the Rayleigh and Mie scattering.\n    vec3 rayleigh = rayleighPhase * rayleighColor;\n    vec3 mie = miePhase * mieColor;\n\n    vec3 color = (rayleigh + mie) * u_atmosphereLightIntensity;\n\n    return vec4(color, opacity);\n}\n",yXe="void computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity) {\n\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n    \n    float atmosphereInnerRadius = length(positionWC);\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n}\n";const vXe=new Gt;function OXe(e,t){i["a"].typeOf.object("clippingPlaneCollection",e),i["a"].typeOf.object("context",t);const n=e.unionClippingRegions,o=e.length,r=A4.useFloatTexture(t),a=A4.getTextureResolution(e,t,vXe),s=a.x,c=a.y;let l=r?TXe(s,c):CXe(s,c);return l+="\n",l+=n?AXe(o):wXe(o),l}function AXe(e){const t=`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount;\n    float pixelWidth = czm_metersPerPixel(position);\n    bool breakAndDiscard = false;\n    for (int i = 0; i < ${e}; ++i)\n`+"    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = czm_branchFreeTernary(i == 0, amount, min(amount, clipAmount));\n        if (amount <= 0.0)\n        {\n           breakAndDiscard = true;\n           break;\n        }\n    }\n    if (breakAndDiscard) {\n        discard;\n    }\n    return clipAmount;\n}\n";return t}function wXe(e){const t=`float clip(vec4 fragCoord, sampler2D clippingPlanes, mat4 clippingPlanesMatrix)\n{\n    bool clipped = true;\n    vec4 position = czm_windowToEyeCoordinates(fragCoord);\n    vec3 clipNormal = vec3(0.0);\n    vec3 clipPosition = vec3(0.0);\n    float clipAmount = 0.0;\n    float pixelWidth = czm_metersPerPixel(position);\n    for (int i = 0; i < ${e}; ++i)\n`+"    {\n        vec4 clippingPlane = getClippingPlane(clippingPlanes, i, clippingPlanesMatrix);\n        clipNormal = clippingPlane.xyz;\n        clipPosition = -clippingPlane.w * clipNormal;\n        float amount = dot(clipNormal, (position.xyz - clipPosition)) / pixelWidth;\n        clipAmount = max(amount, clipAmount);\n        clipped = clipped && (amount <= 0.0);\n    }\n    if (clipped)\n    {\n        discard;\n    }\n    return clipAmount;\n}\n";return t}function TXe(e,t){const n=1/e,i=1/t;let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");let r=`${i}`;-1===r.indexOf(".")&&(r+=".0");const a=`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int pixY = clippingPlaneNumber / ${e};\n`+`    int pixX = clippingPlaneNumber - (pixY * ${e});\n`+`    float u = (float(pixX) + 0.5) * ${o};\n`+`    float v = (float(pixY) + 0.5) * ${r};\n`+"    vec4 plane = texture2D(packedClippingPlanes, vec2(u, v));\n    return czm_transformPlane(plane, transform);\n}\n";return a}function CXe(e,t){const n=1/e,i=1/t;let o=`${n}`;-1===o.indexOf(".")&&(o+=".0");let r=`${i}`;-1===r.indexOf(".")&&(r+=".0");const a=`vec4 getClippingPlane(highp sampler2D packedClippingPlanes, int clippingPlaneNumber, mat4 transform)\n{\n    int clippingPlaneStartIndex = clippingPlaneNumber * 2;\n    int pixY = clippingPlaneStartIndex / ${e};\n`+`    int pixX = clippingPlaneStartIndex - (pixY * ${e});\n`+`    float u = (float(pixX) + 0.5) * ${o};\n`+`    float v = (float(pixY) + 0.5) * ${r};\n`+"    vec4 oct32 = texture2D(packedClippingPlanes, vec2(u, v)) * 255.0;\n    vec2 oct = vec2(oct32.x * 256.0 + oct32.y, oct32.z * 256.0 + oct32.w);\n    vec4 plane;\n    plane.xyz = czm_octDecode(oct, 65535.0);\n"+`    plane.w = czm_unpackFloat(texture2D(packedClippingPlanes, vec2(u + ${o}, v)));\n`+"    return czm_transformPlane(plane, transform);\n}\n";return a}var EXe=OXe;function xXe(e,t,n,i,o){this.numberOfDayTextures=e,this.flags=t,this.material=n,this.shaderProgram=i,this.clippingShaderState=o}function SXe(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}function IXe(e){const t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }",n="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }",i="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }";let o;switch(e){case SH.SCENE3D:o=t;break;case SH.SCENE2D:case SH.COLUMBUS_VIEW:o=n;break;case SH.MORPHING:o=i;break}return o}function DXe(e){const t="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }",n="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }";return e?n:t}SXe.prototype.getShaderProgram=function(e){const t=e.frameState,n=e.surfaceTile,i=e.numberOfDayTextures,o=e.applyBrightness,a=e.applyContrast,s=e.applyHue,c=e.applySaturation,l=e.applyGamma,u=e.applyAlpha,h=e.applyDayNightAlpha,d=e.applySplit,f=e.showReflectiveOcean,p=e.showOceanWaves,m=e.enableLighting,_=e.dynamicAtmosphereLighting,g=e.dynamicAtmosphereLightingFromSun,b=e.showGroundAtmosphere,y=e.perFragmentGroundAtmosphere,v=e.hasVertexNormals,O=e.useWebMercatorProjection,A=e.enableFog,w=e.enableClippingPlanes,T=e.clippingPlanes,C=e.clippedByBoundaries,E=e.hasImageryLayerCutout,x=e.colorCorrect,S=e.highlightFillTile,I=e.colorToAlpha,D=e.hasGeodeticSurfaceNormals,P=e.hasExaggeration,j=e.showUndergroundColor,R=e.translucent;let L=0,M="";const N=n.renderedMesh,B=N.encoding,F=B.quantization;F===yc.BITS12&&(L=1,M="QUANTIZATION_BITS12");let z=0,k="";C&&(z=1,k="TILE_LIMIT_RECTANGLE");let U=0,V="";E&&(U=1,V="APPLY_IMAGERY_CUTOUT");const H=t.mode,G=H|o<<2|a<<3|s<<4|c<<5|l<<6|u<<7|f<<8|p<<9|m<<10|_<<11|g<<12|b<<13|y<<14|v<<15|O<<16|A<<17|L<<18|d<<19|w<<20|z<<21|U<<22|x<<23|S<<24|I<<25|D<<26|P<<27|j<<28|R<<29|h<<30;let W=0;Object(r["a"])(T)&&T.length>0&&(W=w?T.clippingPlanesState:0);let q=n.surfaceShader;if(Object(r["a"])(q)&&q.numberOfDayTextures===i&&q.flags===G&&q.material===this.material&&q.clippingShaderState===W)return q.shaderProgram;let Y=this._shadersByTexturesFlags[i];if(Object(r["a"])(Y)||(Y=this._shadersByTexturesFlags[i]=[]),q=Y[G],!Object(r["a"])(q)||q.material!==this.material||q.clippingShaderState!==W){const e=this.baseVertexShaderSource.clone(),n=this.baseFragmentShaderSource.clone();0!==W&&n.sources.unshift(EXe(T,t.context)),e.defines.push(M),n.defines.push(`TEXTURE_UNITS ${i}`,k,V),o&&n.defines.push("APPLY_BRIGHTNESS"),a&&n.defines.push("APPLY_CONTRAST"),s&&n.defines.push("APPLY_HUE"),c&&n.defines.push("APPLY_SATURATION"),l&&n.defines.push("APPLY_GAMMA"),u&&n.defines.push("APPLY_ALPHA"),h&&n.defines.push("APPLY_DAY_NIGHT_ALPHA"),f&&(n.defines.push("SHOW_REFLECTIVE_OCEAN"),e.defines.push("SHOW_REFLECTIVE_OCEAN")),p&&n.defines.push("SHOW_OCEAN_WAVES"),I&&n.defines.push("APPLY_COLOR_TO_ALPHA"),j&&(e.defines.push("UNDERGROUND_COLOR"),n.defines.push("UNDERGROUND_COLOR")),R&&(e.defines.push("TRANSLUCENT"),n.defines.push("TRANSLUCENT")),m&&(v?(e.defines.push("ENABLE_VERTEX_LIGHTING"),n.defines.push("ENABLE_VERTEX_LIGHTING")):(e.defines.push("ENABLE_DAYNIGHT_SHADING"),n.defines.push("ENABLE_DAYNIGHT_SHADING"))),_&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),g&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"),n.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"))),b&&(e.defines.push("GROUND_ATMOSPHERE"),n.defines.push("GROUND_ATMOSPHERE"),y&&(e.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"),n.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"))),e.defines.push("INCLUDE_WEB_MERCATOR_Y"),n.defines.push("INCLUDE_WEB_MERCATOR_Y"),A&&(e.defines.push("FOG"),n.defines.push("FOG")),d&&n.defines.push("APPLY_SPLIT"),w&&n.defines.push("ENABLE_CLIPPING_PLANES"),x&&n.defines.push("COLOR_CORRECT"),S&&n.defines.push("HIGHLIGHT_FILL_TILE"),D&&e.defines.push("GEODETIC_SURFACE_NORMALS"),P&&e.defines.push("EXAGGERATION");let r="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend)\n    {\n        vec4 color = initialColor;\n";E&&(r+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(let t=0;t<i;++t)r+=E?`        cutoutAndColorResult = u_dayTextureCutoutRectangles[${t}];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n`:"        color = sampleAndBlend(\n",r+=`            color,\n            u_dayTextures[${t}],\n            u_dayTextureUseWebMercatorT[${t}] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle[${t}],\n            u_dayTextureTranslationAndScale[${t}],\n            ${u?`u_dayTextureAlpha[${t}]`:"1.0"},\n            ${h?`u_dayTextureNightAlpha[${t}]`:"1.0"},\n${h?`u_dayTextureDayAlpha[${t}]`:"1.0"},\n${o?`u_dayTextureBrightness[${t}]`:"0.0"},\n            ${a?`u_dayTextureContrast[${t}]`:"0.0"},\n            ${s?`u_dayTextureHue[${t}]`:"0.0"},\n            ${c?`u_dayTextureSaturation[${t}]`:"0.0"},\n            ${l?`u_dayTextureOneOverGamma[${t}]`:"0.0"},\n            ${d?`u_dayTextureSplit[${t}]`:"0.0"},\n            ${I?`u_colorsToAlpha[${t}]`:"vec4(0.0)"},\n        nightBlend        );\n`,E&&(r+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");r+="        return color;\n    }",n.sources.push(r),e.sources.push(IXe(H)),e.sources.push(DXe(O));const C=Nz.fromCache({context:t.context,vertexShaderSource:e,fragmentShaderSource:n,attributeLocations:B.getAttributeLocations()});q=Y[G]=new xXe(i,G,this.material,C,W)}return n.surfaceShader=q,q.shaderProgram},SXe.prototype.destroy=function(){let e,t;const n=this._shadersByTexturesFlags;for(const i in n)if(n.hasOwnProperty(i)){const o=n[i];if(!Object(r["a"])(o))continue;for(e in o)o.hasOwnProperty(e)&&(t=o[e],Object(r["a"])(t)&&t.shaderProgram.destroy())}return Wc(this)};var PXe=SXe;const jXe={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7};var RXe=Object.freeze(jXe);const LXe={START:0,LOADING:1,DONE:2,FAILED:3};var MXe=Object.freeze(LXe);const NXe={FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6};var BXe=Object.freeze(NXe);function FXe(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new be(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new g,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=BXe.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new Tt,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(FXe.prototype,{eligibleForUnloading:{get:function(){const e=this.terrainState,t=e===BXe.RECEIVING||e===BXe.TRANSFORMING;let n=!t;const i=this.imagery;for(let o=0,a=i.length;n&&o<a;++o){const e=i[o];n=!Object(r["a"])(e.loadingImagery)||e.loadingImagery.state!==RXe.TRANSITIONING}return n}},renderedMesh:{get:function(){return Object(r["a"])(this.vertexArray)?this.mesh:Object(r["a"])(this.fill)?this.fill.mesh:void 0}}});const zXe=new I;function kXe(e,t,n,i,o,a){let s=e.getExaggeratedPosition(i,o,a);if(Object(r["a"])(t)&&t!==SH.SCENE3D){const e=n.ellipsoid,t=e.cartesianToCartographic(s,zXe);s=n.project(t,a),s=g.fromElements(s.z,s.x,s.y,a)}return s}const UXe=new g,VXe=new g,HXe=new g;function GXe(e,t,n,i){const o=e.renderedMesh,r=o.vertices,a=o.encoding,s=r.length/a.stride;let c=Pc.clone(a);c.hasGeodeticSurfaceNormals=t,c=Pc.clone(c);const l=c.stride,u=new Float32Array(s*l);t?a.addGeodeticSurfaceNormals(r,u,n):a.removeGeodeticSurfaceNormals(r,u),o.vertices=u,o.stride=l;const h=o!==e.mesh;h?(FXe._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=FXe._createVertexArrayForMesh(i.context,o)):(FXe._freeVertexArray(e.vertexArray),e.vertexArray=FXe._createVertexArrayForMesh(i.context,o)),FXe._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}function WXe(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!Object(r["a"])(i)&&Object(r["a"])(e.parent)){const t=e.parent,n=t.data;Object(r["a"])(n)&&Object(r["a"])(n.terrainData)&&(i=n.terrainData.isChildAvailable(t.x,t.y,e.x,e.y))}!1===i&&(e.data.terrainState=BXe.FAILED);for(let o=0,r=n.length;o<r;++o){const i=n.get(o);i.show&&i._createTileImagerySkeletons(e,t)}}function qXe(e,t,n,i,o,a){const s=e.data,c=e.parent;if(s.terrainState===BXe.FAILED&&void 0!==c){const e=void 0!==c.data&&void 0!==c.data.terrainData&&!1!==c.data.terrainData.canUpsample;e||FXe.processStateMachine(c,t,n,i,o,a,!0)}if(s.terrainState===BXe.FAILED&&YXe(s,e,t,n,e.x,e.y,e.level),s.terrainState===BXe.UNLOADED&&XXe(s,n,e.x,e.y,e.level),s.terrainState===BXe.RECEIVED&&$Xe(s,t,n,e.x,e.y,e.level),s.terrainState===BXe.TRANSFORMED&&(JXe(s,t.context,n,e.x,e.y,e.level,a),s.updateExaggeration(e,t,o)),s.terrainState>=BXe.RECEIVED&&void 0===s.waterMaskTexture&&n.hasWaterMask){const n=s.terrainData;if(void 0!==n.waterMask)ZXe(t.context,s);else{const t=s._findAncestorTileWithTerrainData(e);Object(r["a"])(t)&&Object(r["a"])(t.data.waterMaskTexture)&&(s.waterMaskTexture=t.data.waterMaskTexture,++s.waterMaskTexture.referenceCount,s._computeWaterMaskTranslationAndScale(e,t,s.waterMaskTranslationAndScale))}}}function YXe(e,t,n,i,o,a,s){const c=t.parent;if(!c)return void(t.state=MXe.FAILED);const l=c.data.terrainData,u=c.x,h=c.y,d=c.level;if(!Object(r["a"])(l))return;const f=l.upsample(i.tilingScheme,u,h,d,o,a,s);Object(r["a"])(f)&&(e.terrainState=BXe.RECEIVING,Promise.resolve(f).then((function(t){e.terrainData=t,e.terrainState=BXe.RECEIVED})).catch((function(){e.terrainState=BXe.FAILED})))}function XXe(e,t,n,i,o){function a(t){e.terrainData=t,e.terrainState=BXe.RECEIVED,e.request=void 0}function s(r){if(e.request.state===Il["a"].CANCELLED)return e.terrainData=void 0,e.terrainState=BXe.UNLOADED,void(e.request=void 0);e.terrainState=BXe.FAILED,e.request=void 0;const a=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: "${r}"`;t._requestError=Zl.reportError(t._requestError,t,t.errorEvent,a,n,i,o),t._requestError.retry&&c()}function c(){const c=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].TERRAIN});e.request=c;const l=t.requestTileGeometry(n,i,o,c);Object(r["a"])(l)?(e.terrainState=BXe.RECEIVING,Promise.resolve(l).then((function(e){a(e)})).catch((function(e){s(e)}))):(e.terrainState=BXe.UNLOADED,e.request=void 0)}c()}FXe.prototype.pick=function(e,t,n,i,o){const a=this.renderedMesh;if(!Object(r["a"])(a))return;const s=a.vertices,c=a.indices,l=a.encoding,u=c.length;let h=Number.MAX_VALUE;for(let d=0;d<u;d+=3){const o=c[d],a=c[d+1],u=c[d+2],f=kXe(l,t,n,s,o,UXe),p=kXe(l,t,n,s,a,VXe),m=kXe(l,t,n,s,u,HXe),_=Ci.rayTriangleParametric(e,f,p,m,i);Object(r["a"])(_)&&_<h&&_>=0&&(h=_)}return h!==Number.MAX_VALUE?Yn.getPoint(e,h,o):void 0},FXe.prototype.freeResources=function(){Object(r["a"])(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=BXe.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();const e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},FXe.prototype.freeVertexArray=function(){FXe._freeVertexArray(this.vertexArray),this.vertexArray=void 0,FXe._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},FXe.initialize=function(e,t,n){let i=e.data;Object(r["a"])(i)||(i=e.data=new FXe),e.state===MXe.START&&(WXe(e,t,n),e.state=MXe.LOADING)},FXe.processStateMachine=function(e,t,n,i,o,a,s){FXe.initialize(e,n,i);const c=e.data;if(e.state===MXe.LOADING&&qXe(e,t,n,i,o,a),s)return;const l=e.renderable;e.renderable=Object(r["a"])(c.vertexArray);const u=c.terrainState===BXe.READY;e.upsampledFromParent=Object(r["a"])(c.terrainData)&&c.terrainData.wasCreatedByUpsampling();const h=c.processImagery(e,n,t);if(u&&h){const t=e._loadedCallbacks,n={};for(const i in t)t.hasOwnProperty(i)&&(t[i](e)||(n[i]=t[i]));e._loadedCallbacks=n,e.state=MXe.DONE}l&&(e.renderable=!0)},FXe.prototype.processImagery=function(e,t,n,i){const o=e.data;let a=e.upsampledFromParent,s=!1,c=!0;const l=o.imagery;let u,h;for(u=0,h=l.length;u<h;++u){const o=l[u];if(!Object(r["a"])(o.loadingImagery)){a=!1;continue}if(o.loadingImagery.state===RXe.PLACEHOLDER){const n=o.loadingImagery.imageryLayer;if(n.imageryProvider.ready){o.freeResources(),l.splice(u,1),n._createTileImagerySkeletons(e,t,u),--u,h=l.length;continue}a=!1}const d=o.processStateMachine(e,n,i);c=c&&d,s=s||d||Object(r["a"])(o.readyImagery),a=a&&Object(r["a"])(o.loadingImagery)&&(o.loadingImagery.state===RXe.FAILED||o.loadingImagery.state===RXe.INVALID)}return e.upsampledFromParent=a,e.renderable=e.renderable&&(s||c),c},FXe.prototype.addGeodeticSurfaceNormals=function(e,t){GXe(this,!0,e,t)},FXe.prototype.removeGeodeticSurfaceNormals=function(e){GXe(this,!1,void 0,e)},FXe.prototype.updateExaggeration=function(e,t,n){const i=this,o=i.renderedMesh;if(void 0===o)return;const r=t.terrainExaggeration,a=t.terrainExaggerationRelativeHeight,s=1!==r,c=o.encoding,l=c.exaggeration!==r,u=c.exaggerationRelativeHeight!==a;if(l||u){if(l)if(s&&!c.hasGeodeticSurfaceNormals){const n=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(n,t)}else!s&&c.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(c.exaggeration=r,c.exaggerationRelativeHeight=a,void 0!==n){n._tileToUpdateHeights.push(e);const t=e.customData,i=t.length;for(let e=0;e<i;e++){const n=t[e];n.level=-1}}}};const KXe={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};function $Xe(e,t,n,i,o,a){const s=n.tilingScheme,c=KXe;c.tilingScheme=s,c.x=i,c.y=o,c.level=a,c.exaggeration=t.terrainExaggeration,c.exaggerationRelativeHeight=t.terrainExaggerationRelativeHeight,c.throttle=!0;const l=e.terrainData,u=l.createMesh(c);Object(r["a"])(u)&&(e.terrainState=BXe.TRANSFORMING,Promise.resolve(u).then((function(t){e.mesh=t,e.terrainState=BXe.TRANSFORMED})).catch((function(){e.terrainState=BXe.FAILED})))}function JXe(e,t,n,i,o,r,a){e.vertexArray=FXe._createVertexArrayForMesh(t,e.mesh),e.terrainState=BXe.READY,e.fill=e.fill&&e.fill.destroy(a)}function QXe(e){let t=e.cache.tile_waterMaskData;if(!Object(r["a"])(t)){const n=lB.create({context:e,pixelFormat:fx.LUMINANCE,pixelDatatype:hx.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1;const i=new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.LINEAR,magnificationFilter:ZN.LINEAR});t={allWaterTexture:n,sampler:i,destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}function ZXe(e,t){const n=t.terrainData.waterMask,i=QXe(e);let o;const r=n.length;if(1===r){if(0===n[0])return;o=i.allWaterTexture}else{const t=Math.sqrt(r);o=lB.create({context:e,pixelFormat:fx.LUMINANCE,pixelDatatype:hx.UNSIGNED_BYTE,source:{width:t,height:t,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,be.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}FXe._createVertexArrayForMesh=function(e,t){const n=t.vertices,i=NV.createVertexBuffer({context:e,typedArray:n,usage:LV.STATIC_DRAW}),o=t.encoding.getAttributes(i),a=t.indices.indexBuffers||{};let s=a[e.id];if(!Object(r["a"])(s)||s.isDestroyed()){const n=t.indices;s=NV.createIndexBuffer({context:e,typedArray:n,usage:LV.STATIC_DRAW,indexDatatype:ll.fromSizeInBytes(n.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,a[e.id]=s,t.indices.indexBuffers=a}else++s.referenceCount;return new WV({context:e,attributes:o,indexBuffer:s})},FXe._freeVertexArray=function(e){if(Object(r["a"])(e)){const t=e.indexBuffer;e.isDestroyed()||e.destroy(),Object(r["a"])(t)&&!t.isDestroyed()&&Object(r["a"])(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},FXe.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;while(Object(r["a"])(t)&&(!Object(r["a"])(t.data)||!Object(r["a"])(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling()))t=t.parent;return t},FXe.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){const i=t.rectangle,o=e.rectangle,r=o.width,a=o.height,s=r/i.width,c=a/i.height;return n.x=s*(o.west-i.west)/r,n.y=c*(o.south-i.south)/a,n.z=s,n.w=c,n};var eKe=FXe,tKe="uniform sampler2D u_texture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    gl_FragColor = texture2D(u_texture, v_textureCoordinates);\n}\n",nKe="attribute vec4 position;\nattribute float webMercatorT;\n\nuniform vec2 u_textureDimensions;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    v_textureCoordinates = vec2(position.x, webMercatorT);\n    gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0));\n}\n";function iKe(e,t,n,i,o){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=i,this.request=void 0,0!==i){const o=t/2|0,r=n/2|0,a=i-1;this.parent=e.getImageryFromCache(o,r,a)}if(this.state=RXe.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!Object(r["a"])(o)&&e.imageryProvider.ready){const r=e.imageryProvider.tilingScheme;o=r.tileXYToRectangle(t,n,i)}this.rectangle=o}iKe.createPlaceholder=function(e){const t=new iKe(e,0,0,0);return t.addReference(),t.state=RXe.PLACEHOLDER,t},iKe.prototype.addReference=function(){++this.referenceCount},iKe.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),Object(r["a"])(this.parent)&&this.parent.releaseReference(),Object(r["a"])(this.image)&&Object(r["a"])(this.image.destroy)&&this.image.destroy(),Object(r["a"])(this.texture)&&this.texture.destroy(),Object(r["a"])(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),Wc(this),0):this.referenceCount},iKe.prototype.processStateMachine=function(e,t,n){this.state!==RXe.UNLOADED||n||(this.state=RXe.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===RXe.RECEIVED&&(this.state=RXe.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const i=this.state===RXe.READY&&t&&!this.texture;(this.state===RXe.TEXTURE_LOADED||i)&&(this.state=RXe.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};var oKe=iKe;function rKe(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}rKe.prototype.freeResources=function(){Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),Object(r["a"])(this.loadingImagery)&&this.loadingImagery.releaseReference()},rKe.prototype.processStateMachine=function(e,t,n){const i=this.loadingImagery,o=i.imageryLayer;if(i.processStateMachine(t,!this.useWebMercatorT,n),i.state===RXe.READY)return Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;let a,s=i.parent;while(Object(r["a"])(s)&&(s.state!==RXe.READY||!this.useWebMercatorT&&!Object(r["a"])(s.texture)))s.state!==RXe.FAILED&&s.state!==RXe.INVALID&&(a=a||s),s=s.parent;return this.readyImagery!==s&&(Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=s,Object(r["a"])(s)&&(s.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),(i.state===RXe.FAILED||i.state===RXe.INVALID)&&(!Object(r["a"])(a)||(a.processStateMachine(t,!this.useWebMercatorT,n),!1))};var aKe=rKe;function sKe(e,t){this._imageryProvider=e,t=Object(o["a"])(t,o["a"].EMPTY_OBJECT),this.alpha=Object(o["a"])(t.alpha,Object(o["a"])(e.defaultAlpha,1)),this.nightAlpha=Object(o["a"])(t.nightAlpha,Object(o["a"])(e.defaultNightAlpha,1)),this.dayAlpha=Object(o["a"])(t.dayAlpha,Object(o["a"])(e.defaultDayAlpha,1)),this.brightness=Object(o["a"])(t.brightness,Object(o["a"])(e.defaultBrightness,sKe.DEFAULT_BRIGHTNESS)),this.contrast=Object(o["a"])(t.contrast,Object(o["a"])(e.defaultContrast,sKe.DEFAULT_CONTRAST)),this.hue=Object(o["a"])(t.hue,Object(o["a"])(e.defaultHue,sKe.DEFAULT_HUE)),this.saturation=Object(o["a"])(t.saturation,Object(o["a"])(e.defaultSaturation,sKe.DEFAULT_SATURATION)),this.gamma=Object(o["a"])(t.gamma,Object(o["a"])(e.defaultGamma,sKe.DEFAULT_GAMMA)),this.splitDirection=Object(o["a"])(t.splitDirection,Object(o["a"])(e.defaultSplit,sKe.DEFAULT_SPLIT)),this.minificationFilter=Object(o["a"])(t.minificationFilter,Object(o["a"])(e.defaultMinificationFilter,sKe.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=Object(o["a"])(t.magnificationFilter,Object(o["a"])(e.defaultMagnificationFilter,sKe.DEFAULT_MAGNIFICATION_FILTER)),this.show=Object(o["a"])(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=Object(o["a"])(t.rectangle,Fe.MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new aKe(oKe.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=Object(o["a"])(t.colorToAlphaThreshold,sKe.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(sKe.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},rectangle:{get:function(){return this._rectangle}}}),sKe.DEFAULT_BRIGHTNESS=1,sKe.DEFAULT_CONTRAST=1,sKe.DEFAULT_HUE=0,sKe.DEFAULT_SATURATION=1,sKe.DEFAULT_GAMMA=1,sKe.DEFAULT_SPLIT=m9.NONE,sKe.DEFAULT_MINIFICATION_FILTER=tB.LINEAR,sKe.DEFAULT_MAGNIFICATION_FILTER=ZN.LINEAR,sKe.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,sKe.prototype.isBaseLayer=function(){return this._isBaseLayer},sKe.prototype.isDestroyed=function(){return!1},sKe.prototype.destroy=function(){return Wc(this)};const cKe=new Fe,lKe=new Fe,uKe=new Fe,hKe=new Fe;function dKe(e,t,n){return`${e}:${t}:${n}`}function fKe(e,t,n){return JSON.stringify([e,t,n])}sKe.prototype.getViewableRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return e.readyPromise.then((function(){return Fe.intersection(e.rectangle,t)}))},sKe.prototype._createTileImagerySkeletons=function(e,t,n){const i=e.data;if(Object(r["a"])(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if(Object(r["a"])(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;const o=this._imageryProvider;if(Object(r["a"])(n)||(n=i.imagery.length),!o.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;const a=o.tilingScheme.projection instanceof Rc&&e.rectangle.north<Rc.MaximumLatitude&&e.rectangle.south>-Rc.MaximumLatitude,s=Fe.intersection(o.rectangle,this._rectangle,cKe);let c=Fe.intersection(e.rectangle,s,lKe);if(!Object(r["a"])(c)){if(!this.isBaseLayer())return!1;const t=s,n=e.rectangle;c=lKe,n.south>=t.north?c.north=c.south=t.north:n.north<=t.south?c.north=c.south=t.south:(c.south=Math.max(n.south,t.south),c.north=Math.min(n.north,t.north)),n.west>=t.east?c.west=c.east=t.east:n.east<=t.west?c.west=c.east=t.west:(c.west=Math.max(n.west,t.west),c.east=Math.min(n.east,t.east))}let l=0;c.south>0?l=c.south:c.north<0&&(l=c.north);const u=1,h=u*t.getLevelMaximumGeometricError(e.level);let d=gKe(this,h,l);d=Math.max(0,d);const f=o.maximumLevel;if(d>f&&(d=f),Object(r["a"])(o.minimumLevel)){const e=o.minimumLevel;d<e&&(d=e)}const p=o.tilingScheme,m=p.positionToTileXY(Fe.northwest(c),d),_=p.positionToTileXY(Fe.southeast(c),d);let g=e.rectangle.width/512,b=e.rectangle.height/512;const y=p.tileXYToRectangle(m.x,m.y,d);Math.abs(y.south-e.rectangle.north)<b&&m.y<_.y&&++m.y,Math.abs(y.east-e.rectangle.west)<g&&m.x<_.x&&++m.x;const v=p.tileXYToRectangle(_.x,_.y,d);Math.abs(v.north-e.rectangle.south)<b&&_.y>m.y&&--_.y,Math.abs(v.west-e.rectangle.east)<g&&_.x>m.x&&--_.x;const O=Fe.clone(e.rectangle,hKe);let A,w,T=p.tileXYToRectangle(m.x,m.y,d),C=Fe.intersection(T,s,uKe);a?(p.rectangleToNativeRectangle(O,O),p.rectangleToNativeRectangle(T,T),p.rectangleToNativeRectangle(C,C),p.rectangleToNativeRectangle(s,s),A=p.tileXYToNativeRectangle.bind(p),g=O.width/512,b=O.height/512):A=p.tileXYToRectangle.bind(p);let E,x=0,S=1;!this.isBaseLayer()&&Math.abs(C.west-O.west)>=g&&(x=Math.min(1,(C.west-O.west)/O.width)),!this.isBaseLayer()&&Math.abs(C.north-O.north)>=b&&(S=Math.max(0,(C.north-O.south)/O.height));const I=S;for(let D=m.x;D<=_.x;D++)if(w=x,T=A(D,m.y,d),C=Fe.simpleIntersection(T,s,uKe),Object(r["a"])(C)){x=Math.min(1,(C.east-O.west)/O.width),D===_.x&&(this.isBaseLayer()||Math.abs(C.east-O.east)<g)&&(x=1),S=I;for(let e=m.y;e<=_.y;e++){if(E=S,T=A(D,e,d),C=Fe.simpleIntersection(T,s,uKe),!Object(r["a"])(C))continue;S=Math.max(0,(C.south-O.south)/O.height),e===_.y&&(this.isBaseLayer()||Math.abs(C.south-O.south)<b)&&(S=0);const t=new be(w,S,x,E),o=this.getImageryFromCache(D,e,d);i.imagery.splice(n,0,new aKe(o,t,a)),++n}}return!0},sKe.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=e.rectangleToNativeRectangle(n,cKe),i=e.rectangleToNativeRectangle(i,hKe)}const o=i.width,r=i.height,a=o/n.width,s=r/n.height;return new be(a*(i.west-n.west)/o,s*(i.south-n.south)/r,a,s)},sKe.prototype._requestImagery=function(e){const t=this._imageryProvider,n=this;function i(t){if(!Object(r["a"])(t))return o();e.image=t,e.state=RXe.RECEIVED,e.request=void 0,Zl.reportSuccess(n._requestImageError)}function o(i){if(e.request.state===Il["a"].CANCELLED)return e.state=RXe.UNLOADED,void(e.request=void 0);e.state=RXe.FAILED,e.request=void 0;const o=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=Zl.reportError(n._requestImageError,t,t.errorEvent,o,e.x,e.y,e.level,i),n._requestImageError.retry&&a()}function a(){const n=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].IMAGERY});e.request=n,e.state=RXe.TRANSITIONING;const a=t.requestImage(e.x,e.y,e.level,n);if(!Object(r["a"])(a))return e.state=RXe.UNLOADED,void(e.request=void 0);Object(r["a"])(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),a.then((function(e){i(e)})).catch((function(e){o(e)}))}a()},sKe.prototype._createTextureWebGL=function(e,t){const n=new rB({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return Object(r["a"])(i.internalFormat)?new lB({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new lB({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?fx.RGBA:fx.RGB,sampler:n})},sKe.prototype._createTexture=function(e,t){const n=this._imageryProvider,i=t.image;if(Object(r["a"])(n.tileDiscardPolicy)){const e=n.tileDiscardPolicy;if(Object(r["a"])(e)){if(!e.isReady())return void(t.state=RXe.RECEIVED);if(e.shouldDiscardImage(i))return void(t.state=RXe.INVALID)}}if(this.minificationFilter!==tB.NEAREST&&this.minificationFilter!==tB.LINEAR)throw new a["a"]("ImageryLayer minification filter must be NEAREST or LINEAR");const o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof Rc?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=RXe.TEXTURE_LOADED},sKe.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter;const i=this.magnificationFilter,a=n===tB.LINEAR&&i===ZN.LINEAR;if(a&&!fx.isCompressedFormat(t.pixelFormat)&&s["a"].isPowerOfTwo(t.width)&&s["a"].isPowerOfTwo(t.height)){n=tB.LINEAR_MIPMAP_LINEAR;const a=YN.maximumTextureFilterAnisotropy,s=Math.min(a,Object(o["a"])(this._maximumAnisotropy,a)),c=dKe(n,i,s);let l=e.cache.imageryLayerMipmapSamplers;Object(r["a"])(l)||(l={},e.cache.imageryLayerMipmapSamplers=l);let u=l[c];Object(r["a"])(u)||(u=l[c]=new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:s})),t.generateMipmap(JN.NICEST),t.sampler=u}else{const o=dKe(n,i,0);let a=e.cache.imageryLayerNonMipmapSamplers;Object(r["a"])(a)||(a={},e.cache.imageryLayerNonMipmapSamplers=a);let s=a[o];Object(r["a"])(s)||(s=a[o]=new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=s}},sKe.prototype._reprojectTexture=function(e,t,n){const i=t.textureWebMercator||t.texture,r=t.rectangle,a=e.context;if(n=Object(o["a"])(n,!0),n&&!(this._imageryProvider.tilingScheme.projection instanceof V)&&r.width/i.width>1e-5){const e=this;t.addReference();const n=new nX({persists:!0,owner:this,preExecute:function(e){_Ke(e,a,i,t.rectangle)},postExecute:function(n){t.texture=n,e._finalizeReprojectTexture(a,n),t.state=RXe.READY,t.releaseReference()},canceled:function(){t.state=RXe.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(n)}else n&&(t.texture=i),this._finalizeReprojectTexture(a,i),t.state=RXe.READY},sKe.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0},sKe.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){Object(r["a"])(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},sKe.prototype.getImageryFromCache=function(e,t,n,i){const o=fKe(e,t,n);let a=this._imageryCache[o];return Object(r["a"])(a)||(a=new oKe(this,e,t,n,i),this._imageryCache[o]=a),a.addReference(),a},sKe.prototype.removeImageryFromCache=function(e){const t=fKe(e.x,e.y,e.level);delete this._imageryCache[t]};const pKe={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new Gt,texture:void 0},mKe=Or.supportsTypedArrays()?new Float32Array(128):void 0;function _Ke(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!Object(r["a"])(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){Object(r["a"])(this.framebuffer)&&this.framebuffer.destroy(),Object(r["a"])(this.vertexArray)&&this.vertexArray.destroy(),Object(r["a"])(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let n=0;for(let t=0;t<64;++t){const i=t/63;e[n++]=0,e[n++]=i,e[n++]=1,e[n++]=i}const i={position:0,webMercatorT:1},a=gl.getRegularGridIndices(2,64),s=NV.createIndexBuffer({context:t,typedArray:a,usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT});o.vertexArray=new WV({context:t,attributes:[{index:i.position,vertexBuffer:NV.createVertexBuffer({context:t,typedArray:e,usage:LV.STATIC_DRAW}),componentsPerAttribute:2},{index:i.webMercatorT,vertexBuffer:NV.createVertexBuffer({context:t,sizeInBytes:512,usage:LV.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:s});const c=new EV({sources:[nKe]});o.shaderProgram=Nz.fromCache({context:t,vertexShaderSource:c,fragmentShaderSource:tKe,attributeLocations:i}),o.sampler=new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.LINEAR,magnificationFilter:ZN.LINEAR})}n.sampler=o.sampler;const a=n.width,c=n.height;pKe.textureDimensions.x=a,pKe.textureDimensions.y=c,pKe.texture=n;let l=Math.sin(i.south);const u=.5*Math.log((1+l)/(1-l));l=Math.sin(i.north);const h=.5*Math.log((1+l)/(1-l)),d=1/(h-u),f=new lB({context:t,width:a,height:c,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});s["a"].isPowerOfTwo(a)&&s["a"].isPowerOfTwo(c)&&f.generateMipmap(JN.NICEST);const p=i.south,m=i.north,_=mKe;let g=0;for(let r=0;r<64;++r){const e=r/63,t=s["a"].lerp(p,m,e);l=Math.sin(t);const n=.5*Math.log((1+l)/(1-l)),i=(n-u)*d;_[g++]=i,_[g++]=i}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(_),e.shaderProgram=o.shaderProgram,e.outputTexture=f,e.uniformMap=pKe,e.vertexArray=o.vertexArray}function gKe(e,t,n){const i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,a=e._imageryProvider.tilingScheme.projection instanceof V?1:Math.cos(n),s=o.rectangle,c=r.maximumRadius*s.width*a/(i.tileWidth*o.getNumberOfXTilesAtLevel(0)),l=c/t,u=Math.log(l)/Math.log(2),h=Math.round(u);return 0|h}var bKe=sKe;const yKe={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=yKe.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}};var vKe=yKe;function OKe(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new be}OKe.prototype.update=function(e,t,n){this.changedThisFrame&&(HKe(e,t,this.tile,n),this.changedThisFrame=!1)},OKe.prototype.destroy=function(e){this._destroyVertexArray(e),Object(r["a"])(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)},OKe.prototype._destroyVertexArray=function(e){Object(r["a"])(this.vertexArray)&&(Object(r["a"])(e)?e.push(this.vertexArray):eKe._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};const AKe=new I_;function wKe(e,t,n,i,o,s,c,l,u){if(void 0===i)return;let h=i;while(h&&(h._lastSelectionResultFrame!==o||vKe.wasKicked(h._lastSelectionResult)||vKe.originalResult(h._lastSelectionResult)===vKe.CULLED)){if(c)return;const e=h.parent;if(s>=pR.NORTHWEST&&void 0!==e)switch(s){case pR.NORTHWEST:h=h===e.northwestChild?e:void 0;break;case pR.NORTHEAST:h=h===e.northeastChild?e:void 0;break;case pR.SOUTHWEST:h=h===e.southwestChild?e:void 0;break;case pR.SOUTHEAST:h=h===e.southeastChild?e:void 0;break}else h=e}if(void 0!==h)if(h._lastSelectionResult!==vKe.RENDERED){if(vKe.originalResult(i._lastSelectionResult)!==vKe.CULLED)switch(s){case pR.WEST:wKe(e,t,n,i.northwestChild,o,s,!0,l,u),wKe(e,t,n,i.southwestChild,o,s,!0,l,u);break;case pR.EAST:wKe(e,t,n,i.southeastChild,o,s,!0,l,u),wKe(e,t,n,i.northeastChild,o,s,!0,l,u);break;case pR.SOUTH:wKe(e,t,n,i.southwestChild,o,s,!0,l,u),wKe(e,t,n,i.southeastChild,o,s,!0,l,u);break;case pR.NORTH:wKe(e,t,n,i.northeastChild,o,s,!0,l,u),wKe(e,t,n,i.northwestChild,o,s,!0,l,u);break;case pR.NORTHWEST:wKe(e,t,n,i.northwestChild,o,s,!0,l,u);break;case pR.NORTHEAST:wKe(e,t,n,i.northeastChild,o,s,!0,l,u);break;case pR.SOUTHWEST:wKe(e,t,n,i.southwestChild,o,s,!0,l,u);break;case pR.SOUTHEAST:wKe(e,t,n,i.southeastChild,o,s,!0,l,u);break;default:throw new a["a"]("Invalid edge")}}else{if(Object(r["a"])(h.data.vertexArray))return;TKe(e,t,n,h,s,o,l,u)}}function TKe(e,t,n,i,o,r,a,s){const c=i.data;if(void 0===c.fill)c.fill=new OKe(i);else if(c.fill.visitedFrame===r)return;c.fill.enqueuedFrame!==r&&(c.fill.enqueuedFrame=r,c.fill.changedThisFrame=!1,a.enqueue(i)),CKe(e,t,n,i,o,s)}function CKe(e,t,n,i,o,a){const c=i.data.fill;let l;const u=n.data.fill;let h,d,f,p,m,_;switch(Object(r["a"])(u)?(u.visitedFrame=t.frameNumber,u.changedThisFrame&&(HKe(e,t,n,a),u.changedThisFrame=!1),l=n.data.fill.mesh):l=n.data.mesh,o){case pR.WEST:h=c.westMeshes,d=c.westTiles;break;case pR.SOUTH:h=c.southMeshes,d=c.southTiles;break;case pR.EAST:h=c.eastMeshes,d=c.eastTiles;break;case pR.NORTH:h=c.northMeshes,d=c.northTiles;break;case pR.NORTHWEST:return c.changedThisFrame=c.changedThisFrame||c.northwestMesh!==l,c.northwestMesh=l,void(c.northwestTile=n);case pR.NORTHEAST:return c.changedThisFrame=c.changedThisFrame||c.northeastMesh!==l,c.northeastMesh=l,void(c.northeastTile=n);case pR.SOUTHWEST:return c.changedThisFrame=c.changedThisFrame||c.southwestMesh!==l,c.southwestMesh=l,void(c.southwestTile=n);case pR.SOUTHEAST:return c.changedThisFrame=c.changedThisFrame||c.southeastMesh!==l,c.southeastMesh=l,void(c.southeastTile=n)}if(n.level<=i.level)return c.changedThisFrame=c.changedThisFrame||h[0]!==l||1!==h.length,h[0]=l,d[0]=n,h.length=1,void(d.length=1);const g=n.rectangle;let b;const y=i.rectangle;switch(o){case pR.WEST:for(b=(y.north-y.south)*s["a"].EPSILON5,f=0;f<d.length;++f)if(m=d[f],_=m.rectangle,s["a"].greaterThan(g.north,_.south,b))break;for(p=f;p<d.length;++p)if(m=d[p],_=m.rectangle,s["a"].greaterThanOrEquals(g.south,_.north,b))break;break;case pR.SOUTH:for(b=(y.east-y.west)*s["a"].EPSILON5,f=0;f<d.length;++f)if(m=d[f],_=m.rectangle,s["a"].lessThan(g.west,_.east,b))break;for(p=f;p<d.length;++p)if(m=d[p],_=m.rectangle,s["a"].lessThanOrEquals(g.east,_.west,b))break;break;case pR.EAST:for(b=(y.north-y.south)*s["a"].EPSILON5,f=0;f<d.length;++f)if(m=d[f],_=m.rectangle,s["a"].lessThan(g.south,_.north,b))break;for(p=f;p<d.length;++p)if(m=d[p],_=m.rectangle,s["a"].lessThanOrEquals(g.north,_.south,b))break;break;case pR.NORTH:for(b=(y.east-y.west)*s["a"].EPSILON5,f=0;f<d.length;++f)if(m=d[f],_=m.rectangle,s["a"].greaterThan(g.east,_.west,b))break;for(p=f;p<d.length;++p)if(m=d[p],_=m.rectangle,s["a"].greaterThanOrEquals(g.west,_.east,b))break;break}p-f===1?(c.changedThisFrame=c.changedThisFrame||h[f]!==l,h[f]=l,d[f]=n):(c.changedThisFrame=!0,h.splice(f,p-f,l),d.splice(f,p-f,n))}OKe.updateFillTiles=function(e,t,n,i){const o=e._quadtree,a=o._levelZeroTiles,s=o._lastSelectionFrameNumber,c=AKe;c.clear();for(let u=0;u<t.length;++u){const e=t[u];Object(r["a"])(e.data.vertexArray)&&c.enqueue(t[u])}let l=c.dequeue();while(void 0!==l){const t=l.findTileToWest(a),o=l.findTileToSouth(a),r=l.findTileToEast(a),u=l.findTileToNorth(a);wKe(e,n,l,t,s,pR.EAST,!1,c,i),wKe(e,n,l,o,s,pR.NORTH,!1,c,i),wKe(e,n,l,r,s,pR.WEST,!1,c,i),wKe(e,n,l,u,s,pR.SOUTH,!1,c,i);const h=t.findTileToNorth(a),d=t.findTileToSouth(a),f=r.findTileToNorth(a),p=r.findTileToSouth(a);wKe(e,n,l,h,s,pR.SOUTHEAST,!1,c,i),wKe(e,n,l,f,s,pR.SOUTHWEST,!1,c,i),wKe(e,n,l,d,s,pR.NORTHEAST,!1,c,i),wKe(e,n,l,p,s,pR.NORTHWEST,!1,c,i),l=c.dequeue()}};const EKe=new I,xKe=new I,SKe=new g,IKe=new g,DKe=new Gt,PKe=new Gt,jKe=new Gt;function RKe(){this.height=0,this.encodedNormal=new Gt}function LKe(e,t,n,i,o,a,s,c,l){if(Object(r["a"])(o))return o;let u;if(Object(r["a"])(a)&&Object(r["a"])(s))u=.5*(a.height+s.height);else if(Object(r["a"])(a))u=a.height;else if(Object(r["a"])(s))u=s.height;else if(Object(r["a"])(c))u=c.height;else{const t=e.tile.data,n=t.tileBoundingRegion;let i=0,o=0;Object(r["a"])(n)&&(i=n.minimumHeight,o=n.maximumHeight),u=.5*(i+o)}return QKe(e,t,n,i,u,l),l}const MKe={minimumHeight:0,maximumHeight:0},NKe=new g,BKe=new RKe,FKe=new RKe,zKe=new RKe,kKe=new RKe,UKe="undefined"!==typeof Uint8Array?new Uint8Array(81):void 0,VKe={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0};function HKe(e,t,n,i){eKe.initialize(n,e.terrainProvider,e._imageryLayers);const o=n.data,a=o.fill,s=n.rectangle,c=t.terrainExaggeration,l=t.terrainExaggerationRelativeHeight,u=1!==c,h=n.tilingScheme.ellipsoid;let d=ZKe(a,h,0,1,a.northwestTile,a.northwestMesh,a.northTiles,a.northMeshes,a.westTiles,a.westMeshes,zKe),f=ZKe(a,h,0,0,a.southwestTile,a.southwestMesh,a.westTiles,a.westMeshes,a.southTiles,a.southMeshes,BKe),p=ZKe(a,h,1,0,a.southeastTile,a.southeastMesh,a.southTiles,a.southMeshes,a.eastTiles,a.eastMeshes,FKe),m=ZKe(a,h,1,1,a.northeastTile,a.northeastMesh,a.eastTiles,a.eastMeshes,a.northTiles,a.northMeshes,kKe);d=LKe(a,h,0,1,d,f,m,p,zKe),f=LKe(a,h,0,0,f,d,p,m,BKe),p=LKe(a,h,1,1,p,f,m,d,FKe),m=LKe(a,h,1,1,m,p,d,f,kKe);const _=f.height,g=p.height,b=d.height,y=m.height;let v=Math.min(_,g,b,y),O=Math.max(_,g,b,y);const A=.5*(v+O);let w,T;const C=e.getLevelMaximumGeometricError(n.level),E=h.maximumRadius-C;let x=4*Math.acos(E/h.maximumRadius);if(x*=1.5,s.width>x&&O-v<=C){const e=new xl({width:9,height:9,buffer:UKe,structure:{heightOffset:O}}),t=VKe;t.tilingScheme=n.tilingScheme,t.x=n.x,t.y=n.y,t.level=n.level,t.exaggeration=c,t.exaggerationRelativeHeight=l,a.mesh=e._createMeshSync(t)}else{const t=u,i=Fe.center(s,xKe);i.height=A;const o=h.cartographicToCartesian(i,NKe),r=new Pc(o,void 0,void 0,void 0,void 0,!0,!0,t,c,l);let _,g=5;for(_=a.westMeshes,w=0,T=_.length;w<T;++w)g+=_[w].eastIndicesNorthToSouth.length;for(_=a.southMeshes,w=0,T=_.length;w<T;++w)g+=_[w].northIndicesWestToEast.length;for(_=a.eastMeshes,w=0,T=_.length;w<T;++w)g+=_[w].westIndicesSouthToNorth.length;for(_=a.northMeshes,w=0,T=_.length;w<T;++w)g+=_[w].southIndicesEastToWest.length;const b=MKe;b.minimumHeight=v,b.maximumHeight=O;const y=r.stride;let C=new Float32Array(g*y),E=0;const x=E;E=GKe(h,s,r,C,E,0,1,d.height,d.encodedNormal,1,b),E=t$e(a,h,r,C,E,a.westTiles,a.westMeshes,pR.EAST,b);const S=E;E=GKe(h,s,r,C,E,0,0,f.height,f.encodedNormal,0,b),E=t$e(a,h,r,C,E,a.southTiles,a.southMeshes,pR.NORTH,b);const I=E;E=GKe(h,s,r,C,E,1,0,p.height,p.encodedNormal,0,b),E=t$e(a,h,r,C,E,a.eastTiles,a.eastMeshes,pR.WEST,b);const D=E;E=GKe(h,s,r,C,E,1,1,m.height,m.encodedNormal,1,b),E=t$e(a,h,r,C,E,a.northTiles,a.northMeshes,pR.SOUTH,b),v=b.minimumHeight,O=b.maximumHeight;const P=Ws.fromRectangle(s,v,O,n.tilingScheme.ellipsoid),j=Rc.geodeticLatitudeToMercatorAngle(s.south),R=1/(Rc.geodeticLatitudeToMercatorAngle(s.north)-j),L=(Rc.geodeticLatitudeToMercatorAngle(i.latitude)-j)*R,M=h.geodeticSurfaceNormalCartographic(EKe,IKe),N=pc.octEncode(M,DKe),B=E;r.encode(C,E*y,P.center,Gt.fromElements(.5,.5,jKe),A,N,L,M),++E;const F=E,z=F<256?1:2,k=3*(F-1),U=k*z,V=(C.length-F*y)*Float32Array.BYTES_PER_ELEMENT;let H;if(V>=U){const e=F*y*Float32Array.BYTES_PER_ELEMENT;H=F<256?new Uint8Array(C.buffer,e,k):new Uint16Array(C.buffer,e,k)}else H=F<256?new Uint8Array(k):new Uint16Array(k);C=new Float32Array(C.buffer,0,F*y);let G=0;for(w=0;w<F-2;++w)H[G++]=B,H[G++]=w,H[G++]=w+1;H[G++]=B,H[G++]=w,H[G++]=0;const W=[];for(w=S;w>=x;--w)W.push(w);const q=[];for(w=I;w>=S;--w)q.push(w);const Y=[];for(w=D;w>=I;--w)Y.push(w);const X=[];for(X.push(0),w=B-1;w>=D;--w)X.push(w);a.mesh=new sl(r.center,C,H,k,F,v,O,Tt.fromOrientedBoundingBox(P),s$e(e,P.center,s,v,O),r.stride,P,r,W,q,Y,X)}const S=t.context;a._destroyVertexArray(i),a.vertexArray=eKe._createVertexArrayForMesh(S,a.mesh),o.processImagery(n,e.terrainProvider,t,!0);const I=a.waterMaskTexture;if(a.waterMaskTexture=void 0,e.terrainProvider.hasWaterMask){const e=o._findAncestorTileWithTerrainData(n);Object(r["a"])(e)&&Object(r["a"])(e.data.waterMaskTexture)&&(a.waterMaskTexture=e.data.waterMaskTexture,++a.waterMaskTexture.referenceCount,o._computeWaterMaskTranslationAndScale(n,e,a.waterMaskTranslationAndScale))}Object(r["a"])(I)&&(--I.referenceCount,0===I.referenceCount&&I.destroy())}function GKe(e,t,n,i,o,r,a,c,l,u,h){const d=EKe;d.longitude=s["a"].lerp(t.west,t.east,r),d.latitude=s["a"].lerp(t.south,t.north,a),d.height=c;const f=e.cartographicToCartesian(d,SKe);let p;n.hasGeodeticSurfaceNormals&&(p=e.geodeticSurfaceNormal(f,IKe));const m=PKe;return m.x=r,m.y=a,n.encode(i,o*n.stride,f,m,c,l,u,p),h.minimumHeight=Math.min(h.minimumHeight,c),h.maximumHeight=Math.max(h.maximumHeight,c),o+1}const WKe=new Fe;function qKe(e,t,n,i){let o=e.rectangle;const r=t.rectangle;0===t.x&&1===n.x&&e.x===e.tilingScheme.getNumberOfXTilesAtLevel(e.level)-1?(o=Fe.clone(e.rectangle,WKe),o.west-=s["a"].TWO_PI,o.east-=s["a"].TWO_PI):0===e.x&&0===n.x&&t.x===t.tilingScheme.getNumberOfXTilesAtLevel(t.level)-1&&(o=Fe.clone(e.rectangle,WKe),o.west+=s["a"].TWO_PI,o.east+=s["a"].TWO_PI);const a=o.east-o.west,c=(r.west-o.west)/a,l=(r.east-o.west)/a,u=o.north-o.south,h=(r.south-o.south)/u,d=(r.north-o.south)/u;let f=(n.x-c)/(l-c),p=(n.y-h)/(d-h);return Math.abs(f)<Math.EPSILON5?f=0:Math.abs(f-1)<Math.EPSILON5&&(f=1),Math.abs(p)<Math.EPSILON5?p=0:Math.abs(p-1)<Math.EPSILON5&&(p=1),i.x=f,i.y=p,i}const YKe=new Gt;function XKe(e,t,n,i,o){const r=e.encoding,a=e.vertices;if(o.height=r.decodeHeight(a,t),r.hasVertexNormals)r.getOctEncodedNormal(a,t,o.encodedNormal);else{const e=o.encodedNormal;e.x=0,e.y=0}}const KKe=new Gt,$Ke=new g;function JKe(e,t,n,i,o,r,a,c,l,u){const h=i.encoding,d=i.vertices,f=qKe(t,n,h.decodeTextureCoordinates(d,o,jKe),jKe),p=qKe(t,n,h.decodeTextureCoordinates(d,r,PKe),PKe);let m;m=l?(a-f.x)/(p.x-f.x):(c-f.y)/(p.y-f.y);const _=h.decodeHeight(d,o),b=h.decodeHeight(d,r),y=n.rectangle;let v;if(EKe.longitude=s["a"].lerp(y.west,y.east,a),EKe.latitude=s["a"].lerp(y.south,y.north,c),u.height=EKe.height=s["a"].lerp(_,b,m),h.hasVertexNormals){const e=h.getOctEncodedNormal(d,o,YKe),t=h.getOctEncodedNormal(d,r,KKe),n=pc.octDecode(e.x,e.y,SKe),i=pc.octDecode(t.x,t.y,$Ke);v=g.lerp(n,i,m,SKe),g.normalize(v,v),pc.octEncode(v,u.encodedNormal)}else v=e.geodeticSurfaceNormalCartographic(EKe,SKe),pc.octEncode(v,u.encodedNormal)}function QKe(e,t,n,i,o,r){r.height=o;const a=t.geodeticSurfaceNormalCartographic(EKe,SKe);pc.octEncode(a,r.encodedNormal)}function ZKe(e,t,n,i,o,a,s,c,l,u,h){const d=r$e(e,t,c,s,!1,n,i,h)||r$e(e,t,u,l,!0,n,i,h);if(d)return h;let f,p;return o$e(o,a)?(f=0===n?0===i?a.eastIndicesNorthToSouth[0]:a.southIndicesEastToWest[0]:0===i?a.northIndicesWestToEast[0]:a.westIndicesSouthToNorth[0],XKe(a,f,n,i,h),h):(p=0===n?0===i?e$e(e.westMeshes,e.westTiles,pR.EAST,e.southMeshes,e.southTiles,pR.NORTH,n,i):e$e(e.northMeshes,e.northTiles,pR.SOUTH,e.westMeshes,e.westTiles,pR.EAST,n,i):0===i?e$e(e.southMeshes,e.southTiles,pR.NORTH,e.eastMeshes,e.eastTiles,pR.WEST,n,i):e$e(e.eastMeshes,e.eastTiles,pR.WEST,e.northMeshes,e.northTiles,pR.SOUTH,n,i),Object(r["a"])(p)?(QKe(e,t,n,i,p,h),h):void 0)}function e$e(e,t,n,i,o,a,s,c){const l=i$e(e,t,!1,n,s,c),u=i$e(i,o,!0,a,s,c);return Object(r["a"])(l)&&Object(r["a"])(u)?.5*(l+u):Object(r["a"])(l)?l:u}function t$e(e,t,n,i,o,r,a,s,c){for(let l=0;l<r.length;++l)o=n$e(e,t,n,i,o,r[l],a[l],s,c);return o}function n$e(e,t,n,i,o,r,a,c,l){let u=r.rectangle;c===pR.EAST&&0===e.tile.x?(u=Fe.clone(r.rectangle,WKe),u.west-=s["a"].TWO_PI,u.east-=s["a"].TWO_PI):c===pR.WEST&&0===r.x&&(u=Fe.clone(r.rectangle,WKe),u.west+=s["a"].TWO_PI,u.east+=s["a"].TWO_PI);const h=e.tile.rectangle;let d,f,p,m;switch(o>0&&(n.decodeTextureCoordinates(i,o-1,jKe),d=jKe.x,f=jKe.y),c){case pR.WEST:p=a.westIndicesSouthToNorth,m=!1;break;case pR.NORTH:p=a.northIndicesWestToEast,m=!0;break;case pR.EAST:p=a.eastIndicesNorthToSouth,m=!1;break;case pR.SOUTH:p=a.southIndicesEastToWest,m=!0;break}const _=r,g=e.tile,b=a.encoding,y=a.vertices,v=n.stride;let O,A;b.hasWebMercatorT&&(O=Rc.geodeticLatitudeToMercatorAngle(h.south),A=1/(Rc.geodeticLatitudeToMercatorAngle(h.north)-O));for(let w=0;w<p.length;++w){const e=p[w],r=b.decodeTextureCoordinates(y,e,jKe);qKe(_,g,r,r);const a=r.x,c=r.y,u=m?a:c;if(u<0||u>1)continue;if(Math.abs(a-d)<s["a"].EPSILON5&&Math.abs(c-f)<s["a"].EPSILON5)continue;const T=Math.abs(a)<s["a"].EPSILON5||Math.abs(a-1)<s["a"].EPSILON5,C=Math.abs(c)<s["a"].EPSILON5||Math.abs(c-1)<s["a"].EPSILON5;if(T&&C)continue;const E=b.decodePosition(y,e,SKe),x=b.decodeHeight(y,e);let S;b.hasVertexNormals?S=b.getOctEncodedNormal(y,e,DKe):(S=DKe,S.x=0,S.y=0);let I,D=c;if(b.hasWebMercatorT){const e=s["a"].lerp(h.south,h.north,c);D=(Rc.geodeticLatitudeToMercatorAngle(e)-O)*A}n.hasGeodeticSurfaceNormals&&(I=t.geodeticSurfaceNormal(E,IKe)),n.encode(i,o*v,E,r,x,S,D,I),l.minimumHeight=Math.min(l.minimumHeight,x),l.maximumHeight=Math.max(l.maximumHeight,x),++o}return o}function i$e(e,t,n,i,o,a){let s,c,l;n?(s=0,c=e.length,l=1):(s=e.length-1,c=-1,l=-1);for(let u=s;u!==c;u+=l){const o=e[u],a=t[u];if(!o$e(a,o))continue;let s;switch(i){case pR.WEST:s=o.westIndicesSouthToNorth;break;case pR.SOUTH:s=o.southIndicesEastToWest;break;case pR.EAST:s=o.eastIndicesNorthToSouth;break;case pR.NORTH:s=o.northIndicesWestToEast;break}const c=s[n?0:s.length-1];if(Object(r["a"])(c))return o.encoding.decodeHeight(o.vertices,c)}}function o$e(e,t){return Object(r["a"])(t)&&(!Object(r["a"])(e.data.fill)||!e.data.fill.changedThisFrame)}function r$e(e,t,n,i,o,r,a,s){let c,l,u,h,d;const f=i[o?0:n.length-1],p=n[o?0:n.length-1];if(o$e(f,p)&&(0===r?0===a?(c=o?p.northIndicesWestToEast:p.eastIndicesNorthToSouth,l=o,u=o):(c=o?p.eastIndicesNorthToSouth:p.southIndicesEastToWest,l=!o,u=!1):0===a?(c=o?p.westIndicesSouthToNorth:p.northIndicesWestToEast,l=!o,u=!0):(c=o?p.southIndicesEastToWest:p.westIndicesSouthToNorth,l=o,u=!o),c.length>0)){h=o?0:c.length-1,d=c[h],p.encoding.decodeTextureCoordinates(p.vertices,d,jKe);const n=qKe(f,e.tile,jKe,jKe);if(n.x===r&&n.y===a)return XKe(p,d,r,a,s),!0;if(h=Li(c,l?r:a,(function(t,n){p.encoding.decodeTextureCoordinates(p.vertices,t,jKe);const i=qKe(f,e.tile,jKe,jKe);return u?l?i.x-r:i.y-a:l?r-i.x:a-i.y})),!(h<0))return XKe(p,c[h],r,a,s),!0;if(h=~h,h>0&&h<c.length)return JKe(t,f,e.tile,p,c[h-1],c[h],r,a,l,s),!0}return!1}const a$e=[new g,new g,new g,new g];function s$e(e,t,n,i,o,r){const a=e.quadtree._occluders.ellipsoid,s=a.ellipsoid,c=a$e;return g.fromRadians(n.west,n.south,o,s,c[0]),g.fromRadians(n.east,n.south,o,s,c[1]),g.fromRadians(n.west,n.north,o,s,c[2]),g.fromRadians(n.east,n.north,o,s,c[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,c,i,r)}var c$e=OKe;function l$e(e){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.terrainProvider))throw new a["a"]("options.terrainProvider is required.");if(!Object(r["a"])(e.imageryLayers))throw new a["a"]("options.imageryLayers is required.");if(!Object(r["a"])(e.surfaceShaderSet))throw new a["a"]("options.surfaceShaderSet is required.");this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=DH.RECEIVE_ONLY,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new dn["a"],this._imageryLayers.layerAdded.addEventListener(l$e.prototype._onLayerAdded,this),this._imageryLayers.layerRemoved.addEventListener(l$e.prototype._onLayerRemoved,this),this._imageryLayers.layerMoved.addEventListener(l$e.prototype._onLayerMoved,this),this._imageryLayers.layerShownOrHidden.addEventListener(l$e.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new dn["a"],this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new Dm(0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=Fe.clone(Fe.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldTerrainExaggeration=void 0,this._oldTerrainExaggerationRelativeHeight=void 0}function u$e(e,t){let n=e.loadingImagery;Object(r["a"])(n)||(n=e.readyImagery);let i=t.loadingImagery;return Object(r["a"])(i)||(i=t.readyImagery),n.imageryLayer._layerIndex-i.imageryLayer._layerIndex}function h$e(e,t){const n=t.creditDisplay;e._terrainProvider.ready&&Object(r["a"])(e._terrainProvider.credit)&&n.addCredit(e._terrainProvider.credit);const i=e._imageryLayers;for(let o=0,a=i.length;o<a;++o){const e=i.get(o).imageryProvider;e.ready&&Object(r["a"])(e.credit)&&n.addCredit(e.credit)}}function d$e(e,t){const n=t.globeTranslucencyState;if(n.translucent){const i=e.renderState.blending.enabled;n.pushDerivedCommands(e,i,t)}else t.commandList.push(e)}Object.defineProperties(l$e.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._baseColor=e,this._firstPassInitialColor=be.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._quadtree=e}},ready:{get:function(){return this._terrainProvider.ready&&(0===this._imageryLayers.length||this._imageryLayers.get(0).imageryProvider.ready)}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){if(this._terrainProvider!==e){if(!Object(r["a"])(e))throw new a["a"]("terrainProvider is required.");this._terrainProvider=e,Object(r["a"])(this._quadtree)&&this._quadtree.invalidateAllTiles()}}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){A4.setOwner(e,this,"_clippingPlanes")}}}),l$e.prototype.update=function(e){this._imageryLayers._update()},l$e.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(u$e)}))),h$e(this,e);const t=this._vertexArraysToDestroy,n=t.length;for(let i=0;i<n;++i)eKe._freeVertexArray(t[i]);t.length=0},l$e.prototype.beginUpdate=function(e){const t=this._tilesToRenderByTextureCount;for(let i=0,o=t.length;i<o;++i){const e=t[i];Object(r["a"])(e)&&(e.length=0)}const n=this._clippingPlanes;Object(r["a"])(n)&&n.enabled&&n.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},l$e.prototype.endUpdate=function(e){if(!Object(r["a"])(this._renderState)){this._renderState=UF.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:jV.LESS}}),this._blendRenderState=UF.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:jV.LESS_OR_EQUAL},blending:UN.ALPHA_BLEND});let e=Object(RL["a"])(this._renderState,!0);e.cull.enabled=!1,this._disableCullingRenderState=UF.fromCache(e),e=Object(RL["a"])(this._blendRenderState,!0),e.cull.enabled=!1,this._disableCullingBlendRenderState=UF.fromCache(e)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&c$e.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);const t=this.quadtree,n=e.terrainExaggeration,i=e.terrainExaggerationRelativeHeight,o=this._oldTerrainExaggeration!==n||this._oldTerrainExaggerationRelativeHeight!==i;this._oldTerrainExaggeration=n,this._oldTerrainExaggerationRelativeHeight=i,o&&t.forEachLoadedTile((function(n){const i=n.data;i.updateExaggeration(n,e,t)}));const a=this._tilesToRenderByTextureCount;for(let s=0,c=a.length;s<c;++s){const t=a[s];if(Object(r["a"])(t))for(let n=0,i=t.length;n<i;++n){const i=t[n],o=i.data.tileBoundingRegion;Y$e(this,i,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,o.minimumHeight)}}},l$e.prototype.updateForPick=function(e){const t=this._drawCommands;for(let n=0,i=this._usedDrawCommands;n<i;++n)d$e(t[n],e)},l$e.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},l$e.prototype.getLevelMaximumGeometricError=function(e){return this._terrainProvider.getLevelMaximumGeometricError(e)},l$e.prototype.loadTile=function(e,t){let n,i=t.data,o=!0;Object(r["a"])(i)&&(o=i.boundingVolumeSourceTile!==t||t._lastSelectionResult===vKe.CULLED_BUT_NEEDED,n=i.terrainState),eKe.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o),i=t.data,o&&n!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==IE.NONE&&i.boundingVolumeSourceTile===t&&(o=!1,eKe.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,o))};const f$e=new Tt,p$e=new Fe,m$e=new Fe,_$e=new I;function g$e(e,t){if(t.west<t.east)return t;const n=Fe.clone(t,m$e),i=Fe.center(e,_$e);return i.longitude>0?n.east=s["a"].PI:n.west=-s["a"].PI,n}function b$e(e,t){if(t.cameraUnderground)return!0;if(t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;const n=e._clippingPlanes;return!(!Object(r["a"])(n)||!n.enabled)||!Fe.equals(e.cartographicLimitRectangle,Fe.MAX_VALUE)}l$e.prototype.computeTileVisibility=function(e,t,n){const i=this.computeDistanceToTile(e,t);e._distance=i;const o=b$e(this,t);if(t.fog.enabled&&!o&&s["a"].fog(i,t.fog.density)>=1)return IE.NONE;const a=e.data,c=a.tileBoundingRegion;if(void 0===a.boundingVolumeSourceTile)return IE.PARTIAL;const l=t.cullingVolume;let u=c.boundingVolume;Object(r["a"])(u)||(u=c.boundingSphere),a.clippedByBoundaries=!1;const h=g$e(e.rectangle,this.cartographicLimitRectangle),d=Fe.simpleIntersection(h,e.rectangle,p$e);if(!Object(r["a"])(d))return IE.NONE;if(Fe.equals(d,e.rectangle)||(a.clippedByBoundaries=!0),t.mode!==SH.SCENE3D&&(u=f$e,Tt.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,c.minimumHeight,c.maximumHeight,u),g.fromElements(u.center.z,u.center.x,u.center.y,u.center),t.mode===SH.MORPHING&&Object(r["a"])(a.renderedMesh)&&(u=Tt.union(c.boundingSphere,u,u))),!Object(r["a"])(u))return IE.PARTIAL;const f=this._clippingPlanes;if(Object(r["a"])(f)&&f.enabled){const t=f.computeIntersectionWithBoundingVolume(u);if(e.isClipped=t!==G.INSIDE,t===G.OUTSIDE)return IE.NONE}let p;const m=l.computeVisibility(u);if(m===G.OUTSIDE?p=IE.NONE:m===G.INTERSECTING?p=IE.PARTIAL:m===G.INSIDE&&(p=IE.FULL),p===IE.NONE)return p;const _=t.mode===SH.SCENE3D&&t.camera.frustum instanceof IO;if(t.mode===SH.SCENE3D&&!_&&Object(r["a"])(n)&&!o){const e=a.occludeePointInScaledSpace;return Object(r["a"])(e)?n.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(e,c.minimumHeight)?p:IE.NONE:p}return p},l$e.prototype.canRefine=function(e){if(Object(r["a"])(e.data.terrainData))return!0;const t=this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1);return void 0!==t};const y$e=[],v$e=[];l$e.prototype.canRenderWithoutLosingDetail=function(e,t){const n=e.data,i=y$e;i.length=this._imageryLayers.length;let o,a,s,c=!1,l=!1;for(Object(r["a"])(n)&&(c=n.terrainState===BXe.READY,l=!0,o=n.imagery),a=0,s=i.length;a<s;++a)i[a]=l;if(Object(r["a"])(o))for(a=0,s=o.length;a<s;++a){const e=o[a],t=e.loadingImagery,n=!Object(r["a"])(t)||t.state===RXe.FAILED||t.state===RXe.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;i[s]=n&&i[s]}const u=this.quadtree._lastSelectionFrameNumber,h=v$e;h.length=0,h.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);while(h.length>0){const e=h.pop(),t=e._lastSelectionResultFrame===u?e._lastSelectionResult:vKe.NONE;if(t===vKe.RENDERED){const t=e.data;if(!Object(r["a"])(t))continue;if(!c&&e.data.terrainState===BXe.READY)return!1;const n=e.data.imagery;for(a=0,s=n.length;a<s;++a){const e=n[a],t=e.loadingImagery,o=!Object(r["a"])(t)||t.state===RXe.FAILED||t.state===RXe.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;if(o&&!i[s])return!1}}else t===vKe.REFINED&&h.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild)}return!0};const O$e=new g;l$e.prototype.computeTileLoadPriority=function(e,t){const n=e.data;if(void 0===n)return 0;const i=n.tileBoundingRegion.boundingVolume;if(void 0===i)return 0;const o=t.camera.positionWC,r=t.camera.directionWC,a=g.subtract(i.center,o,O$e),c=g.magnitude(a);return c<s["a"].EPSILON5?0:(g.divideByScalar(a,c,a),(1-g.dot(a,r))*e._distance)};const A$e=new Me,w$e=new Me,T$e=new be,C$e=new be,E$e=new be,x$e=new g,S$e=new g,I$e=new g,D$e=new g;l$e.prototype.showTileThisFrame=function(e,t){let n=0;const i=e.data.imagery;for(let c=0,l=i.length;c<l;++c){const e=i[c];Object(r["a"])(e.readyImagery)&&0!==e.readyImagery.imageryLayer.alpha&&++n}let o=this._tilesToRenderByTextureCount[n];Object(r["a"])(o)||(o=[],this._tilesToRenderByTextureCount[n]=o),o.push(e);const a=e.data;Object(r["a"])(a.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;const s=this._debug;++s.tilesRendered,s.texturesRendered+=n};const P$e=[new g,new g,new g,new g];function j$e(e,t,n,i,o,r){const a=e.quadtree._occluders.ellipsoid,s=a.ellipsoid,c=P$e;return g.fromRadians(n.west,n.south,o,s,c[0]),g.fromRadians(n.east,n.south,o,s,c[1]),g.fromRadians(n.west,n.north,o,s,c[2]),g.fromRadians(n.east,n.north,o,s,c[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,c,i,r)}function R$e(e,t,n){let i=e.data;void 0===i&&(i=e.data=new eKe);const o=e.tilingScheme.ellipsoid;void 0===i.tileBoundingRegion&&(i.tileBoundingRegion=new hme({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:o,minimumHeight:0,maximumHeight:0}));const a=i.tileBoundingRegion,s=a.minimumHeight,c=a.maximumHeight;let l=!1,u=e;const h=i.mesh,d=i.terrainData;if(void 0!==h&&void 0!==h.minimumHeight&&void 0!==h.maximumHeight)a.minimumHeight=h.minimumHeight,a.maximumHeight=h.maximumHeight,l=!0;else if(void 0!==d&&void 0!==d._minimumHeight&&void 0!==d._maximumHeight)a.minimumHeight=d._minimumHeight,a.maximumHeight=d._maximumHeight;else{a.minimumHeight=Number.NaN,a.maximumHeight=Number.NaN;let t=e.parent;while(void 0!==t){const e=t.data;if(void 0!==e){const t=e.mesh,n=e.terrainData;if(void 0!==t&&void 0!==t.minimumHeight&&void 0!==t.maximumHeight){a.minimumHeight=t.minimumHeight,a.maximumHeight=t.maximumHeight;break}if(void 0!==n&&void 0!==n._minimumHeight&&void 0!==n._maximumHeight){a.minimumHeight=n._minimumHeight,a.maximumHeight=n._maximumHeight;break}}t=t.parent}u=t}if(void 0!==u){const d=n.terrainExaggeration,f=n.terrainExaggerationRelativeHeight,p=1!==d;if(p&&(l=!1,a.minimumHeight=gc.getHeight(a.minimumHeight,d,f),a.maximumHeight=gc.getHeight(a.maximumHeight,d,f)),l)i.boundingVolumeIsFromMesh||(a._orientedBoundingBox=Ws.clone(h.orientedBoundingBox,a._orientedBoundingBox),a._boundingSphere=Tt.clone(h.boundingSphere3D,a._boundingSphere),i.occludeePointInScaledSpace=g.clone(h.occludeePointInScaledSpace,i.occludeePointInScaledSpace),Object(r["a"])(i.occludeePointInScaledSpace)||(i.occludeePointInScaledSpace=j$e(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,i.occludeePointInScaledSpace)));else{const n=void 0===a._orientedBoundingBox||void 0===a._boundingSphere,r=a.minimumHeight!==s||a.maximumHeight!==c;(r||n)&&(a.computeBoundingVolumes(o),i.occludeePointInScaledSpace=j$e(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,i.occludeePointInScaledSpace))}i.boundingVolumeSourceTile=u,i.boundingVolumeIsFromMesh=l}else i.boundingVolumeSourceTile=void 0,i.boundingVolumeIsFromMesh=!1}function L$e(e,t,n){return function(i){let a,s,c=-1;const l=i.data.imagery,u=l.length;let h;for(h=0;h<u;++h)if(a=l[h],s=Object(o["a"])(a.readyImagery,a.loadingImagery),s.imageryLayer===t){c=h;break}if(-1!==c){const u=c+e;if(a=l[u],s=Object(r["a"])(a)?Object(o["a"])(a.readyImagery,a.loadingImagery):void 0,!Object(r["a"])(s)||s.imageryLayer!==t)return!t._createTileImagerySkeletons(i,n,u);for(h=c;h<u;++h)l[h].freeResources();l.splice(c,e)}return!0}}l$e.prototype.computeDistanceToTile=function(e,t){R$e(e,this,t);const n=e.data,i=n.boundingVolumeSourceTile;if(void 0===i)return 9999999999;const o=n.tileBoundingRegion,r=o.minimumHeight,a=o.maximumHeight;if(n.boundingVolumeSourceTile!==e){const e=t.camera.positionCartographic.height,n=Math.abs(e-r),i=Math.abs(e-a);n>i?(o.minimumHeight=r,o.maximumHeight=r):(o.minimumHeight=a,o.maximumHeight=a)}const s=o.distanceToCamera(t);return o.minimumHeight=r,o.maximumHeight=a,s},l$e.prototype.isDestroyed=function(){return!1},l$e.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Wc(this)},l$e.prototype._onLayerAdded=function(e,t){if(e.show){const t=this._terrainProvider,n=this,i=e.imageryProvider,a=this._imageryLayersUpdatedEvent;i._reload=function(){e._imageryCache={},n._quadtree.forEachLoadedTile((function(n){if(Object(r["a"])(n._loadedCallbacks[e._layerIndex]))return;let i;const a=n.data.imagery,s=a.length;let c=-1,l=0;for(i=0;i<s;++i){const t=a[i],n=Object(o["a"])(t.readyImagery,t.loadingImagery);if(n.imageryLayer===e)-1===c&&(c=i),++l;else if(-1!==c)break}if(-1===c)return;const u=c+l;e._createTileImagerySkeletons(n,t,u)&&(n._loadedCallbacks[e._layerIndex]=L$e(l,e,t),n.state=MXe.LOADING)}))},this._quadtree.forEachLoadedTile((function(i){e._createTileImagerySkeletons(i,t)&&(i.state=MXe.LOADING,0===i.level||i._lastSelectionResultFrame===n.quadtree._lastSelectionFrameNumber&&i._lastSelectionResult===vKe.RENDERED||(i.renderable=!1))})),this._layerOrderChanged=!0,a.raiseEvent()}},l$e.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){const n=t.data.imagery;let i=-1,o=0;for(let a=0,s=n.length;a<s;++a){const t=n[a];let s=t.loadingImagery;if(Object(r["a"])(s)||(s=t.readyImagery),s.imageryLayer===e)-1===i&&(i=a),t.freeResources(),++o;else if(-1!==i)break}-1!==i&&n.splice(i,o)})),Object(r["a"])(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},l$e.prototype._onLayerMoved=function(e,t,n){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},l$e.prototype._onLayerShownOrHidden=function(e,t,n){n?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};const M$e=new Me,N$e=new Me;function B$e(e,t){const n={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_terrainExaggerationAndRelativeHeight:function(){return this.properties.terrainExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){const t=e.context.uniformState.view,n=Me.multiplyByPoint(t,this.properties.rtc,S$e);return Me.setTranslation(t,n,A$e),A$e},u_modifiedModelViewProjection:function(){const t=e.context.uniformState.view,n=e.context.uniformState.projection,i=Me.multiplyByPoint(t,this.properties.rtc,S$e);return Me.setTranslation(t,i,w$e),Me.multiply(n,w$e,w$e),w$e},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){const n=t._clippingPlanes;return Object(r["a"])(n)&&Object(r["a"])(n.texture)?n.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){const n=t._clippingPlanes,i=Object(r["a"])(n)?Me.multiply(e.context.uniformState.view,n.modelMatrix,M$e):Me.IDENTITY;return Me.inverseTranspose(i,N$e)},u_clippingPlanesEdgeStyle:function(){const e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},properties:{initialColor:new be(0,0,.5,1),fillHighlightColor:new Dm(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new Gt(65e5,9e6),nightFadeDistance:new Gt(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new g(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new g(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new g,center3D:void 0,rtc:new g,modifiedModelView:new Me,tileRectangle:new be,terrainExaggerationAndRelativeHeight:new Gt(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new Gt,southMercatorYAndOneOverHeight:new Gt,waterMask:void 0,waterMaskTranslationAndScale:new be,minMaxHeight:new Gt,scaleAndBias:new Me,clippingPlanesEdgeColor:Dm.clone(Dm.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new be,frontFaceAlphaByDistance:new be,backFaceAlphaByDistance:new be,localizedTranslucencyRectangle:new be,undergroundColor:Dm.clone(Dm.TRANSPARENT),undergroundColorAlphaByDistance:new be,lambertDiffuseMultiplier:0}};return Object(r["a"])(t.materialUniformMap)?Object(qE["a"])(n,t.materialUniformMap):n}function F$e(e,t,n){const i=n.data;let o,a;if(Object(r["a"])(i.vertexArray)?(o=i.mesh,a=i.vertexArray):Object(r["a"])(i.fill)&&Object(r["a"])(i.fill.vertexArray)&&(o=i.fill.mesh,a=i.fill.vertexArray),Object(r["a"])(o)&&Object(r["a"])(a)){if(Object(r["a"])(i.wireframeVertexArray)){if(i.wireframeVertexArray.mesh===o)return;i.wireframeVertexArray.destroy(),i.wireframeVertexArray=void 0}i.wireframeVertexArray=z$e(e,a,o),i.wireframeVertexArray.mesh=o}}function z$e(e,t,n){const i=n.indices,o={indices:i,primitiveType:Eu.TRIANGLES};mp.toWireframe(o);const r=o.indices,a=NV.createIndexBuffer({context:e,typedArray:r,usage:LV.STATIC_DRAW,indexDatatype:ll.fromSizeInBytes(r.BYTES_PER_ELEMENT)});return new WV({context:e,attributes:t._attributes,indexBuffer:a})}let k$e,U$e,V$e;(function(){const e=new Sd({geometry:ah.fromDimensions({dimensions:new g(2,2,2)})}),t=new Sd({geometry:new cR({radius:1})});let n,i,o=new Me;function a(e){return new EG({geometryInstances:e,appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1})}k$e=function(t,r){return t===n||(V$e(),n=t,o=Me.fromRotationTranslation(t.halfAxes,t.center,o),e.modelMatrix=o,e.attributes.color=jm.fromColor(r),i=a(e)),i},U$e=function(e,r){return e===n||(V$e(),n=e,o=Me.fromTranslation(e.center,o),o=Me.multiplyByUniformScale(o,e.radius,o),t.modelMatrix=o,t.attributes.color=jm.fromColor(r),i=a(t)),i},V$e=function(){Object(r["a"])(i)&&(i.destroy(),i=void 0,n=void 0)}})();const H$e=new be(0,0,0,0),G$e={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},W$e=Dm.TRANSPARENT,q$e=new xE;function Y$e(e,t,n){const i=t.data;Object(r["a"])(i.vertexArray)||(void 0===i.fill&&(i.fill=new c$e(t)),i.fill.update(e,n));const c=n.creditDisplay,l=i.terrainData;if(Object(r["a"])(l)&&Object(r["a"])(l.credits)){const e=l.credits;for(let t=0,n=e.length;t<n;++t)c.addCredit(e[t])}let u=YN.maximumTextureImageUnits,h=i.waterMaskTexture,d=i.waterMaskTranslationAndScale;!Object(r["a"])(h)&&Object(r["a"])(i.fill)&&(h=i.fill.waterMaskTexture,d=i.fill.waterMaskTranslationAndScale);const f=n.cameraUnderground,p=n.globeTranslucencyState,m=p.translucent,_=p.frontFaceAlphaByDistance,b=p.backFaceAlphaByDistance,y=p.rectangle,v=Object(o["a"])(e.undergroundColor,W$e),O=Object(o["a"])(e.undergroundColorAlphaByDistance,q$e),A=b$e(e,n)&&n.mode===SH.SCENE3D&&v.alpha>0&&(O.nearValue>0||O.farValue>0),w=e.lambertDiffuseMultiplier,T=e.hasWaterMask&&Object(r["a"])(h),C=e.oceanNormalMap,E=T&&Object(r["a"])(C),x=e.terrainProvider.ready&&e.terrainProvider.hasVertexNormals,S=n.fog.enabled&&n.fog.renderable&&!f,I=e.showGroundAtmosphere&&n.mode===SH.SCENE3D,D=DH.castShadows(e.shadows)&&!m,P=DH.receiveShadows(e.shadows)&&!m,j=e.hueShift,R=e.saturationShift,L=e.brightnessShift;let M=!(s["a"].equalsEpsilon(j,0,s["a"].EPSILON7)&&s["a"].equalsEpsilon(R,0,s["a"].EPSILON7)&&s["a"].equalsEpsilon(L,0,s["a"].EPSILON7)),N=!1;if(I){const t=g.magnitude(n.camera.positionWC),i=e.nightFadeOutDistance;N=t>i}T&&--u,E&&--u,Object(r["a"])(n.shadowState)&&n.shadowState.shadowsEnabled&&--u,Object(r["a"])(e.clippingPlanes)&&e.clippingPlanes.enabled&&--u,u-=p.numberOfTextureUniforms;const B=i.renderedMesh;let F=B.center;const z=B.encoding,k=i.tileBoundingRegion,U=n.terrainExaggeration,V=n.terrainExaggerationRelativeHeight,H=1!==U,G=z.hasGeodeticSurfaceNormals,W=T$e;let q=0,Y=0,X=0,K=0,$=!1;if(n.mode!==SH.SCENE3D){const e=n.mapProjection,i=e.project(Fe.southwest(t.rectangle),I$e),o=e.project(Fe.northeast(t.rectangle),D$e);if(W.x=i.x,W.y=i.y,W.z=o.x,W.w=o.y,n.mode!==SH.MORPHING&&(F=x$e,F.x=0,F.y=.5*(W.z+W.x),F.z=.5*(W.w+W.y),W.x-=F.y,W.y-=F.z,W.z-=F.y,W.w-=F.z),n.mode===SH.SCENE2D&&z.quantization===yc.BITS12){const e=1/(Math.pow(2,12)-1)*.5,t=(W.z-W.x)*e,n=(W.w-W.y)*e;W.x-=t,W.y-=n,W.z+=t,W.w+=n}e instanceof Rc&&(q=t.rectangle.south,Y=t.rectangle.north,X=Rc.geodeticLatitudeToMercatorAngle(q),K=1/(Rc.geodeticLatitudeToMercatorAngle(Y)-X),$=!0)}const J=G$e;J.frameState=n,J.surfaceTile=i,J.showReflectiveOcean=T,J.showOceanWaves=E,J.enableLighting=e.enableLighting,J.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,J.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,J.showGroundAtmosphere=I,J.atmosphereLightIntensity=e.atmosphereLightIntensity,J.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,J.atmosphereMieCoefficient=e.atmosphereMieCoefficient,J.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,J.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,J.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,J.perFragmentGroundAtmosphere=N,J.hasVertexNormals=x,J.useWebMercatorProjection=$,J.clippedByBoundaries=i.clippedByBoundaries,J.hasGeodeticSurfaceNormals=G,J.hasExaggeration=H;const Q=i.imagery;let Z=0;const ee=Q.length,te=e.showSkirts&&!f&&!m,ne=e.backFaceCulling&&!f&&!m,ie=ne?e._renderState:e._disableCullingRenderState,oe=ne?e._blendRenderState:e._disableCullingBlendRenderState;let re=ie,ae=e._firstPassInitialColor;const se=n.context;Object(r["a"])(e._debug.boundingSphereTile)||V$e();const ce=e._materialUniformMap!==e.materialUniformMap;if(ce){e._materialUniformMap=e.materialUniformMap;const t=e._drawCommands.length;for(let i=0;i<t;++i)e._uniformMaps[i]=B$e(n,e)}do{let o,l,T=0;if(e._drawCommands.length<=e._usedDrawCommands?(o=new lF,o.owner=t,o.cull=!1,o.boundingVolume=new Tt,o.orientedBoundingBox=void 0,l=B$e(n,e),e._drawCommands.push(o),e._uniformMaps.push(l)):(o=e._drawCommands[e._usedDrawCommands],l=e._uniformMaps[e._usedDrawCommands]),o.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){const e=k.boundingVolume,t=k.boundingSphere;Object(r["a"])(e)?k$e(e,Dm.RED).update(n):Object(r["a"])(t)&&U$e(t,Dm.RED).update(n)}const E=l.properties;be.clone(ae,E.initialColor),E.oceanNormalMap=C,E.lightingFadeDistance.x=e.lightingFadeOutDistance,E.lightingFadeDistance.y=e.lightingFadeInDistance,E.nightFadeDistance.x=e.nightFadeOutDistance,E.nightFadeDistance.y=e.nightFadeInDistance,E.atmosphereLightIntensity=e.atmosphereLightIntensity,E.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,E.atmosphereMieCoefficient=e.atmosphereMieCoefficient,E.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,E.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,E.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,E.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;const x=f?b:_,N=f?_:b;Object(r["a"])(x)&&(be.fromElements(x.near,x.nearValue,x.far,x.farValue,E.frontFaceAlphaByDistance),be.fromElements(N.near,N.nearValue,N.far,N.farValue,E.backFaceAlphaByDistance)),be.fromElements(O.near,O.nearValue,O.far,O.farValue,E.undergroundColorAlphaByDistance),Dm.clone(v,E.undergroundColor),E.lambertDiffuseMultiplier=w;const H=!Object(r["a"])(i.vertexArray)&&Object(r["a"])(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;H&&Dm.clone(e.fillHighlightColor,E.fillHighlightColor),E.terrainExaggerationAndRelativeHeight.x=U,E.terrainExaggerationAndRelativeHeight.y=V,E.center3D=B.center,g.clone(F,E.rtc),be.clone(W,E.tileRectangle),E.southAndNorthLatitude.x=q,E.southAndNorthLatitude.y=Y,E.southMercatorYAndOneOverHeight.x=X,E.southMercatorYAndOneOverHeight.y=K;const G=C$e,$=g$e(t.rectangle,e.cartographicLimitRectangle),ne=E$e,ie=g$e(t.rectangle,y);g.fromElements(j,R,L,E.hsbShift);const ce=t.rectangle,le=1/ce.width,ue=1/ce.height;G.x=($.west-ce.west)*le,G.y=($.south-ce.south)*ue,G.z=($.east-ce.west)*le,G.w=($.north-ce.south)*ue,be.clone(G,E.localizedCartographicLimitRectangle),ne.x=(ie.west-ce.west)*le,ne.y=(ie.south-ce.south)*ue,ne.z=(ie.east-ce.west)*le,ne.w=(ie.north-ce.south)*ue,be.clone(ne,E.localizedTranslucencyRectangle);const he=S&&s["a"].fog(t._distance,n.fog.density)>s["a"].EPSILON3;M=M&&(he||I);let de=!1,fe=!1,pe=!1,me=!1,_e=!1,ge=!1,ye=!1,ve=!1,Oe=!1,Ae=!1;while(T<u&&Z<ee){const e=Q[Z],n=e.readyImagery;if(++Z,!Object(r["a"])(n)||0===n.imageryLayer.alpha)continue;const i=e.useWebMercatorT?n.textureWebMercator:n.texture;if(!Object(r["a"])(i))throw new a["a"]("readyImagery is not actually ready!");const o=n.imageryLayer;Object(r["a"])(e.textureTranslationAndScale)||(e.textureTranslationAndScale=o._calculateTextureTranslationAndScale(t,e)),E.dayTextures[T]=i,E.dayTextureTranslationAndScale[T]=e.textureTranslationAndScale,E.dayTextureTexCoordsRectangle[T]=e.textureCoordinateRectangle,E.dayTextureUseWebMercatorT[T]=e.useWebMercatorT,E.dayTextureAlpha[T]=o.alpha,ge=ge||1!==E.dayTextureAlpha[T],E.dayTextureNightAlpha[T]=o.nightAlpha,ye=ye||1!==E.dayTextureNightAlpha[T],E.dayTextureDayAlpha[T]=o.dayAlpha,ye=ye||1!==E.dayTextureDayAlpha[T],E.dayTextureBrightness[T]=o.brightness,de=de||E.dayTextureBrightness[T]!==bKe.DEFAULT_BRIGHTNESS,E.dayTextureContrast[T]=o.contrast,fe=fe||E.dayTextureContrast[T]!==bKe.DEFAULT_CONTRAST,E.dayTextureHue[T]=o.hue,pe=pe||E.dayTextureHue[T]!==bKe.DEFAULT_HUE,E.dayTextureSaturation[T]=o.saturation,me=me||E.dayTextureSaturation[T]!==bKe.DEFAULT_SATURATION,E.dayTextureOneOverGamma[T]=1/o.gamma,_e=_e||E.dayTextureOneOverGamma[T]!==1/bKe.DEFAULT_GAMMA,E.dayTextureSplit[T]=o.splitDirection,ve=ve||0!==E.dayTextureSplit[T];let s=E.dayTextureCutoutRectangles[T];if(Object(r["a"])(s)||(s=E.dayTextureCutoutRectangles[T]=new be),be.clone(be.ZERO,s),Object(r["a"])(o.cutoutRectangle)){const e=g$e(ce,o.cutoutRectangle),t=Fe.simpleIntersection(e,ce,p$e);Oe=Object(r["a"])(t)||Oe,s.x=(e.west-ce.west)*le,s.y=(e.south-ce.south)*ue,s.z=(e.east-ce.west)*le,s.w=(e.north-ce.south)*ue}let l=E.colorsToAlpha[T];Object(r["a"])(l)||(l=E.colorsToAlpha[T]=new be);const u=Object(r["a"])(o.colorToAlpha)&&o.colorToAlphaThreshold>0;if(Ae=Ae||u,u){const e=o.colorToAlpha;l.x=e.red,l.y=e.green,l.z=e.blue,l.w=o.colorToAlphaThreshold}else l.w=-1;if(Object(r["a"])(n.credits)){const e=n.credits;for(let t=0,n=e.length;t<n;++t)c.addCredit(e[t])}++T}E.dayTextures.length=T,E.waterMask=h,be.clone(d,E.waterMaskTranslationAndScale),E.minMaxHeight.x=z.minimumHeight,E.minMaxHeight.y=z.maximumHeight,Me.clone(z.matrix,E.scaleAndBias);const we=e._clippingPlanes,Te=Object(r["a"])(we)&&we.enabled&&t.isClipped;Te&&(E.clippingPlanesEdgeColor=Dm.clone(we.edgeColor,E.clippingPlanesEdgeColor),E.clippingPlanesEdgeWidth=we.edgeWidth),J.numberOfDayTextures=T,J.applyBrightness=de,J.applyContrast=fe,J.applyHue=pe,J.applySaturation=me,J.applyGamma=_e,J.applyAlpha=ge,J.applyDayNightAlpha=ye,J.applySplit=ve,J.enableFog=he,J.enableClippingPlanes=Te,J.clippingPlanes=we,J.hasImageryLayerCutout=Oe,J.colorCorrect=M,J.highlightFillTile=H,J.colorToAlpha=Ae,J.showUndergroundColor=A,J.translucent=m;let Ce=i.renderedMesh.indices.length;te||(Ce=i.renderedMesh.indexCountWithoutSkirts),o.shaderProgram=e._surfaceShaderSet.getShaderProgram(J),o.castShadows=D,o.receiveShadows=P,o.renderState=re,o.primitiveType=Eu.TRIANGLES,o.vertexArray=i.vertexArray||i.fill.vertexArray,o.count=Ce,o.uniformMap=l,o.pass=hF.GLOBE,e._debug.wireframe&&(F$e(se,e,t),Object(r["a"])(i.wireframeVertexArray)&&(o.vertexArray=i.wireframeVertexArray,o.primitiveType=Eu.LINES,o.count=2*Ce));let Ee=o.boundingVolume;const xe=o.orientedBoundingBox;n.mode!==SH.SCENE3D?(Tt.fromRectangleWithHeights2D(t.rectangle,n.mapProjection,k.minimumHeight,k.maximumHeight,Ee),g.fromElements(Ee.center.z,Ee.center.x,Ee.center.y,Ee.center),n.mode===SH.MORPHING&&(Ee=Tt.union(k.boundingSphere,Ee,Ee))):(o.boundingVolume=Tt.clone(k.boundingSphere,Ee),o.orientedBoundingBox=Ws.clone(k.boundingVolume,xe)),o.dirty=!0,m&&p.updateDerivedCommands(o,n),d$e(o,n),re=oe,ae=H$e}while(Z<ee)}var X$e=l$e;function K$e(){this._enabled=!1,this._frontFaceAlpha=1,this._frontFaceAlphaByDistance=void 0,this._backFaceAlpha=1,this._backFaceAlphaByDistance=void 0,this._rectangle=Fe.clone(Fe.MAX_VALUE)}Object.defineProperties(K$e.prototype,{enabled:{get:function(){return this._enabled},set:function(e){i["a"].typeOf.bool("enabled",e),this._enabled=e}},frontFaceAlpha:{get:function(){return this._frontFaceAlpha},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("frontFaceAlpha",e,0),i["a"].typeOf.number.lessThanOrEquals("frontFaceAlpha",e,1),this._frontFaceAlpha=e}},frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<e.near)throw new a["a"]("far distance must be greater than near distance.");this._frontFaceAlphaByDistance=xE.clone(e,this._frontFaceAlphaByDistance)}},backFaceAlpha:{get:function(){return this._backFaceAlpha},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("backFaceAlpha",e,0),i["a"].typeOf.number.lessThanOrEquals("backFaceAlpha",e,1),this._backFaceAlpha=e}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<e.near)throw new a["a"]("far distance must be greater than near distance.");this._backFaceAlphaByDistance=xE.clone(e,this._backFaceAlphaByDistance)}},rectangle:{get:function(){return this._rectangle},set:function(e){Object(r["a"])(e)||(e=Fe.clone(Fe.MAX_VALUE)),Fe.clone(e,this._rectangle)}}});var $$e=K$e;function J$e(){this._layers=[],this.layerAdded=new dn["a"],this.layerRemoved=new dn["a"],this.layerMoved=new dn["a"],this.layerShownOrHidden=new dn["a"]}function Q$e(e,t){if(!Object(r["a"])(t))throw new a["a"]("layer is required.");const n=e.indexOf(t);if(-1===n)throw new a["a"]("layer is not in this collection.");return n}function Z$e(e,t,n){const i=e._layers;if(t=s["a"].clamp(t,0,i.length-1),n=s["a"].clamp(n,0,i.length-1),t===n)return;const o=i[t];i[t]=i[n],i[n]=o,e._update(),e.layerMoved.raiseEvent(o,n,t)}Object.defineProperties(J$e.prototype,{length:{get:function(){return this._layers.length}}}),J$e.prototype.add=function(e,t){const n=Object(r["a"])(t);if(!Object(r["a"])(e))throw new a["a"]("layer is required.");if(n){if(t<0)throw new a["a"]("index must be greater than or equal to zero.");if(t>this._layers.length)throw new a["a"]("index must be less than or equal to the number of layers.")}n?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t)},J$e.prototype.addImageryProvider=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("imageryProvider is required.");const n=new bKe(e);return this.add(n,t),n},J$e.prototype.remove=function(e,t){t=Object(o["a"])(t,!0);const n=this._layers.indexOf(e);return-1!==n&&(this._layers.splice(n,1),this._update(),this.layerRemoved.raiseEvent(e,n),t&&e.destroy(),!0)},J$e.prototype.removeAll=function(e){e=Object(o["a"])(e,!0);const t=this._layers;for(let n=0,i=t.length;n<i;n++){const i=t[n];this.layerRemoved.raiseEvent(i,n),e&&i.destroy()}this._layers=[]},J$e.prototype.contains=function(e){return-1!==this.indexOf(e)},J$e.prototype.indexOf=function(e){return this._layers.indexOf(e)},J$e.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.","index");return this._layers[e]},J$e.prototype.raise=function(e){const t=Q$e(this._layers,e);Z$e(this,t,t+1)},J$e.prototype.lower=function(e){const t=Q$e(this._layers,e);Z$e(this,t,t-1)},J$e.prototype.raiseToTop=function(e){const t=Q$e(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},J$e.prototype.lowerToBottom=function(e){const t=Q$e(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const eJe=new Fe;function tJe(e,t,n,i){const o=e.globe._surface._tilesToRender;let a;for(let s=0;!Object(r["a"])(a)&&s<o.length;++s){const e=o[s];Fe.contains(e.rectangle,t)&&(a=e)}if(!Object(r["a"])(a))return;const c=a.data.imagery;for(let l=c.length-1;l>=0;--l){const e=c[l],o=e.readyImagery;if(!Object(r["a"])(o))continue;const u=o.imageryLayer.imageryProvider;if(n&&!Object(r["a"])(u.pickFeatures))continue;if(!Fe.contains(o.rectangle,t))continue;const h=eJe,d=1/1024;h.west=s["a"].lerp(a.rectangle.west,a.rectangle.east,e.textureCoordinateRectangle.x-d),h.east=s["a"].lerp(a.rectangle.west,a.rectangle.east,e.textureCoordinateRectangle.z+d),h.south=s["a"].lerp(a.rectangle.south,a.rectangle.north,e.textureCoordinateRectangle.y-d),h.north=s["a"].lerp(a.rectangle.south,a.rectangle.north,e.textureCoordinateRectangle.w+d),Fe.contains(h,t)&&i(o)}}J$e.prototype.pickImageryLayers=function(e,t){const n=t.globe.pick(e,t);if(!Object(r["a"])(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),o=[];return tJe(t,i,!1,(function(e){o.push(e.imageryLayer)})),0!==o.length?o:void 0},J$e.prototype.pickImageryLayerFeatures=function(e,t){const n=t.globe.pick(e,t);if(!Object(r["a"])(n))return;const i=t.globe.ellipsoid.cartesianToCartographic(n),o=[],a=[];return tJe(t,i,!0,(function(e){const t=e.imageryLayer.imageryProvider,n=t.pickFeatures(e.x,e.y,e.level,i.longitude,i.latitude);Object(r["a"])(n)&&(o.push(n),a.push(e.imageryLayer))})),0!==o.length?Promise.all(o).then((function(e){const t=[];for(let n=0;n<e.length;++n){const o=e[n],s=a[n];if(Object(r["a"])(o)&&o.length>0)for(let e=0;e<o.length;++e){const n=o[e];n.imageryLayer=s,Object(r["a"])(n.position)||(n.position=i),t.push(n)}}return t})):void 0},J$e.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let n=0,i=t.length;n<i;++n)t[n].queueReprojectionCommands(e)},J$e.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,n=e.length;t<n;++t)e[t].cancelReprojections()},J$e.prototype.isDestroyed=function(){return!1},J$e.prototype.destroy=function(){return this.removeAll(!0),Wc(this)},J$e.prototype._update=function(){let e=!0;const t=this._layers;let n,i,o,a;for(o=0,a=t.length;o<a;++o)i=t[o],i._layerIndex=o,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&(Object(r["a"])(i._show)&&(Object(r["a"])(n)||(n=[]),n.push(i)),i._show=i.show);if(Object(r["a"])(n))for(o=0,a=n.length;o<a;++o)i=n[o],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)};var nJe=J$e;function iJe(e){this._ellipsoid=new Mn(e.ellipsoid,g.ZERO)}Object.defineProperties(iJe.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});var oJe=iJe;function rJe(e){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.x))throw new a["a"]("options.x is required.");if(!Object(r["a"])(e.y))throw new a["a"]("options.y is required.");if(e.x<0||e.y<0)throw new a["a"]("options.x and options.y must be greater than or equal to zero.");if(!Object(r["a"])(e.level))throw new a["a"]("options.level is required and must be greater than or equal to zero.");if(!Object(r["a"])(e.tilingScheme))throw new a["a"]("options.tilingScheme is required.");this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=vKe.NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=MXe.START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function aJe(e){Object(r["a"])(e)&&e.freeResources()}rJe.createLevelZeroTiles=function(e){if(!Object(r["a"])(e))throw new a["a"]("tilingScheme is required.");const t=e.getNumberOfXTilesAtLevel(0),n=e.getNumberOfYTilesAtLevel(0),i=new Array(t*n);let o=0;for(let r=0;r<n;++r)for(let n=0;n<t;++n)i[o++]=new rJe({tilingScheme:e,x:n,y:r,level:0});return i},rJe.prototype._updateCustomData=function(e,t,n){let i,o,a,s=this.customData;if(Object(r["a"])(t)&&Object(r["a"])(n)){for(s=s.filter((function(e){return-1===n.indexOf(e)})),this._customData=s,a=this._rectangle,i=0;i<t.length;++i)o=t[i],Fe.contains(a,o.positionCartographic)&&s.push(o);this._frameUpdated=e}else{const e=this._parent;if(Object(r["a"])(e)&&this._frameUpdated!==e._frameUpdated){s.length=0,a=this._rectangle;const t=e.customData;for(i=0;i<t.length;++i)o=t[i],Fe.contains(a,o.positionCartographic)&&s.push(o);this._frameUpdated=e._frameUpdated}}},Object.defineProperties(rJe.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return Object(r["a"])(this._southwestChild)||(this._southwestChild=new rJe({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return Object(r["a"])(this._southeastChild)||(this._southeastChild=new rJe({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return Object(r["a"])(this._northwestChild)||(this._northwestChild=new rJe({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return Object(r["a"])(this._northeastChild)||(this._northeastChild=new rJe({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<MXe.DONE}},eligibleForUnloading:{get:function(){let e=!0;return Object(r["a"])(this.data)&&(e=this.data.eligibleForUnloading,Object(r["a"])(e)||(e=!0)),e}}}),rJe.prototype.findLevelZeroTile=function(e,t,n){const i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(n<0||n>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===n}))[0]},rJe.prototype.findTileToWest=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;const n=t.findTileToWest(e);return void 0!==n?t.southwestChild===this?n.southeastChild:n.northeastChild:void 0},rJe.prototype.findTileToEast=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;const n=t.findTileToEast(e);return void 0!==n?t.southeastChild===this?n.southwestChild:n.northwestChild:void 0},rJe.prototype.findTileToSouth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;const n=t.findTileToSouth(e);return void 0!==n?t.southwestChild===this?n.northwestChild:n.northeastChild:void 0},rJe.prototype.findTileToNorth=function(e){const t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;const n=t.findTileToNorth(e);return void 0!==n?t.northwestChild===this?n.southwestChild:n.southeastChild:void 0},rJe.prototype.freeResources=function(){this.state=MXe.START,this.renderable=!1,this.upsampledFromParent=!1,Object(r["a"])(this.data)&&Object(r["a"])(this.data.freeResources)&&this.data.freeResources(),aJe(this._southwestChild),this._southwestChild=void 0,aJe(this._southeastChild),this._southeastChild=void 0,aJe(this._northwestChild),this._northwestChild=void 0,aJe(this._northeastChild),this._northeastChild=void 0};var sJe=rJe;function cJe(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function lJe(e,t){const n=t.replacementPrevious,i=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=i),t===e.head?e.head=i:n.replacementNext=i,t===e.tail?e.tail=n:i.replacementPrevious=n,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}cJe.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},cJe.prototype.trimTiles=function(e){let t=this.tail,n=!0;while(n&&Object(r["a"])(this._lastBeforeStartOfFrame)&&this.count>e&&Object(r["a"])(t)){n=t!==this._lastBeforeStartOfFrame;const e=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),lJe(this,t)),t=e}},cJe.prototype.markTileRendered=function(e){const t=this.head;if(t!==e){if(++this.count,!Object(r["a"])(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);(Object(r["a"])(e.replacementPrevious)||Object(r["a"])(e.replacementNext))&&lJe(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)};var uJe=cJe;function hJe(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.tileProvider))throw new a["a"]("options.tileProvider is required.");if(Object(r["a"])(e.tileProvider.quadtree))throw new a["a"]("A QuadtreeTileProvider can only be used with a single QuadtreePrimitive");this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};const t=this._tileProvider.tilingScheme,n=t.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new uJe,this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=Object(o["a"])(e.maximumScreenSpaceError,2),this.tileCacheSize=Object(o["a"])(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new oJe({ellipsoid:n}),this._tileLoadProgressEvent=new dn["a"],this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function dJe(e){const t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,fJe(e);const n=e._levelZeroTiles;if(Object(r["a"])(n))for(let i=0;i<n.length;++i){const t=n[i],o=t.customData,r=o.length;for(let n=0;n<r;++n){const t=o[n];t.level=0,e._addHeightCallbacks.push(t)}n[i].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}function fJe(e){const t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}function pJe(e,t){const n=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;(n!==e._lastTileLoadQueueLength||e._tilesInvalidated)&&(t.afterRender.push(dn["a"].prototype.raiseEvent.bind(e._tileLoadProgressEvent,n)),e._lastTileLoadQueueLength=n);const i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(console.log(`Visited ${i.tilesVisited}, Rendered: ${i.tilesRendered}, Culled: ${i.tilesCulled}, Max Depth Rendered: ${i.maxDepth}, Max Depth Visited: ${i.maxDepthVisited}, Waiting for children: ${i.tilesWaitingForChildren}`),i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}let mJe;Object.defineProperties(hJe.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),hJe.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},hJe.prototype.forEachLoadedTile=function(e){let t=this._tileReplacementQueue.head;while(Object(r["a"])(t))t.state!==MXe.START&&e(t),t=t.replacementNext},hJe.prototype.forEachRenderedTile=function(e){const t=this._tilesToRender;for(let n=0,i=t.length;n<i;++n)e(t[n])},hJe.prototype.updateHeight=function(e,t){const n=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){const e=n._addHeightCallbacks,t=e.length;for(let n=0;n<t;++n)if(e[n]===i){e.splice(n,1);break}n._removeHeightCallbacks.push(i),i.callback&&(i.callback=void 0)}};return n._addHeightCallbacks.push(i),i.removeFunc},hJe.prototype.update=function(e){Object(r["a"])(this._tileProvider.update)&&this._tileProvider.update(e)},hJe.prototype.beginFrame=function(e){const t=e.passes;t.render&&(this._tilesInvalidated&&(dJe(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),fJe(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},hJe.prototype.render=function(e){const t=e.passes,n=this._tileProvider;t.render&&(n.beginUpdate(e),vJe(this,e),kJe(this,e),n.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&n.updateForPick(e)},hJe.prototype.endFrame=function(e){const t=e.passes;t.render&&e.mode!==SH.MORPHING&&(jJe(this,e),zJe(this,e),pJe(this,e))},hJe.prototype.isDestroyed=function(){return!1},hJe.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};const _Je=new I;function gJe(e,t){let n=Fe.center(e.rectangle,_Je);const i=n.longitude-mJe.longitude,o=n.latitude-mJe.latitude;n=Fe.center(t.rectangle,_Je);const r=n.longitude-mJe.longitude,a=n.latitude-mJe.latitude;return i*i+o*o-(r*r+a*a)}const bJe=new g;let yJe=[];function vJe(e,t){const n=e._debug;if(n.suspendLodUpdate)return;const i=e._tilesToRender;let o;i.length=0;const a=e._tileProvider;if(!Object(r["a"])(e._levelZeroTiles)){if(!a.ready)return;{const t=a.tilingScheme;e._levelZeroTiles=sJe.createLevelZeroTiles(t);const n=e._levelZeroTiles.length;if(yJe.length<n)for(yJe=new Array(n),o=0;o<n;++o)void 0===yJe[o]&&(yJe[o]=new AJe)}}let s;e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;const c=e._levelZeroTiles,l=c.length>1?e._occluders:void 0;mJe=t.camera.positionCartographic,c.sort(gJe);const u=e._addHeightCallbacks,h=e._removeHeightCallbacks,d=t.frameNumber;let f;if(u.length>0||h.length>0){for(o=0,f=c.length;o<f;++o)s=c[o],s._updateCustomData(d,u,h);u.length=0,h.length=0}const p=t.camera;e._cameraPositionCartographic=p.positionCartographic;const m=Me.getTranslation(p.transform,bJe);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(m,e._cameraReferenceFrameOriginCartographic),o=0,f=c.length;o<f;++o)s=c[o],e._tileReplacementQueue.markTileRendered(s),s.renderable?SJe(e,s,a,t,l,!1,yJe[o]):(OJe(e,e._tileLoadQueueHigh,s,t),++n.tilesWaitingForChildren);e._lastSelectionFrameNumber=d}function OJe(e,t,n,i){n.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(n._loadPriority=e.tileProvider.computeTileLoadPriority(n,i)),t.push(n))}function AJe(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function wJe(){this.southwest=new AJe,this.southeast=new AJe,this.northwest=new AJe,this.northeast=new AJe}wJe.prototype.combine=function(e){const t=this.southwest,n=this.southeast,i=this.northwest,o=this.northeast;e.allAreRenderable=t.allAreRenderable&&n.allAreRenderable&&i.allAreRenderable&&o.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||n.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||o.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+n.notYetRenderableCount+i.notYetRenderableCount+o.notYetRenderableCount};const TJe=new Array(31);for(let Set=0;Set<TJe.length;++Set)TJe[Set]=new wJe;function CJe(e,t,n,i,o){const a=e._debug;++a.tilesVisited,e._tileReplacementQueue.markTileRendered(n),n._updateCustomData(t.frameNumber),n.level>a.maxDepthVisited&&(a.maxDepthVisited=n.level);const s=IJe(e,t,n)<e.maximumScreenSpaceError,c=n.southwestChild,l=n.southeastChild,u=n.northwestChild,h=n.northeastChild,d=e._lastSelectionFrameNumber,f=n._lastSelectionResultFrame===d?n._lastSelectionResult:vKe.NONE,p=e.tileProvider;if(s||i){const a=vKe.originalResult(f)===vKe.RENDERED,c=vKe.originalResult(f)===vKe.CULLED||f===vKe.NONE,l=n.state===MXe.DONE;let u=a||c||l;if(u||Object(r["a"])(p.canRenderWithoutLosingDetail)&&(u=p.canRenderWithoutLosingDetail(n)),u)return s&&OJe(e,e._tileLoadQueueMedium,n,t),PJe(e,n),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=f===vKe.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=vKe.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));i=!0,s&&OJe(e,e._tileLoadQueueHigh,n,t)}if(p.canRefine(n)){const r=c.upsampledFromParent&&l.upsampledFromParent&&u.upsampledFromParent&&h.upsampledFromParent;if(r)return PJe(e,n),OJe(e,e._tileLoadQueueMedium,n,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(u),e._tileReplacementQueue.markTileRendered(h),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=f===vKe.RENDERED,o.notYetRenderableCount=n.renderable?0:1,n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=vKe.RENDERED,void(o.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(n));n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=vKe.REFINED;const s=e._tilesToRender.length,d=e._tileLoadQueueLow.length,p=e._tileLoadQueueMedium.length,m=e._tileLoadQueueHigh.length,_=e._tileToUpdateHeights.length;if(EJe(e,c,l,u,h,t,i,o),s!==e._tilesToRender.length){const i=o.allAreRenderable,r=o.anyWereRenderedLastFrame,c=o.notYetRenderableCount;let l=!1;if(!i&&!r){const i=e._tilesToRender;for(let e=s;e<i.length;++e){let t=i[e];while(void 0!==t&&t._lastSelectionResult!==vKe.KICKED&&t!==n)t._lastSelectionResult=vKe.kick(t._lastSelectionResult),t=t.parent}e._tilesToRender.length=s,e._tileToUpdateHeights.length=_,PJe(e,n),n._lastSelectionResult=vKe.RENDERED;const r=f===vKe.RENDERED;!r&&c>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=d,e._tileLoadQueueMedium.length=p,e._tileLoadQueueHigh.length=m,OJe(e,e._tileLoadQueueMedium,n,t),o.notYetRenderableCount=n.renderable?0:1,l=!0),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=r,r||e._tileToUpdateHeights.push(n),++a.tilesWaitingForChildren}e.preloadAncestors&&!l&&OJe(e,e._tileLoadQueueLow,n,t)}}else n._lastSelectionResultFrame=t.frameNumber,n._lastSelectionResult=vKe.RENDERED,PJe(e,n),OJe(e,e._tileLoadQueueHigh,n,t),o.allAreRenderable=n.renderable,o.anyWereRenderedLastFrame=f===vKe.RENDERED,o.notYetRenderableCount=n.renderable?0:1}function EJe(e,t,n,i,o,r,a,s){const c=r.camera.positionCartographic,l=e._tileProvider,u=e._occluders,h=TJe[t.level],d=h.southwest,f=h.southeast,p=h.northwest,m=h.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(SJe(e,t,l,r,u,a,d),SJe(e,n,l,r,u,a,f),SJe(e,i,l,r,u,a,p),SJe(e,o,l,r,u,a,m)):(SJe(e,i,l,r,u,a,p),SJe(e,t,l,r,u,a,d),SJe(e,o,l,r,u,a,m),SJe(e,n,l,r,u,a,f)):c.latitude<t.rectangle.north?(SJe(e,n,l,r,u,a,f),SJe(e,t,l,r,u,a,d),SJe(e,o,l,r,u,a,m),SJe(e,i,l,r,u,a,p)):(SJe(e,o,l,r,u,a,m),SJe(e,i,l,r,u,a,p),SJe(e,n,l,r,u,a,f),SJe(e,t,l,r,u,a,d)),h.combine(s)}function xJe(e,t){const n=t.rectangle;return Object(r["a"])(e._cameraPositionCartographic)&&Fe.contains(n,e._cameraPositionCartographic)||Object(r["a"])(e._cameraReferenceFrameOriginCartographic)&&Fe.contains(n,e._cameraReferenceFrameOriginCartographic)}function SJe(e,t,n,i,o,a,s){if(n.computeTileVisibility(t,i,o)!==IE.NONE)return CJe(e,i,t,a,s);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),s.allAreRenderable=!0,s.anyWereRenderedLastFrame=!1,s.notYetRenderableCount=0,xJe(e,t)){Object(r["a"])(t.data)&&Object(r["a"])(t.data.vertexArray)||OJe(e,e._tileLoadQueueMedium,t,i);const n=e._lastSelectionFrameNumber,o=t._lastSelectionResultFrame===n?t._lastSelectionResult:vKe.NONE;o!==vKe.CULLED_BUT_NEEDED&&o!==vKe.RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=vKe.CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(OJe(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=vKe.CULLED):t._lastSelectionResult=vKe.CULLED;t._lastSelectionResultFrame=i.frameNumber}function IJe(e,t,n){if(t.mode===SH.SCENE2D||t.camera.frustum instanceof IO||t.camera.frustum instanceof EO)return DJe(e,t,n);const i=e._tileProvider.getLevelMaximumGeometricError(n.level),o=n._distance,r=t.context.drawingBufferHeight,a=t.camera.frustum.sseDenominator;let c=i*r/(o*a);return t.fog.enabled&&(c-=s["a"].fog(o,t.fog.density)*t.fog.sse),c/=t.pixelRatio,c}function DJe(e,t,n){const i=t.camera;let o=i.frustum;Object(r["a"])(o._offCenterFrustum)&&(o=o._offCenterFrustum);const a=t.context,c=a.drawingBufferWidth,l=a.drawingBufferHeight,u=e._tileProvider.getLevelMaximumGeometricError(n.level),h=Math.max(o.top-o.bottom,o.right-o.left)/Math.max(c,l);let d=u/h;return t.fog.enabled&&t.mode!==SH.SCENE2D&&(d-=s["a"].fog(n._distance,t.fog.density)*t.fog.sse),d/=t.pixelRatio,d}function PJe(e,t){e._tilesToRender.push(t)}function jJe(e,t){const n=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,o=e._tileLoadQueueLow;if(0===n.length&&0===i.length&&0===o.length)return;e._tileReplacementQueue.trimTiles(e.tileCacheSize);const r=bm()+e._loadQueueTimeSlice,a=e._tileProvider;let s=LJe(e,t,a,r,n,!1);s=LJe(e,t,a,r,i,s),LJe(e,t,a,r,o,s)}function RJe(e,t){return e._loadPriority-t._loadPriority}function LJe(e,t,n,i,o,r){void 0!==n.computeTileLoadPriority&&o.sort(RJe);for(let a=0,s=o.length;a<s&&(bm()<i||!r);++a){const i=o[a];e._tileReplacementQueue.markTileRendered(i),n.loadTile(t,i),r=!0}return r}const MJe=new Yn,NJe=new I,BJe=new g,FJe=[];function zJe(e,t){if(!e.tileProvider.ready)return;const n=FJe;n.length=0;const i=e._tileToUpdateHeights,o=bm(),a=e._updateHeightsTimeSlice,s=o+a,c=t.mode,l=t.mapProjection,u=e.tileProvider.tilingScheme.ellipsoid;let h;while(i.length>0){const t=i[0];if(!Object(r["a"])(t.data)||!Object(r["a"])(t.data.mesh)){const o=t._lastSelectionResultFrame===e._lastSelectionFrameNumber?t._lastSelectionResult:vKe.NONE;o!==vKe.RENDERED&&o!==vKe.CULLED_BUT_NEEDED||n.push(t),i.shift(),e._lastTileIndex=0;continue}const o=t.customData,a=o.length;let d=!1;for(h=e._lastTileIndex;h<a;++h){const e=o[h],n=t.data.terrainData,i=Object(r["a"])(n)&&n.wasCreatedByUpsampling();if(t.level>e.level&&!i){if(Object(r["a"])(e.positionOnEllipsoidSurface)||(e.positionOnEllipsoidSurface=g.fromRadians(e.positionCartographic.longitude,e.positionCartographic.latitude,0,u)),c===SH.SCENE3D){const n=u.geodeticSurfaceNormal(e.positionOnEllipsoidSurface,MJe.direction),i=u.getSurfaceNormalIntersectionWithZAxis(e.positionOnEllipsoidSurface,11500,MJe.origin);if(!Object(r["a"])(i)){let i=0;Object(r["a"])(t.data.tileBoundingRegion)&&(i=t.data.tileBoundingRegion.minimumHeight);const o=Math.min(i,-11500),a=g.multiplyByScalar(n,Math.abs(o)+1,BJe);g.subtract(e.positionOnEllipsoidSurface,a,MJe.origin)}}else I.clone(e.positionCartographic,NJe),NJe.height=-11500,l.project(NJe,BJe),g.fromElements(BJe.z,BJe.x,BJe.y,BJe),g.clone(BJe,MJe.origin),g.clone(g.UNIT_X,MJe.direction);const n=t.data.pick(MJe,c,l,!1,BJe);Object(r["a"])(n)&&(Object(r["a"])(e.callback)&&e.callback(n),e.level=t.level)}if(bm()>=s){d=!0;break}}if(d){e._lastTileIndex=h;break}e._lastTileIndex=0,i.shift()}for(h=0;h<n.length;h++)i.push(n[h])}function kJe(e,t){const n=e._tileProvider,i=e._tilesToRender;for(let o=0,r=i.length;o<r;++o){const e=i[o];n.showTileThisFrame(e,t)}}var UJe=hJe;function VJe(e){e=Object(o["a"])(e,k.WGS84);const t=new mO({ellipsoid:e}),n=new nJe;this._ellipsoid=e,this._imageryLayerCollection=n,this._surfaceShaderSet=new PXe,this._material=void 0,this._surface=new UJe({tileProvider:new X$e({terrainProvider:t,imageryLayers:n,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new dn["a"],this._undergroundColor=Dm.clone(Dm.BLACK),this._undergroundColorAlphaByDistance=new xE(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new $$e,HJe(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new Et["a"]({url:Bt("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!0,this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new g(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new g(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=1e7,this.lightingFadeInDistance=2e7,this.nightFadeOutDistance=1e7,this.nightFadeInDistance=5e7,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=DH.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0}function HJe(e){const t=[],n=Object(r["a"])(e._material)&&(e._material.shaderSource.match(/slope/)||e._material.shaderSource.match("normalEC")),i=[bXe,yXe];!Object(r["a"])(e._material)||n&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(i.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),i.push(_Xe),e._surfaceShaderSet.baseVertexShaderSource=new EV({sources:[bXe,yXe,gXe],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new EV({sources:i,defines:t}),e._surfaceShaderSet.material=e._material}function GJe(e){return function(t,n){const i=Tt.distanceSquaredTo(t.pickBoundingSphere,e),o=Tt.distanceSquaredTo(n.pickBoundingSphere,e);return i-o}}Object.defineProperties(VJe.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!Object(r["a"])(this._surface)||this._surface.tileProvider.ready&&0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){Object(r["a"])(e)||(e=Fe.clone(Fe.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),Object(r["a"])(this._material)&&HJe(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,HJe(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=Dm.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){if(Object(r["a"])(e)&&e.far<e.near)throw new a["a"]("far distance must be greater than near distance.");this._undergroundColorAlphaByDistance=xE.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const WJe=[],qJe={start:0,stop:0};VJe.prototype.pickWorldCoordinates=function(e,t,n,i){if(!Object(r["a"])(e))throw new a["a"]("ray is required");if(!Object(r["a"])(t))throw new a["a"]("scene is required");n=Object(o["a"])(n,!0);const s=t.mode,c=t.mapProjection,l=WJe;l.length=0;const u=this._surface._tilesToRender;let h,d,f,p=u.length;for(d=0;d<p;++d){h=u[d];const t=h.data;if(!Object(r["a"])(t))continue;let n=t.pickBoundingSphere;if(s!==SH.SCENE3D)t.pickBoundingSphere=n=Tt.fromRectangleWithHeights2D(h.rectangle,c,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,n),g.fromElements(n.center.z,n.center.x,n.center.y,n.center);else{if(!Object(r["a"])(t.renderedMesh))continue;Tt.clone(t.tileBoundingRegion.boundingSphere,n)}const i=Ci.raySphere(e,n,qJe);Object(r["a"])(i)&&l.push(t)}for(l.sort(GJe(e.origin)),p=l.length,d=0;d<p;++d)if(f=l[d].pick(e,t.mode,t.mapProjection,n,i),Object(r["a"])(f))break;return f};const YJe=new I;VJe.prototype.pick=function(e,t,n){if(n=this.pickWorldCoordinates(e,t,!0,n),Object(r["a"])(n)&&t.mode!==SH.SCENE3D){n=g.fromElements(n.y,n.z,n.x,n);const e=t.mapProjection.unproject(n,YJe);n=t.globe.ellipsoid.cartographicToCartesian(e,n)}return n};const XJe=new g,KJe=new g,$Je=new I,JJe=new Yn;function QJe(e,t){return Object(r["a"])(e)&&Fe.contains(e.rectangle,t)?e:void 0}VJe.prototype.getHeight=function(e){if(!Object(r["a"])(e))throw new a["a"]("cartographic is required");const t=this._surface._levelZeroTiles;if(!Object(r["a"])(t))return;let n,i;const s=t.length;for(i=0;i<s;++i)if(n=t[i],Fe.contains(n.rectangle,e))break;if(i>=s)return;let c=n;while(Object(r["a"])(n))n=QJe(n._southwestChild,e)||QJe(n._southeastChild,e)||QJe(n._northwestChild,e)||n._northeastChild,Object(r["a"])(n)&&Object(r["a"])(n.data)&&Object(r["a"])(n.data.renderedMesh)&&(c=n);if(n=c,!Object(r["a"])(n)||!Object(r["a"])(n.data)||!Object(r["a"])(n.data.renderedMesh))return;const l=this._surface._tileProvider.tilingScheme.projection,u=this._surface._tileProvider.tilingScheme.ellipsoid,h=g.fromRadians(e.longitude,e.latitude,0,u,XJe),d=JJe,f=u.geodeticSurfaceNormal(h,d.direction),p=u.getSurfaceNormalIntersectionWithZAxis(h,11500,d.origin);if(!Object(r["a"])(p)){let e;Object(r["a"])(n.data.tileBoundingRegion)&&(e=n.data.tileBoundingRegion.minimumHeight);const t=Math.min(Object(o["a"])(e,0),-11500),i=g.multiplyByScalar(f,Math.abs(t)+1,KJe);g.subtract(h,i,d.origin)}const m=n.data.pick(d,void 0,l,!1,KJe);return Object(r["a"])(m)?u.cartesianToCartographic(m,$Je).height:void 0},VJe.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},VJe.prototype.beginFrame=function(e){const t=this._surface,n=t.tileProvider,i=this.terrainProvider,o=this.showWaterEffect&&i.ready&&i.hasWaterMask;if(o&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,n=t.url;if(Object(r["a"])(n)){const i=this;t.fetchImage().then((function(t){n===i._oceanNormalMapResource.url&&(i._oceanNormalMap=i._oceanNormalMap&&i._oceanNormalMap.destroy(),i._oceanNormalMap=new lB({context:e.context,source:t}))}))}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const a=e.passes,s=e.mode;a.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,n.terrainProvider=this.terrainProvider,n.lightingFadeOutDistance=this.lightingFadeOutDistance,n.lightingFadeInDistance=this.lightingFadeInDistance,n.nightFadeOutDistance=this.nightFadeOutDistance,n.nightFadeInDistance=this.nightFadeInDistance,n.zoomedOutOceanSpecularIntensity=s===SH.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,n.hasWaterMask=o,n.oceanNormalMap=this._oceanNormalMap,n.enableLighting=this.enableLighting,n.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,n.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,n.showGroundAtmosphere=this.showGroundAtmosphere,n.atmosphereLightIntensity=this.atmosphereLightIntensity,n.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,n.atmosphereMieCoefficient=this.atmosphereMieCoefficient,n.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,n.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,n.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,n.shadows=this.shadows,n.hueShift=this.atmosphereHueShift,n.saturationShift=this.atmosphereSaturationShift,n.brightnessShift=this.atmosphereBrightnessShift,n.fillHighlightColor=this.fillHighlightColor,n.showSkirts=this.showSkirts,n.backFaceCulling=this.backFaceCulling,n.undergroundColor=this._undergroundColor,n.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,n.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},VJe.prototype.render=function(e){this.show&&(Object(r["a"])(this._material)&&this._material.update(e.context),this._surface.render(e))},VJe.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},VJe.prototype.isDestroyed=function(){return!1},VJe.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),Wc(this)};var ZJe=VJe,eQe="uniform sampler2D colorTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n}\n",tQe="uniform highp sampler2D u_depthTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    gl_FragColor = czm_packDepth(texture2D(u_depthTexture, v_textureCoordinates).r);\n}\n";function nQe(){this._picking=!1,this._numSamples=1,this._tempCopyDepthTexture=void 0,this._pickColorFramebuffer=new N8({depthStencil:!0,supportsDepthTexture:!0}),this._outputFramebuffer=new N8({depthStencil:!0,supportsDepthTexture:!0}),this._copyDepthFramebuffer=new N8,this._tempCopyDepthFramebuffer=new N8,this._updateDepthFramebuffer=new N8({createColorAttachments:!1,createDepthAttachments:!1,depthStencil:!0}),this._clearGlobeColorCommand=void 0,this._copyColorCommand=void 0,this._copyDepthCommand=void 0,this._tempCopyDepthCommand=void 0,this._updateDepthCommand=void 0,this._viewport=new Au,this._rs=void 0,this._rsBlend=void 0,this._rsUpdate=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0,this._clearGlobeDepth=void 0}function iQe(e){e._pickColorFramebuffer.destroy(),e._outputFramebuffer.destroy(),e._copyDepthFramebuffer.destroy(),e._tempCopyDepthFramebuffer.destroy(),e._updateDepthFramebuffer.destroy()}function oQe(e,t,n,i,o){e._viewport.width=n,e._viewport.height=i;const a=!Au.equals(e._viewport,o.viewport);let s=a!==e._useScissorTest;e._useScissorTest=a,Au.equals(e._scissorRectangle,o.viewport)||(e._scissorRectangle=Au.clone(o.viewport,e._scissorRectangle),s=!0),Object(r["a"])(e._rs)&&Au.equals(e._viewport,e._rs.viewport)&&!s||(e._rs=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}}),e._rsBlend=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:UN.ALPHA_BLEND}),e._rsUpdate=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:oW.EQUAL,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},backFunction:oW.NEVER,reference:cW.CESIUM_3D_TILE_MASK,mask:cW.CESIUM_3D_TILE_MASK}})),Object(r["a"])(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand(tQe,{uniformMap:{u_depthTexture:function(){return e.colorFramebufferManager.getDepthStencilTexture()}},owner:e})),e._copyDepthCommand.framebuffer=e._copyDepthFramebuffer.framebuffer,e._copyDepthCommand.renderState=e._rs,Object(r["a"])(e._copyColorCommand)||(e._copyColorCommand=t.createViewportQuadCommand(eQe,{uniformMap:{colorTexture:function(){return e.colorFramebufferManager.getColorTexture()}},owner:e})),e._copyColorCommand.renderState=e._rs,Object(r["a"])(e._tempCopyDepthCommand)||(e._tempCopyDepthCommand=t.createViewportQuadCommand(tQe,{uniformMap:{u_depthTexture:function(){return e._tempCopyDepthTexture}},owner:e})),e._tempCopyDepthCommand.framebuffer=e._tempCopyDepthFramebuffer.framebuffer,e._tempCopyDepthCommand.renderState=e._rs,Object(r["a"])(e._updateDepthCommand)||(e._updateDepthCommand=t.createViewportQuadCommand(eQe,{uniformMap:{colorTexture:function(){return e._tempCopyDepthFramebuffer.getColorTexture()}},owner:e})),e._updateDepthCommand.framebuffer=e._updateDepthFramebuffer.framebuffer,e._updateDepthCommand.renderState=e._rsUpdate,Object(r["a"])(e._clearGlobeColorCommand)||(e._clearGlobeColorCommand=new xX({color:new Dm(0,0,0,0),stencil:0,owner:e})),e._clearGlobeColorCommand.framebuffer=e.framebuffer}Object.defineProperties(nQe.prototype,{colorFramebufferManager:{get:function(){return this._picking?this._pickColorFramebuffer:this._outputFramebuffer}},framebuffer:{get:function(){return this.colorFramebufferManager.framebuffer}},depthStencilTexture:{get:function(){return this.colorFramebufferManager.getDepthStencilTexture()}},picking:{get:function(){return this._picking},set:function(e){this._picking=e}}}),nQe.prototype.update=function(e,t,n,i,o,r){const a=n.width,s=n.height,c=o?e.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT:hx.UNSIGNED_BYTE;this._numSamples=i,this.picking?this._pickColorFramebuffer.update(e,a,s):this._outputFramebuffer.update(e,a,s,i,c),this._copyDepthFramebuffer.update(e,a,s),oQe(this,e,a,s,t),e.uniformState.globeDepthTexture=void 0,this._useHdr=o,this._clearGlobeDepth=r},nQe.prototype.prepareColorTextures=function(e,t){!this.picking&&this._numSamples>1&&this._outputFramebuffer.prepareTextures(e,t)},nQe.prototype.executeCopyDepth=function(e,t){Object(r["a"])(this._copyDepthCommand)&&(this.prepareColorTextures(e),this._copyDepthCommand.execute(e,t),e.uniformState.globeDepthTexture=this._copyDepthFramebuffer.getColorTexture())},nQe.prototype.executeUpdateDepth=function(e,t,n,i){const o=Object(r["a"])(i)?i:t.framebuffer.depthStencilTexture;if(n||o!==this.colorFramebufferManager.getDepthStencilTexture()){if(Object(r["a"])(this._updateDepthCommand)){if(!Object(r["a"])(this._updateDepthFramebuffer.framebuffer)||this._updateDepthFramebuffer.getDepthStencilTexture()!==o||this._updateDepthFramebuffer.getColorTexture()!==this._copyDepthFramebuffer.getColorTexture()){const n=this._copyDepthFramebuffer.getColorTexture().width,i=this._copyDepthFramebuffer.getColorTexture().height;this._tempCopyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.update(e,n,i);const r=this._copyDepthFramebuffer.getColorTexture();this._updateDepthFramebuffer.setColorTexture(r,0),this._updateDepthFramebuffer.setDepthStencilTexture(o),this._updateDepthFramebuffer.update(e,n,i),oQe(this,e,n,i,t)}this._tempCopyDepthTexture=o,this._tempCopyDepthCommand.execute(e,t),this._updateDepthCommand.execute(e,t)}}else Object(r["a"])(this._copyDepthCommand)&&this._copyDepthCommand.execute(e,t)},nQe.prototype.executeCopyColor=function(e,t){Object(r["a"])(this._copyColorCommand)&&this._copyColorCommand.execute(e,t)},nQe.prototype.clear=function(e,t,n){const i=this._clearGlobeColorCommand;Object(r["a"])(i)&&(Dm.clone(n,i.color),this.colorFramebufferManager.clear(e,i,t))},nQe.prototype.isDestroyed=function(){return!1},nQe.prototype.destroy=function(){return iQe(this),Object(r["a"])(this._copyColorCommand)&&(this._copyColorCommand.shaderProgram=this._copyColorCommand.shaderProgram.destroy()),Object(r["a"])(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=this._copyDepthCommand.shaderProgram.destroy()),Object(r["a"])(this._tempCopyDepthCommand)&&(this._tempCopyDepthCommand.shaderProgram=this._tempCopyDepthCommand.shaderProgram.destroy()),Object(r["a"])(this._updateDepthCommand)&&(this._updateDepthCommand.shaderProgram=this._updateDepthCommand.shaderProgram.destroy()),Wc(this)};var rQe=nQe;function aQe(){this._framebuffer=new N8({depthStencil:!0,supportsDepthTexture:!0}),this._packedDepthFramebuffer=new N8,this._renderState=void 0,this._packedDepthCommand=void 0,this._clearCommand=void 0,this._viewport=new Au,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0}function sQe(e){e._framebuffer.destroy(),e._packedDepthFramebuffer.destroy()}function cQe(e,t,n,i,o){const r=o?t.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT:hx.UNSIGNED_BYTE;e._framebuffer.update(t,n,i,1,r),e._packedDepthFramebuffer.update(t,n,i)}function lQe(e,t,n,i,o){e._viewport.width=n,e._viewport.height=i;const a=!Au.equals(e._viewport,o.viewport);let s=a!==e._useScissorTest;e._useScissorTest=a,Au.equals(e._scissorRectangle,o.viewport)||(e._scissorRectangle=Au.clone(o.viewport,e._scissorRectangle),s=!0),Object(r["a"])(e._renderState)&&Au.equals(e._viewport,e._renderState.viewport)&&!s||(e._renderState=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),Object(r["a"])(e._packedDepthCommand)||(e._packedDepthCommand=t.createViewportQuadCommand(tQe,{uniformMap:{u_depthTexture:function(){return e.depthStencilTexture}},owner:e})),Object(r["a"])(e._clearCommand)||(e._clearCommand=new xX({color:new Dm(0,0,0,0),depth:1,stencil:0,owner:e})),e._packedDepthCommand.framebuffer=e._packedDepthFramebuffer.framebuffer,e._packedDepthCommand.renderState=e._renderState,e._clearCommand.framebuffer=e.classificationFramebuffer,e._clearCommand.renderState=e._renderState}Object.defineProperties(aQe.prototype,{classificationTexture:{get:function(){return this._framebuffer.getColorTexture()}},classificationFramebuffer:{get:function(){return this._framebuffer.framebuffer}},packedDepthFramebuffer:{get:function(){return this._packedDepthFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._framebuffer.getDepthStencilTexture()}},depthStencilRenderbuffer:{get:function(){return this._framebuffer.getDepthStencilRenderbuffer()}},packedDepthTexture:{get:function(){return this._packedDepthFramebuffer.getColorTexture()}}}),aQe.prototype.updateAndClear=function(e,t,n,i){const o=t.width,r=t.height;cQe(this,n,o,r,e),lQe(this,n,o,r,i),this._useHdr=e},aQe.prototype.clearClassification=function(e,t){this._clearCommand.execute(e,t)},aQe.prototype.packDepth=function(e,t){return this._packedDepthCommand.execute(e,t),this.packedDepthTexture},aQe.prototype.isDestroyed=function(){return!1},aQe.prototype.destroy=function(){return sQe(this),Wc(this)};var uQe=aQe;const hQe={OPAQUE_FRONT_FACE:0,OPAQUE_BACK_FACE:1,DEPTH_ONLY_FRONT_FACE:2,DEPTH_ONLY_BACK_FACE:3,DEPTH_ONLY_FRONT_AND_BACK_FACE:4,TRANSLUCENT_FRONT_FACE:5,TRANSLUCENT_BACK_FACE:6,TRANSLUCENT_FRONT_FACE_MANUAL_DEPTH_TEST:7,TRANSLUCENT_BACK_FACE_MANUAL_DEPTH_TEST:8,PICK_FRONT_FACE:9,PICK_BACK_FACE:10,DERIVED_COMMANDS_MAXIMUM_LENGTH:11},dQe=hQe.DERIVED_COMMANDS_MAXIMUM_LENGTH,fQe=["opaqueFrontFaceCommand","opaqueBackFaceCommand","depthOnlyFrontFaceCommand","depthOnlyBackFaceCommand","depthOnlyFrontAndBackFaceCommand","translucentFrontFaceCommand","translucentBackFaceCommand","translucentFrontFaceManualDepthTestCommand","translucentBackFaceManualDepthTestCommand","pickFrontFaceCommand","pickBackFaceCommand"];function pQe(){this._frontFaceAlphaByDistance=new xE(0,1,0,1),this._backFaceAlphaByDistance=new xE(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=Fe.clone(Fe.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(dQe),this._derivedBlendCommandTypes=new Array(dQe),this._derivedPickCommandTypes=new Array(dQe),this._derivedCommandTypesToUpdate=new Array(dQe),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}function mQe(e,t,n,i){return e?Object(r["a"])(n)?(xE.clone(n,i),i.nearValue*=t,i.farValue*=t,i):(i.nearValue=t,i.farValue=t,i):(i.nearValue=1,i.farValue=1,i)}function _Qe(e,t,n){return e&&(n.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function gQe(e,t){const n=e._frontFaceTranslucent,i=e._backFaceTranslucent;return n&&(t.cameraUnderground||i)}function bQe(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}function yQe(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}function vQe(e,t,n){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!n.depthTestAgainstTerrain&&t.mode!==SH.SCENE2D&&t.context.depthTexture}function OQe(e){let t=0;return e._frontFaceTranslucent&&++t,e._requiresManualDepthTest&&++t,t}function AQe(e,t){let n;e._derivedCommandsLength=wQe(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=wQe(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=wQe(e,t,!1,!0,e._derivedPickCommandTypes);let i=0;for(n=0;n<e._derivedCommandsLength;++n)i|=1<<e._derivedCommandTypes[n];for(n=0;n<e._derivedBlendCommandsLength;++n)i|=1<<e._derivedBlendCommandTypes[n];for(n=0;n<e._derivedPickCommandsLength;++n)i|=1<<e._derivedPickCommandTypes[n];let o=0;for(n=0;n<dQe;++n)(i&1<<n)>0&&(e._derivedCommandTypesToUpdate[o++]=n);e._derivedCommandsToUpdateLength=o;const a=i!==e._derivedCommandKey;e._derivedCommandKey=i,e._derivedCommandsDirty=a,!Object(r["a"])(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=XQe())}function wQe(e,t,n,i,o){let r=0;const a=e._frontFaceTranslucent,s=e._backFaceTranslucent;if(!a)return r;const c=t.cameraUnderground,l=e._requiresManualDepthTest,u=i?hQe.PICK_FRONT_FACE:l?hQe.TRANSLUCENT_FRONT_FACE_MANUAL_DEPTH_TEST:hQe.TRANSLUCENT_FRONT_FACE,h=i?hQe.PICK_BACK_FACE:l?hQe.TRANSLUCENT_BACK_FACE_MANUAL_DEPTH_TEST:hQe.TRANSLUCENT_BACK_FACE;return t.mode===SH.SCENE2D?(o[r++]=hQe.DEPTH_ONLY_FRONT_FACE,o[r++]=u,r):(s?(n||(o[r++]=hQe.DEPTH_ONLY_FRONT_AND_BACK_FACE),c?(o[r++]=u,o[r++]=h):(o[r++]=h,o[r++]=u)):c?(n||(o[r++]=hQe.DEPTH_ONLY_BACK_FACE),o[r++]=hQe.OPAQUE_FRONT_FACE,o[r++]=h):(n||(o[r++]=hQe.DEPTH_ONLY_FRONT_FACE),o[r++]=hQe.OPAQUE_BACK_FACE,o[r++]=u),r)}function TQe(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function CQe(e,t){return e.indexOf(t)>-1}function EQe(e,t){TQe(e.defines,"TRANSLUCENT"),TQe(t.defines,"TRANSLUCENT")}function xQe(e,t){TQe(e.defines,"GROUND_ATMOSPHERE"),TQe(t.defines,"GROUND_ATMOSPHERE"),TQe(e.defines,"FOG"),TQe(t.defines,"FOG"),TQe(e.defines,"TRANSLUCENT"),TQe(t.defines,"TRANSLUCENT")}function SQe(e,t){if(CQe(t.defines,"TILE_LIMIT_RECTANGLE")||CQe(t.defines,"ENABLE_CLIPPING_PLANES"))return;const n="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n";t.sources=[n]}function IQe(e,t){const n=t.sources,i=n.length;for(let r=0;r<i;++r)n[r]=EV.replaceMain(n[r],"czm_globe_translucency_main");const o="\n\nuniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n#ifdef MANUAL_DEPTH_TEST \n    float logDepthOrDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, st)); \n    if (logDepthOrDepth != 0.0) \n    { \n        vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); \n        float depthEC = eyeCoordinate.z / eyeCoordinate.w; \n        if (v_positionEC.z < depthEC) \n        { \n            discard; \n        } \n    } \n#endif \n    czm_globe_translucency_main(); \n    vec4 classificationColor = texture2D(u_classificationTexture, st); \n    if (classificationColor.a > 0.0) \n    { \n        // Reverse premultiplication process to get the correct composited result of the classification primitives \n        classificationColor.rgb /= classificationColor.a; \n    } \n    gl_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + gl_FragColor * (1.0 - classificationColor.a); \n} \n";n.push(o)}function DQe(e,t){IQe(e,t),TQe(e.defines,"GROUND_ATMOSPHERE"),TQe(t.defines,"GROUND_ATMOSPHERE"),TQe(e.defines,"FOG"),TQe(t.defines,"FOG")}function PQe(e,t){IQe(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function jQe(e,t){DQe(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function RQe(e,t){const n="uniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n    vec4 pickColor = texture2D(u_classificationTexture, st); \n    if (pickColor == vec4(0.0)) \n    { \n        discard; \n    } \n    gl_FragColor = pickColor; \n} \n";t.sources=[n]}function LQe(e,t,n,i,o,a){if(!Object(r["a"])(o))return t;if(!i&&Object(r["a"])(n))return n;let s=e.shaderCache.getDerivedShaderProgram(t,a);if(!Object(r["a"])(s)){const n=t._attributeLocations,i=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();i.defines=Object(r["a"])(i.defines)?i.defines.slice(0):[],c.defines=Object(r["a"])(c.defines)?c.defines.slice(0):[],o(i,c),s=e.shaderCache.createDerivedShaderProgram(t,a,{vertexShaderSource:i,fragmentShaderSource:c,attributeLocations:n})}return s}function MQe(e){e.cull.face=HN.BACK,e.cull.enabled=!0}function NQe(e){e.cull.face=HN.FRONT,e.cull.enabled=!0}function BQe(e){e.cull.face=HN.BACK,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function FQe(e){e.cull.face=HN.FRONT,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function zQe(e){e.cull.enabled=!1,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function kQe(e){e.cull.face=HN.BACK,e.cull.enabled=!0,e.depthMask=!1,e.blending=UN.ALPHA_BLEND}function UQe(e){e.cull.face=HN.FRONT,e.cull.enabled=!0,e.depthMask=!1,e.blending=UN.ALPHA_BLEND}function VQe(e){e.cull.face=HN.BACK,e.cull.enabled=!0,e.blending.enabled=!1}function HQe(e){e.cull.face=HN.FRONT,e.cull.enabled=!0,e.blending.enabled=!1}function GQe(e,t,n,i,o){if(!Object(r["a"])(i))return e;if(!n&&Object(r["a"])(t))return t;let a=o[e.id];if(!Object(r["a"])(a)){const t=UF.getState(e);i(t),a=UF.fromCache(t),o[e.id]=a}return a}function WQe(e){return{u_classificationTexture:function(){return e._globeTranslucencyFramebuffer.classificationTexture}}}function qQe(e,t,n,i,o){return Object(r["a"])(o)?!i&&Object(r["a"])(n)?n:Object(qE["a"])(t,o(e),!1):t}function YQe(e){this.pass=e.pass,this.pickOnly=e.pickOnly,this.getShaderProgramFunction=e.getShaderProgramFunction,this.getRenderStateFunction=e.getRenderStateFunction,this.getUniformMapFunction=e.getUniformMapFunction,this.renderStateCache={}}function XQe(){return[new YQe({pass:hF.GLOBE,pickOnly:!1,getShaderProgramFunction:EQe,getRenderStateFunction:MQe,getUniformMapFunction:void 0}),new YQe({pass:hF.GLOBE,pickOnly:!1,getShaderProgramFunction:xQe,getRenderStateFunction:NQe,getUniformMapFunction:void 0}),new YQe({pass:hF.GLOBE,pickOnly:!1,getShaderProgramFunction:SQe,getRenderStateFunction:BQe,getUniformMapFunction:void 0}),new YQe({pass:hF.GLOBE,pickOnly:!1,getShaderProgramFunction:SQe,getRenderStateFunction:FQe,getUniformMapFunction:void 0}),new YQe({pass:hF.GLOBE,pickOnly:!1,getShaderProgramFunction:SQe,getRenderStateFunction:zQe,getUniformMapFunction:void 0}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:IQe,getRenderStateFunction:kQe,getUniformMapFunction:WQe}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:DQe,getRenderStateFunction:UQe,getUniformMapFunction:WQe}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:PQe,getRenderStateFunction:kQe,getUniformMapFunction:WQe}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:jQe,getRenderStateFunction:UQe,getUniformMapFunction:WQe}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:RQe,getRenderStateFunction:VQe,getUniformMapFunction:WQe}),new YQe({pass:hF.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:RQe,getRenderStateFunction:HQe,getUniformMapFunction:WQe})]}Object.defineProperties(pQe.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}}),pQe.prototype.update=function(e){const t=e.globe;if(!Object(r["a"])(t)||!t.show)return this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,void(this._useDepthPlane=!1);this._frontFaceAlphaByDistance=mQe(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=mQe(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=_Qe(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=_Qe(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=vQe(this,e,t),this._sunVisibleThroughGlobe=gQe(this,e),this._environmentVisible=bQe(this,e),this._useDepthPlane=yQe(this,e),this._numberOfTextureUniforms=OQe(this),this._rectangle=Fe.clone(t.translucency.rectangle,this._rectangle),AQe(this,e)};const KQe=new Array(dQe),$Qe=new Array(dQe);function JQe(e,t,n,i,a,s,c){let l=t.derivedCommands.globeTranslucency;const u=e._derivedCommandsDirty;if(t.dirty||!Object(r["a"])(l)||u){t.dirty=!1,Object(r["a"])(l)||(l={},t.derivedCommands.globeTranslucency=l);const u=c.frameNumber,h=Object(o["a"])(l.uniformMapDirtyFrame,0),d=Object(o["a"])(l.shaderProgramDirtyFrame,0),f=Object(o["a"])(l.renderStateDirtyFrame,0),p=l.uniformMap!==t.uniformMap,m=l.shaderProgramId!==t.shaderProgram.id,_=l.renderStateId!==t.renderState.id;p&&(l.uniformMapDirtyFrame=u),m&&(l.shaderProgramDirtyFrame=u),_&&(l.renderStateDirtyFrame=u),l.uniformMap=t.uniformMap,l.shaderProgramId=t.shaderProgram.id,l.renderStateId=t.renderState.id;for(let g=0;g<n;++g){const n=s[g],b=i[g],y=a[g];let v,O,A,w=l[y];Object(r["a"])(w)?(v=w.uniformMap,O=w.shaderProgram,A=w.renderState):(v=void 0,O=void 0,A=void 0),w=lF.shallowClone(t,w),l[y]=w;const T=Object(o["a"])(w.derivedCommands.uniformMapDirtyFrame,0),C=Object(o["a"])(w.derivedCommands.shaderProgramDirtyFrame,0),E=Object(o["a"])(w.derivedCommands.renderStateDirtyFrame,0),x=p||T<h,S=m||C<d,I=_||E<f;x&&(w.derivedCommands.uniformMapDirtyFrame=u),S&&(w.derivedCommands.shaderProgramDirtyFrame=u),I&&(w.derivedCommands.renderStateDirtyFrame=u),w.derivedCommands.type=b,w.pass=n.pass,w.pickOnly=n.pickOnly,w.uniformMap=qQe(e,t.uniformMap,v,x,n.getUniformMapFunction),w.shaderProgram=LQe(c.context,t.shaderProgram,O,S,n.getShaderProgramFunction,y),w.renderState=GQe(t.renderState,A,I,n.getRenderStateFunction,n.renderStateCache)}}}function QQe(e,t,n,i,o,a,s){for(let c=0;c<t;++c){const t=e[c],l=t.derivedCommands.type;(!Object(r["a"])(s)||s.indexOf(l)>-1)&&n(t,i,o,a)}}function ZQe(e,t,n,i,o,r){for(let a=0;a<t;++a)n(e[a],i,o,r)}pQe.prototype.updateDerivedCommands=function(e,t){const n=this._derivedCommandTypesToUpdate,i=this._derivedCommandsToUpdateLength;if(0!==i){for(let e=0;e<i;++e)$Qe[e]=this._derivedCommandPacks[n[e]],KQe[e]=fQe[n[e]];JQe(this,e,i,n,KQe,$Qe,t)}},pQe.prototype.pushDerivedCommands=function(e,t,n){const i=n.passes.pick;if(i&&t)return;let o=this._derivedCommandTypes,r=this._derivedCommandsLength;if(i?(o=this._derivedPickCommandTypes,r=this._derivedPickCommandsLength):t&&(o=this._derivedBlendCommandTypes,r=this._derivedBlendCommandsLength),0===r)return void n.commandList.push(e);const a=e.derivedCommands.globeTranslucency;for(let s=0;s<r;++s){const e=fQe[o[s]];n.commandList.push(a[e])}};const eZe=[hQe.OPAQUE_FRONT_FACE,hQe.OPAQUE_BACK_FACE],tZe=[hQe.DEPTH_ONLY_FRONT_FACE,hQe.DEPTH_ONLY_BACK_FACE,hQe.DEPTH_ONLY_FRONT_AND_BACK_FACE];pQe.prototype.executeGlobeCommands=function(e,t,n,i,o){const r=i.context,a=e.commands[hF.GLOBE],s=e.indices[hF.GLOBE];0!==s&&(this._globeTranslucencyFramebuffer=n,n.clearClassification(r,o),QQe(a,s,t,i,r,o,eZe))},pQe.prototype.executeGlobeClassificationCommands=function(e,t,n,i,o){const r=i.context,a=e.commands[hF.GLOBE],s=e.indices[hF.GLOBE],c=e.commands[hF.TERRAIN_CLASSIFICATION],l=e.indices[hF.TERRAIN_CLASSIFICATION];if(0===s||0===l)return;const u=this._frontFaceTranslucent,h=this._backFaceTranslucent;if(u&&h||ZQe(c,l,t,i,r,o),!u&&!h)return;this._globeTranslucencyFramebuffer=n;const d=r.uniformState.globeDepthTexture,f=o.framebuffer;if(o.framebuffer=n.classificationFramebuffer,QQe(a,s,t,i,r,o,tZe),r.depthTexture){const e=n.packDepth(r,o);r.uniformState.globeDepthTexture=e}ZQe(c,l,t,i,r,o),r.uniformState.globeDepthTexture=d,o.framebuffer=f};var nZe=pQe;function iZe(){this._image=new Image}function oZe(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url)&&!Object(r["a"])(e.metadata))throw new a["a"]("options.url or options.metadata is required.");let t;if(this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,Object(r["a"])(e.metadata))t=e.metadata;else{const n=Et["a"].createIfNeeded(e.url);t=new GA(n)}this._metadata=t,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=new qt({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new Fe(-s["a"].PI,-s["a"].PI,s["a"].PI,s["a"].PI),ellipsoid:e.ellipsoid});let n=e.credit;"string"===typeof n&&(n=new hn(n)),this._credit=n,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=23,Object(r["a"])(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new iZe),this._errorEvent=new dn["a"],this._ready=!1;const i=this;let c;this._readyPromise=t.readyPromise.then((function(e){if(!t.imageryPresent){const e=new ye["a"](`The server ${t.url} doesn't have imagery`);return c=Zl.reportError(c,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}return Zl.reportSuccess(c),i._ready=e,e})).catch((function(e){return c=Zl.reportError(c,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}))}function rZe(e,t,n,i,o,a){const s=GA.tileXYToQuadKey(n,i,o);let c=t.imageryVersion;return c=Object(r["a"])(c)&&c>0?c:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1-0${s}-i.${c.toString()}`,request:a})}function aZe(e){const t="JFIF";if(e[6]===t.charCodeAt(0)&&e[7]===t.charCodeAt(1)&&e[8]===t.charCodeAt(2)&&e[9]===t.charCodeAt(3))return"image/jpeg";const n="PNG";return e[1]===n.charCodeAt(0)&&e[2]===n.charCodeAt(1)&&e[3]===n.charCodeAt(2)?"image/png":void 0}function sZe(e){const t=TA["Reader"].create(e),n=t.len,i={};while(t.pos<n){const e=t.uint32();let n;switch(e>>>3){case 1:i.imageType=t.uint32();break;case 2:i.imageData=t.bytes();break;case 3:i.alphaType=t.uint32();break;case 4:i.imageAlpha=t.bytes();break;case 5:if(n=i.copyrightIds,Object(r["a"])(n)||(n=i.copyrightIds=[]),2===(7&e)){const e=t.uint32()+t.pos;while(t.pos<e)n.push(t.uint32())}else n.push(t.uint32());break;default:t.skipType(7&e);break}}const o=i.imageType;if(Object(r["a"])(o))switch(o){case 0:i.imageType="image/jpeg";break;case 4:i.imageType="image/png";break;default:throw new ye["a"]("GoogleEarthEnterpriseImageryProvider: Unsupported image type.")}const a=i.alphaType;return Object(r["a"])(a)&&0!==a&&(console.log("GoogleEarthEnterpriseImageryProvider: External alpha not supported."),delete i.alphaType,delete i.imageAlpha),i}iZe.prototype.isReady=function(){return!0},iZe.prototype.shouldDiscardImage=function(e){return e===this._image},Object.defineProperties(oZe.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new a["a"]("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}}),oZe.prototype.getTileCredits=function(e,t,n){if(!this._ready)throw new a["a"]("getTileCredits must not be called before the imagery provider is ready.");const i=this._metadata,o=i.getTileInformation(e,t,n);if(Object(r["a"])(o)){const e=i.providers[o.imageryProvider];if(Object(r["a"])(e))return[e]}},oZe.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");const o=this._tileDiscardPolicy._image,s=this._metadata,c=GA.tileXYToQuadKey(e,t,n),l=s.getTileInformation(e,t,n);if(!Object(r["a"])(l)){if(s.isValid(c)){const o=new Sl["a"]({throttle:i.throttle,throttleByServer:i.throttleByServer,type:i.type,priorityFunction:i.priorityFunction});return void s.populateSubtree(e,t,n,o)}return Promise.resolve(o)}if(!l.hasImagery())return Promise.resolve(o);const u=rZe(this,l,e,t,n,i).fetchArrayBuffer();return Object(r["a"])(u)?u.then((function(e){UL(s.key,e);let t,n=new Uint8Array(e);const i=s.protoImagery;if(Object(r["a"])(i)&&i||(t=aZe(n)),!Object(r["a"])(t)&&(!Object(r["a"])(i)||i)){const e=sZe(n);t=e.imageType,n=e.imageData}return Object(r["a"])(t)&&Object(r["a"])(n)?oM({uint8Array:n,format:t,flipY:!0}):o})):void 0},oZe.prototype.pickFeatures=function(e,t,n,i,o){};var cZe=oZe;function lZe(e){if(e=Object(o["a"])(e,{}),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");if(!Object(r["a"])(e.channel))throw new a["a"]("options.channel is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1.9,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=e.url,n=Object(o["a"])(e.path,"/default_map"),i=Et["a"].createIfNeeded(t).getDerivedResource({url:"/"===n[0]?n.substring(1):n});i.appendForwardSlash(),this._resource=i,this._url=t,this._path=n,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new hn(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${lZe.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new dn["a"],this._ready=!1;const s=i.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),c=this;let l;function u(t){let n,i,o;try{n=JSON.parse(t)}catch(a){n=JSON.parse(t.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(let e=0;e<n.layers.length;e++)if(n.layers[e].id===c._channel){i=n.layers[e];break}if(!Object(r["a"])(i))return o=`Could not find layer with channel (id) of ${c._channel}.`,l=Zl.reportError(l,c,c._errorEvent,o),l.retry?d():Promise.reject(new ye["a"](o));if(!Object(r["a"])(i.version))return o=`Could not find a version in channel (id) ${c._channel}.`,l=Zl.reportError(l,c,c._errorEvent,o),l.retry?d():Promise.reject(new ye["a"](o));if(c._version=i.version,Object(r["a"])(n.projection)&&"flat"===n.projection)c._tilingScheme=new qt({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new Fe(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:e.ellipsoid});else{if(Object(r["a"])(n.projection)&&"mercator"!==n.projection)return o=`Unsupported projection ${n.projection}.`,l=Zl.reportError(l,c,c._errorEvent,o),l.retry?d():Promise.reject(new ye["a"](o));c._tilingScheme=new tu({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid})}return c._ready=!0,Zl.reportSuccess(l),Promise.resolve(!0)}function h(e){const t=Object(o["a"])(e.message,`An error occurred while accessing ${s.url}.`);return l=Zl.reportError(l,c,c._errorEvent,t),Promise.reject(new ye["a"](t))}function d(){return s.fetchText().then(u).catch(h)}this._readyPromise=d()}Object.defineProperties(lZe.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},version:{get:function(){if(!this._ready)throw new a["a"]("version must not be called before the imagery provider is ready.");return this._version}},requestType:{get:function(){if(!this._ready)throw new a["a"]("requestType must not be called before the imagery provider is ready.");return this._requestType}},rectangle:{get:function(){if(!this._ready)throw new a["a"]("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),lZe.prototype.getTileCredits=function(e,t,n){},lZe.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");const o=this._resource.getDerivedResource({url:"query",request:i,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:n+1}});return sUe.loadImage(this,o)},lZe.prototype.pickFeatures=function(e,t,n,i,o){},lZe._logoUrl=void 0,Object.defineProperties(lZe,{logoUrl:{get:function(){return Object(r["a"])(lZe._logoUrl)||(lZe._logoUrl=Bt("Assets/Images/google_earth_credit.png")),lZe._logoUrl},set:function(e){i["a"].defined("value",e),lZe._logoUrl=e}}});var uZe=lZe;const hZe=new Dm(1,1,1,.4),dZe=new Dm(0,1,0,.05),fZe=new Dm(0,.5,0,.2);function pZe(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._tilingScheme=Object(r["a"])(e.tilingScheme)?e.tilingScheme:new qt({ellipsoid:e.ellipsoid}),this._cells=Object(o["a"])(e.cells,8),this._color=Object(o["a"])(e.color,hZe),this._glowColor=Object(o["a"])(e.glowColor,dZe),this._glowWidth=Object(o["a"])(e.glowWidth,6),this._backgroundColor=Object(o["a"])(e.backgroundColor,fZe),this._errorEvent=new dn["a"],this._tileWidth=Object(o["a"])(e.tileWidth,256),this._tileHeight=Object(o["a"])(e.tileHeight,256),this._canvasSize=Object(o["a"])(e.canvasSize,256),this._canvas=this._createGridCanvas(),this._readyPromise=Promise.resolve(!0)}Object.defineProperties(pZe.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),pZe.prototype._drawGrid=function(e){const t=0,n=this._canvasSize;for(let i=0;i<=this._cells;++i){const o=i/this._cells,r=1+o*(n-1);e.moveTo(r,t),e.lineTo(r,n),e.moveTo(t,r),e.lineTo(n,r)}e.stroke()},pZe.prototype._createGridCanvas=function(){const e=document.createElement("canvas");e.width=this._canvasSize,e.height=this._canvasSize;const t=0,n=this._canvasSize,i=e.getContext("2d"),o=this._backgroundColor.toCssColorString();i.fillStyle=o,i.fillRect(t,t,n,n);const r=this._glowColor.toCssColorString();i.strokeStyle=r,i.lineWidth=this._glowWidth,i.strokeRect(t,t,n,n),this._drawGrid(i),i.lineWidth=.5*this._glowWidth,i.strokeRect(t,t,n,n),this._drawGrid(i);const a=this._color.toCssColorString();return i.strokeStyle=a,i.lineWidth=2,i.strokeRect(t,t,n,n),i.lineWidth=1,this._drawGrid(i),e},pZe.prototype.getTileCredits=function(e,t,n){},pZe.prototype.requestImage=function(e,t,n,i){return Promise.resolve(this._canvas)},pZe.prototype.pickFeatures=function(e,t,n,i,o){};var mZe=pZe;function _Ze(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new N8({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new N8({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new xX({color:new Dm(0,0,0,0),owner:this}),this._clearCommand=new xX({color:new Dm(0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(_Ze.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),_Ze.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const gZe={depthMask:!1,stencilTest:{enabled:!0,frontFunction:oW.EQUAL,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},backFunction:oW.NEVER,reference:0,mask:cW.CLASSIFICATION_MASK},blending:UN.ALPHA_BLEND},bZe={depthMask:!1,stencilTest:{enabled:!0,frontFunction:oW.NOT_EQUAL,frontOperation:{fail:aW.KEEP,zFail:aW.KEEP,zPass:aW.KEEP},backFunction:oW.NEVER,reference:0,mask:cW.CLASSIFICATION_MASK},blending:UN.ALPHA_BLEND},yZe={depthMask:!0,depthTest:{enabled:!0},stencilTest:cW.setCesium3DTileBit(),stencilMask:cW.CESIUM_3D_TILE_MASK,blending:UN.ALPHA_BLEND},vZe="#extension GL_EXT_frag_depth : enable\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    gl_FragColor = color * highlightColor;\n    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\n}\n",OZe="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    gl_FragColor = color * czm_invertClassificationColor;\n#else\n    gl_FragColor = color;\n#endif\n}\n";_Ze.prototype.update=function(e,t,n){const i=this._fbo.getColorTexture(),o=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const a=this._numSamples!==t,s=e.drawingBufferWidth,c=e.drawingBufferHeight,l=!Object(r["a"])(i)||i.width!==s||i.height!==c;if((l||o||a)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),Object(r["a"])(this._previousFramebuffer)||(this._depthStencilTexture=new lB({context:e,width:s,height:c,pixelFormat:fx.DEPTH_STENCIL,pixelDatatype:hx.UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new L8({context:e,width:s,height:c,format:j8.DEPTH24_STENCIL8,numSamples:t})))),!Object(r["a"])(this._fbo.framebuffer)||l||o||a){let i,o;this._fbo.destroy(),this._fboClassified.destroy(),Object(r["a"])(this._previousFramebuffer)?(i=n.getDepthStencilTexture(),o=n.getDepthStencilRenderbuffer()):(i=this._depthStencilTexture,o=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(i),Object(r["a"])(o)&&this._fbo.setDepthStencilRenderbuffer(o),this._fbo.update(e,s,c,t),Object(r["a"])(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(i),this._fboClassified.update(e,s,c))}if(Object(r["a"])(this._rsUnclassified)||(this._rsUnclassified=UF.fromCache(gZe),this._rsClassified=UF.fromCache(bZe),this._rsDefault=UF.fromCache(yZe)),!Object(r["a"])(this._unclassifiedCommand)||o||a){Object(r["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=Object(r["a"])(this._previousFramebuffer)?OZe:vZe,n=new EV({defines:["UNCLASSIFIED"],sources:[t]}),i=new EV({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(n,{renderState:Object(r["a"])(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(i,{renderState:Object(r["a"])(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),Object(r["a"])(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),Object(r["a"])(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(eQe,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},_Ze.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},_Ze.prototype.clear=function(e,t){Object(r["a"])(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},_Ze.prototype.executeClassified=function(e,t){if(!Object(r["a"])(this._previousFramebuffer)){const n=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=n}this._classifiedCommand.execute(e,t)},_Ze.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},_Ze.prototype.isDestroyed=function(){return!1},_Ze.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),Object(r["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),Wc(this)};var AZe=_Ze;const wZe=/{[^}]+}/g,TZe={x:BZe,y:zZe,z:VZe,s:HZe,reverseX:FZe,reverseY:kZe,reverseZ:UZe,westDegrees:WZe,southDegrees:qZe,eastDegrees:YZe,northDegrees:XZe,westProjected:$Ze,southProjected:JZe,eastProjected:QZe,northProjected:ZZe,width:e0e,height:t0e},CZe=Object(qE["a"])(TZe,{i:n0e,j:i0e,reverseI:o0e,reverseJ:r0e,longitudeDegrees:l0e,latitudeDegrees:u0e,longitudeProjected:h0e,latitudeProjected:d0e,format:m0e});function EZe(e){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.then)&&!Object(r["a"])(e.url))throw new a["a"]("options is required.");this._errorEvent=new dn["a"],this._resource=void 0,this._urlSchemeZeroPadding=void 0,this._pickFeaturesResource=void 0,this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._minimumLevel=void 0,this._tilingScheme=void 0,this._rectangle=void 0,this._tileDiscardPolicy=void 0,this._credit=void 0,this._hasAlphaChannel=void 0,this._readyPromise=void 0,this._tags=void 0,this._pickFeaturesTags=void 0,this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this.enablePickFeatures=!0,this.reinitialize(e)}Object.defineProperties(EZe.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){if(!this.ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this.ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this.ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this.ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}},tilingScheme:{get:function(){if(!this.ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this.ready)throw new a["a"]("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this.ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return Object(r["a"])(this._resource)}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){if(!this.ready)throw new a["a"]("credit must not be called before the imagery provider is ready.");return this._credit}},hasAlphaChannel:{get:function(){if(!this.ready)throw new a["a"]("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}}}),EZe.prototype.reinitialize=function(e){const t=this;t._readyPromise=Promise.resolve(e).then((function(e){if(!Object(r["a"])(e))throw new a["a"]("options is required.");if(!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");const n=e.customTags,i=Object(qE["a"])(TZe,n),s=Object(qE["a"])(CZe,n),c=Et["a"].createIfNeeded(e.url),l=Et["a"].createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=Object(o["a"])(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=Object(o["a"])(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Array.isArray(t._subdomains)?t._subdomains=t._subdomains.slice():Object(r["a"])(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=Object(o["a"])(e.tileWidth,256),t._tileHeight=Object(o["a"])(e.tileHeight,256),t._minimumLevel=Object(o["a"])(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=Object(o["a"])(e.tilingScheme,new tu({ellipsoid:e.ellipsoid})),t._rectangle=Object(o["a"])(e.rectangle,t._tilingScheme.rectangle),t._rectangle=Fe.intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=Object(o["a"])(e.hasAlphaChannel,!0);let u=e.credit;return"string"===typeof u&&(u=new hn(u)),t._credit=u,t._resource=c,t._tags=i,t._pickFeaturesResource=l,t._pickFeaturesTags=s,!0}))},EZe.prototype.getTileCredits=function(e,t,n){if(!this.ready)throw new a["a"]("getTileCredits must not be called before the imagery provider is ready.")},EZe.prototype.requestImage=function(e,t,n,i){if(!this.ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");return sUe.loadImage(this,PZe(this,e,t,n,i))},EZe.prototype.pickFeatures=function(e,t,n,i,o){if(!this.ready)throw new a["a"]("pickFeatures must not be called before the imagery provider is ready.");if(!this.enablePickFeatures||!Object(r["a"])(this._pickFeaturesResource)||0===this._getFeatureInfoFormats.length)return;let s=0;const c=this;function l(e,t){return e.callback(t)}function u(){if(s>=c._getFeatureInfoFormats.length)return Promise.resolve([]);const r=c._getFeatureInfoFormats[s],a=MZe(c,e,t,n,i,o,r.format);return++s,"json"===r.type?a.fetchJson().then(r.callback).catch(u):"xml"===r.type?a.fetchXML().then(r.callback).catch(u):"text"===r.type||"html"===r.type?a.fetchText().then(r.callback).catch(u):a.fetch({responseType:r.format}).then(l.bind(void 0,r)).catch(u)}return u()};let xZe=!1;const SZe=new Fe;let IZe=!1;const DZe=new Fe;function PZe(e,t,n,i,o){xZe=!1,IZe=!1;const a=e._resource,s=a.getUrlComponent(!0),c=e._tags,l={},u=s.match(wZe);return Object(r["a"])(u)&&u.forEach((function(o){const a=o.substring(1,o.length-1);Object(r["a"])(c[a])&&(l[a]=c[a](e,t,n,i))})),a.getDerivedResource({request:o,templateValues:l})}let jZe=!1;const RZe=new Gt;let LZe=!1;function MZe(e,t,n,i,o,a,s){xZe=!1,IZe=!1,jZe=!1,LZe=!1;const c=e._pickFeaturesResource,l=c.getUrlComponent(!0),u=e._pickFeaturesTags,h={},d=l.match(wZe);return Object(r["a"])(d)&&d.forEach((function(c){const l=c.substring(1,c.length-1);Object(r["a"])(u[l])&&(h[l]=u[l](e,t,n,i,o,a,s))})),c.getDerivedResource({templateValues:h})}function NZe(e,t,n){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){const i=e.urlSchemeZeroPadding[t];if("string"===typeof i){const e=i.length;e>1&&(n=n.length>=e?n:new Array(e-n.toString().length+1).join("0")+n)}}return n}function BZe(e,t,n,i){return NZe(e,"{x}",t)}function FZe(e,t,n,i){const o=e.tilingScheme.getNumberOfXTilesAtLevel(i)-t-1;return NZe(e,"{reverseX}",o)}function zZe(e,t,n,i){return NZe(e,"{y}",n)}function kZe(e,t,n,i){const o=e.tilingScheme.getNumberOfYTilesAtLevel(i)-n-1;return NZe(e,"{reverseY}",o)}function UZe(e,t,n,i){const o=e.maximumLevel,a=Object(r["a"])(o)&&i<o?o-i-1:i;return NZe(e,"{reverseZ}",a)}function VZe(e,t,n,i){return NZe(e,"{z}",i)}function HZe(e,t,n,i){const o=(t+n+i)%e._subdomains.length;return e._subdomains[o]}function GZe(e,t,n,i){xZe||(e.tilingScheme.tileXYToRectangle(t,n,i,SZe),SZe.west=s["a"].toDegrees(SZe.west),SZe.south=s["a"].toDegrees(SZe.south),SZe.east=s["a"].toDegrees(SZe.east),SZe.north=s["a"].toDegrees(SZe.north),xZe=!0)}function WZe(e,t,n,i){return GZe(e,t,n,i),SZe.west}function qZe(e,t,n,i){return GZe(e,t,n,i),SZe.south}function YZe(e,t,n,i){return GZe(e,t,n,i),SZe.east}function XZe(e,t,n,i){return GZe(e,t,n,i),SZe.north}function KZe(e,t,n,i){IZe||(e.tilingScheme.tileXYToNativeRectangle(t,n,i,DZe),IZe=!0)}function $Ze(e,t,n,i){return KZe(e,t,n,i),DZe.west}function JZe(e,t,n,i){return KZe(e,t,n,i),DZe.south}function QZe(e,t,n,i){return KZe(e,t,n,i),DZe.east}function ZZe(e,t,n,i){return KZe(e,t,n,i),DZe.north}function e0e(e,t,n,i){return e.tileWidth}function t0e(e,t,n,i){return e.tileHeight}function n0e(e,t,n,i,o,r,a){return c0e(e,t,n,i,o,r),RZe.x}function i0e(e,t,n,i,o,r,a){return c0e(e,t,n,i,o,r),RZe.y}function o0e(e,t,n,i,o,r,a){return c0e(e,t,n,i,o,r),e.tileWidth-RZe.x-1}function r0e(e,t,n,i,o,r,a){return c0e(e,t,n,i,o,r),e.tileHeight-RZe.y-1}const a0e=new Fe,s0e=new g;function c0e(e,t,n,i,o,r,a){if(jZe)return;p0e(e,t,n,i,o,r);const s=s0e,c=e.tilingScheme.tileXYToNativeRectangle(t,n,i,a0e);RZe.x=e.tileWidth*(s.x-c.west)/c.width|0,RZe.y=e.tileHeight*(c.north-s.y)/c.height|0,jZe=!0}function l0e(e,t,n,i,o,r,a){return s["a"].toDegrees(o)}function u0e(e,t,n,i,o,r,a){return s["a"].toDegrees(r)}function h0e(e,t,n,i,o,r,a){return p0e(e,t,n,i,o,r),s0e.x}function d0e(e,t,n,i,o,r,a){return p0e(e,t,n,i,o,r),s0e.y}const f0e=new I;function p0e(e,t,n,i,o,r,a){if(!LZe){if(e.tilingScheme.projection instanceof V)s0e.x=s["a"].toDegrees(o),s0e.y=s["a"].toDegrees(r);else{const t=f0e;t.longitude=o,t.latitude=r,e.tilingScheme.projection.project(t,s0e)}LZe=!0}}function m0e(e,t,n,i,o,r,a){return a}var _0e=EZe;function g0e(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");let t;this._tmsResource=void 0,this._xmlResource=void 0,this._options=e,this._metadataError=void 0,this._metadataSuccess=this._metadataSuccess.bind(this),this._metadataFailure=this._metadataFailure.bind(this),this._requestMetadata=this._requestMetadata.bind(this);const n=this,i=Promise.resolve(e.url).then((function(e){return t=Et["a"].createIfNeeded(e),t.appendForwardSlash(),n._tmsResource=t,n._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),n._requestMetadata()})).catch(e=>Promise.reject(e));_0e.call(this,i),this._promise=i}function b0e(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function y0e(e,t,n){const i=e.positionToTileXY(Fe.southwest(t),n),o=e.positionToTileXY(Fe.northeast(t),n),r=(Math.abs(o.x-i.x)+1)*(Math.abs(o.y-i.y)+1);return r>4?0:n}Object(r["a"])(Object.create)&&(g0e.prototype=Object.create(_0e.prototype),g0e.prototype.constructor=g0e),g0e.prototype._requestMetadata=function(){return this._xmlResource.fetchXML().then(this._metadataSuccess).catch(e=>e instanceof oD["a"]?this._metadataFailure():Promise.reject(e))},g0e.prototype._metadataSuccess=function(e){const t=/tileformat/i,n=/tileset/i,i=/tilesets/i,a=/boundingbox/i;let s,c,l;const u=[],h=this._xmlResource;let d=this._metadataError;const f=this._requestMetadata,p=e.childNodes[0].childNodes;for(let o=0;o<p.length;o++)if(t.test(p.item(o).nodeName))s=p.item(o);else if(i.test(p.item(o).nodeName)){l=p.item(o);const e=p.item(o).childNodes;for(let t=0;t<e.length;t++)n.test(e.item(t).nodeName)&&u.push(e.item(t))}else a.test(p.item(o).nodeName)&&(c=p.item(o));let m;if(!Object(r["a"])(l)||!Object(r["a"])(c))return m=`Unable to find expected tilesets or bbox attributes in ${h.url}.`,d=Zl.reportError(d,this,this.errorEvent,m),d.retry?(this._metadataError=d,f()):Promise.reject(new ye["a"](m));const _=this._options,g=Object(o["a"])(_.fileExtension,s.getAttribute("extension")),b=Object(o["a"])(_.tileWidth,parseInt(s.getAttribute("width"),10)),y=Object(o["a"])(_.tileHeight,parseInt(s.getAttribute("height"),10));let v=Object(o["a"])(_.minimumLevel,parseInt(u[0].getAttribute("order"),10));const O=Object(o["a"])(_.maximumLevel,parseInt(u[u.length-1].getAttribute("order"),10)),A=l.getAttribute("profile");let w=_.tilingScheme;if(!Object(r["a"])(w))if("geodetic"===A||"global-geodetic"===A)w=new qt({ellipsoid:_.ellipsoid});else{if("mercator"!==A&&"global-mercator"!==A)return m=`${h.url}specifies an unsupported profile attribute, ${A}.`,d=Zl.reportError(d,this,this.errorEvent,m),d.retry?(this._metadataError=d,f()):Promise.reject(new ye["a"](m));w=new tu({ellipsoid:_.ellipsoid})}let T=Fe.clone(_.rectangle);if(!Object(r["a"])(T)){let e,t,n,i;const r=Object(o["a"])(_.flipXY,!1);r?(n=new Gt(parseFloat(c.getAttribute("miny")),parseFloat(c.getAttribute("minx"))),i=new Gt(parseFloat(c.getAttribute("maxy")),parseFloat(c.getAttribute("maxx")))):(n=new Gt(parseFloat(c.getAttribute("minx")),parseFloat(c.getAttribute("miny"))),i=new Gt(parseFloat(c.getAttribute("maxx")),parseFloat(c.getAttribute("maxy"))));const a="geodetic"===A||"mercator"===A;if(w.projection instanceof V||a)e=I.fromDegrees(n.x,n.y),t=I.fromDegrees(i.x,i.y);else{const o=w.projection;e=o.unproject(n),t=o.unproject(i)}T=new Fe(e.longitude,e.latitude,t.longitude,t.latitude)}T=b0e(T,w),v=y0e(w,T,v);const C=this._tmsResource.getDerivedResource({url:`{z}/{x}/{reverseY}.${g}`});return Promise.resolve({url:C,tilingScheme:w,rectangle:T,tileWidth:b,tileHeight:y,minimumLevel:v,maximumLevel:O,tileDiscardPolicy:_.tileDiscardPolicy,credit:_.credit})},g0e.prototype._metadataFailure=function(){const e=this._options,t=Object(o["a"])(e.fileExtension,"png"),n=Object(o["a"])(e.tileWidth,256),i=Object(o["a"])(e.tileHeight,256),a=e.maximumLevel,s=Object(r["a"])(e.tilingScheme)?e.tilingScheme:new tu({ellipsoid:e.ellipsoid});let c=Object(o["a"])(e.rectangle,s.rectangle);c=b0e(c,s);const l=y0e(s,c,e.minimumLevel),u=this._tmsResource.getDerivedResource({url:`{z}/{x}/{reverseY}.${t}`});return Promise.resolve({url:u,tilingScheme:s,rectangle:c,tileWidth:n,tileHeight:i,minimumLevel:l,maximumLevel:a,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit})};var v0e=g0e;const O0e=/\/$/,A0e=new hn('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function w0e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.mapId;if(!Object(r["a"])(t))throw new a["a"]("options.mapId is required.");const n=e.accessToken;if(!Object(r["a"])(n))throw new a["a"]("options.accessToken is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const i=Et["a"].createIfNeeded(Object(o["a"])(e.url,"https://{s}.tiles.mapbox.com/v4/"));this._mapId=t,this._accessToken=n;let s=Object(o["a"])(e.format,"png");/\./.test(s)||(s=`.${s}`),this._format=s;let c,l=i.getUrlComponent();O0e.test(l)||(l+="/"),l+=`${t}/{z}/{x}/{y}${this._format}`,i.url=l,i.setQueryParameters({access_token:n}),Object(r["a"])(e.credit)?(c=e.credit,"string"===typeof c&&(c=new hn(c))):c=A0e,this._resource=i,this._imageryProvider=new _0e({url:i,credit:c,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(w0e.prototype,{url:{get:function(){return this._imageryProvider.url}},ready:{get:function(){return this._imageryProvider.ready}},readyPromise:{get:function(){return this._imageryProvider.readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}}),w0e.prototype.getTileCredits=function(e,t,n){},w0e.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},w0e.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},w0e._defaultCredit=A0e;var T0e=w0e;function C0e(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=Et["a"].createIfNeeded(e.url),n=Object(o["a"])(e.rectangle,Fe.MAX_VALUE),i=new qt({rectangle:n,numberOfLevelZeroTilesX:1,numberOfLevelZeroTilesY:1,ellipsoid:e.ellipsoid});this._tilingScheme=i,this._resource=t,this._image=void 0,this._texture=void 0,this._tileWidth=0,this._tileHeight=0,this._errorEvent=new dn["a"],this._ready=!1;let s=e.credit;"string"===typeof s&&(s=new hn(s)),this._credit=s;const c=this;let l;function u(e){return c._image=e,c._tileWidth=e.width,c._tileHeight=e.height,c._ready=!0,Zl.reportSuccess(c._errorEvent),Promise.resolve(!0)}function h(e){const n=`Failed to load image ${t.url}.`;return l=Zl.reportError(l,c,c._errorEvent,n,0,0,0),l.retry?d():Promise.reject(new ye["a"](n))}function d(){return sUe.loadImage(null,t).then(u).catch(h)}this._readyPromise=d()}Object.defineProperties(C0e.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return 0}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.")}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),C0e.prototype.getTileCredits=function(e,t,n){},C0e.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");if(Object(r["a"])(this._image))return Promise.resolve(this._image)},C0e.prototype.pickFeatures=function(e,t,n,i,o){};var E0e=C0e;function x0e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.clock",e.clock),i["a"].typeOf.object("options.times",e.times),i["a"].typeOf.func("options.requestImageFunction",e.requestImageFunction),i["a"].typeOf.func("options.reloadFunction",e.reloadFunction),this._tileCache={},this._tilesRequestedForInterval=[];const t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function S0e(e,t,n){return`${e}-${t}-${n}`}function I0e(e){const t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function D0e(e){const t=e._times;if(!Object(r["a"])(t))return;const n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,a=n.multiplier;if(!o&&0!==a)return;let s,c=t.indexOf(i);if(c<0)return;const l=t.get(c);return a>0?(s=mo.secondsDifference(l.stop,i),++c):(s=mo.secondsDifference(l.start,i),--c),s/=a,c>=0&&s<=5?t.get(c):void 0}function P0e(e,t,n){const i=e._times.indexOf(n.start),o=e._tileCache;let a=o[i];Object(r["a"])(a)||(a=o[i]={});const s=t.key;if(Object(r["a"])(a[s]))return!0;const c=I0e(s),l=new Sl["a"]({throttle:!1,throttleByServer:!0,type:Dl["a"].IMAGERY,priorityFunction:t.priorityFunction}),u=e._requestImageFunction(c.x,c.y,c.level,l,n);return!!Object(r["a"])(u)&&(a[s]={promise:u,request:l},!0)}Object.defineProperties(x0e.prototype,{clock:{get:function(){return this._clock},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),x0e.prototype.getFromCache=function(e,t,n,i){const o=S0e(e,t,n);let a;const s=this._tileCache[this._currentIntervalIndex];if(Object(r["a"])(s)&&Object(r["a"])(s[o])){const e=s[o];a=e.promise.catch((function(t){throw i.state=e.request.state,t})),delete s[o]}return a},x0e.prototype.checkApproachingInterval=function(e,t,n,i){const o=S0e(e,t,n),a=this._tilesRequestedForInterval,s=D0e(this),c={key:o,priorityFunction:i.priorityFunction};Object(r["a"])(s)&&P0e(this,c,s)||a.push(c),a.length>=512&&a.splice(0,256)},x0e.prototype._clockOnTick=function(e){const t=e.currentTime,n=this._times,i=n.indexOf(t),o=this._currentIntervalIndex;if(i!==o){const e=this._tileCache[o];for(const t in e)e.hasOwnProperty(t)&&e[t].request.cancel();return delete this._tileCache[o],this._tilesRequestedForInterval=[],this._currentIntervalIndex=i,void this._reloadFunction()}const a=D0e(this);if(Object(r["a"])(a)){const e=this._tilesRequestedForInterval;let t=!0;while(t){if(0===e.length)break;const n=e.pop();t=P0e(this,n,a),t||e.push(n)}}};var j0e=x0e;const R0e=[3034,3035,3042,3043,3044],L0e=[4471,4559];function M0e(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");if(!Object(r["a"])(e.layers))throw new a["a"]("options.layers is required.");if(Object(r["a"])(e.times)&&!Object(r["a"])(e.clock))throw new a["a"]("options.times was specified, so options.clock is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=Object(o["a"])(e.getFeatureInfoUrl,e.url);const t=Et["a"].createIfNeeded(e.url),n=Et["a"].createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(M0e.DefaultParameters,!0),n.setQueryParameters(M0e.GetFeatureInfoDefaultParameters,!0),Object(r["a"])(e.parameters)&&t.setQueryParameters(F0e(e.parameters)),Object(r["a"])(e.getFeatureInfoParameters)&&n.setQueryParameters(F0e(e.getFeatureInfoParameters));const i=this;this._reload=void 0,Object(r["a"])(e.times)&&(this._timeDynamicImagery=new j0e({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,o,r){return N0e(i,e,t,n,o,r)},reloadFunction:function(){Object(r["a"])(i._reload)&&i._reload()}}));const s={};if(s.layers=e.layers,s.bbox="{westProjected},{southProjected},{eastProjected},{northProjected}",s.width="{width}",s.height="{height}",parseFloat(t.queryParameters.version)>=1.3){s.crs=Object(o["a"])(e.crs,e.tilingScheme&&e.tilingScheme.projection instanceof Rc?"EPSG:3857":"CRS:84");const t=s.crs.split(":");if("EPSG"===t[0]&&2===t.length){const e=Number(t[1]);(e>=4e3&&e<5e3&&!L0e.includes(e)||R0e.includes(e))&&(s.bbox="{southProjected},{westProjected},{northProjected},{eastProjected}")}}else s.srs=Object(o["a"])(e.srs,e.tilingScheme&&e.tilingScheme.projection instanceof Rc?"EPSG:3857":"EPSG:4326");t.setQueryParameters(s,!0),n.setQueryParameters(s,!0);const c={query_layers:e.layers,info_format:"{format}"};parseFloat(n.queryParameters.version)>=1.3?(c.i="{i}",c.j="{j}"):(c.x="{i}",c.y="{j}"),n.setQueryParameters(c,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new _0e({url:t,pickFeaturesUrl:n,tilingScheme:Object(o["a"])(e.tilingScheme,new qt({ellipsoid:e.ellipsoid})),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:Object(o["a"])(e.getFeatureInfoFormats,M0e.DefaultGetFeatureInfoFormats),enablePickFeatures:e.enablePickFeatures})}function N0e(e,t,n,i,o,a){const s=Object(r["a"])(a)?a.data:void 0,c=e._tileProvider;return Object(r["a"])(s)&&c._resource.setQueryParameters(s),c.requestImage(t,n,i,o)}function B0e(e,t,n,i,o,a,s){const c=Object(r["a"])(s)?s.data:void 0,l=e._tileProvider;return Object(r["a"])(c)&&l._pickFeaturesResource.setQueryParameters(c),l.pickFeatures(t,n,i,o,a)}function F0e(e){const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}Object.defineProperties(M0e.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},ready:{get:function(){return this._tileProvider.ready}},readyPromise:{get:function(){return this._tileProvider.readyPromise}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}}}),M0e.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)},M0e.prototype.requestImage=function(e,t,n,i){let o;const a=this._timeDynamicImagery;let s;return Object(r["a"])(a)&&(s=a.currentInterval,o=a.getFromCache(e,t,n,i)),Object(r["a"])(o)||(o=N0e(this,e,t,n,i,s)),Object(r["a"])(o)&&Object(r["a"])(a)&&a.checkApproachingInterval(e,t,n,i),o},M0e.prototype.pickFeatures=function(e,t,n,i,o){const a=this._timeDynamicImagery,s=Object(r["a"])(a)?a.currentInterval:void 0;return B0e(this,e,t,n,i,o,s)},M0e.DefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"}),M0e.GetFeatureInfoDefaultParameters=Object.freeze({service:"WMS",version:"1.1.1",request:"GetFeatureInfo"}),M0e.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new mXe("json","application/json")),Object.freeze(new mXe("xml","text/xml")),Object.freeze(new mXe("text","text/html"))]);var z0e=M0e;const k0e=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});function U0e(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.url))throw new a["a"]("options.url is required.");if(!Object(r["a"])(e.layer))throw new a["a"]("options.layer is required.");if(!Object(r["a"])(e.style))throw new a["a"]("options.style is required.");if(!Object(r["a"])(e.tileMatrixSetID))throw new a["a"]("options.tileMatrixSetID is required.");if(Object(r["a"])(e.times)&&!Object(r["a"])(e.clock))throw new a["a"]("options.times was specified, so options.clock is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=Et["a"].createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,s=t.url,c=s.match(/{/g);if(!Object(r["a"])(c)||1===c.length&&/{s}/.test(s))t.setQueryParameters(k0e),this._useKvp=!0;else{const e={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(e),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=Object(o["a"])(e.format,"image/jpeg"),this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=Object(r["a"])(e.tilingScheme)?e.tilingScheme:new tu({ellipsoid:e.ellipsoid}),this._tileWidth=Object(o["a"])(e.tileWidth,256),this._tileHeight=Object(o["a"])(e.tileHeight,256),this._minimumLevel=Object(o["a"])(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=Object(o["a"])(e.rectangle,this._tilingScheme.rectangle),this._dimensions=e.dimensions;const l=this;this._reload=void 0,Object(r["a"])(e.times)&&(this._timeDynamicImagery=new j0e({clock:e.clock,times:e.times,requestImageFunction:function(e,t,n,i,o){return V0e(l,e,t,n,i,o)},reloadFunction:function(){Object(r["a"])(l._reload)&&l._reload()}})),this._readyPromise=Promise.resolve(!0);const u=this._tilingScheme.positionToTileXY(Fe.southwest(this._rectangle),this._minimumLevel),h=this._tilingScheme.positionToTileXY(Fe.northeast(this._rectangle),this._minimumLevel),d=(Math.abs(h.x-u.x)+1)*(Math.abs(h.y-u.y)+1);if(d>4)throw new a["a"](`The imagery provider's rectangle and minimumLevel indicate that there are ${d} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);this._errorEvent=new dn["a"];const f=e.credit;this._credit="string"===typeof f?new hn(f):f,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():Object(r["a"])(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(""):this._subdomains=["a","b","c"]}function V0e(e,t,n,i,o,a){const s=e._tileMatrixLabels,c=Object(r["a"])(s)?s[i]:i.toString(),l=e._subdomains,u=e._dimensions,h=Object(r["a"])(a)?a.data:void 0;let d,f;if(e._useKvp){let a={};a.tilematrix=c,a.layer=e._layer,a.style=e._style,a.tilerow=n,a.tilecol=t,a.tilematrixset=e._tileMatrixSetID,a.format=e._format,Object(r["a"])(u)&&(a=Object(qE["a"])(a,u)),Object(r["a"])(h)&&(a=Object(qE["a"])(a,h)),f={s:l[(t+n+i)%l.length]},d=e._resource.getDerivedResource({queryParameters:a,request:o}),d.setTemplateValues(f)}else f={TileMatrix:c,TileRow:n.toString(),TileCol:t.toString(),s:l[(t+n+i)%l.length]},d=e._resource.getDerivedResource({request:o}),d.setTemplateValues(f),Object(r["a"])(u)&&d.setTemplateValues(u),Object(r["a"])(h)&&d.setTemplateValues(h);return sUe.loadImage(e,d)}Object.defineProperties(U0e.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},ready:{value:!0},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,Object(r["a"])(this._reload)&&this._reload())}}}),U0e.prototype.getTileCredits=function(e,t,n){},U0e.prototype.requestImage=function(e,t,n,i){let o;const a=this._timeDynamicImagery;let s;return Object(r["a"])(a)&&(s=a.currentInterval,o=a.getFromCache(e,t,n,i)),Object(r["a"])(o)||(o=V0e(this,e,t,n,i,s)),Object(r["a"])(o)&&Object(r["a"])(a)&&a.checkApproachingInterval(e,t,n,i),o},U0e.prototype.pickFeatures=function(e,t,n,i,o){};var H0e=U0e;function G0e(e){return function(t){return new e(t)}}const W0e={ARCGIS_MAPSERVER:G0e(uUe),BING:G0e(IUe),GOOGLE_EARTH:G0e(uZe),MAPBOX:G0e(T0e),SINGLE_TILE:G0e(E0e),TMS:G0e(v0e),URL_TEMPLATE:G0e(_0e),WMS:G0e(z0e),WMTS:G0e(H0e)};function q0e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.assetId;i["a"].typeOf.number("options.assetId",t),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new dn["a"];const n=this,a=$C._createEndpointResource(t,e),s=e.assetId.toString()+e.accessToken+e.server;let c=q0e._endpointCache[s];Object(r["a"])(c)||(c=a.fetchJson(),q0e._endpointCache[s]=c),this._readyPromise=c.then((function(e){if("IMAGERY"!==e.type)return Promise.reject(new ye["a"](`Cesium ion asset ${t} is not an imagery asset.`));let i;const o=e.externalType;if(Object(r["a"])(o)){const t=W0e[o];if(!Object(r["a"])(t))return Promise.reject(new ye["a"](`Unrecognized Cesium ion imagery type: ${o}`));i=t(e.options)}else i=new v0e({url:new $C(e,a)});return n._tileCredits=$C.getCreditsFromEndpoint(e,a),i.errorEvent.addEventListener((function(e){e.provider=n,n._errorEvent.raiseEvent(e)})),n._imageryProvider=i,i.readyPromise.then((function(){return n._ready=!0,!0}))}))}Object.defineProperties(q0e.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.rectangle}},tileWidth:{get:function(){if(!this._ready)throw new a["a"]("tileWidth must not be called before the imagery provider is ready.");return this._imageryProvider.tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a["a"]("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a["a"]("minimumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){if(!this._ready)throw new a["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this._ready)throw new a["a"]("credit must not be called before the imagery provider is ready.");return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){if(!this._ready)throw new a["a"]("hasAlphaChannel must not be called before the imagery provider is ready.");return this._imageryProvider.hasAlphaChannel},proxy:{get:function(){}}}}),q0e.prototype.getTileCredits=function(e,t,n){if(!this._ready)throw new a["a"]("getTileCredits must not be called before the imagery provider is ready.");const i=this._imageryProvider.getTileCredits(e,t,n);return Object(r["a"])(i)?this._tileCredits.concat(i):this._tileCredits},q0e.prototype.requestImage=function(e,t,n,i){if(!this._ready)throw new a["a"]("requestImage must not be called before the imagery provider is ready.");return this._imageryProvider.requestImage(e,t,n,i)},q0e.prototype.pickFeatures=function(e,t,n,i,o){if(!this._ready)throw new a["a"]("pickFeatures must not be called before the imagery provider is ready.");return this._imageryProvider.pickFeatures(e,t,n,i,o)},q0e._endpointCache={};var Y0e=q0e;const X0e={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4};var K0e=Object.freeze(X0e);function $0e(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function J0e(e){if(Object(r["a"])(e)&&e.length!==OZ.NUMBER_OF_JOB_TYPES)throw new a["a"]("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");const t=new Array(OZ.NUMBER_OF_JOB_TYPES);t[OZ.TEXTURE]=new $0e(Object(r["a"])(e)?e[OZ.TEXTURE]:10),t[OZ.PROGRAM]=new $0e(Object(r["a"])(e)?e[OZ.PROGRAM]:10),t[OZ.BUFFER]=new $0e(Object(r["a"])(e)?e[OZ.BUFFER]:30);const n=t.length;let i,o=0;for(i=0;i<n;++i)o+=t[i].total;const s=new Array(n);for(i=0;i<n;++i)s[i]=!1;this._totalBudget=o,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=s}Object.defineProperties($0e.prototype,{total:{get:function(){return this._total}}}),J0e.getTimestamp=bm,Object.defineProperties(J0e.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),J0e.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},J0e.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let n=0;n<t;++n){const t=e[n];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},J0e.prototype.execute=function(e,t){const n=this._budgets,i=n[t],o=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&o)return i.starvedThisFrame=!0,!1;let r;if(i.usedThisFrame+i.stolenFromMeThisFrame>=i.total){const e=n.length;let t;for(t=0;t<e;++t)if(r=n[t],r.usedThisFrame+r.stolenFromMeThisFrame<r.total&&!r.starvedLastFrame)break;if(t===e&&o)return!1;o&&(i.starvedThisFrame=!0)}const a=J0e.getTimestamp();e.execute();const s=J0e.getTimestamp()-a;return this._totalUsedThisFrame+=s,r?r.stolenFromMeThisFrame+=s:i.usedThisFrame+=s,this._executedThisFrame[t]=!0,!0};var Q0e=J0e;function Z0e(){}Object.defineProperties(Z0e.prototype,{color:{get:a["a"].throwInstantiationError},intensity:{get:a["a"].throwInstantiationError}});var e1e=Z0e;const t1e=/\/$/,n1e=new hn('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function i1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.styleId;if(!Object(r["a"])(t))throw new a["a"]("options.styleId is required.");const n=e.accessToken;if(!Object(r["a"])(n))throw new a["a"]("options.accessToken is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const i=Et["a"].createIfNeeded(Object(o["a"])(e.url,"https://api.mapbox.com/styles/v1/"));this._styleId=t,this._accessToken=n;const s=Object(o["a"])(e.tilesize,512);this._tilesize=s;const c=Object(o["a"])(e.username,"mapbox");this._username=c;const l=Object(r["a"])(e.scaleFactor)?"@2x":"";let u,h=i.getUrlComponent();t1e.test(h)||(h+="/"),h+=`${this._username}/${t}/tiles/${this._tilesize}/{z}/{x}/{y}${l}`,i.url=h,i.setQueryParameters({access_token:n}),Object(r["a"])(e.credit)?(u=e.credit,"string"===typeof u&&(u=new hn(u))):u=n1e,this._resource=i,this._imageryProvider=new _0e({url:i,credit:u,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle})}Object.defineProperties(i1e.prototype,{url:{get:function(){return this._imageryProvider.url}},ready:{get:function(){return this._imageryProvider.ready}},readyPromise:{get:function(){return this._imageryProvider.readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}}}),i1e.prototype.getTileCredits=function(e,t,n){},i1e.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)},i1e.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)},i1e._defaultCredit=n1e;var o1e=i1e;function r1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);let t=e.textureUrl;Object(r["a"])(t)||(t=Bt("Assets/Textures/moonSmall.jpg")),this.show=Object(o["a"])(e.show,!0),this.textureUrl=t,this._ellipsoid=Object(o["a"])(e.ellipsoid,k.MOON),this.onlySunLighting=Object(o["a"])(e.onlySunLighting,!0),this._ellipsoidPrimitive=new IYe({radii:this.ellipsoid.radii,material:XB.fromType(XB.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new MC}Object.defineProperties(r1e.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const a1e=new ce,s1e=new ce,c1e=new g,l1e=[];r1e.prototype.update=function(e){if(!this.show)return;const t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;const n=e.time;Object(r["a"])(ka.computeIcrfToFixedMatrix(n,a1e))||ka.computeTemeToPseudoFixedMatrix(n,a1e);const i=this._axes.evaluate(n,s1e);ce.transpose(i,i),ce.multiply(a1e,i,i);const o=Xj.computeMoonPositionInEarthInertialFrame(n,c1e);ce.multiplyByVector(a1e,o,o),Me.fromRotationTranslation(i,o,t.modelMatrix);const a=e.commandList;return e.commandList=l1e,l1e.length=0,t.update(e),e.commandList=a,1===l1e.length?l1e[0]:void 0},r1e.prototype.isDestroyed=function(){return!1},r1e.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),Wc(this)};var u1e=r1e;function h1e(e){}h1e.prototype.isReady=function(){return!0},h1e.prototype.shouldDiscardImage=function(e){return!1};var d1e=h1e,f1e="#ifdef MRT\n#extension GL_EXT_draw_buffers : enable\n#endif\n\nuniform vec4 u_bgColor;\nuniform sampler2D u_depthTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    if (texture2D(u_depthTexture, v_textureCoordinates).r < 1.0)\n    {\n#ifdef MRT\n        gl_FragData[0] = u_bgColor;\n        gl_FragData[1] = vec4(u_bgColor.a);\n#else\n        gl_FragColor = u_bgColor;\n#endif\n        return;\n    }\n    \n    discard;\n}\n",p1e="/**\n * Compositing for Weighted Blended Order-Independent Transparency. See:\n * - http://jcgt.org/published/0002/02/09/\n * - http://casual-effects.blogspot.com/2014/03/weighted-blended-order-independent.html\n */\n\nuniform sampler2D u_opaque;\nuniform sampler2D u_accumulation;\nuniform sampler2D u_revealage;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 opaque = texture2D(u_opaque, v_textureCoordinates);\n    vec4 accum = texture2D(u_accumulation, v_textureCoordinates);\n    float r = texture2D(u_revealage, v_textureCoordinates).r;\n\n#ifdef MRT\n    vec4 transparent = vec4(accum.rgb / clamp(r, 1e-4, 5e4), accum.a);\n#else\n    vec4 transparent = vec4(accum.rgb / clamp(accum.a, 1e-4, 5e4), r);\n#endif\n\n    gl_FragColor = (1.0 - transparent.a) * transparent + transparent.a * opaque;\n\n    if (opaque != czm_backgroundColor)\n    {\n        gl_FragColor.a = 1.0;\n    }\n}\n";function m1e(e){this._numSamples=1,this._translucentMultipassSupport=!1,this._translucentMRTSupport=!1;const t=e.colorBufferFloat&&e.depthTexture&&e.floatBlend;this._translucentMRTSupport=e.drawBuffers&&t,this._translucentMultipassSupport=!this._translucentMRTSupport&&t,this._opaqueFBO=void 0,this._opaqueTexture=void 0,this._depthStencilTexture=void 0,this._accumulationTexture=void 0,this._translucentFBO=new N8({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._alphaFBO=new N8({createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._adjustTranslucentFBO=new N8({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1}),this._adjustAlphaFBO=new N8({createColorAttachments:!1}),this._opaqueClearCommand=new xX({color:new Dm(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new xX({color:new Dm(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new xX({color:new Dm(0,0,0,0),owner:this}),this._alphaClearCommand=new xX({color:new Dm(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0,this._viewport=new Au,this._rs=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHDR=!1}function _1e(e){e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._revealageTexture=e._revealageTexture&&!e._revealageTexture.isDestroyed()&&e._revealageTexture.destroy()}function g1e(e){e._translucentFBO.destroy(),e._alphaFBO.destroy(),e._adjustTranslucentFBO.destroy(),e._adjustAlphaFBO.destroy()}function b1e(e){_1e(e),g1e(e)}function y1e(e,t,n,i){_1e(e),e._accumulationTexture=new lB({context:t,width:n,height:i,pixelFormat:fx.RGBA,pixelDatatype:hx.FLOAT});const o=new Float32Array(n*i*4);e._revealageTexture=new lB({context:t,pixelFormat:fx.RGBA,pixelDatatype:hx.FLOAT,source:{arrayBufferView:o,width:n,height:i},flipY:!1})}function v1e(e,t){g1e(e);const n=Ys.FRAMEBUFFER_COMPLETE;let i=!0;const o=e._accumulationTexture.width,r=e._accumulationTexture.height;if(e._translucentMRTSupport&&(e._translucentFBO.setColorTexture(e._accumulationTexture,0),e._translucentFBO.setColorTexture(e._revealageTexture,1),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture,0),e._adjustTranslucentFBO.setColorTexture(e._revealageTexture,1),e._adjustTranslucentFBO.update(t,o,r),e._translucentFBO.status===n&&e._adjustTranslucentFBO.status===n||(g1e(e),e._translucentMRTSupport=!1)),!e._translucentMRTSupport){e._translucentFBO.setColorTexture(e._accumulationTexture),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,o,r),e._alphaFBO.setColorTexture(e._revealageTexture),e._alphaFBO.setDepthStencilTexture(e._depthStencilTexture),e._alphaFBO.update(t,o,r),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture),e._adjustTranslucentFBO.update(t,o,r),e._adjustAlphaFBO.setColorTexture(e._revealageTexture),e._adjustAlphaFBO.update(t,o,r);const a=e._translucentFBO.status===n,s=e._alphaFBO.status===n,c=e._adjustTranslucentFBO.status===n,l=e._adjustAlphaFBO.status===n;a&&s&&c&&l||(b1e(e),e._translucentMultipassSupport=!1,i=!1)}return i}m1e.prototype.update=function(e,t,n,i,o){if(!this.isSupported())return;this._opaqueFBO=n,this._opaqueTexture=n.getColorTexture(0),this._depthStencilTexture=n.getDepthStencilTexture();const a=this._opaqueTexture.width,s=this._opaqueTexture.height,c=this._accumulationTexture,l=!Object(r["a"])(c)||c.width!==a||c.height!==s||i!==this._useHDR,u=this._numSamples!==o;if((l||u)&&(this._numSamples=o,y1e(this,e,a,s)),(!Object(r["a"])(this._translucentFBO.framebuffer)||l||u)&&!v1e(this,e))return;this._useHDR=i;const h=this;let d,f;Object(r["a"])(this._compositeCommand)||(d=new EV({sources:[p1e]}),this._translucentMRTSupport&&d.defines.push("MRT"),f={u_opaque:function(){return h._opaqueTexture},u_accumulation:function(){return h._accumulationTexture},u_revealage:function(){return h._revealageTexture}},this._compositeCommand=e.createViewportQuadCommand(d,{uniformMap:f,owner:this})),Object(r["a"])(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(d=new EV({defines:["MRT"],sources:[f1e]}),f={u_bgColor:function(){return h._translucentMRTClearCommand.color},u_depthTexture:function(){return h._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(d,{uniformMap:f,owner:this})):this._translucentMultipassSupport&&(d=new EV({sources:[f1e]}),f={u_bgColor:function(){return h._translucentMultipassClearCommand.color},u_depthTexture:function(){return h._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(d,{uniformMap:f,owner:this}),f={u_bgColor:function(){return h._alphaClearCommand.color},u_depthTexture:function(){return h._depthStencilTexture}},this._adjustAlphaCommand=e.createViewportQuadCommand(d,{uniformMap:f,owner:this}))),this._viewport.width=a,this._viewport.height=s;const p=!Au.equals(this._viewport,t.viewport);let m=p!==this._useScissorTest;this._useScissorTest=p,Au.equals(this._scissorRectangle,t.viewport)||(this._scissorRectangle=Au.clone(t.viewport,this._scissorRectangle),m=!0),Object(r["a"])(this._rs)&&Au.equals(this._viewport,this._rs.viewport)&&!m||(this._rs=UF.fromCache({viewport:this._viewport,scissorTest:{enabled:this._useScissorTest,rectangle:this._scissorRectangle}})),Object(r["a"])(this._compositeCommand)&&(this._compositeCommand.renderState=this._rs),this._adjustTranslucentCommand&&(this._adjustTranslucentCommand.renderState=this._rs),Object(r["a"])(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.renderState=this._rs)};const O1e={enabled:!0,color:new Dm(0,0,0,0),equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.ONE,functionDestinationRgb:zN.ONE,functionSourceAlpha:zN.ZERO,functionDestinationAlpha:zN.ONE_MINUS_SOURCE_ALPHA},A1e={enabled:!0,color:new Dm(0,0,0,0),equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.ONE,functionDestinationRgb:zN.ONE,functionSourceAlpha:zN.ONE,functionDestinationAlpha:zN.ONE},w1e={enabled:!0,color:new Dm(0,0,0,0),equationRgb:BN.ADD,equationAlpha:BN.ADD,functionSourceRgb:zN.ZERO,functionDestinationRgb:zN.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:zN.ZERO,functionDestinationAlpha:zN.ONE_MINUS_SOURCE_ALPHA};function T1e(e,t,n,i){let o=n[i.id];if(!Object(r["a"])(o)){const e=UF.getState(i);e.depthMask=!1,e.blending=t,o=UF.fromCache(e),n[i.id]=o}return o}function C1e(e,t,n){return T1e(t,O1e,e._translucentRenderStateCache,n)}function E1e(e,t,n){return T1e(t,A1e,e._translucentRenderStateCache,n)}function x1e(e,t,n){return T1e(t,w1e,e._alphaRenderStateCache,n)}const S1e="    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragData[0] = vec4(Ci * wzi, ai);\n    gl_FragData[1] = vec4(ai * wzi);\n",I1e="    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragColor = vec4(Ci, ai) * wzi;\n",D1e="    float ai = czm_gl_FragColor.a;\n    gl_FragColor = vec4(ai);\n";function P1e(e,t,n,i){let o=e.shaderCache.getDerivedShaderProgram(t,n);if(!Object(r["a"])(o)){const r=t._attributeLocations,a=t.fragmentShaderSource.clone();a.sources=a.sources.map((function(e){return e=EV.replaceMain(e,"czm_translucent_main"),e=e.replace(/gl_FragColor/g,"czm_gl_FragColor"),e=e.replace(/\bdiscard\b/g,"czm_discard = true"),e=e.replace(/czm_phong/g,"czm_translucentPhong"),e})),a.sources.splice(0,0,`${-1!==i.indexOf("gl_FragData")?"#extension GL_EXT_draw_buffers : enable \n":""}vec4 czm_gl_FragColor;\n`+"bool czm_discard = false;\n"),a.sources.push(`void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n${i}}\n`),o=e.shaderCache.createDerivedShaderProgram(t,n,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:a,attributeLocations:r})}return o}function j1e(e,t){return P1e(e,t,"translucentMRT",S1e)}function R1e(e,t){return P1e(e,t,"translucentMultipass",I1e)}function L1e(e,t){return P1e(e,t,"alphaMultipass",D1e)}function M1e(e,t,n,i,o,a){let s,c,l;const u=t.context,h=t.frameState.useLogDepth,d=t._hdr,f=i.framebuffer,p=o.length,m=t.frameState.shadowState.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(u,i),i.framebuffer=e._adjustAlphaFBO.framebuffer,e._adjustAlphaCommand.execute(u,i);const _=e._opaqueFBO.framebuffer;for(i.framebuffer=e._translucentFBO.framebuffer,l=0;l<p;++l)s=o[l],s=h?s.derivedCommands.logDepth.command:s,s=d?s.derivedCommands.hdr.command:s,c=m&&s.receiveShadows?s.derivedCommands.oit.shadows.translucentCommand:s.derivedCommands.oit.translucentCommand,n(c,t,u,i,_);for(Object(r["a"])(a)&&(s=a.unclassifiedCommand,c=m&&s.receiveShadows?s.derivedCommands.oit.shadows.translucentCommand:s.derivedCommands.oit.translucentCommand,n(c,t,u,i,_)),i.framebuffer=e._alphaFBO.framebuffer,l=0;l<p;++l)s=o[l],s=h?s.derivedCommands.logDepth.command:s,s=d?s.derivedCommands.hdr.command:s,c=m&&s.receiveShadows?s.derivedCommands.oit.shadows.alphaCommand:s.derivedCommands.oit.alphaCommand,n(c,t,u,i,_);Object(r["a"])(a)&&(s=a.unclassifiedCommand,c=m&&s.receiveShadows?s.derivedCommands.oit.shadows.alphaCommand:s.derivedCommands.oit.alphaCommand,n(c,t,u,i,_)),i.framebuffer=f}function N1e(e,t,n,i,o,a){const s=t.context,c=t.frameState.useLogDepth,l=t._hdr,u=i.framebuffer,h=o.length,d=t.frameState.shadowState.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(s,i);const f=e._opaqueFBO.framebuffer;let p,m;i.framebuffer=e._translucentFBO.framebuffer;for(let r=0;r<h;++r)p=o[r],p=c?p.derivedCommands.logDepth.command:p,p=l?p.derivedCommands.hdr.command:p,m=d&&p.receiveShadows?p.derivedCommands.oit.shadows.translucentCommand:p.derivedCommands.oit.translucentCommand,n(m,t,s,i,f);Object(r["a"])(a)&&(p=a.unclassifiedCommand,m=d&&p.receiveShadows?p.derivedCommands.oit.shadows.translucentCommand:p.derivedCommands.oit.translucentCommand,n(m,t,s,i,f)),i.framebuffer=u}m1e.prototype.createDerivedCommands=function(e,t,n){if(Object(r["a"])(n)||(n={}),this._translucentMRTSupport){let i,o;Object(r["a"])(n.translucentCommand)&&(i=n.translucentCommand.shaderProgram,o=n.translucentCommand.renderState),n.translucentCommand=lF.shallowClone(e,n.translucentCommand),Object(r["a"])(i)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=i,n.translucentCommand.renderState=o):(n.translucentCommand.shaderProgram=j1e(t,e.shaderProgram),n.translucentCommand.renderState=C1e(this,t,e.renderState),n.shaderProgramId=e.shaderProgram.id)}else{let i,o,a,s;Object(r["a"])(n.translucentCommand)&&(i=n.translucentCommand.shaderProgram,o=n.translucentCommand.renderState,a=n.alphaCommand.shaderProgram,s=n.alphaCommand.renderState),n.translucentCommand=lF.shallowClone(e,n.translucentCommand),n.alphaCommand=lF.shallowClone(e,n.alphaCommand),Object(r["a"])(i)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=i,n.translucentCommand.renderState=o,n.alphaCommand.shaderProgram=a,n.alphaCommand.renderState=s):(n.translucentCommand.shaderProgram=R1e(t,e.shaderProgram),n.translucentCommand.renderState=E1e(this,t,e.renderState),n.alphaCommand.shaderProgram=L1e(t,e.shaderProgram),n.alphaCommand.renderState=x1e(this,t,e.renderState),n.shaderProgramId=e.shaderProgram.id)}return n},m1e.prototype.executeCommands=function(e,t,n,i,o){this._translucentMRTSupport?N1e(this,e,t,n,i,o):M1e(this,e,t,n,i,o)},m1e.prototype.execute=function(e,t){this._compositeCommand.execute(e,t)},m1e.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this._opaqueFBO.framebuffer,Dm.clone(n,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(e,t),t.framebuffer=this._translucentFBO.framebuffer;const o=this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand;o.execute(e,t),this._translucentMultipassSupport&&(t.framebuffer=this._alphaFBO.framebuffer,this._alphaClearCommand.execute(e,t)),t.framebuffer=i},m1e.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},m1e.prototype.isDestroyed=function(){return!1},m1e.prototype.destroy=function(){return b1e(this),Object(r["a"])(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),Object(r["a"])(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),Object(r["a"])(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy()),Wc(this)};var B1e=m1e;const F1e=new hn("MapQuest, Open Street Map and contributors, CC-BY-SA");function z1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Et["a"].createIfNeeded(Object(o["a"])(e.url,"https://a.tile.openstreetmap.org/"));t.appendForwardSlash(),t.url+=`{z}/{x}/{y}.${Object(o["a"])(e.fileExtension,"png")}`;const n=new tu({ellipsoid:e.ellipsoid}),i=256,r=256,s=Object(o["a"])(e.minimumLevel,0),c=e.maximumLevel,l=Object(o["a"])(e.rectangle,n.rectangle),u=n.positionToTileXY(Fe.southwest(l),s),h=n.positionToTileXY(Fe.northeast(l),s),d=(Math.abs(h.x-u.x)+1)*(Math.abs(h.y-u.y)+1);if(d>4)throw new a["a"](`The rectangle and minimumLevel indicate that there are ${d} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);let f=Object(o["a"])(e.credit,F1e);"string"===typeof f&&(f=new hn(f)),_0e.call(this,{url:t,credit:f,tilingScheme:n,tileWidth:i,tileHeight:r,minimumLevel:s,maximumLevel:c,rectangle:l})}Object(r["a"])(Object.create)&&(z1e.prototype=Object.create(_0e.prototype),z1e.prototype.constructor=z1e);var k1e=z1e;const U1e=new Gt(1,1);function V1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.mass=Object(o["a"])(e.mass,1),this.position=g.clone(Object(o["a"])(e.position,g.ZERO)),this.velocity=g.clone(Object(o["a"])(e.velocity,g.ZERO)),this.life=Object(o["a"])(e.life,Number.MAX_VALUE),this.image=e.image,this.startColor=Dm.clone(Object(o["a"])(e.startColor,Dm.WHITE)),this.endColor=Dm.clone(Object(o["a"])(e.endColor,Dm.WHITE)),this.startScale=Object(o["a"])(e.startScale,1),this.endScale=Object(o["a"])(e.endScale,1),this.imageSize=Gt.clone(Object(o["a"])(e.imageSize,U1e)),this._age=0,this._normalizedAge=0,this._billboard=void 0}Object.defineProperties(V1e.prototype,{age:{get:function(){return this._age}},normalizedAge:{get:function(){return this._normalizedAge}}});const H1e=new g;V1e.prototype.update=function(e,t){return g.multiplyByScalar(this.velocity,e,H1e),g.add(this.position,H1e,this.position),Object(r["a"])(t)&&t(this,e),this._age+=e,this.life===Number.MAX_VALUE?this._normalizedAge=0:this._normalizedAge=this._age/this.life,this._age<=this.life};var G1e=V1e;function W1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.time=Object(o["a"])(e.time,0),this.minimum=Object(o["a"])(e.minimum,0),this.maximum=Object(o["a"])(e.maximum,50),this._complete=!1}Object.defineProperties(W1e.prototype,{complete:{get:function(){return this._complete}}});var q1e=W1e;function Y1e(e){throw new a["a"]("This type should not be instantiated directly.  Instead, use BoxEmitter, CircleEmitter, ConeEmitter or SphereEmitter.")}Y1e.prototype.emit=function(e){a["a"].throwInstantiationError()};var X1e=Y1e;const K1e=new Gt(1,1);function $1e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.show=Object(o["a"])(e.show,!0),this.updateCallback=e.updateCallback,this.loop=Object(o["a"])(e.loop,!0),this.image=Object(o["a"])(e.image,void 0);let t=e.emitter;Object(r["a"])(t)||(t=new tWe(.5)),this._emitter=t,this._bursts=e.bursts,this._modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this._emitterModelMatrix=Me.clone(Object(o["a"])(e.emitterModelMatrix,Me.IDENTITY)),this._matrixDirty=!0,this._combinedMatrix=new Me,this._startColor=Dm.clone(Object(o["a"])(e.color,Object(o["a"])(e.startColor,Dm.WHITE))),this._endColor=Dm.clone(Object(o["a"])(e.color,Object(o["a"])(e.endColor,Dm.WHITE))),this._startScale=Object(o["a"])(e.scale,Object(o["a"])(e.startScale,1)),this._endScale=Object(o["a"])(e.scale,Object(o["a"])(e.endScale,1)),this._emissionRate=Object(o["a"])(e.emissionRate,5),this._minimumSpeed=Object(o["a"])(e.speed,Object(o["a"])(e.minimumSpeed,1)),this._maximumSpeed=Object(o["a"])(e.speed,Object(o["a"])(e.maximumSpeed,1)),this._minimumParticleLife=Object(o["a"])(e.particleLife,Object(o["a"])(e.minimumParticleLife,5)),this._maximumParticleLife=Object(o["a"])(e.particleLife,Object(o["a"])(e.maximumParticleLife,5)),this._minimumMass=Object(o["a"])(e.mass,Object(o["a"])(e.minimumMass,1)),this._maximumMass=Object(o["a"])(e.mass,Object(o["a"])(e.maximumMass,1)),this._minimumImageSize=Gt.clone(Object(o["a"])(e.imageSize,Object(o["a"])(e.minimumImageSize,K1e))),this._maximumImageSize=Gt.clone(Object(o["a"])(e.imageSize,Object(o["a"])(e.maximumImageSize,K1e))),this._sizeInMeters=Object(o["a"])(e.sizeInMeters,!1),this._lifetime=Object(o["a"])(e.lifetime,Number.MAX_VALUE),this._billboardCollection=void 0,this._particles=[],this._particlePool=[],this._previousTime=void 0,this._currentTime=0,this._carryOver=0,this._complete=new dn["a"],this._isComplete=!1,this._updateParticlePool=!0,this._particleEstimate=0}function J1e(e){const t=e._emissionRate,n=e._maximumParticleLife;let i=0;const o=e._bursts;if(Object(r["a"])(o)){const e=o.length;for(let t=0;t<e;++t)i+=o[t].maximum}const a=e._billboardCollection,s=e.image,c=Math.ceil(t*n+i),l=e._particles,u=e._particlePool,h=Math.max(c-l.length-u.length,0);for(let r=0;r<h;++r){const e=new G1e;e._billboard=a.add({image:s}),u.push(e)}e._particleEstimate=c}function Q1e(e){let t=e._particlePool.pop();return Object(r["a"])(t)||(t=new G1e),t}function Z1e(e,t){e._particlePool.push(t)}function e2e(e){const t=e._particles,n=e._particlePool,i=e._billboardCollection,o=t.length,r=n.length,a=e._particleEstimate,s=r-Math.max(a-o-r,0);for(let c=s;c<r;++c){const e=n[c];i.remove(e._billboard)}n.length=s}function t2e(e){Object(r["a"])(e._billboard)&&(e._billboard.show=!1)}function n2e(e,t){let n=t._billboard;Object(r["a"])(n)||(n=t._billboard=e._billboardCollection.add({image:t.image})),n.width=t.imageSize.x,n.height=t.imageSize.y,n.position=t.position,n.sizeInMeters=e.sizeInMeters,n.show=!0;const i=s["a"].lerp(t.startColor.red,t.endColor.red,t.normalizedAge),o=s["a"].lerp(t.startColor.green,t.endColor.green,t.normalizedAge),a=s["a"].lerp(t.startColor.blue,t.endColor.blue,t.normalizedAge),c=s["a"].lerp(t.startColor.alpha,t.endColor.alpha,t.normalizedAge);n.color=new Dm(i,o,a,c),n.scale=s["a"].lerp(t.startScale,t.endScale,t.normalizedAge)}function i2e(e,t){t.startColor=Dm.clone(e._startColor,t.startColor),t.endColor=Dm.clone(e._endColor,t.endColor),t.startScale=e._startScale,t.endScale=e._endScale,t.image=e.image,t.life=s["a"].randomBetween(e._minimumParticleLife,e._maximumParticleLife),t.mass=s["a"].randomBetween(e._minimumMass,e._maximumMass),t.imageSize.x=s["a"].randomBetween(e._minimumImageSize.x,e._maximumImageSize.x),t.imageSize.y=s["a"].randomBetween(e._minimumImageSize.y,e._maximumImageSize.y),t._normalizedAge=0,t._age=0;const n=s["a"].randomBetween(e._minimumSpeed,e._maximumSpeed);g.multiplyByScalar(t.velocity,n,t.velocity),e._particles.push(t)}function o2e(e,t){if(e._isComplete)return 0;t=s["a"].mod(t,e._lifetime);const n=t*e._emissionRate;let i=Math.floor(n);if(e._carryOver+=n-i,e._carryOver>1&&(i++,e._carryOver-=1),Object(r["a"])(e.bursts)){const t=e.bursts.length;for(let n=0;n<t;n++){const t=e.bursts[n],o=e._currentTime;Object(r["a"])(t)&&!t._complete&&o>t.time&&(i+=s["a"].randomBetween(t.minimum,t.maximum),t._complete=!0)}}return i}Object.defineProperties($1e.prototype,{emitter:{get:function(){return this._emitter},set:function(e){i["a"].defined("value",e),this._emitter=e}},bursts:{get:function(){return this._bursts},set:function(e){this._bursts=e,this._updateParticlePool=!0}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){i["a"].defined("value",e),this._matrixDirty=this._matrixDirty||!Me.equals(this._modelMatrix,e),Me.clone(e,this._modelMatrix)}},emitterModelMatrix:{get:function(){return this._emitterModelMatrix},set:function(e){i["a"].defined("value",e),this._matrixDirty=this._matrixDirty||!Me.equals(this._emitterModelMatrix,e),Me.clone(e,this._emitterModelMatrix)}},startColor:{get:function(){return this._startColor},set:function(e){i["a"].defined("value",e),Dm.clone(e,this._startColor)}},endColor:{get:function(){return this._endColor},set:function(e){i["a"].defined("value",e),Dm.clone(e,this._endColor)}},startScale:{get:function(){return this._startScale},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._startScale=e}},endScale:{get:function(){return this._endScale},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._endScale=e}},emissionRate:{get:function(){return this._emissionRate},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._emissionRate=e,this._updateParticlePool=!0}},minimumSpeed:{get:function(){return this._minimumSpeed},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._minimumSpeed=e}},maximumSpeed:{get:function(){return this._maximumSpeed},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._maximumSpeed=e}},minimumParticleLife:{get:function(){return this._minimumParticleLife},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._minimumParticleLife=e}},maximumParticleLife:{get:function(){return this._maximumParticleLife},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._maximumParticleLife=e,this._updateParticlePool=!0}},minimumMass:{get:function(){return this._minimumMass},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._minimumMass=e}},maximumMass:{get:function(){return this._maximumMass},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMass=e}},minimumImageSize:{get:function(){return this._minimumImageSize},set:function(e){i["a"].typeOf.object("value",e),i["a"].typeOf.number.greaterThanOrEquals("value.x",e.x,0),i["a"].typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._minimumImageSize=e}},maximumImageSize:{get:function(){return this._maximumImageSize},set:function(e){i["a"].typeOf.object("value",e),i["a"].typeOf.number.greaterThanOrEquals("value.x",e.x,0),i["a"].typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._maximumImageSize=e}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){i["a"].typeOf.bool("value",e),this._sizeInMeters=e}},lifetime:{get:function(){return this._lifetime},set:function(e){i["a"].typeOf.number.greaterThanOrEquals("value",e,0),this._lifetime=e}},complete:{get:function(){return this._complete}},isComplete:{get:function(){return this._isComplete}}});const r2e=new g;$1e.prototype.update=function(e){if(!this.show)return;Object(r["a"])(this._billboardCollection)||(this._billboardCollection=new Hle),this._updateParticlePool&&(J1e(this),this._updateParticlePool=!1);let t=0;this._previousTime&&(t=mo.secondsDifference(e.time,this._previousTime)),t<0&&(t=0);const n=this._particles,i=this._emitter,o=this.updateCallback;let a,c,l=n.length;for(a=0;a<l;++a)c=n[a],c.update(t,o)?n2e(this,c):(t2e(c),Z1e(this,c),n[a]=n[l-1],--a,--l);n.length=l;const u=o2e(this,t);if(u>0&&Object(r["a"])(i)){this._matrixDirty&&(this._combinedMatrix=Me.multiply(this.modelMatrix,this.emitterModelMatrix,this._combinedMatrix),this._matrixDirty=!1);const e=this._combinedMatrix;for(a=0;a<u;a++)c=Q1e(this),this._emitter.emit(c),g.add(c.position,c.velocity,r2e),Me.multiplyByPoint(e,r2e,r2e),c.position=Me.multiplyByPoint(e,c.position,c.position),g.subtract(r2e,c.position,c.velocity),g.normalize(c.velocity,c.velocity),i2e(this,c),n2e(this,c)}if(this._billboardCollection.update(e),this._previousTime=mo.clone(e.time,this._previousTime),this._currentTime+=t,this._lifetime!==Number.MAX_VALUE&&this._currentTime>this._lifetime)if(this.loop){if(this._currentTime=s["a"].mod(this._currentTime,this._lifetime),this.bursts){const e=this.bursts.length;for(a=0;a<e;a++)this.bursts[a]._complete=!1}}else this._isComplete=!0,this._complete.raiseEvent(this);e.frameNumber%120===0&&e2e(this)},$1e.prototype.isDestroyed=function(){return!1},$1e.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),Wc(this)};var a2e=$1e;function s2e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=HNe(e.container);if(!Object(r["a"])(t))throw new a["a"]("container is required");this._container=t;const n=document.createElement("div");n.className="cesium-performanceDisplay";const i=document.createElement("div");i.className="cesium-performanceDisplay-fps",this._fpsText=document.createTextNode(""),i.appendChild(this._fpsText);const s=document.createElement("div");s.className="cesium-performanceDisplay-ms",this._msText=document.createTextNode(""),s.appendChild(this._msText),n.appendChild(s),n.appendChild(i),this._container.appendChild(n),this._lastFpsSampleTime=bm(),this._lastMsSampleTime=bm(),this._fpsFrameCount=0,this._msFrameCount=0,this._throttled=!1;const c=document.createElement("div");c.className="cesium-performanceDisplay-throttled",this._throttledText=document.createTextNode(""),c.appendChild(this._throttledText),n.appendChild(c)}Object.defineProperties(s2e.prototype,{throttled:{get:function(){return this._throttled},set:function(e){this._throttled!==e&&(this._throttledText.nodeValue=e?"(throttled)":"",this._throttled=e)}}}),s2e.prototype.update=function(e){const t=bm(),n=Object(o["a"])(e,!0);this._fpsFrameCount++;const i=t-this._lastFpsSampleTime;if(i>1e3){let e="N/A";n&&(e=1e3*this._fpsFrameCount/i|0),this._fpsText.nodeValue=`${e} FPS`,this._lastFpsSampleTime=t,this._fpsFrameCount=0}this._msFrameCount++;const r=t-this._lastMsSampleTime;if(r>200){let e="N/A";n&&(e=(r/this._msFrameCount).toFixed(2)),this._msText.nodeValue=`${e} MS`,this._lastMsSampleTime=t,this._msFrameCount=0}},s2e.prototype.destroy=function(){return Wc(this)};var c2e=s2e;function l2e(){this._framebuffer=new N8,this._textureToCopy=void 0,this._copyDepthCommand=void 0}function u2e(e,t,n){const i=n.width,o=n.height;e._framebuffer.update(t,i,o)}function h2e(e,t,n){if(!Object(r["a"])(e._copyDepthCommand)){const n="uniform highp sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    gl_FragColor = czm_packDepth(texture2D(u_texture, v_textureCoordinates).r);\n}\n";e._copyDepthCommand=t.createViewportQuadCommand(n,{renderState:UF.fromCache(),uniformMap:{u_texture:function(){return e._textureToCopy}},owner:e})}e._textureToCopy=n,e._copyDepthCommand.framebuffer=e.framebuffer}Object.defineProperties(l2e.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),l2e.prototype.update=function(e,t){u2e(this,e,t),h2e(this,e,t)};const d2e=new be,f2e=new be(1,1/255,1/65025,1/16581375);l2e.prototype.getDepth=function(e,t,n){if(!Object(r["a"])(this.framebuffer))return;const i=e.readPixels({x:t,y:n,width:1,height:1,framebuffer:this.framebuffer}),o=be.unpack(i,0,d2e);return be.divideByScalar(o,255,o),be.dot(o,f2e)},l2e.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},l2e.prototype.isDestroyed=function(){return!1},l2e.prototype.destroy=function(){return this._framebuffer.destroy(),Object(r["a"])(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=Object(r["a"])(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),Wc(this)};var p2e=l2e;function m2e(){this._framebuffer=new N8({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}function _2e(e){e._framebuffer.destroy()}function g2e(e,t){const n=t.drawingBufferWidth,i=t.drawingBufferHeight;e._framebuffer.update(t,n,i);const o=new zze(t);o.blendingEnabled=!1,o.scissorTest={enabled:!0,rectangle:new Au},o.viewport=new Au,e._passState=o}Object.defineProperties(m2e.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),m2e.prototype.update=function(e,t,n){const i=n.width,o=n.height;this._framebuffer.isDirty(i,o)&&g2e(this,e);const r=this.framebuffer,a=this._passState;return a.framebuffer=r,a.viewport.width=i,a.viewport.height=o,a.scissorTest.rectangle.x=t.x,a.scissorTest.rectangle.y=o-t.y,a.scissorTest.rectangle.width=1,a.scissorTest.rectangle.height=1,a},m2e.prototype.isDestroyed=function(){return!1},m2e.prototype.destroy=function(){return _2e(this),Wc(this)};var b2e=m2e;function y2e(e){const t=new zze(e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new Au},t.viewport=new Au,this._context=e,this._fb=new N8({depthStencil:!0}),this._passState=t,this._width=0,this._height=0}y2e.prototype.begin=function(e,t){const n=this._context,i=t.width,o=t.height;return Au.clone(e,this._passState.scissorTest.rectangle),this._width=i,this._height=o,this._fb.update(n,i,o),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=i,this._passState.viewport.height=o,this._passState};const v2e=new Dm;y2e.prototype.end=function(e){const t=Object(o["a"])(e.width,1),n=Object(o["a"])(e.height,1),i=this._context,a=i.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),s=Math.max(t,n),c=s*s,l=Math.floor(.5*t),u=Math.floor(.5*n);let h=0,d=0,f=0,p=-1;for(let o=0;o<c;++o){if(-l<=h&&h<=l&&-u<=d&&d<=u){const e=4*((u-d)*t+h+l);v2e.red=Dm.byteToFloat(a[e]),v2e.green=Dm.byteToFloat(a[e+1]),v2e.blue=Dm.byteToFloat(a[e+2]),v2e.alpha=Dm.byteToFloat(a[e+3]);const n=i.getObjectByPickColor(v2e);if(Object(r["a"])(n))return n}if(h===d||h<0&&-h===d||h>0&&h===1-d){const e=f;f=-p,p=e}h+=f,d+=p}},y2e.prototype.isDestroyed=function(){return!1},y2e.prototype.destroy=function(){return this._fb.destroy(),Wc(this)};var O2e=y2e;function A2e(){this._numSamples=1,this._colorFramebuffer=new N8({depthStencil:!0,supportsDepthTexture:!0}),this._idFramebuffer=new N8({depthStencil:!0,supportsDepthTexture:!0}),this._idClearColor=new Dm(0,0,0,0),this._clearCommand=new xX({color:new Dm(0,0,0,0),depth:1,owner:this})}function w2e(e){e._colorFramebuffer.destroy(),e._idFramebuffer.destroy()}Object.defineProperties(A2e.prototype,{framebuffer:{get:function(){return this._colorFramebuffer.framebuffer}},idFramebuffer:{get:function(){return this._idFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._colorFramebuffer.getDepthStencilTexture()}}}),A2e.prototype.update=function(e,t,n,i){const o=t.width,r=t.height,a=n?e.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT:hx.UNSIGNED_BYTE;this._numSamples=i,this._colorFramebuffer.update(e,o,r,i,a),this._idFramebuffer.update(e,o,r)},A2e.prototype.clear=function(e,t,n){Dm.clone(n,this._clearCommand.color),Dm.clone(this._idClearColor,this._clearCommand.color),this._colorFramebuffer.clear(e,this._clearCommand,t),this._idFramebuffer.clear(e,this._clearCommand,t)},A2e.prototype.getFramebuffer=function(){return this._colorFramebuffer.framebuffer},A2e.prototype.getIdFramebuffer=function(){return this._idFramebuffer.framebuffer},A2e.prototype.prepareColorTextures=function(e){this._numSamples>1&&this._colorFramebuffer.prepareTextures(e)},A2e.prototype.isDestroyed=function(){return!1},A2e.prototype.destroy=function(){return w2e(this),Wc(this)};var T2e=A2e;function C2e(){}C2e.getShadowCastShaderKeyword=function(e,t,n,i){return`castShadow ${e} ${t} ${n} ${i}`},C2e.createShadowCastVertexShader=function(e,t,n){const i=e.defines.slice(0),o=e.sources.slice(0);i.push("SHADOW_MAP"),n&&i.push("GENERATE_POSITION");const a=EV.findPositionVarying(e),s=Object(r["a"])(a);if(t&&!s){const e=o.length;for(let n=0;n<e;++n)o[n]=EV.replaceMain(o[n],"czm_shadow_cast_main");const t="varying vec3 v_positionEC; \nvoid main() \n{ \n    czm_shadow_cast_main(); \n    v_positionEC = (czm_inverseProjection * gl_Position).xyz; \n}";o.push(t)}return new EV({defines:i,sources:o})},C2e.createShadowCastFragmentShader=function(e,t,n,i){const o=e.defines.slice(0),a=e.sources.slice(0);o.push("SHADOW_MAP");let s=EV.findPositionVarying(e);const c=Object(r["a"])(s);c||(s="v_positionEC");const l=a.length;for(let r=0;r<l;++r)a[r]=EV.replaceMain(a[r],"czm_shadow_cast_main");let u="";return t&&(c||(u+="varying vec3 v_positionEC; \n"),u+="uniform vec4 shadowMap_lightPositionEC; \n"),u+=i?"void main() \n{ \n":"void main() \n{ \n    czm_shadow_cast_main(); \n    if (gl_FragColor.a == 0.0) \n    { \n       discard; \n    } \n",u+=t?`    float distance = length(${s}); \n`+"    if (distance >= shadowMap_lightPositionEC.w) \n    { \n        discard; \n    } \n    distance /= shadowMap_lightPositionEC.w; // radius \n    gl_FragColor = czm_packDepth(distance); \n":n?"    gl_FragColor = vec4(1.0); \n":"    gl_FragColor = czm_packDepth(gl_FragCoord.z); \n",u+="} \n",a.push(u),new EV({defines:o,sources:a})},C2e.getShadowReceiveShaderKeyword=function(e,t,n,i){const o=e._usesDepthTexture,r=e._polygonOffsetSupported,a=e._isPointLight,s=e._isSpotLight,c=e._numberOfCascades>1,l=e.debugCascadeColors,u=e.softShadows;return`receiveShadow ${o}${r}${a}${s}${c}${l}${u}${t}${n}${i}`},C2e.createShadowReceiveVertexShader=function(e,t,n){const i=e.defines.slice(0),o=e.sources.slice(0);return i.push("SHADOW_MAP"),t&&(n?i.push("GENERATE_POSITION_AND_NORMAL"):i.push("GENERATE_POSITION")),new EV({defines:i,sources:o})},C2e.createShadowReceiveFragmentShader=function(e,t,n,i,o){const a=EV.findNormalVarying(e),s=!i&&Object(r["a"])(a)||i&&o,c=EV.findPositionVarying(e),l=Object(r["a"])(c),u=t._usesDepthTexture,h=t._polygonOffsetSupported,d=t._isPointLight,f=t._isSpotLight,p=t._numberOfCascades>1,m=t.debugCascadeColors,_=t.softShadows,g=d?t._pointBias:i?t._terrainBias:t._primitiveBias,b=e.defines.slice(0),y=e.sources.slice(0),v=y.length;for(let r=0;r<v;++r)y[r]=EV.replaceMain(y[r],"czm_shadow_receive_main");d?b.push("USE_CUBE_MAP_SHADOW"):u&&b.push("USE_SHADOW_DEPTH_TEXTURE"),_&&!d&&b.push("USE_SOFT_SHADOWS"),p&&n&&i&&(s?b.push("ENABLE_VERTEX_LIGHTING"):b.push("ENABLE_DAYNIGHT_SHADING")),n&&g.normalShading&&s&&(b.push("USE_NORMAL_SHADING"),g.normalShadingSmooth>0&&b.push("USE_NORMAL_SHADING_SMOOTH"));let O,A="";return A+=d?"uniform samplerCube shadowMap_textureCube; \n":"uniform sampler2D shadowMap_texture; \n",O=l?`    return vec4(${c}, 1.0); \n`:"#ifndef LOG_DEPTH \n    return czm_windowToEyeCoordinates(gl_FragCoord); \n#else \n    return vec4(v_logPositionEC, 1.0); \n#endif \n",A+=`uniform mat4 shadowMap_matrix; \nuniform vec3 shadowMap_lightDirectionEC; \nuniform vec4 shadowMap_lightPositionEC; \nuniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness; \nuniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth; \n#ifdef LOG_DEPTH \nvarying vec3 v_logPositionEC; \n#endif \nvec4 getPositionEC() \n{ \n${O}} \n`+"vec3 getNormalEC() \n"+`{ \n${s?`    return normalize(${a}); \n`:"    return vec3(1.0); \n"}} \n`+"void applyNormalOffset(inout vec4 positionEC, vec3 normalEC, float nDotL) \n"+`{ \n${g.normalOffset&&s?"    float normalOffset = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.x; \n    float normalOffsetScale = 1.0 - nDotL; \n    vec3 offset = normalOffset * normalOffsetScale * normalEC; \n    positionEC.xyz += offset; \n":""}} \n`,A+="void main() \n{ \n    czm_shadow_receive_main(); \n    vec4 positionEC = getPositionEC(); \n    vec3 normalEC = getNormalEC(); \n    float depth = -positionEC.z; \n",A+="    czm_shadowParameters shadowParameters; \n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy; \n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z; \n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w; \n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w; \n",i?A+="    shadowParameters.depthBias *= max(depth * 0.01, 1.0); \n":h||(A+="    shadowParameters.depthBias *= mix(1.0, 100.0, depth * 0.0015); \n"),A+=d?"    vec3 directionEC = positionEC.xyz - shadowMap_lightPositionEC.xyz; \n    float distance = length(directionEC); \n    directionEC = normalize(directionEC); \n    float radius = shadowMap_lightPositionEC.w; \n    // Stop early if the fragment is beyond the point light radius \n    if (distance > radius) \n    { \n        return; \n    } \n    vec3 directionWC  = czm_inverseViewRotation * directionEC; \n    shadowParameters.depth = distance / radius; \n    shadowParameters.nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    shadowParameters.texCoords = directionWC; \n    float visibility = czm_shadowVisibility(shadowMap_textureCube, shadowParameters); \n":f?"    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz); \n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Spot light uses a perspective projection, so perform the perspective divide \n    shadowPosition /= shadowPosition.w; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n":p?`    float maxDepth = shadowMap_cascadeSplits[1].w; \n    // Stop early if the eye depth exceeds the last cascade \n    if (depth > maxDepth) \n    { \n        return; \n    } \n    // Get the cascade based on the eye-space depth \n    vec4 weights = czm_cascadeWeights(depth); \n    // Apply normal offset \n    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    // Transform position into the cascade \n    vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC; \n    // Get visibility \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n    // Fade out shadows that are far away \n    float shadowMapMaximumDistance = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.z; \n    float fade = max((depth - shadowMapMaximumDistance * 0.8) / (shadowMapMaximumDistance * 0.2), 0.0); \n    visibility = mix(visibility, 1.0, fade); \n${m?"    // Draw cascade colors for debugging \n    gl_FragColor *= czm_cascadeColor(weights); \n":""}`:"    float nDotL = clamp(dot(normalEC, shadowMap_lightDirectionEC), 0.0, 1.0); \n    applyNormalOffset(positionEC, normalEC, nDotL); \n    vec4 shadowPosition = shadowMap_matrix * positionEC; \n    // Stop early if the fragment is not in the shadow bounds \n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) \n    { \n        return; \n    } \n    shadowParameters.texCoords = shadowPosition.xy; \n    shadowParameters.depth = shadowPosition.z; \n    shadowParameters.nDotL = nDotL; \n    float visibility = czm_shadowVisibility(shadowMap_texture, shadowParameters); \n",A+="    gl_FragColor.rgb *= visibility; \n} \n",y.push(A),new EV({defines:b,sources:y})};var E2e=C2e;function x2e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.context;if(!Object(r["a"])(t))throw new a["a"]("context is required.");if(!Object(r["a"])(e.lightCamera))throw new a["a"]("lightCamera is required.");if(Object(r["a"])(e.numberOfCascades)&&1!==e.numberOfCascades&&4!==e.numberOfCascades)throw new a["a"]("Only one or four cascades are supported.");this._enabled=Object(o["a"])(e.enabled,!0),this._softShadows=Object(o["a"])(e.softShadows,!1),this._normalOffset=Object(o["a"])(e.normalOffset,!0),this.dirty=!0,this.fromLightSource=Object(o["a"])(e.fromLightSource,!0),this.darkness=Object(o["a"])(e.darkness,.3),this._darkness=this.darkness,this.fadingEnabled=Object(o["a"])(e.fadingEnabled,!0),this.maximumDistance=Object(o["a"])(e.maximumDistance,5e3),this._outOfView=!1,this._outOfViewPrevious=!1,this._needsUpdate=!0;let n,i=!0;(Or.isInternetExplorer()||Or.isEdge()||(Or.isChrome()||Or.isFirefox())&&Or.isWindows()&&!t.depthTexture)&&(i=!1),this._polygonOffsetSupported=i,this._terrainBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.5,normalShading:!0,normalShadingSmooth:.3,depthBias:1e-4},this._primitiveBias={polygonOffset:i,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:.1,normalShading:!0,normalShadingSmooth:.05,depthBias:2e-5},this._pointBias={polygonOffset:!1,polygonOffsetFactor:1.1,polygonOffsetUnits:4,normalOffset:this._normalOffset,normalOffsetScale:0,normalShading:!0,normalShadingSmooth:.1,depthBias:5e-4},this._depthAttachment=void 0,this._colorAttachment=void 0,this._shadowMapMatrix=new Me,this._shadowMapTexture=void 0,this._lightDirectionEC=new g,this._lightPositionEC=new be,this._distance=0,this._lightCamera=e.lightCamera,this._shadowMapCamera=new $2e,this._shadowMapCullingVolume=void 0,this._sceneCamera=void 0,this._boundingSphere=new Tt,this._isPointLight=Object(o["a"])(e.isPointLight,!1),this._pointLightRadius=Object(o["a"])(e.pointLightRadius,100),this._cascadesEnabled=!this._isPointLight&&Object(o["a"])(e.cascadesEnabled,!0),this._numberOfCascades=this._cascadesEnabled?Object(o["a"])(e.numberOfCascades,4):0,this._fitNearFar=!0,this._maximumCascadeDistances=[25,150,700,Number.MAX_VALUE],this._textureSize=new Gt,this._isSpotLight=!1,this._cascadesEnabled?this._shadowMapCamera.frustum=new EO:Object(r["a"])(this._lightCamera.frustum.fov)&&(this._isSpotLight=!0),this._cascadeSplits=[new be,new be],this._cascadeMatrices=[new Me,new Me,new Me,new Me],this._cascadeDistances=new be,n=this._isPointLight?6:this._cascadesEnabled?this._numberOfCascades:1,this._passes=new Array(n);for(let o=0;o<n;++o)this._passes[o]=new S2e(t);this.debugShow=!1,this.debugFreezeFrame=!1,this._debugFreezeFrame=!1,this._debugCascadeColors=!1,this._debugLightFrustum=void 0,this._debugCameraFrustum=void 0,this._debugCascadeFrustums=new Array(this._numberOfCascades),this._debugShadowViewCommand=void 0,this._usesDepthTexture=t.depthTexture,this._isPointLight&&(this._usesDepthTexture=!1),this._primitiveRenderState=void 0,this._terrainRenderState=void 0,this._pointRenderState=void 0,D2e(this),this._clearCommand=new xX({depth:1,color:new Dm}),this._clearPassState=new zze(t),this._size=Object(o["a"])(e.size,2048),this.size=this._size}function S2e(e){this.camera=new $2e,this.passState=new zze(e),this.framebuffer=void 0,this.textureOffsets=void 0,this.commandList=[],this.cullingVolume=void 0}function I2e(e,t){return UF.fromCache({cull:{enabled:!0,face:HN.BACK},depthTest:{enabled:!0},colorMask:{red:e,green:e,blue:e,alpha:e},depthMask:!0,polygonOffset:{enabled:t.polygonOffset,factor:t.polygonOffsetFactor,units:t.polygonOffsetUnits}})}function D2e(e){const t=!e._usesDepthTexture;e._primitiveRenderState=I2e(t,e._primitiveBias),e._terrainRenderState=I2e(t,e._terrainBias),e._pointRenderState=I2e(t,e._pointBias)}function P2e(e){const t=e._passes.length;for(let n=0;n<t;++n){const t=e._passes[n],i=t.framebuffer;Object(r["a"])(i)&&!i.isDestroyed()&&i.destroy(),t.framebuffer=void 0}e._depthAttachment=e._depthAttachment&&e._depthAttachment.destroy(),e._colorAttachment=e._colorAttachment&&e._colorAttachment.destroy()}function j2e(e,t){const n=new L8({context:t,width:e._textureSize.x,height:e._textureSize.y,format:j8.DEPTH_COMPONENT16}),i=new lB({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,sampler:rB.NEAREST}),o=new S8({context:t,depthRenderbuffer:n,colorTextures:[i],destroyAttachments:!1}),r=e._passes.length;for(let a=0;a<r;++a){const t=e._passes[a];t.framebuffer=o,t.passState.framebuffer=o}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}function R2e(e,t){const n=new lB({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:fx.DEPTH_STENCIL,pixelDatatype:hx.UNSIGNED_INT_24_8,sampler:rB.NEAREST}),i=new S8({context:t,depthStencilTexture:n,destroyAttachments:!1}),o=e._passes.length;for(let r=0;r<o;++r){const t=e._passes[r];t.framebuffer=i,t.passState.framebuffer=i}e._shadowMapTexture=n,e._depthAttachment=n}function L2e(e,t){const n=new L8({context:t,width:e._textureSize.x,height:e._textureSize.y,format:j8.DEPTH_COMPONENT16}),i=new sB({context:t,width:e._textureSize.x,height:e._textureSize.y,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,sampler:rB.NEAREST}),o=[i.negativeX,i.negativeY,i.negativeZ,i.positiveX,i.positiveY,i.positiveZ];for(let r=0;r<6;++r){const i=new S8({context:t,depthRenderbuffer:n,colorTextures:[o[r]],destroyAttachments:!1}),a=e._passes[r];a.framebuffer=i,a.passState.framebuffer=i}e._shadowMapTexture=i,e._depthAttachment=n,e._colorAttachment=i}function M2e(e,t){e._isPointLight?L2e(e,t):e._usesDepthTexture?R2e(e,t):j2e(e,t)}function N2e(e,t){e._usesDepthTexture&&e._passes[0].framebuffer.status!==Ys.FRAMEBUFFER_COMPLETE&&(e._usesDepthTexture=!1,D2e(e),P2e(e),M2e(e,t))}function B2e(e,t){Object(r["a"])(e._passes[0].framebuffer)&&e._shadowMapTexture.width===e._textureSize.x||(P2e(e),M2e(e,t),N2e(e,t),F2e(e,t))}function F2e(e,t,n){n=Object(o["a"])(n,0),(e._isPointLight||0===n)&&(e._clearCommand.framebuffer=e._passes[n].framebuffer,e._clearCommand.execute(t,e._clearPassState))}function z2e(e,t){e._size=t;const n=e._passes,i=n.length,o=e._textureSize;if(e._isPointLight){t=YN.maximumCubeMapSize>=t?t:YN.maximumCubeMapSize,o.x=t,o.y=t;const e=new Au(0,0,t,t);n[0].passState.viewport=e,n[1].passState.viewport=e,n[2].passState.viewport=e,n[3].passState.viewport=e,n[4].passState.viewport=e,n[5].passState.viewport=e}else 1===i?(t=YN.maximumTextureSize>=t?t:YN.maximumTextureSize,o.x=t,o.y=t,n[0].passState.viewport=new Au(0,0,t,t)):4===i&&(t=YN.maximumTextureSize>=2*t?t:YN.maximumTextureSize/2,o.x=2*t,o.y=2*t,n[0].passState.viewport=new Au(0,0,t,t),n[1].passState.viewport=new Au(t,0,t,t),n[2].passState.viewport=new Au(0,t,t,t),n[3].passState.viewport=new Au(t,t,t,t));e._clearPassState.viewport=new Au(0,0,o.x,o.y);for(let r=0;r<i;++r){const e=n[r],t=e.passState.viewport,i=t.x/o.x,a=t.y/o.y,s=t.width/o.x,c=t.height/o.y;e.textureOffsets=new Me(s,0,0,i,0,c,0,a,0,0,1,0,0,0,0,1)}}x2e.MAXIMUM_DISTANCE=2e4,x2e.prototype.debugCreateRenderStates=function(){D2e(this)},Object.defineProperties(x2e.prototype,{enabled:{get:function(){return this._enabled},set:function(e){this.dirty=this._enabled!==e,this._enabled=e}},normalOffset:{get:function(){return this._normalOffset},set:function(e){this.dirty=this._normalOffset!==e,this._normalOffset=e,this._terrainBias.normalOffset=e,this._primitiveBias.normalOffset=e,this._pointBias.normalOffset=e}},softShadows:{get:function(){return this._softShadows},set:function(e){this.dirty=this._softShadows!==e,this._softShadows=e}},size:{get:function(){return this._size},set:function(e){z2e(this,e)}},outOfView:{get:function(){return this._outOfView}},shadowMapCullingVolume:{get:function(){return this._shadowMapCullingVolume}},passes:{get:function(){return this._passes}},isPointLight:{get:function(){return this._isPointLight}},debugCascadeColors:{get:function(){return this._debugCascadeColors},set:function(e){this.dirty=this._debugCascadeColors!==e,this._debugCascadeColors=e}}});const k2e=new Au;function U2e(e,t){let n;n=e._isPointLight?"uniform samplerCube shadowMap_textureCube; \nvarying vec2 v_textureCoordinates; \nvoid main() \n{ \n    vec2 uv = v_textureCoordinates; \n    vec3 dir; \n \n    if (uv.y < 0.5) \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = -1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = -1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 1.0; \n        } \n        else \n        { \n            dir.z = -1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 1.0; \n        } \n    } \n    else \n    { \n        if (uv.x < 0.333) \n        { \n            dir.x = 1.0; \n            dir.y = uv.x * 6.0 - 1.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else if (uv.x < 0.666) \n        { \n            dir.y = 1.0; \n            dir.x = uv.x * 6.0 - 3.0; \n            dir.z = uv.y * 4.0 - 3.0; \n        } \n        else \n        { \n            dir.z = 1.0; \n            dir.x = uv.x * 6.0 - 5.0; \n            dir.y = uv.y * 4.0 - 3.0; \n        } \n    } \n \n    float shadow = czm_unpackDepth(textureCube(shadowMap_textureCube, dir)); \n    gl_FragColor = vec4(vec3(shadow), 1.0); \n} \n":`uniform sampler2D shadowMap_texture; \nvarying vec2 v_textureCoordinates; \nvoid main() \n{ \n${e._usesDepthTexture?"    float shadow = texture2D(shadowMap_texture, v_textureCoordinates).r; \n":"    float shadow = czm_unpackDepth(texture2D(shadowMap_texture, v_textureCoordinates)); \n"}    gl_FragColor = vec4(vec3(shadow), 1.0); \n`+"} \n";const i=t.createViewportQuadCommand(n,{uniformMap:{shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture}}});return i.pass=hF.OVERLAY,i}function V2e(e,t){const n=t.context,i=t.context.drawingBufferWidth,o=t.context.drawingBufferHeight,a=.3*Math.min(i,o),s=k2e;s.x=i-a,s.y=0,s.width=a,s.height=a;let c=e._debugShadowViewCommand;Object(r["a"])(c)||(c=U2e(e,n),e._debugShadowViewCommand=c),Object(r["a"])(c.renderState)&&Au.equals(c.renderState.viewport,s)||(c.renderState=UF.fromCache({viewport:Au.clone(s)})),t.commandList.push(e._debugShadowViewCommand)}const H2e=new Array(8);H2e[0]=new be(-1,-1,-1,1),H2e[1]=new be(1,-1,-1,1),H2e[2]=new be(1,1,-1,1),H2e[3]=new be(-1,1,-1,1),H2e[4]=new be(-1,-1,1,1),H2e[5]=new be(1,-1,1,1),H2e[6]=new be(1,1,1,1),H2e[7]=new be(-1,1,1,1);const G2e=new Me,W2e=new Array(8);for(let Set=0;Set<8;++Set)W2e[Set]=new be;function q2e(e,t){const n=new Sd({geometry:new ah({minimum:new g(-.5,-.5,-.5),maximum:new g(.5,.5,.5)}),attributes:{color:jm.fromColor(t)}}),i=new Sd({geometry:new cR({radius:.5}),attributes:{color:jm.fromColor(t)}});return new EG({geometryInstances:[n,i],appearance:new nF({translucent:!1,flat:!0}),asynchronous:!1,modelMatrix:e})}const Y2e=[Dm.RED,Dm.GREEN,Dm.BLUE,Dm.MAGENTA],X2e=new g;function K2e(e,t){V2e(e,t);const n=e.debugFreezeFrame&&!e._debugFreezeFrame;if(e._debugFreezeFrame=e.debugFreezeFrame,e.debugFreezeFrame&&(n&&(e._debugCameraFrustum=e._debugCameraFrustum&&e._debugCameraFrustum.destroy(),e._debugCameraFrustum=new Mqe({camera:e._sceneCamera,color:Dm.CYAN,updateOnChange:!1})),e._debugCameraFrustum.update(t)),e._cascadesEnabled){if(e.debugFreezeFrame){n&&(e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=new Mqe({camera:e._shadowMapCamera,color:Dm.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t);for(let i=0;i<e._numberOfCascades;++i)n&&(e._debugCascadeFrustums[i]=e._debugCascadeFrustums[i]&&e._debugCascadeFrustums[i].destroy(),e._debugCascadeFrustums[i]=new Mqe({camera:e._passes[i].camera,color:Y2e[i],updateOnChange:!1})),e._debugCascadeFrustums[i].update(t)}}else if(e._isPointLight){if(!Object(r["a"])(e._debugLightFrustum)||e._needsUpdate){const t=e._shadowMapCamera.positionWC,n=Kr.IDENTITY,i=2*e._pointLightRadius,o=g.fromElements(i,i,i,X2e),r=Me.fromTranslationQuaternionRotationScale(t,n,o,G2e);e._debugLightFrustum=e._debugLightFrustum&&e._debugLightFrustum.destroy(),e._debugLightFrustum=q2e(r,Dm.YELLOW)}e._debugLightFrustum.update(t)}else Object(r["a"])(e._debugLightFrustum)&&!e._needsUpdate||(e._debugLightFrustum=new Mqe({camera:e._shadowMapCamera,color:Dm.YELLOW,updateOnChange:!1})),e._debugLightFrustum.update(t)}function $2e(){this.viewMatrix=new Me,this.inverseViewMatrix=new Me,this.frustum=void 0,this.positionCartographic=new I,this.positionWC=new g,this.directionWC=g.clone(g.UNIT_Z),this.upWC=g.clone(g.UNIT_Y),this.rightWC=g.clone(g.UNIT_X),this.viewProjectionMatrix=new Me}$2e.prototype.clone=function(e){Me.clone(e.viewMatrix,this.viewMatrix),Me.clone(e.inverseViewMatrix,this.inverseViewMatrix),this.frustum=e.frustum.clone(this.frustum),I.clone(e.positionCartographic,this.positionCartographic),g.clone(e.positionWC,this.positionWC),g.clone(e.directionWC,this.directionWC),g.clone(e.upWC,this.upWC),g.clone(e.rightWC,this.rightWC)};const J2e=new Me(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);$2e.prototype.getViewProjection=function(){const e=this.viewMatrix,t=this.frustum.projectionMatrix;return Me.multiply(t,e,this.viewProjectionMatrix),Me.multiply(J2e,this.viewProjectionMatrix,this.viewProjectionMatrix),this.viewProjectionMatrix};const Q2e=new Array(5),Z2e=new zO,e3e=new Array(4),t3e=new g,n3e=new g;function i3e(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=i.frustum.near,r=i.frustum.far,a=e._numberOfCascades;let c;const l=r-o,u=r/o;let h=.9,d=!1;t.shadowState.closestObjectSize<200&&(d=!0,h=.9);const f=e3e,p=Q2e;for(p[0]=o,p[a]=r,c=0;c<a;++c){const e=(c+1)/a,t=o*Math.pow(u,e),n=o+l*e,i=s["a"].lerp(n,t,h);p[c+1]=i,f[c]=i-p[c]}if(d){for(c=0;c<a;++c)f[c]=Math.min(f[c],e._maximumCascadeDistances[c]);let t=p[0];for(c=0;c<a-1;++c)t+=f[c],p[c+1]=t}be.unpack(p,0,e._cascadeSplits[0]),be.unpack(p,1,e._cascadeSplits[1]),be.unpack(f,0,e._cascadeDistances);const m=n.frustum,_=m.left,b=m.right,y=m.bottom,v=m.top,O=m.near,A=m.far,w=n.positionWC,T=n.directionWC,C=n.upWC,E=i.frustum.clone(Z2e),x=n.getViewProjection();for(c=0;c<a;++c){E.near=p[c],E.far=p[c+1];const t=Me.multiply(E.projectionMatrix,i.viewMatrix,G2e),o=Me.inverse(t,G2e),r=Me.multiply(x,o,G2e),a=g.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,t3e),s=g.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,n3e);for(let e=0;e<8;++e){const t=be.clone(H2e[e],W2e[e]);Me.multiplyByVector(r,t,t),g.divideByScalar(t,t.w,t),g.minimumByComponent(t,a,a),g.maximumByComponent(t,s,s)}a.x=Math.max(a.x,0),a.y=Math.max(a.y,0),a.z=0,s.x=Math.min(s.x,1),s.y=Math.min(s.y,1),s.z=Math.min(s.z,1);const l=e._passes[c],u=l.camera;u.clone(n);const h=u.frustum;h.left=_+a.x*(b-_),h.right=_+s.x*(b-_),h.bottom=y+a.y*(v-y),h.top=y+s.y*(v-y),h.near=O+a.z*(A-O),h.far=O+s.z*(A-O),l.cullingVolume=u.frustum.computeCullingVolume(w,T,C);const d=e._cascadeMatrices[c];Me.multiply(u.getViewProjection(),i.inverseViewMatrix,d),Me.multiply(l.textureOffsets,d,d)}}const o3e=new Me,r3e=new g,a3e=new g,s3e=new g;function c3e(e,t){const n=e._shadowMapCamera,i=e._sceneCamera,o=Me.multiply(i.frustum.projectionMatrix,i.viewMatrix,G2e),r=Me.inverse(o,G2e),a=n.directionWC;let c=i.directionWC;g.equalsEpsilon(a,c,s["a"].EPSILON10)&&(c=i.upWC);const l=g.cross(a,c,r3e);c=g.cross(l,a,a3e),g.normalize(c,c),g.normalize(l,l);const u=g.fromElements(0,0,0,s3e);let h=Me.computeView(u,a,c,l,o3e);const d=Me.multiply(h,r,G2e),f=g.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,t3e),p=g.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,n3e);for(let s=0;s<8;++s){const e=be.clone(H2e[s],W2e[s]);Me.multiplyByVector(d,e,e),g.divideByScalar(e,e.w,e),g.minimumByComponent(e,f,f),g.maximumByComponent(e,p,p)}p.z+=1e3,f.z-=10;const m=s3e;m.x=-.5*(f.x+p.x),m.y=-.5*(f.y+p.y),m.z=-p.z;const _=Me.fromTranslation(m,G2e);h=Me.multiply(_,h,h);const b=.5*(p.x-f.x),y=.5*(p.y-f.y),v=p.z-f.z,O=n.frustum;O.left=-b,O.right=b,O.bottom=-y,O.top=y,O.near=.01,O.far=v,Me.clone(h,n.viewMatrix),Me.inverse(h,n.inverseViewMatrix),Me.getTranslation(n.inverseViewMatrix,n.positionWC),t.mapProjection.ellipsoid.cartesianToCartographic(n.positionWC,n.positionCartographic),g.clone(a,n.directionWC),g.clone(c,n.upWC),g.clone(l,n.rightWC)}const l3e=[new g(-1,0,0),new g(0,-1,0),new g(0,0,-1),new g(1,0,0),new g(0,1,0),new g(0,0,1)],u3e=[new g(0,-1,0),new g(0,0,-1),new g(0,-1,0),new g(0,-1,0),new g(0,0,1),new g(0,-1,0)],h3e=[new g(0,0,1),new g(1,0,0),new g(-1,0,0),new g(0,0,-1),new g(1,0,0),new g(1,0,0)];function d3e(e,t){const n=new zO;n.fov=s["a"].PI_OVER_TWO,n.near=1,n.far=e._pointLightRadius,n.aspectRatio=1;for(let i=0;i<6;++i){const o=e._passes[i].camera;o.positionWC=e._shadowMapCamera.positionWC,o.positionCartographic=t.mapProjection.ellipsoid.cartesianToCartographic(o.positionWC,o.positionCartographic),o.directionWC=l3e[i],o.upWC=u3e[i],o.rightWC=h3e[i],Me.computeView(o.positionWC,o.directionWC,o.upWC,o.rightWC,o.viewMatrix),Me.inverse(o.viewMatrix,o.inverseViewMatrix),o.frustum=n}}const f3e=new g,p3e=new g,m3e=new Tt,_3e=m3e.center;function g3e(e,t){const n=e._sceneCamera,i=e._shadowMapCamera,o=m3e;if(e._cascadesEnabled){if(n.frustum.near>=e.maximumDistance)return e._outOfView=!0,void(e._needsUpdate=!1);const o=t.mapProjection.ellipsoid.geodeticSurfaceNormal(n.positionWC,f3e),r=g.negate(i.directionWC,p3e),a=g.dot(o,r);if(e.fadingEnabled){const t=s["a"].clamp(a/.1,0,1);e._darkness=s["a"].lerp(1,e.darkness,t)}else e._darkness=e.darkness;if(a<0)return e._outOfView=!0,void(e._needsUpdate=!1);e._needsUpdate=!0,e._outOfView=!1}else if(e._isPointLight)o.center=i.positionWC,o.radius=e._pointLightRadius,e._outOfView=t.cullingVolume.computeVisibility(o)===G.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(o),Tt.clone(o,e._boundingSphere);else{const n=i.frustum.far/2,r=g.add(i.positionWC,g.multiplyByScalar(i.directionWC,n,_3e),_3e);o.center=r,o.radius=n,e._outOfView=t.cullingVolume.computeVisibility(o)===G.OUTSIDE,e._needsUpdate=!e._outOfView&&!e._boundingSphere.equals(o),Tt.clone(o,e._boundingSphere)}}function b3e(e,t){const n=t.camera,i=e._lightCamera,o=e._sceneCamera,r=e._shadowMapCamera;e._cascadesEnabled?g.clone(i.directionWC,r.directionWC):e._isPointLight?g.clone(i.positionWC,r.positionWC):r.clone(i);const a=e._lightDirectionEC;let s,c;Me.multiplyByPointAsVector(n.viewMatrix,r.directionWC,a),g.normalize(a,a),g.negate(a,a),Me.multiplyByPoint(n.viewMatrix,r.positionWC,e._lightPositionEC),e._lightPositionEC.w=e._pointLightRadius,e._fitNearFar?(s=Math.min(t.shadowState.nearPlane,e.maximumDistance),c=Math.min(t.shadowState.farPlane,e.maximumDistance),c=Math.max(c,s+1)):(s=n.frustum.near,c=e.maximumDistance),e._sceneCamera=IGe.clone(n,o),n.frustum.clone(e._sceneCamera.frustum),e._sceneCamera.frustum.near=s,e._sceneCamera.frustum.far=c,e._distance=c-s,g3e(e,t),!e._outOfViewPrevious&&e._outOfView&&(e._needsUpdate=!0),e._outOfViewPrevious=e._outOfView}x2e.prototype.update=function(e){if(b3e(this,e),this._needsUpdate)if(B2e(this,e.context),this._isPointLight&&d3e(this,e),this._cascadesEnabled&&(c3e(this,e),this._numberOfCascades>1&&i3e(this,e)),this._isPointLight)this._shadowMapCullingVolume=av.fromBoundingSphere(this._boundingSphere);else{const e=this._shadowMapCamera,t=e.positionWC,n=e.directionWC,i=e.upWC;this._shadowMapCullingVolume=e.frustum.computeCullingVolume(t,n,i),1===this._passes.length&&this._passes[0].camera.clone(e)}if(1===this._passes.length){const e=this._sceneCamera.inverseViewMatrix;Me.multiply(this._shadowMapCamera.getViewProjection(),e,this._shadowMapMatrix)}this.debugShow&&K2e(this,e)},x2e.prototype.updatePass=function(e,t){F2e(this,e,t)};const y3e=new Gt;function v3e(e,t,n){const i=e._isPointLight?e._pointBias:n?e._terrainBias:e._primitiveBias,o={shadowMap_texture:function(){return e._shadowMapTexture},shadowMap_textureCube:function(){return e._shadowMapTexture},shadowMap_matrix:function(){return e._shadowMapMatrix},shadowMap_cascadeSplits:function(){return e._cascadeSplits},shadowMap_cascadeMatrices:function(){return e._cascadeMatrices},shadowMap_lightDirectionEC:function(){return e._lightDirectionEC},shadowMap_lightPositionEC:function(){return e._lightPositionEC},shadowMap_cascadeDistances:function(){return e._cascadeDistances},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const t=y3e;return t.x=1/e._textureSize.x,t.y=1/e._textureSize.y,be.fromElements(t.x,t.y,i.depthBias,i.normalShadingSmooth,this.combinedUniforms1)},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){return be.fromElements(i.normalOffsetScale,e._distance,e.maximumDistance,e._darkness,this.combinedUniforms2)},combinedUniforms1:new be,combinedUniforms2:new be};return Object(qE["a"])(t,o,!1)}function O3e(e,t,n,i,o,a){let s,c,l;if(Object(r["a"])(a)&&(s=a.shaderProgram,c=a.renderState,l=a.uniformMap),a=lF.shallowClone(n,a),a.castShadows=!0,a.receiveShadows=!1,!Object(r["a"])(s)||o!==n.shaderProgram.id||t){const t=n.shaderProgram,o=n.pass===hF.GLOBE,a=n.pass!==hF.TRANSLUCENT,u=e._isPointLight,h=e._usesDepthTexture,d=E2e.getShadowCastShaderKeyword(u,o,h,a);if(s=i.shaderCache.getDerivedShaderProgram(t,d),!Object(r["a"])(s)){const e=t.vertexShaderSource,n=t.fragmentShaderSource,r=E2e.createShadowCastVertexShader(e,u,o),c=E2e.createShadowCastFragmentShader(n,u,h,a);s=i.shaderCache.createDerivedShaderProgram(t,d,{vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:t._attributeLocations})}c=e._primitiveRenderState,u?c=e._pointRenderState:o&&(c=e._terrainRenderState);const f=n.renderState.cull.enabled;f||(c=Object(RL["a"])(c,!1),c.cull=Object(RL["a"])(c.cull,!1),c.cull.enabled=!1,c=UF.fromCache(c)),l=v3e(e,n.uniformMap,o)}return a.shaderProgram=s,a.renderState=c,a.uniformMap=l,a}x2e.createReceiveDerivedCommand=function(e,t,n,i,o){Object(r["a"])(o)||(o={});const a=e.length>0,s=t.shaderProgram,c=s.vertexShaderSource,l=s.fragmentShaderSource,u=t.pass===hF.GLOBE;let h=!1;if(u&&(h=t.owner.data.renderedMesh.encoding.hasVertexNormals),t.receiveShadows&&a){let a,d;Object(r["a"])(o.receiveCommand)&&(a=o.receiveCommand.shaderProgram,d=o.receiveCommand.uniformMap),o.receiveCommand=lF.shallowClone(t,o.receiveCommand),o.castShadows=!1,o.receiveShadows=!0;const f=o.receiveShaderCastShadows!==t.castShadows,p=o.receiveShaderProgramId!==t.shaderProgram.id;if(!Object(r["a"])(a)||p||n||f){const n=E2e.getShadowReceiveShaderKeyword(e[0],t.castShadows,u,h);if(a=i.shaderCache.getDerivedShaderProgram(s,n),!Object(r["a"])(a)){const o=E2e.createShadowReceiveVertexShader(c,u,h),r=E2e.createShadowReceiveFragmentShader(l,e[0],t.castShadows,u,h);a=i.shaderCache.createDerivedShaderProgram(s,n,{vertexShaderSource:o,fragmentShaderSource:r,attributeLocations:s._attributeLocations})}d=v3e(e[0],t.uniformMap,u)}o.receiveCommand.shaderProgram=a,o.receiveCommand.uniformMap=d,o.receiveShaderProgramId=t.shaderProgram.id,o.receiveShaderCastShadows=t.castShadows}return o},x2e.createCastDerivedCommand=function(e,t,n,i,o){if(Object(r["a"])(o)||(o={}),t.castShadows){let a=o.castCommands;Object(r["a"])(a)||(a=o.castCommands=[]);const s=o.castShaderProgramId,c=e.length;a.length=c;for(let o=0;o<c;++o)a[o]=O3e(e[o],n,t,i,s,a[o]);o.castShaderProgramId=t.shaderProgram.id}return o},x2e.prototype.isDestroyed=function(){return!1},x2e.prototype.destroy=function(){P2e(this),this._debugLightFrustum=this._debugLightFrustum&&this._debugLightFrustum.destroy(),this._debugCameraFrustum=this._debugCameraFrustum&&this._debugCameraFrustum.destroy(),this._debugShadowViewCommand=this._debugShadowViewCommand&&this._debugShadowViewCommand.shaderProgram&&this._debugShadowViewCommand.shaderProgram.destroy();for(let e=0;e<this._numberOfCascades;++e)this._debugCascadeFrustums[e]=this._debugCascadeFrustums[e]&&this._debugCascadeFrustums[e].destroy();return Wc(this)};var A3e=x2e,w3e="uniform sampler2D u_opaqueDepthTexture;\nuniform sampler2D u_translucentDepthTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float opaqueDepth = texture2D(u_opaqueDepthTexture, v_textureCoordinates).r;\n    float translucentDepth = texture2D(u_translucentDepthTexture, v_textureCoordinates).r;\n    translucentDepth = czm_branchFreeTernary(translucentDepth > opaqueDepth, 1.0, translucentDepth);\n    gl_FragColor = czm_packDepth(translucentDepth);\n}\n",T3e="uniform sampler2D colorTexture;\n\n#ifdef DEBUG_SHOW_DEPTH\nuniform sampler2D u_packedTranslucentDepth;\n#endif\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n#ifdef DEBUG_SHOW_DEPTH\n    if (v_textureCoordinates.x < 0.5)\n    {\n        gl_FragColor.rgb = vec3(czm_unpackDepth(texture2D(u_packedTranslucentDepth, v_textureCoordinates)));\n        gl_FragColor.a = 1.0;\n    }\n#else\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n\n#ifdef PICK\n    if (color == vec4(0.0))\n    {\n        discard;\n    }\n#else\n    // Reverse premultiplication process to get the correct composited result of the classification primitives\n    color.rgb /= color.a;\n#endif\n    gl_FragColor = color;\n#endif\n}\n";const C3e=!1;function E3e(e){this._drawClassificationFBO=new N8({createDepthAttachments:!1}),this._accumulationFBO=new N8({createDepthAttachments:!1}),this._packFBO=new N8,this._opaqueDepthStencilTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new xX({color:new Dm(0,0,0,0),owner:this}),this._clearDepthStencilCommand=new xX({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new Au,this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function x3e(e){e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy()}function S3e(e){e._drawClassificationFBO.destroy(),e._accumulationFBO.destroy(),e._packFBO.destroy()}function I3e(e,t,n,i){x3e(e),e._translucentDepthStencilTexture=new lB({context:t,width:n,height:i,pixelFormat:fx.DEPTH_STENCIL,pixelDatatype:hx.UNSIGNED_INT_24_8,sampler:rB.NEAREST})}function D3e(e,t,n,i){S3e(e),e._drawClassificationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._drawClassificationFBO.update(t,n,i),e._accumulationFBO.setDepthStencilTexture(e._translucentDepthStencilTexture),e._accumulationFBO.update(t,n,i),e._packFBO.update(t,n,i)}function P3e(e,t,n,i){if(!e.isSupported())return;e._opaqueDepthStencilTexture=i;const o=e._opaqueDepthStencilTexture.width,a=e._opaqueDepthStencilTexture.height;let s,c;if(e._drawClassificationFBO.isDirty(o,a)&&(I3e(e,t,o,a),D3e(e,t,o,a)),Object(r["a"])(e._packDepthCommand)||(s=new EV({sources:[w3e]}),c={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(s,{uniformMap:c,owner:e})),!Object(r["a"])(e._compositeCommand)){s=new EV({sources:[T3e]}),c={colorTexture:function(){return e._textureToComposite}},C3e&&(s.defines=["DEBUG_SHOW_DEPTH"],c.u_packedTranslucentDepth=function(){return e._packFBO.getColorTexture()}),e._compositeCommand=t.createViewportQuadCommand(s,{uniformMap:c,owner:e});const n=e._compositeCommand,i=n.shaderProgram,o=t.shaderCache.createDerivedShaderProgram(i,"pick",{vertexShaderSource:i.vertexShaderSource,fragmentShaderSource:new EV({sources:s.sources,defines:["PICK"]}),attributeLocations:i._attributeLocations}),r=lF.shallowClone(n);r.shaderProgram=o,n.derivedCommands.pick=r}Object(r["a"])(e._copyCommand)||(s=new EV({sources:[T3e]}),c={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._copyCommand=t.createViewportQuadCommand(s,{uniformMap:c,owner:e})),Object(r["a"])(e._accumulateCommand)||(s=new EV({sources:[T3e]}),c={colorTexture:function(){return e._drawClassificationFBO.getColorTexture()}},e._accumulateCommand=t.createViewportQuadCommand(s,{uniformMap:c,owner:e})),e._viewport.width=o,e._viewport.height=a;const l=!Au.equals(e._viewport,n.viewport);let u=l!==e._useScissorTest;e._useScissorTest=l,Au.equals(e._scissorRectangle,n.viewport)||(e._scissorRectangle=Au.clone(n.viewport,e._scissorRectangle),u=!0),Object(r["a"])(e._rsDepth)&&Au.equals(e._viewport,e._rsDepth.viewport)&&!u||(e._rsDepth=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),Object(r["a"])(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),Object(r["a"])(e._rsAccumulate)&&Au.equals(e._viewport,e._rsAccumulate.viewport)&&!u||(e._rsAccumulate=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:oW.EQUAL,reference:cW.CESIUM_3D_TILE_MASK}})),Object(r["a"])(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),Object(r["a"])(e._rsComp)&&Au.equals(e._viewport,e._rsComp.viewport)&&!u||(e._rsComp=UF.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:UN.ALPHA_BLEND})),Object(r["a"])(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)}function j3e(e,t,n){if(!e._hasTranslucentDepth)return;const i=n.framebuffer;n.framebuffer=e._drawClassificationFBO.framebuffer,e._clearColorCommand.execute(t._context,n),n.framebuffer=i,e._frustumsDrawn>1&&(n.framebuffer=e._accumulationFBO.framebuffer,e._clearColorCommand.execute(t._context,n)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}Object.defineProperties(E3e.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),E3e.prototype.executeTranslucentCommands=function(e,t,n,i,o){const r=i.length;let a,s;const c=e.frameState.useLogDepth,l=e.context,u=n.framebuffer;for(s=0;s<r;++s)if(a=i[s],a=c?a.derivedCommands.logDepth.command:a,a.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}if(this._hasTranslucentDepth){for(P3e(this,l,n,o),n.framebuffer=this._drawClassificationFBO.framebuffer,this._clearDepthStencilCommand.execute(l,n),s=0;s<r;++s){if(a=i[s],a=c?a.derivedCommands.logDepth.command:a,!a.depthForTranslucentClassification)continue;const o=a.derivedCommands.depth.depthOnlyCommand;t(o,e,l,n)}this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(n.framebuffer=this._packFBO.framebuffer,this._packDepthCommand.execute(l,n)),n.framebuffer=u}},E3e.prototype.executeClassificationCommands=function(e,t,n,i){if(!this._hasTranslucentDepth)return;const o=e.context,r=o.uniformState,a=n.framebuffer;2===this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._copyCommand.execute(o,n)),n.framebuffer=this._drawClassificationFBO.framebuffer,this._frustumsDrawn>1&&this._clearColorCommand.execute(o,n),r.updatePass(hF.CESIUM_3D_TILE_CLASSIFICATION);const s=r.globeDepthTexture;r.globeDepthTexture=this._packFBO.getColorTexture();const c=i.commands[hF.CESIUM_3D_TILE_CLASSIFICATION],l=i.indices[hF.CESIUM_3D_TILE_CLASSIFICATION];for(let u=0;u<l;++u)t(c[u],e,o,n);r.globeDepthTexture=s,n.framebuffer=a,1!==this._frustumsDrawn&&(n.framebuffer=this._accumulationFBO.framebuffer,this._accumulateCommand.execute(o,n),n.framebuffer=a)},E3e.prototype.execute=function(e,t){if(!this._hasTranslucentDepth)return;1===this._frustumsDrawn?this._textureToComposite=this._drawClassificationFBO.getColorTexture():this._textureToComposite=this._accumulationFBO.getColorTexture();const n=e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand;n.execute(e.context,t),j3e(this,e,t)},E3e.prototype.isSupported=function(){return this._supported},E3e.prototype.isDestroyed=function(){return!1},E3e.prototype.destroy=function(){return x3e(this),S3e(this),Object(r["a"])(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),Object(r["a"])(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),Wc(this)};var R3e=E3e;function L3e(){this.command=void 0,this.near=void 0,this.far=void 0}function M3e(e,t,n){const i=e.context;let o,r;i.depthTexture&&(o=new rQe),e._useOIT&&i.depthTexture&&(r=new B1e(i));const a=new zze(i);a.viewport=Au.clone(n),this.camera=t,this._cameraClone=IGe.clone(t),this._cameraStartFired=!1,this._cameraMovedTime=void 0,this.viewport=n,this.passState=a,this.pickFramebuffer=new O2e(i),this.pickDepthFramebuffer=new b2e,this.sceneFramebuffer=new T2e,this.globeDepth=o,this.globeTranslucencyFramebuffer=new uQe,this.oit=r,this.translucentTileClassification=new R3e(i),this.pickDepths=[],this.frustumCommandsList=[],this.debugFrustumStatistics=void 0,this._commandExtents=[]}const N3e=new g,B3e=new g;function F3e(e,t){const n=Math.max(Math.abs(e.x),Math.abs(t.x)),i=Math.max(Math.abs(e.y),Math.abs(t.y)),o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.max(Math.max(n,i),o)}function z3e(e,t,n){const i=1/Math.max(1,F3e(e.position,t.position));return g.multiplyByScalar(e.position,i,N3e),g.multiplyByScalar(t.position,i,B3e),g.equalsEpsilon(N3e,B3e,n)&&g.equalsEpsilon(e.direction,t.direction,n)&&g.equalsEpsilon(e.up,t.up,n)&&g.equalsEpsilon(e.right,t.right,n)&&Me.equalsEpsilon(e.transform,t.transform,n)&&e.frustum.equalsEpsilon(t.frustum,n)}function k3e(e,t,n,i){const o=t.frameState,a=o.camera,c=o.useLogDepth?t.logarithmicDepthFarToNearRatio:t.farToNearRatio,l=t.mode===SH.SCENE2D,u=t.nearToFarDistance2D;let h;i*=1+s["a"].EPSILON2,n=Math.min(Math.max(n,a.frustum.near),a.frustum.far),i=Math.max(Math.min(i,a.frustum.far),n),l?(i=Math.min(i,a.position.z+t.nearToFarDistance2D),n=Math.min(n,i),h=Math.ceil(Math.max(1,i-n)/t.nearToFarDistance2D)):h=Math.ceil(Math.log(i/n)/Math.log(c));const d=e.frustumCommandsList;d.length=h;for(let s=0;s<h;++s){let e,t;l?(e=Math.min(i-u,n+s*u),t=Math.min(i,e+u)):(e=Math.max(n,Math.pow(c,s)*n),t=Math.min(i,c*e));let o=d[s];Object(r["a"])(o)?(o.near=e,o.far=t):o=d[s]=new $Ye(e,t)}}function U3e(e,t,n,i,o){t.debugShowFrustums&&(n.debugOverlappingFrustums=0);const a=e.frustumCommandsList,s=a.length;for(let r=0;r<s;++r){const e=a[r],s=e.near,c=e.far;if(i>c)continue;if(o<s)break;const l=n.pass,u=e.indices[l]++;if(e.commands[l][u]=n,t.debugShowFrustums&&(n.debugOverlappingFrustums|=1<<r),n.executeInClosestFrustum)break}if(t.debugShowFrustums){const t=e.debugFrustumStatistics.commandsInFrustums;t[n.debugOverlappingFrustums]=Object(r["a"])(t[n.debugOverlappingFrustums])?t[n.debugOverlappingFrustums]+1:1,++e.debugFrustumStatistics.totalCommands}t.updateDerivedCommands(n)}M3e.prototype.checkForCameraUpdates=function(e){const t=this.camera,n=this._cameraClone;return z3e(t,n,s["a"].EPSILON15)?(this._cameraStartFired&&bm()-this._cameraMovedTime>e.cameraEventWaitTime&&(t.moveEnd.raiseEvent(),this._cameraStartFired=!1),!1):(this._cameraStartFired||(t.moveStart.raiseEvent(),this._cameraStartFired=!0),this._cameraMovedTime=bm(),IGe.clone(t,n),!0)};const V3e=new av,H3e=new q;M3e.prototype.createPotentiallyVisibleSet=function(e){const t=e.frameState,n=t.camera,i=n.directionWC,o=n.positionWC,a=e._computeCommandList,s=e._overlayCommandList,c=t.commandList;e.debugShowFrustums&&(this.debugFrustumStatistics={totalCommands:0,commandsInFrustums:{}});const l=this.frustumCommandsList,u=l.length,h=hF.NUMBER_OF_PASSES;for(let r=0;r<u;++r)for(let e=0;e<h;++e)l[r].indices[e]=0;a.length=0,s.length=0;const d=this._commandExtents,f=d.length;let p=0,m=+Number.MAX_VALUE,_=-Number.MAX_VALUE;const g=t.shadowState.shadowsEnabled;let b=+Number.MAX_VALUE,y=-Number.MAX_VALUE,v=Number.MAX_VALUE;const O=t.mode===SH.SCENE3D?t.occluder:void 0;let A=t.cullingVolume;const w=V3e.planes;for(let r=0;r<5;++r)w[r]=A.planes[r];A=V3e;const T=c.length;for(let I=0;I<T;++I){const t=c[I],l=t.pass;if(l===hF.COMPUTE)a.push(t);else if(l===hF.OVERLAY)s.push(t);else{let a,s;const c=t.boundingVolume;if(Object(r["a"])(c)){if(!e.isVisible(t,A,O))continue;const n=c.computePlaneDistances(o,i,H3e);if(a=n.start,s=n.stop,m=Math.min(m,a),_=Math.max(_,s),g&&t.receiveShadows&&a<A3e.MAXIMUM_DISTANCE&&!(l===hF.GLOBE&&a<-100&&s>100)){const e=s-a;l!==hF.GLOBE&&a<100&&(v=Math.min(v,e)),b=Math.min(b,a),y=Math.max(y,s)}}else t instanceof xX?(a=n.frustum.near,s=n.frustum.far):(a=n.frustum.near,s=n.frustum.far,m=Math.min(m,a),_=Math.max(_,s));let u=d[p];Object(r["a"])(u)||(u=d[p]=new L3e),u.command=t,u.near=a,u.far=s,p++}}let C,E;for(g&&(b=Math.min(Math.max(b,n.frustum.near),n.frustum.far),y=Math.max(Math.min(y,n.frustum.far),b)),g&&(t.shadowState.nearPlane=b,t.shadowState.farPlane=y,t.shadowState.closestObjectSize=v),k3e(this,e,m,_),C=0;C<p;C++)E=d[C],U3e(this,e,E.command,E.near,E.far);if(p<f)for(C=p;C<f;C++){if(E=d[C],!Object(r["a"])(E.command))break;E.command=void 0}const x=l.length,S=t.frustumSplits;S.length=x+1;for(let r=0;r<x;++r)S[r]=l[r].near,r===x-1&&(S[r+1]=l[r].far)},M3e.prototype.destroy=function(){let e;this.pickFramebuffer=this.pickFramebuffer&&this.pickFramebuffer.destroy(),this.pickDepthFramebuffer=this.pickDepthFramebuffer&&this.pickDepthFramebuffer.destroy(),this.sceneFramebuffer=this.sceneFramebuffer&&this.sceneFramebuffer.destroy(),this.globeDepth=this.globeDepth&&this.globeDepth.destroy(),this.oit=this.oit&&this.oit.destroy(),this.translucentTileClassification=this.translucentTileClassification&&this.translucentTileClassification.destroy(),this.globeTranslucencyFramebuffer=this.globeTranslucencyFramebuffer&&this.globeTranslucencyFramebuffer.destroy();const t=this.pickDepths,n=t.length;for(e=0;e<n;++e)t[e].destroy()};var G3e=M3e;const W3e=.1,q3e=new GGe({pass:Ape.MOST_DETAILED_PRELOAD}),Y3e=new GGe({pass:Ape.MOST_DETAILED_PICK}),X3e=new GGe({pass:Ape.PICK});function K3e(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const t=new Au(0,0,1,1),n=new IGe(e);n.frustum=new IO({width:W3e,aspectRatio:1,near:.1}),this._pickOffscreenView=new G3e(e,n,t)}K3e.prototype.update=function(){this._pickPositionCacheDirty=!0},K3e.prototype.getPickDepth=function(e,t){const n=e.view.pickDepths;let i=n[t];return Object(r["a"])(i)||(i=new p2e,n[t]=i),i};const $3e=new EO,J3e=new g,Q3e=new g,Z3e=new Gt,e4e=new Me;function t4e(e,t,n,i,o){const a=e.camera;let s=a.frustum;Object(r["a"])(s._offCenterFrustum)&&(s=s._offCenterFrustum);let c=2*(t.x-o.x)/o.width-1;c*=.5*(s.right-s.left);let l=2*(o.height-t.y-o.y)/o.height-1;l*=.5*(s.top-s.bottom);const u=Me.clone(a.transform,e4e);a._setTransform(Me.IDENTITY);const h=g.clone(a.position,J3e);g.multiplyByScalar(a.right,c,Q3e),g.add(Q3e,h,h),g.multiplyByScalar(a.up,l,Q3e),g.add(Q3e,h,h),a._setTransform(u),e.mode===SH.SCENE2D&&g.fromElements(h.z,h.x,h.y,h);const d=s.getPixelDimensions(o.width,o.height,1,1,Z3e),f=$3e;return f.right=.5*d.x,f.left=-f.right,f.top=.5*d.y,f.bottom=-f.top,f.near=s.near,f.far=s.far,f.computeCullingVolume(h,a.directionWC,a.upWC)}const n4e=new NO,i4e=new Gt;function o4e(e,t,n,i,o){const r=e.camera,a=r.frustum,s=a.near,c=Math.tan(.5*a.fovy),l=a.aspectRatio*c,u=2*(t.x-o.x)/o.width-1,h=2*(o.height-t.y-o.y)/o.height-1,d=u*s*l,f=h*s*c,p=a.getPixelDimensions(o.width,o.height,1,1,i4e),m=p.x*n*.5,_=p.y*i*.5,g=n4e;return g.top=f+_,g.bottom=f-_,g.right=d+m,g.left=d-m,g.near=s,g.far=a.far,g.computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}function r4e(e,t,n,i,o){const r=e.camera.frustum;return r instanceof IO||r instanceof EO?t4e(e,t,n,i,o):o4e(e,t,n,i,o)}let a4e=3,s4e=3,c4e=new Au(0,0,a4e,s4e);const l4e=new Gt,u4e=new Dm(0,0,0,0);function h4e(e,t){const n=e.context,i=e.frameState,o=e.environmentState,r=e.defaultView;e.view=r;const a=r.viewport;a.x=0,a.y=0,a.width=n.drawingBufferWidth,a.height=n.drawingBufferHeight;let s=r.passState;s.viewport=Au.clone(a,s.viewport),e.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=r4e(e,t,1,1,a),i.tilesetPassState=X3e,e.updateEnvironment(),o.renderTranslucentDepthForPick=!0,s=r.pickDepthFramebuffer.update(n,t,a),e.updateAndExecuteCommands(s,u4e),e.resolveFramebuffers(s),n.endFrame()}K3e.prototype.pick=function(e,t,n,i){if(!Object(r["a"])(t))throw new a["a"]("windowPosition is undefined.");a4e=Object(o["a"])(n,3),s4e=Object(o["a"])(i,a4e);const s=e.context,c=s.uniformState,l=e.frameState,u=e.defaultView;e.view=u;const h=u.viewport;h.x=0,h.y=0,h.width=s.drawingBufferWidth,h.height=s.drawingBufferHeight;let d=u.passState;d.viewport=Au.clone(h,d.viewport);const f=f9.transformWindowToDrawingBuffer(e,t,l4e);e.jobScheduler.disableThisFrame(),e.updateFrameState(),l.cullingVolume=r4e(e,f,a4e,s4e,h),l.invertClassification=!1,l.passes.pick=!0,l.tilesetPassState=X3e,c.update(l),e.updateEnvironment(),c4e.x=f.x-.5*(a4e-1),c4e.y=e.drawingBufferHeight-f.y-.5*(s4e-1),c4e.width=a4e,c4e.height=s4e,d=u.pickFramebuffer.begin(c4e,u.viewport),e.updateAndExecuteCommands(d,u4e),e.resolveFramebuffers(d);const p=u.pickFramebuffer.end(c4e);return s.endFrame(),p};const d4e=new zO,f4e=new NO,p4e=new IO,m4e=new EO;K3e.prototype.pickPositionWorldCoordinates=function(e,t,n){if(!e.useDepthPicking)return;if(!Object(r["a"])(t))throw new a["a"]("windowPosition is undefined.");if(!e.context.depthTexture)throw new a["a"]("Picking from the depth buffer is not supported. Check pickPositionSupported.");const i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return g.clone(this._pickPositionCache[i],n);const o=e.frameState,s=e.context,c=s.uniformState,l=e.defaultView;e.view=l;const u=f9.transformWindowToDrawingBuffer(e,t,l4e);e.pickTranslucentDepth?h4e(e,u):(e.updateFrameState(),c.update(o),e.updateEnvironment()),u.y=e.drawingBufferHeight-u.y;const h=e.camera;let d;d=Object(r["a"])(h.frustum.fov)?h.frustum.clone(d4e):Object(r["a"])(h.frustum.infiniteProjectionMatrix)?h.frustum.clone(f4e):Object(r["a"])(h.frustum.width)?h.frustum.clone(p4e):h.frustum.clone(m4e);const f=l.frustumCommandsList,p=f.length;for(let a=0;a<p;++a){const t=this.getPickDepth(e,a),l=t.getDepth(s,u.x,u.y);if(Object(r["a"])(l)&&(l>0&&l<1)){const t=f[a];let r;return e.mode===SH.SCENE2D?(r=h.position.z,h.position.z=r-t.near+1,d.far=Math.max(1,t.far-t.near),d.near=1,c.update(o),c.updateFrustum(d)):(d.near=t.near*(0!==a?e.opaqueFrustumNearOffset:1),d.far=t.far,c.updateFrustum(d)),n=f9.drawingBufferToWgs84Coordinates(e,u,l,n),e.mode===SH.SCENE2D&&(h.position.z=r,c.update(o)),this._pickPositionCache[i]=g.clone(n),n}}this._pickPositionCache[i]=void 0};const _4e=new I;function g4e(e,t){let n,i;const o=[],a=[],s=[],c=[];Object(r["a"])(e)||(e=Number.MAX_VALUE);let l=t();while(Object(r["a"])(l)){const n=l.object,u=l.position,h=l.exclude;if(Object(r["a"])(u)&&!Object(r["a"])(n)){o.push(l);break}if(!Object(r["a"])(n)||!Object(r["a"])(n.primitive))break;if(!h&&(o.push(l),0>=--e))break;const d=n.primitive;let f=!1;"function"===typeof d.getGeometryInstanceAttributes&&Object(r["a"])(n.id)&&(i=d.getGeometryInstanceAttributes(n.id),Object(r["a"])(i)&&Object(r["a"])(i.show)&&(f=!0,i.show=wP.toValue(!1,i.show),s.push(i))),n instanceof qK&&(f=!0,n.show=!1,c.push(n)),f||(d.show=!1,a.push(d)),l=t()}for(n=0;n<a.length;++n)a[n].show=!0;for(n=0;n<s.length;++n)i=s[n],i.show=wP.toValue(!0,i.show);for(n=0;n<c.length;++n)c[n].show=!0;return o}K3e.prototype.pickPosition=function(e,t,n){if(n=this.pickPositionWorldCoordinates(e,t,n),Object(r["a"])(n)&&e.mode!==SH.SCENE3D){g.fromElements(n.y,n.z,n.x,n);const t=e.mapProjection,i=t.ellipsoid,o=t.unproject(n,_4e);i.cartographicToCartesian(o,n)}return n},K3e.prototype.drillPick=function(e,t,n,i,o){const a=this,s=function(){const n=a.pick(e,t,i,o);if(Object(r["a"])(n))return{object:n,position:void 0,exclude:!1}},c=g4e(n,s);return c.map((function(e){return e.object}))};const b4e=new g,y4e=new g;function v4e(e,t,n){this.ray=e,this.width=t,this.tilesets=n,this.ready=!1;const i=this;this.promise=new Promise(e=>{i._completePick=()=>{e()}})}function O4e(e,t,n,i){const r=t.direction,a=g.mostOrthogonalAxis(r,b4e),s=g.cross(r,a,b4e),c=g.cross(r,s,y4e);return i.position=t.origin,i.direction=r,i.up=c,i.right=s,i.frustum.width=Object(o["a"])(n,W3e),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function A4e(e,t,n){const i=t.frameState,o=n.ray,r=n.width,a=n.tilesets,s=e._pickOffscreenView.camera,c=O4e(e,o,r,s),l=q3e;l.camera=s,l.cullingVolume=c;let u=!0;const h=a.length;for(let d=0;d<h;++d){const e=a[d];e.show&&t.primitives.contains(e)&&(e.updateForPass(i,l),u=u&&l.ready)}return u&&n._completePick(),u}function w4e(e,t,n){const i=e.length;for(let o=0;o<i;++o){const i=e.get(o);i.show&&(Object(r["a"])(i.isCesium3DTileset)?Object(r["a"])(t)&&-1!==t.indexOf(i)||n.push(i):i instanceof Owe&&w4e(i,t,n))}}function T4e(e,t,n,i,o,r){const a=[];if(w4e(t.primitives,i,a),0===a.length)return Promise.resolve(r());const s=new v4e(n,o,a);return e._mostDetailedRayPicks.push(s),s.promise.then((function(){return r()}))}function C4e(e,t){return!(!Object(r["a"])(e)||!Object(r["a"])(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function E4e(e,t,n,i,o,a,s){const c=t.context,l=c.uniformState,u=t.frameState,h=e._pickOffscreenView;t.view=h,O4e(e,n,o,h.camera),c4e=Au.clone(h.viewport,c4e);const d=h.pickFramebuffer.begin(c4e,h.viewport);let f;t.jobScheduler.disableThisFrame(),t.updateFrameState(),u.invertClassification=!1,u.passes.pick=!0,u.passes.offscreen=!0,u.tilesetPassState=s?Y3e:X3e,l.update(u),t.updateEnvironment(),t.updateAndExecuteCommands(d,u4e),t.resolveFramebuffers(d);const p=h.pickFramebuffer.end(c4e);if(t.context.depthTexture){const i=h.frustumCommandsList.length;for(let o=0;o<i;++o){const i=e.getPickDepth(t,o),a=i.getDepth(c,0,0);if(Object(r["a"])(a)&&(a>0&&a<1)){const e=h.frustumCommandsList[o],i=e.near*(0!==o?t.opaqueFrustumNearOffset:1),r=e.far,s=i+a*(r-i);f=Yn.getPoint(n,s);break}}}if(t.view=t.defaultView,c.endFrame(),Object(r["a"])(p)||Object(r["a"])(f))return{object:p,position:f,exclude:!Object(r["a"])(f)&&a||C4e(p,i)}}function x4e(e,t,n,i,o,r,a,s){const c=function(){return E4e(e,t,n,o,r,a,s)};return g4e(i,c)}function S4e(e,t,n,i,o,r,a){const s=x4e(e,t,n,1,i,o,r,a);if(s.length>0)return s[0]}function I4e(e,t,n,i,o,r,a,s){return x4e(e,t,n,i,o,r,a,s)}function D4e(e,t){return new Promise((n,i)=>{t.then((function(t){const i=e.postRender.addEventListener((function(){i(),n(t)}));e.requestRender()})).catch((function(e){i(e)}))})}K3e.prototype.updateMostDetailedRayPicks=function(e){const t=this._mostDetailedRayPicks;for(let n=0;n<t.length;++n)A4e(this,e,t[n])&&t.splice(n--,1)},K3e.prototype.pickFromRay=function(e,t,n,o){if(i["a"].defined("ray",t),e.mode!==SH.SCENE3D)throw new a["a"]("Ray intersections are only supported in 3D mode.");return S4e(this,e,t,n,o,!1,!1)},K3e.prototype.drillPickFromRay=function(e,t,n,o,r){if(i["a"].defined("ray",t),e.mode!==SH.SCENE3D)throw new a["a"]("Ray intersections are only supported in 3D mode.");return I4e(this,e,t,n,o,r,!1,!1)},K3e.prototype.pickFromRayMostDetailed=function(e,t,n,o){if(i["a"].defined("ray",t),e.mode!==SH.SCENE3D)throw new a["a"]("Ray intersections are only supported in 3D mode.");const s=this;return t=Yn.clone(t),n=Object(r["a"])(n)?n.slice():n,D4e(e,T4e(s,e,t,n,o,(function(){return S4e(s,e,t,n,o,!1,!0)})))},K3e.prototype.drillPickFromRayMostDetailed=function(e,t,n,o,s){if(i["a"].defined("ray",t),e.mode!==SH.SCENE3D)throw new a["a"]("Ray intersections are only supported in 3D mode.");const c=this;return t=Yn.clone(t),o=Object(r["a"])(o)?o.slice():o,D4e(e,T4e(c,e,t,o,s,(function(){return I4e(c,e,t,n,o,s,!1,!0)})))};const P4e=new g,j4e=new g,R4e=new Yn,L4e=new I;function M4e(e,t){const n=e.globe,i=Object(r["a"])(n)?n.ellipsoid:e.mapProjection.ellipsoid,o=rn._defaultMaxTerrainHeight,a=i.geodeticSurfaceNormalCartographic(t,j4e),s=I.toCartesian(t,i,P4e),c=R4e;c.origin=s,c.direction=a;const l=new Yn;return Yn.getPoint(c,o,l.origin),g.negate(a,l.direction),l}function N4e(e,t){const n=e.globe,i=Object(r["a"])(n)?n.ellipsoid:e.mapProjection.ellipsoid,o=I.fromCartesian(t,i,L4e);return M4e(e,o)}function B4e(e,t){const n=e.globe,i=Object(r["a"])(n)?n.ellipsoid:e.mapProjection.ellipsoid,o=I.fromCartesian(t,i,L4e);return o.height}function F4e(e,t,n,i,o){const a=M4e(t,n);return T4e(e,t,a,i,o,(function(){const n=S4e(e,t,a,i,o,!0,!0);if(Object(r["a"])(n))return B4e(t,n.position)}))}function z4e(e,t,n,i,o,a){const s=N4e(t,n);return T4e(e,t,s,i,o,(function(){const n=S4e(e,t,s,i,o,!0,!0);if(Object(r["a"])(n))return g.clone(n.position,a)}))}K3e.prototype.sampleHeight=function(e,t,n,o){if(i["a"].defined("position",t),e.mode!==SH.SCENE3D)throw new a["a"]("sampleHeight is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new a["a"]("sampleHeight requires depth texture support. Check sampleHeightSupported.");const s=M4e(e,t),c=S4e(this,e,s,n,o,!0,!1);if(Object(r["a"])(c))return B4e(e,c.position)},K3e.prototype.clampToHeight=function(e,t,n,o,s){if(i["a"].defined("cartesian",t),e.mode!==SH.SCENE3D)throw new a["a"]("clampToHeight is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new a["a"]("clampToHeight requires depth texture support. Check clampToHeightSupported.");const c=N4e(e,t),l=S4e(this,e,c,n,o,!0,!1);if(Object(r["a"])(l))return g.clone(l.position,s)},K3e.prototype.sampleHeightMostDetailed=function(e,t,n,o){if(i["a"].defined("positions",t),e.mode!==SH.SCENE3D)throw new a["a"]("sampleHeightMostDetailed is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new a["a"]("sampleHeightMostDetailed requires depth texture support. Check sampleHeightSupported.");n=Object(r["a"])(n)?n.slice():n;const s=t.length,c=new Array(s);for(let i=0;i<s;++i)c[i]=F4e(this,e,t[i],n,o);return D4e(e,Promise.all(c).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i].height=e[i];return t})))},K3e.prototype.clampToHeightMostDetailed=function(e,t,n,o){if(i["a"].defined("cartesians",t),e.mode!==SH.SCENE3D)throw new a["a"]("clampToHeightMostDetailed is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new a["a"]("clampToHeightMostDetailed requires depth texture support. Check clampToHeightSupported.");n=Object(r["a"])(n)?n.slice():n;const s=t.length,c=new Array(s);for(let i=0;i<s;++i)c[i]=z4e(this,e,t[i],n,o,t[i]);return D4e(e,Promise.all(c).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i]=e[i];return t})))},K3e.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};var k4e=K3e;function U4e(e,t,n){i["a"].typeOf.string("samplerUniformName",e),i["a"].typeOf.string("matrixUniformName",t),i["a"].typeOf.string("styleUniformName",n);const o=`    float clipDistance = clip(gl_FragCoord, ${e}, ${t}); \n`+"    vec4 clippingPlanesEdgeColor = vec4(1.0); \n"+`    clippingPlanesEdgeColor.rgb = ${n}.rgb; \n`+`    float clippingPlanesEdgeWidth = ${n}.a; \n`+"    if (clipDistance > 0.0 && clipDistance < clippingPlanesEdgeWidth) \n    { \n        gl_FragColor = clippingPlanesEdgeColor;\n    } \n";return o}var V4e=U4e;const H4e={modifyFragmentShader:function(e){return e=EV.replaceMain(e,"czm_splitter_main"),e+="uniform float czm_splitDirection; \nvoid main() \n{ \n#ifndef SHADOW_MAP\n    if (czm_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; \n    if (czm_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; \n#endif\n    czm_splitter_main(); \n} \n",e},addUniforms:function(e,t){t.czm_splitDirection=function(){return e.splitDirection}}};var G4e=H4e;const W4e={NEEDS_DECODE:0,DECODING:1,READY:2,FAILED:3};function q4e(e){i["a"].typeOf.object("options",e),i["a"].typeOf.object("options.arrayBuffer",e.arrayBuffer),this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=Dm.clone(Dm.DARKGRAY),this._highlightColor=Dm.clone(Dm.WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=W4e.READY,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._batchTableLoaded=e.batchTableLoaded,this._pickIdLoaded=e.pickIdLoaded,this._opaquePass=Object(o["a"])(e.opaquePass,hF.OPAQUE),this._cull=Object(o["a"])(e.cull,!0),this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=Me.clone(Me.IDENTITY),this._modelMatrix=Me.clone(Me.IDENTITY),this.time=0,this.shadows=DH.ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,this.splitDirection=Object(o["a"])(e.splitDirection,m9.NONE),this._splittingEnabled=!1,this._resolveReadyPromise=void 0,this._rejectReadyPromise=void 0,this._readyPromise=Y4e(this,e)}function Y4e(e,t){const n=vae.parse(t.arrayBuffer,t.byteOffset);if(e._parsedContent=n,e._rtcCenter=n.rtcCenter,e._hasNormals=n.hasNormals,e._hasColors=n.hasColors,e._hasBatchIds=n.hasBatchIds,e._isTranslucent=n.isTranslucent,!n.hasBatchIds&&Object(r["a"])(n.batchTableBinary)&&(n.styleableProperties=UK.getBinaryProperties(n.pointsLength,n.batchTableJson,n.batchTableBinary)),Object(r["a"])(n.draco)){const t=n.draco;e._decodingState=W4e.NEEDS_DECODE,t.dequantizeInShader=e._dequantizeInShader}const i=n.positions;Object(r["a"])(i)&&(e._isQuantized=i.isQuantized,e._quantizedVolumeScale=i.quantizedVolumeScale,e._quantizedVolumeOffset=i.quantizedVolumeOffset,e._quantizedRange=i.quantizedRange);const o=n.normals;Object(r["a"])(o)&&(e._isOctEncoded16P=o.octEncoded);const a=n.colors;Object(r["a"])(a)&&(Object(r["a"])(a.constantColor)&&(e._constantColor=Dm.clone(a.constantColor,e._constantColor),e._hasColors=!1),e._isRGB565=a.isRGB565);const s=n.batchIds;return Object(r["a"])(n.batchIds)&&(s.name="BATCH_ID",s.semantic="BATCH_ID",s.setIndex=void 0),n.hasBatchIds&&e._batchTableLoaded(n.batchLength,n.batchTableJson,n.batchTableBinary),e._pointsLength=n.pointsLength,new Promise((function(t,n){e._resolveReadyPromise=function(){e._ready=!0,t(e)},e._rejectReadyPromise=n}))}Object.defineProperties(q4e.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},color:{get:function(){return Dm.clone(this._highlightColor)},set:function(e){this._highlightColor=Dm.clone(e,this._highlightColor)}},boundingSphere:{get:function(){if(Object(r["a"])(this._drawCommand))return this._drawCommand.boundingVolume},set:function(e){this._boundingSphere=Tt.clone(e,this._boundingSphere)}}});const X4e=new g,K4e=new g,$4e=new g;let J4e,Q4e;function Z4e(e){if(!Object(r["a"])(Q4e)){J4e=new dae.a(0),Q4e=new Array(e);for(let t=0;t<e;++t)Q4e[t]=J4e.random()}return Q4e}function e5e(e){const t=20,n=e.length/3,i=Math.min(n,t),o=Z4e(t),r=Number.MAX_VALUE,a=-Number.MAX_VALUE,c=g.fromElements(r,r,r,X4e),l=g.fromElements(a,a,a,K4e);for(let s=0;s<i;++s){const t=Math.floor(o[s]*n),i=g.unpack(e,3*t,$4e);g.minimumByComponent(c,i,c),g.maximumByComponent(l,i,l)}const u=Tt.fromCornerPoints(c,l);return u.radius+=s["a"].EPSILON2,u}function t5e(e,t){const n=Ks.fromTypedArray(e);return n===Ks.INT||n===Ks.UNSIGNED_INT||n===Ks.DOUBLE?(ab("Cast pnts property to floats",`Point cloud property "${t}" will be casted to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.`),new Float32Array(e)):e}const n5e=new be,i5e=new be,o5e=new Dm,r5e=0,a5e=1,s5e=2,c5e=3,l5e=4,u5e=new Me,h5e=new Me;function d5e(e,t){const n=t.context,i=e._parsedContent,o=e._pointsLength,a=i.positions,s=i.colors,c=i.normals,l=i.batchIds,u=i.styleableProperties,h=Object(r["a"])(u),d=e._isQuantized,f=e._isQuantizedDraco,p=e._isOctEncoded16P,m=e._isOctEncodedDraco,_=e._quantizedRange,b=e._octEncodedRange,y=e._isRGB565,v=e._isTranslucent,O=e._hasColors,A=e._hasNormals,w=e._hasBatchIds;let T,C;const E=[],x={};if(e._styleableShaderAttributes=x,h){let t=l5e;for(const i in u)if(u.hasOwnProperty(i)){const o=u[i],r=t5e(o.typedArray,i);T=o.componentCount,C=Ks.fromTypedArray(r);const a=NV.createVertexBuffer({context:n,typedArray:r,usage:LV.STATIC_DRAW});e._geometryByteLength+=a.sizeInBytes;const s={index:t,vertexBuffer:a,componentsPerAttribute:T,componentDatatype:C,normalize:!1,offsetInBytes:0,strideInBytes:0};E.push(s),x[i]={location:t,componentCount:T},++t}}const S=NV.createVertexBuffer({context:n,typedArray:a.typedArray,usage:LV.STATIC_DRAW});let I,D,P;e._geometryByteLength+=S.sizeInBytes,O&&(I=NV.createVertexBuffer({context:n,typedArray:s.typedArray,usage:LV.STATIC_DRAW}),e._geometryByteLength+=I.sizeInBytes),A&&(D=NV.createVertexBuffer({context:n,typedArray:c.typedArray,usage:LV.STATIC_DRAW}),e._geometryByteLength+=D.sizeInBytes),w&&(l.typedArray=t5e(l.typedArray,"batchIds"),P=NV.createVertexBuffer({context:n,typedArray:l.typedArray,usage:LV.STATIC_DRAW}),e._geometryByteLength+=P.sizeInBytes);let j=[];if(C=d?Ks.UNSIGNED_SHORT:f?_<=255?Ks.UNSIGNED_BYTE:Ks.UNSIGNED_SHORT:Ks.FLOAT,j.push({index:r5e,vertexBuffer:S,componentsPerAttribute:3,componentDatatype:C,normalize:!1,offsetInBytes:0,strideInBytes:0}),e._cull&&(e._boundingSphere=d||f?Tt.fromCornerPoints(g.ZERO,e._quantizedVolumeScale):e5e(a.typedArray)),O)if(y)j.push({index:a5e,vertexBuffer:I,componentsPerAttribute:1,componentDatatype:Ks.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{const e=v?4:3;j.push({index:a5e,vertexBuffer:I,componentsPerAttribute:e,componentDatatype:Ks.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}A&&(p?(T=2,C=Ks.UNSIGNED_BYTE):m?(T=2,C=b<=255?Ks.UNSIGNED_BYTE:Ks.UNSIGNED_SHORT):(T=3,C=Ks.FLOAT),j.push({index:s5e,vertexBuffer:D,componentsPerAttribute:T,componentDatatype:C,normalize:!1,offsetInBytes:0,strideInBytes:0})),w&&j.push({index:c5e,vertexBuffer:P,componentsPerAttribute:1,componentDatatype:Ks.fromTypedArray(l.typedArray),normalize:!1,offsetInBytes:0,strideInBytes:0}),h&&(j=j.concat(E));const R=new WV({context:n,attributes:j}),L={depthTest:{enabled:!0}},M={depthTest:{enabled:!0},depthMask:!1,blending:UN.ALPHA_BLEND};e._opaquePass===hF.CESIUM_3D_TILE&&(L.stencilTest=cW.setCesium3DTileBit(),L.stencilMask=cW.CESIUM_3D_TILE_MASK,M.stencilTest=cW.setCesium3DTileBit(),M.stencilMask=cW.CESIUM_3D_TILE_MASK),e._opaqueRenderState=UF.fromCache(L),e._translucentRenderState=UF.fromCache(M),e._drawCommand=new lF({boundingVolume:new Tt,cull:e._cull,modelMatrix:new Me,primitiveType:Eu.POINTS,vertexArray:R,count:o,shaderProgram:void 0,uniformMap:void 0,renderState:v?e._translucentRenderState:e._opaqueRenderState,pass:v?hF.TRANSLUCENT:e._opaquePass,owner:e,castShadows:!1,receiveShadows:!1,pickId:e._pickIdLoaded()})}function f5e(e,t){const n=t.context,i=e._isQuantized,a=e._isQuantizedDraco,s=e._isOctEncodedDraco;let c={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){const i=n5e;if(i.x=e._attenuation?e.maximumAttenuation:e._pointSize,i.x*=t.pixelRatio,i.y=e.time,e._attenuation){const o=t.camera.frustum;let r;r=t.mode===SH.SCENE2D||o instanceof IO?Number.POSITIVE_INFINITY:n.drawingBufferHeight/t.camera.frustum.sseDenominator,i.z=e.geometricError*e.geometricErrorScale,i.w=r}return i},u_highlightColor:function(){return e._highlightColor},u_constantColor:function(){return e._constantColor},u_clippingPlanes:function(){const t=e.clippingPlanes,i=e.isClipped;return i?t.texture:n.defaultTexture},u_clippingPlanesEdgeStyle:function(){const t=e.clippingPlanes;if(!Object(r["a"])(t))return Dm.TRANSPARENT;const n=Dm.clone(t.edgeColor,o5e);return n.alpha=t.edgeWidth,n},u_clippingPlanesMatrix:function(){const t=e.clippingPlanes;if(!Object(r["a"])(t))return Me.IDENTITY;const i=Object(o["a"])(e.clippingPlanesOriginMatrix,e._modelMatrix);Me.multiply(n.uniformState.view3D,i,u5e);const a=Me.multiply(u5e,t.modelMatrix,u5e);return Me.inverseTranspose(a,h5e)}};G4e.addUniforms(e,c),(i||a||s)&&(c=Object(qE["a"])(c,{u_quantizedVolumeScaleAndOctEncodedRange:function(){const t=i5e;if(Object(r["a"])(e._quantizedVolumeScale)){const n=g.clone(e._quantizedVolumeScale,t);g.divideByScalar(n,e._quantizedRange,t)}return t.w=e._octEncodedRange,t}})),Object(r["a"])(e._uniformMapLoaded)&&(c=e._uniformMapLoaded(c)),e._drawCommand.uniformMap=c}function p5e(e,t){const n=/czm_3dtiles_property_(\d+)/g;let i=n.exec(e);while(null!==i){const o=parseInt(i[1]);-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function m5e(e,t){e=e.slice(e.indexOf("\n"));const n=/czm_3dtiles_builtin_property_(\w+)/g;let i=n.exec(e);while(null!==i){const o=i[1];-1===t.indexOf(o)&&t.push(o),i=n.exec(e)}}function _5e(e,t){const n=e.numberOfAttributes;for(let i=0;i<n;++i){const n=e.getAttribute(i);if(n.index===t)return n}}const g5e={POSITION:"czm_3dtiles_builtin_property_POSITION",POSITION_ABSOLUTE:"czm_3dtiles_builtin_property_POSITION_ABSOLUTE",COLOR:"czm_3dtiles_builtin_property_COLOR",NORMAL:"czm_3dtiles_builtin_property_NORMAL"};function b5e(e,t,n){let i,o,a;const s=t.context,c=Object(r["a"])(n),l=e._isQuantized,u=e._isQuantizedDraco,h=e._isOctEncoded16P,d=e._isOctEncodedDraco,f=e._isRGB565,p=e._isTranslucent,m=e._hasColors,_=e._hasNormals,g=e._hasBatchIds,b=e._backFaceCulling,y=e._normalShading,v=e._drawCommand.vertexArray,O=e.clippingPlanes,A=e._attenuation;let w,T,C,E=p;const x=Object(RL["a"])(g5e),S={},I=e._styleableShaderAttributes;for(o in I)I.hasOwnProperty(o)&&(a=I[o],x[o]=`czm_3dtiles_property_${a.location}`,S[a.location]=a);if(c){const e={translucent:!1},t="(vec3 czm_3dtiles_builtin_property_POSITION, vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, vec4 czm_3dtiles_builtin_property_COLOR, vec3 czm_3dtiles_builtin_property_NORMAL)";w=n.getColorShaderFunction(`getColorFromStyle${t}`,x,e),T=n.getShowShaderFunction(`getShowFromStyle${t}`,x,e),C=n.getPointSizeShaderFunction(`getPointSizeFromStyle${t}`,x,e),Object(r["a"])(w)&&e.translucent&&(E=!0)}e._styleTranslucent=E;const D=Object(r["a"])(w),P=Object(r["a"])(T),j=Object(r["a"])(C),R=e.isClipped,L=[],M=[];D&&(p5e(w,L),m5e(w,M)),P&&(p5e(T,L),m5e(T,M)),j&&(p5e(C,L),m5e(C,M));const N=M.indexOf("COLOR")>=0,B=M.indexOf("NORMAL")>=0;if(B&&!_)throw new ye["a"]("Style references the NORMAL semantic but the point cloud does not have normals");for(o in I)if(I.hasOwnProperty(o)){a=I[o];const e=L.indexOf(a.location)>=0,t=_5e(v,a.location);t.enabled=e}const F=m&&(!D||N);if(m){const e=_5e(v,a5e);e.enabled=F}const z=_&&(y||b||B);if(_){const e=_5e(v,s5e);e.enabled=z}const k={a_position:r5e};F&&(k.a_color=a5e),z&&(k.a_normal=s5e),g&&(k.a_batchId=c5e);let U="";const V=L.length;for(i=0;i<V;++i){const e=L[i];a=S[e];const t=a.componentCount,n=`czm_3dtiles_property_${e}`;let o;o=1===t?"float":`vec${t}`,U+=`attribute ${o} ${n}; \n`,k[n]=a.location}f5e(e,t);let H="attribute vec3 a_position; \nvarying vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";H+="float u_pointSize; \nfloat tiles3d_tileset_time; \n",A&&(H+="float u_geometricError; \nfloat u_depthMultiplier; \n"),H+=U,F&&(H+=p?"attribute vec4 a_color; \n":f?"attribute float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"attribute vec3 a_color; \n"),z&&(H+=h||d?"attribute vec2 a_normal; \n":"attribute vec3 a_normal; \n"),g&&(H+="attribute float a_batchId; \n"),(l||u||d)&&(H+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),D&&(H+=w),P&&(H+=T),j&&(H+=C),H+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    tiles3d_tileset_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",A&&(H+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),H+=F?p?"    vec4 color = a_color; \n":f?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",H+=l||u?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",H+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",z?(H+=h?"    vec3 normal = czm_octDecode(a_normal); \n":d?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",H+="    vec3 normalEC = czm_normal * normal; \n"):H+="    vec3 normal = vec3(1.0); \n",D&&(H+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),P&&(H+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),H+=j?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":A?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",H+="    color = color * u_highlightColor; \n",z&&y&&(H+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),H+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",z&&b&&(H+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),P&&(H+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),H+="} \n";let G="varying vec4 v_color; \n";R&&(G+="uniform highp sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",G+="\n",G+=EXe(O,s),G+="\n"),G+="void main() \n{ \n    gl_FragColor = czm_gammaCorrect(v_color); \n",R&&(G+=V4e("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),G+="} \n",e.splitDirection!==m9.NONE&&(G=G4e.modifyFragmentShader(G)),Object(r["a"])(e._vertexShaderLoaded)&&(H=e._vertexShaderLoaded(H)),Object(r["a"])(e._fragmentShaderLoaded)&&(G=e._fragmentShaderLoaded(G));const W=e._drawCommand;Object(r["a"])(W.shaderProgram)&&W.shaderProgram.destroy(),W.shaderProgram=Nz.fromCache({context:s,vertexShaderSource:H,fragmentShaderSource:G,attributeLocations:k});try{W.shaderProgram._bind()}catch(q){throw new ye["a"]("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}function y5e(e,t){if(e._decodingState===W4e.READY)return!1;if(e._decodingState===W4e.NEEDS_DECODE){const n=e._parsedContent,i=n.draco,a=aZ.decodePointCloud(i,t);Object(r["a"])(a)&&(e._decodingState=W4e.DECODING,a.then((function(t){e._decodingState=W4e.READY;const a=Object(r["a"])(t.POSITION)?t.POSITION.array:void 0,s=Object(r["a"])(t.RGB)?t.RGB.array:void 0,c=Object(r["a"])(t.RGBA)?t.RGBA.array:void 0,l=Object(r["a"])(t.NORMAL)?t.NORMAL.array:void 0,u=Object(r["a"])(t.BATCH_ID)?t.BATCH_ID.array:void 0,h=Object(r["a"])(a)&&Object(r["a"])(t.POSITION.data.quantization),d=Object(r["a"])(l)&&Object(r["a"])(t.NORMAL.data.quantization);if(h){const n=t.POSITION.data.quantization,i=n.range;e._quantizedVolumeScale=g.fromElements(i,i,i),e._quantizedVolumeOffset=g.unpack(n.minValues),e._quantizedRange=(1<<n.quantizationBits)-1,e._isQuantizedDraco=!0}d&&(e._octEncodedRange=(1<<t.NORMAL.data.quantization.quantizationBits)-1,e._isOctEncodedDraco=!0);let f=n.styleableProperties;const p=i.batchTableProperties;for(const e in p)if(p.hasOwnProperty(e)){const n=t[e];Object(r["a"])(f)||(f={}),f[e]={typedArray:n.array,componentCount:n.data.componentsPerAttribute}}Object(r["a"])(a)&&(n.positions={typedArray:a});const m=Object(o["a"])(c,s);Object(r["a"])(m)&&(n.colors={typedArray:m}),Object(r["a"])(l)&&(n.normals={typedArray:l}),Object(r["a"])(u)&&(n.batchIds={typedArray:u}),n.styleableProperties=f})).catch((function(t){e._decodingState=W4e.FAILED,e._rejectReadyPromise(t)})))}return!0}const v5e=new be,O5e=new g;q4e.prototype.update=function(e){const t=e.context,n=y5e(this,t);if(n)return;let i=!1,o=!Me.equals(this._modelMatrix,this.modelMatrix);if(this._mode!==e.mode&&(this._mode=e.mode,o=!0),Object(r["a"])(this._drawCommand)||(d5e(this,e),o=!0,i=!0,this._resolveReadyPromise(),this._parsedContent=void 0),o){Me.clone(this.modelMatrix,this._modelMatrix);const t=this._drawCommand.modelMatrix;if(Me.clone(this._modelMatrix,t),Object(r["a"])(this._rtcCenter)&&Me.multiplyByTranslation(t,this._rtcCenter,t),Object(r["a"])(this._quantizedVolumeOffset)&&Me.multiplyByTranslation(t,this._quantizedVolumeOffset,t),e.mode!==SH.SCENE3D){const n=e.mapProjection,i=Me.getColumn(t,3,v5e);be.equals(i,be.UNIT_W)||ka.basisTo2D(n,t,t)}const n=this._drawCommand.boundingVolume;if(Tt.clone(this._boundingSphere,n),this._cull){const e=n.center;Me.multiplyByPoint(t,e,e);const i=Me.getScale(t,O5e);n.radius*=g.maximumComponent(i)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,i=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,i=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,i=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,i=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,i=!0);const a=this.splitDirection!==m9.NONE;this._splittingEnabled!==a&&(this._splittingEnabled=a,i=!0),i&&b5e(this,e,this._style),this._drawCommand.castShadows=DH.castShadows(this.shadows),this._drawCommand.receiveShadows=DH.receiveShadows(this.shadows);const s=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=s?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=s?hF.TRANSLUCENT:this._opaquePass;const c=e.commandList,l=e.passes;(l.render||l.pick)&&c.push(this._drawCommand)},q4e.prototype.isDestroyed=function(){return!1},q4e.prototype.destroy=function(){const e=this._drawCommand;return Object(r["a"])(e)&&(e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy()),Wc(this)};var A5e=q4e;const w5e={NEAREST:0,LINEAR:1};var T5e=w5e;function C5e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.fragmentShader,n=Object(o["a"])(e.textureScale,1),s=Object(o["a"])(e.pixelFormat,fx.RGBA);if(i["a"].typeOf.string("options.fragmentShader",t),i["a"].typeOf.number.greaterThan("options.textureScale",n,0),i["a"].typeOf.number.lessThanOrEquals("options.textureScale",n,1),!fx.isColorFormat(s))throw new a["a"]("options.pixelFormat must be a color format.");this._fragmentShader=t,this._uniforms=e.uniforms,this._textureScale=n,this._forcePowerOfTwo=Object(o["a"])(e.forcePowerOfTwo,!1),this._sampleMode=Object(o["a"])(e.sampleMode,T5e.NEAREST),this._pixelFormat=s,this._pixelDatatype=Object(o["a"])(e.pixelDatatype,hx.UNSIGNED_BYTE),this._clearColor=Object(o["a"])(e.clearColor,Dm.BLACK),this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;const c=new zze;c.scissorTest={enabled:!0,rectangle:Object(r["a"])(e.scissorRectangle)?Au.clone(e.scissorRectangle):new Au},this._passState=c,this._ready=!1;let l=e.name;Object(r["a"])(l)||(l=ML()),this._name=l,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(C5e.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if(Object(r["a"])(this._textureCache)){const e=this._textureCache.getFramebuffer(this._name);if(Object(r["a"])(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});const E5e=/uniform\s+sampler2D\s+depthTexture/g;function x5e(e,t,n){const i=t[n];return("string"===typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(i){const o=t[n];t[n]=i;const a=e._actualUniforms,s=a[n];Object(r["a"])(s)&&s!==o&&s instanceof lB&&!Object(r["a"])(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(s),delete a[n],delete a[`${n}Dimensions`]),o instanceof lB&&e._texturesToRelease.push(o),"string"===typeof i||i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof HTMLVideoElement||i instanceof ImageData?e._dirtyUniforms.push(n):a[n]=i}}}function S5e(e,t){return function(){const n=e._actualUniforms[t];return"function"===typeof n?n():n}}function I5e(e,t){return function(){const n=e[t]();if(Object(r["a"])(n))return n.dimensions}}function D5e(e){if(Object(r["a"])(e._uniformMap))return;const t={},n={},i=e._uniforms,o=e._actualUniforms;for(const r in i)if(i.hasOwnProperty(r)){"function"!==typeof i[r]?(t[r]=S5e(e,r),n[r]=x5e(e,i,r)):(t[r]=i[r],n[r]=i[r]),o[r]=i[r];const a=t[r]();("string"===typeof a||a instanceof lB||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement)&&(t[`${r}Dimensions`]=I5e(t,r))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=Object(qE["a"])(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}function P5e(e,t){if(Object(r["a"])(e._command)&&!e._logDepthChanged&&!e._selectedDirty)return;let n=e._fragmentShader;if(Object(r["a"])(e._selectedIdTexture)){const t=e._selectedIdTexture.width;n=n.replace(/varying\s+vec2\s+v_textureCoordinates;/g,""),n=`#define CZM_SELECTED_FEATURE \nuniform sampler2D czm_idTexture; \nuniform sampler2D czm_selectedIdTexture; \nuniform float czm_selectedIdTextureStep; \nvarying vec2 v_textureCoordinates; \nbool czm_selected(vec2 offset) \n{ \n    bool selected = false;\n    vec4 id = texture2D(czm_idTexture, v_textureCoordinates + offset); \n    for (int i = 0; i < ${t}; ++i) \n`+"    { \n        vec4 selectedId = texture2D(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5)); \n        if (all(equal(id, selectedId))) \n        { \n            return true; \n        } \n    } \n    return false; \n} \n\nbool czm_selected() \n{ \n    return czm_selected(vec2(0.0)); \n"+`} \n\n${n}`}const i=new EV({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}function j5e(e){const t=e._sampleMode;let n,i;t===T5e.LINEAR?(n=tB.LINEAR,i=ZN.LINEAR):(n=tB.NEAREST,i=ZN.NEAREST);const o=e._sampler;Object(r["a"])(o)&&o.minificationFilter===n&&o.magnificationFilter===i||(e._sampler=new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i}))}function R5e(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function L5e(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function M5e(e,t){let n,i,o;const a=e._texturesToRelease;let s=a.length;for(n=0;n<s;++n)i=a[n],i=i&&i.destroy();a.length=0;const c=e._texturesToCreate;for(s=c.length,n=0;n<s;++n){const i=c[n];o=i.name;const r=i.source;e._actualUniforms[o]=new lB({context:t,source:r})}c.length=0;const l=e._dirtyUniforms;if(0===l.length&&!Object(r["a"])(e._texturePromise))return void(e._ready=!0);if(0===l.length||Object(r["a"])(e._texturePromise))return;s=l.length;const u=e._uniforms,h=[];for(n=0;n<s;++n){o=l[n];const t=u[o],i=e._textureCache.getStageByName(t);if(Object(r["a"])(i))e._actualUniforms[o]=L5e(e,t);else if("string"===typeof t){const n=new Et["a"]({url:t});h.push(n.fetchImage().then(R5e(e,o)))}else e._texturesToCreate.push({name:o,source:t})}l.length=0,h.length>0?(e._ready=!1,e._texturePromise=Promise.all(h).then((function(){e._ready=!0,e._texturePromise=void 0}))):e._ready=!0}function N5e(e){Object(r["a"])(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();const t=e._textureCache;if(!Object(r["a"])(t))return;const n=e._uniforms,i=e._actualUniforms;for(const o in i)i.hasOwnProperty(o)&&i[o]instanceof lB&&(Object(r["a"])(t.getStageByName(n[o]))||i[o].destroy(),e._dirtyUniforms.push(o))}function B5e(e){let t=Object(r["a"])(e._selected)?e._selected.length:0;const n=Object(r["a"])(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,Object(r["a"])(e._selected)&&Object(r["a"])(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):Object(r["a"])(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&Object(r["a"])(e._combinedSelected)){if(!Object(r["a"])(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}function F5e(e,t){if(!e._selectedDirty)return;e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;const n=e._combinedSelected;if(!Object(r["a"])(n))return;let i,o,a=0;const s=n.length;for(i=0;i<s;++i)o=n[i],Object(r["a"])(o.pickIds)?a+=o.pickIds.length:Object(r["a"])(o.pickId)&&++a;if(0===s||0===a){const n=new Uint8Array(4);return n[0]=255,n[1]=255,n[2]=255,n[3]=255,void(e._selectedIdTexture=new lB({context:t,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,source:{arrayBufferView:n,width:1,height:1},sampler:rB.NEAREST}))}let c,l=0;const u=new Uint8Array(4*a);for(i=0;i<s;++i)if(o=n[i],Object(r["a"])(o.pickIds)){const e=o.pickIds,t=e.length;for(let n=0;n<t;++n)c=e[n].color,u[l]=Dm.floatToByte(c.red),u[l+1]=Dm.floatToByte(c.green),u[l+2]=Dm.floatToByte(c.blue),u[l+3]=Dm.floatToByte(c.alpha),l+=4}else Object(r["a"])(o.pickId)&&(c=o.pickId.color,u[l]=Dm.floatToByte(c.red),u[l+1]=Dm.floatToByte(c.green),u[l+2]=Dm.floatToByte(c.blue),u[l+3]=Dm.floatToByte(c.alpha),l+=4);e._selectedIdTexture=new lB({context:t,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,source:{arrayBufferView:u,width:a,height:1},sampler:rB.NEAREST})}C5e.prototype._isSupported=function(e){return!E5e.test(this._fragmentShader)||e.depthTexture},C5e.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||N5e(this),this._enabled=this.enabled,!this._enabled)return;if(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=B5e(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=Object(r["a"])(this._selected)?this._selected.length:0,this._parentSelectedLength=Object(r["a"])(this._parentSelected)?this._parentSelected.length:0,F5e(this,e),D5e(this),M5e(this,e),P5e(this,e),j5e(this),this._selectedDirty=!1,!this._ready)return;const n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,!Object(r["a"])(n))return;const i=n.getColorTexture(0);let o;i.width===e.drawingBufferWidth&&i.height===e.drawingBufferHeight||(o=this._renderState,Object(r["a"])(o)&&i.width===o.viewport.width&&i.height===o.viewport.height||(this._renderState=UF.fromCache({viewport:new Au(0,0,i.width,i.height)}))),this._command.renderState=o},C5e.prototype.execute=function(e,t,n,i){if(!Object(r["a"])(this._command)||!Object(r["a"])(this._command.framebuffer)||!this._ready||!this._enabled)return;this._colorTexture=t,this._depthTexture=n,this._idTexture=i,rB.equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);const o=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;Object(r["a"])(o)&&(o.context=e),this._command.execute(e,o)},C5e.prototype.isDestroyed=function(){return!1},C5e.prototype.destroy=function(){return N5e(this),Wc(this)};var z5e=C5e,k5e="uniform sampler2D colorTexture;\n\nvarying vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\nvoid main()\n{\n    vec4 fragmentColor = texture2D(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    color /= texture2D(autoExposure, vec2(0.5)).r;\n#endif\n    color = czm_acesTonemapping(color);\n    color = czm_inverseGamma(color);\n\n    gl_FragColor = vec4(color, fragmentColor.a);\n}\n",U5e="uniform sampler2D randomTexture;\nuniform sampler2D depthTexture;\nuniform float intensity;\nuniform float bias;\nuniform float lengthCap;\nuniform float stepSize;\nuniform float frustumLength;\n\nvarying vec2 v_textureCoordinates;\n\nvec4 clipToEye(vec2 uv, float depth)\n{\n    vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n    vec4 posEC = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posEC = posEC / posEC.w;\n    return posEC;\n}\n\n//Reconstruct Normal Without Edge Removation\nvec3 getNormalXEdge(vec3 posInCamera, float depthU, float depthD, float depthL, float depthR, vec2 pixelSize)\n{\n    vec4 posInCameraUp = clipToEye(v_textureCoordinates - vec2(0.0, pixelSize.y), depthU);\n    vec4 posInCameraDown = clipToEye(v_textureCoordinates + vec2(0.0, pixelSize.y), depthD);\n    vec4 posInCameraLeft = clipToEye(v_textureCoordinates - vec2(pixelSize.x, 0.0), depthL);\n    vec4 posInCameraRight = clipToEye(v_textureCoordinates + vec2(pixelSize.x, 0.0), depthR);\n\n    vec3 up = posInCamera.xyz - posInCameraUp.xyz;\n    vec3 down = posInCameraDown.xyz - posInCamera.xyz;\n    vec3 left = posInCamera.xyz - posInCameraLeft.xyz;\n    vec3 right = posInCameraRight.xyz - posInCamera.xyz;\n\n    vec3 DX = length(left) < length(right) ? left : right;\n    vec3 DY = length(up) < length(down) ? up : down;\n\n    return normalize(cross(DY, DX));\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = clipToEye(v_textureCoordinates, depth);\n\n    if (posInCamera.z > frustumLength)\n    {\n        gl_FragColor = vec4(1.0);\n        return;\n    }\n\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    float depthU = czm_readDepth(depthTexture, v_textureCoordinates - vec2(0.0, pixelSize.y));\n    float depthD = czm_readDepth(depthTexture, v_textureCoordinates + vec2(0.0, pixelSize.y));\n    float depthL = czm_readDepth(depthTexture, v_textureCoordinates - vec2(pixelSize.x, 0.0));\n    float depthR = czm_readDepth(depthTexture, v_textureCoordinates + vec2(pixelSize.x, 0.0));\n    vec3 normalInCamera = getNormalXEdge(posInCamera.xyz, depthU, depthD, depthL, depthR, pixelSize);\n\n    float ao = 0.0;\n    vec2 sampleDirection = vec2(1.0, 0.0);\n    float gapAngle = 90.0 * czm_radiansPerDegree;\n\n    // RandomNoise\n    float randomVal = texture2D(randomTexture, v_textureCoordinates).x;\n\n    //Loop for each direction\n    for (int i = 0; i < 4; i++)\n    {\n        float newGapAngle = gapAngle * (float(i) + randomVal);\n        float cosVal = cos(newGapAngle);\n        float sinVal = sin(newGapAngle);\n\n        //Rotate Sampling Direction\n        vec2 rotatedSampleDirection = vec2(cosVal * sampleDirection.x - sinVal * sampleDirection.y, sinVal * sampleDirection.x + cosVal * sampleDirection.y);\n        float localAO = 0.0;\n        float localStepSize = stepSize;\n\n        //Loop for each step\n        for (int j = 0; j < 6; j++)\n        {\n            vec2 newCoords = v_textureCoordinates + rotatedSampleDirection * localStepSize * pixelSize;\n\n            //Exception Handling\n            if(newCoords.x > 1.0 || newCoords.y > 1.0 || newCoords.x < 0.0 || newCoords.y < 0.0)\n            {\n                break;\n            }\n\n            float stepDepthInfo = czm_readDepth(depthTexture, newCoords);\n            vec4 stepPosInCamera = clipToEye(newCoords, stepDepthInfo);\n            vec3 diffVec = stepPosInCamera.xyz - posInCamera.xyz;\n            float len = length(diffVec);\n\n            if (len > lengthCap)\n            {\n                break;\n            }\n\n            float dotVal = clamp(dot(normalInCamera, normalize(diffVec)), 0.0, 1.0 );\n            float weight = len / lengthCap;\n            weight = 1.0 - weight * weight;\n\n            if (dotVal < bias)\n            {\n                dotVal = 0.0;\n            }\n\n            localAO = max(localAO, dotVal * weight);\n            localStepSize += stepSize;\n        }\n        ao += localAO;\n    }\n\n    ao /= 4.0;\n    ao = 1.0 - clamp(ao, 0.0, 1.0);\n    ao = pow(ao, intensity);\n    gl_FragColor = vec4(vec3(ao), 1.0);\n}\n",V5e="uniform sampler2D colorTexture;\nuniform sampler2D ambientOcclusionTexture;\nuniform bool ambientOcclusionOnly;\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 color = texture2D(colorTexture, v_textureCoordinates).rgb;\n    vec3 ao = texture2D(ambientOcclusionTexture, v_textureCoordinates).rgb;\n    gl_FragColor.rgb = ambientOcclusionOnly ? ao : ao * color;\n}\n",H5e="uniform sampler2D colorTexture;\nuniform float gradations;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture2D(colorTexture, v_textureCoordinates).rgb;\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        gl_FragColor = vec4(rgb, 1.0);\n        return;\n    }\n#endif\n    float luminance = czm_luminance(rgb);\n    float darkness = luminance * gradations;\n    darkness = (darkness - fract(darkness)) / gradations;\n    gl_FragColor = vec4(vec3(darkness), 1.0);\n}\n",G5e="uniform sampler2D colorTexture;\nuniform sampler2D bloomTexture;\nuniform bool glowOnly;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n\n#ifdef CZM_SELECTED_FEATURE\n    if (czm_selected()) {\n        gl_FragColor = color;\n        return;\n    }\n#endif\n\n    vec4 bloom = texture2D(bloomTexture, v_textureCoordinates);\n    gl_FragColor = glowOnly ? bloom : bloom + color;\n}\n",W5e="uniform sampler2D colorTexture;\nuniform float brightness;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 rgb = texture2D(colorTexture, v_textureCoordinates).rgb;\n    vec3 target = vec3(0.0);\n    gl_FragColor = vec4(mix(target, rgb, brightness), 1.0);\n}\n",q5e="uniform sampler2D colorTexture;\nuniform float contrast;\nuniform float brightness;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec3 sceneColor = texture2D(colorTexture, v_textureCoordinates).xyz;\n    sceneColor = czm_RGBToHSB(sceneColor);\n    sceneColor.z += brightness;\n    sceneColor = czm_HSBToRGB(sceneColor);\n\n    float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));\n    sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);\n    gl_FragColor = vec4(sceneColor, 1.0);\n}\n",Y5e="uniform sampler2D colorTexture;\nuniform sampler2D blurTexture;\nuniform sampler2D depthTexture;\nuniform float focalDistance;\n\nvarying vec2 v_textureCoordinates;\n\nvec4 toEye(vec2 uv, float depth)\n{\n   vec2 xy = vec2((uv.x * 2.0 - 1.0), ((1.0 - uv.y) * 2.0 - 1.0));\n   vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n   posInCamera = posInCamera / posInCamera.w;\n   return posInCamera;\n}\n\nfloat computeDepthBlur(float depth)\n{\n    float f;\n    if (depth < focalDistance)\n    {\n        f = (focalDistance - depth) / (focalDistance - czm_currentFrustum.x);\n    }\n    else\n    {\n        f = (depth - focalDistance) / (czm_currentFrustum.y - focalDistance);\n        f = pow(f, 0.1);\n    }\n    f *= f;\n    f = clamp(f, 0.0, 1.0);\n    return pow(f, 0.5);\n}\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    vec4 posInCamera = toEye(v_textureCoordinates, depth);\n    float d = computeDepthBlur(-posInCamera.z);\n    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), texture2D(blurTexture, v_textureCoordinates), d);\n}\n",X5e="uniform sampler2D depthTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n    gl_FragColor = vec4(vec3(depth), 1.0);\n}\n",K5e="uniform sampler2D depthTexture;\nuniform float length;\nuniform vec4 color;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    float directions[3];\n    directions[0] = -1.0;\n    directions[1] = 0.0;\n    directions[2] = 1.0;\n\n    float scalars[3];\n    scalars[0] = 3.0;\n    scalars[1] = 10.0;\n    scalars[2] = 3.0;\n\n    float padx = czm_pixelRatio / czm_viewport.z;\n    float pady = czm_pixelRatio / czm_viewport.w;\n\n#ifdef CZM_SELECTED_FEATURE\n    bool selected = false;\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        selected = selected || czm_selected(vec2(-padx, dir * pady));\n        selected = selected || czm_selected(vec2(padx, dir * pady));\n        selected = selected || czm_selected(vec2(dir * padx, -pady));\n        selected = selected || czm_selected(vec2(dir * padx, pady));\n        if (selected)\n        {\n            break;\n        }\n    }\n    if (!selected)\n    {\n        gl_FragColor = vec4(color.rgb, 0.0);\n        return;\n    }\n#endif\n\n    float horizEdge = 0.0;\n    float vertEdge = 0.0;\n\n    for (int i = 0; i < 3; ++i)\n    {\n        float dir = directions[i];\n        float scale = scalars[i];\n\n        horizEdge -= texture2D(depthTexture, v_textureCoordinates + vec2(-padx, dir * pady)).x * scale;\n        horizEdge += texture2D(depthTexture, v_textureCoordinates + vec2(padx, dir * pady)).x * scale;\n\n        vertEdge -= texture2D(depthTexture, v_textureCoordinates + vec2(dir * padx, -pady)).x * scale;\n        vertEdge += texture2D(depthTexture, v_textureCoordinates + vec2(dir * padx, pady)).x * scale;\n    }\n\n    float len = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\n    gl_FragColor = vec4(color.rgb, len > length ? color.a : 0.0);\n}\n",$5e="uniform sampler2D colorTexture;\n\nvarying vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See slides 142 and 143:\n//     http://www.gdcvault.com/play/1012459/Uncharted_2__HDR_Lighting\n\nvoid main()\n{\n    vec4 fragmentColor = texture2D(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n\n#ifdef AUTO_EXPOSURE\n    float exposure = texture2D(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n\n\tconst float A = 0.22; // shoulder strength\n\tconst float B = 0.30; // linear strength\n\tconst float C = 0.10; // linear angle\n\tconst float D = 0.20; // toe strength\n\tconst float E = 0.01; // toe numerator\n\tconst float F = 0.30; // toe denominator\n\n\tconst float white = 11.2; // linear white point value\n\n\tvec3 c = ((color * (A * color + C * B) + D * E) / (color * ( A * color + B) + D * F)) - E / F;\n\tfloat w = ((white * (A * white + C * B) + D * E) / (white * ( A * white + B) + D * F)) - E / F;\n\n\tc = czm_inverseGamma(c / w);\n\tgl_FragColor = vec4(c, fragmentColor.a);\n}\n",J5e="varying vec2 v_textureCoordinates;\n\nuniform sampler2D colorTexture;\n\nconst float fxaaQualitySubpix = 0.5;\nconst float fxaaQualityEdgeThreshold = 0.125;\nconst float fxaaQualityEdgeThresholdMin = 0.0833;\n\nvoid main()\n{\n    vec2 fxaaQualityRcpFrame = vec2(1.0) / czm_viewport.zw;\n    vec4 color = FxaaPixelShader(\n        v_textureCoordinates,\n        colorTexture,\n        fxaaQualityRcpFrame,\n        fxaaQualitySubpix,\n        fxaaQualityEdgeThreshold,\n        fxaaQualityEdgeThresholdMin);\n    float alpha = texture2D(colorTexture, v_textureCoordinates).a;\n    gl_FragColor = vec4(color.rgb, alpha);\n}\n",Q5e="#define SAMPLES 8\n\nuniform float delta;\nuniform float sigma;\nuniform float direction; // 0.0 for x direction, 1.0 for y direction\n\nuniform sampler2D colorTexture;\n\n#ifdef USE_STEP_SIZE\nuniform float stepSize;\n#else\nuniform vec2 step;\n#endif\n\nvarying vec2 v_textureCoordinates;\n\n//  Incremental Computation of the Gaussian:\n//  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch40.html\n\nvoid main()\n{\n    vec2 st = v_textureCoordinates;\n    vec2 dir = vec2(1.0 - direction, direction);\n\n#ifdef USE_STEP_SIZE\n    vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));\n#else\n    vec2 step = step;\n#endif\n\n    vec3 g;\n    g.x = 1.0 / (sqrt(czm_twoPi) * sigma);\n    g.y = exp((-0.5 * delta * delta) / (sigma * sigma));\n    g.z = g.y * g.y;\n\n    vec4 result = texture2D(colorTexture, st) * g.x;\n    for (int i = 1; i < SAMPLES; ++i)\n    {\n        g.xy *= g.yz;\n\n        vec2 offset = float(i) * dir * step;\n        result += texture2D(colorTexture, st - offset) * g.x;\n        result += texture2D(colorTexture, st + offset) * g.x;\n    }\n\n    gl_FragColor = result;\n}\n",Z5e="uniform sampler2D colorTexture;\nuniform sampler2D dirtTexture;\nuniform sampler2D starTexture;\nuniform vec2 dirtTextureDimensions;\nuniform float distortion;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform float dirtAmount;\nuniform float earthRadius;\nuniform float intensity;\n\nvarying vec2 v_textureCoordinates;\n\n// whether it is in space or not\n// 6500000.0 is empirical value\n#define DISTANCE_TO_SPACE 6500000.0\n\n// return ndc from world coordinate biased earthRadius\nvec4 getNDCFromWC(vec3 WC, float earthRadius)\n{\n    vec4 positionEC = czm_view * vec4(WC, 1.0);\n    positionEC = vec4(positionEC.x + earthRadius, positionEC.y, positionEC.z, 1.0);\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    return czm_viewportOrthographic * vec4(positionWC.xy, -positionWC.z, 1.0);\n}\n\n// Check if current pixel is included Earth\n// if then mask it gradually\nfloat isInEarth(vec2 texcoord, vec2 sceneSize)\n{\n    vec2 NDC = texcoord * 2.0 - 1.0;\n    vec4 earthPosSC = getNDCFromWC(vec3(0.0), 0.0);\n    vec4 earthPosSCEdge = getNDCFromWC(vec3(0.0), earthRadius * 1.5);\n    NDC.xy -= earthPosSC.xy;\n\n    float X = abs(NDC.x) * sceneSize.x;\n    float Y = abs(NDC.y) * sceneSize.y;\n\n    return clamp(0.0, 1.0, max(sqrt(X * X + Y * Y) / max(abs(earthPosSCEdge.x * sceneSize.x), 1.0) - 0.8 , 0.0));\n}\n\n// For Chromatic effect\nvec4 textureDistorted(sampler2D tex, vec2 texcoord, vec2 direction, vec3 distortion, bool isSpace)\n{\n    vec2 sceneSize = czm_viewport.zw;\n    vec3 color;\n    if(isSpace)\n    {\n        color.r = isInEarth(texcoord + direction * distortion.r, sceneSize) * texture2D(tex, texcoord + direction * distortion.r).r;\n        color.g = isInEarth(texcoord + direction * distortion.g, sceneSize) * texture2D(tex, texcoord + direction * distortion.g).g;\n        color.b = isInEarth(texcoord + direction * distortion.b, sceneSize) * texture2D(tex, texcoord + direction * distortion.b).b;\n    }\n    else\n    {\n        color.r = texture2D(tex, texcoord + direction * distortion.r).r;\n        color.g = texture2D(tex, texcoord + direction * distortion.g).g;\n        color.b = texture2D(tex, texcoord + direction * distortion.b).b;\n    }\n    return vec4(clamp(color, 0.0, 1.0), 0.0);\n}\n\nvoid main(void)\n{\n    vec4 originalColor = texture2D(colorTexture, v_textureCoordinates);\n    vec3 rgb = originalColor.rgb;\n    bool isSpace = length(czm_viewerPositionWC.xyz) > DISTANCE_TO_SPACE;\n\n    // Sun position\n    vec4 sunPos = czm_morphTime == 1.0 ? vec4(czm_sunPositionWC, 1.0) : vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    vec4 sunPositionEC = czm_view * sunPos;\n    vec4 sunPositionWC = czm_eyeToWindowCoordinates(sunPositionEC);\n    sunPos = czm_viewportOrthographic * vec4(sunPositionWC.xy, -sunPositionWC.z, 1.0);\n\n    // If sun is not in the screen space, use original color.\n    if(!isSpace || !((sunPos.x >= -1.1 && sunPos.x <= 1.1) && (sunPos.y >= -1.1 && sunPos.y <= 1.1)))\n    {\n        // Lens flare is disabled when not in space until #5932 is fixed.\n        //    https://github.com/CesiumGS/cesium/issues/5932\n        gl_FragColor = originalColor;\n        return;\n    }\n\n    vec2 texcoord = vec2(1.0) - v_textureCoordinates;\n    vec2 pixelSize = czm_pixelRatio / czm_viewport.zw;\n    vec2 invPixelSize = 1.0 / pixelSize;\n    vec3 distortionVec = pixelSize.x * vec3(-distortion, 0.0, distortion);\n\n    // ghost vector to image centre:\n    vec2 ghostVec = (vec2(0.5) - texcoord) * ghostDispersal;\n    vec3 direction = normalize(vec3(ghostVec, 0.0));\n\n    // sample ghosts:\n    vec4 result = vec4(0.0);\n    vec4 ghost = vec4(0.0);\n    for (int i = 0; i < 4; ++i)\n    {\n        vec2 offset = fract(texcoord + ghostVec * float(i));\n        // Only bright spots from the centre of the source image\n        ghost += textureDistorted(colorTexture, offset, direction.xy, distortionVec, isSpace);\n    }\n    result += ghost;\n\n    // sample halo\n    vec2 haloVec = normalize(ghostVec) * haloWidth;\n    float weightForHalo = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n    weightForHalo = pow(1.0 - weightForHalo, 5.0);\n\n    result += textureDistorted(colorTexture, texcoord + haloVec, direction.xy, distortionVec, isSpace) * weightForHalo * 1.5;\n\n    // dirt on lens\n    vec2 dirtTexCoords = (v_textureCoordinates * invPixelSize) / dirtTextureDimensions;\n    if (dirtTexCoords.x > 1.0)\n    {\n        dirtTexCoords.x = mod(floor(dirtTexCoords.x), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.x) :  fract(dirtTexCoords.x);\n    }\n    if (dirtTexCoords.y > 1.0)\n    {\n        dirtTexCoords.y = mod(floor(dirtTexCoords.y), 2.0) == 1.0 ? 1.0 - fract(dirtTexCoords.y) :  fract(dirtTexCoords.y);\n    }\n    result += dirtAmount * texture2D(dirtTexture, dirtTexCoords);\n\n    // Rotating starburst texture's coordinate\n    // dot(czm_view[0].xyz, vec3(0.0, 0.0, 1.0)) + dot(czm_view[1].xyz, vec3(0.0, 1.0, 0.0))\n    float camrot = czm_view[0].z + czm_view[1].y;\n    float cosValue = cos(camrot);\n    float sinValue = sin(camrot);\n    mat3 rotation = mat3(\n        cosValue, -sinValue, 0.0,\n        sinValue, cosValue, 0.0,\n        0.0, 0.0, 1.0\n    );\n\n    vec3 st1 = vec3(v_textureCoordinates * 2.0 - vec2(1.0), 1.0);\n    vec3 st2 = vec3((rotation * st1).xy, 1.0);\n    vec3 st3 = st2 * 0.5 + vec3(0.5);\n    vec2 lensStarTexcoord = st3.xy;\n    float weightForLensFlare = length(vec3(sunPos.xy, 0.0));\n    float oneMinusWeightForLensFlare = max(1.0 - weightForLensFlare, 0.0);\n\n    if (!isSpace)\n    {\n        result *= oneMinusWeightForLensFlare * intensity * 0.2;\n    }\n    else\n    {\n        result *= oneMinusWeightForLensFlare * intensity;\n        result *= texture2D(starTexture, lensStarTexcoord) * pow(weightForLensFlare, 1.0) * max((1.0 - length(vec3(st1.xy, 0.0))), 0.0) * 2.0;\n    }\n\n    result += texture2D(colorTexture, v_textureCoordinates);\n\n    gl_FragColor = result;\n}\n",e6e="uniform sampler2D colorTexture;\nuniform vec3 white;\n\nvarying vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 4:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture2D(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture2D(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = (color * (1.0 + color / white)) / (1.0 + color);\n    color = czm_inverseGamma(color);\n    gl_FragColor = vec4(color, fragmentColor.a);\n}\n",t6e="uniform sampler2D colorTexture;\n\nvarying vec2 v_textureCoordinates;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy ,vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    float noiseValue = rand(v_textureCoordinates + sin(czm_frameNumber)) * 0.1;\n    vec3 rgb = texture2D(colorTexture, v_textureCoordinates).rgb;\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    gl_FragColor = vec4((noiseValue + rgb) * green, 1.0);\n}\n",n6e="uniform sampler2D colorTexture;\n\nvarying vec2 v_textureCoordinates;\n\n#ifdef AUTO_EXPOSURE\nuniform sampler2D autoExposure;\n#endif\n\n// See equation 3:\n//    http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\n\nvoid main()\n{\n    vec4 fragmentColor = texture2D(colorTexture, v_textureCoordinates);\n    vec3 color = fragmentColor.rgb;\n#ifdef AUTO_EXPOSURE\n    float exposure = texture2D(autoExposure, vec2(0.5)).r;\n    color /= exposure;\n#endif\n    color = color / (1.0 + color);\n    color = czm_inverseGamma(color);\n    gl_FragColor = vec4(color, fragmentColor.a);\n}\n",i6e="uniform sampler2D colorTexture;\nuniform sampler2D silhouetteTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main(void)\n{\n    vec4 silhouetteColor = texture2D(silhouetteTexture, v_textureCoordinates);\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    gl_FragColor = mix(color, silhouetteColor, silhouetteColor.a);\n}\n",o6e="/**\n * @license\n * Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *  * Neither the name of NVIDIA CORPORATION nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// NVIDIA GameWorks Graphics Samples GitHub link: https://github.com/NVIDIAGameWorks/GraphicsSamples\n// Original FXAA 3.11 shader link: https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/master/samples/es3-kepler/FXAA/FXAA3_11.h\n\n// Steps used to integrate into Cesium:\n// * The following defines are set:\n//       #define FXAA_PC 1\n//       #define FXAA_WEBGL_1 1\n//       #define FXAA_GREEN_AS_LUMA 1\n//       #define FXAA_EARLY_EXIT 1\n//       #define FXAA_GLSL_120 1\n// * All other preprocessor directives besides the FXAA_QUALITY__P* directives were removed.\n// * Double underscores are invalid for preprocessor directives so replace them with a single underscore. Replace\n//   /FXAA_QUALITY__P(.*)/g with /FXAA_QUALITY__P$1/.\n// * There are no implicit conversions from ivec* to vec* so replace:\n//       #define FxaaInt2 ivec2\n//           with\n//       #define FxaaInt2 vec2\n// * The texture2DLod function is only available in vertex shaders so replace:\n//       #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n//       #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n//           with\n//       #define FxaaTexTop(t, p) texture2D(t, p)\n//       #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n// * FXAA_QUALITY_PRESET is prepended in the javascript code. We may want to expose that setting in the future.\n// * The following parameters to FxaaPixelShader are unused and can be removed:\n//       fxaaConsolePosPos\n//       fxaaConsoleRcpFrameOpt\n//       fxaaConsoleRcpFrameOpt2\n//       fxaaConsole360RcpFrameOpt2\n//       fxaaConsoleEdgeSharpness\n//       fxaaConsoleEdgeThreshold\n//       fxaaConsoleEdgeThresholdMi\n//       fxaaConsole360ConstDir\n\n//\n// Choose the quality preset.\n// This needs to be compiled into the shader as it effects code.\n// Best option to include multiple presets is to\n// in each shader define the preset, then include this file.\n//\n// OPTIONS\n// -----------------------------------------------------------------------\n// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n// 39       - no dither, very expensive\n//\n// NOTES\n// -----------------------------------------------------------------------\n// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n// 13 = about same speed as FXAA 3.9 and better than 12\n// 23 = closest to FXAA 3.9 visually and performance wise\n//  _ = the lowest digit is directly related to performance\n// _  = the highest digit is directly related to style\n//\n//#define FXAA_QUALITY_PRESET 12\n\n\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n#define FxaaBool bool\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 vec2\n#define FxaaTex sampler2D\n\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTexTop(t, p) texture2D(t, p)\n#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r))\n\nFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {___a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n    #define lumaM rgbyM.y\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        return rgbyM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n    FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n}\n";function r6e(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].defined("options.stages",e.stages),i["a"].typeOf.number.greaterThan("options.stages.length",e.stages.length,0),this._stages=e.stages,this._inputPreviousStageTexture=Object(o["a"])(e.inputPreviousStageTexture,!0);let t=e.name;Object(r["a"])(t)||(t=ML()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}function a6e(e){let t=Object(r["a"])(e._selected)?e._selected.length:0;const n=Object(r["a"])(e._parentSelected)?e._parentSelected:0;let i=e._selected!==e._selectedShadow||t!==e._selectedLength;if(i=i||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,Object(r["a"])(e._selected)&&Object(r["a"])(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):Object(r["a"])(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!i&&Object(r["a"])(e._combinedSelected)){if(!Object(r["a"])(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(let n=0;n<t;++n)if(e._combinedSelected[n]!==e._combinedSelectedShadow[n])return!0}return i}Object.defineProperties(r6e.prototype,{ready:{get:function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)t[i].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),r6e.prototype._isSupported=function(e){const t=this._stages,n=t.length;for(let i=0;i<n;++i)if(!t[i]._isSupported(e))return!1;return!0},r6e.prototype.get=function(e){return i["a"].typeOf.number.greaterThanOrEquals("index",e,0),i["a"].typeOf.number.lessThan("index",e,this.length),this._stages[e]},r6e.prototype.update=function(e,t){this._selectedDirty=a6e(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=Object(r["a"])(this._selected)?this._selected.length:0,this._parentSelectedLength=Object(r["a"])(this._parentSelected)?this._parentSelected.length:0;const n=this._stages,i=n.length;for(let o=0;o<i;++o){const i=n[o];this._selectedDirty&&(i.parentSelected=this._combinedSelected),i.update(e,t)}},r6e.prototype.isDestroyed=function(){return!1},r6e.prototype.destroy=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return Wc(this)};var s6e=r6e;const c6e={};function l6e(e){const t=1,n=2,i=1,o=`#define USE_STEP_SIZE\n${Q5e}`,r=new z5e({name:`${e}_x_direction`,fragmentShader:o,uniforms:{delta:t,sigma:n,stepSize:i,direction:0},sampleMode:T5e.LINEAR}),a=new z5e({name:`${e}_y_direction`,fragmentShader:o,uniforms:{delta:t,sigma:n,stepSize:i,direction:1},sampleMode:T5e.LINEAR}),s={};return Object.defineProperties(s,{delta:{get:function(){return r.uniforms.delta},set:function(e){const t=r.uniforms,n=a.uniforms;t.delta=n.delta=e}},sigma:{get:function(){return r.uniforms.sigma},set:function(e){const t=r.uniforms,n=a.uniforms;t.sigma=n.sigma=e}},stepSize:{get:function(){return r.uniforms.stepSize},set:function(e){const t=r.uniforms,n=a.uniforms;t.stepSize=n.stepSize=e}}}),new s6e({name:e,stages:[r,a],uniforms:s})}function u6e(e){if(!Object(r["a"])(e))return c6e.createEdgeDetectionStage();const t=new s6e({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={};let i="",o="";for(let r=0;r<e.length;++r)i+=`uniform sampler2D edgeTexture${r}; \n`,o+=`        vec4 edge${r} = texture2D(edgeTexture${r}, v_textureCoordinates); \n`+`        if (edge${r}.a > 0.0) \n`+"        { \n"+`            color = edge${r}; \n`+"            break; \n        } \n",n[`edgeTexture${r}`]=e[r].name;const a=`${i}varying vec2 v_textureCoordinates; \n`+"void main() { \n    vec4 color = vec4(0.0); \n"+`    for (int i = 0; i < ${e.length}; i++) \n`+`    { \n${o}    } \n`+"    gl_FragColor = color; \n} \n",s=new z5e({name:"czm_edge_detection_combine",fragmentShader:a,uniforms:n});return new s6e({name:"czm_edge_detection_composite",stages:[t,s]})}c6e.createBlurStage=function(){return l6e("czm_blur")},c6e.createDepthOfFieldStage=function(){const e=l6e("czm_depth_of_field_blur"),t=new z5e({name:"czm_depth_of_field_composite",fragmentShader:Y5e,uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new s6e({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},c6e.isDepthOfFieldSupported=function(e){return e.context.depthTexture},c6e.createEdgeDetectionStage=function(){const e=ML();return new z5e({name:`czm_edge_detection_${e}`,fragmentShader:K5e,uniforms:{length:.25,color:Dm.clone(Dm.BLACK)}})},c6e.isEdgeDetectionSupported=function(e){return e.context.depthTexture},c6e.createSilhouetteStage=function(e){const t=u6e(e),n=new z5e({name:"czm_silhouette_color_edges",fragmentShader:i6e,uniforms:{silhouetteTexture:t.name}});return new s6e({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},c6e.isSilhouetteSupported=function(e){return e.context.depthTexture},c6e.createBloomStage=function(){const e=new z5e({name:"czm_bloom_contrast_bias",fragmentShader:q5e,uniforms:{contrast:128,brightness:-.3}}),t=l6e("czm_bloom_blur"),n=new s6e({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),i=new z5e({name:"czm_bloom_generate_composite",fragmentShader:G5e,uniforms:{glowOnly:!1,bloomTexture:n.name}}),o={};return Object.defineProperties(o,{glowOnly:{get:function(){return i.uniforms.glowOnly},set:function(e){i.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new s6e({name:"czm_bloom",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},c6e.createAmbientOcclusionStage=function(){const e=new z5e({name:"czm_ambient_occlusion_generate",fragmentShader:U5e,uniforms:{intensity:3,bias:.1,lengthCap:.26,stepSize:1.95,frustumLength:1e3,randomTexture:void 0}}),t=l6e("czm_ambient_occlusion_blur");t.uniforms.stepSize=.86;const n=new s6e({name:"czm_ambient_occlusion_generate_blur",stages:[e,t]}),i=new z5e({name:"czm_ambient_occlusion_composite",fragmentShader:V5e,uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:n.name}}),o={};return Object.defineProperties(o,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}},frustumLength:{get:function(){return e.uniforms.frustumLength},set:function(t){e.uniforms.frustumLength=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},blurStepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}},ambientOcclusionOnly:{get:function(){return i.uniforms.ambientOcclusionOnly},set:function(e){i.uniforms.ambientOcclusionOnly=e}}}),new s6e({name:"czm_ambient_occlusion",stages:[n,i],inputPreviousStageTexture:!1,uniforms:o})},c6e.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};const h6e=`#define FXAA_QUALITY_PRESET 39 \n${o6e}\n${J5e}`;c6e.createFXAAStage=function(){return new z5e({name:"czm_FXAA",fragmentShader:h6e,sampleMode:T5e.LINEAR})},c6e.createAcesTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=k5e,new z5e({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0}})},c6e.createFilmicTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=$5e,new z5e({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0}})},c6e.createReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=n6e,new z5e({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0}})},c6e.createModifiedReinhardTonemappingStage=function(e){let t=e?"#define AUTO_EXPOSURE\n":"";return t+=e6e,new z5e({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:Dm.WHITE,autoExposure:void 0}})},c6e.createAutoExposureStage=function(){return new bUe},c6e.createBlackAndWhiteStage=function(){return new z5e({name:"czm_black_and_white",fragmentShader:H5e,uniforms:{gradations:5}})},c6e.createBrightnessStage=function(){return new z5e({name:"czm_brightness",fragmentShader:W5e,uniforms:{brightness:.5}})},c6e.createNightVisionStage=function(){return new z5e({name:"czm_night_vision",fragmentShader:t6e})},c6e.createDepthViewStage=function(){return new z5e({name:"czm_depth_view",fragmentShader:X5e})},c6e.createLensFlareStage=function(){return new z5e({name:"czm_lens_flare",fragmentShader:Z5e,uniforms:{dirtTexture:Bt("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:Bt("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:k.WGS84.maximumRadius}})};var d6e=c6e;function f6e(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function p6e(e){while(Object(r["a"])(e.length))e=e.get(e.length-1);return e.name}function m6e(e,t,n,i,o){if(!i.enabled||!i._isSupported(t))return o;const a=n[i.name]={};if(Object(r["a"])(o)){const t=e.getStageByName(o);a[p6e(t)]=!0}const s=i.uniforms;if(Object(r["a"])(s)){const t=Object.getOwnPropertyNames(s),n=t.length;for(let i=0;i<n;++i){const n=s[t[i]];if("string"===typeof n){const t=e.getStageByName(n);Object(r["a"])(t)&&(a[p6e(t)]=!0)}}}return i.name}function _6e(e,t,n,i,o){if(Object(r["a"])(i.enabled)&&!i.enabled||Object(r["a"])(i._isSupported)&&!i._isSupported(t))return o;const a=o,s=!Object(r["a"])(i.inputPreviousStageTexture)||i.inputPreviousStageTexture;let c=o;const l=i.length;for(let d=0;d<l;++d){const a=i.get(d);c=Object(r["a"])(a.length)?_6e(e,t,n,a,o):m6e(e,t,n,a,o),s&&(o=c)}let u,h;if(s)for(u=1;u<l;++u)h=p6e(i.get(u)),Object(r["a"])(n[h])||(n[h]={}),n[h][a]=!0;else for(u=1;u<l;++u){h=p6e(i.get(u));const e=n[h];for(let t=0;t<u;++t)e[p6e(i.get(t))]=!0}return c}function g6e(e,t){const n={};if(Object(r["a"])(e.ambientOcclusion)){const i=e.ambientOcclusion,o=e.bloom,r=e._tonemapping,a=e.fxaa;let s=_6e(e,t,n,i,void 0);s=_6e(e,t,n,o,s),s=m6e(e,t,n,r,s),s=_6e(e,t,n,e,s),m6e(e,t,n,a,s)}else _6e(e,t,n,e,void 0);return n}function b6e(e,t,n){const i=e._collection,o=i.getStageByName(t),a=o._textureScale,s=o._forcePowerOfTwo,c=o._pixelFormat,l=o._pixelDatatype,u=o._clearColor;let h,d;const f=e._framebuffers,p=f.length;for(h=0;h<p;++h){if(d=f[h],a!==d.textureScale||s!==d.forcePowerOfTwo||c!==d.pixelFormat||l!==d.pixelDatatype||!Dm.equals(u,d.clearColor))continue;const e=d.stages,t=e.length;let i=!1;for(let o=0;o<t;++o)if(n[e[o]]){i=!0;break}if(!i)break}return Object(r["a"])(d)&&h<p?(d.stages.push(t),d):(d={textureScale:a,forcePowerOfTwo:s,pixelFormat:c,pixelDatatype:l,clearColor:u,stages:[t],buffer:new N8({pixelFormat:c,pixelDatatype:l}),clear:void 0},f.push(d),d)}function y6e(e,t){const n=g6e(e._collection,t);for(const i in n)n.hasOwnProperty(i)&&(e._stageNameToFramebuffer[i]=b6e(e,i,n[i]))}function v6e(e){const t=e._framebuffers,n=t.length;for(let i=0;i<n;++i){const e=t[i];e.buffer.destroy()}}function O6e(e,t){const n=e._width,i=e._height,o=e._framebuffers,r=o.length;for(let a=0;a<r;++a){const e=o[a],r=e.textureScale;let c=Math.ceil(n*r),l=Math.ceil(i*r),u=Math.min(c,l);e.forcePowerOfTwo&&(s["a"].isPowerOfTwo(u)||(u=s["a"].nextPowerOfTwo(u)),c=u,l=u),e.buffer.update(t,c,l),e.clear=new xX({color:e.clearColor,framebuffer:e.buffer.framebuffer})}}f6e.prototype.updateDependencies=function(){this._updateDependencies=!0},f6e.prototype.update=function(e){const t=this._collection,n=this._updateDependencies,i=Object(r["a"])(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),o=Object(r["a"])(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),a=Object(r["a"])(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),s=Object(r["a"])(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),c=!Object(r["a"])(t._activeStages)||t._activeStages.length>0||i||o||a||s;if((n||!c&&this._framebuffers.length>0)&&(v6e(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),!n&&!c)return;0===this._framebuffers.length&&y6e(this,e);const l=e.drawingBufferWidth,u=e.drawingBufferHeight,h=this._width!==l||this._height!==u;(n||h)&&(this._width=l,this._height=u,this._updateDependencies=!1,v6e(this),O6e(this,e))},f6e.prototype.clear=function(e){const t=this._framebuffers;for(let n=0;n<t.length;++n)t[n].clear.execute(e)},f6e.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},f6e.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},f6e.prototype.getFramebuffer=function(e){const t=this._stageNameToFramebuffer[e];if(Object(r["a"])(t))return t.buffer.framebuffer},f6e.prototype.isDestroyed=function(){return!1},f6e.prototype.destroy=function(){return v6e(this),Wc(this)};var A6e=f6e;const w6e={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===w6e.REINHARD||e===w6e.MODIFIED_REINHARD||e===w6e.FILMIC||e===w6e.ACES}};var T6e=Object.freeze(w6e);const C6e=[];function E6e(){const e=d6e.createFXAAStage(),t=d6e.createAmbientOcclusionStage(),n=d6e.createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=d6e.createAutoExposureStage(),this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=T6e.ACES;const i=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,i.enabled=!1;const o=new A6e(this),a={},s=C6e;s.push(e,t,n,i);while(s.length>0){const e=s.pop();a[e.name]=e,e._textureCache=o;const t=e.length;if(Object(r["a"])(t))for(let n=0;n<t;++n)s.push(e.get(n))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;const c=this;t.uniforms.randomTexture=function(){return c._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._activeStagesChanged=!1,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=a,this._textureCache=o}function x6e(e){if(!e._stagesRemoved)return;e._stagesRemoved=!1;const t=[],n=e._stages,i=n.length;for(let o=0,r=0;o<i;++o){const e=n[o];e&&(e._index=r++,t.push(e))}e._stages=t}function S6e(e){while(Object(r["a"])(e.length))e=e.get(e.length-1);return e.outputTexture}function I6e(e,t,n,i,o){if(Object(r["a"])(e.execute))return void e.execute(t,n,i,o);const a=e.length;let s;if(e.inputPreviousStageTexture)for(I6e(e.get(0),t,n,i,o),s=1;s<a;++s)I6e(e.get(s),t,S6e(e.get(s-1)),i,o);else for(s=0;s<a;++s)I6e(e.get(s),t,n,i,o)}Object.defineProperties(E6e.prototype,{ready:{get:function(){let e=!1;const t=this._stages,n=t.length;for(let s=n-1;s>=0;--s){const n=t[s];e=e||n.ready&&n.enabled}const i=this._fxaa,o=this._ao,r=this._bloom,a=this._tonemapping;return e=e||i.ready&&i.enabled,e=e||o.ready&&o.enabled,e=e||r.ready&&r.enabled,e=e||a.ready&&a.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return x6e(this),this._stages.length}},outputTexture:{get:function(){const e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);const t=this._stages,n=t.length;for(let s=n-1;s>=0;--s){const e=t[s];if(Object(r["a"])(e)&&e.ready&&e.enabled)return this.getOutputTexture(e.name)}const i=this._tonemapping;if(i.enabled&&i.ready)return this.getOutputTexture(i.name);const o=this._bloom;if(o.enabled&&o.ready)return this.getOutputTexture(o.name);const a=this._ao;return a.enabled&&a.ready?this.getOutputTexture(a.name):void 0}},hasSelected:{get:function(){const e=this._stages.slice();while(e.length>0){const t=e.pop();if(!Object(r["a"])(t))continue;if(Object(r["a"])(t.selected))return!0;const n=t.length;if(Object(r["a"])(n))for(let i=0;i<n;++i)e.push(t.get(i))}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper===e)return;if(!T6e.validate(e))throw new a["a"]("tonemapper was set to an invalid value.");Object(r["a"])(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());const t=this._autoExposureEnabled;let n;switch(e){case T6e.REINHARD:n=d6e.createReinhardTonemappingStage(t);break;case T6e.MODIFIED_REINHARD:n=d6e.createModifiedReinhardTonemappingStage(t);break;case T6e.FILMIC:n=d6e.createFilmicTonemappingStage(t);break;default:n=d6e.createAcesTonemappingStage(t);break}if(t){const e=this._autoExposure;n.uniforms.autoExposure=function(){return e.outputTexture}}this._tonemapper=e,this._tonemapping=n,Object(r["a"])(this._stageNames)&&(this._stageNames[n.name]=n,n._textureCache=this._textureCache),this._textureCacheDirty=!0}}}),E6e.prototype.add=function(e){i["a"].typeOf.object("stage",e);const t=this._stageNames,n=C6e;n.push(e);while(n.length>0){const e=n.pop();if(Object(r["a"])(t[e.name]))throw new a["a"](`${e.name} has already been added to the collection or does not have a unique name.`);t[e.name]=e,e._textureCache=this._textureCache;const i=e.length;if(Object(r["a"])(i))for(let t=0;t<i;++t)n.push(e.get(t))}const o=this._stages;return e._index=o.length,o.push(e),this._textureCacheDirty=!0,e},E6e.prototype.remove=function(e){if(!this.contains(e))return!1;const t=this._stageNames,n=C6e;n.push(e);while(n.length>0){const e=n.pop();delete t[e.name];const i=e.length;if(Object(r["a"])(i))for(let t=0;t<i;++t)n.push(e.get(t))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},E6e.prototype.contains=function(e){return Object(r["a"])(e)&&Object(r["a"])(e._index)&&e._textureCache===this._textureCache},E6e.prototype.get=function(e){x6e(this);const t=this._stages,n=t.length;return i["a"].typeOf.number.greaterThanOrEquals("stages length",n,0),i["a"].typeOf.number.greaterThanOrEquals("index",e,0),i["a"].typeOf.number.lessThan("index",e,n),t[e]},E6e.prototype.removeAll=function(){const e=this._stages,t=e.length;for(let n=0;n<t;++n)this.remove(e[n]);e.length=0},E6e.prototype.getStageByName=function(e){return this._stageNames[e]},E6e.prototype.update=function(e,t,n){x6e(this);const i=this._activeStages,o=this._activeStages=this._previousActiveStages;this._previousActiveStages=i;const a=this._stages;let s,c,l=o.length=a.length,u=0;for(s=0;s<l;++s)c=a[s],c.ready&&c.enabled&&c._isSupported(e)&&(o[u++]=c);o.length=u;let h=u!==i.length;if(!h)for(s=0;s<u;++s)if(o[s]!==i[s]){h=!0;break}const d=this._ao,f=this._bloom,p=this._autoExposure,m=this._tonemapping,_=this._fxaa;m.enabled=n;const g=d.enabled&&d._isSupported(e),b=f.enabled&&f._isSupported(e),y=m.enabled&&m._isSupported(e),v=_.enabled&&_._isSupported(e);if((h||this._textureCacheDirty||g!==this._aoEnabled||b!==this._bloomEnabled||y!==this._tonemappingEnabled||v!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._aoEnabled=g,this._bloomEnabled=b,this._tonemappingEnabled=y,this._fxaaEnabled=v,this._textureCacheDirty=!1),Object(r["a"])(this._randomTexture)&&!g&&(this._randomTexture.destroy(),this._randomTexture=void 0),!Object(r["a"])(this._randomTexture)&&g){l=196608;const t=new Uint8Array(l);for(s=0;s<l;s+=3)t[s]=Math.floor(255*Math.random());this._randomTexture=new lB({context:e,pixelFormat:fx.RGB,pixelDatatype:hx.UNSIGNED_BYTE,source:{arrayBufferView:t,width:256,height:256},sampler:new rB({wrapS:iB.REPEAT,wrapT:iB.REPEAT,minificationFilter:tB.NEAREST,magnificationFilter:ZN.NEAREST})})}for(this._textureCache.update(e),_.update(e,t),d.update(e,t),f.update(e,t),m.update(e,t),this._autoExposureEnabled&&p.update(e,t),l=a.length,s=0;s<l;++s)a[s].update(e,t);for(u=0,s=0;s<l;++s)c=a[s],c.ready&&c.enabled&&c._isSupported(e)&&u++;h=u!==o.length,h&&this.update(e,t,n)},E6e.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},E6e.prototype.getOutputTexture=function(e){const t=this.getStageByName(e);if(Object(r["a"])(t))return S6e(t)},E6e.prototype.execute=function(e,t,n,i){const o=this._activeStages,r=o.length,a=this._fxaa,s=this._ao,c=this._bloom,l=this._autoExposure,u=this._tonemapping,h=s.enabled&&s._isSupported(e),d=c.enabled&&c._isSupported(e),f=this._autoExposureEnabled,p=u.enabled&&u._isSupported(e),m=a.enabled&&a._isSupported(e);if(!m&&!h&&!d&&!p&&0===r)return;let _=t;h&&s.ready&&(I6e(s,e,_,n,i),_=S6e(s)),d&&c.ready&&(I6e(c,e,_,n,i),_=S6e(c)),f&&l.ready&&I6e(l,e,_,n,i),p&&u.ready&&(I6e(u,e,_,n,i),_=S6e(u));let g=_;if(r>0){I6e(o[0],e,_,n,i);for(let t=1;t<r;++t)I6e(o[t],e,S6e(o[t-1]),n,i);g=S6e(o[r-1])}m&&a.ready&&I6e(a,e,g,n,i)},E6e.prototype.copy=function(e,t){if(!Object(r["a"])(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(eQe,{uniformMap:{colorTexture:function(){return t.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},E6e.prototype.isDestroyed=function(){return!1},E6e.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),Wc(this)};var D6e=E6e;function P6e(){a["a"].throwInstantiationError()}P6e.computeDefaultLevelZeroMaximumGeometricError=function(e){return 2*e.ellipsoid.maximumRadius*Math.PI*.25/(65*e.getNumberOfXTilesAtLevel(0))},Object.defineProperties(P6e.prototype,{quadtree:{get:a["a"].throwInstantiationError,set:a["a"].throwInstantiationError},ready:{get:a["a"].throwInstantiationError},tilingScheme:{get:a["a"].throwInstantiationError},errorEvent:{get:a["a"].throwInstantiationError}}),P6e.prototype.update=a["a"].throwInstantiationError,P6e.prototype.beginUpdate=a["a"].throwInstantiationError,P6e.prototype.endUpdate=a["a"].throwInstantiationError,P6e.prototype.getLevelMaximumGeometricError=a["a"].throwInstantiationError,P6e.prototype.loadTile=a["a"].throwInstantiationError,P6e.prototype.computeTileVisibility=a["a"].throwInstantiationError,P6e.prototype.showTileThisFrame=a["a"].throwInstantiationError,P6e.prototype.computeDistanceToTile=a["a"].throwInstantiationError,P6e.prototype.isDestroyed=a["a"].throwInstantiationError,P6e.prototype.destroy=a["a"].throwInstantiationError;var j6e=P6e;function R6e(e){i["a"].typeOf.object("scene",e),this._scene=e,this._currentTweens=[],this._morphHandler=void 0,this._morphCancelled=!1,this._completeMorph=void 0,this._morphToOrthographic=!1}R6e.prototype.completeMorph=function(){Object(r["a"])(this._completeMorph)&&this._completeMorph()},R6e.prototype.morphTo2D=function(e,t){Object(r["a"])(this._completeMorph)&&this._completeMorph();const n=this._scene;this._previousMode=n.mode,this._morphToOrthographic=n.camera.frustum instanceof IO,this._previousMode!==SH.SCENE2D&&this._previousMode!==SH.MORPHING&&(this._scene.morphStart.raiseEvent(this,this._previousMode,SH.SCENE2D,!0),n._mode=SH.MORPHING,n.camera._setTransform(Me.IDENTITY),this._previousMode===SH.COLUMBUS_VIEW?x8e(this,e):M8e(this,e,t),0===e&&Object(r["a"])(this._completeMorph)&&this._completeMorph())};const L6e=new g,M6e=new g,N6e=new g,B6e=new g,F6e=new g,z6e=new g,k6e=new g,U6e=new I,V6e=new Me,H6e=new zO,G6e=new IO,W6e={position:void 0,direction:void 0,up:void 0,position2D:void 0,direction2D:void 0,up2D:void 0,frustum:void 0};R6e.prototype.morphToColumbusView=function(e,t){Object(r["a"])(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode===SH.COLUMBUS_VIEW||this._previousMode===SH.MORPHING)return;this._scene.morphStart.raiseEvent(this,this._previousMode,SH.COLUMBUS_VIEW,!0),n.camera._setTransform(Me.IDENTITY);let i=L6e;const o=M6e,a=N6e;if(e>0)i.x=0,i.y=-1,i.z=1,i=g.multiplyByScalar(g.normalize(i,i),5*t.maximumRadius,i),g.negate(g.normalize(i,o),o),g.cross(g.UNIT_X,o,a);else{const e=n.camera;if(this._previousMode===SH.SCENE2D)g.clone(e.position,i),i.z=e.frustum.right-e.frustum.left,g.negate(g.UNIT_Z,o),g.clone(g.UNIT_Y,a);else{g.clone(e.positionWC,i),g.clone(e.directionWC,o),g.clone(e.upWC,a);const r=t.scaleToGeodeticSurface(i,k6e),s=ka.eastNorthUpToFixedFrame(r,t,V6e);Me.inverseTransformation(s,s),n.mapProjection.project(t.cartesianToCartographic(i,U6e),i),Me.multiplyByPointAsVector(s,o,o),Me.multiplyByPointAsVector(s,a,a)}}let c;this._morphToOrthographic?(c=G6e,c.width=n.camera.frustum.right-n.camera.frustum.left,c.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight):(c=H6e,c.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,c.fov=s["a"].toRadians(60));const l=W6e;l.position=i,l.direction=o,l.up=a,l.frustum=c;const u=V8e(l);X6e(this,u),this._previousMode===SH.SCENE2D?B8e(this,e,l,u):(l.position2D=Me.multiplyByPoint(IGe.TRANSFORM_2D,i,B6e),l.direction2D=Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,o,F6e),l.up2D=Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,a,z6e),n._mode=SH.MORPHING,F8e(this,e,l,u)),0===e&&Object(r["a"])(this._completeMorph)&&this._completeMorph()};const q6e={position:new g,direction:new g,up:new g,frustum:void 0},Y6e=new zO;function X6e(e,t){if(e._scene.completeMorphOnUserInput){e._morphHandler=new OP(e._scene.canvas);const n=function(){e._morphCancelled=!0,e._scene.camera.cancelFlight(),t(e)};e._completeMorph=n,e._morphHandler.setInputAction(n,BD.LEFT_DOWN),e._morphHandler.setInputAction(n,BD.MIDDLE_DOWN),e._morphHandler.setInputAction(n,BD.RIGHT_DOWN),e._morphHandler.setInputAction(n,BD.WHEEL)}}function K6e(e){const t=e._currentTweens;for(let n=0;n<t.length;++n)t[n].cancelTween();e._currentTweens.length=0,e._morphHandler=e._morphHandler&&e._morphHandler.destroy()}R6e.prototype.morphTo3D=function(e,t){Object(r["a"])(this._completeMorph)&&this._completeMorph();const n=this._scene;if(this._previousMode=n.mode,this._previousMode!==SH.SCENE3D&&this._previousMode!==SH.MORPHING){if(this._scene.morphStart.raiseEvent(this,this._previousMode,SH.SCENE3D,!0),n._mode=SH.MORPHING,n.camera._setTransform(Me.IDENTITY),this._previousMode===SH.SCENE2D)p8e(this,e,t);else{let i,o;e>0?(i=q6e,g.fromDegrees(0,0,5*t.maximumRadius,t,i.position),g.negate(i.position,i.direction),g.normalize(i.direction,i.direction),g.clone(g.UNIT_Z,i.up)):i=Z6e(this,t);const r=n.camera;r.frustum instanceof IO?o=r.frustum.clone():(o=Y6e,o.aspectRatio=n.drawingBufferWidth/n.drawingBufferHeight,o.fov=s["a"].toRadians(60)),i.frustum=o;const a=k8e(i);X6e(this,a),a8e(this,e,i,a)}0===e&&Object(r["a"])(this._completeMorph)&&this._completeMorph()}},R6e.prototype.isDestroyed=function(){return!1},R6e.prototype.destroy=function(){return K6e(this),Wc(this)};const $6e=new I,J6e=new g,Q6e=new Me;function Z6e(e,t){const n=e._scene,i=n.camera,o=q6e,r=o.position,a=o.direction,s=o.up,c=n.mapProjection.unproject(i.position,$6e);t.cartographicToCartesian(c,r);const l=t.scaleToGeodeticSurface(r,J6e),u=ka.eastNorthUpToFixedFrame(l,t,Q6e);return Me.multiplyByPointAsVector(u,i.direction,a),Me.multiplyByPointAsVector(u,i.up,s),o}const e8e=new g,t8e=new g,n8e=new g,i8e=new g,o8e=new g,r8e=new g;function a8e(e,t,n,i){t*=.5;const o=e._scene,r=o.camera,a=g.clone(r.position,e8e),s=g.clone(r.direction,t8e),c=g.clone(r.up,n8e),l=Me.multiplyByPoint(IGe.TRANSFORM_2D_INVERSE,n.position,i8e),u=Me.multiplyByPointAsVector(IGe.TRANSFORM_2D_INVERSE,n.direction,o8e),h=Me.multiplyByPointAsVector(IGe.TRANSFORM_2D_INVERSE,n.up,r8e);function d(e){m8e(a,l,e.time,r.position),m8e(s,u,e.time,r.direction),m8e(c,h,e.time,r.up),g.cross(r.direction,r.up,r.right),g.normalize(r.right,r.right)}const f=o.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:d,complete:function(){z8e(e,o,0,1,t,i)}});e._currentTweens.push(f)}const s8e=new IO,c8e=new g,l8e=new g,u8e=new g,h8e=new g,d8e=new g,f8e=new g;function p8e(e,t,n){t/=3;const i=e._scene,o=i.camera;let r,a;t>0?(r=q6e,g.fromDegrees(0,0,5*n.maximumRadius,n,r.position),g.negate(r.position,r.direction),g.normalize(r.direction,r.direction),g.clone(g.UNIT_Z,r.up)):(o.position.z=o.frustum.right-o.frustum.left,r=Z6e(e,n)),e._morphToOrthographic?(a=s8e,a.aspectRatio=i.drawingBufferWidth/i.drawingBufferHeight,a.width=o.frustum.right-o.frustum.left):(a=Y6e,a.aspectRatio=i.drawingBufferWidth/i.drawingBufferHeight,a.fov=s["a"].toRadians(60)),r.frustum=a;const c=k8e(r);let l;X6e(e,c),l=e._morphToOrthographic?function(){a8e(e,t,r,c)}:function(){N8e(e,t,r,(function(){a8e(e,t,r,c)}))},t>0?(i._mode=SH.SCENE2D,o.flyTo({duration:t,destination:g.fromDegrees(0,0,5*n.maximumRadius,n,h8e),complete:function(){i._mode=SH.MORPHING,l()}})):l()}function m8e(e,t,n,i){return g.lerp(e,t,n,i)}function _8e(e,t,n,i,o){const r=e._scene,a=r.camera;if(a.frustum instanceof IO)return;const c=a.frustum.fov,l=.5*s["a"].RADIANS_PER_DEGREE,u=n.position.z*Math.tan(.5*c);function h(e){a.frustum.fov=s["a"].lerp(c,l,e.time);const t=u/Math.tan(.5*a.frustum.fov);i(a,t)}a.frustum.far=u/Math.tan(.5*l)+1e7;const d=r.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:h,complete:function(){a.frustum=n.frustum.clone(),o(e)}});e._currentTweens.push(d)}const g8e=new g,b8e=new g,y8e=new g,v8e=new g,O8e=new g,A8e=new g,w8e=new EO,T8e=new Yn,C8e=new g,E8e={position:void 0,direction:void 0,up:void 0,frustum:void 0};function x8e(e,t){t*=.5;const n=e._scene,i=n.camera,o=g.clone(i.position,g8e),a=g.clone(i.direction,b8e),s=g.clone(i.up,y8e),c=g.negate(g.UNIT_Z,O8e),l=g.clone(g.UNIT_Y,A8e),u=v8e;if(t>0)g.clone(g.ZERO,v8e),u.z=5*n.mapProjection.ellipsoid.maximumRadius;else{g.clone(o,v8e);const e=T8e;Me.multiplyByPoint(IGe.TRANSFORM_2D,o,e.origin),Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,a,e.direction);const t=n.globe;if(Object(r["a"])(t)){const i=t.pickWorldCoordinates(e,n,!0,C8e);Object(r["a"])(i)&&(Me.multiplyByPoint(IGe.TRANSFORM_2D_INVERSE,i,u),u.z+=g.distance(o,u))}}const h=w8e;h.right=.5*u.z,h.left=-h.right,h.top=h.right*(n.drawingBufferHeight/n.drawingBufferWidth),h.bottom=-h.top;const d=E8e;d.position=u,d.direction=c,d.up=l,d.frustum=h;const f=U8e(d);function p(e){m8e(o,u,e.time,i.position),m8e(a,c,e.time,i.direction),m8e(s,l,e.time,i.up),g.cross(i.direction,i.up,i.right),g.normalize(i.right,i.right),i._adjustOrthographicFrustum(!0)}function m(e,t){e.position.z=t}X6e(e,f);const _=n.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:p,complete:function(){_8e(e,t,d,m,f)}});e._currentTweens.push(_)}const S8e=new I,I8e={position:new g,direction:new g,up:new g,position2D:new g,direction2D:new g,up2D:new g,frustum:new EO},D8e={position:new g,direction:new g,up:new g,frustum:void 0},P8e=new g,j8e=new Yn,R8e=new Me,L8e=new g;function M8e(e,t,n){t*=.5;const i=e._scene,o=i.camera,a=I8e;if(t>0)g.clone(g.ZERO,a.position),a.position.z=5*n.maximumRadius,g.negate(g.UNIT_Z,a.direction),g.clone(g.UNIT_Y,a.up);else{n.cartesianToCartographic(o.positionWC,S8e),i.mapProjection.project(S8e,a.position),g.negate(g.UNIT_Z,a.direction),g.clone(g.UNIT_Y,a.up);const e=j8e;g.clone(a.position2D,e.origin);const t=g.clone(o.directionWC,e.direction),s=n.scaleToGeodeticSurface(o.positionWC,L8e),c=ka.eastNorthUpToFixedFrame(s,n,R8e);Me.inverseTransformation(c,c),Me.multiplyByPointAsVector(c,t,t),Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,t,t);const l=i.globe;if(Object(r["a"])(l)){const t=l.pickWorldCoordinates(e,i,!0,P8e);if(Object(r["a"])(t)){const e=g.distance(a.position2D,t);t.x+=e,g.clone(t,a.position2D)}}}function s(e,t){e.position.x=t}Me.multiplyByPoint(IGe.TRANSFORM_2D,a.position,a.position2D),Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,a.direction,a.direction2D),Me.multiplyByPointAsVector(IGe.TRANSFORM_2D,a.up,a.up2D);const c=a.frustum;c.right=.5*a.position.z,c.left=-c.right,c.top=c.right*(i.drawingBufferHeight/i.drawingBufferWidth),c.bottom=-c.top;const l=D8e;Me.multiplyByPoint(IGe.TRANSFORM_2D_INVERSE,a.position2D,l.position),g.clone(a.direction,l.direction),g.clone(a.up,l.up),l.frustum=c;const u=U8e(l);function h(){_8e(e,t,a,s,u)}X6e(e,u),F8e(e,t,a,h)}function N8e(e,t,n,i){const o=e._scene,r=o.camera,a=r.frustum.right-r.frustum.left;r.frustum=n.frustum.clone();const c=r.frustum.fov,l=.5*s["a"].RADIANS_PER_DEGREE,u=a*Math.tan(.5*c);function h(e){r.frustum.fov=s["a"].lerp(l,c,e.time),r.position.z=u/Math.tan(.5*r.frustum.fov)}r.frustum.far=u/Math.tan(.5*l)+1e7,r.frustum.fov=l;const d=o.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:h,complete:function(){i(e)}});e._currentTweens.push(d)}function B8e(e,t,n,i){t*=.5;const o=e._scene,r=o.camera,a=g.clone(n.position,h8e),s=g.clone(n.direction,d8e),c=g.clone(n.up,f8e);function l(){r.frustum=n.frustum.clone();const l=g.clone(r.position,c8e),u=g.clone(r.direction,l8e),h=g.clone(r.up,u8e);function d(e){m8e(l,a,e.time,r.position),m8e(u,s,e.time,r.direction),m8e(h,c,e.time,r.up),g.cross(r.direction,r.up,r.right),g.normalize(r.right,r.right)}l.z=a.z;const f=o.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:d,complete:function(){i(e)}});e._currentTweens.push(f)}o._mode=SH.MORPHING,e._morphToOrthographic?l():N8e(e,0,n,l)}function F8e(e,t,n,i){const o=e._scene,r=o.camera,a=g.clone(r.position,c8e),s=g.clone(r.direction,l8e),c=g.clone(r.up,u8e),l=g.clone(n.position2D,h8e),u=g.clone(n.direction2D,d8e),h=g.clone(n.up2D,f8e);function d(e){m8e(a,l,e.time,r.position),m8e(s,u,e.time,r.direction),m8e(c,h,e.time,r.up),g.cross(r.direction,r.up,r.right),g.normalize(r.right,r.right),r._adjustOrthographicFrustum(!0)}const f=o.tweens.add({duration:t,easingFunction:Gv.QUARTIC_OUT,startObject:{time:0},stopObject:{time:1},update:d,complete:function(){z8e(e,o,1,0,t,i)}});e._currentTweens.push(f)}function z8e(e,t,n,i,o,a){const s={object:t,property:"morphTime",startValue:n,stopValue:i,duration:o,easingFunction:Gv.QUARTIC_OUT};Object(r["a"])(a)&&(s.complete=function(){a(e)});const c=t.tweens.addProperty(s);e._currentTweens.push(c)}function k8e(e){return function(t){const n=t._scene;n._mode=SH.SCENE3D,n.morphTime=SH.getMorphTime(SH.SCENE3D),K6e(t);const i=n.camera;(t._previousMode!==SH.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,g.clone(e.position,i.position),g.clone(e.direction,i.direction),g.clone(e.up,i.up),g.cross(i.direction,i.up,i.right),g.normalize(i.right,i.right),i.frustum=e.frustum.clone());const o=i.frustum;n.frameState.useLogDepth&&(o.near=.1,o.far=1e10);const a=Object(r["a"])(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,SH.SCENE3D,a)}}function U8e(e){return function(t){const n=t._scene;n._mode=SH.SCENE2D,n.morphTime=SH.getMorphTime(SH.SCENE2D),K6e(t);const i=n.camera;g.clone(e.position,i.position),i.position.z=2*n.mapProjection.ellipsoid.maximumRadius,g.clone(e.direction,i.direction),g.clone(e.up,i.up),g.cross(i.direction,i.up,i.right),g.normalize(i.right,i.right),i.frustum=e.frustum.clone();const o=Object(r["a"])(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,SH.SCENE2D,o)}}function V8e(e){return function(t){const n=t._scene;n._mode=SH.COLUMBUS_VIEW,n.morphTime=SH.getMorphTime(SH.COLUMBUS_VIEW),K6e(t);const i=n.camera;(t._previousModeMode!==SH.MORPHING||t._morphCancelled)&&(t._morphCancelled=!1,g.clone(e.position,i.position),g.clone(e.direction,i.direction),g.clone(e.up,i.up),g.cross(i.direction,i.up,i.right),g.normalize(i.right,i.right));const o=i.frustum;n.frameState.useLogDepth&&(o.near=.1,o.far=1e10);const a=Object(r["a"])(t._completeMorph);t._completeMorph=void 0,n.camera.update(n.mode),t._scene.morphComplete.raiseEvent(t,t._previousMode,SH.COLUMBUS_VIEW,a)}}var H8e=R6e;function G8e(e,t,n,i,o,r,a,s,c,l){this._tweens=e,this._tweenjs=t,this._startObject=Object(RL["a"])(n),this._stopObject=Object(RL["a"])(i),this._duration=o,this._delay=r,this._easingFunction=a,this._update=s,this._complete=c,this.cancel=l,this.needsStart=!0}function W8e(){this._tweens=[]}Object.defineProperties(G8e.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),G8e.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(W8e.prototype,{length:{get:function(){return this._tweens.length}}}),W8e.prototype.add=function(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(r["a"])(e.startObject)||!Object(r["a"])(e.stopObject))throw new a["a"]("options.startObject and options.stopObject are required.");if(!Object(r["a"])(e.duration)||e.duration<0)throw new a["a"]("options.duration is required and must be positive.");if(0===e.duration)return Object(r["a"])(e.complete)&&e.complete(),new G8e(this);const t=e.duration/Gi.SECONDS_PER_MILLISECOND,n=Object(o["a"])(e.delay,0),i=n/Gi.SECONDS_PER_MILLISECOND,s=Object(o["a"])(e.easingFunction,Gv.LINEAR_NONE),c=e.startObject,l=new Vv["b"](c);l.to(Object(RL["a"])(e.stopObject),t),l.delay(i),l.easing(s),Object(r["a"])(e.update)&&l.onUpdate((function(){e.update(c)})),l.onComplete(Object(o["a"])(e.complete,null)),l.repeat(Object(o["a"])(e._repeat,0));const u=new G8e(this,l,e.startObject,e.stopObject,e.duration,n,s,e.update,e.complete,e.cancel);return this._tweens.push(u),u},W8e.prototype.addProperty=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.object,n=e.property,i=e.startValue,s=e.stopValue;if(!Object(r["a"])(t)||!Object(r["a"])(e.property))throw new a["a"]("options.object and options.property are required.");if(!Object(r["a"])(t[n]))throw new a["a"]("options.object must have the specified property.");if(!Object(r["a"])(i)||!Object(r["a"])(s))throw new a["a"]("options.startValue and options.stopValue are required.");function c(e){t[n]=e.value}return this.add({startObject:{value:i},stopObject:{value:s},duration:Object(o["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:c,complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},W8e.prototype.addAlpha=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.material;if(!Object(r["a"])(t))throw new a["a"]("options.material is required.");const n=[];for(const o in t.uniforms)t.uniforms.hasOwnProperty(o)&&Object(r["a"])(t.uniforms[o])&&Object(r["a"])(t.uniforms[o].alpha)&&n.push(o);if(0===n.length)throw new a["a"]("material has no properties with alpha components.");function i(e){const i=n.length;for(let o=0;o<i;++o)t.uniforms[n[o]].alpha=e.alpha}return this.add({startObject:{alpha:Object(o["a"])(e.startValue,0)},stopObject:{alpha:Object(o["a"])(e.stopValue,1)},duration:Object(o["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:i,complete:e.complete,cancel:e.cancel})},W8e.prototype.addOffsetIncrement=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.material;if(!Object(r["a"])(t))throw new a["a"]("material is required.");if(!Object(r["a"])(t.uniforms.offset))throw new a["a"]("material.uniforms must have an offset property.");const n=t.uniforms;return this.addProperty({object:n,property:"offset",startValue:n.offset,stopValue:n.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},W8e.prototype.remove=function(e){if(!Object(r["a"])(e))return!1;const t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),Object(r["a"])(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},W8e.prototype.removeAll=function(){const e=this._tweens;for(let t=0;t<e.length;++t){const n=e[t];n.tweenjs.stop(),Object(r["a"])(n.cancel)&&n.cancel()}e.length=0},W8e.prototype.contains=function(e){return Object(r["a"])(e)&&-1!==this._tweens.indexOf(e)},W8e.prototype.get=function(e){if(!Object(r["a"])(e))throw new a["a"]("index is required.");return this._tweens[e]},W8e.prototype.update=function(e){const t=this._tweens;let n=0;e=Object(r["a"])(e)?e/Gi.SECONDS_PER_MILLISECOND:bm();while(n<t.length){const i=t[n],o=i.tweenjs;i.needsStart?(i.needsStart=!1,o.start(e)):o.update(e)?n++:(o.stop(),t.splice(n,1))}};var q8e=W8e;function Y8e(e){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this.enableInputs=!0,this.enableTranslate=!0,this.enableZoom=!0,this.enableRotate=!0,this.enableTilt=!0,this.enableLook=!0,this.inertiaSpin=.9,this.inertiaTranslate=.9,this.inertiaZoom=.8,this.maximumMovementRatio=.1,this.bounceAnimationTime=3,this.minimumZoomDistance=1,this.maximumZoomDistance=Number.POSITIVE_INFINITY,this.translateEventTypes=PGe.LEFT_DRAG,this.zoomEventTypes=[PGe.RIGHT_DRAG,PGe.WHEEL,PGe.PINCH],this.rotateEventTypes=PGe.LEFT_DRAG,this.tiltEventTypes=[PGe.MIDDLE_DRAG,PGe.PINCH,{eventType:PGe.LEFT_DRAG,modifier:lE.CTRL},{eventType:PGe.RIGHT_DRAG,modifier:lE.CTRL}],this.lookEventTypes={eventType:PGe.LEFT_DRAG,modifier:lE.SHIFT},this.minimumPickingTerrainHeight=15e4,this._minimumPickingTerrainHeight=this.minimumPickingTerrainHeight,this.minimumCollisionTerrainHeight=15e3,this._minimumCollisionTerrainHeight=this.minimumCollisionTerrainHeight,this.minimumTrackBallHeight=75e5,this._minimumTrackBallHeight=this.minimumTrackBallHeight,this.enableCollisionDetection=!0,this._scene=e,this._globe=void 0,this._ellipsoid=void 0,this._aggregator=new kGe(e.canvas),this._lastInertiaSpinMovement=void 0,this._lastInertiaZoomMovement=void 0,this._lastInertiaTranslateMovement=void 0,this._lastInertiaTiltMovement=void 0,this._inertiaDisablers={_lastInertiaZoomMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement","_lastInertiaTiltMovement"],_lastInertiaTiltMovement:["_lastInertiaSpinMovement","_lastInertiaTranslateMovement"]},this._tweens=new q8e,this._tween=void 0,this._horizontalRotationAxis=void 0,this._tiltCenterMousePosition=new Gt(-1,-1),this._tiltCenter=new g,this._rotateMousePosition=new Gt(-1,-1),this._rotateStartPosition=new g,this._strafeStartPosition=new g,this._strafeMousePosition=new Gt,this._strafeEndMousePosition=new Gt,this._zoomMouseStart=new Gt(-1,-1),this._zoomWorldPosition=new g,this._useZoomWorldPosition=!1,this._tiltCVOffMap=!1,this._looking=!1,this._rotating=!1,this._strafing=!1,this._zoomingOnVector=!1,this._zoomingUnderground=!1,this._rotatingZoom=!1,this._adjustedHeightForTerrain=!1,this._cameraUnderground=!1;const t=e.mapProjection;this._maxCoord=t.project(new I(Math.PI,s["a"].PI_OVER_TWO)),this._zoomFactor=5,this._rotateFactor=void 0,this._rotateRateRangeAdjustment=void 0,this._maximumRotateRate=1.77,this._minimumRotateRate=2e-4,this._minimumZoomRate=20,this._maximumZoomRate=5906376272e3,this._minimumUndergroundPickDistance=2e3,this._maximumUndergroundPickDistance=1e4}function X8e(e,t){if(e<0)return 0;const n=25*(1-t);return Math.exp(-n*e)}function K8e(e){return Gt.equalsEpsilon(e.startPosition,e.endPosition,s["a"].EPSILON14)}const $8e=.4;function J8e(e,t,n,i,o,a,s){let c=a[s];Object(r["a"])(c)||(c=a[s]={startPosition:new Gt,endPosition:new Gt,motion:new Gt,inertiaEnabled:!0});const l=e.getButtonPressTime(t,n),u=e.getButtonReleaseTime(t,n),h=l&&u&&(u.getTime()-l.getTime())/1e3,d=new Date,f=u&&(d.getTime()-u.getTime())/1e3;if(l&&u&&h<$8e){const s=X8e(f,i),l=e.getLastMovement(t,n);if(!Object(r["a"])(l)||K8e(l)||!c.inertiaEnabled)return;if(c.motion.x=.5*(l.endPosition.x-l.startPosition.x),c.motion.y=.5*(l.endPosition.y-l.startPosition.y),c.startPosition=Gt.clone(l.startPosition,c.startPosition),c.endPosition=Gt.multiplyByScalar(c.motion,s,c.endPosition),c.endPosition=Gt.add(c.startPosition,c.endPosition,c.endPosition),isNaN(c.endPosition.x)||isNaN(c.endPosition.y)||Gt.distance(c.startPosition,c.endPosition)<.5)return;if(!e.isButtonDown(t,n)){const i=e.getStartMousePosition(t,n);o(a,i,c)}}}function Q8e(e,t){if(Object(r["a"])(t)){let n=e[t];Object(r["a"])(n)&&(n.inertiaEnabled=!0);const i=e._inertiaDisablers[t];if(Object(r["a"])(i)){const t=i.length;for(let o=0;o<t;++o)n=e[i[o]],Object(r["a"])(n)&&(n.inertiaEnabled=!1)}}}const Z8e=[];function e9e(e,t,n,i,o,a){if(!Object(r["a"])(n))return;const s=e._aggregator;Array.isArray(n)||(Z8e[0]=n,n=Z8e);const c=n.length;for(let l=0;l<c;++l){const c=n[l],u=Object(r["a"])(c.eventType)?c.eventType:c,h=c.modifier,d=s.isMoving(u,h)&&s.getMovement(u,h),f=s.getStartMousePosition(u,h);e.enableInputs&&t&&(d?(i(e,f,d),Q8e(e,a)):o<1&&J8e(s,u,h,o,i,e,a))}}const t9e=new Yn,n9e=new g,i9e=new Gt,o9e=new g,r9e=new Gt,a9e=new g,s9e=new g,c9e=new g,l9e=new g,u9e=new g,h9e=new g,d9e=new g,f9e=new g,p9e=new g,m9e=new g,_9e=new g,g9e=new g,b9e=new g,y9e=new g,v9e=new g,O9e=new g,A9e=new g,w9e=new g,T9e={orientation:new To};function C9e(e,t,n,i,o,a){let c=1;Object(r["a"])(a)&&(c=s["a"].clamp(Math.abs(a),.25,1));const l=n.endPosition.y-n.startPosition.y,u=l>0,h=u?e.minimumZoomDistance*c:0,d=e.maximumZoomDistance,f=o-h;let p=i*f;p=s["a"].clamp(p,e._minimumZoomRate,e._maximumZoomRate);let m=l/e._scene.canvas.clientHeight;m=Math.min(m,e.maximumMovementRatio);let _=p*m;if(e.enableCollisionDetection||0===e.minimumZoomDistance||!Object(r["a"])(e._globe)){if(_>0&&Math.abs(o-h)<1)return;if(_<0&&Math.abs(o-d)<1)return;o-_<h?_=o-h-1:o-_>d&&(_=o-d)}const b=e._scene,y=b.camera,v=b.mode,O=T9e.orientation;if(O.heading=y.heading,O.pitch=y.pitch,O.roll=y.roll,y.frustum instanceof IO)return void(Math.abs(_)>0&&(y.zoomIn(_),y._adjustOrthographicFrustum()));const A=Gt.equals(t,e._zoomMouseStart);let w,T=e._zoomingOnVector,C=e._rotatingZoom;if(A||(e._zoomMouseStart=Gt.clone(t,e._zoomMouseStart),Object(r["a"])(e._globe)&&(v===SH.SCENE2D?(w=y.getPickRay(t,t9e).origin,w=g.fromElements(w.y,w.z,w.x)):w=z9e(e,t,n9e)),Object(r["a"])(w)?(e._useZoomWorldPosition=!0,e._zoomWorldPosition=g.clone(w,e._zoomWorldPosition)):e._useZoomWorldPosition=!1,T=e._zoomingOnVector=!1,C=e._rotatingZoom=!1,e._zoomingUnderground=e._cameraUnderground),!e._useZoomWorldPosition)return void y.zoomIn(_);let E=v===SH.COLUMBUS_VIEW;if(y.positionCartographic.height<2e6&&(C=!0),!A||C){if(v===SH.SCENE2D){const n=e._zoomWorldPosition,i=y.position;if(!g.equals(n,i)&&y.positionCartographic.height<2*e._maxCoord.x){const o=y.position.x,r=g.subtract(n,i,o9e);g.normalize(r,r);const a=g.distance(n,i)*_/(.5*y.getMagnitude());y.move(r,.5*a),(y.position.x<0&&o>0||y.position.x>0&&o<0)&&(w=y.getPickRay(t,t9e).origin,w=g.fromElements(w.y,w.z,w.x),e._zoomWorldPosition=g.clone(w,e._zoomWorldPosition))}}else if(v===SH.SCENE3D){const t=g.normalize(y.position,u9e);if(e._cameraUnderground||e._zoomingUnderground||y.positionCartographic.height<3e3&&Math.abs(g.dot(y.direction,t))<.6)E=!0;else{const n=b.canvas,i=r9e;i.x=n.clientWidth/2,i.y=n.clientHeight/2;const o=z9e(e,i,a9e);if(Object(r["a"])(o))if(y.positionCartographic.height<1e6){if(!(g.dot(y.direction,t)>=-.5)){const n=d9e;g.clone(y.position,n);const i=e._zoomWorldPosition;let o=h9e;if(o=g.normalize(i,o),g.dot(o,t)<0)return;const r=v9e,a=m9e;g.clone(y.direction,a),g.add(n,g.multiplyByScalar(a,1e3,O9e),r);const c=_9e,l=g9e;g.subtract(i,n,c),g.normalize(c,l);const u=g.dot(t,l);if(u>=0)return void(e._zoomMouseStart.x=-1);const h=Math.acos(-u),d=g.magnitude(n),f=g.magnitude(i),p=d-_,m=g.magnitude(c),b=Math.asin(s["a"].clamp(m/f*Math.sin(h),-1,1)),v=Math.asin(s["a"].clamp(p/f*Math.sin(h),-1,1)),O=b-v+h,A=f9e;g.normalize(n,A);let w=p9e;w=g.cross(l,A,w),w=g.normalize(w,w),g.normalize(g.cross(A,w,O9e),a),g.multiplyByScalar(g.normalize(r,O9e),g.magnitude(r)-_,r),g.normalize(n,n),g.multiplyByScalar(n,p,n);const T=b9e;g.multiplyByScalar(g.add(g.multiplyByScalar(A,Math.cos(O)-1,A9e),g.multiplyByScalar(a,Math.sin(O),w9e),O9e),p,T),g.add(n,T,n),g.normalize(r,A),g.normalize(g.cross(A,w,O9e),a);const C=y9e;return g.multiplyByScalar(g.add(g.multiplyByScalar(A,Math.cos(O)-1,A9e),g.multiplyByScalar(a,Math.sin(O),w9e),O9e),g.magnitude(r),C),g.add(r,C,r),g.clone(n,y.position),g.normalize(g.subtract(r,n,O9e),y.direction),g.clone(y.direction,y.direction),g.cross(y.direction,y.up,y.right),g.cross(y.right,y.direction,y.up),void y.setView(T9e)}E=!0}else{const t=g.normalize(o,s9e),n=g.normalize(e._zoomWorldPosition,c9e),i=g.dot(n,t);if(i>0&&i<1){const e=s["a"].acosClamped(i),o=g.cross(n,t,l9e),r=Math.abs(e)>s["a"].toRadians(20)?.75*y.positionCartographic.height:y.positionCartographic.height-_,a=_/r;y.rotate(o,e*a)}}else E=!0}}e._rotatingZoom=!E}if(!A&&E||T){let n;const i=f9.wgs84ToWindowCoordinates(b,e._zoomWorldPosition,i9e);n=v!==SH.COLUMBUS_VIEW&&Gt.equals(t,e._zoomMouseStart)&&Object(r["a"])(i)?y.getPickRay(i,t9e):y.getPickRay(t,t9e);const o=n.direction;v!==SH.COLUMBUS_VIEW&&v!==SH.SCENE2D||g.fromElements(o.y,o.z,o.x,o),y.move(o,_),e._zoomingOnVector=!0}else y.zoomIn(_);e._cameraUnderground||y.setView(T9e)}const E9e=new Yn,x9e=new Yn,S9e=new g;function I9e(e,t,n){const i=e._scene,o=i.camera;let r=o.getPickRay(n.startPosition,E9e).origin,a=o.getPickRay(n.endPosition,x9e).origin;r=g.fromElements(r.y,r.z,r.x,r),a=g.fromElements(a.y,a.z,a.x,a);const s=g.subtract(r,a,S9e),c=g.magnitude(s);c>0&&(g.normalize(s,s),o.move(s,c))}function D9e(e,t,n){Object(r["a"])(n.distance)&&(n=n.distance);const i=e._scene,o=i.camera;C9e(e,t,n,e._zoomFactor,o.getMagnitude())}const P9e=new Gt,j9e=new Gt;function R9e(e,t,n){if(Object(r["a"])(n.angleAndHeight))return void L9e(e,t,n.angleAndHeight);const i=e._scene,o=i.camera,a=i.canvas,c=a.clientWidth,l=a.clientHeight;let u=P9e;u.x=2/c*n.startPosition.x-1,u.y=2/l*(l-n.startPosition.y)-1,u=Gt.normalize(u,u);let h=j9e;h.x=2/c*n.endPosition.x-1,h.y=2/l*(l-n.endPosition.y)-1,h=Gt.normalize(h,h);let d=s["a"].acosClamped(u.x);u.y<0&&(d=s["a"].TWO_PI-d);let f=s["a"].acosClamped(h.x);h.y<0&&(f=s["a"].TWO_PI-f);const p=f-d;o.twistRight(p)}function L9e(e,t,n){let i=e._rotateFactor*e._rotateRateRangeAdjustment;i>e._maximumRotateRate&&(i=e._maximumRotateRate),i<e._minimumRotateRate&&(i=e._minimumRotateRate);const o=e._scene,r=o.camera,a=o.canvas;let s=(n.endPosition.x-n.startPosition.x)/a.clientWidth;s=Math.min(s,e.maximumMovementRatio);const c=i*s*Math.PI*4;r.twistRight(c)}function M9e(e){const t=e._scene.mapMode2D===rVe.ROTATE;Me.equals(Me.IDENTITY,e._scene.camera.transform)?(e9e(e,e.enableTranslate,e.translateEventTypes,I9e,e.inertiaTranslate,"_lastInertiaTranslateMovement"),e9e(e,e.enableZoom,e.zoomEventTypes,D9e,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&e9e(e,e.enableRotate,e.tiltEventTypes,R9e,e.inertiaSpin,"_lastInertiaTiltMovement")):(e9e(e,e.enableZoom,e.zoomEventTypes,D9e,e.inertiaZoom,"_lastInertiaZoomMovement"),t&&e9e(e,e.enableRotate,e.translateEventTypes,R9e,e.inertiaSpin,"_lastInertiaSpinMovement"))}const N9e=new Yn,B9e=new g,F9e=new g;function z9e(e,t,n){const i=e._scene,o=e._globe,a=i.camera;if(!Object(r["a"])(o))return;const s=!e._cameraUnderground;let c;i.pickPositionSupported&&(c=i.pickPositionWorldCoordinates(t,B9e));const l=a.getPickRay(t,N9e),u=o.pickWorldCoordinates(l,i,s,F9e),h=Object(r["a"])(c)?g.distance(c,a.positionWC):Number.POSITIVE_INFINITY,d=Object(r["a"])(u)?g.distance(u,a.positionWC):Number.POSITIVE_INFINITY;return h<d?g.clone(c,n):g.clone(u,n)}const k9e=new I;function U9e(e){const t=e._ellipsoid,n=e._scene,i=n.camera,a=n.mode;let s=0;if(a===SH.SCENE3D){const e=t.cartesianToCartographic(i.position,k9e);Object(r["a"])(e)&&(s=e.height)}else s=i.position.z;const c=Object(o["a"])(e._scene.globeHeight,0),l=Math.abs(c-s);return l}const V9e=new g;function H9e(e,t){const n=t.origin,i=t.direction,o=U9e(e),r=g.normalize(n,V9e);let a=Math.abs(g.dot(r,i));return a=2*Math.max(a,.5),o*a}function G9e(e,t,n,i){let o=g.distance(t.origin,n);const r=U9e(e),a=s["a"].clamp(5*r,e._minimumUndergroundPickDistance,e._maximumUndergroundPickDistance);return o>a&&(o=Math.min(o,r/5),o=Math.max(o,100)),Yn.getPoint(t,o,i)}function W9e(e,t,n,i){let o;return Object(r["a"])(n)?(o=g.distance(t.origin,n),o>e._maximumUndergroundPickDistance&&(o=U9e(e))):o=U9e(e),Yn.getPoint(t,o,i)}const q9e=new Gt;function Y9e(e,t){const n=t.endPosition,i=Gt.subtract(t.endPosition,t.startPosition,q9e),o=e._strafeEndMousePosition;Gt.add(o,i,o),t.endPosition=o,P7e(e,t,e._strafeStartPosition),t.endPosition=n}const X9e=new Yn,K9e=new Yn,$9e=new g,J9e=new g,Q9e=new g,Z9e=new g,e7e=new ji(g.UNIT_X,0),t7e=new Gt,n7e=new Gt;function i7e(e,t,n){if(g.equals(t,e._translateMousePosition)||(e._looking=!1),g.equals(t,e._strafeMousePosition)||(e._strafing=!1),e._looking)return void vet(e,t,n);if(e._strafing)return void Y9e(e,n);const i=e._scene,o=i.camera,a=e._cameraUnderground,c=Gt.clone(n.startPosition,t7e),l=Gt.clone(n.endPosition,n7e);let u=o.getPickRay(c,X9e);const h=g.clone(g.ZERO,Z9e),d=g.UNIT_X;let f;if(o.position.z<e._minimumPickingTerrainHeight&&(f=z9e(e,c,$9e),Object(r["a"])(f)&&(h.x=f.x)),a||h.x>o.position.z&&Object(r["a"])(f)){let i=f;return a&&(i=W9e(e,u,f,$9e)),Gt.clone(t,e._strafeMousePosition),Gt.clone(t,e._strafeEndMousePosition),g.clone(i,e._strafeStartPosition),e._strafing=!0,void P7e(e,n,e._strafeStartPosition)}const p=ji.fromPointNormal(h,d,e7e);u=o.getPickRay(c,X9e);const m=Ci.rayPlane(u,p,$9e),_=o.getPickRay(l,K9e),b=Ci.rayPlane(_,p,J9e);if(!Object(r["a"])(m)||!Object(r["a"])(b))return e._looking=!0,vet(e,t,n),void Gt.clone(t,e._translateMousePosition);const y=g.subtract(m,b,Q9e),v=y.x;y.x=y.y,y.y=y.z,y.z=v;const O=g.magnitude(y);O>s["a"].EPSILON6&&(g.normalize(y,y),o.move(y,O))}const o7e=new Gt,r7e=new Yn,a7e=new g,s7e=new g,c7e=new Me,l7e=new Me,u7e=new g,h7e=new ji(g.UNIT_X,0),d7e=new g,f7e=new I,p7e=new Me,m7e=new Kr,_7e=new ce,g7e=new g;function b7e(e,t,n){if(Object(r["a"])(n.angleAndHeight)&&(n=n.angleAndHeight),Gt.equals(t,e._tiltCenterMousePosition)||(e._tiltCVOffMap=!1,e._looking=!1),e._looking)return void vet(e,t,n);const i=e._scene,o=i.camera;e._tiltCVOffMap||!e.onMap()||Math.abs(o.position.z)>e._minimumPickingTerrainHeight?(e._tiltCVOffMap=!0,y7e(e,t,n)):v7e(e,t,n)}function y7e(e,t,n){const i=e._scene,o=i.camera,a=i.canvas,c=o7e;c.x=a.clientWidth/2,c.y=a.clientHeight/2;const l=o.getPickRay(c,r7e),u=g.UNIT_X,h=l.origin,d=l.direction;let f;const p=g.dot(u,d);if(Math.abs(p)>s["a"].EPSILON6&&(f=-g.dot(u,h)/p),!Object(r["a"])(f)||f<=0)return e._looking=!0,vet(e,t,n),void Gt.clone(t,e._tiltCenterMousePosition);const m=g.multiplyByScalar(d,f,a7e);g.add(h,m,m);const _=i.mapProjection,b=_.ellipsoid;g.fromElements(m.y,m.z,m.x,m);const y=_.unproject(m,f7e);b.cartographicToCartesian(y,m);const v=ka.eastNorthUpToFixedFrame(m,b,c7e),O=e._globe,A=e._ellipsoid;e._globe=void 0,e._ellipsoid=k.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const w=Me.clone(o.transform,p7e);o._setTransform(v),z7e(e,t,n,g.UNIT_Z),o._setTransform(w),e._globe=O,e._ellipsoid=A;const T=A.maximumRadius;e._rotateFactor=1/T,e._rotateRateRangeAdjustment=T}function v7e(e,t,n){const i=e._scene,o=i.camera,a=e._cameraUnderground;let c,l;const u=g.UNIT_X;if(Gt.equals(t,e._tiltCenterMousePosition))c=g.clone(e._tiltCenter,a7e);else{if(o.position.z<e._minimumPickingTerrainHeight&&(c=z9e(e,t,a7e)),!Object(r["a"])(c)){l=o.getPickRay(t,r7e);const i=l.origin,a=l.direction;let h;const d=g.dot(u,a);if(Math.abs(d)>s["a"].EPSILON6&&(h=-g.dot(u,i)/d),!Object(r["a"])(h)||h<=0)return e._looking=!0,vet(e,t,n),void Gt.clone(t,e._tiltCenterMousePosition);c=g.multiplyByScalar(a,h,a7e),g.add(i,c,c)}a&&(Object(r["a"])(l)||(l=o.getPickRay(t,r7e)),G9e(e,l,c,c)),Gt.clone(t,e._tiltCenterMousePosition),g.clone(c,e._tiltCenter)}const h=i.canvas,d=o7e;d.x=h.clientWidth/2,d.y=e._tiltCenterMousePosition.y,l=o.getPickRay(d,r7e);const f=g.clone(g.ZERO,u7e);f.x=c.x;const p=ji.fromPointNormal(f,u,h7e),m=Ci.rayPlane(l,p,s7e),_=o._projection,b=_.ellipsoid;g.fromElements(c.y,c.z,c.x,c);let y=_.unproject(c,f7e);b.cartographicToCartesian(y,c);const v=ka.eastNorthUpToFixedFrame(c,b,c7e);let O;Object(r["a"])(m)?(g.fromElements(m.y,m.z,m.x,m),y=_.unproject(m,f7e),b.cartographicToCartesian(y,m),O=ka.eastNorthUpToFixedFrame(m,b,l7e)):O=v;const A=e._globe,w=e._ellipsoid;e._globe=void 0,e._ellipsoid=k.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let T=g.UNIT_Z;const C=Me.clone(o.transform,p7e);o._setTransform(v);const E=g.cross(g.UNIT_Z,g.normalize(o.position,d7e),d7e),x=g.dot(o.right,E);if(z7e(e,t,n,T,!1,!0),o._setTransform(O),x<0){const i=n.startPosition.y-n.endPosition.y;(a&&i<0||!a&&i>0)&&(T=void 0);const r=o.constrainedAxis;o.constrainedAxis=void 0,z7e(e,t,n,T,!0,!1),o.constrainedAxis=r}else z7e(e,t,n,T,!0,!1);if(Object(r["a"])(o.constrainedAxis)){const e=g.cross(o.direction,o.constrainedAxis,g7e);g.equalsEpsilon(e,g.ZERO,s["a"].EPSILON6)||(g.dot(e,o.right)<0&&g.negate(e,e),g.cross(e,o.direction,o.up),g.cross(o.direction,o.up,o.right),g.normalize(o.up,o.up),g.normalize(o.right,o.right))}o._setTransform(C),e._globe=A,e._ellipsoid=w;const S=w.maximumRadius;e._rotateFactor=1/S,e._rotateRateRangeAdjustment=S;const I=g.clone(o.positionWC,d7e);if(e.enableCollisionDetection&&Tet(e),!g.equals(o.positionWC,I)){o._setTransform(O),o.worldToCameraCoordinatesPoint(I,I);const e=g.magnitudeSquared(I);g.magnitudeSquared(o.position)>e&&(g.normalize(o.position,o.position),g.multiplyByScalar(o.position,Math.sqrt(e),o.position));const t=g.angleBetween(I,o.position),n=g.cross(I,o.position,I);g.normalize(n,n);const i=Kr.fromAxisAngle(n,t,m7e),r=ce.fromQuaternion(i,_7e);ce.multiplyByVector(r,o.direction,o.direction),ce.multiplyByVector(r,o.up,o.up),g.cross(o.direction,o.up,o.right),g.cross(o.right,o.direction,o.up),o._setTransform(C)}}const O7e=new Gt,A7e=new Yn,w7e=new g;function T7e(e,t,n){Object(r["a"])(n.distance)&&(n=n.distance);const i=e._scene,o=i.camera,a=i.canvas,s=e._cameraUnderground;let c;s?c=t:(c=O7e,c.x=a.clientWidth/2,c.y=a.clientHeight/2);const l=o.getPickRay(c,A7e),u=l.origin,h=l.direction,d=o.position.z;let f,p;if(d<e._minimumPickingTerrainHeight&&(f=z9e(e,c,w7e)),Object(r["a"])(f)&&(p=g.distance(u,f)),s){const t=H9e(e,l,d);p=Object(r["a"])(p)?Math.min(p,t):t}if(!Object(r["a"])(p)){const e=g.UNIT_X;p=-g.dot(e,u)/g.dot(e,h)}C9e(e,t,n,e._zoomFactor,p)}function C7e(e){const t=e._scene,n=t.camera;if(Me.equals(Me.IDENTITY,n.transform)){const t=e._tweens;if(e._aggregator.anyButtonDown&&t.removeAll(),e9e(e,e.enableTilt,e.tiltEventTypes,b7e,e.inertiaSpin,"_lastInertiaTiltMovement"),e9e(e,e.enableTranslate,e.translateEventTypes,i7e,e.inertiaTranslate,"_lastInertiaTranslateMovement"),e9e(e,e.enableZoom,e.zoomEventTypes,T7e,e.inertiaZoom,"_lastInertiaZoomMovement"),e9e(e,e.enableLook,e.lookEventTypes,vet),!e._aggregator.anyButtonDown&&!t.contains(e._tween)){const i=n.createCorrectPositionTween(e.bounceAnimationTime);Object(r["a"])(i)&&(e._tween=t.add(i))}t.update()}else e9e(e,e.enableRotate,e.rotateEventTypes,z7e,e.inertiaSpin,"_lastInertiaSpinMovement"),e9e(e,e.enableZoom,e.zoomEventTypes,J7e,e.inertiaZoom,"_lastInertiaZoomMovement")}const E7e=new Yn,x7e=new ji(g.UNIT_X,0),S7e=new g,I7e=new g,D7e=new g;function P7e(e,t,n){const i=e._scene,o=i.camera,a=o.getPickRay(t.endPosition,E7e);let s=g.clone(o.direction,I7e);i.mode===SH.COLUMBUS_VIEW&&g.fromElements(s.z,s.x,s.y,s);const c=ji.fromPointNormal(n,s,x7e),l=Ci.rayPlane(a,c,S7e);Object(r["a"])(l)&&(s=g.subtract(n,l,s),i.mode===SH.COLUMBUS_VIEW&&g.fromElements(s.y,s.z,s.x,s),g.add(o.position,s,o.position))}const j7e=new g,R7e=new I,L7e=new g,M7e=new k,N7e=new g,B7e=new g;function F7e(e,t,n){const i=e._scene,o=i.camera,a=e._cameraUnderground;let s,c,l=e._ellipsoid;if(!Me.equals(o.transform,Me.IDENTITY))return void z7e(e,t,n);const u=l.geodeticSurfaceNormal(o.position,N7e);if(Gt.equals(t,e._rotateMousePosition)){if(e._looking)vet(e,t,n,u);else if(e._rotating)z7e(e,t,n);else if(e._strafing)Y9e(e,n);else{if(g.magnitude(o.position)<g.magnitude(e._rotateStartPosition))return;s=g.magnitude(e._rotateStartPosition),c=L7e,c.x=c.y=c.z=s,l=k.fromCartesian3(c,M7e),X7e(e,t,n,l)}return}e._looking=!1,e._rotating=!1,e._strafing=!1;const h=l.cartesianToCartographic(o.positionWC,R7e).height,d=e._globe;if(Object(r["a"])(d)&&h<e._minimumPickingTerrainHeight){const i=z9e(e,n.startPosition,D7e);if(Object(r["a"])(i)){let r=!1;const u=o.getPickRay(n.startPosition,N9e);if(a)r=!0,W9e(e,u,i,i);else{const e=l.geodeticSurfaceNormal(i,B7e),t=Math.abs(g.dot(u.direction,e))<.05;r=!!t||g.magnitude(o.position)<g.magnitude(i)}r?(Gt.clone(t,e._strafeEndMousePosition),g.clone(i,e._strafeStartPosition),e._strafing=!0,P7e(e,n,e._strafeStartPosition)):(s=g.magnitude(i),c=L7e,c.x=c.y=c.z=s,l=k.fromCartesian3(c,M7e),X7e(e,t,n,l),g.clone(i,e._rotateStartPosition))}else e._looking=!0,vet(e,t,n,u)}else Object(r["a"])(o.pickEllipsoid(n.startPosition,e._ellipsoid,j7e))?(X7e(e,t,n,e._ellipsoid),g.clone(j7e,e._rotateStartPosition)):h>e._minimumTrackBallHeight?(e._rotating=!0,z7e(e,t,n)):(e._looking=!0,vet(e,t,n,u));Gt.clone(t,e._rotateMousePosition)}function z7e(e,t,n,i,a,s){a=Object(o["a"])(a,!1),s=Object(o["a"])(s,!1);const c=e._scene,l=c.camera,u=c.canvas,h=l.constrainedAxis;Object(r["a"])(i)&&(l.constrainedAxis=i);const d=g.magnitude(l.position);let f=e._rotateFactor*(d-e._rotateRateRangeAdjustment);f>e._maximumRotateRate&&(f=e._maximumRotateRate),f<e._minimumRotateRate&&(f=e._minimumRotateRate);let p=(n.startPosition.x-n.endPosition.x)/u.clientWidth,m=(n.startPosition.y-n.endPosition.y)/u.clientHeight;p=Math.min(p,e.maximumMovementRatio),m=Math.min(m,e.maximumMovementRatio);const _=f*p*Math.PI*2,b=f*m*Math.PI;a||l.rotateRight(_),s||l.rotateUp(b),l.constrainedAxis=h}const k7e=be.clone(be.UNIT_W),U7e=be.clone(be.UNIT_W),V7e=new g,H7e=new g,G7e=new g,W7e=new g,q7e=new Gt,Y7e=new Gt;function X7e(e,t,n,i){const o=e._scene,a=o.camera,c=Gt.clone(n.startPosition,q7e),l=Gt.clone(n.endPosition,Y7e);let u=a.pickEllipsoid(c,i,k7e),h=a.pickEllipsoid(l,i,U7e);if(!Object(r["a"])(u)||!Object(r["a"])(h))return e._rotating=!0,void z7e(e,t,n);if(u=a.worldToCameraCoordinates(u,u),h=a.worldToCameraCoordinates(h,h),Object(r["a"])(a.constrainedAxis)){const e=a.constrainedAxis,t=g.mostOrthogonalAxis(e,V7e);g.cross(t,e,t),g.normalize(t,t);const n=g.cross(e,t,H7e),i=g.magnitude(u),o=g.dot(e,u),r=Math.acos(o/i),c=g.multiplyByScalar(e,o,G7e);g.subtract(u,c,c),g.normalize(c,c);const l=g.magnitude(h),d=g.dot(e,h),f=Math.acos(d/l),p=g.multiplyByScalar(e,d,W7e);g.subtract(h,p,p),g.normalize(p,p);let m=Math.acos(g.dot(c,t));g.dot(c,n)<0&&(m=s["a"].TWO_PI-m);let _=Math.acos(g.dot(p,t));g.dot(p,n)<0&&(_=s["a"].TWO_PI-_);const b=m-_;let y;y=g.equalsEpsilon(e,a.position,s["a"].EPSILON2)?a.right:g.cross(e,a.position,V7e);const v=g.cross(e,y,V7e),O=g.dot(v,g.subtract(u,e,H7e)),A=g.dot(v,g.subtract(h,e,H7e));let w;w=O>0&&A>0?f-r:O>0&&A<=0?g.dot(a.position,e)>0?-r-f:r+f:r-f,a.rotateRight(b),a.rotateUp(w)}else{g.normalize(u,u),g.normalize(h,h);const e=g.dot(u,h),t=g.cross(u,h,V7e);if(e<1&&!g.equalsEpsilon(t,g.ZERO,s["a"].EPSILON14)){const n=Math.acos(e);a.rotate(t,n)}}}const K7e=new g,$7e=new I;function J7e(e,t,n){Object(r["a"])(n.distance)&&(n=n.distance);const i=e._ellipsoid,o=e._scene,a=o.camera,s=o.canvas,c=e._cameraUnderground;let l;c?l=t:(l=O7e,l.x=s.clientWidth/2,l.y=s.clientHeight/2);const u=a.getPickRay(l,A7e);let h;const d=i.cartesianToCartographic(a.position,$7e).height;let f;if(d<e._minimumPickingTerrainHeight&&(h=z9e(e,l,w7e)),Object(r["a"])(h)&&(f=g.distance(u.origin,h)),c){const t=H9e(e,u,d);f=Object(r["a"])(f)?Math.min(f,t):t}Object(r["a"])(f)||(f=d);const p=g.normalize(a.position,K7e);C9e(e,t,n,e._zoomFactor,f,g.dot(p,a.direction))}const Q7e=new Gt,Z7e=new Yn,eet=new g,tet=new g,net=new Me,iet=new Me,oet=new Me,ret=new Kr,aet=new ce,set=new I,cet=new g;function uet(e,t,n){const i=e._scene,o=i.camera;if(!Me.equals(o.transform,Me.IDENTITY))return;if(Object(r["a"])(n.angleAndHeight)&&(n=n.angleAndHeight),Gt.equals(t,e._tiltCenterMousePosition)||(e._tiltOnEllipsoid=!1,e._looking=!1),e._looking){const i=e._ellipsoid.geodeticSurfaceNormal(o.position,cet);return void vet(e,t,n,i)}const a=e._ellipsoid,s=a.cartesianToCartographic(o.position,set);e._tiltOnEllipsoid||s.height>e._minimumCollisionTerrainHeight?(e._tiltOnEllipsoid=!0,det(e,t,n)):fet(e,t,n)}const het=new I;function det(e,t,n){const i=e._ellipsoid,o=e._scene,a=o.camera,c=.25*e.minimumZoomDistance,l=i.cartesianToCartographic(a.positionWC,het).height;if(l-c-1<s["a"].EPSILON3&&n.endPosition.y-n.startPosition.y<0)return;const u=o.canvas,h=Q7e;h.x=u.clientWidth/2,h.y=u.clientHeight/2;const d=a.getPickRay(h,Z7e);let f;const p=Ci.rayEllipsoid(d,i);if(Object(r["a"])(p))f=Yn.getPoint(d,p.start,eet);else{if(!(l>e._minimumTrackBallHeight)){e._looking=!0;const i=e._ellipsoid.geodeticSurfaceNormal(a.position,cet);return vet(e,t,n,i),void Gt.clone(t,e._tiltCenterMousePosition)}{const e=Ci.grazingAltitudeLocation(d,i);if(!Object(r["a"])(e))return;const t=i.cartesianToCartographic(e,set);t.height=0,f=i.cartographicToCartesian(t,eet)}}const m=ka.eastNorthUpToFixedFrame(f,i,net),_=e._globe,b=e._ellipsoid;e._globe=void 0,e._ellipsoid=k.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;const y=Me.clone(a.transform,oet);a._setTransform(m),z7e(e,t,n,g.UNIT_Z),a._setTransform(y),e._globe=_,e._ellipsoid=b;const v=b.maximumRadius;e._rotateFactor=1/v,e._rotateRateRangeAdjustment=v}function fet(e,t,n){const i=e._ellipsoid,o=e._scene,a=o.camera,c=e._cameraUnderground;let l,u,h;if(Gt.equals(t,e._tiltCenterMousePosition))l=g.clone(e._tiltCenter,eet);else{if(l=z9e(e,t,eet),!Object(r["a"])(l)){if(u=a.getPickRay(t,Z7e),h=Ci.rayEllipsoid(u,i),!Object(r["a"])(h)){const o=i.cartesianToCartographic(a.position,set);if(o.height<=e._minimumTrackBallHeight){e._looking=!0;const i=e._ellipsoid.geodeticSurfaceNormal(a.position,cet);vet(e,t,n,i),Gt.clone(t,e._tiltCenterMousePosition)}return}l=Yn.getPoint(u,h.start,eet)}c&&(Object(r["a"])(u)||(u=a.getPickRay(t,Z7e)),G9e(e,u,l,l)),Gt.clone(t,e._tiltCenterMousePosition),g.clone(l,e._tiltCenter)}const d=o.canvas,f=Q7e;f.x=d.clientWidth/2,f.y=e._tiltCenterMousePosition.y,u=a.getPickRay(f,Z7e);const p=g.magnitude(l),m=g.fromElements(p,p,p,L7e),_=k.fromCartesian3(m,M7e);if(h=Ci.rayEllipsoid(u,_),!Object(r["a"])(h))return;const b=g.magnitude(u.origin)>p?h.start:h.stop,y=Yn.getPoint(u,b,tet),v=ka.eastNorthUpToFixedFrame(l,i,net),O=ka.eastNorthUpToFixedFrame(y,_,iet),A=e._globe,w=e._ellipsoid;e._globe=void 0,e._ellipsoid=k.UNIT_SPHERE,e._rotateFactor=1,e._rotateRateRangeAdjustment=1;let T=g.UNIT_Z;const C=Me.clone(a.transform,oet);a._setTransform(O);const E=g.cross(y,a.positionWC,g7e),x=g.dot(a.rightWC,E);if(x<0){const i=n.startPosition.y-n.endPosition.y;(c&&i<0||!c&&i>0)&&(T=void 0);const o=a.constrainedAxis;a.constrainedAxis=void 0,z7e(e,t,n,T,!0,!1),a.constrainedAxis=o}else z7e(e,t,n,T,!0,!1);if(a._setTransform(v),z7e(e,t,n,T,!1,!0),Object(r["a"])(a.constrainedAxis)){const e=g.cross(a.direction,a.constrainedAxis,g7e);g.equalsEpsilon(e,g.ZERO,s["a"].EPSILON6)||(g.dot(e,a.right)<0&&g.negate(e,e),g.cross(e,a.direction,a.up),g.cross(a.direction,a.up,a.right),g.normalize(a.up,a.up),g.normalize(a.right,a.right))}a._setTransform(C),e._globe=A,e._ellipsoid=w;const S=w.maximumRadius;e._rotateFactor=1/S,e._rotateRateRangeAdjustment=S;const I=g.clone(a.positionWC,g7e);if(e.enableCollisionDetection&&Tet(e),!g.equals(a.positionWC,I)){a._setTransform(O),a.worldToCameraCoordinatesPoint(I,I);const e=g.magnitudeSquared(I);g.magnitudeSquared(a.position)>e&&(g.normalize(a.position,a.position),g.multiplyByScalar(a.position,Math.sqrt(e),a.position));const t=g.angleBetween(I,a.position),n=g.cross(I,a.position,I);g.normalize(n,n);const i=Kr.fromAxisAngle(n,t,ret),o=ce.fromQuaternion(i,aet);ce.multiplyByVector(o,a.direction,a.direction),ce.multiplyByVector(o,a.up,a.up),g.cross(a.direction,a.up,a.right),g.cross(a.right,a.direction,a.up),a._setTransform(C)}}const pet=new Gt,met=new Gt,_et=new Yn,get=new Yn,bet=new g,yet=new g;function vet(e,t,n,i){const a=e._scene,c=a.camera,l=pet;l.x=n.startPosition.x,l.y=0;const u=met;u.x=n.endPosition.x,u.y=0;let h,d,f=c.getPickRay(l,_et),p=c.getPickRay(u,get),m=0;c.frustum instanceof IO?(h=f.origin,d=p.origin,g.add(c.direction,h,h),g.add(c.direction,d,d),g.subtract(h,c.position,h),g.subtract(d,c.position,d),g.normalize(h,h),g.normalize(d,d)):(h=f.direction,d=p.direction);let _=g.dot(h,d);_<1&&(m=Math.acos(_)),m=n.startPosition.x>n.endPosition.x?-m:m;const b=e._horizontalRotationAxis;if(Object(r["a"])(i)?c.look(i,-m):Object(r["a"])(b)?c.look(b,-m):c.lookLeft(m),l.x=0,l.y=n.startPosition.y,u.x=0,u.y=n.endPosition.y,f=c.getPickRay(l,_et),p=c.getPickRay(u,get),m=0,c.frustum instanceof IO?(h=f.origin,d=p.origin,g.add(c.direction,h,h),g.add(c.direction,d,d),g.subtract(h,c.position,h),g.subtract(d,c.position,d),g.normalize(h,h),g.normalize(d,d)):(h=f.direction,d=p.direction),_=g.dot(h,d),_<1&&(m=Math.acos(_)),m=n.startPosition.y>n.endPosition.y?-m:m,i=Object(o["a"])(i,b),Object(r["a"])(i)){const e=c.direction,t=g.negate(i,bet),n=g.equalsEpsilon(e,i,s["a"].EPSILON2),o=g.equalsEpsilon(e,t,s["a"].EPSILON2);if(n||o)(n&&m<0||o&&m>0)&&c.look(c.right,-m);else{_=g.dot(e,i);let n=s["a"].acosClamped(_);m>0&&m>n&&(m=n-s["a"].EPSILON4),_=g.dot(e,t),n=s["a"].acosClamped(_),m<0&&-m>n&&(m=-n+s["a"].EPSILON4);const o=g.cross(i,e,yet);c.look(o,m)}}else c.lookUp(m)}function Oet(e){e9e(e,e.enableRotate,e.rotateEventTypes,F7e,e.inertiaSpin,"_lastInertiaSpinMovement"),e9e(e,e.enableZoom,e.zoomEventTypes,J7e,e.inertiaZoom,"_lastInertiaZoomMovement"),e9e(e,e.enableTilt,e.tiltEventTypes,uet,e.inertiaSpin,"_lastInertiaTiltMovement"),e9e(e,e.enableLook,e.lookEventTypes,vet)}const Aet=new Me,wet=new I;function Tet(e){e._adjustedHeightForTerrain=!0;const t=e._scene,n=t.mode,i=t.globe;if(!Object(r["a"])(i)||n===SH.SCENE2D||n===SH.MORPHING)return;const o=t.camera,a=i.ellipsoid,s=t.mapProjection;let c,l;Me.equals(o.transform,Me.IDENTITY)||(c=Me.clone(o.transform,Aet),l=g.magnitude(o.position),o._setTransform(Me.IDENTITY));const u=wet;n===SH.SCENE3D?a.cartesianToCartographic(o.position,u):s.unproject(o.position,u);let h=!1;if(u.height<e._minimumCollisionTerrainHeight){const t=e._scene.globeHeight;if(Object(r["a"])(t)){const i=t+e.minimumZoomDistance;u.height<i&&(u.height=i,n===SH.SCENE3D?a.cartographicToCartesian(u,o.position):s.project(u,o.position),h=!0)}}Object(r["a"])(c)&&(o._setTransform(c),h&&(g.normalize(o.position,o.position),g.negate(o.position,o.direction),g.multiplyByScalar(o.position,Math.max(l,e.minimumZoomDistance),o.position),g.normalize(o.direction,o.direction),g.cross(o.direction,o.up,o.right),g.cross(o.right,o.direction,o.up)))}Y8e.prototype.onMap=function(){const e=this._scene,t=e.mode,n=e.camera;return t!==SH.COLUMBUS_VIEW||Math.abs(n.position.x)-this._maxCoord.x<0&&Math.abs(n.position.y)-this._maxCoord.y<0};const Cet=new g,Eet=new g;Y8e.prototype.update=function(){const e=this._scene,t=e.camera,n=e.globe,i=e.mode;Me.equals(t.transform,Me.IDENTITY)?(this._globe=n,this._ellipsoid=Object(r["a"])(this._globe)?this._globe.ellipsoid:e.mapProjection.ellipsoid):(this._globe=void 0,this._ellipsoid=k.UNIT_SPHERE);const o=Object(r["a"])(this._globe)?this._globe.terrainExaggeration:1,a=Object(r["a"])(this._globe)?this._globe.terrainExaggerationRelativeHeight:0;this._minimumCollisionTerrainHeight=gc.getHeight(this.minimumCollisionTerrainHeight,o,a),this._minimumPickingTerrainHeight=gc.getHeight(this.minimumPickingTerrainHeight,o,a),this._minimumTrackBallHeight=gc.getHeight(this.minimumTrackBallHeight,o,a),this._cameraUnderground=e.cameraUnderground&&Object(r["a"])(this._globe);const s=this._ellipsoid.maximumRadius;this._rotateFactor=1/s,this._rotateRateRangeAdjustment=s,this._adjustedHeightForTerrain=!1;const c=g.clone(t.positionWC,Cet),l=g.clone(t.directionWC,Eet);if(i===SH.SCENE2D?M9e(this):i===SH.COLUMBUS_VIEW?(this._horizontalRotationAxis=g.UNIT_Z,C7e(this)):i===SH.SCENE3D&&(this._horizontalRotationAxis=void 0,Oet(this)),this.enableCollisionDetection&&!this._adjustedHeightForTerrain){const e=!g.equals(c,t.positionWC)||!g.equals(l,t.directionWC);e&&Tet(this)}this._aggregator.reset()},Y8e.prototype.isDestroyed=function(){return!1},Y8e.prototype.destroy=function(){return this._tweens.removeAll(),this._aggregator=this._aggregator&&this._aggregator.destroy(),Wc(this)};var xet=Y8e,Iet="uniform sampler2D colorTexture;\nuniform sampler2D colorTexture2;\n\nuniform vec2 center;\nuniform float radius;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color0 = texture2D(colorTexture, v_textureCoordinates);\n    vec4 color1 = texture2D(colorTexture2, v_textureCoordinates);\n\n    float x = length(gl_FragCoord.xy - center) / radius;\n    float t = smoothstep(0.5, 0.8, x);\n    gl_FragColor = mix(color0 + color1, color1, t);\n}\n",Det='uniform sampler2D colorTexture;\n\nuniform float avgLuminance;\nuniform float threshold;\nuniform float offset;\n\nvarying vec2 v_textureCoordinates;\n\nfloat key(float avg)\n{\n    float guess = 1.5 - (1.5 / (avg * 0.1 + 1.0));\n    return max(0.0, guess) + 0.1;\n}\n\n// See section 9. "The bright-pass filter" of Realtime HDR Rendering\n// http://www.cg.tuwien.ac.at/research/publications/2007/Luksch_2007_RHR/Luksch_2007_RHR-RealtimeHDR%20.pdf\n\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    vec3 xyz = czm_RGBToXYZ(color.rgb);\n    float luminance = xyz.r;\n\n    float scaledLum = key(avgLuminance) * luminance / avgLuminance;\n    float brightLum = max(scaledLum - threshold, 0.0);\n    float brightness = brightLum / (offset + brightLum);\n\n    xyz.r = brightness;\n    gl_FragColor = vec4(czm_XYZToRGB(xyz), 1.0);\n}\n';function Pet(){this._sceneFramebuffer=new T2e;const e=.125,t=new Array(6);t[0]=new z5e({fragmentShader:eQe,textureScale:e,forcePowerOfTwo:!0,sampleMode:T5e.LINEAR});const n=t[1]=new z5e({fragmentShader:Det,uniforms:{avgLuminance:.5,threshold:.25,offset:.1},textureScale:e,forcePowerOfTwo:!0}),i=this;this._delta=1,this._sigma=2,this._blurStep=new Gt,t[2]=new z5e({fragmentShader:Q5e,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:0},textureScale:e,forcePowerOfTwo:!0}),t[3]=new z5e({fragmentShader:Q5e,uniforms:{step:function(){return i._blurStep.x=i._blurStep.y=1/n.outputTexture.width,i._blurStep},delta:function(){return i._delta},sigma:function(){return i._sigma},direction:1},textureScale:e,forcePowerOfTwo:!0}),t[4]=new z5e({fragmentShader:eQe,sampleMode:T5e.LINEAR}),this._uCenter=new Gt,this._uRadius=void 0,t[5]=new z5e({fragmentShader:Iet,uniforms:{center:function(){return i._uCenter},radius:function(){return i._uRadius},colorTexture2:function(){return i._sceneFramebuffer.framebuffer.getColorTexture(0)}}}),this._stages=new s6e({stages:t});const o=new A6e(this),r=t.length;for(let a=0;a<r;++a)t[a]._textureCache=o;this._textureCache=o,this.length=t.length}Pet.prototype.get=function(e){return this._stages.get(e)},Pet.prototype.getStageByName=function(e){const t=this._stages.length;for(let n=0;n<t;++n){const t=this._stages.get(n);if(t.name===e)return t}};const jet=new be,Ret=new Gt,Let=new Gt,Met=new Me;function Net(e,t,n){const i=t.uniformState,o=i.sunPositionWC,r=i.view,a=i.viewProjection,c=i.projection;let l=Me.computeViewportTransformation(n,0,1,Met);const u=Me.multiplyByPoint(r,o,jet);let h=ka.pointToGLWindowCoordinates(a,l,o,Ret);u.x+=s["a"].SOLAR_RADIUS;const d=ka.pointToGLWindowCoordinates(c,l,u,u),f=30*Gt.magnitude(Gt.subtract(d,h,d))*2,p=Let;p.x=f,p.y=f,e._uCenter=Gt.clone(h,e._uCenter),e._uRadius=.15*Math.max(p.x,p.y);const m=t.drawingBufferWidth,_=t.drawingBufferHeight,g=e._stages,b=g.get(0),y=b.outputTexture.width,v=b.outputTexture.height,O=new Au;O.width=y,O.height=v,l=Me.computeViewportTransformation(O,0,1,Met),h=ka.pointToGLWindowCoordinates(a,l,o,Ret),p.x*=y/m,p.y*=v/_;const A=b.scissorRectangle;A.x=Math.max(h.x-.5*p.x,0),A.y=Math.max(h.y-.5*p.y,0),A.width=Math.min(p.x,m),A.height=Math.min(p.y,_);for(let s=1;s<4;++s)Au.clone(A,g.get(s).scissorRectangle)}Pet.prototype.clear=function(e,t,n){this._sceneFramebuffer.clear(e,t,n),this._textureCache.clear(e)},Pet.prototype.update=function(e){const t=e.context,n=e.viewport,i=this._sceneFramebuffer;i.update(t,n);const o=i.framebuffer;return this._textureCache.update(t),this._stages.update(t,!1),Net(this,t,n),o},Pet.prototype.execute=function(e){const t=this._sceneFramebuffer.framebuffer.getColorTexture(0),n=this._stages,i=n.length;n.get(0).execute(e,t);for(let o=1;o<i;++o)n.get(o).execute(e,n.get(o-1).outputTexture)},Pet.prototype.copy=function(e,t){if(!Object(r["a"])(this._copyColorCommand)){const t=this;this._copyColorCommand=e.createViewportQuadCommand(eQe,{uniformMap:{colorTexture:function(){return t._stages.get(t._stages.length-1).outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},Pet.prototype.isDestroyed=function(){return!1},Pet.prototype.destroy=function(){return this._textureCache.destroy(),this._stages.destroy(),Wc(this)};var Bet=Pet;const Fet=function(e){return function(){e.frameState.afterRender.push((function(){e.requestRender()}))}};function zet(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.canvas;let n=e.creditContainer,i=e.creditViewport,s=Object(RL["a"])(e.contextOptions);if(Object(r["a"])(s)||(s={}),Object(r["a"])(s.webgl)||(s.webgl={}),s.webgl.powerPreference=Object(o["a"])(s.webgl.powerPreference,"high-performance"),!Object(r["a"])(t))throw new a["a"]("options and options.canvas are required.");const c=Object(r["a"])(n),l=new Qke(t,s);c||(n=document.createElement("div"),n.style.position="absolute",n.style.bottom="0",n.style["text-shadow"]="0 0 2px #000000",n.style.color="#ffffff",n.style["font-size"]="10px",n.style["padding-right"]="5px",t.parentNode.appendChild(n)),Object(r["a"])(i)||(i=t.parentNode),this._id=ML(),this._jobScheduler=new Q0e,this._frameState=new XYe(l,new Aqe(n," • ",i),this._jobScheduler),this._frameState.scene3DOnly=Object(o["a"])(e.scene3DOnly,!1),this._removeCreditContainer=!c,this._creditContainer=n,this._canvas=t,this._context=l,this._computeEngine=new Bze(l),this._globe=void 0,this._globeTranslucencyState=new nZe,this._primitives=new Owe,this._groundPrimitives=new Owe,this._globeHeight=void 0,this._cameraUnderground=!1,this._logDepthBuffer=l.fragmentDepth,this._logDepthBufferDirty=!0,this._tweens=new q8e,this._shaderFrameCount=0,this._sunPostProcess=void 0,this._computeCommandList=[],this._overlayCommandList=[],this._useOIT=Object(o["a"])(e.orderIndependentTranslucency,!0),this._executeOITFunction=void 0,this._depthPlane=new tYe(e.depthPlaneEllipsoidOffset),this._clearColorCommand=new xX({color:new Dm,stencil:0,owner:this}),this._depthClearCommand=new xX({depth:1,owner:this}),this._stencilClearCommand=new xX({stencil:0}),this._classificationStencilClearCommand=new xX({stencil:0,renderState:UF.fromCache({stencilMask:cW.CLASSIFICATION_MASK})}),this._depthOnlyRenderStateCache={},this._transitioner=new H8e(this),this._preUpdate=new dn["a"],this._postUpdate=new dn["a"],this._renderError=new dn["a"],this._preRender=new dn["a"],this._postRender=new dn["a"],this._minimumDisableDepthTestDistance=0,this._debugInspector=new Vqe,this._msaaSamples=Object(o["a"])(e.msaaSamples,1),this.rethrowRenderErrors=!1,this.completeMorphOnUserInput=!0,this.morphStart=new dn["a"],this.morphComplete=new dn["a"],this.skyBox=void 0,this.skyAtmosphere=void 0,this.sun=void 0,this.sunBloom=!0,this._sunBloom=void 0,this.moon=void 0,this.backgroundColor=Dm.clone(Dm.BLACK),this._mode=SH.SCENE3D,this._mapProjection=Object(r["a"])(e.mapProjection)?e.mapProjection:new V,this.morphTime=1,this.farToNearRatio=1e3,this.logarithmicDepthFarToNearRatio=1e9,this.nearToFarDistance2D=175e4,this.debugCommandFilter=void 0,this.debugShowCommands=!1,this.debugShowFrustums=!1,this.debugShowFramesPerSecond=!1,this.debugShowDepthFrustum=1,this.debugShowFrustumPlanes=!1,this._debugShowFrustumPlanes=!1,this._debugFrustumPlanes=void 0,this.useDepthPicking=!0,this.pickTranslucentDepth=!1,this.cameraEventWaitTime=500,this.fog=new VYe,this._shadowMapCamera=new IGe(this),this.shadowMap=new A3e({context:l,lightCamera:this._shadowMapCamera,enabled:Object(o["a"])(e.shadows,!1)}),this.invertClassification=!1,this.invertClassificationColor=Dm.clone(Dm.WHITE),this._actualInvertClassificationColor=Dm.clone(this._invertClassificationColor),this._invertClassification=new AZe,this.focalLength=void 0,this.eyeSeparation=void 0,this.postProcessStages=new D6e,this._brdfLutGenerator=new BUe,this._performanceDisplay=void 0,this._debugVolume=void 0,this._screenSpaceCameraController=new xet(this),this._cameraUnderground=!1,this._mapMode2D=Object(o["a"])(e.mapMode2D,rVe.INFINITE_SCROLL),this._environmentState={skyBoxCommand:void 0,skyAtmosphereCommand:void 0,sunDrawCommand:void 0,sunComputeCommand:void 0,moonCommand:void 0,isSunVisible:!1,isMoonVisible:!1,isReadyForAtmosphere:!1,isSkyAtmosphereVisible:!1,clearGlobeDepth:!1,useDepthPlane:!1,renderTranslucentDepthForPick:!1,originalFramebuffer:void 0,useGlobeDepthFramebuffer:!1,useOIT:!1,useInvertClassification:!1,usePostProcess:!1,usePostProcessSelected:!1,useWebVR:!1},this._useWebVR=!1,this._cameraVR=void 0,this._aspectRatioVR=void 0,this.requestRenderMode=Object(o["a"])(e.requestRenderMode,!1),this._renderRequested=!0,this.maximumRenderTimeChange=Object(o["a"])(e.maximumRenderTimeChange,0),this._lastRenderTime=void 0,this._frameRateMonitor=void 0,this._removeRequestListenerCallback=rD["a"].requestCompletedEvent.addEventListener(Fet(this)),this._removeTaskProcessorListenerCallback=il.taskCompletedEvent.addEventListener(Fet(this)),this._removeGlobeCallbacks=[];const u=new Au(0,0,l.drawingBufferWidth,l.drawingBufferHeight),h=new IGe(this);this._logDepthBuffer&&(h.frustum.near=.1,h.frustum.far=1e10),this.preloadFlightCamera=new IGe(this),this.preloadFlightCullingVolume=void 0,this._picking=new k4e(this),this._defaultView=new G3e(this,h,u),this._view=this._defaultView,this._hdr=void 0,this._hdrDirty=void 0,this.highDynamicRange=!1,this.gamma=2.2,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this._specularEnvironmentMapAtlas=void 0,this.light=new Yze,Ket(this,0,mo.now()),this.updateFrameState(),this.initializeFrame()}function ket(e,t){for(let i=0;i<e._removeGlobeCallbacks.length;++i)e._removeGlobeCallbacks[i]();e._removeGlobeCallbacks.length=0;const n=[];Object(r["a"])(t)&&(n.push(t.imageryLayersUpdatedEvent.addEventListener(Fet(e))),n.push(t.terrainProviderChanged.addEventListener(Fet(e)))),e._removeGlobeCallbacks=n}function Uet(e,t,n){const i=e._frameState,o=e._context,a=e._view.oit,s=i.shadowState.lightShadowMaps,c=i.shadowState.lightShadowsEnabled;let l=t.derivedCommands;Object(r["a"])(t.pickId)&&(l.picking=pYe.createPickDerivedCommand(e,t,o,l.picking)),t.pickOnly||(l.depth=pYe.createDepthOnlyDerivedCommand(e,t,o,l.depth)),l.originalCommand=t,e._hdr&&(l.hdr=pYe.createHdrCommand(t,o,l.hdr),t=l.hdr.command,l=t.derivedCommands),c&&t.receiveShadows&&(l.shadows=A3e.createReceiveDerivedCommand(s,t,n,o,l.shadows)),t.pass===hF.TRANSLUCENT&&Object(r["a"])(a)&&a.isSupported()&&(c&&t.receiveShadows?(l.oit=Object(r["a"])(l.oit)?l.oit:{},l.oit.shadows=a.createDerivedCommands(l.shadows.receiveCommand,o,l.oit.shadows)):l.oit=a.createDerivedCommands(t,o,l.oit))}Object.defineProperties(zet.prototype,{canvas:{get:function(){return this._canvas}},drawingBufferHeight:{get:function(){return this._context.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._context.drawingBufferWidth}},maximumAliasedLineWidth:{get:function(){return YN.maximumAliasedLineWidth}},maximumCubeMapSize:{get:function(){return YN.maximumCubeMapSize}},pickPositionSupported:{get:function(){return this._context.depthTexture}},sampleHeightSupported:{get:function(){return this._context.depthTexture}},clampToHeightSupported:{get:function(){return this._context.depthTexture}},invertClassificationSupported:{get:function(){return this._context.depthTexture}},specularEnvironmentMapsSupported:{get:function(){return AX.isSupported(this._context)}},globe:{get:function(){return this._globe},set:function(e){this._globe=this._globe&&this._globe.destroy(),this._globe=e,ket(this,e)}},primitives:{get:function(){return this._primitives}},groundPrimitives:{get:function(){return this._groundPrimitives}},camera:{get:function(){return this._view.camera},set:function(e){this._view.camera=e}},view:{get:function(){return this._view},set:function(e){this._view=e}},defaultView:{get:function(){return this._defaultView}},picking:{get:function(){return this._picking}},screenSpaceCameraController:{get:function(){return this._screenSpaceCameraController}},mapProjection:{get:function(){return this._mapProjection}},jobScheduler:{get:function(){return this._jobScheduler}},frameState:{get:function(){return this._frameState}},environmentState:{get:function(){return this._environmentState}},tweens:{get:function(){return this._tweens}},imageryLayers:{get:function(){if(Object(r["a"])(this.globe))return this.globe.imageryLayers}},terrainProvider:{get:function(){if(Object(r["a"])(this.globe))return this.globe.terrainProvider},set:function(e){Object(r["a"])(this.globe)&&(this.globe.terrainProvider=e)}},terrainProviderChanged:{get:function(){if(Object(r["a"])(this.globe))return this.globe.terrainProviderChanged}},preUpdate:{get:function(){return this._preUpdate}},postUpdate:{get:function(){return this._postUpdate}},renderError:{get:function(){return this._renderError}},preRender:{get:function(){return this._preRender}},postRender:{get:function(){return this._postRender}},lastRenderTime:{get:function(){return this._lastRenderTime}},context:{get:function(){return this._context}},debugFrustumStatistics:{get:function(){return this._view.debugFrustumStatistics}},scene3DOnly:{get:function(){return this._frameState.scene3DOnly}},orderIndependentTranslucency:{get:function(){return this._useOIT}},id:{get:function(){return this._id}},mode:{get:function(){return this._mode},set:function(e){if(this.scene3DOnly&&e!==SH.SCENE3D)throw new a["a"]("Only SceneMode.SCENE3D is valid when scene3DOnly is true.");if(e===SH.SCENE2D)this.morphTo2D(0);else if(e===SH.SCENE3D)this.morphTo3D(0);else{if(e!==SH.COLUMBUS_VIEW)throw new a["a"]("value must be a valid SceneMode enumeration.");this.morphToColumbusView(0)}this._mode=e}},frustumCommandsList:{get:function(){return this._view.frustumCommandsList}},numberOfFrustums:{get:function(){return this._view.frustumCommandsList.length}},useWebVR:{get:function(){return this._useWebVR},set:function(e){if(this.camera.frustum instanceof IO)throw new a["a"]("VR is unsupported with an orthographic projection.");this._useWebVR=e,this._useWebVR?(this._frameState.creditDisplay.container.style.visibility="hidden",this._cameraVR=new IGe(this),Object(r["a"])(this._deviceOrientationCameraController)||(this._deviceOrientationCameraController=new vYe(this)),this._aspectRatioVR=this.camera.frustum.aspectRatio):(this._frameState.creditDisplay.container.style.visibility="visible",this._cameraVR=void 0,this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this.camera.frustum.aspectRatio=this._aspectRatioVR,this.camera.frustum.xOffset=0)}},mapMode2D:{get:function(){return this._mapMode2D}},splitPosition:{get:function(){return this._frameState.splitPosition},set:function(e){this._frameState.splitPosition=e}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance},set:function(e){if(!Object(r["a"])(e)||e<0)throw new a["a"]("minimumDisableDepthTestDistance must be greater than or equal to 0.0.");this._minimumDisableDepthTestDistance=e}},logarithmicDepthBuffer:{get:function(){return this._logDepthBuffer},set:function(e){e=this._context.fragmentDepth&&e,this._logDepthBuffer!==e&&(this._logDepthBuffer=e,this._logDepthBufferDirty=!0)}},gamma:{get:function(){return this._context.uniformState.gamma},set:function(e){this._context.uniformState.gamma=e}},highDynamicRange:{get:function(){return this._hdr},set:function(e){const t=this._context,n=e&&t.depthTexture&&(t.colorBufferFloat||t.colorBufferHalfFloat);this._hdrDirty=n!==this._hdr,this._hdr=n}},highDynamicRangeSupported:{get:function(){const e=this._context;return e.depthTexture&&(e.colorBufferFloat||e.colorBufferHalfFloat)}},cameraUnderground:{get:function(){return this._cameraUnderground}},msaaSamples:{get:function(){return this._msaaSamples},set:function(e){e=Math.min(e,YN.maximumSamples),this._msaaSamples=e}},msaaSupported:{get:function(){return this._context.msaa}},pixelRatio:{get:function(){return this._frameState.pixelRatio},set:function(e){this._frameState.pixelRatio=e}},opaqueFrustumNearOffset:{get:function(){return.9999}},globeHeight:{get:function(){return this._globeHeight}}}),zet.prototype.getCompressedTextureFormatSupported=function(e){const t=this.context;return("WEBGL_compressed_texture_s3tc"===e||"s3tc"===e)&&t.s3tc||("WEBGL_compressed_texture_pvrtc"===e||"pvrtc"===e)&&t.pvrtc||("WEBGL_compressed_texture_etc"===e||"etc"===e)&&t.etc||("WEBGL_compressed_texture_etc1"===e||"etc1"===e)&&t.etc1||("WEBGL_compressed_texture_astc"===e||"astc"===e)&&t.astc||("EXT_texture_compression_bptc"===e||"bc7"===e)&&t.bc7},zet.prototype.updateDerivedCommands=function(e){if(!Object(r["a"])(e.derivedCommands))return;const t=this._frameState,n=this._context;let i=!1;const o=t.shadowState.lastDirtyTime;e.lastDirtyTime!==o&&(e.lastDirtyTime=o,e.dirty=!0,i=!0);const a=t.useLogDepth,s=this._hdr,c=e.derivedCommands,l=Object(r["a"])(c.logDepth),u=Object(r["a"])(c.hdr),h=Object(r["a"])(c.originalCommand),d=a&&!l,f=s&&!u,p=(!a||!s)&&!h;if(e.dirty=e.dirty||d||f||p,e.dirty){e.dirty=!1;const o=t.shadowState.shadowMaps,r=t.shadowState.shadowsEnabled;r&&e.castShadows&&(c.shadows=A3e.createCastDerivedCommand(o,e,i,n,c.shadows)),(l||d)&&(c.logDepth=pYe.createLogDepthCommand(e,n,c.logDepth),Uet(this,c.logDepth.command,i)),(h||p)&&Uet(this,e,i)}};const Vet=new GGe({pass:Ape.RENDER}),Het=new GGe({pass:Ape.PRELOAD}),Get=new GGe({pass:Ape.PRELOAD_FLIGHT}),Wet=new GGe({pass:Ape.REQUEST_RENDER_MODE_DEFER_CHECK}),qet=new Tt;let Yet;function Xet(e){const t=e.globe;if(e._mode===SH.SCENE3D&&Object(r["a"])(t)&&t.show&&!e._cameraUnderground&&!e._globeTranslucencyState.translucent){const n=t.ellipsoid,i=e.frameState.minimumTerrainHeight;return qet.radius=n.minimumRadius+i,Yet=HE.fromBoundingSphere(qet,e.camera.positionWC,Yet),Yet}}function Ket(e,t,n){const i=e._frameState;i.frameNumber=t,i.time=mo.clone(n,i.time)}zet.prototype.clearPasses=function(e){e.render=!1,e.pick=!1,e.depth=!1,e.postProcess=!1,e.offscreen=!1},zet.prototype.updateFrameState=function(){const e=this.camera,t=this._frameState;t.commandList.length=0,t.shadowMaps.length=0,t.brdfLutGenerator=this._brdfLutGenerator,t.environmentMap=this.skyBox&&this.skyBox._cubeMap,t.mode=this._mode,t.morphTime=this.morphTime,t.mapProjection=this.mapProjection,t.camera=e,t.cullingVolume=e.frustum.computeCullingVolume(e.positionWC,e.directionWC,e.upWC),t.occluder=Xet(this),t.minimumTerrainHeight=0,t.minimumDisableDepthTestDistance=this._minimumDisableDepthTestDistance,t.invertClassification=this.invertClassification,t.useLogDepth=this._logDepthBuffer&&!(this.camera.frustum instanceof IO||this.camera.frustum instanceof EO),t.light=this.light,t.cameraUnderground=this._cameraUnderground,t.globeTranslucencyState=this._globeTranslucencyState,Object(r["a"])(this.globe)&&(t.terrainExaggeration=this.globe.terrainExaggeration,t.terrainExaggerationRelativeHeight=this.globe.terrainExaggerationRelativeHeight),Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready?(t.specularEnvironmentMaps=this._specularEnvironmentMapAtlas.texture,t.specularEnvironmentMapsMaximumLOD=this._specularEnvironmentMapAtlas.maximumMipmapLevel):(t.specularEnvironmentMaps=void 0,t.specularEnvironmentMapsMaximumLOD=void 0),t.sphericalHarmonicCoefficients=this.sphericalHarmonicCoefficients,this._actualInvertClassificationColor=Dm.clone(this.invertClassificationColor,this._actualInvertClassificationColor),AZe.isTranslucencySupported(this._context)||(this._actualInvertClassificationColor.alpha=1),t.invertClassificationColor=this._actualInvertClassificationColor,Object(r["a"])(this.globe)?t.maximumScreenSpaceError=this.globe.maximumScreenSpaceError:t.maximumScreenSpaceError=2,this.clearPasses(t.passes),t.tilesetPassState=void 0},zet.prototype.isVisible=function(e,t,n){return Object(r["a"])(e)&&(!Object(r["a"])(e.boundingVolume)||!e.cull||t.computeVisibility(e.boundingVolume)!==G.OUTSIDE&&(!Object(r["a"])(n)||!e.occlude||!e.boundingVolume.isOccluded(n)))};let $et=new Me(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1);function Jet(e,t,n,i){const o=t._frameState,a=o.context,s=e.boundingVolume;let c;Object(r["a"])(t._debugVolume)&&t._debugVolume.destroy();let l=g.clone(s.center);if(o.mode!==SH.SCENE3D){l=Me.multiplyByPoint($et,l,l);const e=o.mapProjection,t=e.unproject(l);l=e.ellipsoid.cartographicToCartesian(t)}if(Object(r["a"])(s.radius)){const e=s.radius;c=mp.toWireframe(rO.createGeometry(new rO({radii:new g(e,e,e),vertexFormat:nF.FLAT_VERTEX_FORMAT}))),t._debugVolume=new EG({geometryInstances:new Sd({geometry:c,modelMatrix:Me.fromTranslation(l),attributes:{color:new jm(1,0,0,1)}}),appearance:new nF({flat:!0,translucent:!1}),asynchronous:!1})}else{const e=s.halfAxes;c=mp.toWireframe(eh.createGeometry(eh.fromDimensions({dimensions:new g(2,2,2),vertexFormat:nF.FLAT_VERTEX_FORMAT}))),t._debugVolume=new EG({geometryInstances:new Sd({geometry:c,modelMatrix:Me.fromRotationTranslation(e,l,new Me),attributes:{color:new jm(1,0,0,1)}}),appearance:new nF({flat:!0,translucent:!1}),asynchronous:!1})}const u=o.commandList,h=o.commandList=[];if(t._debugVolume.update(o),e=h[0],o.useLogDepth){const t=pYe.createLogDepthCommand(e,a);e=t.command}let d;Object(r["a"])(i)&&(d=n.framebuffer,n.framebuffer=i),e.execute(a,n),Object(r["a"])(d)&&(n.framebuffer=d),o.commandList=u}function Qet(e,t,n,i,o){const a=t._frameState;if(Object(r["a"])(t.debugCommandFilter)&&!t.debugCommandFilter(e))return;if(e instanceof xX)return void e.execute(n,i);e.debugShowBoundingVolume&&Object(r["a"])(e.boundingVolume)&&Jet(e,t,i,o),a.useLogDepth&&Object(r["a"])(e.derivedCommands.logDepth)&&(e=e.derivedCommands.logDepth.command);const s=a.passes;if(!s.pick&&!s.depth&&t._hdr&&Object(r["a"])(e.derivedCommands)&&Object(r["a"])(e.derivedCommands.hdr)&&(e=e.derivedCommands.hdr.command),s.pick||s.depth){if(s.pick&&!s.depth&&Object(r["a"])(e.derivedCommands.picking))return e=e.derivedCommands.picking.pickCommand,void e.execute(n,i);if(Object(r["a"])(e.derivedCommands.depth))return e=e.derivedCommands.depth.depthOnlyCommand,void e.execute(n,i)}t.debugShowCommands||t.debugShowFrustums?t._debugInspector.executeDebugShowFrustumsCommand(t,e,i):a.shadowState.lightShadowsEnabled&&e.receiveShadows&&Object(r["a"])(e.derivedCommands.shadows)?e.derivedCommands.shadows.receiveCommand.execute(n,i):e.execute(n,i)}function Zet(e,t,n,i){const o=t._frameState;let a=e.derivedCommands;Object(r["a"])(a)&&(o.useLogDepth&&Object(r["a"])(a.logDepth)&&(e=a.logDepth.command),a=e.derivedCommands,Object(r["a"])(a.picking)?(e=a.picking.pickCommand,e.execute(n,i)):Object(r["a"])(a.depth)&&(e=a.depth.depthOnlyCommand,e.execute(n,i)))}function ett(e,t,n){return t.boundingVolume.distanceSquaredTo(n)-e.boundingVolume.distanceSquaredTo(n)}function ttt(e,t,n){return e.boundingVolume.distanceSquaredTo(n)-t.boundingVolume.distanceSquaredTo(n)+s["a"].EPSILON12}function ntt(e,t,n,i,o){const a=e.context;fM(i,ett,e.camera.positionWC),Object(r["a"])(o)&&t(o.unclassifiedCommand,e,a,n);const s=i.length;for(let r=0;r<s;++r)t(i[r],e,a,n)}function itt(e,t,n,i,o){const a=e.context;fM(i,ttt,e.camera.positionWC),Object(r["a"])(o)&&t(o.unclassifiedCommand,e,a,n);const s=i.length;for(let r=0;r<s;++r)t(i[r],e,a,n)}$et=Me.inverseTransformation($et,$et);const ott=new zO,rtt=new NO,att=new IO,stt=new EO;function ctt(e,t){const n=e.camera,i=e.context,o=e.frameState,a=i.uniformState;let s;a.updateCamera(n),s=Object(r["a"])(n.frustum.fov)?n.frustum.clone(ott):Object(r["a"])(n.frustum.infiniteProjectionMatrix)?n.frustum.clone(rtt):Object(r["a"])(n.frustum.width)?n.frustum.clone(att):n.frustum.clone(stt),s.near=n.frustum.near,s.far=n.frustum.far,a.updateFrustum(s),a.updatePass(hF.ENVIRONMENT);const c=o.passes,l=c.pick,u=e._environmentState,h=e._view,d=u.renderTranslucentDepthForPick,f=u.useWebVR;if(!l){const n=u.skyBoxCommand;if(Object(r["a"])(n)&&Qet(n,e,i,t),u.isSkyAtmosphereVisible&&Qet(u.skyAtmosphereCommand,e,i,t),u.isSunVisible&&(u.sunDrawCommand.execute(i,t),e.sunBloom&&!f)){let n;n=u.useGlobeDepthFramebuffer?h.globeDepth.framebuffer:u.usePostProcess?h.sceneFramebuffer.framebuffer:u.originalFramebuffer,e._sunPostProcess.execute(i),e._sunPostProcess.copy(i,n),t.framebuffer=n}u.isMoonVisible&&u.moonCommand.execute(i,t)}let p;u.useOIT?(Object(r["a"])(e._executeOITFunction)||(e._executeOITFunction=function(e,t,n,o,r){h.globeDepth.prepareColorTextures(i),h.oit.executeCommands(e,t,n,o,r)}),p=e._executeOITFunction):p=c.render?ntt:itt;const m=h.frustumCommandsList,_=m.length,g=u.clearGlobeDepth,b=u.useDepthPlane,y=e._globeTranslucencyState,v=y.translucent,O=e._view.globeTranslucencyFramebuffer,A=e._depthClearCommand,w=e._stencilClearCommand,T=e._classificationStencilClearCommand,C=e._depthPlane,E=u.usePostProcessSelected,x=n.position.z;let S;for(let I=0;I<_;++I){const c=_-I-1,f=m[c];e.mode===SH.SCENE2D?(n.position.z=x-f.near+1,s.far=Math.max(1,f.far-f.near),s.near=1,a.update(o),a.updateFrustum(s)):(s.near=0!==c?f.near*e.opaqueFrustumNearOffset:f.near,s.far=f.far,a.updateFrustum(s)),A.execute(i,t),i.stencilBuffer&&w.execute(i,t),a.updatePass(hF.GLOBE);let D=f.commands[hF.GLOBE],P=f.indices[hF.GLOBE];if(v)y.executeGlobeCommands(f,Qet,O,e,t);else for(S=0;S<P;++S)Qet(D[S],e,i,t);const j=h.globeDepth;if(Object(r["a"])(j)&&u.useGlobeDepthFramebuffer&&j.executeCopyDepth(i,t),!u.renderTranslucentDepthForPick)if(a.updatePass(hF.TERRAIN_CLASSIFICATION),D=f.commands[hF.TERRAIN_CLASSIFICATION],P=f.indices[hF.TERRAIN_CLASSIFICATION],v)y.executeGlobeClassificationCommands(f,Qet,O,e,t);else for(S=0;S<P;++S)Qet(D[S],e,i,t);if(g&&(A.execute(i,t),b&&C.execute(i,t)),!u.useInvertClassification||l||u.renderTranslucentDepthForPick){for(a.updatePass(hF.CESIUM_3D_TILE),D=f.commands[hF.CESIUM_3D_TILE],P=f.indices[hF.CESIUM_3D_TILE],S=0;S<P;++S)Qet(D[S],e,i,t);if(P>0&&(Object(r["a"])(j)&&u.useGlobeDepthFramebuffer&&(j.prepareColorTextures(i,g),j.executeUpdateDepth(i,t,g,j.depthStencilTexture)),!u.renderTranslucentDepthForPick))for(a.updatePass(hF.CESIUM_3D_TILE_CLASSIFICATION),D=f.commands[hF.CESIUM_3D_TILE_CLASSIFICATION],P=f.indices[hF.CESIUM_3D_TILE_CLASSIFICATION],S=0;S<P;++S)Qet(D[S],e,i,t)}else{e._invertClassification.clear(i,t);const n=t.framebuffer;for(t.framebuffer=e._invertClassification._fbo.framebuffer,a.updatePass(hF.CESIUM_3D_TILE),D=f.commands[hF.CESIUM_3D_TILE],P=f.indices[hF.CESIUM_3D_TILE],S=0;S<P;++S)Qet(D[S],e,i,t);for(Object(r["a"])(j)&&u.useGlobeDepthFramebuffer&&(e._invertClassification.prepareTextures(i),j.executeUpdateDepth(i,t,g,e._invertClassification._fbo.getDepthStencilTexture())),a.updatePass(hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW),D=f.commands[hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],P=f.indices[hF.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW],S=0;S<P;++S)Qet(D[S],e,i,t);for(t.framebuffer=n,e._invertClassification.executeClassified(i,t),1===o.invertClassificationColor.alpha&&e._invertClassification.executeUnclassified(i,t),P>0&&i.stencilBuffer&&T.execute(i,t),a.updatePass(hF.CESIUM_3D_TILE_CLASSIFICATION),D=f.commands[hF.CESIUM_3D_TILE_CLASSIFICATION],P=f.indices[hF.CESIUM_3D_TILE_CLASSIFICATION],S=0;S<P;++S)Qet(D[S],e,i,t)}for(P>0&&i.stencilBuffer&&w.execute(i,t),a.updatePass(hF.OPAQUE),D=f.commands[hF.OPAQUE],P=f.indices[hF.OPAQUE],S=0;S<P;++S)Qet(D[S],e,i,t);let R;0!==c&&e.mode!==SH.SCENE2D&&(s.near=f.near,a.updateFrustum(s)),!l&&u.useInvertClassification&&o.invertClassificationColor.alpha<1&&(R=e._invertClassification),a.updatePass(hF.TRANSLUCENT),D=f.commands[hF.TRANSLUCENT],D.length=f.indices[hF.TRANSLUCENT],p(e,Qet,t,D,R);const L=f.indices[hF.CESIUM_3D_TILE_CLASSIFICATION]>0;if(L&&h.translucentTileClassification.isSupported()&&(h.translucentTileClassification.executeTranslucentCommands(e,Qet,t,D,j.depthStencilTexture),h.translucentTileClassification.executeClassificationCommands(e,Qet,t,f)),i.depthTexture&&e.useDepthPicking&&(u.useGlobeDepthFramebuffer||d)){const n=j.depthStencilTexture,o=e._picking.getPickDepth(e,c);o.update(i,n),o.executeCopyDepth(i,t)}if(l||!E)continue;const M=t.framebuffer;if(t.framebuffer=h.sceneFramebuffer.getIdFramebuffer(),s.near=0!==c?f.near*e.opaqueFrustumNearOffset:f.near,s.far=f.far,a.updateFrustum(s),a.updatePass(hF.GLOBE),D=f.commands[hF.GLOBE],P=f.indices[hF.GLOBE],v)y.executeGlobeCommands(f,Zet,O,e,t);else for(S=0;S<P;++S)Zet(D[S],e,i,t);for(g&&(A.framebuffer=t.framebuffer,A.execute(i,t),A.framebuffer=void 0),g&&b&&C.execute(i,t),a.updatePass(hF.CESIUM_3D_TILE),D=f.commands[hF.CESIUM_3D_TILE],P=f.indices[hF.CESIUM_3D_TILE],S=0;S<P;++S)Zet(D[S],e,i,t);for(a.updatePass(hF.OPAQUE),D=f.commands[hF.OPAQUE],P=f.indices[hF.OPAQUE],S=0;S<P;++S)Zet(D[S],e,i,t);for(a.updatePass(hF.TRANSLUCENT),D=f.commands[hF.TRANSLUCENT],P=f.indices[hF.TRANSLUCENT],S=0;S<P;++S)Zet(D[S],e,i,t);t.framebuffer=M}}function ltt(e){const t=e.context.uniformState;t.updatePass(hF.COMPUTE);const n=e._environmentState.sunComputeCommand;Object(r["a"])(n)&&n.execute(e._computeEngine);const i=e._computeCommandList,o=i.length;for(let r=0;r<o;++r)i[r].execute(e._computeEngine)}function utt(e,t){const n=e.context.uniformState;n.updatePass(hF.OVERLAY);const i=e.context,o=e._overlayCommandList,r=o.length;for(let a=0;a<r;++a)o[a].execute(i,t)}function htt(e,t,n){const i=n.shadowMapCullingVolume,o=n.isPointLight,r=n.passes,a=r.length,s=t.length;for(let c=0;c<s;++c){const n=t[c];if(e.updateDerivedCommands(n),n.castShadows&&(n.pass===hF.GLOBE||n.pass===hF.CESIUM_3D_TILE||n.pass===hF.OPAQUE||n.pass===hF.TRANSLUCENT)&&e.isVisible(n,i))if(o)for(let e=0;e<a;++e)r[e].commandList.push(n);else if(1===a)r[0].commandList.push(n);else{let t=!1;for(let i=a-1;i>=0;--i){const o=r[i].cullingVolume;if(e.isVisible(n,o))r[i].commandList.push(n),t=!0;else if(t)break}}}}function dtt(e){const t=e.frameState,n=t.shadowState.shadowMaps,i=n.length;if(!t.shadowState.shadowsEnabled)return;const o=e.context,r=o.uniformState;for(let a=0;a<i;++a){const t=n[a];if(t.outOfView)continue;const i=t.passes,s=i.length;for(let e=0;e<s;++e)i[e].commandList.length=0;const c=e.frameState.commandList;htt(e,c,t);for(let n=0;n<s;++n){const i=t.passes[n];r.updateCamera(i.camera),t.updatePass(o,n);const s=i.commandList.length;for(let t=0;t<s;++t){const n=i.commandList[t];r.updatePass(n.pass),Qet(n.derivedCommands.shadows.castCommands[a],e,o,i.passState)}}}}const ftt=new g;function ptt(e,t,n){const i=e._view,r=i.camera,a=e._environmentState,s=a.renderTranslucentDepthForPick;Itt(e,t,n),Stt(e),i.createPotentiallyVisibleSet(e),ltt(e),s||dtt(e);const c=t.viewport;c.x=0,c.y=0,c.width=.5*c.width;const l=IGe.clone(r,e._cameraVR);l.frustum=r.frustum;const u=r.frustum.near,h=u*Object(o["a"])(e.focalLength,5),d=Object(o["a"])(e.eyeSeparation,h/30),f=g.multiplyByScalar(l.right,.5*d,ftt);r.frustum.aspectRatio=c.width/c.height;const p=.5*d*u/h;g.add(l.position,f,r.position),r.frustum.xOffset=p,ctt(e,t),c.x=c.width,g.subtract(l.position,f,r.position),r.frustum.xOffset=-p,ctt(e,t),IGe.clone(l,r)}zet.prototype.updateAndExecuteCommands=function(e,t){const n=this._frameState,i=n.mode,o=this._environmentState.useWebVR;o?ptt(this,e,t):i!==SH.SCENE2D||this._mapMode2D===rVe.ROTATE?Ttt(!0,this,e,t):(Itt(this,e,t),wtt(this,e))};const mtt=new I(Math.PI,s["a"].PI_OVER_TWO),_tt=new g,gtt=new g,btt=new Me,ytt=new Me,vtt=new g,Ott=new g,Att=new Au;function wtt(e,t){const n=e.context,i=e.frameState,o=e.camera,r=t.viewport,a=Au.clone(r,Att);t.viewport=a;const c=mtt,l=_tt,u=e.mapProjection;u.project(c,l);const h=g.clone(o.position,gtt),d=Me.clone(o.transform,ytt),f=o.frustum.clone();o._setTransform(Me.IDENTITY);const p=Me.computeViewportTransformation(a,0,1,btt),m=o.frustum.projectionMatrix,_=o.positionWC.y,b=g.fromElements(s["a"].sign(_)*l.x-_,0,-o.positionWC.x,vtt),y=ka.pointToGLWindowCoordinates(m,p,b,Ott);y.x=Math.floor(y.x);const v=a.x,O=a.width;if(0===_||y.x<=v||y.x>=v+O)Ttt(!0,e,t);else if(Math.abs(v+.5*O-y.x)<1)a.width=y.x-a.x,o.position.x*=s["a"].sign(o.position.x),o.frustum.right=0,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!0,e,t),a.x=y.x,o.position.x=-o.position.x,o.frustum.right=-o.frustum.left,o.frustum.left=0,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!1,e,t);else if(y.x>v+.5*O){a.width=y.x-v;const r=o.frustum.right;o.frustum.right=l.x-_,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!0,e,t),a.x=y.x,a.width=v+O-y.x,o.position.x=-o.position.x,o.frustum.left=-o.frustum.right,o.frustum.right=r-2*o.frustum.right,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!1,e,t)}else{a.x=y.x,a.width=v+O-y.x;const r=o.frustum.left;o.frustum.left=-l.x-_,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!0,e,t),a.x=v,a.width=y.x-v,o.position.x=-o.position.x,o.frustum.right=-o.frustum.left,o.frustum.left=r-2*o.frustum.left,i.cullingVolume=o.frustum.computeCullingVolume(o.positionWC,o.directionWC,o.upWC),n.uniformState.update(i),Ttt(!1,e,t)}o._setTransform(d),g.clone(h,o.position),o.frustum=f.clone(),t.viewport=r}function Ttt(e,t,n,i){const o=t._environmentState,a=t._view,s=o.renderTranslucentDepthForPick;e||(t.frameState.commandList.length=0),Stt(t),a.createPotentiallyVisibleSet(t),e&&(Object(r["a"])(i)&&Itt(t,n,i),ltt(t),s||dtt(t)),ctt(t,n)}const Ctt=new av;function Ett(e){const t=e._frameState;e.debugShowFrustumPlanes!==e._debugShowFrustumPlanes&&(e.debugShowFrustumPlanes?e._debugFrustumPlanes=new Mqe({camera:e.camera,updateOnChange:!1,frustumSplits:t.frustumSplits}):e._debugFrustumPlanes=e._debugFrustumPlanes&&e._debugFrustumPlanes.destroy(),e._debugShowFrustumPlanes=e.debugShowFrustumPlanes),Object(r["a"])(e._debugFrustumPlanes)&&e._debugFrustumPlanes.update(t)}function xtt(e){const t=e._frameState,n=t.shadowMaps,i=n.length,o=i>0&&!t.passes.pick&&e.mode===SH.SCENE3D;if(o!==t.shadowState.shadowsEnabled&&(++t.shadowState.lastDirtyTime,t.shadowState.shadowsEnabled=o),t.shadowState.lightShadowsEnabled=!1,o){for(let e=0;e<i;++e)if(n[e]!==t.shadowState.shadowMaps[e]){++t.shadowState.lastDirtyTime;break}t.shadowState.shadowMaps.length=0,t.shadowState.lightShadowMaps.length=0;for(let e=0;e<i;++e){const i=n[e];i.update(t),t.shadowState.shadowMaps.push(i),i.fromLightSource&&(t.shadowState.lightShadowMaps.push(i),t.shadowState.lightShadowsEnabled=!0),i.dirty&&(++t.shadowState.lastDirtyTime,i.dirty=!1)}}}function Stt(e){const t=e._frameState;e._groundPrimitives.update(t),e._primitives.update(t),Ett(e),xtt(e),e._globe&&e._globe.render(t)}function Itt(e,t,n){const i=e._context,o=e._frameState,a=e._environmentState,s=e._view,c=e._frameState.passes,l=c.pick;Object(r["a"])(s.globeDepth)&&(s.globeDepth.picking=l);const u=a.useWebVR;a.originalFramebuffer=t.framebuffer,Object(r["a"])(e.sun)&&e.sunBloom!==e._sunBloom?(e.sunBloom&&!u?e._sunPostProcess=new Bet:Object(r["a"])(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy()),e._sunBloom=e.sunBloom):!Object(r["a"])(e.sun)&&Object(r["a"])(e._sunPostProcess)&&(e._sunPostProcess=e._sunPostProcess.destroy(),e._sunBloom=!1);const h=e._clearColorCommand;Dm.clone(n,h.color),h.execute(i,t);const d=a.useGlobeDepthFramebuffer=Object(r["a"])(s.globeDepth);d&&(s.globeDepth.update(i,t,s.viewport,e.msaaSamples,e._hdr,a.clearGlobeDepth),s.globeDepth.clear(i,t,n));const f=s.oit,p=a.useOIT=!l&&Object(r["a"])(f)&&f.isSupported();p&&(f.update(i,t,s.globeDepth.colorFramebufferManager,e._hdr,e.msaaSamples),f.clear(i,t,n),a.useOIT=f.isSupported());const m=e.postProcessStages;let _=a.usePostProcess=!l&&(e._hdr||m.length>0||m.ambientOcclusion.enabled||m.fxaa.enabled||m.bloom.enabled);a.usePostProcessSelected=!1,_&&(s.sceneFramebuffer.update(i,s.viewport,e._hdr,e.msaaSamples),s.sceneFramebuffer.clear(i,t,n),m.update(i,o.useLogDepth,e._hdr),m.clear(i),_=a.usePostProcess=m.ready,a.usePostProcessSelected=_&&m.hasSelected),a.isSunVisible&&e.sunBloom&&!u?(t.framebuffer=e._sunPostProcess.update(t),e._sunPostProcess.clear(i,t,n)):d?t.framebuffer=s.globeDepth.framebuffer:_&&(t.framebuffer=s.sceneFramebuffer.framebuffer),Object(r["a"])(t.framebuffer)&&h.execute(i,t);const g=a.useInvertClassification=!l&&Object(r["a"])(t.framebuffer)&&e.invertClassification;if(g){let n;if(1===e.frameState.invertClassificationColor.alpha&&a.useGlobeDepthFramebuffer&&(n=s.globeDepth.framebuffer),Object(r["a"])(n)||i.depthTexture){if(e._invertClassification.previousFramebuffer=n,e._invertClassification.update(i,e.msaaSamples,s.globeDepth.colorFramebufferManager),e._invertClassification.clear(i,t),e.frameState.invertClassificationColor.alpha<1&&p){const t=e._invertClassification.unclassifiedCommand,n=t.derivedCommands;n.oit=f.createDerivedCommands(t,i,n.oit)}}else a.useInvertClassification=!1}e._globeTranslucencyState.translucent&&s.globeTranslucencyFramebuffer.updateAndClear(e._hdr,s.viewport,i,t)}function Dtt(e){const t=e._frameState.afterRender;for(let n=0,i=t.length;n<i;++n)t[n](),e.requestRender();t.length=0}function Ptt(e){const t=e._globe,n=e.camera,i=n.positionCartographic;if(Object(r["a"])(t)&&t.show&&Object(r["a"])(i))return t.getHeight(i)}function jtt(e){const t=e.camera,n=e._mode,i=e.globe,o=e._screenSpaceCameraController,a=t.positionCartographic;if(!Object(r["a"])(a))return!1;if(!o.onMap()&&a.height<0)return!0;if(!Object(r["a"])(i)||!i.show||n===SH.SCENE2D||n===SH.MORPHING)return!1;const s=e._globeHeight;return Object(r["a"])(s)&&a.height<s}function Rtt(e,t){if(e.debugShowFramesPerSecond){if(!Object(r["a"])(e._performanceDisplay)){const t=document.createElement("div");t.className="cesium-performanceDisplay-defaultContainer";const n=e._canvas.parentNode;n.appendChild(t);const i=new c2e({container:t});e._performanceDisplay=i,e._performanceContainer=t}e._performanceDisplay.throttled=e.requestRenderMode,e._performanceDisplay.update(t)}else Object(r["a"])(e._performanceDisplay)&&(e._performanceDisplay=e._performanceDisplay&&e._performanceDisplay.destroy(),e._performanceContainer.parentNode.removeChild(e._performanceContainer))}function Ltt(e){e._jobScheduler.resetBudgets();const t=e._frameState,n=e.primitives;n.prePassesUpdate(t),Object(r["a"])(e.globe)&&e.globe.update(t),e._picking.update(),t.creditDisplay.update()}function Mtt(e){const t=e._frameState,n=e.primitives;n.postPassesUpdate(t),rD["a"].update()}zet.prototype.updateEnvironment=function(){const e=this._frameState,t=this._view,n=this._environmentState,i=e.passes.render,o=e.passes.offscreen,a=this.skyAtmosphere,s=this.globe,c=this._globeTranslucencyState;if(!i||this._mode!==SH.SCENE2D&&t.camera.frustum instanceof IO||!c.environmentVisible)n.skyAtmosphereCommand=void 0,n.skyBoxCommand=void 0,n.sunDrawCommand=void 0,n.sunComputeCommand=void 0,n.moonCommand=void 0;else{Object(r["a"])(a)?(Object(r["a"])(s)&&(a.setDynamicAtmosphereColor(s.enableLighting&&s.dynamicAtmosphereLighting,s.dynamicAtmosphereLightingFromSun),n.isReadyForAtmosphere=n.isReadyForAtmosphere||s._surface._tilesToRender.length>0),n.skyAtmosphereCommand=a.update(e,s),Object(r["a"])(n.skyAtmosphereCommand)&&this.updateDerivedCommands(n.skyAtmosphereCommand)):n.skyAtmosphereCommand=void 0,n.skyBoxCommand=Object(r["a"])(this.skyBox)?this.skyBox.update(e,this._hdr):void 0;const i=Object(r["a"])(this.sun)?this.sun.update(e,t.passState,this._hdr):void 0;n.sunDrawCommand=Object(r["a"])(i)?i.drawCommand:void 0,n.sunComputeCommand=Object(r["a"])(i)?i.computeCommand:void 0,n.moonCommand=Object(r["a"])(this.moon)?this.moon.update(e):void 0}const l=n.clearGlobeDepth=Object(r["a"])(s)&&s.show&&(!s.depthTestAgainstTerrain||this.mode===SH.SCENE2D),u=n.useDepthPlane=l&&this.mode===SH.SCENE3D&&c.useDepthPlane;u&&this._depthPlane.update(e),n.renderTranslucentDepthForPick=!1,n.useWebVR=this._useWebVR&&this.mode!==SH.SCENE2D&&!o;const h=e.mode!==SH.SCENE3D||c.sunVisibleThroughGlobe?void 0:e.occluder;let d=e.cullingVolume;const f=Ctt.planes;for(let r=0;r<5;++r)f[r]=d.planes[r];d=Ctt,n.isSkyAtmosphereVisible=Object(r["a"])(n.skyAtmosphereCommand)&&n.isReadyForAtmosphere,n.isSunVisible=this.isVisible(n.sunDrawCommand,d,h),n.isMoonVisible=this.isVisible(n.moonCommand,d,h);const p=this.specularEnvironmentMaps;let m=this._specularEnvironmentMapAtlas;!Object(r["a"])(p)||Object(r["a"])(m)&&m.url===p?!Object(r["a"])(p)&&Object(r["a"])(m)&&(m.destroy(),this._specularEnvironmentMapAtlas=void 0):(m=m&&m.destroy(),this._specularEnvironmentMapAtlas=new AX(p)),Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e)},zet.prototype.resolveFramebuffers=function(e){const t=this._context,n=this._environmentState,i=this._view,a=i.globeDepth;Object(r["a"])(a)&&a.prepareColorTextures(t);const s=n.useOIT,c=n.useGlobeDepthFramebuffer,l=n.usePostProcess,u=n.originalFramebuffer,h=c?a.colorFramebufferManager:void 0,d=i.sceneFramebuffer._colorFramebuffer,f=i.sceneFramebuffer.idFramebuffer;s&&(e.framebuffer=l?d.framebuffer:u,i.oit.execute(t,e));const p=i.translucentTileClassification;if(p.hasTranslucentDepth&&p.isSupported()&&p.execute(this,e),l){i.sceneFramebuffer.prepareColorTextures(t);let e=d;c&&!s&&(e=h);const n=this.postProcessStages,r=e.getColorTexture(0),a=f.getColorTexture(0),l=Object(o["a"])(h,d).getDepthStencilTexture();n.execute(t,r,l,a),n.copy(t,u)}s||l||!c||(e.framebuffer=u,a.executeCopyColor(t,e))},zet.prototype.initializeFrame=function(){120===this._shaderFrameCount++&&(this._shaderFrameCount=0,this._context.shaderCache.destroyReleasedShaderPrograms(),this._context.textureCache.destroyReleasedTextures()),this._tweens.update(),this._globeHeight=Ptt(this),this._cameraUnderground=jtt(this),this._globeTranslucencyState.update(this),this._screenSpaceCameraController.update(),Object(r["a"])(this._deviceOrientationCameraController)&&this._deviceOrientationCameraController.update(),this.camera.update(this._mode),this.camera._updateCameraChanged()};const Ntt=new Dm;function Btt(e){const t=e._frameState,n=e.context,i=n.uniformState,a=e._defaultView;e._view=a,e.updateFrameState(),t.passes.render=!0,t.passes.postProcess=e.postProcessStages.hasSelected,t.tilesetPassState=Vet;let s=Object(o["a"])(e.backgroundColor,Dm.BLACK);e._hdr&&(s=Dm.clone(s,Ntt),s.red=Math.pow(s.red,e.gamma),s.green=Math.pow(s.green,e.gamma),s.blue=Math.pow(s.blue,e.gamma)),t.backgroundColor=s,e.fog.update(t),i.update(t);const c=e.shadowMap;Object(r["a"])(c)&&c.enabled&&(!Object(r["a"])(e.light)||e.light instanceof Yze?g.negate(i.sunDirectionWC,e._shadowMapCamera.direction):g.clone(e.light.direction,e._shadowMapCamera.direction),t.shadowMaps.push(c)),e._computeCommandList.length=0,e._overlayCommandList.length=0;const l=a.viewport;l.x=0,l.y=0,l.width=n.drawingBufferWidth,l.height=n.drawingBufferHeight;const u=a.passState;u.framebuffer=void 0,u.blendingEnabled=void 0,u.scissorTest=void 0,u.viewport=Au.clone(l,u.viewport),Object(r["a"])(e.globe)&&e.globe.beginFrame(t),e.updateEnvironment(),e.updateAndExecuteCommands(u,s),e.resolveFramebuffers(u),u.framebuffer=void 0,utt(e,u),Object(r["a"])(e.globe)&&(e.globe.endFrame(t),e.globe.tilesLoaded||(e._renderRequested=!0)),n.endFrame()}function Ftt(e,t){try{t(e)}catch(n){if(e._renderError.raiseEvent(e,n),e.rethrowRenderErrors)throw n}}function ztt(e){return e._picking.updateMostDetailedRayPicks(e)}function ktt(e){const t=e._frameState;Het.camera=t.camera,Het.cullingVolume=t.cullingVolume;const n=e.primitives;n.updateForPass(t,Het)}function Utt(e){const t=e._frameState,n=t.camera;if(!n.canPreloadFlight())return;Get.camera=e.preloadFlightCamera,Get.cullingVolume=e.preloadFlightCullingVolume;const i=e.primitives;i.updateForPass(t,Get)}function Vtt(e){e.primitives.updateForPass(e._frameState,Wet)}zet.prototype.render=function(e){this._preUpdate.raiseEvent(this,e);const t=this._frameState;t.newFrame=!1,Object(r["a"])(e)||(e=mo.now());const n=this._view.checkForCameraUpdates(this);let i=!this.requestRenderMode||this._renderRequested||n||this._logDepthBufferDirty||this._hdrDirty||this.mode===SH.MORPHING;if(!i&&Object(r["a"])(this.maximumRenderTimeChange)&&Object(r["a"])(this._lastRenderTime)){const t=Math.abs(mo.secondsDifference(this._lastRenderTime,e));i=i||t>this.maximumRenderTimeChange}if(i){this._lastRenderTime=mo.clone(e,this._lastRenderTime),this._renderRequested=!1,this._logDepthBufferDirty=!1,this._hdrDirty=!1;const n=s["a"].incrementWrap(t.frameNumber,15e6,1);Ket(this,n,e),t.newFrame=!0}Ftt(this,Ltt),this.primitives.show&&(Ftt(this,ztt),Ftt(this,ktt),Ftt(this,Utt),i||Ftt(this,Vtt)),this._postUpdate.raiseEvent(this,e),i&&(this._preRender.raiseEvent(this,e),t.creditDisplay.beginFrame(),Ftt(this,Btt)),Rtt(this,i),Ftt(this,Mtt),Dtt(this),i&&(this._postRender.raiseEvent(this,e),t.creditDisplay.endFrame())},zet.prototype.forceRender=function(e){this._renderRequested=!0,this.render(e)},zet.prototype.requestRender=function(){this._renderRequested=!0},zet.prototype.clampLineWidth=function(e){return Math.max(YN.minimumAliasedLineWidth,Math.min(e,YN.maximumAliasedLineWidth))},zet.prototype.pick=function(e,t,n){return this._picking.pick(this,e,t,n)},zet.prototype.pickPositionWorldCoordinates=function(e,t){return this._picking.pickPositionWorldCoordinates(this,e,t)},zet.prototype.pickPosition=function(e,t){return this._picking.pickPosition(this,e,t)},zet.prototype.drillPick=function(e,t,n,i){return this._picking.drillPick(this,e,t,n,i)},zet.prototype.pickFromRay=function(e,t,n){return this._picking.pickFromRay(this,e,t,n)},zet.prototype.drillPickFromRay=function(e,t,n,i){return this._picking.drillPickFromRay(this,e,t,n,i)},zet.prototype.pickFromRayMostDetailed=function(e,t,n){return this._picking.pickFromRayMostDetailed(this,e,t,n)},zet.prototype.drillPickFromRayMostDetailed=function(e,t,n,i){return this._picking.drillPickFromRayMostDetailed(this,e,t,n,i)},zet.prototype.sampleHeight=function(e,t,n){return this._picking.sampleHeight(this,e,t,n)},zet.prototype.clampToHeight=function(e,t,n,i){return this._picking.clampToHeight(this,e,t,n,i)},zet.prototype.sampleHeightMostDetailed=function(e,t,n){return this._picking.sampleHeightMostDetailed(this,e,t,n)},zet.prototype.clampToHeightMostDetailed=function(e,t,n){return this._picking.clampToHeightMostDetailed(this,e,t,n)},zet.prototype.cartesianToCanvasCoordinates=function(e,t){return f9.wgs84ToWindowCoordinates(this,e,t)},zet.prototype.completeMorph=function(){this._transitioner.completeMorph()},zet.prototype.morphTo2D=function(e){let t;const n=this.globe;t=Object(r["a"])(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=Object(o["a"])(e,2),this._transitioner.morphTo2D(e,t)},zet.prototype.morphToColumbusView=function(e){let t;const n=this.globe;t=Object(r["a"])(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=Object(o["a"])(e,2),this._transitioner.morphToColumbusView(e,t)},zet.prototype.morphTo3D=function(e){let t;const n=this.globe;t=Object(r["a"])(n)?n.ellipsoid:this.mapProjection.ellipsoid,e=Object(o["a"])(e,2),this._transitioner.morphTo3D(e,t)},zet.prototype.isDestroyed=function(){return!1},zet.prototype.destroy=function(){this._tweens.removeAll(),this._computeEngine=this._computeEngine&&this._computeEngine.destroy(),this._screenSpaceCameraController=this._screenSpaceCameraController&&this._screenSpaceCameraController.destroy(),this._deviceOrientationCameraController=this._deviceOrientationCameraController&&!this._deviceOrientationCameraController.isDestroyed()&&this._deviceOrientationCameraController.destroy(),this._primitives=this._primitives&&this._primitives.destroy(),this._groundPrimitives=this._groundPrimitives&&this._groundPrimitives.destroy(),this._globe=this._globe&&this._globe.destroy(),this.skyBox=this.skyBox&&this.skyBox.destroy(),this.skyAtmosphere=this.skyAtmosphere&&this.skyAtmosphere.destroy(),this._debugSphere=this._debugSphere&&this._debugSphere.destroy(),this.sun=this.sun&&this.sun.destroy(),this._sunPostProcess=this._sunPostProcess&&this._sunPostProcess.destroy(),this._depthPlane=this._depthPlane&&this._depthPlane.destroy(),this._transitioner=this._transitioner&&this._transitioner.destroy(),this._debugFrustumPlanes=this._debugFrustumPlanes&&this._debugFrustumPlanes.destroy(),this._brdfLutGenerator=this._brdfLutGenerator&&this._brdfLutGenerator.destroy(),this._picking=this._picking&&this._picking.destroy(),this._defaultView=this._defaultView&&this._defaultView.destroy(),this._view=void 0,this._removeCreditContainer&&this._canvas.parentNode.removeChild(this._creditContainer),this.postProcessStages=this.postProcessStages&&this.postProcessStages.destroy(),this._context=this._context&&this._context.destroy(),this._frameState.creditDisplay=this._frameState.creditDisplay&&this._frameState.creditDisplay.destroy(),Object(r["a"])(this._performanceDisplay)&&(this._performanceDisplay=this._performanceDisplay&&this._performanceDisplay.destroy(),this._performanceContainer.parentNode.removeChild(this._performanceContainer)),this._removeRequestListenerCallback(),this._removeTaskProcessorListenerCallback();for(let e=0;e<this._removeGlobeCallbacks.length;++e)this._removeGlobeCallbacks[e]();return this._removeGlobeCallbacks.length=0,Wc(this)};var Htt=zet,Gtt="float interpolateByDistance(vec4 nearFarScalar, float distance)\n{\n    float startDistance = nearFarScalar.x;\n    float startValue = nearFarScalar.y;\n    float endDistance = nearFarScalar.z;\n    float endValue = nearFarScalar.w;\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\n    return mix(startValue, endValue, t);\n}\n\nvec3 getLightDirection(vec3 positionWC)\n{\n    float lightEnum = u_radiiAndDynamicAtmosphereColor.z;\n    vec3 lightDirection =\n        positionWC * float(lightEnum == 0.0) +\n        czm_lightDirectionWC * float(lightEnum == 1.0) +\n        czm_sunDirectionWC * float(lightEnum == 2.0);\n    return normalize(lightDirection);\n}\n\nvoid computeAtmosphereScattering(vec3 positionWC, vec3 lightDirection, out vec3 rayleighColor, out vec3 mieColor, out float opacity, out float underTranslucentGlobe)\n{\n    float ellipsoidRadiiDifference = czm_ellipsoidRadii.x - czm_ellipsoidRadii.z;\n\n    // Adjustment to the atmosphere radius applied based on the camera height.\n    float distanceAdjustMin = czm_ellipsoidRadii.x / 4.0;\n    float distanceAdjustMax = czm_ellipsoidRadii.x;\n    float distanceAdjustModifier = ellipsoidRadiiDifference / 2.0;\n    float distanceAdjust = distanceAdjustModifier * clamp((czm_eyeHeight - distanceAdjustMin) / (distanceAdjustMax - distanceAdjustMin), 0.0, 1.0);\n\n    // Since atmosphere scattering assumes the atmosphere is a spherical shell, we compute an inner radius of the atmosphere best fit \n    // for the position on the ellipsoid.\n    float radiusAdjust = (ellipsoidRadiiDifference / 4.0) + distanceAdjust;\n    float atmosphereInnerRadius = (length(czm_viewerPositionWC) - czm_eyeHeight) - radiusAdjust;\n\n    // Setup the primary ray: from the camera position to the vertex position.\n    vec3 cameraToPositionWC = positionWC - czm_viewerPositionWC;\n    vec3 cameraToPositionWCDirection = normalize(cameraToPositionWC);\n    czm_ray primaryRay = czm_ray(czm_viewerPositionWC, cameraToPositionWCDirection);\n\n    underTranslucentGlobe = 0.0;\n\n    // Brighten the sky atmosphere under the Earth's atmosphere when translucency is enabled.\n    #if defined(GLOBE_TRANSLUCENT)\n\n        // Check for intersection with the inner radius of the atmopshere.\n        czm_raySegment primaryRayEarthIntersect = czm_raySphereIntersectionInterval(primaryRay, vec3(0.0), atmosphereInnerRadius + radiusAdjust);\n        if (primaryRayEarthIntersect.start > 0.0 && primaryRayEarthIntersect.stop > 0.0) {\n            \n            // Compute position on globe.\n            vec3 direction = normalize(positionWC);\n            czm_ray ellipsoidRay = czm_ray(positionWC, -direction);\n            czm_raySegment ellipsoidIntersection = czm_rayEllipsoidIntersectionInterval(ellipsoidRay, vec3(0.0), czm_ellipsoidInverseRadii);\n            vec3 onEarth = positionWC - (direction * ellipsoidIntersection.start);\n\n            // Control the color using the camera angle.\n            float angle = dot(normalize(czm_viewerPositionWC), normalize(onEarth));\n\n            // Control the opacity using the distance from Earth.\n            opacity = interpolateByDistance(vec4(0.0, 1.0, czm_ellipsoidRadii.x, 0.0), length(czm_viewerPositionWC - onEarth));\n            vec3 horizonColor = vec3(0.1, 0.2, 0.3);\n            vec3 nearColor = vec3(0.0);\n\n            rayleighColor = mix(nearColor, horizonColor, exp(-angle) * opacity);\n            \n            // Set the traslucent flag to avoid alpha adjustment in computeFinalColor funciton.\n            underTranslucentGlobe = 1.0;\n            return;\n        }\n    #endif\n\n    computeScattering(\n        primaryRay,\n        length(cameraToPositionWC),\n        lightDirection,\n        atmosphereInnerRadius,\n        rayleighColor,\n        mieColor,\n        opacity\n    );\n\n    // Alter the opacity based on how close the viewer is to the ground.\n    // (0.0 = At edge of atmosphere, 1.0 = On ground)\n    float cameraHeight = czm_eyeHeight + atmosphereInnerRadius;\n    float atmosphereOuterRadius = atmosphereInnerRadius + ATMOSPHERE_THICKNESS;\n    opacity = clamp((atmosphereOuterRadius - cameraHeight) / (atmosphereOuterRadius - atmosphereInnerRadius), 0.0, 1.0);\n\n    // Alter alpha based on time of day (0.0 = night , 1.0 = day)\n    float nightAlpha = (u_radiiAndDynamicAtmosphereColor.z != 0.0) ? clamp(dot(normalize(positionWC), lightDirection), 0.0, 1.0) : 1.0;\n    opacity *= pow(nightAlpha, 0.5);\n}\n",Wtt="varying vec3 v_outerPositionWC;\n\nuniform vec3 u_hsbShift;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nvarying vec3 v_mieColor;\nvarying vec3 v_rayleighColor;\nvarying float v_opacity;\nvarying float v_translucent;\n#endif\n\nvoid main (void)\n{\n    vec3 lightDirection = getLightDirection(v_outerPositionWC);\n   \n    vec3 mieColor;\n    vec3 rayleighColor;\n    float opacity;\n    float translucent;\n\n    #ifdef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            v_outerPositionWC,\n            lightDirection,\n            rayleighColor,\n            mieColor,\n            opacity,\n            translucent\n        );\n    #else\n        mieColor = v_mieColor;\n        rayleighColor = v_rayleighColor;\n        opacity = v_opacity;\n        translucent = v_translucent;\n    #endif\n\n    vec4 color = computeAtmosphereColor(v_outerPositionWC, lightDirection, rayleighColor, mieColor, opacity);\n\n    #ifndef HDR\n        color.rgb = czm_acesTonemapping(color.rgb);\n        color.rgb = czm_inverseGamma(color.rgb);\n    #endif\n\n    #ifdef COLOR_CORRECT\n        // Convert rgb color to hsb\n        vec3 hsb = czm_RGBToHSB(color.rgb);\n        // Perform hsb shift\n        hsb.x += u_hsbShift.x; // hue\n        hsb.y = clamp(hsb.y + u_hsbShift.y, 0.0, 1.0); // saturation\n        hsb.z = hsb.z > czm_epsilon7 ? hsb.z + u_hsbShift.z : 0.0; // brightness\n        // Convert shifted hsb back to rgb\n        color.rgb = czm_HSBToRGB(hsb);\n    #endif\n\n    // For the parts of the sky atmosphere that are not behind a translucent globe,\n    // we mix in the default opacity so that the sky atmosphere still appears at distance.\n    // This is needed because the opacity in the sky atmosphere is initially adjusted based\n    // on the camera height.\n    if (translucent == 0.0) {\n        color.a = mix(color.b, 1.0, color.a) * smoothstep(0.0, 1.0, czm_morphTime);\n    }\n\n    gl_FragColor = color;\n}\n",qtt="attribute vec4 position;\n\nvarying vec3 v_outerPositionWC;\n\n#ifndef PER_FRAGMENT_ATMOSPHERE\nvarying vec3 v_mieColor;\nvarying vec3 v_rayleighColor;\nvarying float v_opacity;\nvarying float v_translucent;\n#endif\n\nvoid main(void)\n{\n    vec4 positionWC = czm_model * position;\n    vec3 lightDirection = getLightDirection(positionWC.xyz);\n\n    #ifndef PER_FRAGMENT_ATMOSPHERE\n        computeAtmosphereScattering(\n            positionWC.xyz,\n            lightDirection,\n            v_rayleighColor,\n            v_mieColor,\n            v_opacity,\n            v_translucent\n        );\n    #endif\n    \n    v_outerPositionWC = positionWC.xyz;\n    gl_Position = czm_modelViewProjection * position;\n}\n";function Ytt(e){e=Object(o["a"])(e,k.WGS84),this.show=!0,this.perFragmentAtmosphere=!1,this._ellipsoid=e;const t=1.025,n=g.multiplyByScalar(e.radii,t,new g);this._scaleMatrix=Me.fromScale(n),this._modelMatrix=new Me,this._command=new lF({owner:this,modelMatrix:this._modelMatrix}),this._spSkyFromSpace=void 0,this._spSkyFromAtmosphere=void 0,this._flags=void 0,this.atmosphereLightIntensity=50,this.atmosphereRayleighCoefficient=new g(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new g(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this._hueSaturationBrightness=new g;const i=new g;i.x=e.maximumRadius*t,i.y=e.maximumRadius,i.z=0,this._radiiAndDynamicAtmosphereColor=i;const r=this;this._command.uniformMap={u_radiiAndDynamicAtmosphereColor:function(){return r._radiiAndDynamicAtmosphereColor},u_hsbShift:function(){return r._hueSaturationBrightness.x=r.hueShift,r._hueSaturationBrightness.y=r.saturationShift,r._hueSaturationBrightness.z=r.brightnessShift,r._hueSaturationBrightness},u_atmosphereLightIntensity:function(){return r.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return r.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return r.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return r.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return r.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return r.atmosphereMieAnisotropy}}}Object.defineProperties(Ytt.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),Ytt.prototype.setDynamicAtmosphereColor=function(e,t){const n=e?t?2:1:0;this._radiiAndDynamicAtmosphereColor.z=n};const Xtt=new Me;function Ktt(e){return!(s["a"].equalsEpsilon(e.hueShift,0,s["a"].EPSILON7)&&s["a"].equalsEpsilon(e.saturationShift,0,s["a"].EPSILON7)&&s["a"].equalsEpsilon(e.brightnessShift,0,s["a"].EPSILON7))}Ytt.prototype.update=function(e,t){if(!this.show)return;const n=e.mode;if(n!==SH.SCENE3D&&n!==SH.MORPHING)return;if(!e.passes.render)return;const i=Me.fromRotationTranslation(e.context.uniformState.inverseViewRotation,g.ZERO,Xtt),o=Me.multiplyTransformation(i,IX.Y_UP_TO_Z_UP,Xtt),a=Me.multiply(this._scaleMatrix,o,Xtt);Me.clone(a,this._modelMatrix);const s=e.context,c=Ktt(this),l=e.globeTranslucencyState.translucent,u=this.perFragmentAtmosphere||l||!Object(r["a"])(t)||!t.show,h=this._command;if(!Object(r["a"])(h.vertexArray)){const e=rO.createGeometry(new rO({radii:new g(1,1,1),slicePartitions:256,stackPartitions:256,vertexFormat:qu.POSITION_ONLY}));h.vertexArray=WV.fromGeometry({context:s,geometry:e,attributeLocations:mp.createAttributeLocations(e),bufferUsage:LV.STATIC_DRAW}),h.renderState=UF.fromCache({cull:{enabled:!0,face:HN.FRONT},blending:UN.ALPHA_BLEND,depthMask:!1})}const d=c|u<<2|l<<3;if(d!==this._flags){this._flags=d;const e=[];c&&e.push("COLOR_CORRECT"),u&&e.push("PER_FRAGMENT_ATMOSPHERE"),l&&e.push("GLOBE_TRANSLUCENT");const t=new EV({defines:e,sources:[bXe,Gtt,qtt]}),n=new EV({defines:e,sources:[bXe,Gtt,Wtt]});this._spSkyAtmosphere=Nz.fromCache({context:s,vertexShaderSource:t,fragmentShaderSource:n}),h.shaderProgram=this._spSkyAtmosphere}return h},Ytt.prototype.isDestroyed=function(){return!1},Ytt.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),this._spSkyAtmosphere=this._spSkyAtmosphere&&this._spSkyAtmosphere.destroy(),Wc(this)};var $tt=Ytt,Jtt="uniform samplerCube u_cubeMap;\n\nvarying vec3 v_texCoord;\n\nvoid main()\n{\n    vec4 color = textureCube(u_cubeMap, normalize(v_texCoord));\n    gl_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n}\n",Qtt="attribute vec3 position;\n\nvarying vec3 v_texCoord;\n\nvoid main()\n{\n    vec3 p = czm_viewRotation * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n    gl_Position = czm_projection * vec4(p, 1.0);\n    v_texCoord = position.xyz;\n}\n";function Ztt(e){this.sources=e.sources,this._sources=void 0,this.show=Object(o["a"])(e.show,!0),this._command=new lF({modelMatrix:Me.clone(Me.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0}Ztt.prototype.update=function(e,t){const n=this;if(!this.show)return;if(e.mode!==SH.SCENE3D&&e.mode!==SH.MORPHING)return;if(!e.passes.render)return;const i=e.context;if(this._sources!==this.sources){this._sources=this.sources;const e=this.sources;if(!Object(r["a"])(e.positiveX)||!Object(r["a"])(e.negativeX)||!Object(r["a"])(e.positiveY)||!Object(r["a"])(e.negativeY)||!Object(r["a"])(e.positiveZ)||!Object(r["a"])(e.negativeZ))throw new a["a"]("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof e.positiveX!==typeof e.negativeX||typeof e.positiveX!==typeof e.positiveY||typeof e.positiveX!==typeof e.negativeY||typeof e.positiveX!==typeof e.positiveZ||typeof e.positiveX!==typeof e.negativeZ)throw new a["a"]("this.sources properties must all be the same type.");"string"===typeof e.positiveX?eUe(i,this._sources).then((function(e){n._cubeMap=n._cubeMap&&n._cubeMap.destroy(),n._cubeMap=e})):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new sB({context:i,source:e}))}const o=this._command;if(!Object(r["a"])(o.vertexArray)){o.uniformMap={u_cubeMap:function(){return n._cubeMap}};const e=eh.createGeometry(eh.fromDimensions({dimensions:new g(2,2,2),vertexFormat:qu.POSITION_ONLY})),t=this._attributeLocations=mp.createAttributeLocations(e);o.vertexArray=WV.fromGeometry({context:i,geometry:e,attributeLocations:t,bufferUsage:LV.STATIC_DRAW}),o.renderState=UF.fromCache({blending:UN.ALPHA_BLEND})}if(!Object(r["a"])(o.shaderProgram)||this._useHdr!==t){const e=new EV({defines:[t?"HDR":""],sources:[Jtt]});o.shaderProgram=Nz.fromCache({context:i,vertexShaderSource:Qtt,fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=t}return Object(r["a"])(this._cubeMap)?o:void 0},Ztt.prototype.isDestroyed=function(){return!1},Ztt.prototype.destroy=function(){const e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),Wc(this)};var ent=Ztt;function tnt(e){e=Object(o["a"])(e,1),i["a"].typeOf.number.greaterThan("radius",e,0),this._radius=Object(o["a"])(e,1)}Object.defineProperties(tnt.prototype,{radius:{get:function(){return this._radius},set:function(e){i["a"].typeOf.number.greaterThan("value",e,0),this._radius=e}}}),tnt.prototype.emit=function(e){const t=s["a"].randomBetween(0,s["a"].TWO_PI),n=s["a"].randomBetween(0,s["a"].PI),i=s["a"].randomBetween(0,this._radius),o=i*Math.cos(t)*Math.sin(n),r=i*Math.sin(t)*Math.sin(n),a=i*Math.cos(n);e.position=g.fromElements(o,r,a,e.position),e.velocity=g.normalize(e.position,e.velocity)};var nnt=tnt;function int(){}int.prototype.evaluate=function(e,t){a["a"].throwInstantiationError()},int.prototype.evaluateColor=function(e,t){a["a"].throwInstantiationError()},int.prototype.getShaderFunction=function(e,t,n,i){a["a"].throwInstantiationError()},int.prototype.getVariables=function(){a["a"].throwInstantiationError()};var ont=int,rnt="uniform sampler2D u_texture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    vec4 color = texture2D(u_texture, v_textureCoordinates);\n    gl_FragColor = czm_gammaCorrect(color);\n}\n",ant="uniform float u_radiusTS;\n\nvarying vec2 v_textureCoordinates;\n\nvec2 rotate(vec2 p, vec2 direction)\n{\n    return vec2(p.x * direction.x - p.y * direction.y, p.x * direction.y + p.y * direction.x);\n}\n\nvec4 addBurst(vec2 position, vec2 direction, float lengthScalar)\n{\n    vec2 rotatedPosition = rotate(position, direction) * vec2(25.0, 0.75);\n    float radius = length(rotatedPosition) * lengthScalar;\n    float burst = 1.0 - smoothstep(0.0, 0.55, radius);\n    return vec4(burst);\n}\n\nvoid main()\n{\n    float lengthScalar = 2.0 / sqrt(2.0);\n    vec2 position = v_textureCoordinates - vec2(0.5);\n    float radius = length(position) * lengthScalar;\n    float surface = step(radius, u_radiusTS);\n    vec4 color = vec4(vec2(1.0), surface + 0.2, surface);\n\n    float glow = 1.0 - smoothstep(0.0, 0.55, radius);\n    color.ba += mix(vec2(0.0), vec2(1.0), glow) * 0.75;\n\n    vec4 burst = vec4(0.0);\n\n    // The following loop has been manually unrolled for speed, to\n    // avoid sin() and cos().\n    //\n    //for (float i = 0.4; i < 3.2; i += 1.047) {\n    //    vec2 direction = vec2(sin(i), cos(i));\n    //    burst += 0.4 * addBurst(position, direction, lengthScalar);\n    //\n    //    direction = vec2(sin(i - 0.08), cos(i - 0.08));\n    //    burst += 0.3 * addBurst(position, direction, lengthScalar);\n    //}\n\n    burst += 0.4 * addBurst(position, vec2(0.38942,  0.92106), lengthScalar);  // angle == 0.4\n    burst += 0.4 * addBurst(position, vec2(0.99235,  0.12348), lengthScalar);  // angle == 0.4 + 1.047\n    burst += 0.4 * addBurst(position, vec2(0.60327, -0.79754), lengthScalar);  // angle == 0.4 + 1.047 * 2.0\n\n    burst += 0.3 * addBurst(position, vec2(0.31457,  0.94924), lengthScalar);  // angle == 0.4 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.97931,  0.20239), lengthScalar);  // angle == 0.4 + 1.047 - 0.08\n    burst += 0.3 * addBurst(position, vec2(0.66507, -0.74678), lengthScalar);  // angle == 0.4 + 1.047 * 2.0 - 0.08\n\n    // End of manual loop unrolling.\n\n    color += clamp(burst, vec4(0.0), vec4(1.0)) * 0.15;\n\n    gl_FragColor = clamp(color, vec4(0.0), vec4(1.0));\n}\n",snt="attribute vec2 direction;\n\nuniform float u_size;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() \n{\n    vec4 position;\n    if (czm_morphTime == 1.0)\n    {\n        position = vec4(czm_sunPositionWC, 1.0);\n    }\n    else\n    {\n        position = vec4(czm_sunPositionColumbusView.zxy, 1.0);\n    }\n    \n    vec4 positionEC = czm_view * position;\n    vec4 positionWC = czm_eyeToWindowCoordinates(positionEC);\n    \n    vec2 halfSize = vec2(u_size * 0.5);\n    halfSize *= ((direction * 2.0) - 1.0);\n    \n    gl_Position = czm_viewportOrthographic * vec4(positionWC.xy + halfSize, -positionWC.z, 1.0);\n    \n    v_textureCoordinates = direction;\n}\n";function cnt(){this.show=!0,this._drawCommand=new lF({primitiveType:Eu.TRIANGLES,boundingVolume:new Tt,owner:this}),this._commands={drawCommand:this._drawCommand,computeCommand:void 0},this._boundingVolume=new Tt,this._boundingVolume2D=new Tt,this._texture=void 0,this._drawingBufferWidth=void 0,this._drawingBufferHeight=void 0,this._radiusTS=void 0,this._size=void 0,this.glowFactor=1,this._glowFactorDirty=!1,this._useHdr=void 0;const e=this;this._uniformMap={u_texture:function(){return e._texture},u_size:function(){return e._size}}}Object.defineProperties(cnt.prototype,{glowFactor:{get:function(){return this._glowFactor},set:function(e){e=Math.max(e,0),this._glowFactor=e,this._glowFactorDirty=!0}}});const lnt=new Gt,unt=new Gt,hnt=new be,dnt=new be;cnt.prototype.update=function(e,t,n){if(!this.show)return;const i=e.mode;if(i===SH.SCENE2D||i===SH.MORPHING)return;if(!e.passes.render)return;const o=e.context,a=t.viewport.width,c=t.viewport.height;if(!Object(r["a"])(this._texture)||a!==this._drawingBufferWidth||c!==this._drawingBufferHeight||this._glowFactorDirty||n!==this._useHdr){this._texture=this._texture&&this._texture.destroy(),this._drawingBufferWidth=a,this._drawingBufferHeight=c,this._glowFactorDirty=!1,this._useHdr=n;let e=Math.max(a,c);e=Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))-2),e=Math.max(1,e);const t=n?o.halfFloatingPointTexture?hx.HALF_FLOAT:hx.FLOAT:hx.UNSIGNED_BYTE;this._texture=new lB({context:o,width:e,height:e,pixelFormat:fx.RGBA,pixelDatatype:t}),this._glowLengthTS=5*this._glowFactor,this._radiusTS=1/(1+2*this._glowLengthTS)*.5;const i=this,r={u_radiusTS:function(){return i._radiusTS}};this._commands.computeCommand=new nX({fragmentShaderSource:ant,outputTexture:this._texture,uniformMap:r,persists:!1,owner:this,postExecute:function(){i._commands.computeCommand=void 0}})}const l=this._drawCommand;if(!Object(r["a"])(l.vertexArray)){const e={direction:0},t=new Uint8Array(8);t[0]=0,t[1]=0,t[2]=255,t[3]=0,t[4]=255,t[5]=255,t[6]=0,t[7]=255;const n=NV.createVertexBuffer({context:o,typedArray:t,usage:LV.STATIC_DRAW}),i=[{index:e.direction,vertexBuffer:n,componentsPerAttribute:2,normalize:!0,componentDatatype:Ks.UNSIGNED_BYTE}],r=NV.createIndexBuffer({context:o,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:LV.STATIC_DRAW,indexDatatype:ll.UNSIGNED_SHORT});l.vertexArray=new WV({context:o,attributes:i,indexBuffer:r}),l.shaderProgram=Nz.fromCache({context:o,vertexShaderSource:snt,fragmentShaderSource:rnt,attributeLocations:e}),l.renderState=UF.fromCache({blending:UN.ALPHA_BLEND}),l.uniformMap=this._uniformMap}const u=o.uniformState.sunPositionWC,h=o.uniformState.sunPositionColumbusView,d=this._boundingVolume,f=this._boundingVolume2D;g.clone(u,d.center),f.center.x=h.z,f.center.y=h.x,f.center.z=h.y,d.radius=s["a"].SOLAR_RADIUS+s["a"].SOLAR_RADIUS*this._glowLengthTS,f.radius=d.radius,i===SH.SCENE3D?Tt.clone(d,l.boundingVolume):i===SH.COLUMBUS_VIEW&&Tt.clone(f,l.boundingVolume);const p=f9.computeActualWgs84Position(e,u,dnt),m=g.magnitude(g.subtract(p,e.camera.position,dnt)),_=o.uniformState.projection,b=hnt;b.x=0,b.y=0,b.z=-m,b.w=1;const y=Me.multiplyByVector(_,b,dnt),v=f9.clipToGLWindowCoordinates(t.viewport,y,lnt);b.x=s["a"].SOLAR_RADIUS;const O=Me.multiplyByVector(_,b,dnt),A=f9.clipToGLWindowCoordinates(t.viewport,O,unt);return this._size=Gt.magnitude(Gt.subtract(A,v,dnt)),this._size=2*this._size*(1+2*this._glowLengthTS),this._size=Math.ceil(this._size),this._commands},cnt.prototype.isDestroyed=function(){return!1},cnt.prototype.destroy=function(){const e=this._drawCommand;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._texture=this._texture&&this._texture.destroy(),Wc(this)};var fnt=cnt;function pnt(){}pnt.prototype.boundingVolume=void 0,pnt.prototype.boundingSphere=void 0,pnt.prototype.distanceToCamera=function(e){a["a"].throwInstantiationError()},pnt.prototype.intersectPlane=function(e){a["a"].throwInstantiationError()},pnt.prototype.createDebugVolume=function(e){a["a"].throwInstantiationError()};var mnt=pnt;function _nt(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._tilingScheme=Object(r["a"])(e.tilingScheme)?e.tilingScheme:new qt({ellipsoid:e.ellipsoid}),this._color=Object(o["a"])(e.color,Dm.YELLOW),this._errorEvent=new dn["a"],this._tileWidth=Object(o["a"])(e.tileWidth,256),this._tileHeight=Object(o["a"])(e.tileHeight,256),this._readyPromise=Promise.resolve(!0),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0}Object.defineProperties(_nt.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),_nt.prototype.getTileCredits=function(e,t,n){},_nt.prototype.requestImage=function(e,t,n,i){const o=document.createElement("canvas");o.width=256,o.height=256;const r=o.getContext("2d"),a=this._color.toCssColorString();return r.strokeStyle=a,r.lineWidth=2,r.strokeRect(1,1,255,255),r.font="bold 25px Arial",r.textAlign="center",r.fillStyle=a,r.fillText(`L: ${n}`,124,86),r.fillText(`X: ${e}`,124,136),r.fillText(`Y: ${t}`,124,186),Promise.resolve(o)},_nt.prototype.pickFeatures=function(e,t,n,i,o){};var gnt=_nt;function bnt(e){a["a"].throwInstantiationError()}bnt.prototype.isReady=a["a"].throwInstantiationError,bnt.prototype.shouldDiscardImage=a["a"].throwInstantiationError;var ynt=bnt;const vnt={START:0,LOADING:1,READY:2,UPSAMPLED_ONLY:3};var Ont=Object.freeze(vnt);function Ant(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),i["a"].typeOf.object("options.clock",e.clock),i["a"].typeOf.object("options.intervals",e.intervals),this.show=Object(o["a"])(e.show,!0),this.modelMatrix=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),this.shadows=Object(o["a"])(e.shadows,DH.ENABLED),this.maximumMemoryUsage=Object(o["a"])(e.maximumMemoryUsage,256),this.shading=new Y8(e.shading),this.style=e.style,this.frameFailed=new dn["a"],this.frameChanged=new dn["a"],this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new W8,this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._resolveReadyPromise=void 0;const t=this;this._readyPromise=new Promise((function(e){t._resolveReadyPromise=e})),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=new Array(5).fill(0),this._runningAverage=0}function wnt(e){return`uniform vec4 czm_pickColor;\n${e}`}function Tnt(e){return function(t){return Object(qE["a"])(t,{czm_pickColor:function(){return e._pickId.color}})}}function Cnt(){return"czm_pickColor"}Object.defineProperties(Ant.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){A4.setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if(Object(r["a"])(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return this._readyPromise}}}),Ant.prototype.makeStyleDirty=function(){this._styleDirty=!0},Ant.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};const Ent=new mo;function xnt(e){const t=e._clock,n=t.canAnimate&&t.shouldAnimate,i=t.multiplier;return n?i:0}function Snt(e,t){return e._intervals.indexOf(t.start)}function Int(e,t){const n=e._intervals,i=e._clock,o=xnt(e);if(0===o)return;const r=e._getAverageLoadTime(),a=mo.addSeconds(i.currentTime,r*o,Ent);let s=n.indexOf(a);const c=Snt(e,t);return s===c&&(o>=0?++s:--s),n.get(s)}function Dnt(e){const t=e._intervals,n=e._clock,i=n.currentTime,o=t.indexOf(i);return t.get(o)}function Pnt(e,t,n){const i=xnt(e),o=Snt(e,t),r=Snt(e,n);return i>=0?o>=r:o<=r}function jnt(e,t){return function(n){const i=Object(r["a"])(n.message)?n.message:n.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:i}):(console.log(`A frame failed to load: ${t}`),console.log(`Error: ${i}`))}}function Rnt(e,t,n){const i=Snt(e,t),o=e._frames;let a=o[i];if(!Object(r["a"])(a)){const s=t.data.transform,c=Object(r["a"])(s)?Me.fromArray(s):void 0,l=t.data.uri;a={pointCloud:void 0,transform:c,timestamp:bm(),sequential:!0,ready:!1,touchedFrameNumber:n.frameNumber},o[i]=a,Et["a"].fetchArrayBuffer({url:l}).then((function(t){return a.pointCloud=new A5e({arrayBuffer:t,cull:!0,fragmentShaderLoaded:wnt,uniformMapLoaded:Tnt(e),pickIdLoaded:Cnt}),a.pointCloud.readyPromise})).catch(jnt(e,l))}return a}function Lnt(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}function Mnt(e,t,n,i){t.touchedFrameNumber<i.frameNumber-1&&(t.sequential=!1);const o=t.pointCloud;if(Object(r["a"])(o)&&!t.ready){const r=i.commandList,a=r.length;if(knt(e,t,n,i),o.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=o.geometryByteLength,r.length=a,t.sequential)){const n=(bm()-t.timestamp)/1e3;Lnt(e,n)}}t.touchedFrameNumber=i.frameNumber}const Nnt=new Me;function Bnt(e,t){const n=e.shading;return Object(r["a"])(n)&&Object(r["a"])(n.baseResolution)?n.baseResolution:Object(r["a"])(t.boundingSphere)?s["a"].cbrt(t.boundingSphere.volume()/t.pointsLength):0}function Fnt(e){const t=e.shading;return Object(r["a"])(t)&&Object(r["a"])(t.maximumAttenuation)?t.maximumAttenuation:10}const znt=new Y8;function knt(e,t,n,i){const r=Object(o["a"])(e.shading,znt),a=t.pointCloud,s=Object(o["a"])(t.transform,Me.IDENTITY);a.modelMatrix=Me.multiplyTransformation(e.modelMatrix,s,Nnt),a.style=e.style,a.time=n.timeSinceLoad,a.shadows=e.shadows,a.clippingPlanes=e._clippingPlanes,a.isClipped=n.isClipped,a.attenuation=r.attenuation,a.backFaceCulling=r.backFaceCulling,a.normalShading=r.normalShading,a.geometricError=Bnt(e,a),a.geometricErrorScale=r.geometricErrorScale,a.maximumAttenuation=Fnt(e),a.update(i),t.touchedFrameNumber=i.frameNumber}function Unt(e,t,n,i){const o=Rnt(e,t,i);Mnt(e,o,n,i)}function Vnt(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}function Hnt(e,t){const n=e._frames,i=n.length;for(let o=0;o<i;++o){const i=n[o];if(Object(r["a"])(i)&&(!Object(r["a"])(t)||t(i))){const t=i.pointCloud;i.ready&&(e._totalMemoryUsageInBytes-=t.geometryByteLength),Object(r["a"])(t)&&t.destroy(),i===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),n[o]=void 0}}}function Gnt(e,t){const n=Snt(e,t),i=e._frames[n];if(Object(r["a"])(i)&&i.ready)return i}function Wnt(e,t,n,i,o){return!!Object(r["a"])(n)&&(!!n.ready||(Unt(e,t,i,o),n.ready))}function qnt(e,t,n,i,o){let r,a,s;const c=e._intervals,l=e._frames,u=Snt(e,n),h=Snt(e,t);if(u>=h){for(r=u;r>=h;--r)if(a=c.get(r),s=l[r],Wnt(e,a,s,i,o))return a}else for(r=u;r<=h;++r)if(a=c.get(r),s=l[r],Wnt(e,a,s,i,o))return a;return t}function Ynt(e,t,n){const i=e._frames,o=i.length;for(let a=0;a<o;++a){const e=i[a];Object(r["a"])(e)&&Object(r["a"])(e.pointCloud)&&(e.pointCloud.clippingPlanesDirty=t,e.pointCloud.styleDirty=n)}}const Xnt={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};Ant.prototype.update=function(e){if(e.mode===SH.MORPHING)return;if(!this.show)return;Object(r["a"])(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),Object(r["a"])(this._loadTimestamp)||(this._loadTimestamp=mo.clone(e.time));const t=Math.max(1e3*mo.secondsDifference(e.time,this._loadTimestamp),0),n=this._clippingPlanes;let i=0,o=!1;const a=Object(r["a"])(n)&&n.enabled;a&&(n.update(e),i=n.clippingPlanesState),this._clippingPlanesState!==i&&(this._clippingPlanesState=i,o=!0);const s=this._styleDirty;this._styleDirty=!1,(o||s)&&Ynt(this,o,s),Xnt.timeSinceLoad=t,Xnt.isClipped=a;const c=this.shading,l=this._pointCloudEyeDomeLighting,u=e.commandList,h=u.length;let d=this._previousInterval,f=this._nextInterval;const p=Dnt(this);if(!Object(r["a"])(p))return;let m=!1;const _=xnt(this),g=0===_;_!==this._clockMultiplier&&(m=!0,this._clockMultiplier=_),Object(r["a"])(d)&&!g||(d=p),(!Object(r["a"])(f)||m||Pnt(this,p,f))&&(f=Int(this,p)),d=qnt(this,d,p,Xnt,e);let b=Gnt(this,d);Object(r["a"])(b)||(Unt(this,d,Xnt,e),b=this._lastRenderedFrame),Object(r["a"])(b)&&knt(this,b,Xnt,e),Object(r["a"])(f)&&Unt(this,f,Xnt,e);const y=this;Object(r["a"])(b)&&!Object(r["a"])(this._lastRenderedFrame)&&e.afterRender.push((function(){y._resolveReadyPromise(y)})),Object(r["a"])(b)&&b!==this._lastRenderedFrame&&y.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){y.frameChanged.raiseEvent(y)})),this._previousInterval=d,this._nextInterval=f,this._lastRenderedFrame=b;const v=this._totalMemoryUsageInBytes,O=1024*this.maximumMemoryUsage*1024;v>O&&Hnt(this,Vnt(e));const A=u.length,w=A-h;Object(r["a"])(c)&&c.attenuation&&c.eyeDomeLighting&&w>0&&l.update(e,h,c,this.boundingSphere)},Ant.prototype.isDestroyed=function(){return!1},Ant.prototype.destroy=function(){return Hnt(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Wc(this)};var Knt=Ant,$nt="\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n    \n    materialInput.s = v_textureCoordinates.s;\n    materialInput.st = v_textureCoordinates;\n    materialInput.str = vec3(v_textureCoordinates, 0.0);\n    materialInput.normalEC = vec3(0.0, 0.0, -1.0);\n    \n    czm_material material = czm_getMaterial(materialInput);\n\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n}\n";function Jnt(e,t){this.show=!0,Object(r["a"])(e)||(e=new Au),this.rectangle=Au.clone(e),Object(r["a"])(t)||(t=XB.fromType(XB.ColorType,{color:new Dm(1,1,1,1)})),this.material=t,this._material=void 0,this._overlayCommand=void 0,this._rs=void 0}Jnt.prototype.update=function(e){if(!this.show)return;if(!Object(r["a"])(this.material))throw new a["a"]("this.material must be defined.");if(!Object(r["a"])(this.rectangle))throw new a["a"]("this.rectangle must be defined.");const t=this._rs;Object(r["a"])(t)&&Au.equals(t.viewport,this.rectangle)||(this._rs=UF.fromCache({blending:UN.ALPHA_BLEND,viewport:this.rectangle}));const n=e.passes;if(n.render){const t=e.context;if(this._material!==this.material||!Object(r["a"])(this._overlayCommand)){this._material=this.material,Object(r["a"])(this._overlayCommand)&&this._overlayCommand.shaderProgram.destroy();const e=new EV({sources:[this._material.shaderSource,$nt]});this._overlayCommand=t.createViewportQuadCommand(e,{renderState:this._rs,uniformMap:this._material._uniforms,owner:this}),this._overlayCommand.pass=hF.OVERLAY}this._material.update(t),this._overlayCommand.renderState=this._rs,this._overlayCommand.uniformMap=this._material._uniforms,e.commandList.push(this._overlayCommand)}},Jnt.prototype.isDestroyed=function(){return!1},Jnt.prototype.destroy=function(){return Object(r["a"])(this._overlayCommand)&&(this._overlayCommand.shaderProgram=this._overlayCommand.shaderProgram&&this._overlayCommand.shaderProgram.destroy()),Wc(this)};var Qnt=Jnt;function Znt(e,t){const n=t.terrainProvider,i=t.mapProjection,o=i.ellipsoid;let a;const s=t.camera.getRectangleCameraCoordinates(e);return a=t.mode===SH.SCENE3D?o.cartesianToCartographic(s):i.unproject(s),Object(r["a"])(n)?n.readyPromise.then((function(){const i=n.availability;if(!Object(r["a"])(i)||t.mode===SH.SCENE2D)return a;const o=[Fe.center(e),Fe.southeast(e),Fe.southwest(e),Fe.northeast(e),Fe.northwest(e)];return Znt._sampleTerrainMostDetailed(n,o).then((function(e){const t=e.reduce((function(e,t){return Math.max(t.height,e)}),-Number.MAX_VALUE),n=a;return n.height+=t,n}))})):Promise.resolve(a)}Znt._sampleTerrainMostDetailed=NM;var eit=Znt;const tit=new Dm,nit=new Dm,iit=new Dm,oit=new Dm,rit=new be,ait=new Uint8Array(4);function sit(e,t,n,i){const o=t.height===n.height?0:(e-t.height)/(n.height-t.height);return Dm.lerp(t.color,n.color,o,i)}function cit(e,t){return{height:e,color:Dm.clone(t)}}function lit(e){return e=e.filter((function(e,t,n){const i=t>0,o=t<n.length-1,r=!i||e.height===n[t-1].height,a=!o||e.height===n[t+1].height,s=!r||!a;return s})),e=e.filter((function(e,t,n){const i=t>0,o=t<n.length-1,r=!!i&&Dm.equals(e.color,n[t-1].color),a=!!o&&Dm.equals(e.color,n[t+1].color),s=!r||!a;return s})),e=e.filter((function(e,t,n){const i=t>0,o=!!i&&Dm.equals(e.color,n[t-1].color),r=!i||e.height===n[t-1].height,a=!o||!r;return a})),e}function uit(e){let t,n;const i=[],c=e.length;for(t=0;t<c;t++){const c=e[t],l=c.entries,u=l.length;if(!Array.isArray(l)||0===u)throw new a["a"]("entries must be an array with size > 0.");let h=[];for(n=0;n<u;n++){const e=l[n];if(!Object(r["a"])(e.height))throw new a["a"]("entry requires a height.");if(!Object(r["a"])(e.color))throw new a["a"]("entry requires a color.");const t=s["a"].clamp(e.height,dit._minimumHeight,dit._maximumHeight),i=Dm.clone(e.color,tit);i.red*=i.alpha,i.green*=i.alpha,i.blue*=i.alpha,h.push(cit(t,i))}let d=!0,f=!0;for(n=0;n<u-1;n++){const e=h[n+0],t=h[n+1];d=d&&e.height<=t.height,f=f&&e.height>=t.height}f?h=h.reverse():d||fM(h,(function(e,t){return s["a"].sign(e.height-t.height)}));let p=Object(o["a"])(c.extendDownwards,!1),m=Object(o["a"])(c.extendUpwards,!1);1!==h.length||p||m||(p=!0,m=!0),p&&h.splice(0,0,cit(dit._minimumHeight,h[0].color)),m&&h.splice(h.length,0,cit(dit._maximumHeight,h[h.length-1].color)),h=lit(h),i.push(h)}return i}function hit(e){const t=uit(e);let n,i=[],o=[];function a(e,t){i.push(cit(e,t))}function s(e,t,n){let i=Dm.multiplyByScalar(n,1-t.alpha,oit);i=Dm.add(i,t,i),a(e,i)}const c=t.length;for(n=0;n<c;n++){const e=t[n];let c=0,l=0;o=i,i=[];const u=e.length,h=o.length;while(c<u||l<h){const t=c<u?e[c]:void 0,n=c>0?e[c-1]:void 0,i=c<u-1?e[c+1]:void 0,d=l<h?o[l]:void 0,f=l>0?o[l-1]:void 0,p=l<h-1?o[l+1]:void 0;if(Object(r["a"])(t)&&Object(r["a"])(d)&&t.height===d.height){const e=Object(r["a"])(p)&&d.height===p.height,o=!Object(r["a"])(f),u=!Object(r["a"])(p),h=Object(r["a"])(i)&&t.height===i.height,m=!Object(r["a"])(n),_=!Object(r["a"])(i);e?h?(s(t.height,t.color,d.color),s(t.height,i.color,p.color)):m?(a(t.height,d.color),s(t.height,t.color,p.color)):_?(s(t.height,t.color,d.color),a(t.height,p.color)):(s(t.height,t.color,d.color),s(t.height,t.color,p.color)):o?h?(a(t.height,t.color),s(t.height,i.color,d.color)):_?(a(t.height,t.color),a(t.height,d.color)):(m||a(t.height,t.color),s(t.height,t.color,d.color)):u?h?(s(t.height,t.color,d.color),a(t.height,i.color)):m?(a(t.height,d.color),a(t.height,t.color)):_?s(t.height,t.color,d.color):(s(t.height,t.color,d.color),a(t.height,t.color)):h?(s(t.height,t.color,d.color),s(t.height,i.color,d.color)):m?(a(t.height,d.color),s(t.height,t.color,d.color)):_?(s(t.height,t.color,d.color),a(t.height,d.color)):s(t.height,t.color,d.color),c+=h?2:1,l+=e?2:1}else if(Object(r["a"])(t)&&Object(r["a"])(d)&&Object(r["a"])(f)&&t.height<d.height){const e=sit(t.height,f,d,iit);Object(r["a"])(n)?Object(r["a"])(i)?s(t.height,t.color,e):(s(t.height,t.color,e),a(t.height,e)):(a(t.height,e),s(t.height,t.color,e)),c++}else if(Object(r["a"])(d)&&Object(r["a"])(t)&&Object(r["a"])(n)&&d.height<t.height){const e=sit(d.height,n,t,nit);Object(r["a"])(f)?Object(r["a"])(p)?s(d.height,e,d.color):(s(d.height,e,d.color),a(d.height,e)):(a(d.height,e),s(d.height,e,d.color)),l++}else Object(r["a"])(t)&&(!Object(r["a"])(d)||t.height<d.height)?(!Object(r["a"])(d)||Object(r["a"])(f)||Object(r["a"])(i)?(Object(r["a"])(d)||!Object(r["a"])(f)||Object(r["a"])(n)||(a(f.height,dit._emptyColor),a(t.height,dit._emptyColor)),a(t.height,t.color)):(a(t.height,t.color),a(t.height,dit._emptyColor),a(d.height,dit._emptyColor)),c++):Object(r["a"])(d)&&(!Object(r["a"])(t)||d.height<t.height)&&(a(d.height,d.color),l++)}}const l=lit(i);return l}function dit(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.scene,n=e.layers;i["a"].typeOf.object("options.scene",t),i["a"].defined("options.layers",n),i["a"].typeOf.number.greaterThan("options.layers.length",n.length,0);const r=hit(n),a=r.length;let s,c,l,u;const h=!dit._useFloatTexture(t.context);if(h)for(l=hx.UNSIGNED_BYTE,u=fx.RGBA,c=new Uint8Array(4*a),s=0;s<a;s++)be.packFloat(r[s].height,rit),be.pack(rit,c,4*s);else for(l=hx.FLOAT,u=fx.LUMINANCE,c=new Float32Array(a),s=0;s<a;s++)c[s]=r[s].height;const d=lB.create({context:t.context,pixelFormat:u,pixelDatatype:l,source:{arrayBufferView:c,width:a,height:1},sampler:new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.NEAREST,magnificationFilter:ZN.NEAREST})}),f=new Uint8Array(4*a);for(s=0;s<a;s++){const e=r[s].color;e.toBytes(ait),f[4*s+0]=ait[0],f[4*s+1]=ait[1],f[4*s+2]=ait[2],f[4*s+3]=ait[3]}const p=lB.create({context:t.context,pixelFormat:fx.RGBA,pixelDatatype:hx.UNSIGNED_BYTE,source:{arrayBufferView:f,width:a,height:1},sampler:new rB({wrapS:iB.CLAMP_TO_EDGE,wrapT:iB.CLAMP_TO_EDGE,minificationFilter:tB.LINEAR,magnificationFilter:ZN.LINEAR})}),m=XB.fromType("ElevationBand",{heights:d,colors:p});return m}dit._useFloatTexture=function(e){return e.floatingPointTexture},dit._maximumHeight=5906376425472,dit._minimumHeight=-5906376425472,dit._emptyColor=new Dm(0,0,0,0);var fit=dit;function pit(e){e=Object(qE["a"])(e,{url:$C.fromAssetId(96188)});const t=new $ge(e);let n=e.style;if(!Object(r["a"])(n)){const t=Object(o["a"])(e.defaultColor,Dm.WHITE).toCssColorString();n=new ZGe({color:`Boolean(\${feature['cesium#color']}) ? color(\${feature['cesium#color']}) : ${t}`})}return t.style=n,t}var mit=pit;function _it(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=[];let n=e.geometry;if(!Object(r["a"])(n))throw new a["a"]("options.geometry is required.");Object(r["a"])(n.attributes)&&Object(r["a"])(n.primitiveType)||(n=n.constructor.createGeometry(n));const i=n.attributes,s=Me.clone(Object(o["a"])(e.modelMatrix,Me.IDENTITY)),c=Object(o["a"])(e.length,1e4);if(Object(r["a"])(i.normal)&&t.push(new Sd({geometry:mp.createLineSegmentsForVectors(n,"normal",c),attributes:{color:new jm(1,0,0,1)},modelMatrix:s})),Object(r["a"])(i.tangent)&&t.push(new Sd({geometry:mp.createLineSegmentsForVectors(n,"tangent",c),attributes:{color:new jm(0,1,0,1)},modelMatrix:s})),Object(r["a"])(i.bitangent)&&t.push(new Sd({geometry:mp.createLineSegmentsForVectors(n,"bitangent",c),attributes:{color:new jm(0,0,1,1)},modelMatrix:s})),t.length>0)return new EG({asynchronous:!1,geometryInstances:t,appearance:new nF({flat:!0,translucent:!1})})}var git=_it;function bit(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(o["a"])(e.style,K0e.AERIAL);return new Y0e({assetId:t})}var yit=bit,vit=n("97e0"),Oit="__knockoutObservables",Ait="__knockoutSubscribable";function wit(e,t){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var n=this,i=Tit(e,!0);return t=t||Object.getOwnPropertyNames(e),t.forEach((function(t){if(t!==Oit&&t!==Ait&&!(t in i)){var o=e[t],r=o instanceof Array,a=n.isObservable(o)?o:r?n.observableArray(o):n.observable(o);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:a,set:n.isWriteableObservable(a)?a:void 0}),i[t]=a,r&&Eit(n,a)}})),e}function Tit(e,t){var n=e[Oit];return!n&&t&&(n={},Object.defineProperty(e,Oit,{value:n})),n}function Cit(e,t,n){var i=this,o={owner:e,deferEvaluation:!0};if("function"===typeof n)o.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!==typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');o.read=n.get,o.write=n.set}return e[t]=i.computed(o),wit.call(i,e,[t]),e}function Eit(e,t){var n=null;e.computed((function(){n&&(n.dispose(),n=null);var i=t();i instanceof Array&&(n=xit(e,t,i))}))}function xit(e,t,n){var i=Sit(e,n);return i.subscribe(t)}function Sit(e,t){var n=t[Ait];if(!n){n=new e.subscribable,Object.defineProperty(t,Ait,{value:n});var i={};Iit(t,n,i),Dit(e,t,n,i)}return n}function Iit(e,t,n){["pop","push","reverse","shift","sort","splice","unshift"].forEach((function(i){var o=e[i];e[i]=function(){var e=o.apply(this,arguments);return!0!==n.pause&&t.notifySubscribers(this),e}}))}function Dit(e,t,n,i){["remove","removeAll","destroy","destroyAll","replace"].forEach((function(o){Object.defineProperty(t,o,{enumerable:!1,value:function(){var r;i.pause=!0;try{r=e.observableArray.fn[o].apply(e.observableArray(t),arguments)}finally{i.pause=!1}return n.notifySubscribers(t),r}})}))}function Pit(e,t){if(!e)return null;var n=Tit(e,!1);return n&&n[t]||null}function jit(e,t){var n=Pit(e,t);n&&n.valueHasMutated()}function Rit(e){e.track=wit,e.getObservable=Pit,e.valueHasMutated=jit,e.defineProperty=Cit}var Lit={attachToKo:Rit};const Mit="http://www.w3.org/2000/svg",Nit="cesium-svgPath-svg",Bit={register:function(e){e.bindingHandlers.cesiumSvgPath={init:function(t,n){const i=document.createElementNS(Mit,"svg:svg");i.setAttribute("class",Nit);const o=document.createElementNS(Mit,"path");return i.appendChild(o),e.virtualElements.setDomNodeChildren(t,[i]),e.computed({read:function(){const t=e.unwrap(n());o.setAttribute("d",e.unwrap(t.path));const r=e.unwrap(t.width),a=e.unwrap(t.height);i.setAttribute("width",r),i.setAttribute("height",a),i.setAttribute("viewBox",`0 0 ${r} ${a}`),t.css&&i.setAttribute("class",`${Nit} ${e.unwrap(t.css)}`)},disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},e.virtualElements.allowedBindings.cesiumSvgPath=!0}};var Fit=Bit;Lit.attachToKo(vit["a"]),Fit.register(vit["a"]);var zit=vit["a"];function kit(e){Object(r["a"])(e)||(e=new vm),this._clock=e,this._eventHelper=new gO,this._eventHelper.add(e.onTick,this.synchronize,this),this.systemTime=zit.observable(mo.now()),this.systemTime.equalityComparer=mo.equals,this.startTime=zit.observable(e.startTime),this.startTime.equalityComparer=mo.equals,this.startTime.subscribe((function(t){e.startTime=t,this.synchronize()}),this),this.stopTime=zit.observable(e.stopTime),this.stopTime.equalityComparer=mo.equals,this.stopTime.subscribe((function(t){e.stopTime=t,this.synchronize()}),this),this.currentTime=zit.observable(e.currentTime),this.currentTime.equalityComparer=mo.equals,this.currentTime.subscribe((function(t){e.currentTime=t,this.synchronize()}),this),this.multiplier=zit.observable(e.multiplier),this.multiplier.subscribe((function(t){e.multiplier=t,this.synchronize()}),this),this.clockStep=zit.observable(e.clockStep),this.clockStep.subscribe((function(t){e.clockStep=t,this.synchronize()}),this),this.clockRange=zit.observable(e.clockRange),this.clockRange.subscribe((function(t){e.clockRange=t,this.synchronize()}),this),this.canAnimate=zit.observable(e.canAnimate),this.canAnimate.subscribe((function(t){e.canAnimate=t,this.synchronize()}),this),this.shouldAnimate=zit.observable(e.shouldAnimate),this.shouldAnimate.subscribe((function(t){e.shouldAnimate=t,this.synchronize()}),this),zit.track(this,["systemTime","startTime","stopTime","currentTime","multiplier","clockStep","clockRange","canAnimate","shouldAnimate"])}Object.defineProperties(kit.prototype,{clock:{get:function(){return this._clock}}}),kit.prototype.synchronize=function(){const e=this._clock;this.systemTime=mo.now(),this.startTime=e.startTime,this.stopTime=e.stopTime,this.currentTime=e.currentTime,this.multiplier=e.multiplier,this.clockStep=e.clockStep,this.clockRange=e.clockRange,this.canAnimate=e.canAnimate,this.shouldAnimate=e.shouldAnimate},kit.prototype.isDestroyed=function(){return!1},kit.prototype.destroy=function(){this._eventHelper.removeAll(),Wc(this)};var Uit=kit;function Vit(){this.canExecute=void 0,this.beforeExecute=void 0,this.afterExecute=void 0,a["a"].throwInstantiationError()}var Hit=Vit;const Git={createCheckbox:function(e,t,n){i["a"].typeOf.string("labelText",e),i["a"].typeOf.string("checkedBinding",t);const o=document.createElement("div"),a=document.createElement("label"),s=document.createElement("input");s.type="checkbox";let c=`checked: ${t}`;return Object(r["a"])(n)&&(c+=`, enable: ${n}`),s.setAttribute("data-bind",c),a.appendChild(s),a.appendChild(document.createTextNode(e)),o.appendChild(a),o},createSection:function(e,t,n,o){i["a"].defined("panel",e),i["a"].typeOf.string("headerText",t),i["a"].typeOf.string("sectionVisibleBinding",n),i["a"].typeOf.string("toggleSectionVisibilityBinding",o);const r=document.createElement("div");r.className="cesium-cesiumInspector-section",r.setAttribute("data-bind",`css: { "cesium-cesiumInspector-section-collapsed": !${n} }`),e.appendChild(r);const a=document.createElement("h3");a.className="cesium-cesiumInspector-sectionHeader",a.appendChild(document.createTextNode(t)),a.setAttribute("data-bind",`click: ${o}`),r.appendChild(a);const s=document.createElement("div");return s.className="cesium-cesiumInspector-sectionContent",r.appendChild(s),s}};var Wit=Git;function qit(e,t){if(!Object(r["a"])(e))throw new a["a"]("command is required.");this._command=e,t=Object(o["a"])(t,o["a"].EMPTY_OBJECT),this.toggled=Object(o["a"])(t.toggled,!1),this.tooltip=Object(o["a"])(t.tooltip,""),zit.track(this,["toggled","tooltip"])}Object.defineProperties(qit.prototype,{command:{get:function(){return this._command}}});var Yit=qit;function Xit(e,t){if(!Object(r["a"])(e))throw new a["a"]("func is required.");t=Object(o["a"])(t,!0);const n=new dn["a"],i=new dn["a"];function s(){if(!s.canExecute)throw new a["a"]("Cannot execute command, canExecute is false.");const t={args:arguments,cancel:!1};let o;return n.raiseEvent(t),t.cancel||(o=e.apply(null,arguments),i.raiseEvent(o)),o}return s.canExecute=t,zit.track(s,["canExecute"]),Object.defineProperties(s,{beforeExecute:{value:n},afterExecute:{value:i}}),s}var Kit=Xit;function $it(e,t,n,i,o){return n.call(i,e[t]),zit.getObservable(e,t).subscribe(n,i,o)}var Jit=$it;const Qit={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};var Zit=Object.freeze(Qit);function eot(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function tot(e,t,n){n.resource.fetchImage().then((function(i){e._loadedImages.push({id:t,image:i,textureUniform:n})})).catch((function(){const n=e._textures[t];Object(r["a"])(n)&&n!==e._defaultTexture&&n.destroy(),e._textures[t]=e._defaultTexture}))}function not(e,t,n){const{id:i,textureUniform:o,image:a}=t,s=n.webgl2?iot(o,a,n):oot(o,a,n),c=e._textures[i];Object(r["a"])(c)&&c!==n.defaultTexture&&c.destroy(),e._textures[i]=s}function iot(e,t,n){const{typedArray:i,sampler:o}=e,a=Object(r["a"])(i)?aot(e,n):new lB({context:n,source:t,sampler:o});return rot(o)&&a.generateMipmap(),a}function oot(e,t,n){const{typedArray:i,sampler:o}=e,a=rot(o),c=o.wrapS===iB.REPEAT||o.wrapS===iB.MIRRORED_REPEAT||o.wrapT===iB.REPEAT||o.wrapT===iB.MIRRORED_REPEAT,{width:l,height:u}=Object(r["a"])(i)?e:t,h=[l,u].every(s["a"].isPowerOfTwo),d=(a||c)&&!h;if(!d)return iot(e,t,n);if(!Object(r["a"])(i)){const i=TM(t);return iot(e,i,n)}if(e.pixelDatatype===hx.UNSIGNED_BYTE){const e=QL(i,l,u),t=TM(e);return iot({sampler:o},t,n)}return a?console.warn("Texture requires resizing for mipmaps but pixelDataType cannot be resized. The texture may be rendered incorrectly."):c&&console.warn("Texture requires resizing for wrapping but pixelDataType cannot be resized. The texture may be rendered incorrectly."),aot(e,n)}function rot(e){return[tB.NEAREST_MIPMAP_NEAREST,tB.NEAREST_MIPMAP_LINEAR,tB.LINEAR_MIPMAP_NEAREST,tB.LINEAR_MIPMAP_LINEAR].includes(e.minificationFilter)}function aot(e,t){const{pixelFormat:n,pixelDatatype:i,width:o,height:r,typedArray:a,sampler:s}=e;return new lB({context:t,pixelFormat:n,pixelDatatype:i,source:{arrayBufferView:a,width:o,height:r},sampler:s,flipY:!1})}eot.prototype.getTexture=function(e){return this._textures[e]},eot.prototype.loadTexture2D=function(e,t){Object(r["a"])(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):tot(this,e,t)},eot.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const n=this._loadedImages;for(let i=0;i<n.length;i++){const e=n[i];not(this,e,t)}n.length=0},eot.prototype.isDestroyed=function(){return!1},eot.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n!==this._defaultTexture&&n.destroy()}return Wc(this)};var sot=eot;function cot(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.mode=Object(o["a"])(e.mode,hne.MODIFY_MATERIAL),this.lightingModel=e.lightingModel,this.uniforms=Object(o["a"])(e.uniforms,o["a"].EMPTY_OBJECT),this.varyings=Object(o["a"])(e.varyings,o["a"].EMPTY_OBJECT),this.vertexShaderText=e.vertexShaderText,this.fragmentShaderText=e.fragmentShaderText,this.translucencyMode=Object(o["a"])(e.translucencyMode,Gne.INHERIT),this._textureManager=new sot,this._defaultTexture=void 0,this.uniformMap=lot(this),this.usedVariablesVertex={attributeSet:{},featureIdSet:{},metadataSet:{}},this.usedVariablesFragment={attributeSet:{},featureIdSet:{},metadataSet:{},materialSet:{}},fot(this),_ot(this)}function lot(e){const t=e.uniforms,n={};for(const i in t)if(t.hasOwnProperty(i)){const o=t[i],r=o.type;if(r===Zit.SAMPLER_CUBE)throw new a["a"]("CustomShader does not support samplerCube uniforms");r===Zit.SAMPLER_2D?(e._textureManager.loadTexture2D(i,o.value),n[i]=uot(e,i)):n[i]=hot(e,i)}return n}function uot(e,t){return function(){return Object(o["a"])(e._textureManager.getTexture(t),e._defaultTexture)}}function hot(e,t){return function(){return e.uniforms[t].value}}function dot(e,t,n){let i;while(null!==(i=t.exec(e))){const e=i[1];n[e]=!0}}function fot(e){const t=/[vf]sInput\.attributes\.(\w+)/g,n=/[vf]sInput\.featureIds\.(\w+)/g,i=/[vf]sInput\.metadata.(\w+)/g;let o;const a=e.vertexShaderText;Object(r["a"])(a)&&(o=e.usedVariablesVertex.attributeSet,dot(a,t,o),o=e.usedVariablesVertex.featureIdSet,dot(a,n,o),o=e.usedVariablesVertex.metadataSet,dot(a,i,o));const s=e.fragmentShaderText;if(Object(r["a"])(s)){o=e.usedVariablesFragment.attributeSet,dot(s,t,o),o=e.usedVariablesFragment.featureIdSet,dot(s,n,o),o=e.usedVariablesFragment.metadataSet,dot(s,i,o);const r=/material\.(\w+)/g,a=e.usedVariablesFragment.materialSet;dot(s,r,a)}}function pot(e){const t=/^.*MC$/,n=/^.*WC$/,i=/^.*EC$/;return t.test(e)?`${e} (model coordinates)`:n.test(e)?`${e} (Cartesian world coordinates)`:i.test(e)?`${e} (eye coordinates)`:e}function mot(e,t,n,i){if(e.hasOwnProperty(t)){const e=`${pot(t)} is not available in the ${i} shader. Did you mean ${pot(n)} instead?`;throw new a["a"](e)}}function _ot(e){const t=e.usedVariablesVertex.attributeSet;mot(t,"position","positionMC","vertex"),mot(t,"normal","normalMC","vertex"),mot(t,"tangent","tangentMC","vertex"),mot(t,"bitangent","bitangentMC","vertex"),mot(t,"positionWC","positionMC","vertex"),mot(t,"positionEC","positionMC","vertex"),mot(t,"normalEC","normalMC","vertex"),mot(t,"tangentEC","tangentMC","vertex"),mot(t,"bitangentEC","bitangentMC","vertex");const n=e.usedVariablesFragment.attributeSet;mot(n,"position","positionEC","fragment"),mot(n,"normal","normalEC","fragment"),mot(n,"tangent","tangentEC","fragment"),mot(n,"bitangent","bitangentEC","fragment"),mot(n,"normalMC","normalEC","fragment"),mot(n,"tangentMC","tangentEC","fragment"),mot(n,"bitangentMC","bitangentEC","fragment")}cot.prototype.setUniform=function(e,t){if(i["a"].typeOf.string("uniformName",e),i["a"].defined("value",t),!Object(r["a"])(this.uniforms[e]))throw new a["a"](`Uniform ${e} must be declared in the CustomShader constructor.`);const n=this.uniforms[e];n.type===Zit.SAMPLER_2D?this._textureManager.loadTexture2D(e,t):Object(r["a"])(t.clone)?n.value=t.clone(n.value):n.value=t},cot.prototype.update=function(e){this._defaultTexture=e.context.defaultTexture,this._textureManager.update(e)},cot.prototype.isDestroyed=function(){return!1},cot.prototype.destroy=function(){this._textureManager=this._textureManager&&this._textureManager.destroy(),Wc(this)};var got=cot;function bot(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=Object(r["a"])(e.typedArray),n=Object(r["a"])(e.url);if(t===n)throw new a["a"]("exactly one of options.typedArray, options.url must be defined");if(t&&(!Object(r["a"])(e.width)||!Object(r["a"])(e.height)))throw new a["a"]("options.width and options.height are required when options.typedArray is defined");this.typedArray=e.typedArray,this.width=e.width,this.height=e.height,this.pixelFormat=Object(o["a"])(e.pixelFormat,fx.RGBA),this.pixelDatatype=Object(o["a"])(e.pixelDatatype,hx.UNSIGNED_BYTE);let i=e.url;"string"===typeof i&&(i=Et["a"].createIfNeeded(i)),this.resource=i;const s=Object(o["a"])(e.repeat,!0),c=s?iB.REPEAT:iB.CLAMP_TO_EDGE;this.sampler=new rB({wrapS:c,wrapT:c,minificationFilter:e.minificationFilter,magnificationFilter:e.magnificationFilter,maximumAnisotropy:e.maximumAnisotropy})}var yot=bot;const vot={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4"};var Oot=Object.freeze(vot),Aot="uniform sampler2D u_depthTexture;\n\nvarying vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float z_window = czm_unpackDepth(texture2D(u_depthTexture, v_textureCoordinates));\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    float z_ndc = (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n    float scale = pow(z_ndc * 0.5 + 0.5, 8.0);\n    gl_FragColor = vec4(mix(vec3(0.0), vec3(1.0), scale), 1.0);\n}\n";const wot="http://www.w3.org/2000/svg",Tot="http://www.w3.org/1999/xlink";let Cot;const Eot=Dm.fromCssColorString("rgba(247,250,255,0.384)"),xot=Dm.fromCssColorString("rgba(143,191,255,0.216)"),Sot=Dm.fromCssColorString("rgba(153,197,255,0.098)"),Iot=Dm.fromCssColorString("rgba(255,255,255,0.086)"),Dot=Dm.fromCssColorString("rgba(255,255,255,0.267)"),Pot=Dm.fromCssColorString("rgba(255,255,255,0)"),jot=Dm.fromCssColorString("rgba(66,67,68,0.3)"),Rot=Dm.fromCssColorString("rgba(0,0,0,0.5)");function Lot(e){return Dm.fromCssColorString(window.getComputedStyle(e).getPropertyValue("color"))}const Mot={animation_pathReset:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.316,5.318,9.833,13.682,9.833,5.5,5.5,5.5,5.5,25.5,9.833,25.5,9.833,17.318,24.316,25.682z"},animation_pathPause:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M13,5.5,7.5,5.5,7.5,25.5,13,25.5zM24.5,5.5,19,5.5,19,25.5,24.5,25.5z"},animation_pathPlay:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathPlayReverse:{tagName:"path",transform:"translate(16,16) scale(-0.85,0.85) translate(-16,-16)",d:"M6.684,25.682L24.316,15.5L6.684,5.318V25.682z"},animation_pathLoop:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-16)",d:"M24.249,15.499c-0.009,4.832-3.918,8.741-8.75,8.75c-2.515,0-4.768-1.064-6.365-2.763l2.068-1.442l-7.901-3.703l0.744,8.694l2.193-1.529c2.244,2.594,5.562,4.242,9.26,4.242c6.767,0,12.249-5.482,12.249-12.249H24.249zM15.499,6.75c2.516,0,4.769,1.065,6.367,2.764l-2.068,1.443l7.901,3.701l-0.746-8.693l-2.192,1.529c-2.245-2.594-5.562-4.245-9.262-4.245C8.734,3.25,3.25,8.734,3.249,15.499H6.75C6.758,10.668,10.668,6.758,15.499,6.75z"},animation_pathClock:{tagName:"path",transform:"translate(16,16) scale(0.85) translate(-16,-15.5)",d:"M15.5,2.374C8.251,2.375,2.376,8.251,2.374,15.5C2.376,22.748,8.251,28.623,15.5,28.627c7.249-0.004,13.124-5.879,13.125-13.127C28.624,8.251,22.749,2.375,15.5,2.374zM15.5,25.623C9.909,25.615,5.385,21.09,5.375,15.5C5.385,9.909,9.909,5.384,15.5,5.374c5.59,0.01,10.115,4.535,10.124,10.125C25.615,21.09,21.091,25.615,15.5,25.623zM8.625,15.5c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,16.5,8.624,16.053,8.625,15.5zM8.179,18.572c-0.478,0.277-0.642,0.889-0.365,1.367c0.275,0.479,0.889,0.641,1.365,0.365c0.479-0.275,0.643-0.887,0.367-1.367C9.27,18.461,8.658,18.297,8.179,18.572zM9.18,10.696c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,11.584,9.657,10.973,9.18,10.696zM22.822,12.428c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,12.54,22.344,12.705,22.822,12.428zM12.062,21.455c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,22.344,12.54,21.732,12.062,21.455zM12.062,9.545c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,9.658,11.584,9.822,12.062,9.545zM22.823,18.572c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.092,0.367,1.367c0.477,0.275,1.089,0.113,1.365-0.365C23.464,19.461,23.3,18.848,22.823,18.572zM19.938,7.813c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,8.702,20.418,8.089,19.938,7.813zM23.378,14.5c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,14.949,23.929,14.5,23.378,14.5zM15.501,6.624c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.365c0.275,0.479,0.889,0.643,1.365,0.367l3.305-1.676C15.39,16.99,15.444,17,15.501,17c0.828,0,1.5-0.671,1.5-1.5l-0.5-7.876C16.501,7.072,16.053,6.624,15.501,6.624zM15.501,22.377c-0.552,0-1,0.447-1,1s0.448,1,1,1s1-0.447,1-1S16.053,22.377,15.501,22.377zM18.939,21.455c-0.479,0.277-0.643,0.889-0.366,1.367c0.275,0.477,0.888,0.643,1.366,0.365c0.478-0.275,0.642-0.889,0.366-1.365C20.028,21.344,19.417,21.18,18.939,21.455z"},animation_pathWingButton:{tagName:"path",d:"m 4.5,0.5 c -2.216,0 -4,1.784 -4,4 l 0,24 c 0,2.216 1.784,4 4,4 l 13.71875,0 C 22.478584,27.272785 27.273681,22.511272 32.5,18.25 l 0,-13.75 c 0,-2.216 -1.784,-4 -4,-4 l -24,0 z"},animation_pathPointer:{tagName:"path",d:"M-15,-65,-15,-55,15,-55,15,-65,0,-95z"},animation_pathSwooshFX:{tagName:"path",d:"m 85,0 c 0,16.617 -4.813944,35.356 -13.131081,48.4508 h 6.099803 c 8.317138,-13.0948 13.13322,-28.5955 13.13322,-45.2124 0,-46.94483 -38.402714,-85.00262 -85.7743869,-85.00262 -1.0218522,0 -2.0373001,0.0241 -3.0506131,0.0589 45.958443,1.59437 82.723058,35.77285 82.723058,81.70532 z"}};function Not(e){const t=document.createElementNS(wot,e.tagName);for(const n in e)if(e.hasOwnProperty(n)&&"tagName"!==n)if("children"===n){const n=e.children.length;for(let i=0;i<n;++i)t.appendChild(Not(e.children[i]))}else 0===n.indexOf("xlink:")?t.setAttributeNS(Tot,n.substring(6),e[n]):"textContent"===n?t.textContent=e[n]:t.setAttribute(n,e[n]);return t}function Bot(e,t,n){const i=document.createElementNS(wot,"text");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("class","cesium-animation-svgText");const o=document.createElementNS(wot,"tspan");return o.textContent=n,i.appendChild(o),i}function Fot(e,t,n){e.setAttribute("transform",`translate(100,100) rotate(${n})`),t.setAttribute("transform",`rotate(${n})`)}const zot=new Dm;function kot(e,t){const n=t.alpha,i=1-n;return zot.red=e.red*i+t.red*n,zot.green=e.green*i+t.green*n,zot.blue=e.blue*i+t.blue*n,zot.toCssColorString()}function Uot(e,t,n){const i=Mot[n],o={tagName:"g",class:"cesium-animation-rectButton",transform:`translate(${e},${t})`,children:[{tagName:"rect",class:"cesium-animation-buttonGlow",width:32,height:32,rx:2,ry:2},{tagName:"rect",class:"cesium-animation-buttonMain",width:32,height:32,rx:4,ry:4},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]};return Not(o)}function Vot(e,t,n){const i=Mot[n],o=Mot["animation_pathWingButton"],r={tagName:"g",class:"cesium-animation-rectButton",transform:`translate(${e},${t})`,children:[{class:"cesium-animation-buttonGlow",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonMain",id:"animation_pathWingButton",tagName:o.tagName,d:o.d},{class:"cesium-animation-buttonPath",id:n,tagName:i.tagName,transform:i.transform,d:i.d},{tagName:"title",textContent:""}]};return Not(r)}function Hot(e,t){const n=e._viewModel,i=n.shuttleRingDragging;if(!i||Cot===e)if("mousedown"===t.type||i&&"mousemove"===t.type||"touchstart"===t.type&&1===t.touches.length||i&&"touchmove"===t.type&&1===t.touches.length){const o=e._centerX,r=e._centerY,a=e._svgNode,s=a.getBoundingClientRect();let c,l;if("touchstart"===t.type||"touchmove"===t.type?(c=t.touches[0].clientX,l=t.touches[0].clientY):(c=t.clientX,l=t.clientY),!i&&(c>s.right||c<s.left||l<s.top||l>s.bottom))return;const u=e._shuttleRingPointer.getBoundingClientRect(),h=c-o-s.left,d=l-r-s.top;let f=180*Math.atan2(d,h)/Math.PI+90;f>180&&(f-=360);const p=n.shuttleRingAngle;i||c<u.right&&c>u.left&&l>u.top&&l<u.bottom?(Cot=e,n.shuttleRingDragging=!0,n.shuttleRingAngle=f):f<p?n.slower():f>p&&n.faster(),t.preventDefault()}else e===Cot&&(Cot=void 0),n.shuttleRingDragging=!1}function Got(e,t){this._viewModel=t,this.svgElement=e,this._enabled=void 0,this._toggled=void 0;const n=this;this._clickFunction=function(){const e=n._viewModel.command;e.canExecute&&e()},e.addEventListener("click",this._clickFunction,!0),this._subscriptions=[Jit(t,"toggled",this.setToggled,this),Jit(t,"tooltip",this.setTooltip,this),Jit(t.command,"canExecute",this.setEnabled,this)]}function Wot(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("viewModel is required.");e=HNe(e),this._viewModel=t,this._container=e,this._centerX=0,this._centerY=0,this._defsElement=void 0,this._svgNode=void 0,this._topG=void 0,this._lastHeight=void 0,this._lastWidth=void 0;const n=e.ownerDocument,i=document.createElement("style");i.textContent=".cesium-animation-rectButton .cesium-animation-buttonGlow { filter: url(#animation_blurred); }.cesium-animation-rectButton .cesium-animation-buttonMain { fill: url(#animation_buttonNormal); }.cesium-animation-buttonToggled .cesium-animation-buttonMain { fill: url(#animation_buttonToggled); }.cesium-animation-rectButton:hover .cesium-animation-buttonMain { fill: url(#animation_buttonHovered); }.cesium-animation-buttonDisabled .cesium-animation-buttonMain { fill: url(#animation_buttonDisabled); }.cesium-animation-shuttleRingG .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshGradient); }.cesium-animation-shuttleRingG:hover .cesium-animation-shuttleRingSwoosh { fill: url(#animation_shuttleRingSwooshHovered); }.cesium-animation-shuttleRingPointer { fill: url(#animation_shuttleRingPointerGradient); }.cesium-animation-shuttleRingPausePointer { fill: url(#animation_shuttleRingPointerPaused); }.cesium-animation-knobOuter { fill: url(#animation_knobOuter); }.cesium-animation-knobInner { fill: url(#animation_knobInner); }",n.head.insertBefore(i,n.head.childNodes[0]);const o=document.createElement("div");o.className="cesium-animation-theme",o.innerHTML='<div class="cesium-animation-themeNormal"></div><div class="cesium-animation-themeHover"></div><div class="cesium-animation-themeSelect"></div><div class="cesium-animation-themeDisabled"></div><div class="cesium-animation-themeKnob"></div><div class="cesium-animation-themePointer"></div><div class="cesium-animation-themeSwoosh"></div><div class="cesium-animation-themeSwooshHover"></div>',this._theme=o,this._themeNormal=o.childNodes[0],this._themeHover=o.childNodes[1],this._themeSelect=o.childNodes[2],this._themeDisabled=o.childNodes[3],this._themeKnob=o.childNodes[4],this._themePointer=o.childNodes[5],this._themeSwoosh=o.childNodes[6],this._themeSwooshHover=o.childNodes[7];const s=document.createElementNS(wot,"svg:svg");this._svgNode=s,s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",Tot);const c=document.createElementNS(wot,"g");this._topG=c,this._realtimeSVG=new Got(Vot(3,4,"animation_pathClock"),t.playRealtimeViewModel),this._playReverseSVG=new Got(Uot(44,99,"animation_pathPlayReverse"),t.playReverseViewModel),this._playForwardSVG=new Got(Uot(124,99,"animation_pathPlay"),t.playForwardViewModel),this._pauseSVG=new Got(Uot(84,99,"animation_pathPause"),t.pauseViewModel);const l=document.createElementNS(wot,"g");l.appendChild(this._realtimeSVG.svgElement),l.appendChild(this._playReverseSVG.svgElement),l.appendChild(this._playForwardSVG.svgElement),l.appendChild(this._pauseSVG.svgElement);const u=Not({tagName:"circle",class:"cesium-animation-shuttleRingBack",cx:100,cy:100,r:99});this._shuttleRingBackPanel=u;const h=Mot["animation_pathSwooshFX"],d=Mot["animation_pathPointer"],f=Not({tagName:"g",class:"cesium-animation-shuttleRingSwoosh",children:[{tagName:h.tagName,transform:"translate(100,97) scale(-1,1)",id:"animation_pathSwooshFX",d:h.d},{tagName:h.tagName,transform:"translate(100,97)",id:"animation_pathSwooshFX",d:h.d},{tagName:"line",x1:100,y1:8,x2:100,y2:22}]});this._shuttleRingSwooshG=f,this._shuttleRingPointer=Not({class:"cesium-animation-shuttleRingPointer",id:"animation_pathPointer",tagName:d.tagName,d:d.d});const p=Not({tagName:"g",transform:"translate(100,100)"});this._knobOuter=Not({tagName:"circle",class:"cesium-animation-knobOuter",cx:0,cy:0,r:71});const m=61,_=Not({tagName:"circle",class:"cesium-animation-knobInner",cx:0,cy:0,r:m});this._knobDate=Bot(0,-24,""),this._knobTime=Bot(0,-7,""),this._knobStatus=Bot(0,-41,"");const g=Not({tagName:"circle",class:"cesium-animation-blank",cx:0,cy:0,r:m}),b=document.createElementNS(wot,"g");b.setAttribute("class","cesium-animation-shuttleRingG"),e.appendChild(o),c.appendChild(b),c.appendChild(p),c.appendChild(l),b.appendChild(u),b.appendChild(f),b.appendChild(this._shuttleRingPointer),p.appendChild(this._knobOuter),p.appendChild(_),p.appendChild(this._knobDate),p.appendChild(this._knobTime),p.appendChild(this._knobStatus),p.appendChild(g),s.appendChild(c),e.appendChild(s);const y=this;function v(e){Hot(y,e)}this._mouseCallback=v,u.addEventListener("mousedown",v,!0),u.addEventListener("touchstart",v,!0),f.addEventListener("mousedown",v,!0),f.addEventListener("touchstart",v,!0),n.addEventListener("mousemove",v,!0),n.addEventListener("touchmove",v,!0),n.addEventListener("mouseup",v,!0),n.addEventListener("touchend",v,!0),n.addEventListener("touchcancel",v,!0),this._shuttleRingPointer.addEventListener("mousedown",v,!0),this._shuttleRingPointer.addEventListener("touchstart",v,!0),this._knobOuter.addEventListener("mousedown",v,!0),this._knobOuter.addEventListener("touchstart",v,!0);const O=this._knobTime.childNodes[0],A=this._knobDate.childNodes[0],w=this._knobStatus.childNodes[0];let T;this._subscriptions=[Jit(t.pauseViewModel,"toggled",(function(e){T!==e&&(T=e,T?y._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPausePointer"):y._shuttleRingPointer.setAttribute("class","cesium-animation-shuttleRingPointer"))})),Jit(t,"shuttleRingAngle",(function(e){Fot(y._shuttleRingPointer,y._knobOuter,e)})),Jit(t,"dateLabel",(function(e){A.textContent!==e&&(A.textContent=e)})),Jit(t,"timeLabel",(function(e){O.textContent!==e&&(O.textContent=e)})),Jit(t,"multiplierLabel",(function(e){w.textContent!==e&&(w.textContent=e)}))],this.applyThemeChanges(),this.resize()}Got.prototype.destroy=function(){this.svgElement.removeEventListener("click",this._clickFunction,!0);const e=this._subscriptions;for(let t=0,n=e.length;t<n;t++)e[t].dispose();Wc(this)},Got.prototype.isDestroyed=function(){return!1},Got.prototype.setEnabled=function(e){if(this._enabled!==e){if(this._enabled=e,!e)return void this.svgElement.setAttribute("class","cesium-animation-buttonDisabled");if(this._toggled)return void this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled");this.svgElement.setAttribute("class","cesium-animation-rectButton")}},Got.prototype.setToggled=function(e){this._toggled!==e&&(this._toggled=e,this._enabled&&(e?this.svgElement.setAttribute("class","cesium-animation-rectButton cesium-animation-buttonToggled"):this.svgElement.setAttribute("class","cesium-animation-rectButton")))},Got.prototype.setTooltip=function(e){this.svgElement.getElementsByTagName("title")[0].textContent=e},Object.defineProperties(Wot.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Wot.prototype.isDestroyed=function(){return!1},Wot.prototype.destroy=function(){Object(r["a"])(this._observer)&&(this._observer.disconnect(),this._observer=void 0);const e=this._container.ownerDocument,t=this._mouseCallback;this._shuttleRingBackPanel.removeEventListener("mousedown",t,!0),this._shuttleRingBackPanel.removeEventListener("touchstart",t,!0),this._shuttleRingSwooshG.removeEventListener("mousedown",t,!0),this._shuttleRingSwooshG.removeEventListener("touchstart",t,!0),e.removeEventListener("mousemove",t,!0),e.removeEventListener("touchmove",t,!0),e.removeEventListener("mouseup",t,!0),e.removeEventListener("touchend",t,!0),e.removeEventListener("touchcancel",t,!0),this._shuttleRingPointer.removeEventListener("mousedown",t,!0),this._shuttleRingPointer.removeEventListener("touchstart",t,!0),this._knobOuter.removeEventListener("mousedown",t,!0),this._knobOuter.removeEventListener("touchstart",t,!0),this._container.removeChild(this._svgNode),this._container.removeChild(this._theme),this._realtimeSVG.destroy(),this._playReverseSVG.destroy(),this._playForwardSVG.destroy(),this._pauseSVG.destroy();const n=this._subscriptions;for(let i=0,o=n.length;i<o;i++)n[i].dispose();return Wc(this)},Wot.prototype.resize=function(){const e=this._container.clientWidth,t=this._container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;const n=this._svgNode,i=200,o=132;let r=e,a=t;0===e&&0===t?(r=i,a=o):0===e?(a=t,r=i*(t/o)):0===t&&(r=e,a=o*(e/i));const s=r/i,c=a/o;n.style.cssText=`width: ${r}px; height: ${a}px; position: absolute; bottom: 0; left: 0; overflow: hidden;`,n.setAttribute("width",r),n.setAttribute("height",a),n.setAttribute("viewBox",`0 0 ${r} ${a}`),this._topG.setAttribute("transform",`scale(${s},${c})`),this._centerX=Math.max(1,100*s),this._centerY=Math.max(1,100*c),this._lastHeight=e,this._lastWidth=t},Wot.prototype.applyThemeChanges=function(){const e=this._container.ownerDocument;if(!e.body.contains(this._container)){if(Object(r["a"])(this._observer))return;const t=this;return t._observer=new MutationObserver((function(){e.body.contains(t._container)&&(t._observer.disconnect(),t._observer=void 0,t.applyThemeChanges())})),void t._observer.observe(e,{childList:!0,subtree:!0})}const t=Lot(this._themeNormal),n=Lot(this._themeHover),i=Lot(this._themeSelect),o=Lot(this._themeDisabled),a=Lot(this._themeKnob),s=Lot(this._themePointer),c=Lot(this._themeSwoosh),l=Lot(this._themeSwooshHover),u=Not({tagName:"defs",children:[{id:"animation_buttonNormal",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":kot(t,Eot)},{tagName:"stop",offset:"12%","stop-color":kot(t,xot)},{tagName:"stop",offset:"46%","stop-color":kot(t,Sot)},{tagName:"stop",offset:"81%","stop-color":kot(t,Iot)}]},{id:"animation_buttonHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":kot(n,Eot)},{tagName:"stop",offset:"12%","stop-color":kot(n,xot)},{tagName:"stop",offset:"46%","stop-color":kot(n,Sot)},{tagName:"stop",offset:"81%","stop-color":kot(n,Iot)}]},{id:"animation_buttonToggled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":kot(i,Eot)},{tagName:"stop",offset:"12%","stop-color":kot(i,xot)},{tagName:"stop",offset:"46%","stop-color":kot(i,Sot)},{tagName:"stop",offset:"81%","stop-color":kot(i,Iot)}]},{id:"animation_buttonDisabled",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-color":kot(o,Dot)},{tagName:"stop",offset:"75%","stop-color":kot(o,Pot)}]},{id:"animation_blurred",tagName:"filter",width:"200%",height:"200%",x:"-50%",y:"-50%",children:[{tagName:"feGaussianBlur",stdDeviation:4,in:"SourceGraphic"}]},{id:"animation_shuttleRingSwooshGradient",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":c.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":c.toCssColorString()}]},{id:"animation_shuttleRingSwooshHovered",tagName:"linearGradient",x1:"50%",y1:"0%",x2:"50%",y2:"100%",children:[{tagName:"stop",offset:"0%","stop-opacity":.2,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"85%","stop-opacity":.85,"stop-color":l.toCssColorString()},{tagName:"stop",offset:"95%","stop-opacity":.05,"stop-color":l.toCssColorString()}]},{id:"animation_shuttleRingPointerGradient",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":s.toCssColorString()},{tagName:"stop",offset:"40%","stop-color":s.toCssColorString()},{tagName:"stop",offset:"60%","stop-color":kot(s,Rot)},{tagName:"stop",offset:"100%","stop-color":kot(s,Rot)}]},{id:"animation_shuttleRingPointerPaused",tagName:"linearGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[{tagName:"stop",offset:"0%","stop-color":"#CCC"},{tagName:"stop",offset:"40%","stop-color":"#CCC"},{tagName:"stop",offset:"60%","stop-color":"#555"},{tagName:"stop",offset:"100%","stop-color":"#555"}]},{id:"animation_knobOuter",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":kot(a,Eot)},{tagName:"stop",offset:"60%","stop-color":kot(a,jot)},{tagName:"stop",offset:"85%","stop-color":kot(a,xot)}]},{id:"animation_knobInner",tagName:"linearGradient",x1:"20%",y1:"0%",x2:"90%",y2:"100%",children:[{tagName:"stop",offset:"5%","stop-color":kot(a,jot)},{tagName:"stop",offset:"60%","stop-color":kot(a,Eot)},{tagName:"stop",offset:"85%","stop-color":kot(a,Iot)}]}]});Object(r["a"])(this._defsElement)?this._svgNode.replaceChild(u,this._defsElement):this._svgNode.appendChild(u),this._defsElement=u};var qot=Wot;const Yot=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Xot=15,Kot=105;function $ot(e,t){return e-t}function Jot(e,t){const n=Li(t,e,$ot);return n<0?~n:n}function Qot(e,t){if(Math.abs(e)<=Xot)return e/Xot;const n=Xot,i=Kot;let o;const r=0;let a;return e>0?(o=Math.log(t[t.length-1]),a=(o-r)/(i-n),Math.exp(r+a*(e-n))):(o=Math.log(-t[0]),a=(o-r)/(i-n),-Math.exp(r+a*(Math.abs(e)-n)))}function Zot(e,t,n){if(n.clockStep===_m.SYSTEM_CLOCK)return Xot;if(Math.abs(e)<=1)return e*Xot;const i=t[t.length-1];e>i?e=i:e<-i&&(e=-i);const o=Xot,r=Kot;let a;const s=0;let c;return e>0?(a=Math.log(i),c=(a-s)/(r-o),(Math.log(e)-s)/c+o):(a=Math.log(-t[0]),c=(a-s)/(r-o),-((Math.log(Math.abs(e))-s)/c+o))}function ert(e){if(!Object(r["a"])(e))throw new a["a"]("clockViewModel is required.");const t=this;this._clockViewModel=e,this._allShuttleRingTicks=[],this._dateFormatter=ert.defaultDateFormatter,this._timeFormatter=ert.defaultTimeFormatter,this.shuttleRingDragging=!1,this.snapToTicks=!1,zit.track(this,["_allShuttleRingTicks","_dateFormatter","_timeFormatter","shuttleRingDragging","snapToTicks"]),this._sortedFilteredPositiveTicks=[],this.setShuttleRingTicks(ert.defaultTicks),this.timeLabel=void 0,zit.defineProperty(this,"timeLabel",(function(){return t._timeFormatter(t._clockViewModel.currentTime,t)})),this.dateLabel=void 0,zit.defineProperty(this,"dateLabel",(function(){return t._dateFormatter(t._clockViewModel.currentTime,t)})),this.multiplierLabel=void 0,zit.defineProperty(this,"multiplierLabel",(function(){const e=t._clockViewModel;if(e.clockStep===_m.SYSTEM_CLOCK)return"Today";const n=e.multiplier;return n%1===0?`${n.toFixed(0)}x`:`${n.toFixed(3).replace(/0{0,3}$/,"")}x`})),this.shuttleRingAngle=void 0,zit.defineProperty(this,"shuttleRingAngle",{get:function(){return Zot(e.multiplier,t._allShuttleRingTicks,e)},set:function(e){e=Math.max(Math.min(e,Kot),-Kot);const n=t._allShuttleRingTicks,i=t._clockViewModel;if(i.clockStep=_m.SYSTEM_CLOCK_MULTIPLIER,Math.abs(e)===Kot)return void(i.multiplier=e>0?n[n.length-1]:n[0]);let o=Qot(e,n);if(t.snapToTicks)o=n[Jot(o,n)];else if(0!==o){const e=Math.abs(o);if(e>100){const t=e.toFixed(0).length-2,n=Math.pow(10,t);o=Math.round(o/n)*n|0}else e>Xot?o=Math.round(o):e>1?o=+o.toFixed(1):e>0&&(o=+o.toFixed(2))}i.multiplier=o}}),this._canAnimate=void 0,zit.defineProperty(this,"_canAnimate",(function(){const e=t._clockViewModel,n=e.clockRange;if(t.shuttleRingDragging||n===pm.UNBOUNDED)return!0;const i=e.multiplier,o=e.currentTime,r=e.startTime;let a=!1;if(n===pm.LOOP_STOP)a=mo.greaterThan(o,r)||o.equals(r)&&i>0;else{const t=e.stopTime;a=mo.greaterThan(o,r)&&mo.lessThan(o,t)||o.equals(r)&&i>0||o.equals(t)&&i<0}return a||(e.shouldAnimate=!1),a})),this._isSystemTimeAvailable=void 0,zit.defineProperty(this,"_isSystemTimeAvailable",(function(){const e=t._clockViewModel,n=e.clockRange;if(n===pm.UNBOUNDED)return!0;const i=e.systemTime;return mo.greaterThanOrEquals(i,e.startTime)&&mo.lessThanOrEquals(i,e.stopTime)})),this._isAnimating=void 0,zit.defineProperty(this,"_isAnimating",(function(){return t._clockViewModel.shouldAnimate&&(t._canAnimate||t.shuttleRingDragging)}));const n=Kit((function(){const e=t._clockViewModel;e.shouldAnimate?e.shouldAnimate=!1:t._canAnimate&&(e.shouldAnimate=!0)}));this._pauseViewModel=new Yit(n,{toggled:zit.computed((function(){return!t._isAnimating})),tooltip:"Pause"});const i=Kit((function(){const e=t._clockViewModel,n=e.multiplier;n>0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playReverseViewModel=new Yit(i,{toggled:zit.computed((function(){return t._isAnimating&&e.multiplier<0})),tooltip:"Play Reverse"});const o=Kit((function(){const e=t._clockViewModel,n=e.multiplier;n<0&&(e.multiplier=-n),e.shouldAnimate=!0}));this._playForwardViewModel=new Yit(o,{toggled:zit.computed((function(){return t._isAnimating&&e.multiplier>0&&e.clockStep!==_m.SYSTEM_CLOCK})),tooltip:"Play Forward"});const s=Kit((function(){t._clockViewModel.clockStep=_m.SYSTEM_CLOCK}),zit.getObservable(this,"_isSystemTimeAvailable"));this._playRealtimeViewModel=new Yit(s,{toggled:zit.computed((function(){return e.clockStep===_m.SYSTEM_CLOCK})),tooltip:zit.computed((function(){return t._isSystemTimeAvailable?"Today (real-time)":"Current time not in range"}))}),this._slower=Kit((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=e.multiplier,o=Jot(i,n)-1;o>=0&&(e.multiplier=n[o])})),this._faster=Kit((function(){const e=t._clockViewModel,n=t._allShuttleRingTicks,i=e.multiplier,o=Jot(i,n)+1;o<n.length&&(e.multiplier=n[o])}))}ert.defaultDateFormatter=function(e,t){const n=mo.toGregorianDate(e);return`${Yot[n.month-1]} ${n.day} ${n.year}`},ert.defaultTicks=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800],ert.defaultTimeFormatter=function(e,t){const n=mo.toGregorianDate(e),i=Math.round(n.millisecond);return Math.abs(t._clockViewModel.multiplier)<1?`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")}.${i.toString().padStart(3,"0")}`:`${n.hour.toString().padStart(2,"0")}:${n.minute.toString().padStart(2,"0")}:${n.second.toString().padStart(2,"0")} UTC`},ert.prototype.getShuttleRingTicks=function(){return this._sortedFilteredPositiveTicks.slice(0)},ert.prototype.setShuttleRingTicks=function(e){if(!Object(r["a"])(e))throw new a["a"]("positiveTicks is required.");let t,n,i;const o={},s=this._sortedFilteredPositiveTicks;for(s.length=0,t=0,n=e.length;t<n;++t)i=e[t],o.hasOwnProperty(i)||(o[i]=!0,s.push(i));s.sort($ot);const c=[];for(n=s.length,t=n-1;t>=0;--t)i=s[t],0!==i&&c.push(-i);Array.prototype.push.apply(c,s),this._allShuttleRingTicks=c},Object.defineProperties(ert.prototype,{slower:{get:function(){return this._slower}},faster:{get:function(){return this._faster}},clockViewModel:{get:function(){return this._clockViewModel}},pauseViewModel:{get:function(){return this._pauseViewModel}},playReverseViewModel:{get:function(){return this._playReverseViewModel}},playForwardViewModel:{get:function(){return this._playForwardViewModel}},playRealtimeViewModel:{get:function(){return this._playRealtimeViewModel}},dateFormatter:{get:function(){return this._dateFormatter},set:function(e){if("function"!==typeof e)throw new a["a"]("dateFormatter must be a function");this._dateFormatter=e}},timeFormatter:{get:function(){return this._timeFormatter},set:function(e){if("function"!==typeof e)throw new a["a"]("timeFormatter must be a function");this._timeFormatter=e}}}),ert._maxShuttleRingAngle=Kot,ert._realtimeShuttleRingAngle=Xot;var trt=ert;function nrt(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.globe,n=Object(o["a"])(e.imageryProviderViewModels,[]),i=Object(o["a"])(e.terrainProviderViewModels,[]);if(!Object(r["a"])(t))throw new a["a"]("globe is required");this._globe=t,this.imageryProviderViewModels=n.slice(0),this.terrainProviderViewModels=i.slice(0),this.dropDownVisible=!1,zit.track(this,["imageryProviderViewModels","terrainProviderViewModels","dropDownVisible"]);const s=zit.getObservable(this,"imageryProviderViewModels"),c=zit.pureComputed((function(){const e=s(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],o=i.category;Object(r["a"])(t[o])?t[o].push(i):t[o]=[i]}const i=Object.keys(t),o=[];for(n=0;n<i.length;n++){const e=i[n];o.push({name:e,providers:t[e]})}return o}));this._imageryProviders=c;const l=zit.getObservable(this,"terrainProviderViewModels"),u=zit.pureComputed((function(){const e=l(),t={};let n;for(n=0;n<e.length;n++){const i=e[n],o=i.category;Object(r["a"])(t[o])?t[o].push(i):t[o]=[i]}const i=Object.keys(t),o=[];for(n=0;n<i.length;n++){const e=i[n];o.push({name:e,providers:t[e]})}return o}));this._terrainProviders=u,this.buttonTooltip=void 0,zit.defineProperty(this,"buttonTooltip",(function(){const e=this.selectedImagery,t=this.selectedTerrain,n=Object(r["a"])(e)?e.name:void 0,i=Object(r["a"])(t)?t.name:void 0;return Object(r["a"])(n)&&Object(r["a"])(i)?`${n}\n${i}`:Object(r["a"])(n)?n:i})),this.buttonImageUrl=void 0,zit.defineProperty(this,"buttonImageUrl",(function(){const e=this.selectedImagery;if(Object(r["a"])(e))return e.iconUrl})),this.selectedImagery=void 0;const h=zit.observable();this._currentImageryProviders=[],zit.defineProperty(this,"selectedImagery",{get:function(){return h()},set:function(e){if(h()===e)return void(this.dropDownVisible=!1);let t;const n=this._currentImageryProviders,i=n.length,o=this._globe.imageryLayers;let a=!1;for(t=0;t<i;t++){const e=o.length;for(let i=0;i<e;i++){const e=o.get(i);if(e.imageryProvider===n[t]){o.remove(e),a=!0;break}}}if(Object(r["a"])(e)){const n=e.creationCommand();if(Array.isArray(n)){const e=n.length;for(t=e-1;t>=0;t--)o.addImageryProvider(n[t],0);this._currentImageryProviders=n.slice(0)}else if(this._currentImageryProviders=[n],a)o.addImageryProvider(n,0);else{const e=o.get(0);Object(r["a"])(e)&&o.remove(e),o.addImageryProvider(n,0)}}h(e),this.dropDownVisible=!1}}),this.selectedTerrain=void 0;const d=zit.observable();zit.defineProperty(this,"selectedTerrain",{get:function(){return d()},set:function(e){if(d()===e)return void(this.dropDownVisible=!1);let t;Object(r["a"])(e)&&(t=e.creationCommand()),this._globe.depthTestAgainstTerrain=!(t instanceof mO),this._globe.terrainProvider=t,d(e),this.dropDownVisible=!1}});const f=this;this._toggleDropDown=Kit((function(){f.dropDownVisible=!f.dropDownVisible})),this.selectedImagery=Object(o["a"])(e.selectedImageryProviderViewModel,n[0]),this.selectedTerrain=Object(o["a"])(e.selectedTerrainProviderViewModel,i[0])}Object.defineProperties(nrt.prototype,{toggleDropDown:{get:function(){return this._toggleDropDown}},globe:{get:function(){return this._globe}}});var irt=nrt;function ort(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e);const n=new irt(t),i=document.createElement("button");i.type="button",i.className="cesium-button cesium-toolbar-button",i.setAttribute("data-bind","attr: { title: buttonTooltip },click: toggleDropDown"),e.appendChild(i);const o=document.createElement("img");o.setAttribute("draggable","false"),o.className="cesium-baseLayerPicker-selected",o.setAttribute("data-bind","attr: { src: buttonImageUrl }, visible: !!buttonImageUrl"),i.appendChild(o);const s=document.createElement("div");s.className="cesium-baseLayerPicker-dropDown",s.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-dropDown-visible" : dropDownVisible }'),e.appendChild(s);const c=document.createElement("div");c.className="cesium-baseLayerPicker-sectionTitle",c.setAttribute("data-bind","visible: imageryProviderViewModels.length > 0"),c.innerHTML="Imagery",s.appendChild(c);const l=document.createElement("div");l.className="cesium-baseLayerPicker-section",l.setAttribute("data-bind","foreach: _imageryProviders"),s.appendChild(l);const u=document.createElement("div");u.className="cesium-baseLayerPicker-category",l.appendChild(u);const h=document.createElement("div");h.className="cesium-baseLayerPicker-categoryTitle",h.setAttribute("data-bind","text: name"),u.appendChild(h);const d=document.createElement("div");d.className="cesium-baseLayerPicker-choices",d.setAttribute("data-bind","foreach: providers"),u.appendChild(d);const f=document.createElement("div");f.className="cesium-baseLayerPicker-item",f.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedImagery },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedImagery = $data; }'),d.appendChild(f);const p=document.createElement("img");p.className="cesium-baseLayerPicker-itemIcon",p.setAttribute("data-bind","attr: { src: iconUrl }"),p.setAttribute("draggable","false"),f.appendChild(p);const m=document.createElement("div");m.className="cesium-baseLayerPicker-itemLabel",m.setAttribute("data-bind","text: name"),f.appendChild(m);const _=document.createElement("div");_.className="cesium-baseLayerPicker-sectionTitle",_.setAttribute("data-bind","visible: terrainProviderViewModels.length > 0"),_.innerHTML="Terrain",s.appendChild(_);const g=document.createElement("div");g.className="cesium-baseLayerPicker-section",g.setAttribute("data-bind","foreach: _terrainProviders"),s.appendChild(g);const b=document.createElement("div");b.className="cesium-baseLayerPicker-category",g.appendChild(b);const y=document.createElement("div");y.className="cesium-baseLayerPicker-categoryTitle",y.setAttribute("data-bind","text: name"),b.appendChild(y);const v=document.createElement("div");v.className="cesium-baseLayerPicker-choices",v.setAttribute("data-bind","foreach: providers"),b.appendChild(v);const O=document.createElement("div");O.className="cesium-baseLayerPicker-item",O.setAttribute("data-bind",'css: { "cesium-baseLayerPicker-selectedItem" : $data === $parents[1].selectedTerrain },attr: { title: tooltip },visible: creationCommand.canExecute,click: function($data) { $parents[1].selectedTerrain = $data; }'),v.appendChild(O);const A=document.createElement("img");A.className="cesium-baseLayerPicker-itemIcon",A.setAttribute("data-bind","attr: { src: iconUrl }"),A.setAttribute("draggable","false"),O.appendChild(A);const w=document.createElement("div");w.className="cesium-baseLayerPicker-itemLabel",w.setAttribute("data-bind","text: name"),O.appendChild(w),zit.applyBindings(n,i),zit.applyBindings(n,s),this._viewModel=n,this._container=e,this._element=i,this._dropPanel=s,this._closeDropDown=function(e){i.contains(e.target)||s.contains(e.target)||(n.dropDownVisible=!1)},Or.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(ort.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),ort.prototype.isDestroyed=function(){return!1},ort.prototype.destroy=function(){return Or.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),zit.cleanNode(this._element),zit.cleanNode(this._dropPanel),this._container.removeChild(this._element),this._container.removeChild(this._dropPanel),Wc(this)};var rrt=ort;function art(e){if(!Object(r["a"])(e.name))throw new a["a"]("options.name is required.");if(!Object(r["a"])(e.tooltip))throw new a["a"]("options.tooltip is required.");if(!Object(r["a"])(e.iconUrl))throw new a["a"]("options.iconUrl is required.");if("function"!==typeof e.creationFunction)throw new a["a"]("options.creationFunction is required.");let t=e.creationFunction;Object(r["a"])(t.canExecute)||(t=Kit(t)),this._creationCommand=t,this.name=e.name,this.tooltip=e.tooltip,this.iconUrl=e.iconUrl,this._category=Object(o["a"])(e.category,""),zit.track(this,["name","tooltip","iconUrl"])}Object.defineProperties(art.prototype,{creationCommand:{get:function(){return this._creationCommand}},category:{get:function(){return this._category}}});var srt=art;function crt(){const e=[];return e.push(new srt({name:"Bing Maps Aerial",iconUrl:Bt("Widgets/Images/ImageryProviders/bingAerial.png"),tooltip:"Bing Maps aerial imagery, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return yit({style:K0e.AERIAL})}})),e.push(new srt({name:"Bing Maps Aerial with Labels",iconUrl:Bt("Widgets/Images/ImageryProviders/bingAerialLabels.png"),tooltip:"Bing Maps aerial imagery with labels, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return yit({style:K0e.AERIAL_WITH_LABELS})}})),e.push(new srt({name:"Bing Maps Roads",iconUrl:Bt("Widgets/Images/ImageryProviders/bingRoads.png"),tooltip:"Bing Maps standard road maps, provided by Cesium ion",category:"Cesium ion",creationFunction:function(){return yit({style:K0e.ROAD})}})),e.push(new srt({name:"ESRI World Imagery",iconUrl:Bt("Widgets/Images/ImageryProviders/esriWorldImagery.png"),tooltip:"World Imagery provides one meter or better satellite and aerial imagery in many parts of the world and lower resolution satellite imagery worldwide.  The map includes NASA Blue Marble: Next Generation 500m resolution imagery at small scales (above 1:1,000,000), i-cubed 15m eSAT imagery at medium-to-large scales (down to 1:70,000) for the world, and USGS 15m Landsat imagery for Antarctica. The map features 0.3m resolution imagery in the continental United States and 0.6m resolution imagery in parts of Western Europe from DigitalGlobe. In other parts of the world, 1 meter resolution imagery is available from GeoEye IKONOS, i-cubed Nationwide Prime, Getmapping, AeroGRID, IGN Spain, and IGP Portugal.  Additionally, imagery at different resolutions has been contributed by the GIS User Community.\nhttp://www.esri.com",category:"Other",creationFunction:function(){return new uUe({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",enablePickFeatures:!1})}})),e.push(new srt({name:"ESRI World Street Map",iconUrl:Bt("Widgets/Images/ImageryProviders/esriWorldStreetMap.png"),tooltip:"This worldwide street map presents highway-level data for the world. Street-level data includes the United States; much of Canada; Japan; most countries in Europe; Australia and New Zealand; India; parts of South America including Argentina, Brazil, Chile, Colombia, and Venezuela; Ghana; and parts of southern Africa including Botswana, Lesotho, Namibia, South Africa, and Swaziland.\nhttp://www.esri.com",category:"Other",creationFunction:function(){return new uUe({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",enablePickFeatures:!1})}})),e.push(new srt({name:"ESRI National Geographic",iconUrl:Bt("Widgets/Images/ImageryProviders/esriNationalGeographic.png"),tooltip:"This web map contains the National Geographic World Map service. This map service is designed to be used as a general reference map for informational and educational purposes as well as a basemap by GIS professionals and other users for creating web maps and web mapping applications.\nhttp://www.esri.com",category:"Other",creationFunction:function(){return new uUe({url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/",enablePickFeatures:!1})}})),e.push(new srt({name:"Open­Street­Map",iconUrl:Bt("Widgets/Images/ImageryProviders/openStreetMap.png"),tooltip:"OpenStreetMap (OSM) is a collaborative project to create a free editable map of the world.\nhttp://www.openstreetmap.org",category:"Other",creationFunction:function(){return new k1e({url:"https://a.tile.openstreetmap.org/"})}})),e.push(new srt({name:"Stamen Watercolor",iconUrl:Bt("Widgets/Images/ImageryProviders/stamenWatercolor.png"),tooltip:"Reminiscent of hand drawn maps, Stamen watercolor maps apply raster effect area washes and organic edges over a paper texture to add warm pop to any map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new k1e({url:"https://stamen-tiles.a.ssl.fastly.net/watercolor/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new srt({name:"Stamen Toner",iconUrl:Bt("Widgets/Images/ImageryProviders/stamenToner.png"),tooltip:"A high contrast black and white map.\nhttp://maps.stamen.com",category:"Other",creationFunction:function(){return new k1e({url:"https://stamen-tiles.a.ssl.fastly.net/toner/",credit:"Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under CC BY SA."})}})),e.push(new srt({name:"Sentinel-2",iconUrl:Bt("Widgets/Images/ImageryProviders/sentinel-2.png"),tooltip:"Sentinel-2 cloudless by EOX IT Services GmbH (Contains modified Copernicus Sentinel data 2016 and 2017).",category:"Cesium ion",creationFunction:function(){return new Y0e({assetId:3954})}})),e.push(new srt({name:"Blue Marble",iconUrl:Bt("Widgets/Images/ImageryProviders/blueMarble.png"),tooltip:"Blue Marble Next Generation July, 2004 imagery from NASA.",category:"Cesium ion",creationFunction:function(){return new Y0e({assetId:3845})}})),e.push(new srt({name:"Earth at night",iconUrl:Bt("Widgets/Images/ImageryProviders/earthAtNight.png"),tooltip:"The Earth at night, also known as The Black Marble, is a 500 meter resolution global composite imagery layer released by NASA.",category:"Cesium ion",creationFunction:function(){return new Y0e({assetId:3812})}})),e.push(new srt({name:"Natural Earth II",iconUrl:Bt("Widgets/Images/ImageryProviders/naturalEarthII.png"),tooltip:"Natural Earth II, darkened for contrast.\nhttp://www.naturalearthdata.com/",category:"Cesium ion",creationFunction:function(){return new v0e({url:Bt("Assets/Textures/NaturalEarthII")})}})),e}var lrt=crt;function urt(){const e=[];return e.push(new srt({name:"WGS84 Ellipsoid",iconUrl:Bt("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84 standard ellipsoid, also known as EPSG:4326",category:"Cesium ion",creationFunction:function(){return new mO}})),e.push(new srt({name:"Cesium World Terrain",iconUrl:Bt("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion",category:"Cesium ion",creationFunction:function(){return BL({requestWaterMask:!0,requestVertexNormals:!0})}})),e}var hrt=urt;function drt(e){return function(t){const n=e._scene.pick(t.position);Object(r["a"])(n)&&n.primitive instanceof $ge&&(e.tileset=n.primitive),e.pickActive=!1}}function frt(e,t){t?e._eventHandler.setInputAction((function(t){const n=e._scene.pick(t.endPosition);Object(r["a"])(n)&&n.primitive instanceof $ge&&(e.tileset=n.primitive)}),BD.MOUSE_MOVE):(e._eventHandler.removeInputAction(BD.MOUSE_MOVE),e.picking=e.picking)}const prt={maximumFractionDigits:3};function mrt(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,prt):Math.round(t).toLocaleString()}function _rt(e,t){if(!Object(r["a"])(e))return"";const n=t?e._statisticsPerPass[Ape.PICK]:e._statisticsPerPass[Ape.RENDER];let i='<ul class="cesium-cesiumInspector-statistics">';return i+=`<li><strong>Visited: </strong>${n.visited.toLocaleString()}</li>`+`<li><strong>Selected: </strong>${n.selected.toLocaleString()}</li>`+`<li><strong>Commands: </strong>${n.numberOfCommands.toLocaleString()}</li>`,i+="</ul>",t||(i+='<ul class="cesium-cesiumInspector-statistics">',i+=`<li><strong>Requests: </strong>${n.numberOfPendingRequests.toLocaleString()}</li>`+`<li><strong>Attempted: </strong>${n.numberOfAttemptedRequests.toLocaleString()}</li>`+`<li><strong>Processing: </strong>${n.numberOfTilesProcessing.toLocaleString()}</li>`+`<li><strong>Content Ready: </strong>${n.numberOfTilesWithContentReady.toLocaleString()}</li>`+`<li><strong>Total: </strong>${n.numberOfTilesTotal.toLocaleString()}</li>`,i+="</ul>",i+='<ul class="cesium-cesiumInspector-statistics">',i+=`<li><strong>Features Selected: </strong>${n.numberOfFeaturesSelected.toLocaleString()}</li>`+`<li><strong>Features Loaded: </strong>${n.numberOfFeaturesLoaded.toLocaleString()}</li>`+`<li><strong>Points Selected: </strong>${n.numberOfPointsSelected.toLocaleString()}</li>`+`<li><strong>Points Loaded: </strong>${n.numberOfPointsLoaded.toLocaleString()}</li>`+`<li><strong>Triangles Selected: </strong>${n.numberOfTrianglesSelected.toLocaleString()}</li>`,i+="</ul>",i+='<ul class="cesium-cesiumInspector-statistics">',i+=`<li><strong>Tiles styled: </strong>${n.numberOfTilesStyled.toLocaleString()}</li>`+`<li><strong>Features styled: </strong>${n.numberOfFeaturesStyled.toLocaleString()}</li>`,i+="</ul>",i+='<ul class="cesium-cesiumInspector-statistics">',i+=`<li><strong>Children Union Culled: </strong>${n.numberOfTilesCulledWithChildrenUnion.toLocaleString()}</li>`,i+="</ul>",i+='<ul class="cesium-cesiumInspector-statistics">',i+=`<li><strong>Geometry Memory (MB): </strong>${mrt(n.geometryByteLength)}</li>`+`<li><strong>Texture Memory (MB): </strong>${mrt(n.texturesByteLength)}</li>`+`<li><strong>Batch Table Memory (MB): </strong>${mrt(n.batchTableByteLength)}</li>`,i+="</ul>"),i}function grt(){const e=r3.statistics;return`\n  <ul class="cesium-cesiumInspector-statistics">\n    <li><strong>Geometry Memory (MB): </strong>${mrt(e.geometryByteLength)}</li>\n    <li><strong>Texture Memory (MB): </strong>${mrt(e.texturesByteLength)}</li>\n  </ul>\n  `}const brt=[{text:"Highlight",value:fK.HIGHLIGHT},{text:"Replace",value:fK.REPLACE},{text:"Mix",value:fK.MIX}],yrt=new Dm(1,1,0,.4),vrt=new Dm,Ort=new Dm;function Art(e,t){i["a"].typeOf.object("scene",e),i["a"].typeOf.object("performanceContainer",t);const n=this,o=e.canvas;this._eventHandler=new OP(o),this._scene=e,this._performanceContainer=t,this._canvas=o,this._performanceDisplay=new c2e({container:t}),this._statisticsText="",this._pickStatisticsText="",this._resourceCacheStatisticsText="",this._editorError="",this.performance=!1,this.showStatistics=!0,this.showPickStatistics=!0,this.showResourceCacheStatistics=!1,this.inspectorVisible=!0,this.tilesetVisible=!1,this.displayVisible=!1,this.updateVisible=!1,this.loggingVisible=!1,this.styleVisible=!1,this.tileDebugLabelsVisible=!1,this.optimizationVisible=!1,this.styleString="{}",this._tileset=void 0,this._feature=void 0,this._tile=void 0,zit.track(this,["performance","inspectorVisible","_statisticsText","_pickStatisticsText","_resourceCacheStatisticsText","_editorError","showPickStatistics","showStatistics","showResourceCacheStatistics","tilesetVisible","displayVisible","updateVisible","loggingVisible","styleVisible","optimizationVisible","tileDebugLabelsVisible","styleString","_feature","_tile"]),this._properties=zit.observable({}),this.properties=[],zit.defineProperty(this,"properties",(function(){const e=[],t=n._properties();for(const n in t)t.hasOwnProperty(n)&&e.push(n);return e}));const a=zit.observable();zit.defineProperty(this,"dynamicScreenSpaceError",{get:function(){return a()},set:function(e){a(e),Object(r["a"])(n._tileset)&&(n._tileset.dynamicScreenSpaceError=e)}}),this.dynamicScreenSpaceError=!1;const s=zit.observable();zit.defineProperty(this,"colorBlendMode",{get:function(){return s()},set:function(e){s(e),Object(r["a"])(n._tileset)&&(n._tileset.colorBlendMode=e,n._scene.requestRender())}}),this.colorBlendMode=fK.HIGHLIGHT;const c=zit.observable(),l=zit.observable();zit.defineProperty(this,"picking",{get:function(){return l()},set:function(t){l(t),t?n._eventHandler.setInputAction((function(t){const i=e.pick(t.endPosition);if(i instanceof qK?(n.feature=i,n.tile=i.content.tile):Object(r["a"])(i)&&Object(r["a"])(i.content)?(n.feature=void 0,n.tile=i.content.tile):(n.feature=void 0,n.tile=void 0),Object(r["a"])(n._tileset)){if(c&&Object(r["a"])(i)&&Object(r["a"])(i.content)){let o;e.pickPositionSupported&&(o=e.pickPosition(t.endPosition),Object(r["a"])(o)&&(n._tileset.debugPickPosition=o)),n._tileset.debugPickedTile=i.content.tile}else n._tileset.debugPickedTile=void 0;n._scene.requestRender()}}),BD.MOUSE_MOVE):(n.feature=void 0,n.tile=void 0,n._eventHandler.removeInputAction(BD.MOUSE_MOVE))}}),this.picking=!0;const u=zit.observable();zit.defineProperty(this,"colorize",{get:function(){return u()},set:function(e){u(e),Object(r["a"])(n._tileset)&&(n._tileset.debugColorizeTiles=e,n._scene.requestRender())}}),this.colorize=!1;const h=zit.observable();zit.defineProperty(this,"wireframe",{get:function(){return h()},set:function(e){h(e),Object(r["a"])(n._tileset)&&(n._tileset.debugWireframe=e,n._scene.requestRender())}}),this.wireframe=!1;const d=zit.observable();zit.defineProperty(this,"showBoundingVolumes",{get:function(){return d()},set:function(e){d(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowBoundingVolume=e,n._scene.requestRender())}}),this.showBoundingVolumes=!1;const f=zit.observable();zit.defineProperty(this,"showContentBoundingVolumes",{get:function(){return f()},set:function(e){f(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowContentBoundingVolume=e,n._scene.requestRender())}}),this.showContentBoundingVolumes=!1;const p=zit.observable();zit.defineProperty(this,"showRequestVolumes",{get:function(){return p()},set:function(e){p(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowViewerRequestVolume=e,n._scene.requestRender())}}),this.showRequestVolumes=!1;const m=zit.observable();zit.defineProperty(this,"freezeFrame",{get:function(){return m()},set:function(e){m(e),Object(r["a"])(n._tileset)&&(n._tileset.debugFreezeFrame=e,n._scene.debugShowFrustumPlanes=e,n._scene.requestRender())}}),this.freezeFrame=!1,zit.defineProperty(this,"showOnlyPickedTileDebugLabel",{get:function(){return c()},set:function(e){c(e),Object(r["a"])(n._tileset)&&(n._tileset.debugPickedTileLabelOnly=e,n._scene.requestRender())}}),this.showOnlyPickedTileDebugLabel=!1;const _=zit.observable();zit.defineProperty(this,"showGeometricError",{get:function(){return _()},set:function(e){_(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowGeometricError=e,n._scene.requestRender())}}),this.showGeometricError=!1;const g=zit.observable();zit.defineProperty(this,"showRenderingStatistics",{get:function(){return g()},set:function(e){g(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowRenderingStatistics=e,n._scene.requestRender())}}),this.showRenderingStatistics=!1;const b=zit.observable();zit.defineProperty(this,"showMemoryUsage",{get:function(){return b()},set:function(e){b(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowMemoryUsage=e,n._scene.requestRender())}}),this.showMemoryUsage=!1;const y=zit.observable();zit.defineProperty(this,"showUrl",{get:function(){return y()},set:function(e){y(e),Object(r["a"])(n._tileset)&&(n._tileset.debugShowUrl=e,n._scene.requestRender())}}),this.showUrl=!1;const v=zit.observable();zit.defineProperty(this,"maximumScreenSpaceError",{get:function(){return v()},set:function(e){e=Number(e),isNaN(e)||(v(e),Object(r["a"])(n._tileset)&&(n._tileset.maximumScreenSpaceError=e))}}),this.maximumScreenSpaceError=16;const O=zit.observable();zit.defineProperty(this,"dynamicScreenSpaceErrorDensity",{get:function(){return O()},set:function(e){e=Number(e),isNaN(e)||(O(e),Object(r["a"])(n._tileset)&&(n._tileset.dynamicScreenSpaceErrorDensity=e))}}),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorDensitySliderValue=void 0,zit.defineProperty(this,"dynamicScreenSpaceErrorDensitySliderValue",{get:function(){return Math.pow(O(),1/6)},set:function(e){O(Math.pow(e,6))}});const A=zit.observable();zit.defineProperty(this,"dynamicScreenSpaceErrorFactor",{get:function(){return A()},set:function(e){e=Number(e),isNaN(e)||(A(e),Object(r["a"])(n._tileset)&&(n._tileset.dynamicScreenSpaceErrorFactor=e))}}),this.dynamicScreenSpaceErrorFactor=4;const w=drt(this),T=zit.observable();zit.defineProperty(this,"pickActive",{get:function(){return T()},set:function(e){T(e),e?n._eventHandler.setInputAction(w,BD.LEFT_CLICK):n._eventHandler.removeInputAction(BD.LEFT_CLICK)}});const C=zit.observable();zit.defineProperty(this,"pointCloudShading",{get:function(){return C()},set:function(e){C(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.attenuation=e)}}),this.pointCloudShading=!1;const E=zit.observable();zit.defineProperty(this,"geometricErrorScale",{get:function(){return E()},set:function(e){e=Number(e),isNaN(e)||(E(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.geometricErrorScale=e))}}),this.geometricErrorScale=1;const x=zit.observable();zit.defineProperty(this,"maximumAttenuation",{get:function(){return x()},set:function(e){e=Number(e),isNaN(e)||(x(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.maximumAttenuation=0===e?void 0:e))}}),this.maximumAttenuation=0;const S=zit.observable();zit.defineProperty(this,"baseResolution",{get:function(){return S()},set:function(e){e=Number(e),isNaN(e)||(S(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.baseResolution=0===e?void 0:e))}}),this.baseResolution=0;const I=zit.observable();zit.defineProperty(this,"eyeDomeLighting",{get:function(){return I()},set:function(e){I(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.eyeDomeLighting=e)}}),this.eyeDomeLighting=!1;const D=zit.observable();zit.defineProperty(this,"eyeDomeLightingStrength",{get:function(){return D()},set:function(e){e=Number(e),isNaN(e)||(D(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.eyeDomeLightingStrength=e))}}),this.eyeDomeLightingStrength=1;const P=zit.observable();zit.defineProperty(this,"eyeDomeLightingRadius",{get:function(){return P()},set:function(e){e=Number(e),isNaN(e)||(P(e),Object(r["a"])(n._tileset)&&(n._tileset.pointCloudShading.eyeDomeLightingRadius=e))}}),this.eyeDomeLightingRadius=1,this.pickActive=!1;const j=zit.observable();zit.defineProperty(this,"skipLevelOfDetail",{get:function(){return j()},set:function(e){j(e),Object(r["a"])(n._tileset)&&(n._tileset.skipLevelOfDetail=e)}}),this.skipLevelOfDetail=!0;const R=zit.observable();zit.defineProperty(this,"skipScreenSpaceErrorFactor",{get:function(){return R()},set:function(e){e=Number(e),isNaN(e)||(R(e),Object(r["a"])(n._tileset)&&(n._tileset.skipScreenSpaceErrorFactor=e))}}),this.skipScreenSpaceErrorFactor=16;const L=zit.observable();zit.defineProperty(this,"baseScreenSpaceError",{get:function(){return L()},set:function(e){e=Number(e),isNaN(e)||(L(e),Object(r["a"])(n._tileset)&&(n._tileset.baseScreenSpaceError=e))}}),this.baseScreenSpaceError=1024;const M=zit.observable();zit.defineProperty(this,"skipLevels",{get:function(){return M()},set:function(e){e=Number(e),isNaN(e)||(M(e),Object(r["a"])(n._tileset)&&(n._tileset.skipLevels=e))}}),this.skipLevels=1;const N=zit.observable();zit.defineProperty(this,"immediatelyLoadDesiredLevelOfDetail",{get:function(){return N()},set:function(e){N(e),Object(r["a"])(n._tileset)&&(n._tileset.immediatelyLoadDesiredLevelOfDetail=e)}}),this.immediatelyLoadDesiredLevelOfDetail=!1;const B=zit.observable();zit.defineProperty(this,"loadSiblings",{get:function(){return B()},set:function(e){B(e),Object(r["a"])(n._tileset)&&(n._tileset.loadSiblings=e)}}),this.loadSiblings=!1,this._style=void 0,this._shouldStyle=!1,this._definedProperties=["properties","dynamicScreenSpaceError","colorBlendMode","picking","colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","maximumScreenSpaceError","dynamicScreenSpaceErrorDensity","baseScreenSpaceError","skipScreenSpaceErrorFactor","skipLevelOfDetail","skipLevels","immediatelyLoadDesiredLevelOfDetail","loadSiblings","dynamicScreenSpaceErrorDensitySliderValue","dynamicScreenSpaceErrorFactor","pickActive","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl","pointCloudShading","geometricErrorScale","maximumAttenuation","baseResolution","eyeDomeLighting","eyeDomeLightingStrength","eyeDomeLightingRadius"],this._removePostRenderEvent=e.postRender.addEventListener((function(){n._update()})),Object(r["a"])(this._tileset)||frt(this,!0)}function wrt(e){if(!Object(r["a"])(e))return!1;if(e.featuresLength>0)return!0;const t=e.innerContents;if(Object(r["a"])(t)){const e=t.length;for(let n=0;n<e;++n)if(!wrt(t[n]))return!1;return!0}return!1}Object.defineProperties(Art.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},statisticsText:{get:function(){return this._statisticsText}},pickStatisticsText:{get:function(){return this._pickStatisticsText}},resourceCacheStatisticsText:{get:function(){return this._resourceCacheStatisticsText}},colorBlendModes:{get:function(){return brt}},editorError:{get:function(){return this._editorError}},tileset:{get:function(){return this._tileset},set:function(e){if(this._tileset=e,this._style=void 0,this.styleString="{}",this.feature=void 0,this.tile=void 0,Object(r["a"])(e)){const t=this;e.readyPromise.then((function(e){t.isDestroyed()||t._properties(e.properties)}));const n=["colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl"],i=n.length;for(let e=0;e<i;++e){const t=n[e];this[t]=this[t]}this.maximumScreenSpaceError=e.maximumScreenSpaceError,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor,this.colorBlendMode=e.colorBlendMode,this.skipLevelOfDetail=e.skipLevelOfDetail,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor,this.baseScreenSpaceError=e.baseScreenSpaceError,this.skipLevels=e.skipLevels,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail,this.loadSiblings=e.loadSiblings;const o=e.pointCloudShading;this.pointCloudShading=o.attenuation,this.geometricErrorScale=o.geometricErrorScale,this.maximumAttenuation=o.maximumAttenuation?o.maximumAttenuation:0,this.baseResolution=o.baseResolution?o.baseResolution:0,this.eyeDomeLighting=o.eyeDomeLighting,this.eyeDomeLightingStrength=o.eyeDomeLightingStrength,this.eyeDomeLightingRadius=o.eyeDomeLightingRadius,this._scene.requestRender()}else this._properties({});this._statisticsText=_rt(e,!1),this._pickStatisticsText=_rt(e,!0),this._resourceCacheStatisticsText=grt(),frt(this,!1)}},feature:{get:function(){return this._feature},set:function(e){if(this._feature===e)return;const t=this._feature;Object(r["a"])(t)&&!t.content.isDestroyed()&&(!this.colorize&&Object(r["a"])(this._style)?t.color=Object(r["a"])(this._style.color)?this._style.color.evaluateColor(t,vrt):Dm.WHITE:t.color=Ort,this._scene.requestRender()),Object(r["a"])(e)&&(Dm.clone(e.color,Ort),e.color=yrt,this._scene.requestRender()),this._feature=e}},tile:{get:function(){return this._tile},set:function(e){if(this._tile===e)return;const t=this._tile;!Object(r["a"])(t)||t.isDestroyed()||wrt(t.content)||(t.color=Ort,this._scene.requestRender()),Object(r["a"])(e)&&!wrt(e.content)&&(Dm.clone(e.color,Ort),e.color=yrt,this._scene.requestRender()),this._tile=e}}}),Art.prototype.togglePickTileset=function(){this.pickActive=!this.pickActive},Art.prototype.toggleInspector=function(){this.inspectorVisible=!this.inspectorVisible},Art.prototype.toggleTileset=function(){this.tilesetVisible=!this.tilesetVisible},Art.prototype.toggleDisplay=function(){this.displayVisible=!this.displayVisible},Art.prototype.toggleUpdate=function(){this.updateVisible=!this.updateVisible},Art.prototype.toggleLogging=function(){this.loggingVisible=!this.loggingVisible},Art.prototype.toggleStyle=function(){this.styleVisible=!this.styleVisible},Art.prototype.toggleTileDebugLabels=function(){this.tileDebugLabelsVisible=!this.tileDebugLabelsVisible},Art.prototype.toggleOptimization=function(){this.optimizationVisible=!this.optimizationVisible},Art.prototype.trimTilesCache=function(){Object(r["a"])(this._tileset)&&this._tileset.trimLoadedTiles()},Art.prototype.compileStyle=function(){const e=this._tileset;if(Object(r["a"])(e)&&this.styleString!==JSON.stringify(e.style)){this._editorError="";try{0===this.styleString.length&&(this.styleString="{}"),this._style=new ZGe(JSON.parse(this.styleString)),this._shouldStyle=!0,this._scene.requestRender()}catch(t){this._editorError=t.toString()}this.feature=this._feature,this.tile=this._tile}},Art.prototype.styleEditorKeyPress=function(e,t){if(9===t.keyCode){t.preventDefault();const e=t.target,n=e.selectionStart,i=e.selectionEnd;let o=i;const r=e.value.slice(n,i),a=r.split("\n"),s=a.length;let c;if(t.shiftKey)for(c=0;c<s;++c)" "===a[c][0]&&(" "===a[c][1]?(a[c]=a[c].substr(2),o-=2):(a[c]=a[c].substr(1),o-=1));else for(c=0;c<s;++c)a[c]=`  ${a[c]}`,o+=2;const l=a.join("\n");e.value=e.value.slice(0,n)+l+e.value.slice(i),e.selectionStart=n!==i?n:o,e.selectionEnd=o}else!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||this.compileStyle();return!0},Art.prototype._update=function(){const e=this._tileset;if(this.performance&&this._performanceDisplay.update(),Object(r["a"])(e)){if(e.isDestroyed())return this.tile=void 0,this.feature=void 0,void(this.tileset=void 0);const t=e.style;this._style!==e.style&&(this._shouldStyle?(e.style=this._style,this._shouldStyle=!1):(this._style=t,this.styleString=JSON.stringify(t.style,null,"  ")))}this.showStatistics&&(this._statisticsText=_rt(e,!1),this._pickStatisticsText=_rt(e,!0),this._resourceCacheStatisticsText=grt())},Art.prototype.isDestroyed=function(){return!1},Art.prototype.destroy=function(){this._eventHandler.destroy(),this._removePostRenderEvent();const e=this;return this._definedProperties.forEach((function(t){zit.getObservable(e,t).dispose()})),Wc(this)},Art.getStatistics=_rt;var Trt=Art;function Crt(e,t){i["a"].defined("container",e),i["a"].typeOf.object("scene",t),e=HNe(e);const n=document.createElement("div"),o=document.createElement("div");o.setAttribute("data-bind","visible: performance");const r=new Trt(t,o);this._viewModel=r,this._container=e,this._element=n;const a=document.createElement("div");a.textContent="3D Tiles Inspector",a.className="cesium-cesiumInspector-button",a.setAttribute("data-bind","click: toggleInspector"),n.appendChild(a),n.className="cesium-cesiumInspector cesium-3DTilesInspector",n.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(n);const s=document.createElement("div");this._panel=s,s.className="cesium-cesiumInspector-dropDown",n.appendChild(s);const c=Wit.createSection,l=Wit.createCheckbox,u=c(s,"Tileset","tilesetVisible","toggleTileset"),h=c(s,"Display","displayVisible","toggleDisplay"),d=c(s,"Update","updateVisible","toggleUpdate"),f=c(s,"Logging","loggingVisible","toggleLogging"),p=c(s,"Tile Debug Labels","tileDebugLabelsVisible","toggleTileDebugLabels"),m=c(s,"Style","styleVisible","toggleStyle"),_=c(s,"Optimization","optimizationVisible","toggleOptimization"),g=document.createElement("div");g.className="field-group";const b=document.createElement("label");b.className="field-label",b.appendChild(document.createTextNode("Properties: "));const y=document.createElement("div");y.setAttribute("data-bind","text: properties"),g.appendChild(b),g.appendChild(y),u.appendChild(g),u.appendChild(xrt("togglePickTileset","Pick Tileset","pickActive")),u.appendChild(xrt("trimTilesCache","Trim Tiles Cache")),u.appendChild(l("Enable Picking","picking")),h.appendChild(l("Colorize","colorize")),h.appendChild(l("Wireframe","wireframe")),h.appendChild(l("Bounding Volumes","showBoundingVolumes")),h.appendChild(l("Content Volumes","showContentBoundingVolumes")),h.appendChild(l("Request Volumes","showRequestVolumes")),h.appendChild(l("Point Cloud Shading","pointCloudShading"));const v=document.createElement("div");v.setAttribute("data-bind","visible: pointCloudShading"),v.appendChild(Ert("geometricErrorScale",0,2,.01,"Geometric Error Scale")),v.appendChild(Ert("maximumAttenuation",0,32,1,"Maximum Attenuation")),v.appendChild(Ert("baseResolution",0,1,.01,"Base Resolution")),v.appendChild(l("Eye Dome Lighting (EDL)","eyeDomeLighting")),h.appendChild(v);const O=document.createElement("div");O.setAttribute("data-bind","visible: eyeDomeLighting"),O.appendChild(Ert("eyeDomeLightingStrength",0,2,.1,"EDL Strength")),O.appendChild(Ert("eyeDomeLightingRadius",0,4,.1,"EDL Radius")),v.appendChild(O),d.appendChild(l("Freeze Frame","freezeFrame")),d.appendChild(l("Dynamic Screen Space Error","dynamicScreenSpaceError"));const A=document.createElement("div");A.appendChild(Ert("maximumScreenSpaceError",0,128,1,"Maximum Screen Space Error")),d.appendChild(A);const w=document.createElement("div");w.setAttribute("data-bind","visible: dynamicScreenSpaceError"),w.appendChild(Ert("dynamicScreenSpaceErrorDensitySliderValue",0,1,.005,"Screen Space Error Density","dynamicScreenSpaceErrorDensity")),w.appendChild(Ert("dynamicScreenSpaceErrorFactor",1,10,.1,"Screen Space Error Factor")),d.appendChild(w),f.appendChild(l("Performance","performance")),f.appendChild(o),f.appendChild(l("Statistics","showStatistics"));const T=document.createElement("div");T.className="cesium-3dTilesInspector-statistics",T.setAttribute("data-bind","html: statisticsText, visible: showStatistics"),f.appendChild(T),f.appendChild(l("Pick Statistics","showPickStatistics"));const C=document.createElement("div");C.className="cesium-3dTilesInspector-statistics",C.setAttribute("data-bind","html: pickStatisticsText, visible: showPickStatistics"),f.appendChild(C),f.appendChild(l("Resource Cache Statistics","showResourceCacheStatistics"));const E=document.createElement("div");E.className="cesium-3dTilesInspector-statistics",E.setAttribute("data-bind","html: resourceCacheStatisticsText, visible: showResourceCacheStatistics"),f.appendChild(E);const x=document.createElement("div");m.appendChild(x),x.appendChild(document.createTextNode("Color Blend Mode: "));const S=document.createElement("select");S.setAttribute("data-bind",'options: colorBlendModes, optionsText: "text", optionsValue: "value", value: colorBlendMode'),x.appendChild(S);const I=document.createElement("textarea");I.setAttribute("data-bind","textInput: styleString, event: { keydown: styleEditorKeyPress }"),x.className="cesium-cesiumInspector-styleEditor",x.appendChild(I);const D=xrt("compileStyle","Compile (Ctrl+Enter)");x.appendChild(D);const P=document.createElement("div");P.className="cesium-cesiumInspector-error",P.setAttribute("data-bind","text: editorError"),x.appendChild(P),p.appendChild(l("Show Picked Only","showOnlyPickedTileDebugLabel")),p.appendChild(l("Geometric Error","showGeometricError")),p.appendChild(l("Rendering Statistics","showRenderingStatistics")),p.appendChild(l("Memory Usage (MB)","showMemoryUsage")),p.appendChild(l("Url","showUrl")),_.appendChild(l("Skip Tile LODs","skipLevelOfDetail"));const j=document.createElement("div");j.appendChild(Ert("skipScreenSpaceErrorFactor",1,50,1,"Skip SSE Factor")),_.appendChild(j);const R=document.createElement("div");R.appendChild(Ert("baseScreenSpaceError",0,4096,1,"SSE before skipping LOD")),_.appendChild(R);const L=document.createElement("div");L.appendChild(Ert("skipLevels",0,10,1,"Min. levels to skip")),_.appendChild(L),_.appendChild(l("Load only tiles that meet the max SSE.","immediatelyLoadDesiredLevelOfDetail")),_.appendChild(l("Load siblings of visible tiles","loadSiblings")),zit.applyBindings(r,n)}function Ert(e,t,n,i,r,a){a=Object(o["a"])(a,e);const s=document.createElement("input");s.setAttribute("data-bind",`value: ${a}`),s.type="number";const c=document.createElement("input");c.type="range",c.min=t,c.max=n,c.step=i,c.setAttribute("data-bind",`valueUpdate: "input", value: ${e}`);const l=document.createElement("div");l.appendChild(c);const u=document.createElement("div");return u.className="cesium-cesiumInspector-slider",u.appendChild(document.createTextNode(r)),u.appendChild(s),u.appendChild(l),u}function xrt(e,t,n){const i=document.createElement("button");i.type="button",i.textContent=t,i.className="cesium-cesiumInspector-pickButton";let o=`click: ${e}`;return Object(r["a"])(n)&&(o+=`, css: {"cesium-cesiumInspector-pickButtonHighlight" : ${n}}`),i.setAttribute("data-bind",o),i}Object.defineProperties(Crt.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Crt.prototype.isDestroyed=function(){return!1},Crt.prototype.destroy=function(){return zit.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),Wc(this)};var Srt=Crt;function Irt(e){let t;if(Object(r["a"])(e)){t="Command Statistics";const n=e.commandsInFrustums;for(const e in n)if(n.hasOwnProperty(e)){let i,o=parseInt(e,10);if(7===o)i="1, 2 and 3";else{const e=[];for(let t=2;t>=0;t--){const n=Math.pow(2,t);o>=n&&(e.push(t+1),o-=n)}i=e.reverse().join(" and ")}t+=`<br>&nbsp;&nbsp;&nbsp;&nbsp;${n[e]} in frustum ${i}`}t+=`<br>Total: ${e.totalCommands}`}return t}function Drt(e,t,n){let i=Math.min(n,t);return i=Math.max(i,e),i}const Prt=new Yn,jrt=new g;function Rrt(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required");if(!Object(r["a"])(t))throw new a["a"]("performanceContainer is required");const n=this,i=e.canvas,o=new OP(i);this._eventHandler=o,this._scene=e,this._canvas=i,this._primitive=void 0,this._tile=void 0,this._modelMatrixPrimitive=void 0,this._performanceDisplay=void 0,this._performanceContainer=t;const s=this._scene.globe;let c;function l(e){const t=n._scene.pick({x:e.position.x,y:e.position.y});Object(r["a"])(t)&&(n.primitive=Object(r["a"])(t.collection)?t.collection:t.primitive),n._scene.requestRender(),n.pickPrimitiveActive=!1}function u(e){let t;const i=s.ellipsoid,o=n._scene.camera.getPickRay(e.position,Prt),a=s.pick(o,n._scene,jrt);if(Object(r["a"])(a)){const e=i.cartesianToCartographic(a),n=s._surface.tileProvider._tilesToRenderByTextureCount;for(let i=0;!t&&i<n.length;++i){const o=n[i];if(Object(r["a"])(o))for(let n=0;!t&&n<o.length;++n){const i=o[n];Fe.contains(i.rectangle,e)&&(t=i)}}}n.tile=t,n.pickTileActive=!1}s.depthTestAgainstTerrain=!0,this.frustums=!1,this.frustumPlanes=!1,this.performance=!1,this.shaderCacheText="",this.primitiveBoundingSphere=!1,this.primitiveReferenceFrame=!1,this.filterPrimitive=!1,this.tileBoundingSphere=!1,this.filterTile=!1,this.wireframe=!1,this.depthFrustum=1,this._numberOfFrustums=1,this.suspendUpdates=!1,this.tileCoordinates=!1,this.frustumStatisticText=!1,this.tileText="",this.hasPickedPrimitive=!1,this.hasPickedTile=!1,this.pickPrimitiveActive=!1,this.pickTileActive=!1,this.dropDownVisible=!0,this.generalVisible=!0,this.primitivesVisible=!1,this.terrainVisible=!1,this.depthFrustumText="",zit.track(this,["frustums","frustumPlanes","performance","shaderCacheText","primitiveBoundingSphere","primitiveReferenceFrame","filterPrimitive","tileBoundingSphere","filterTile","wireframe","depthFrustum","suspendUpdates","tileCoordinates","frustumStatisticText","tileText","hasPickedPrimitive","hasPickedTile","pickPrimitiveActive","pickTileActive","dropDownVisible","generalVisible","primitivesVisible","terrainVisible","depthFrustumText"]),this._toggleDropDown=Kit((function(){n.dropDownVisible=!n.dropDownVisible})),this._toggleGeneral=Kit((function(){n.generalVisible=!n.generalVisible})),this._togglePrimitives=Kit((function(){n.primitivesVisible=!n.primitivesVisible})),this._toggleTerrain=Kit((function(){n.terrainVisible=!n.terrainVisible})),this._frustumsSubscription=zit.getObservable(this,"frustums").subscribe((function(e){n._scene.debugShowFrustums=e,n._scene.requestRender()})),this._frustumPlanesSubscription=zit.getObservable(this,"frustumPlanes").subscribe((function(e){n._scene.debugShowFrustumPlanes=e,n._scene.requestRender()})),this._performanceSubscription=zit.getObservable(this,"performance").subscribe((function(e){e?n._performanceDisplay=new c2e({container:n._performanceContainer}):n._performanceContainer.innerHTML=""})),this._showPrimitiveBoundingSphere=Kit((function(){return n._primitive.debugShowBoundingVolume=n.primitiveBoundingSphere,n._scene.requestRender(),!0})),this._primitiveBoundingSphereSubscription=zit.getObservable(this,"primitiveBoundingSphere").subscribe((function(){n._showPrimitiveBoundingSphere()})),this._showPrimitiveReferenceFrame=Kit((function(){if(n.primitiveReferenceFrame){const e=n._primitive.modelMatrix;n._modelMatrixPrimitive=new Gqe({modelMatrix:e}),n._scene.primitives.add(n._modelMatrixPrimitive)}else Object(r["a"])(n._modelMatrixPrimitive)&&(n._scene.primitives.remove(n._modelMatrixPrimitive),n._modelMatrixPrimitive=void 0);return n._scene.requestRender(),!0})),this._primitiveReferenceFrameSubscription=zit.getObservable(this,"primitiveReferenceFrame").subscribe((function(){n._showPrimitiveReferenceFrame()})),this._doFilterPrimitive=Kit((function(){return n.filterPrimitive?n._scene.debugCommandFilter=function(e){return!(!Object(r["a"])(n._modelMatrixPrimitive)||e.owner!==n._modelMatrixPrimitive._primitive)||!!Object(r["a"])(n._primitive)&&(e.owner===n._primitive||e.owner===n._primitive._billboardCollection||e.owner.primitive===n._primitive)}:n._scene.debugCommandFilter=void 0,!0})),this._filterPrimitiveSubscription=zit.getObservable(this,"filterPrimitive").subscribe((function(){n._doFilterPrimitive(),n._scene.requestRender()})),this._wireframeSubscription=zit.getObservable(this,"wireframe").subscribe((function(e){s._surface.tileProvider._debug.wireframe=e,n._scene.requestRender()})),this._depthFrustumSubscription=zit.getObservable(this,"depthFrustum").subscribe((function(e){n._scene.debugShowDepthFrustum=e,n._scene.requestRender()})),this._incrementDepthFrustum=Kit((function(){const e=n.depthFrustum+1;return n.depthFrustum=Drt(1,n._numberOfFrustums,e),n._scene.requestRender(),!0})),this._decrementDepthFrustum=Kit((function(){const e=n.depthFrustum-1;return n.depthFrustum=Drt(1,n._numberOfFrustums,e),n._scene.requestRender(),!0})),this._suspendUpdatesSubscription=zit.getObservable(this,"suspendUpdates").subscribe((function(e){s._surface._debug.suspendLodUpdate=e,e||(n.filterTile=!1)})),this._showTileCoordinates=Kit((function(){return n.tileCoordinates&&!Object(r["a"])(c)?c=e.imageryLayers.addImageryProvider(new gnt({tilingScheme:e.terrainProvider.tilingScheme})):!n.tileCoordinates&&Object(r["a"])(c)&&(e.imageryLayers.remove(c),c=void 0),!0})),this._tileCoordinatesSubscription=zit.getObservable(this,"tileCoordinates").subscribe((function(){n._showTileCoordinates(),n._scene.requestRender()})),this._tileBoundingSphereSubscription=zit.getObservable(this,"tileBoundingSphere").subscribe((function(){n._showTileBoundingSphere(),n._scene.requestRender()})),this._showTileBoundingSphere=Kit((function(){return n.tileBoundingSphere?s._surface.tileProvider._debug.boundingSphereTile=n._tile:s._surface.tileProvider._debug.boundingSphereTile=void 0,n._scene.requestRender(),!0})),this._doFilterTile=Kit((function(){return n.filterTile?(n.suspendUpdates=!0,s._surface._tilesToRender=[],Object(r["a"])(n._tile)&&n._tile.renderable&&s._surface._tilesToRender.push(n._tile)):n.suspendUpdates=!1,!0})),this._filterTileSubscription=zit.getObservable(this,"filterTile").subscribe((function(){n.doFilterTile(),n._scene.requestRender()})),this._pickPrimitive=Kit((function(){n.pickPrimitiveActive=!n.pickPrimitiveActive})),this._pickPrimitiveActiveSubscription=zit.getObservable(this,"pickPrimitiveActive").subscribe((function(e){e?o.setInputAction(l,BD.LEFT_CLICK):o.removeInputAction(BD.LEFT_CLICK)})),this._pickTile=Kit((function(){n.pickTileActive=!n.pickTileActive})),this._pickTileActiveSubscription=zit.getObservable(this,"pickTileActive").subscribe((function(e){e?o.setInputAction(u,BD.LEFT_CLICK):o.removeInputAction(BD.LEFT_CLICK)})),this._removePostRenderEvent=e.postRender.addEventListener((function(){n._update()}))}Object.defineProperties(Rrt.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},toggleDropDown:{get:function(){return this._toggleDropDown}},showPrimitiveBoundingSphere:{get:function(){return this._showPrimitiveBoundingSphere}},showPrimitiveReferenceFrame:{get:function(){return this._showPrimitiveReferenceFrame}},doFilterPrimitive:{get:function(){return this._doFilterPrimitive}},incrementDepthFrustum:{get:function(){return this._incrementDepthFrustum}},decrementDepthFrustum:{get:function(){return this._decrementDepthFrustum}},showTileCoordinates:{get:function(){return this._showTileCoordinates}},showTileBoundingSphere:{get:function(){return this._showTileBoundingSphere}},doFilterTile:{get:function(){return this._doFilterTile}},toggleGeneral:{get:function(){return this._toggleGeneral}},togglePrimitives:{get:function(){return this._togglePrimitives}},toggleTerrain:{get:function(){return this._toggleTerrain}},pickPrimitive:{get:function(){return this._pickPrimitive}},pickTile:{get:function(){return this._pickTile}},selectParent:{get:function(){const e=this;return Kit((function(){e.tile=e.tile.parent}))}},selectNW:{get:function(){const e=this;return Kit((function(){e.tile=e.tile.northwestChild}))}},selectNE:{get:function(){const e=this;return Kit((function(){e.tile=e.tile.northeastChild}))}},selectSW:{get:function(){const e=this;return Kit((function(){e.tile=e.tile.southwestChild}))}},selectSE:{get:function(){const e=this;return Kit((function(){e.tile=e.tile.southeastChild}))}},primitive:{get:function(){return this._primitive},set:function(e){const t=this._primitive;e!==t&&(this.hasPickedPrimitive=!0,Object(r["a"])(t)&&(t.debugShowBoundingVolume=!1),this._scene.debugCommandFilter=void 0,Object(r["a"])(this._modelMatrixPrimitive)&&(this._scene.primitives.remove(this._modelMatrixPrimitive),this._modelMatrixPrimitive=void 0),this._primitive=e,e.show=!1,setTimeout((function(){e.show=!0}),50),this.showPrimitiveBoundingSphere(),this.showPrimitiveReferenceFrame(),this.doFilterPrimitive())}},tile:{get:function(){return this._tile},set:function(e){if(Object(r["a"])(e)){this.hasPickedTile=!0;const t=this._tile;if(e!==t){this.tileText=`L: ${e.level} X: ${e.x} Y: ${e.y}`,this.tileText+=`<br>SW corner: ${e.rectangle.west}, ${e.rectangle.south}`,this.tileText+=`<br>NE corner: ${e.rectangle.east}, ${e.rectangle.north}`;const t=e.data;Object(r["a"])(t)&&Object(r["a"])(t.tileBoundingRegion)?this.tileText+=`<br>Min: ${t.tileBoundingRegion.minimumHeight} Max: ${t.tileBoundingRegion.maximumHeight}`:this.tileText+="<br>(Tile is not loaded)"}this._tile=e,this.showTileBoundingSphere(),this.doFilterTile()}else this.hasPickedTile=!1,this._tile=void 0}}}),Rrt.prototype._update=function(){this.frustums&&(this.frustumStatisticText=Irt(this._scene.debugFrustumStatistics));const e=this._scene.numberOfFrustums;this._numberOfFrustums=e,this.depthFrustum=Drt(1,e,this.depthFrustum),this.depthFrustumText=`${this.depthFrustum} of ${e}`,this.performance&&this._performanceDisplay.update(),this.primitiveReferenceFrame&&(this._modelMatrixPrimitive.modelMatrix=this._primitive.modelMatrix),this.shaderCacheText=`Cached shaders: ${this._scene.context.shaderCache.numberOfShaders}`},Rrt.prototype.isDestroyed=function(){return!1},Rrt.prototype.destroy=function(){return this._eventHandler.destroy(),this._removePostRenderEvent(),this._frustumsSubscription.dispose(),this._frustumPlanesSubscription.dispose(),this._performanceSubscription.dispose(),this._primitiveBoundingSphereSubscription.dispose(),this._primitiveReferenceFrameSubscription.dispose(),this._filterPrimitiveSubscription.dispose(),this._wireframeSubscription.dispose(),this._depthFrustumSubscription.dispose(),this._suspendUpdatesSubscription.dispose(),this._tileCoordinatesSubscription.dispose(),this._tileBoundingSphereSubscription.dispose(),this._filterTileSubscription.dispose(),this._pickPrimitiveActiveSubscription.dispose(),this._pickTileActiveSubscription.dispose(),Wc(this)};var Lrt=Rrt;function Mrt(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("scene is required.");e=HNe(e);const n=document.createElement("div"),i=new Lrt(t,n);this._viewModel=i,this._container=e;const o=document.createElement("div");this._element=o;const s=document.createElement("div");s.textContent="Cesium Inspector",s.className="cesium-cesiumInspector-button",s.setAttribute("data-bind","click: toggleDropDown"),o.appendChild(s),o.className="cesium-cesiumInspector",o.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : dropDownVisible, "cesium-cesiumInspector-hidden" : !dropDownVisible }'),e.appendChild(this._element);const c=document.createElement("div");this._panel=c,c.className="cesium-cesiumInspector-dropDown",o.appendChild(c);const l=Wit.createSection,u=Wit.createCheckbox,h=l(c,"General","generalVisible","toggleGeneral"),d=u("Show Frustums","frustums"),f=document.createElement("div");f.className="cesium-cesiumInspector-frustumStatistics",f.setAttribute("data-bind","visible: frustums, html: frustumStatisticText"),d.appendChild(f),h.appendChild(d),h.appendChild(u("Show Frustum Planes","frustumPlanes")),h.appendChild(u("Performance Display","performance")),n.className="cesium-cesiumInspector-performanceDisplay",h.appendChild(n);const p=document.createElement("div");p.className="cesium-cesiumInspector-shaderCache",p.setAttribute("data-bind","html: shaderCacheText"),h.appendChild(p);const m=document.createElement("div");h.appendChild(m);const _=document.createElement("span");_.setAttribute("data-bind",'html: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Frustum:"'),m.appendChild(_);const g=document.createElement("span");g.setAttribute("data-bind","text: depthFrustumText"),m.appendChild(g);const b=document.createElement("input");b.type="button",b.value="-",b.className="cesium-cesiumInspector-pickButton",b.setAttribute("data-bind","click: decrementDepthFrustum"),m.appendChild(b);const y=document.createElement("input");y.type="button",y.value="+",y.className="cesium-cesiumInspector-pickButton",y.setAttribute("data-bind","click: incrementDepthFrustum"),m.appendChild(y);const v=l(c,"Primitives","primitivesVisible","togglePrimitives"),O=document.createElement("div");O.className="cesium-cesiumInspector-pickSection",v.appendChild(O);const A=document.createElement("input");A.type="button",A.value="Pick a primitive",A.className="cesium-cesiumInspector-pickButton",A.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickPrimitiveActive}, click: pickPrimitive');let w=document.createElement("div");w.className="cesium-cesiumInspector-center",w.appendChild(A),O.appendChild(w),O.appendChild(u("Show bounding sphere","primitiveBoundingSphere","hasPickedPrimitive")),O.appendChild(u("Show reference frame","primitiveReferenceFrame","hasPickedPrimitive")),this._primitiveOnly=u("Show only selected","filterPrimitive","hasPickedPrimitive"),O.appendChild(this._primitiveOnly);const T=l(c,"Terrain","terrainVisible","toggleTerrain"),C=document.createElement("div");C.className="cesium-cesiumInspector-pickSection",T.appendChild(C);const E=document.createElement("input");E.type="button",E.value="Pick a tile",E.className="cesium-cesiumInspector-pickButton",E.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickTileActive}, click: pickTile'),w=document.createElement("div"),w.appendChild(E),w.className="cesium-cesiumInspector-center",C.appendChild(w);const x=document.createElement("div");C.appendChild(x);const S=document.createElement("input");S.type="button",S.value="Parent",S.className="cesium-cesiumInspector-pickButton",S.setAttribute("data-bind","click: selectParent");const I=document.createElement("input");I.type="button",I.value="NW",I.className="cesium-cesiumInspector-pickButton",I.setAttribute("data-bind","click: selectNW");const D=document.createElement("input");D.type="button",D.value="NE",D.className="cesium-cesiumInspector-pickButton",D.setAttribute("data-bind","click: selectNE");const P=document.createElement("input");P.type="button",P.value="SW",P.className="cesium-cesiumInspector-pickButton",P.setAttribute("data-bind","click: selectSW");const j=document.createElement("input");j.type="button",j.value="SE",j.className="cesium-cesiumInspector-pickButton",j.setAttribute("data-bind","click: selectSE");const R=document.createElement("div");R.className="cesium-cesiumInspector-tileText",x.className="cesium-cesiumInspector-frustumStatistics",x.appendChild(R),x.setAttribute("data-bind","visible: hasPickedTile"),R.setAttribute("data-bind","html: tileText");const L=document.createElement("div");L.className="cesium-cesiumInspector-relativeText",L.textContent="Select relative:",x.appendChild(L);const M=document.createElement("table"),N=document.createElement("tr"),B=document.createElement("tr"),F=document.createElement("td");F.appendChild(S);const z=document.createElement("td");z.appendChild(I);const k=document.createElement("td");k.appendChild(D),N.appendChild(F),N.appendChild(z),N.appendChild(k);const U=document.createElement("td"),V=document.createElement("td");V.appendChild(P);const H=document.createElement("td");H.appendChild(j),B.appendChild(U),B.appendChild(V),B.appendChild(H),M.appendChild(N),M.appendChild(B),x.appendChild(M),C.appendChild(u("Show bounding volume","tileBoundingSphere","hasPickedTile")),C.appendChild(u("Show only selected","filterTile","hasPickedTile")),T.appendChild(u("Wireframe","wireframe")),T.appendChild(u("Suspend LOD update","suspendUpdates")),T.appendChild(u("Show tile coordinates","tileCoordinates")),zit.applyBindings(i,this._element)}Object.defineProperties(Mrt.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Mrt.prototype.isDestroyed=function(){return!1},Mrt.prototype.destroy=function(){return zit.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),Wc(this)};var Nrt=Mrt;function Brt(e){return Bt(`Assets/Textures/SkyBox/tycho2t3_80_${e}.jpg`)}function Frt(e){e._renderLoopRunning=!0;let t=0;function n(i){if(!e.isDestroyed())if(e._useDefaultRenderLoop)try{const o=e._targetFrameRate;if(Object(r["a"])(o)){const r=1e3/o,a=i-t;a>r&&(e.resize(),e.render(),t=i-a%r),requestAnimationFrame(n)}else e.resize(),e.render(),requestAnimationFrame(n)}catch(o){if(e._useDefaultRenderLoop=!1,e._renderLoopRunning=!1,e._showRenderLoopErrors){const t="An error occurred while rendering.  Rendering has stopped.";e.showErrorPanel(t,void 0,o)}}else e._renderLoopRunning=!1}requestAnimationFrame(n)}function zrt(e){let t=e._useBrowserRecommendedResolution?1:window.devicePixelRatio;return t*=e._resolutionScale,Object(r["a"])(e._scene)&&(e._scene.pixelRatio=t),t}function krt(e){const t=e._canvas;let n=t.clientWidth,i=t.clientHeight;const o=zrt(e);e._canvasClientWidth=n,e._canvasClientHeight=i,n*=o,i*=o,t.width=n,t.height=i,e._canRender=0!==n&&0!==i,e._lastDevicePixelRatio=window.devicePixelRatio}function Urt(e){const t=e._canvas,n=t.width,i=t.height;if(0!==n&&0!==i){const t=e._scene.camera.frustum;Object(r["a"])(t.aspectRatio)?t.aspectRatio=n/i:(t.top=t.right*(i/n),t.bottom=-t.top)}}function Vrt(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e),t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=document.createElement("div");n.className="cesium-widget",e.appendChild(n);const i=document.createElement("canvas"),s=Or.supportsImageRenderingPixelated();function c(){i!==i.ownerDocument.activeElement&&i.ownerDocument.activeElement.blur()}this._supportsImageRenderingPixelated=s,s&&(i.style.imageRendering=Or.imageRenderingValue()),i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1};const l=Object(o["a"])(t.blurActiveElementOnCanvasFocus,!0);l&&(i.addEventListener("mousedown",c),i.addEventListener("pointerdown",c)),n.appendChild(i);const u=document.createElement("div");u.className="cesium-widget-credits";const h=Object(r["a"])(t.creditContainer)?HNe(t.creditContainer):n;h.appendChild(u);const d=Object(r["a"])(t.creditViewport)?HNe(t.creditViewport):n,f=Object(o["a"])(t.showRenderLoopErrors,!0),p=Object(o["a"])(t.useBrowserRecommendedResolution,!0);this._element=n,this._container=e,this._canvas=i,this._canvasClientWidth=0,this._canvasClientHeight=0,this._lastDevicePixelRatio=0,this._creditViewport=d,this._creditContainer=h,this._innerCreditContainer=u,this._canRender=!1,this._renderLoopRunning=!1,this._showRenderLoopErrors=f,this._resolutionScale=1,this._useBrowserRecommendedResolution=p,this._forceResize=!1,this._clock=Object(r["a"])(t.clock)?t.clock:new vm,krt(this);try{const e=new Htt({canvas:i,contextOptions:t.contextOptions,creditContainer:u,creditViewport:d,mapProjection:t.mapProjection,orderIndependentTranslucency:t.orderIndependentTranslucency,scene3DOnly:Object(o["a"])(t.scene3DOnly,!1),shadows:t.shadows,mapMode2D:t.mapMode2D,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});this._scene=e,e.camera.constrainedAxis=g.UNIT_Z,zrt(this),Urt(this);const n=Object(o["a"])(e.mapProjection.ellipsoid,k.WGS84);let a=t.globe;Object(r["a"])(a)||(a=new ZJe(n)),!1!==a&&(e.globe=a,e.globe.shadows=Object(o["a"])(t.terrainShadows,DH.RECEIVE_ONLY));let s=t.skyBox;Object(r["a"])(s)||(s=new ent({sources:{positiveX:Brt("px"),negativeX:Brt("mx"),positiveY:Brt("py"),negativeY:Brt("my"),positiveZ:Brt("pz"),negativeZ:Brt("mz")}})),!1!==s&&(e.skyBox=s,e.sun=new fnt,e.moon=new u1e);let c=t.skyAtmosphere;Object(r["a"])(c)||(c=new $tt(n)),!1!==c&&(e.skyAtmosphere=c);let l=!1!==t.globe&&t.imageryProvider;Object(r["a"])(l)||(l=yit()),!1!==l&&e.imageryLayers.addImageryProvider(l),Object(r["a"])(t.terrainProvider)&&!1!==t.globe&&(e.terrainProvider=t.terrainProvider),this._screenSpaceEventHandler=new OP(i),Object(r["a"])(t.sceneMode)&&(t.sceneMode===SH.SCENE2D&&this._scene.morphTo2D(0),t.sceneMode===SH.COLUMBUS_VIEW&&this._scene.morphToColumbusView(0)),this._useDefaultRenderLoop=void 0,this.useDefaultRenderLoop=Object(o["a"])(t.useDefaultRenderLoop,!0),this._targetFrameRate=void 0,this.targetFrameRate=t.targetFrameRate;const h=this;this._onRenderError=function(e,t){if(h._useDefaultRenderLoop=!1,h._renderLoopRunning=!1,h._showRenderLoopErrors){const e="An error occurred while rendering.  Rendering has stopped.";h.showErrorPanel(e,void 0,t)}},e.renderError.addEventListener(this._onRenderError)}catch(m){if(f){const e="Error constructing CesiumWidget.",t='Visit <a href="http://get.webgl.org">http://get.webgl.org</a> to verify that your web browser and hardware support WebGL.  Consider trying a different web browser or updating your video drivers.  Detailed error information is below:';this.showErrorPanel(e,t,m)}throw m}}Object.defineProperties(Vrt.prototype,{container:{get:function(){return this._container}},canvas:{get:function(){return this._canvas}},creditContainer:{get:function(){return this._creditContainer}},creditViewport:{get:function(){return this._creditViewport}},scene:{get:function(){return this._scene}},imageryLayers:{get:function(){return this._scene.imageryLayers}},terrainProvider:{get:function(){return this._scene.terrainProvider},set:function(e){this._scene.terrainProvider=e}},camera:{get:function(){return this._scene.camera}},clock:{get:function(){return this._clock}},screenSpaceEventHandler:{get:function(){return this._screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._targetFrameRate},set:function(e){if(e<=0)throw new a["a"]("targetFrameRate must be greater than 0, or undefined.");this._targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._useDefaultRenderLoop},set:function(e){this._useDefaultRenderLoop!==e&&(this._useDefaultRenderLoop=e,e&&!this._renderLoopRunning&&Frt(this))}},resolutionScale:{get:function(){return this._resolutionScale},set:function(e){if(e<=0)throw new a["a"]("resolutionScale must be greater than 0.");this._resolutionScale!==e&&(this._resolutionScale=e,this._forceResize=!0)}},useBrowserRecommendedResolution:{get:function(){return this._useBrowserRecommendedResolution},set:function(e){this._useBrowserRecommendedResolution!==e&&(this._useBrowserRecommendedResolution=e,this._forceResize=!0)}}}),Vrt.prototype.showErrorPanel=function(e,t,n){const i=this._element,o=document.createElement("div");o.className="cesium-widget-errorPanel";const a=document.createElement("div");a.className="cesium-widget-errorPanel-content",o.appendChild(a);const s=document.createElement("div");s.className="cesium-widget-errorPanel-header",s.appendChild(document.createTextNode(e)),a.appendChild(s);const c=document.createElement("div");function l(){c.style.maxHeight=`${Math.max(Math.round(.9*i.clientHeight-100),30)}px`}c.className="cesium-widget-errorPanel-scroll",a.appendChild(c),l(),Object(r["a"])(window.addEventListener)&&window.addEventListener("resize",l,!1);const u=Object(r["a"])(t),h=Object(r["a"])(n);if(u||h){const i=document.createElement("div");if(i.className="cesium-widget-errorPanel-message",c.appendChild(i),h){let i=Jl(n);u||("string"===typeof n&&(n=new Error(n)),t=Jl({name:n.name,message:n.message}),i=n.stack),"undefined"!==typeof console&&console.error(`${e}\n${t}\n${i}`);const o=document.createElement("div");o.className="cesium-widget-errorPanel-message-details collapsed";const r=document.createElement("span");r.className="cesium-widget-errorPanel-more-details",r.appendChild(document.createTextNode("See more...")),o.appendChild(r),o.onclick=function(e){o.removeChild(r),o.appendChild(document.createTextNode(i)),o.className="cesium-widget-errorPanel-message-details",a.className="cesium-widget-errorPanel-content expanded",o.onclick=void 0},c.appendChild(o)}i.innerHTML=`<p>${t}</p>`}const d=document.createElement("div");d.className="cesium-widget-errorPanel-buttonPanel",a.appendChild(d);const f=document.createElement("button");f.setAttribute("type","button"),f.className="cesium-button",f.appendChild(document.createTextNode("OK")),f.onclick=function(){Object(r["a"])(l)&&Object(r["a"])(window.removeEventListener)&&window.removeEventListener("resize",l,!1),i.removeChild(o)},d.appendChild(f),i.appendChild(o)},Vrt.prototype.isDestroyed=function(){return!1},Vrt.prototype.destroy=function(){Object(r["a"])(this._scene)&&(this._scene.renderError.removeEventListener(this._onRenderError),this._scene=this._scene.destroy()),this._container.removeChild(this._element),this._creditContainer.removeChild(this._innerCreditContainer),Wc(this)},Vrt.prototype.resize=function(){const e=this._canvas;(this._forceResize||this._canvasClientWidth!==e.clientWidth||this._canvasClientHeight!==e.clientHeight||this._lastDevicePixelRatio!==window.devicePixelRatio)&&(this._forceResize=!1,krt(this),Urt(this),this._scene.requestRender())},Vrt.prototype.render=function(){if(this._canRender){this._scene.initializeFrame();const e=this._clock.tick();this._scene.render(e)}else this._clock.tick()};var Hrt=Vrt;function Grt(e,t){Object(r["a"])(t)||(t=document.body),t=HNe(t);const n=this,i=zit.observable(Mo.fullscreen),a=zit.observable(Mo.enabled),s=t.ownerDocument;this.isFullscreen=void 0,zit.defineProperty(this,"isFullscreen",{get:function(){return i()}}),this.isFullscreenEnabled=void 0,zit.defineProperty(this,"isFullscreenEnabled",{get:function(){return a()},set:function(e){a(e&&Mo.enabled)}}),this.tooltip=void 0,zit.defineProperty(this,"tooltip",(function(){return this.isFullscreenEnabled?i()?"Exit full screen":"Full screen":"Full screen unavailable"})),this._command=Kit((function(){Mo.fullscreen?Mo.exitFullscreen():Mo.requestFullscreen(n._fullscreenElement)}),zit.getObservable(this,"isFullscreenEnabled")),this._fullscreenElement=Object(o["a"])(HNe(e),s.body),this._callback=function(){i(Mo.fullscreen)},s.addEventListener(Mo.changeEventName,this._callback)}Object.defineProperties(Grt.prototype,{fullscreenElement:{get:function(){return this._fullscreenElement},set:function(e){if(!(e instanceof Element))throw new a["a"]("value must be a valid Element.");this._fullscreenElement=e}},command:{get:function(){return this._command}}}),Grt.prototype.isDestroyed=function(){return!1},Grt.prototype.destroy=function(){document.removeEventListener(Mo.changeEventName,this._callback),Wc(this)};var Wrt=Grt;const qrt="M 83.96875 17.5625 L 83.96875 17.59375 L 76.65625 24.875 L 97.09375 24.96875 L 76.09375 45.96875 L 81.9375 51.8125 L 102.78125 30.9375 L 102.875 51.15625 L 110.15625 43.875 L 110.1875 17.59375 L 83.96875 17.5625 z M 44.125 17.59375 L 17.90625 17.625 L 17.9375 43.90625 L 25.21875 51.1875 L 25.3125 30.96875 L 46.15625 51.8125 L 52 45.96875 L 31 25 L 51.4375 24.90625 L 44.125 17.59375 z M 46.0625 76.03125 L 25.1875 96.875 L 25.09375 76.65625 L 17.8125 83.9375 L 17.8125 110.21875 L 44 110.25 L 51.3125 102.9375 L 30.90625 102.84375 L 51.875 81.875 L 46.0625 76.03125 z M 82 76.15625 L 76.15625 82 L 97.15625 103 L 76.71875 103.0625 L 84.03125 110.375 L 110.25 110.34375 L 110.21875 84.0625 L 102.9375 76.8125 L 102.84375 97 L 82 76.15625 z",Yrt="M 104.34375 17.5625 L 83.5 38.4375 L 83.40625 18.21875 L 76.125 25.5 L 76.09375 51.78125 L 102.3125 51.8125 L 102.3125 51.78125 L 109.625 44.5 L 89.1875 44.40625 L 110.1875 23.40625 L 104.34375 17.5625 z M 23.75 17.59375 L 17.90625 23.4375 L 38.90625 44.4375 L 18.5 44.53125 L 25.78125 51.8125 L 52 51.78125 L 51.96875 25.53125 L 44.6875 18.25 L 44.625 38.46875 L 23.75 17.59375 z M 25.6875 76.03125 L 18.375 83.3125 L 38.78125 83.40625 L 17.8125 104.40625 L 23.625 110.25 L 44.5 89.375 L 44.59375 109.59375 L 51.875 102.3125 L 51.875 76.0625 L 25.6875 76.03125 z M 102.375 76.15625 L 76.15625 76.1875 L 76.1875 102.4375 L 83.46875 109.71875 L 83.5625 89.53125 L 104.40625 110.375 L 110.25 104.53125 L 89.25 83.53125 L 109.6875 83.46875 L 102.375 76.15625 z";function Xrt(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e);const n=new Wrt(t,e);n._exitFullScreenPath=Yrt,n._enterFullScreenPath=qrt;const i=document.createElement("button");i.type="button",i.className="cesium-button cesium-fullscreenButton",i.setAttribute("data-bind","attr: { title: tooltip },click: command,enable: isFullscreenEnabled,cesiumSvgPath: { path: isFullscreen ? _exitFullScreenPath : _enterFullScreenPath, width: 128, height: 128 }"),e.appendChild(i),zit.applyBindings(n,i),this._container=e,this._viewModel=n,this._element=i}Object.defineProperties(Xrt.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Xrt.prototype.isDestroyed=function(){return!1},Xrt.prototype.destroy=function(){return this._viewModel.destroy(),zit.cleanNode(this._element),this._container.removeChild(this._element),Wc(this)};var Krt=Xrt;const $rt=1e3;function Jrt(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.scene))throw new a["a"]("options.scene is required.");Object(r["a"])(e.geocoderServices)?this._geocoderServices=e.geocoderServices:this._geocoderServices=[new ch,new YC({scene:e.scene})],this._viewContainer=e.container,this._scene=e.scene,this._flightDuration=e.flightDuration,this._searchText="",this._isSearchInProgress=!1,this._geocodePromise=void 0,this._complete=new dn["a"],this._suggestions=[],this._selectedSuggestion=void 0,this._showSuggestions=!0,this._handleArrowDown=Zrt,this._handleArrowUp=Qrt;const t=this;this._suggestionsVisible=zit.pureComputed((function(){const e=zit.getObservable(t,"_suggestions"),n=e().length>0,i=zit.getObservable(t,"_showSuggestions")();return n&&i})),this._searchCommand=Kit((function(e){if(e=Object(o["a"])(e,gA.SEARCH),t._focusTextbox=!1,Object(r["a"])(t._selectedSuggestion))return t.activateSuggestion(t._selectedSuggestion),!1;t.hideSuggestions(),t.isSearchInProgress?rat(t):iat(t,t._geocoderServices,e)})),this.deselectSuggestion=function(){t._selectedSuggestion=void 0},this.handleKeyDown=function(e,t){const n="ArrowDown"===t.key||"Down"===t.key||40===t.keyCode,i="ArrowUp"===t.key||"Up"===t.key||38===t.keyCode;return(n||i)&&t.preventDefault(),!0},this.handleKeyUp=function(e,n){const i="ArrowDown"===n.key||"Down"===n.key||40===n.keyCode,o="ArrowUp"===n.key||"Up"===n.key||38===n.keyCode,r="Enter"===n.key||13===n.keyCode;return o?Qrt(t):i?Zrt(t):r&&t._searchCommand(),!0},this.activateSuggestion=function(e){t.hideSuggestions(),t._searchText=e.displayName;const n=e.destination;sat(t),t.destinationFound(t,n)},this.hideSuggestions=function(){t._showSuggestions=!1,t._selectedSuggestion=void 0},this.showSuggestions=function(){t._showSuggestions=!0},this.handleMouseover=function(e,n){e!==t._selectedSuggestion&&(t._selectedSuggestion=e)},this.keepExpanded=!1,this.autoComplete=Object(o["a"])(e.autocomplete,!0),this.destinationFound=Object(o["a"])(e.destinationFound,Jrt.flyToDestination),this._focusTextbox=!1,zit.track(this,["_searchText","_isSearchInProgress","keepExpanded","_suggestions","_selectedSuggestion","_showSuggestions","_focusTextbox"]);const n=zit.getObservable(this,"_searchText");n.extend({rateLimit:{timeout:500}}),this._suggestionSubscription=n.subscribe((function(){Jrt._updateSearchSuggestions(t)})),this.isSearchInProgress=void 0,zit.defineProperty(this,"isSearchInProgress",{get:function(){return this._isSearchInProgress}}),this.searchText=void 0,zit.defineProperty(this,"searchText",{get:function(){return this.isSearchInProgress?"Searching...":this._searchText},set:function(e){if("string"!==typeof e)throw new a["a"]("value must be a valid string.");this._searchText=e}}),this.flightDuration=void 0,zit.defineProperty(this,"flightDuration",{get:function(){return this._flightDuration},set:function(e){if(Object(r["a"])(e)&&e<0)throw new a["a"]("value must be positive.");this._flightDuration=e}})}function Qrt(e){if(0===e._suggestions.length)return;const t=e._suggestions.indexOf(e._selectedSuggestion);if(-1===t||0===t)return void(e._selectedSuggestion=void 0);const n=t-1;e._selectedSuggestion=e._suggestions[n],Jrt._adjustSuggestionsScroll(e,n)}function Zrt(e){if(0===e._suggestions.length)return;const t=e._suggestions.length,n=e._suggestions.indexOf(e._selectedSuggestion),i=(n+1)%t;e._selectedSuggestion=e._suggestions[i],Jrt._adjustSuggestionsScroll(e,i)}function eat(e,t){const n=Object(r["a"])(t)?t.availability:void 0;return Object(r["a"])(n)?NM(t,[e]).then((function(t){return e=t[0],e.height+=$rt,e})):(e.height+=$rt,Promise.resolve(e))}function tat(e,t){const n=e._scene,i=n.mapProjection,o=i.ellipsoid,a=n.camera,c=n.terrainProvider;let l,u=t;return t instanceof Fe?s["a"].equalsEpsilon(t.south,t.north,s["a"].EPSILON7)&&s["a"].equalsEpsilon(t.east,t.west,s["a"].EPSILON7)?t=Fe.center(t):l=eit(t,n):t=o.cartesianToCartographic(t),Object(r["a"])(l)||(l=eat(t,c)),l.then((function(e){u=o.cartographicToCartesian(e)})).finally((function(){a.flyTo({destination:u,complete:function(){e._complete.raiseEvent()},duration:e._flightDuration,endTransform:Me.IDENTITY})}))}function nat(e,t,n,i){return e.then((function(e){if(Object(r["a"])(e)&&"fulfilled"===e.state&&e.value.length>0)return e;const o=t.geocode(n,i).then((function(e){return{state:"fulfilled",value:e}})).catch((function(e){return{state:"rejected",reason:e}}));return o}))}function iat(e,t,n){const i=e._searchText;if(aat(i))return void e.showSuggestions();e._isSearchInProgress=!0;let o=Promise.resolve();for(let r=0;r<t.length;r++)o=nat(o,t[r],i,n);e._geocodePromise=o,o.then((function(t){if(o.cancel)return;e._isSearchInProgress=!1;const n=t.value;if("fulfilled"===t.state&&Object(r["a"])(n)&&n.length>0)return e._searchText=n[0].displayName,void e.destinationFound(e,n[0].destination);e._searchText=`${i} (not found)`}))}function oat(e,t){const n=HNe(e._viewContainer),i=n.getElementsByClassName("search-results")[0],o=n.getElementsByTagName("li"),r=o[t];if(0===t)return void(i.scrollTop=0);const a=r.offsetTop;a+r.clientHeight>i.clientHeight?i.scrollTop=a+r.clientHeight:a<i.scrollTop&&(i.scrollTop=a)}function rat(e){e._isSearchInProgress=!1,Object(r["a"])(e._geocodePromise)&&(e._geocodePromise.cancel=!0,e._geocodePromise=void 0)}function aat(e){return/^\s*$/.test(e)}function sat(e){zit.getObservable(e,"_suggestions").removeAll()}function cat(e){if(!e.autoComplete)return;const t=e._searchText;if(sat(e),aat(t))return;let n=Promise.resolve([]);return e._geocoderServices.forEach((function(e){n=n.then((function(n){return n.length>=5?n:e.geocode(t,gA.AUTOCOMPLETE).then((function(e){return n=n.concat(e),n}))}))})),n.then((function(t){const n=e._suggestions;for(let e=0;e<t.length;e++)n.push(t[e])}))}Object.defineProperties(Jrt.prototype,{complete:{get:function(){return this._complete}},scene:{get:function(){return this._scene}},search:{get:function(){return this._searchCommand}},selectedSuggestion:{get:function(){return this._selectedSuggestion}},suggestions:{get:function(){return this._suggestions}}}),Jrt.prototype.destroy=function(){this._suggestionSubscription.dispose()},Jrt.flyToDestination=tat,Jrt._updateSearchSuggestions=cat,Jrt._adjustSuggestionsScroll=oat;var lat=Jrt;const uat="M29.772,26.433l-7.126-7.126c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127L29.772,26.433zM7.203,13.885c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486c-0.007,3.58-2.905,6.476-6.484,6.484C10.106,20.361,7.209,17.465,7.203,13.885z",hat="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z";function dat(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.container))throw new a["a"]("options.container is required.");if(!Object(r["a"])(e.scene))throw new a["a"]("options.scene is required.");const t=HNe(e.container),n=new lat(e);n._startSearchPath=uat,n._stopSearchPath=hat;const i=document.createElement("form");i.setAttribute("data-bind","submit: search");const o=document.createElement("input");o.type="search",o.className="cesium-geocoder-input",o.setAttribute("placeholder","Enter an address or landmark..."),o.setAttribute("data-bind",'textInput: searchText,disable: isSearchInProgress,event: { keyup: handleKeyUp, keydown: handleKeyDown, mouseover: deselectSuggestion },css: { "cesium-geocoder-input-wide" : keepExpanded || searchText.length > 0 },hasFocus: _focusTextbox'),this._onTextBoxFocus=function(){setTimeout((function(){o.select()}),0)},o.addEventListener("focus",this._onTextBoxFocus,!1),i.appendChild(o),this._textBox=o;const s=document.createElement("span");s.className="cesium-geocoder-searchButton",s.setAttribute("data-bind","click: search,cesiumSvgPath: { path: isSearchInProgress ? _stopSearchPath : _startSearchPath, width: 32, height: 32 }"),i.appendChild(s),t.appendChild(i);const c=document.createElement("div");c.className="search-results",c.setAttribute("data-bind","visible: _suggestionsVisible");const l=document.createElement("ul");l.setAttribute("data-bind","foreach: _suggestions");const u=document.createElement("li");l.appendChild(u),u.setAttribute("data-bind","text: $data.displayName, click: $parent.activateSuggestion, event: { mouseover: $parent.handleMouseover}, css: { active: $data === $parent._selectedSuggestion }"),c.appendChild(l),t.appendChild(c),zit.applyBindings(n,i),zit.applyBindings(n,c),this._container=t,this._searchSuggestionsContainer=c,this._viewModel=n,this._form=i,this._onInputBegin=function(e){let i=e.target;"function"===typeof e.composedPath&&(i=e.composedPath()[0]),t.contains(i)||(n._focusTextbox=!1,n.hideSuggestions())},this._onInputEnd=function(e){n._focusTextbox=!0,n.showSuggestions()},Or.supportsPointerEvents()?(document.addEventListener("pointerdown",this._onInputBegin,!0),t.addEventListener("pointerup",this._onInputEnd,!0),t.addEventListener("pointercancel",this._onInputEnd,!0)):(document.addEventListener("mousedown",this._onInputBegin,!0),t.addEventListener("mouseup",this._onInputEnd,!0),document.addEventListener("touchstart",this._onInputBegin,!0),t.addEventListener("touchend",this._onInputEnd,!0),t.addEventListener("touchcancel",this._onInputEnd,!0))}Object.defineProperties(dat.prototype,{container:{get:function(){return this._container}},searchSuggestionsContainer:{get:function(){return this._searchSuggestionsContainer}},viewModel:{get:function(){return this._viewModel}}}),dat.prototype.isDestroyed=function(){return!1},dat.prototype.destroy=function(){const e=this._container;return Or.supportsPointerEvents()?(document.removeEventListener("pointerdown",this._onInputBegin,!0),e.removeEventListener("pointerup",this._onInputEnd,!0)):(document.removeEventListener("mousedown",this._onInputBegin,!0),e.removeEventListener("mouseup",this._onInputEnd,!0),document.removeEventListener("touchstart",this._onInputBegin,!0),e.removeEventListener("touchend",this._onInputEnd,!0)),this._viewModel.destroy(),zit.cleanNode(this._form),zit.cleanNode(this._searchSuggestionsContainer),e.removeChild(this._form),e.removeChild(this._searchSuggestionsContainer),this._textBox.removeEventListener("focus",this._onTextBoxFocus,!1),Wc(this)};var fat=dat;function pat(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this._scene=e,this._duration=t;const n=this;this._command=Kit((function(){n._scene.camera.flyHome(n._duration)})),this.tooltip="View Home",zit.track(this,["tooltip"])}Object.defineProperties(pat.prototype,{scene:{get:function(){return this._scene}},command:{get:function(){return this._command}},duration:{get:function(){return this._duration},set:function(e){if(Object(r["a"])(e)&&e<0)throw new a["a"]("value must be positive.");this._duration=e}}});var mat=pat;function _at(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e);const i=new mat(t,n);i._svgPath="M14,4l-10,8.75h20l-4.25-3.7188v-4.6562h-2.812v2.1875l-2.938-2.5625zm-7.0938,9.906v10.094h14.094v-10.094h-14.094zm2.1876,2.313h3.3122v4.25h-3.3122v-4.25zm5.8442,1.281h3.406v6.438h-3.406v-6.438z";const o=document.createElement("button");o.type="button",o.className="cesium-button cesium-toolbar-button cesium-home-button",o.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 28, height: 28 }"),e.appendChild(o),zit.applyBindings(i,o),this._container=e,this._viewModel=i,this._element=o}Object.defineProperties(_at.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),_at.prototype.isDestroyed=function(){return!1},_at.prototype.destroy=function(){return zit.cleanNode(this._element),this._container.removeChild(this._element),Wc(this)};var gat=_at;const bat="M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4853444 22.104033 11.423165 24.0625 13.84375 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 8.975298 28.305952 7.03125 25.875 7.03125 L 13.84375 7.03125 z",yat="M 27.34375 1.65625 L 5.28125 27.9375 L 8.09375 30.3125 L 30.15625 4.03125 L 27.34375 1.65625 z M 13.84375 7.03125 C 11.412798 7.03125 9.46875 8.975298 9.46875 11.40625 L 9.46875 11.59375 L 2.53125 7.21875 L 2.53125 24.0625 L 9.46875 19.6875 C 9.4724893 20.232036 9.5676108 20.7379 9.75 21.21875 L 21.65625 7.03125 L 13.84375 7.03125 z M 28.21875 7.71875 L 14.53125 24.0625 L 25.875 24.0625 C 28.305952 24.0625 30.28125 22.087202 30.28125 19.65625 L 30.28125 11.40625 C 30.28125 9.8371439 29.456025 8.4902779 28.21875 7.71875 z";function vat(){this._cameraClicked=new dn["a"],this._closeClicked=new dn["a"],this.maxHeight=500,this.enableCamera=!1,this.isCameraTracking=!1,this.showInfo=!1,this.titleText="",this.description="",zit.track(this,["showInfo","titleText","description","maxHeight","enableCamera","isCameraTracking"]),this._loadingIndicatorHtml='<div class="cesium-infoBox-loadingContainer"><span class="cesium-infoBox-loading"></span></div>',this.cameraIconPath=void 0,zit.defineProperty(this,"cameraIconPath",{get:function(){return!this.enableCamera||this.isCameraTracking?yat:bat}}),zit.defineProperty(this,"_bodyless",{get:function(){return!Object(r["a"])(this.description)||0===this.description.length}})}vat.prototype.maxHeightOffset=function(e){return`${this.maxHeight-e}px`},Object.defineProperties(vat.prototype,{cameraClicked:{get:function(){return this._cameraClicked}},closeClicked:{get:function(){return this._closeClicked}}});var Oat=vat;function Aat(e){i["a"].defined("container",e),e=HNe(e);const t=document.createElement("div");t.className="cesium-infoBox",t.setAttribute("data-bind",'css: { "cesium-infoBox-visible" : showInfo, "cesium-infoBox-bodyless" : _bodyless }'),e.appendChild(t);const n=document.createElement("div");n.className="cesium-infoBox-title",n.setAttribute("data-bind","text: titleText"),t.appendChild(n);const o=document.createElement("button");o.type="button",o.className="cesium-button cesium-infoBox-camera",o.setAttribute("data-bind",'attr: { title: "Focus camera on object" },click: function () { cameraClicked.raiseEvent(this); },enable: enableCamera,cesiumSvgPath: { path: cameraIconPath, width: 32, height: 32 }'),t.appendChild(o);const a=document.createElement("button");a.type="button",a.className="cesium-infoBox-close",a.setAttribute("data-bind","click: function () { closeClicked.raiseEvent(this); }"),a.innerHTML="&times;",t.appendChild(a);const s=document.createElement("iframe");s.className="cesium-infoBox-iframe",s.setAttribute("sandbox","allow-same-origin allow-popups allow-forms"),s.setAttribute("data-bind","style : { maxHeight : maxHeightOffset(40) }"),s.setAttribute("allowfullscreen",!0),t.appendChild(s);const c=new Oat;zit.applyBindings(c,t),this._container=e,this._element=t,this._frame=s,this._viewModel=c,this._descriptionSubscription=void 0;const l=this;s.addEventListener("load",(function(){const e=s.contentDocument,n=e.createElement("link");n.href=Bt("Widgets/InfoBox/InfoBoxDescription.css"),n.rel="stylesheet",n.type="text/css";const i=e.createElement("div");i.className="cesium-infoBox-description",e.head.appendChild(n),e.body.appendChild(i),l._descriptionSubscription=Jit(c,"description",(function(e){s.style.height="5px",i.innerHTML=e;let n=null;const o=i.firstElementChild;if(null!==o&&1===i.childNodes.length){const e=window.getComputedStyle(o);if(null!==e){const t=e["background-color"],i=Dm.fromCssColorString(t);Object(r["a"])(i)&&0!==i.alpha&&(n=e["background-color"])}}t.style["background-color"]=n;const a=i.getBoundingClientRect().height;s.style.height=`${a}px`}))})),s.setAttribute("src","about:blank")}Object.defineProperties(Aat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}},frame:{get:function(){return this._frame}}}),Aat.prototype.isDestroyed=function(){return!1},Aat.prototype.destroy=function(){const e=this._container;return zit.cleanNode(this._element),e.removeChild(this._element),Object(r["a"])(this._descriptionSubscription)&&this._descriptionSubscription.dispose(),Wc(this)};var wat=Aat;function Tat(){this.showInstructions=!1;const e=this;this._command=Kit((function(){e.showInstructions=!e.showInstructions})),this._showClick=Kit((function(){e._touch=!1})),this._showTouch=Kit((function(){e._touch=!0})),this._touch=!1,this.tooltip="Navigation Instructions",zit.track(this,["tooltip","showInstructions","_touch"])}Object.defineProperties(Tat.prototype,{command:{get:function(){return this._command}},showClick:{get:function(){return this._showClick}},showTouch:{get:function(){return this._showTouch}}});var Cat=Tat;function Eat(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.container))throw new a["a"]("options.container is required.");const t=HNe(e.container),n=new Cat,i=Object(o["a"])(e.instructionsInitiallyVisible,!1);n.showInstructions=i,n._svgPath="M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466z M17.328,24.371h-2.707v-2.596h2.707V24.371zM17.328,19.003v0.858h-2.707v-1.057c0-3.19,3.63-3.696,3.63-5.963c0-1.034-0.924-1.826-2.134-1.826c-1.254,0-2.354,0.924-2.354,0.924l-1.541-1.915c0,0,1.519-1.584,4.137-1.584c2.487,0,4.796,1.54,4.796,4.136C21.156,16.208,17.328,16.627,17.328,19.003z";const s=document.createElement("span");s.className="cesium-navigationHelpButton-wrapper",t.appendChild(s);const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-toolbar-button cesium-navigation-help-button",c.setAttribute("data-bind","attr: { title: tooltip },click: command,cesiumSvgPath: { path: _svgPath, width: 32, height: 32 }"),s.appendChild(c);const l=document.createElement("div");l.className="cesium-navigation-help",l.setAttribute("data-bind",'css: { "cesium-navigation-help-visible" : showInstructions}'),s.appendChild(l);const u=document.createElement("button");u.type="button",u.className="cesium-navigation-button cesium-navigation-button-left",u.setAttribute("data-bind",'click: showClick, css: {"cesium-navigation-button-selected": !_touch, "cesium-navigation-button-unselected": _touch}');const h=document.createElement("img");h.src=Bt("Widgets/Images/NavigationHelp/Mouse.svg"),h.className="cesium-navigation-button-icon",h.style.width="25px",h.style.height="25px",u.appendChild(h),u.appendChild(document.createTextNode("Mouse"));const d=document.createElement("button");d.type="button",d.className="cesium-navigation-button cesium-navigation-button-right",d.setAttribute("data-bind",'click: showTouch, css: {"cesium-navigation-button-selected": _touch, "cesium-navigation-button-unselected": !_touch}');const f=document.createElement("img");f.src=Bt("Widgets/Images/NavigationHelp/Touch.svg"),f.className="cesium-navigation-button-icon",f.style.width="25px",f.style.height="25px",d.appendChild(f),d.appendChild(document.createTextNode("Touch")),l.appendChild(u),l.appendChild(d);const p=document.createElement("div");p.className="cesium-click-navigation-help cesium-navigation-help-instructions",p.setAttribute("data-bind",'css: { "cesium-click-navigation-help-visible" : !_touch}'),p.innerHTML=`            <table>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/MouseLeft.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">Left click + drag</div>                    </td>                </tr>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/MouseRight.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Right click + drag, or</div>                        <div class="cesium-navigation-help-details">Mouse wheel scroll</div>                    </td>                </tr>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/MouseMiddle.svg")}" width="48" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Rotate view</div>                        <div class="cesium-navigation-help-details">Middle click + drag, or</div>                        <div class="cesium-navigation-help-details">CTRL + Left/Right click + drag</div>                    </td>                </tr>            </table>`,l.appendChild(p);const m=document.createElement("div");m.className="cesium-touch-navigation-help cesium-navigation-help-instructions",m.setAttribute("data-bind",'css: { "cesium-touch-navigation-help-visible" : _touch}'),m.innerHTML=`            <table>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/TouchDrag.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-pan">Pan view</div>                        <div class="cesium-navigation-help-details">One finger drag</div>                    </td>                </tr>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/TouchZoom.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-zoom">Zoom view</div>                        <div class="cesium-navigation-help-details">Two finger pinch</div>                    </td>                </tr>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/TouchTilt.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-rotate">Tilt view</div>                        <div class="cesium-navigation-help-details">Two finger drag, same direction</div>                    </td>                </tr>                <tr>                    <td><img src="${Bt("Widgets/Images/NavigationHelp/TouchRotate.svg")}" width="70" height="48" /></td>                    <td>                        <div class="cesium-navigation-help-tilt">Rotate view</div>                        <div class="cesium-navigation-help-details">Two finger drag, opposite direction</div>                    </td>                </tr>            </table>`,l.appendChild(m),zit.applyBindings(n,s),this._container=t,this._viewModel=n,this._wrapper=s,this._closeInstructions=function(e){s.contains(e.target)||(n.showInstructions=!1)},Or.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeInstructions,!0):(document.addEventListener("mousedown",this._closeInstructions,!0),document.addEventListener("touchstart",this._closeInstructions,!0))}Object.defineProperties(Eat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Eat.prototype.isDestroyed=function(){return!1},Eat.prototype.destroy=function(){return Or.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeInstructions,!0):(document.removeEventListener("mousedown",this._closeInstructions,!0),document.removeEventListener("touchstart",this._closeInstructions,!0)),zit.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),Wc(this)};var xat=Eat;function Sat(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.scene))throw new a["a"]("options.scene is required.");this._scene=e.scene,this.lowFrameRateMessage=Object(o["a"])(e.lowFrameRateMessage,"This application appears to be performing poorly on your system.  Please try using a different web browser or updating your video drivers."),this.lowFrameRateMessageDismissed=!1,this.showingLowFrameRateMessage=!1,zit.track(this,["lowFrameRateMessage","lowFrameRateMessageDismissed","showingLowFrameRateMessage"]);const t=this;this._dismissMessage=Kit((function(){t.showingLowFrameRateMessage=!1,t.lowFrameRateMessageDismissed=!0}));const n=qYe.fromScene(e.scene);this._unsubscribeLowFrameRate=n.lowFrameRate.addEventListener((function(){t.lowFrameRateMessageDismissed||(t.showingLowFrameRateMessage=!0)})),this._unsubscribeNominalFrameRate=n.nominalFrameRate.addEventListener((function(){t.showingLowFrameRateMessage=!1}))}Object.defineProperties(Sat.prototype,{scene:{get:function(){return this._scene}},dismissMessage:{get:function(){return this._dismissMessage}}}),Sat.prototype.destroy=function(){return this._unsubscribeLowFrameRate(),this._unsubscribeNominalFrameRate(),Wc(this)};var Iat=Sat;function Dat(e){if(!Object(r["a"])(e)||!Object(r["a"])(e.container))throw new a["a"]("options.container is required.");if(!Object(r["a"])(e.scene))throw new a["a"]("options.scene is required.");const t=HNe(e.container),n=new Iat(e),i=document.createElement("div");i.className="cesium-performance-watchdog-message-area",i.setAttribute("data-bind","visible: showingLowFrameRateMessage");const o=document.createElement("button");o.setAttribute("type","button"),o.className="cesium-performance-watchdog-message-dismiss",o.innerHTML="&times;",o.setAttribute("data-bind","click: dismissMessage"),i.appendChild(o);const s=document.createElement("div");s.className="cesium-performance-watchdog-message",s.setAttribute("data-bind","html: lowFrameRateMessage"),i.appendChild(s),t.appendChild(i),zit.applyBindings(n,i),this._container=t,this._viewModel=n,this._element=i}Object.defineProperties(Dat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Dat.prototype.isDestroyed=function(){return!1},Dat.prototype.destroy=function(){return this._viewModel.destroy(),zit.cleanNode(this._element),this._container.removeChild(this._element),Wc(this)};var Pat=Dat;function jat(e){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this._scene=e,this._orthographic=e.camera.frustum instanceof IO,this._flightInProgress=!1,this.dropDownVisible=!1,this.tooltipPerspective="Perspective Projection",this.tooltipOrthographic="Orthographic Projection",this.selectedTooltip=void 0,this.sceneMode=e.mode,zit.track(this,["_orthographic","_flightInProgress","sceneMode","dropDownVisible","tooltipPerspective","tooltipOrthographic"]);const t=this;zit.defineProperty(this,"selectedTooltip",(function(){return t._orthographic?t.tooltipOrthographic:t.tooltipPerspective})),this._toggleDropDown=Kit((function(){t.sceneMode===SH.SCENE2D||t._flightInProgress||(t.dropDownVisible=!t.dropDownVisible)})),this._eventHelper=new gO,this._eventHelper.add(e.morphComplete,(function(e,n,i,o){t.sceneMode=i,t._orthographic=i===SH.SCENE2D||t._scene.camera.frustum instanceof IO})),this._eventHelper.add(e.preRender,(function(){t._flightInProgress=Object(r["a"])(e.camera._currentFlight)})),this._switchToPerspective=Kit((function(){t.sceneMode!==SH.SCENE2D&&(t._scene.camera.switchToPerspectiveFrustum(),t._orthographic=!1,t.dropDownVisible=!1)})),this._switchToOrthographic=Kit((function(){t.sceneMode!==SH.SCENE2D&&(t._scene.camera.switchToOrthographicFrustum(),t._orthographic=!0,t.dropDownVisible=!1)})),this._sceneMode=SH}Object.defineProperties(jat.prototype,{scene:{get:function(){return this._scene}},toggleDropDown:{get:function(){return this._toggleDropDown}},switchToPerspective:{get:function(){return this._switchToPerspective}},switchToOrthographic:{get:function(){return this._switchToOrthographic}},isOrthographicProjection:{get:function(){return this._orthographic}}}),jat.prototype.isDestroyed=function(){return!1},jat.prototype.destroy=function(){this._eventHelper.removeAll(),Wc(this)};var Rat=jat;const Lat="M 28.15625,10.4375 9.125,13.21875 13.75,43.25 41.75,55.09375 50.8125,37 54.5,11.9375 z m 0.125,3 19.976451,0.394265 L 43.03125,16.875 22.6875,14.28125 z M 50.971746,15.705477 47.90625,36.03125 42.53125,46 44.84375,19.3125 z M 12.625,16.03125 l 29.15625,3.6875 -2.65625,31 L 16.4375,41.125 z",Mat="m 31.560594,6.5254438 -20.75,12.4687502 0.1875,24.5625 22.28125,11.8125 19.5,-12 0.65625,-0.375 0,-0.75 0.0312,-23.21875 z m 0.0625,3.125 16.65625,9.5000002 -16.125,10.28125 -17.34375,-9.71875 z m 18.96875,11.1875002 0.15625,20.65625 -17.46875,10.59375 0.15625,-20.28125 z m -37.0625,1.25 17.21875,9.625 -0.15625,19.21875 -16.9375,-9 z";function Nat(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("scene is required.");e=HNe(e);const n=new Rat(t);n._perspectivePath=Lat,n._orthographicPath=Mat;const i=document.createElement("span");i.className="cesium-projectionPicker-wrapper cesium-toolbar-button",e.appendChild(i);const o=document.createElement("button");o.type="button",o.className="cesium-button cesium-toolbar-button",o.setAttribute("data-bind",'css: { "cesium-projectionPicker-buttonPerspective": !_orthographic,       "cesium-projectionPicker-buttonOrthographic": _orthographic,       "cesium-button-disabled" : sceneMode === _sceneMode.SCENE2D || _flightInProgress,        "cesium-projectionPicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),o.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64, css: "cesium-projectionPicker-iconPerspective" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64, css: "cesium-projectionPicker-iconOrthographic" } --\x3e\x3c!-- /ko --\x3e',i.appendChild(o);const s=document.createElement("button");s.type="button",s.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",s.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && _orthographic),       "cesium-projectionPicker-none" : !_orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible },attr: { title: tooltipPerspective },click: switchToPerspective,cesiumSvgPath: { path: _perspectivePath, width: 64, height: 64 }'),i.appendChild(s);const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-toolbar-button cesium-projectionPicker-dropDown-icon",c.setAttribute("data-bind",'css: { "cesium-projectionPicker-visible" : (dropDownVisible && !_orthographic),       "cesium-projectionPicker-none" : _orthographic,       "cesium-projectionPicker-hidden" : !dropDownVisible},attr: { title: tooltipOrthographic },click: switchToOrthographic,cesiumSvgPath: { path: _orthographicPath, width: 64, height: 64 }'),i.appendChild(c),zit.applyBindings(n,i),this._viewModel=n,this._container=e,this._wrapper=i,this._closeDropDown=function(e){i.contains(e.target)||(n.dropDownVisible=!1)},Or.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(Nat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Nat.prototype.isDestroyed=function(){return!1},Nat.prototype.destroy=function(){return this._viewModel.destroy(),Or.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),zit.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),Wc(this)};var Bat=Nat;function Fat(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");this._scene=e;const n=this,i=function(e,t,i,o){n.sceneMode=i,n.dropDownVisible=!1};this._eventHelper=new gO,this._eventHelper.add(e.morphStart,i),this._duration=Object(o["a"])(t,2),this.sceneMode=e.mode,this.dropDownVisible=!1,this.tooltip2D="2D",this.tooltip3D="3D",this.tooltipColumbusView="Columbus View",zit.track(this,["sceneMode","dropDownVisible","tooltip2D","tooltip3D","tooltipColumbusView"]),this.selectedTooltip=void 0,zit.defineProperty(this,"selectedTooltip",(function(){const e=n.sceneMode;return e===SH.SCENE2D?n.tooltip2D:e===SH.SCENE3D?n.tooltip3D:n.tooltipColumbusView})),this._toggleDropDown=Kit((function(){n.dropDownVisible=!n.dropDownVisible})),this._morphTo2D=Kit((function(){e.morphTo2D(n._duration)})),this._morphTo3D=Kit((function(){e.morphTo3D(n._duration)})),this._morphToColumbusView=Kit((function(){e.morphToColumbusView(n._duration)})),this._sceneMode=SH}Object.defineProperties(Fat.prototype,{scene:{get:function(){return this._scene}},duration:{get:function(){return this._duration},set:function(e){if(e<0)throw new a["a"]("duration value must be positive.");this._duration=e}},toggleDropDown:{get:function(){return this._toggleDropDown}},morphTo2D:{get:function(){return this._morphTo2D}},morphTo3D:{get:function(){return this._morphTo3D}},morphToColumbusView:{get:function(){return this._morphToColumbusView}}}),Fat.prototype.isDestroyed=function(){return!1},Fat.prototype.destroy=function(){this._eventHelper.removeAll(),Wc(this)};var zat=Fat;const kat="m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z",Uat="m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z",Vat="m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z";function Hat(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("scene is required.");e=HNe(e);const i=new zat(t,n);i._globePath=kat,i._flatMapPath=Uat,i._columbusViewPath=Vat;const o=document.createElement("span");o.className="cesium-sceneModePicker-wrapper cesium-toolbar-button",e.appendChild(o);const s=document.createElement("button");s.type="button",s.className="cesium-button cesium-toolbar-button",s.setAttribute("data-bind",'css: { "cesium-sceneModePicker-button2D": sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-button3D": sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-buttonColumbusView": sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-selected": dropDownVisible },attr: { title: selectedTooltip },click: toggleDropDown'),s.innerHTML='\x3c!-- ko cesiumSvgPath: { path: _globePath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon3D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-icon2D" } --\x3e\x3c!-- /ko --\x3e\x3c!-- ko cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64, css: "cesium-sceneModePicker-slide-svg cesium-sceneModePicker-iconColumbusView" } --\x3e\x3c!-- /ko --\x3e',o.appendChild(s);const c=document.createElement("button");c.type="button",c.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",c.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE3D)) || (!dropDownVisible && (sceneMode === _sceneMode.SCENE3D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE3D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip3D },click: morphTo3D,cesiumSvgPath: { path: _globePath, width: 64, height: 64 }'),o.appendChild(c);const l=document.createElement("button");l.type="button",l.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",l.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.SCENE2D)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.SCENE2D,       "cesium-sceneModePicker-hidden" : !dropDownVisible },attr: { title: tooltip2D },click: morphTo2D,cesiumSvgPath: { path: _flatMapPath, width: 64, height: 64 }'),o.appendChild(l);const u=document.createElement("button");u.type="button",u.className="cesium-button cesium-toolbar-button cesium-sceneModePicker-dropDown-icon",u.setAttribute("data-bind",'css: { "cesium-sceneModePicker-visible" : (dropDownVisible && (sceneMode !== _sceneMode.COLUMBUS_VIEW)) || (!dropDownVisible && (sceneMode === _sceneMode.COLUMBUS_VIEW)),       "cesium-sceneModePicker-none" : sceneMode === _sceneMode.COLUMBUS_VIEW,       "cesium-sceneModePicker-hidden" : !dropDownVisible},attr: { title: tooltipColumbusView },click: morphToColumbusView,cesiumSvgPath: { path: _columbusViewPath, width: 64, height: 64 }'),o.appendChild(u),zit.applyBindings(i,o),this._viewModel=i,this._container=e,this._wrapper=o,this._closeDropDown=function(e){o.contains(e.target)||(i.dropDownVisible=!1)},Or.supportsPointerEvents()?document.addEventListener("pointerdown",this._closeDropDown,!0):(document.addEventListener("mousedown",this._closeDropDown,!0),document.addEventListener("touchstart",this._closeDropDown,!0))}Object.defineProperties(Hat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Hat.prototype.isDestroyed=function(){return!1},Hat.prototype.destroy=function(){return this._viewModel.destroy(),Or.supportsPointerEvents()?document.removeEventListener("pointerdown",this._closeDropDown,!0):(document.removeEventListener("mousedown",this._closeDropDown,!0),document.removeEventListener("touchstart",this._closeDropDown,!0)),zit.cleanNode(this._wrapper),this._container.removeChild(this._wrapper),Wc(this)};var Gat=Hat;const Wat=new Gt,qat="-1000px";function Yat(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");if(!Object(r["a"])(t))throw new a["a"]("selectionIndicatorElement is required.");if(!Object(r["a"])(n))throw new a["a"]("container is required.");this._scene=e,this._screenPositionX=qat,this._screenPositionY=qat,this._tweens=e.tweens,this._container=Object(o["a"])(n,document.body),this._selectionIndicatorElement=t,this._scale=1,this.position=void 0,this.showSelection=!1,zit.track(this,["position","_screenPositionX","_screenPositionY","_scale","showSelection"]),this.isVisible=void 0,zit.defineProperty(this,"isVisible",{get:function(){return this.showSelection&&Object(r["a"])(this.position)}}),zit.defineProperty(this,"_transform",{get:function(){return`scale(${this._scale})`}}),this.computeScreenSpacePosition=function(t,n){return f9.wgs84ToWindowCoordinates(e,t,n)}}Yat.prototype.update=function(){if(this.showSelection&&Object(r["a"])(this.position)){const e=this.computeScreenSpacePosition(this.position,Wat);if(Object(r["a"])(e)){const t=this._container,n=t.parentNode.clientWidth,i=t.parentNode.clientHeight,o=this._selectionIndicatorElement.clientWidth,r=.5*o;e.x=Math.min(Math.max(e.x,-o),n+o)-r,e.y=Math.min(Math.max(e.y,-o),i+o)-r,this._screenPositionX=`${Math.floor(e.x+.25)}px`,this._screenPositionY=`${Math.floor(e.y+.25)}px`}else this._screenPositionX=qat,this._screenPositionY=qat}},Yat.prototype.animateAppear=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:2,stopValue:1,duration:.8,easingFunction:Gv.EXPONENTIAL_OUT})},Yat.prototype.animateDepart=function(){this._tweens.addProperty({object:this,property:"_scale",startValue:this._scale,stopValue:1.5,duration:.8,easingFunction:Gv.EXPONENTIAL_OUT})},Object.defineProperties(Yat.prototype,{container:{get:function(){return this._container}},selectionIndicatorElement:{get:function(){return this._selectionIndicatorElement}},scene:{get:function(){return this._scene}}});var Xat=Yat;function Kat(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e),this._container=e;const n=document.createElement("div");n.className="cesium-selection-wrapper",n.setAttribute("data-bind",'style: { "top" : _screenPositionY, "left" : _screenPositionX },css: { "cesium-selection-wrapper-visible" : isVisible }'),e.appendChild(n),this._element=n;const i="http://www.w3.org/2000/svg",o="M -34 -34 L -34 -11.25 L -30 -15.25 L -30 -30 L -15.25 -30 L -11.25 -34 L -34 -34 z M 11.25 -34 L 15.25 -30 L 30 -30 L 30 -15.25 L 34 -11.25 L 34 -34 L 11.25 -34 z M -34 11.25 L -34 34 L -11.25 34 L -15.25 30 L -30 30 L -30 15.25 L -34 11.25 z M 34 11.25 L 30 15.25 L 30 30 L 15.25 30 L 11.25 34 L 34 34 L 34 11.25 z",s=document.createElementNS(i,"svg:svg");s.setAttribute("width",160),s.setAttribute("height",160),s.setAttribute("viewBox","0 0 160 160");const c=document.createElementNS(i,"g");c.setAttribute("transform","translate(80,80)"),s.appendChild(c);const l=document.createElementNS(i,"path");l.setAttribute("data-bind","attr: { transform: _transform }"),l.setAttribute("d",o),c.appendChild(l),n.appendChild(s);const u=new Xat(t,this._element,this._container);this._viewModel=u,zit.applyBindings(this._viewModel,this._element)}Object.defineProperties(Kat.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Kat.prototype.isDestroyed=function(){return!1},Kat.prototype.destroy=function(){const e=this._container;return zit.cleanNode(this._element),e.removeChild(this._element),Wc(this)};var $at=Kat;function Jat(e,t,n){this._color=e,this._height=t,this._base=Object(o["a"])(n,0)}Jat.prototype.getHeight=function(){return this._height},Jat.prototype.getBase=function(){return this._base},Jat.prototype.getStartTime=function(){return this._start},Jat.prototype.getStopTime=function(){return this._stop},Jat.prototype.setRange=function(e,t){this._start=e,this._stop=t},Jat.prototype.render=function(e){let t="";if(this._start&&this._stop&&this._color){const n=mo.secondsDifference(this._start,e.epochJulian);let i=Math.round(e.timeBarWidth*e.getAlpha(n));const o=mo.secondsDifference(this._stop,e.epochJulian);let r=Math.round(e.timeBarWidth*e.getAlpha(o))-i;i<0&&(r+=i,i=0),i+r>e.timeBarWidth&&(r=e.timeBarWidth-i),r>0&&(t=`<span class="cesium-timeline-highlight" style="left: ${i.toString()}px; width: ${r.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return t};var Qat=Jat;function Zat(e,t,n,i){this.interval=e,this.height=t,this.color=n||new Dm(.5,.5,.5,1),this.backgroundColor=i||new Dm(0,0,0,0)}Zat.prototype.render=function(e,t){const n=this.interval.start,i=this.interval.stop,o=t.startJulian,a=mo.addSeconds(t.startJulian,t.duration,new mo);if(mo.lessThan(n,o)&&mo.greaterThan(i,a))e.fillStyle=this.color.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height);else if(mo.lessThanOrEquals(n,a)&&mo.greaterThanOrEquals(i,o)){let o,a,s;for(o=0;o<t.timeBarWidth;++o){const e=mo.addSeconds(t.startJulian,o/t.timeBarWidth*t.duration,new mo);!Object(r["a"])(a)&&mo.greaterThanOrEquals(e,n)?a=o:!Object(r["a"])(s)&&mo.greaterThanOrEquals(e,i)&&(s=o)}e.fillStyle=this.backgroundColor.toCssColorString(),e.fillRect(0,t.y,t.timeBarWidth,this.height),Object(r["a"])(a)&&(Object(r["a"])(s)||(s=t.timeBarWidth),e.fillStyle=this.color.toCssColorString(),e.fillRect(a,t.y,Math.max(s-a,1),this.height))}};var est=Zat;let tst=1e12;const nst={none:0,scrub:1,slide:2,zoom:3,touchOnly:4},ist={none:0,scrub:1,slideZoom:2,singleTap:3,ignore:4},ost=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],rst=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ast(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("clock is required.");e=HNe(e);const n=e.ownerDocument;this.container=e;const i=n.createElement("div");i.className="cesium-timeline-main",e.appendChild(i),this._topDiv=i,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=t,this._scrubJulian=t.currentTime,this._mainTicSpan=-1,this._mouseMode=nst.none,this._touchMode=ist.none,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(t.startTime,t.stopTime),this._onMouseDown=cst(this),this._onMouseUp=lst(this),this._onMouseMove=ust(this),this._onMouseWheel=hst(this),this._onTouchStart=dst(this),this._onTouchMove=pst(this),this._onTouchEnd=fst(this);const o=this._timeBarEle;n.addEventListener("mouseup",this._onMouseUp,!1),n.addEventListener("mousemove",this._onMouseMove,!1),o.addEventListener("mousedown",this._onMouseDown,!1),o.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),o.addEventListener("mousewheel",this._onMouseWheel,!1),o.addEventListener("touchstart",this._onTouchStart,!1),o.addEventListener("touchmove",this._onTouchMove,!1),o.addEventListener("touchend",this._onTouchEnd,!1),o.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},t.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}function sst(e){return e<10?`0${e.toString()}`:e.toString()}function cst(e){return function(t){e._mouseMode!==nst.touchOnly&&(0===t.button?(e._mouseMode=nst.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition="-16px 0"),e._onMouseMove(t)):(e._mouseX=t.clientX,2===t.button?e._mouseMode=nst.zoom:e._mouseMode=nst.slide)),t.preventDefault()}}function lst(e){return function(t){e._mouseMode=nst.none,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}function ust(e){return function(t){let n;if(e._mouseMode===nst.scrub){t.preventDefault();const n=t.clientX-e._topDiv.getBoundingClientRect().left;n<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):n>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(e._mouseMode===nst.slide){if(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n){const t=n*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(mo.addSeconds(e._startJulian,t,new mo),mo.addSeconds(e._endJulian,t,new mo))}}else e._mouseMode===nst.zoom&&(n=e._mouseX-t.clientX,e._mouseX=t.clientX,0!==n&&e.zoomFrom(Math.pow(1.01,n)))}}function hst(e){return function(t){let n=t.wheelDeltaY||t.wheelDelta||-t.detail;tst=Math.max(Math.min(Math.abs(n),tst),1),n/=tst,e.zoomFrom(Math.pow(1.05,-n))}}function dst(e){return function(t){const n=t.touches.length;let i,o;const r=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=nst.touchOnly,1===n?(i=mo.secondsDifference(e._scrubJulian,e._startJulian),o=Math.round(i*e._topDiv.clientWidth/e._timeBarSecondsSpan+r),Math.abs(t.touches[0].clientX-o)<50?(e._touchMode=ist.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition=1===n?"-16px 0":"0 0")):(e._touchMode=ist.singleTap,e._touchState.centerX=t.touches[0].clientX-r)):2===n?(e._touchMode=ist.slideZoom,e._touchState.centerX=.5*(t.touches[0].clientX+t.touches[1].clientX)-r,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=ist.ignore}}function fst(e){return function(t){const n=t.touches.length,i=e._topDiv.getBoundingClientRect().left;e._touchMode===ist.singleTap?(e._touchMode=ist.scrub,e._onTouchMove(t)):e._touchMode===ist.scrub&&e._onTouchMove(t),e._mouseMode=nst.touchOnly,1!==n?e._touchMode=n>0?ist.ignore:ist.none:e._touchMode===ist.slideZoom&&(e._touchState.centerX=t.touches[0].clientX-i),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}function pst(e){return function(t){let n,i,o,a,s,c,l=1;const u=e._topDiv.getBoundingClientRect().left;e._touchMode===ist.singleTap&&(e._touchMode=ist.slideZoom),e._mouseMode=nst.touchOnly,e._touchMode===ist.scrub?(t.preventDefault(),1===t.changedTouches.length&&(i=t.changedTouches[0].clientX-u,i>=0&&i<=e._topDiv.clientWidth&&e._setTimeBarTime(i,i*e._timeBarSecondsSpan/e._topDiv.clientWidth))):e._touchMode===ist.slideZoom&&(o=t.touches.length,2===o?(a=.5*(t.touches[0].clientX+t.touches[1].clientX)-u,s=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):1===o&&(a=t.touches[0].clientX-u,s=0),Object(r["a"])(a)&&(s>0&&e._touchState.spanX>0?(l=e._touchState.spanX/s,c=mo.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-a*e._timeBarSecondsSpan*l)/e._topDiv.clientWidth,new mo)):(n=e._touchState.centerX-a,c=mo.addSeconds(e._startJulian,n*e._timeBarSecondsSpan/e._topDiv.clientWidth,new mo)),e.zoomTo(c,mo.addSeconds(c,e._timeBarSecondsSpan*l,new mo)),e._touchState.centerX=a,e._touchState.spanX=s))}}ast.prototype.addEventListener=function(e,t,n){this._topDiv.addEventListener(e,t,n)},ast.prototype.removeEventListener=function(e,t,n){this._topDiv.removeEventListener(e,t,n)},ast.prototype.isDestroyed=function(){return!1},ast.prototype.destroy=function(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const e=this.container.ownerDocument;e.removeEventListener("mouseup",this._onMouseUp,!1),e.removeEventListener("mousemove",this._onMouseMove,!1);const t=this._timeBarEle;t.removeEventListener("mousedown",this._onMouseDown,!1),t.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),t.removeEventListener("mousewheel",this._onMouseWheel,!1),t.removeEventListener("touchstart",this._onTouchStart,!1),t.removeEventListener("touchmove",this._onTouchMove,!1),t.removeEventListener("touchend",this._onTouchEnd,!1),t.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),Wc(this)},ast.prototype.addHighlightRange=function(e,t,n){const i=new Qat(e,t,n);return this._highlightRanges.push(i),this.resize(),i},ast.prototype.addTrack=function(e,t,n,i){const o=new est(e,t,n,i);return this._trackList.push(o),this._lastHeight=void 0,this.resize(),o},ast.prototype.zoomTo=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("startTime is required.");if(!Object(r["a"])(t))throw new a["a"]("stopTime is required");if(mo.lessThanOrEquals(t,e))throw new a["a"]("Start time must come before end time.");if(this._startJulian=e,this._endJulian=t,this._timeBarSecondsSpan=mo.secondsDifference(t,e),this._clock&&this._clock.clockRange!==pm.UNBOUNDED){const e=this._clock.startTime,t=this._clock.stopTime,n=mo.secondsDifference(t,e),i=mo.secondsDifference(e,this._startJulian),o=mo.secondsDifference(t,this._endJulian);this._timeBarSecondsSpan>=n?(this._timeBarSecondsSpan=n,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):i>0?(this._endJulian=mo.addSeconds(this._endJulian,i,new mo),this._startJulian=e,this._timeBarSecondsSpan=mo.secondsDifference(this._endJulian,this._startJulian)):o<0&&(this._startJulian=mo.addSeconds(this._startJulian,o,new mo),this._endJulian=t,this._timeBarSecondsSpan=mo.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const n=document.createEvent("Event");n.initEvent("setzoom",!0,!0),n.startJulian=this._startJulian,n.endJulian=this._endJulian,n.epochJulian=this._epochJulian,n.totalSpan=this._timeBarSecondsSpan,n.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(n)},ast.prototype.zoomFrom=function(e){let t=mo.secondsDifference(this._scrubJulian,this._startJulian);e>1||t<0||t>this._timeBarSecondsSpan?t=.5*this._timeBarSecondsSpan:t+=t-.5*this._timeBarSecondsSpan;const n=this._timeBarSecondsSpan-t;this.zoomTo(mo.addSeconds(this._startJulian,t-t*e,new mo),mo.addSeconds(this._endJulian,n*e-n,new mo))},ast.prototype.makeLabel=function(e){const t=mo.toGregorianDate(e),n=t.millisecond;let i=" UTC";if(n>0&&this._timeBarSecondsSpan<3600){i=Math.floor(n).toString();while(i.length<3)i=`0${i}`;i=`.${i}`}return`${rst[t.month-1]} ${t.day} ${t.year} ${sst(t.hour)}:${sst(t.minute)}:${sst(t.second)}${i}`},ast.prototype.smallestTicInPixels=7,ast.prototype._makeTics=function(){const e=this._timeBarEle,t=mo.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan),i=n-8;let o;const r=this;this._needleEle.style.left=`${n.toString()}px`;let a="";const s=.01,c=31536e6,l=1e-10;let u=0,h=this._timeBarSecondsSpan;h<s?(h=s,this._timeBarSecondsSpan=s,this._endJulian=mo.addSeconds(this._startJulian,s,new mo)):h>c&&(h=c,this._timeBarSecondsSpan=c,this._endJulian=mo.addSeconds(this._startJulian,c,new mo));let d=this._timeBarEle.clientWidth;d<10&&(d=10);const f=this._startJulian,p=Math.min(h/d*1e-5,.4);let m;const _=mo.toGregorianDate(f);m=h>31536e4?mo.fromDate(new Date(Date.UTC(100*Math.floor(_.year/100),0))):h>31536e3?mo.fromDate(new Date(Date.UTC(10*Math.floor(_.year/10),0))):h>86400?mo.fromDate(new Date(Date.UTC(_.year,0))):mo.fromDate(new Date(Date.UTC(_.year,_.month,_.day)));const g=mo.secondsDifference(this._startJulian,mo.addSeconds(m,p,new mo));let b=g+h;function y(e){return Math.floor(g/e)*e}function v(e,t){return Math.ceil(e/t+.5)*t}function O(e){return(e-g)/h}function A(e,t){return e-t*Math.round(e/t)}this._epochJulian=m,this._rulerEle.innerHTML=this.makeLabel(mo.addSeconds(this._endJulian,-s,new mo));let w=this._rulerEle.offsetWidth+20;w<30&&(w=180);const T=u;u-=l;const C={startTime:g,startJulian:f,epochJulian:m,duration:h,timeBarWidth:d,getAlpha:O};this._highlightRanges.forEach((function(e){a+=e.render(C)}));let E=0,x=0,S=0,I=w/d;I>1&&(I=1),I*=this._timeBarSecondsSpan;let D=-1,P=-1;const j=ost.length;let R;for(R=0;R<j;++R){const e=ost[R];if(++D,E=e,e>I&&e>u)break;P<0&&d*(e/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(P=D)}if(D>0){while(D>0)if(--D,Math.abs(A(E,ost[D]))<1e-5){ost[D]>=u&&(x=ost[D]);break}if(P>=0)while(P<D){if(Math.abs(A(x,ost[P]))<1e-5&&ost[P]>=u){S=ost[P];break}++P}}u=T,u>l&&S<1e-5&&Math.abs(u-E)>l&&(S=u,u<=E+l&&(x=0));let L,M=-999999;if(d*(S/this._timeBarSecondsSpan)>=3)for(o=y(S);o<=b;o=v(o,S))a+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(d*O(o)).toString()}px;"></span>`;if(d*(x/this._timeBarSecondsSpan)>=3)for(o=y(x);o<=b;o=v(o,x))a+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(d*O(o)).toString()}px;"></span>`;if(d*(E/this._timeBarSecondsSpan)>=2){this._mainTicSpan=E,b+=E,o=y(E);const e=mo.computeTaiMinusUtc(m);while(o<=b){let t=mo.addSeconds(f,o-g,new mo);if(E>2.1){const n=mo.computeTaiMinusUtc(t);Math.abs(n-e)>.1&&(o+=n-e,t=mo.addSeconds(f,o-g,new mo))}const n=Math.round(d*O(o)),i=this.makeLabel(t);this._rulerEle.innerHTML=i,L=this._rulerEle.offsetWidth,L<10&&(L=w);const r=n-(L/2-1);r>M?(M=r+L+5,a+=`<span class="cesium-timeline-ticMain" style="left: ${n.toString()}px;"></span>`+`<span class="cesium-timeline-ticLabel" style="left: ${r.toString()}px;">${i}</span>`):a+=`<span class="cesium-timeline-ticSub" style="left: ${n.toString()}px;"></span>`,o=v(o,E)}}else this._mainTicSpan=-1;a+=`<span class="cesium-timeline-icon16" style="left:${i}px;bottom:0;background-position: 0 0;"></span>`,e.innerHTML=a,this._scrubElement=e.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),C.y=0,this._trackList.forEach((function(e){e.render(r._context,C),C.y+=e.height}))},ast.prototype.updateFromClock=function(){this._scrubJulian=this._clock.currentTime;const e=this._scrubElement;if(Object(r["a"])(this._scrubElement)){const t=mo.secondsDifference(this._scrubJulian,this._startJulian),n=Math.round(t*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==n&&(this._lastXPos=n,e.style.left=`${n-8}px`,this._needleEle.style.left=`${n}px`)}Object(r["a"])(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(mo.addSeconds(this._startJulian,this._timelineDrag,new mo),mo.addSeconds(this._endJulian,this._timelineDrag,new mo)))},ast.prototype._setTimeBarTime=function(e,t){if(e=Math.round(e),this._scrubJulian=mo.addSeconds(this._startJulian,t,new mo),this._scrubElement){const t=e-8;this._scrubElement.style.left=`${t.toString()}px`,this._needleEle.style.left=`${e.toString()}px`}const n=document.createEvent("Event");n.initEvent("settime",!0,!0),n.clientX=e,n.timeSeconds=t,n.timeJulian=this._scrubJulian,n.clock=this._clock,this._topDiv.dispatchEvent(n)},ast.prototype.resize=function(){const e=this.container.clientWidth,t=this.container.clientHeight;if(e===this._lastWidth&&t===this._lastHeight)return;this._trackContainer.style.height=`${t}px`;let n=1;this._trackList.forEach((function(e){n+=e.height})),this._trackListEle.style.height=`${n.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=n,this._makeTics(),this._lastXPos=void 0,this._lastWidth=e,this._lastHeight=t};var mst=ast,_st=n("67bc"),gst=n.n(_st);function bst(e){let t=!1;const n=window.screen;return Object(r["a"])(n)&&(Object(r["a"])(n.lockOrientation)?t=n.lockOrientation(e):Object(r["a"])(n.mozLockOrientation)?t=n.mozLockOrientation(e):Object(r["a"])(n.msLockOrientation)?t=n.msLockOrientation(e):Object(r["a"])(n.orientation&&n.orientation.lock)&&(t=n.orientation.lock(e))),t}function yst(){const e=window.screen;Object(r["a"])(e)&&(Object(r["a"])(e.unlockOrientation)?e.unlockOrientation():Object(r["a"])(e.mozUnlockOrientation)?e.mozUnlockOrientation():Object(r["a"])(e.msUnlockOrientation)?e.msUnlockOrientation():Object(r["a"])(e.orientation&&e.orientation.unlock)&&e.orientation.unlock())}function vst(e,t,n,i){i()||(n()?(t.useWebVR=!1,e._locked&&(yst(),e._locked=!1),e._noSleep.disable(),Mo.exitFullscreen(),n(!1)):(Mo.fullscreen||Mo.requestFullscreen(e._vrElement),e._noSleep.enable(),e._locked||(e._locked=bst("landscape")),t.useWebVR=!0,n(!0)))}function Ost(e,t){if(!Object(r["a"])(e))throw new a["a"]("scene is required.");const n=this,i=zit.observable(Mo.enabled),s=zit.observable(!1);this.isVRMode=void 0,zit.defineProperty(this,"isVRMode",{get:function(){return s()}}),this.isVREnabled=void 0,zit.defineProperty(this,"isVREnabled",{get:function(){return i()},set:function(e){i(e&&Mo.enabled)}}),this.tooltip=void 0,zit.defineProperty(this,"tooltip",(function(){return i()?s()?"Exit VR mode":"Enter VR mode":"VR mode is unavailable"}));const c=zit.observable(!1);this._isOrthographic=void 0,zit.defineProperty(this,"_isOrthographic",{get:function(){return c()}}),this._eventHelper=new gO,this._eventHelper.add(e.preRender,(function(){c(e.camera.frustum instanceof IO)})),this._locked=!1,this._noSleep=new gst.a,this._command=Kit((function(){vst(n,e,s,c)}),zit.getObservable(this,"isVREnabled")),this._vrElement=Object(o["a"])(HNe(t),document.body),this._callback=function(){!Mo.fullscreen&&s()&&(e.useWebVR=!1,n._locked&&(yst(),n._locked=!1),n._noSleep.disable(),s(!1))},document.addEventListener(Mo.changeEventName,this._callback)}Object.defineProperties(Ost.prototype,{vrElement:{get:function(){return this._vrElement},set:function(e){if(!(e instanceof Element))throw new a["a"]("value must be a valid Element.");this._vrElement=e}},command:{get:function(){return this._command}}}),Ost.prototype.isDestroyed=function(){return!1},Ost.prototype.destroy=function(){this._eventHelper.removeAll(),document.removeEventListener(Mo.changeEventName,this._callback),Wc(this)};var Ast=Ost;const wst="M 5.3125 6.375 C 4.008126 6.375 2.96875 7.4141499 2.96875 8.71875 L 2.96875 19.5 C 2.96875 20.8043 4.008126 21.875 5.3125 21.875 L 13.65625 21.875 C 13.71832 20.0547 14.845166 18.59375 16.21875 18.59375 C 17.592088 18.59375 18.71881 20.0552 18.78125 21.875 L 27.09375 21.875 C 28.398125 21.875 29.4375 20.8043 29.4375 19.5 L 29.4375 8.71875 C 29.4375 7.4141499 28.398125 6.375 27.09375 6.375 L 5.3125 6.375 z M 9.625 10.4375 C 11.55989 10.4375 13.125 12.03385 13.125 13.96875 C 13.125 15.90365 11.55989 17.46875 9.625 17.46875 C 7.69011 17.46875 6.125 15.90365 6.125 13.96875 C 6.125 12.03385 7.69011 10.4375 9.625 10.4375 z M 22.46875 10.4375 C 24.40364 10.4375 25.96875 12.03385 25.96875 13.96875 C 25.96875 15.90365 24.40364 17.46875 22.46875 17.46875 C 20.53386 17.46875 18.96875 15.90365 18.96875 13.96875 C 18.96875 12.03385 20.53386 10.4375 22.46875 10.4375 z",Tst="M 25.770585,2.4552065 C 15.72282,13.962707 10.699956,19.704407 8.1768352,22.580207 c -1.261561,1.4379 -1.902282,2.1427 -2.21875,2.5 -0.141624,0.1599 -0.208984,0.2355 -0.25,0.2813 l 0.6875,0.75 c 10e-5,-10e-5 0.679191,0.727 0.6875,0.7187 0.01662,-0.016 0.02451,-0.024 0.03125,-0.031 0.01348,-0.014 0.04013,-0.038 0.0625,-0.062 0.04474,-0.05 0.120921,-0.1315 0.28125,-0.3126 0.320657,-0.3619 0.956139,-1.0921 2.2187499,-2.5312 2.5252219,-2.8781 7.5454589,-8.6169 17.5937499,-20.1250005 l -1.5,-1.3125 z m -20.5624998,3.9063 c -1.304375,0 -2.34375,1.0391 -2.34375,2.3437 l 0,10.8125005 c 0,1.3043 1.039375,2.375 2.34375,2.375 l 2.25,0 c 1.9518039,-2.2246 7.4710958,-8.5584 13.5624998,-15.5312005 l -15.8124998,0 z m 21.1249998,0 c -1.855467,2.1245 -2.114296,2.4005 -3.59375,4.0936995 1.767282,0.1815 3.15625,1.685301 3.15625,3.500001 0,1.9349 -1.56511,3.5 -3.5,3.5 -1.658043,0 -3.043426,-1.1411 -3.40625,-2.6875 -1.089617,1.2461 -2.647139,2.9988 -3.46875,3.9375 0.191501,-0.062 0.388502,-0.094 0.59375,-0.094 1.373338,0 2.50006,1.4614 2.5625,3.2812 l 8.3125,0 c 1.304375,0 2.34375,-1.0707 2.34375,-2.375 l 0,-10.8125005 c 0,-1.3046 -1.039375,-2.3437 -2.34375,-2.3437 l -0.65625,0 z M 9.5518351,10.423906 c 1.9348899,0 3.4999999,1.596401 3.4999999,3.531301 0,1.9349 -1.56511,3.5 -3.4999999,3.5 -1.9348899,0 -3.4999999,-1.5651 -3.4999999,-3.5 0,-1.9349 1.56511,-3.531301 3.4999999,-3.531301 z m 4.2187499,10.312601 c -0.206517,0.2356 -0.844218,0.9428 -1.03125,1.1562 l 0.8125,0 c 0.01392,-0.4081 0.107026,-0.7968 0.21875,-1.1562 z";function Cst(e,t,n){if(!Object(r["a"])(e))throw new a["a"]("container is required.");if(!Object(r["a"])(t))throw new a["a"]("scene is required.");e=HNe(e);const i=new Ast(t,n);i._exitVRPath=Tst,i._enterVRPath=wst;const o=document.createElement("button");o.type="button",o.className="cesium-button cesium-vrButton",o.setAttribute("data-bind",'css: { "cesium-button-disabled" : _isOrthographic }, attr: { title: tooltip },click: command,enable: isVREnabled,cesiumSvgPath: { path: isVRMode ? _exitVRPath : _enterVRPath, width: 32, height: 32 }'),e.appendChild(o),zit.applyBindings(i,o),this._container=e,this._viewModel=i,this._element=o}Object.defineProperties(Cst.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),Cst.prototype.isDestroyed=function(){return!1},Cst.prototype.destroy=function(){return this._viewModel.destroy(),zit.cleanNode(this._element),this._container.removeChild(this._element),Wc(this)};var Est=Cst;const xst=new Tt;function Sst(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1}function Ist(e){const t=e.getPropertyIds();let n="";return t.forEach((function(t){const i=e.getProperty(t);Object(r["a"])(i)&&(n+=`<tr><th>${t}</th><td>${i}</td></tr>`)})),n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function Dst(e){let t;const n=[],i=e.getPropertyIds();for(t=0;t<i.length;t++){const o=i[t];/^name$/i.test(o)?n[0]=e.getProperty(o):/name/i.test(o)?n[1]=e.getProperty(o):/^title$/i.test(o)?n[2]=e.getProperty(o):/^(id|identifier)$/i.test(o)?n[3]=e.getProperty(o):/element/i.test(o)?n[4]=e.getProperty(o):/(id|identifier)$/i.test(o)&&(n[5]=e.getProperty(o))}const o=n.length;for(t=0;t<o;t++){const e=n[t];if(Object(r["a"])(e)&&""!==e)return e}return"Unnamed Feature"}function Pst(e,t){const n=e.scene.pick(t.position);if(Object(r["a"])(n)){const e=Object(o["a"])(n.id,n.primitive.id);if(e instanceof SY)return e;if(n instanceof qK)return new SY({name:Dst(n),description:Ist(n),feature:n})}if(Object(r["a"])(e.scene.globe))return Mst(e,t.position)}const jst=new mo;function Rst(e,t,n){if(Object(r["a"])(n)){const i=n.clock;if(Object(r["a"])(i)&&(i.getValue(t),Object(r["a"])(e))){const t=i.startTime;let n=i.stopTime;mo.equals(t,n)&&(n=mo.addSeconds(t,s["a"].EPSILON2,jst)),e.updateFromClock(),e.zoomTo(t,n)}}}const Lst=new g;function Mst(e,t){const n=e.scene,i=n.camera.getPickRay(t),o=n.imageryLayers.pickImageryLayerFeatures(i,n);if(!Object(r["a"])(o))return;const a=new SY({id:"Loading...",description:"Loading feature information..."});return o.then((function(t){if(e.selectedEntity!==a)return;if(!Object(r["a"])(t)||0===t.length)return void(e.selectedEntity=Nst());const n=t[0],i=new SY({id:n.name,description:n.description});if(Object(r["a"])(n.position)){const t=e.scene.globe.ellipsoid.cartographicToCartesian(n.position,Lst);i.position=new Sq(t)}e.selectedEntity=i}),(function(){e.selectedEntity===a&&(e.selectedEntity=Nst())})),a}function Nst(){return new SY({id:"None",description:"No features found."})}function Bst(e,t){const n=e._geocoder,i=e._homeButton,o=e._sceneModePicker,a=e._projectionPicker,s=e._baseLayerPicker,c=e._animation,l=e._timeline,u=e._fullscreenButton,h=e._infoBox,d=e._selectionIndicator,f=t?"hidden":"visible";if(Object(r["a"])(n)&&(n.container.style.visibility=f),Object(r["a"])(i)&&(i.container.style.visibility=f),Object(r["a"])(o)&&(o.container.style.visibility=f),Object(r["a"])(a)&&(a.container.style.visibility=f),Object(r["a"])(s)&&(s.container.style.visibility=f),Object(r["a"])(c)&&(c.container.style.visibility=f),Object(r["a"])(l)&&(l.container.style.visibility=f),Object(r["a"])(u)&&u.viewModel.isFullscreenEnabled&&(u.container.style.visibility=f),Object(r["a"])(h)&&(h.container.style.visibility=f),Object(r["a"])(d)&&(d.container.style.visibility=f),e._container){const n=t||!Object(r["a"])(u)?0:u.container.clientWidth;e._vrButton.container.style.right=`${n}px`,e.forceResize()}}function Fst(e,t){if(!Object(r["a"])(e))throw new a["a"]("container is required.");e=HNe(e),t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=(!Object(r["a"])(t.globe)||!1!==t.globe)&&(!Object(r["a"])(t.baseLayerPicker)||!1!==t.baseLayerPicker);if(!n&&Object(r["a"])(t.selectedImageryProviderViewModel))throw new a["a"]("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(!n&&Object(r["a"])(t.selectedTerrainProviderViewModel))throw new a["a"]("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget. Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");const i=this,s=document.createElement("div");s.className="cesium-viewer",e.appendChild(s);const c=document.createElement("div");c.className="cesium-viewer-cesiumWidgetContainer",s.appendChild(c);const l=document.createElement("div");l.className="cesium-viewer-bottom",s.appendChild(l);const u=Object(o["a"])(t.scene3DOnly,!1);let h,d,f=!1;Object(r["a"])(t.clockViewModel)?(d=t.clockViewModel,h=d.clock):(h=new vm,d=new Uit(h),f=!0),Object(r["a"])(t.shouldAnimate)&&(h.shouldAnimate=t.shouldAnimate);const p=new Hrt(c,{imageryProvider:!n&&!Object(r["a"])(t.imageryProvider)&&void 0,clock:h,skyBox:t.skyBox,skyAtmosphere:t.skyAtmosphere,sceneMode:t.sceneMode,mapProjection:t.mapProjection,globe:t.globe,orderIndependentTranslucency:t.orderIndependentTranslucency,contextOptions:t.contextOptions,useDefaultRenderLoop:t.useDefaultRenderLoop,targetFrameRate:t.targetFrameRate,showRenderLoopErrors:t.showRenderLoopErrors,useBrowserRecommendedResolution:t.useBrowserRecommendedResolution,creditContainer:Object(r["a"])(t.creditContainer)?t.creditContainer:l,creditViewport:t.creditViewport,scene3DOnly:u,shadows:t.shadows,terrainShadows:t.terrainShadows,mapMode2D:t.mapMode2D,blurActiveElementOnCanvasFocus:t.blurActiveElementOnCanvasFocus,requestRenderMode:t.requestRenderMode,maximumRenderTimeChange:t.maximumRenderTimeChange,depthPlaneEllipsoidOffset:t.depthPlaneEllipsoidOffset,msaaSamples:t.msaaSamples});let m=t.dataSources,_=!1;Object(r["a"])(m)||(m=new bwe,_=!0);const g=p.scene,b=new Fxe({scene:g,dataSourceCollection:m}),y=new gO;let v,O;if(y.add(h.onTick,Fst.prototype._onTick,this),y.add(g.morphStart,Fst.prototype._clearTrackedObject,this),!Object(r["a"])(t.selectionIndicator)||!1!==t.selectionIndicator){const e=document.createElement("div");e.className="cesium-viewer-selectionIndicatorContainer",s.appendChild(e),v=new $at(e,g)}if(!Object(r["a"])(t.infoBox)||!1!==t.infoBox){const e=document.createElement("div");e.className="cesium-viewer-infoBoxContainer",s.appendChild(e),O=new wat(e);const t=O.viewModel;y.add(t.cameraClicked,Fst.prototype._onInfoBoxCameraClicked,this),y.add(t.closeClicked,Fst.prototype._onInfoBoxClockClicked,this)}const A=document.createElement("div");let w,T,C,E,x,S,I,D,P,j,R,L,M,N,B;if(A.className="cesium-viewer-toolbar",s.appendChild(A),!Object(r["a"])(t.geocoder)||!1!==t.geocoder){const e=document.createElement("div");let n;e.className="cesium-viewer-geocoderContainer",A.appendChild(e),Object(r["a"])(t.geocoder)&&"boolean"!==typeof t.geocoder&&(n=Array.isArray(t.geocoder)?t.geocoder:[t.geocoder]),w=new fat({container:e,geocoderServices:n,scene:g}),y.add(w.viewModel.search.beforeExecute,Fst.prototype._clearObjects,this)}if(Object(r["a"])(t.homeButton)&&!1===t.homeButton||(T=new gat(A,g),Object(r["a"])(w)&&y.add(T.viewModel.command.afterExecute,(function(){const e=w.viewModel;e.searchText="",e.isSearchInProgress&&e.search()})),y.add(T.viewModel.command.beforeExecute,Fst.prototype._clearTrackedObject,this)),!0===t.sceneModePicker&&u)throw new a["a"]("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(u||Object(r["a"])(t.sceneModePicker)&&!1===t.sceneModePicker||(C=new Gat(A,g)),t.projectionPicker&&(E=new Bat(A,g)),n){const e=Object(o["a"])(t.imageryProviderViewModels,lrt()),n=Object(o["a"])(t.terrainProviderViewModels,hrt());x=new rrt(A,{globe:g.globe,imageryProviderViewModels:e,selectedImageryProviderViewModel:t.selectedImageryProviderViewModel,terrainProviderViewModels:n,selectedTerrainProviderViewModel:t.selectedTerrainProviderViewModel});const i=A.getElementsByClassName("cesium-baseLayerPicker-dropDown");S=i[0]}if(Object(r["a"])(t.imageryProvider)&&!1!==t.imageryProvider&&(n&&(x.viewModel.selectedImagery=void 0),g.imageryLayers.removeAll(),g.imageryLayers.addImageryProvider(t.imageryProvider)),Object(r["a"])(t.terrainProvider)&&(n&&(x.viewModel.selectedTerrain=void 0),g.terrainProvider=t.terrainProvider),!Object(r["a"])(t.navigationHelpButton)||!1!==t.navigationHelpButton){let e=!0;try{if(Object(r["a"])(window.localStorage)){const t=window.localStorage.getItem("cesium-hasSeenNavHelp");Object(r["a"])(t)&&Boolean(t)?e=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(U){}I=new xat({container:A,instructionsInitiallyVisible:Object(o["a"])(t.navigationInstructionsInitiallyVisible,e)})}if(!Object(r["a"])(t.animation)||!1!==t.animation){const e=document.createElement("div");e.className="cesium-viewer-animationContainer",s.appendChild(e),D=new qot(e,new trt(d))}if(!Object(r["a"])(t.timeline)||!1!==t.timeline){const e=document.createElement("div");e.className="cesium-viewer-timelineContainer",s.appendChild(e),P=new mst(e,h),P.addEventListener("settime",Sst,!1),P.zoomTo(h.startTime,h.stopTime)}if(Object(r["a"])(t.fullscreenButton)&&!1===t.fullscreenButton||(L=document.createElement("div"),L.className="cesium-viewer-fullscreenContainer",s.appendChild(L),j=new Krt(L,t.fullscreenElement),R=Jit(j.viewModel,"isFullscreenEnabled",(function(e){L.style.display=e?"block":"none",Object(r["a"])(P)&&(P.container.style.right=`${L.clientWidth}px`,P.resize())}))),t.vrButton){const e=document.createElement("div");e.className="cesium-viewer-vrContainer",s.appendChild(e),M=new Est(e,g,t.fullScreenElement),N=Jit(M.viewModel,"isVREnabled",(function(t){e.style.display=t?"block":"none",Object(r["a"])(j)&&(e.style.right=`${L.clientWidth}px`),Object(r["a"])(P)&&(P.container.style.right=`${e.clientWidth}px`,P.resize())})),B=Jit(M.viewModel,"isVRMode",(function(e){Bst(i,e)}))}this._baseLayerPickerDropDown=S,this._fullscreenSubscription=R,this._vrSubscription=N,this._vrModeSubscription=B,this._dataSourceChangedListeners={},this._automaticallyTrackDataSourceClocks=Object(o["a"])(t.automaticallyTrackDataSourceClocks,!0),this._container=e,this._bottomContainer=l,this._element=s,this._cesiumWidget=p,this._selectionIndicator=v,this._infoBox=O,this._dataSourceCollection=m,this._destroyDataSourceCollection=_,this._dataSourceDisplay=b,this._clockViewModel=d,this._destroyClockViewModel=f,this._toolbar=A,this._homeButton=T,this._sceneModePicker=C,this._projectionPicker=E,this._baseLayerPicker=x,this._navigationHelpButton=I,this._animation=D,this._timeline=P,this._fullscreenButton=j,this._vrButton=M,this._geocoder=w,this._eventHelper=y,this._lastWidth=0,this._lastHeight=0,this._allowDataSourcesToSuspendAnimation=!0,this._entityView=void 0,this._enableInfoOrSelection=Object(r["a"])(O)||Object(r["a"])(v),this._clockTrackedDataSource=void 0,this._trackedEntity=void 0,this._needTrackedEntityUpdate=!1,this._selectedEntity=void 0,this._zoomIsFlight=!1,this._zoomTarget=void 0,this._zoomPromise=void 0,this._zoomOptions=void 0,this._selectedEntityChanged=new dn["a"],this._trackedEntityChanged=new dn["a"],zit.track(this,["_trackedEntity","_selectedEntity","_clockTrackedDataSource"]),y.add(m.dataSourceAdded,Fst.prototype._onDataSourceAdded,this),y.add(m.dataSourceRemoved,Fst.prototype._onDataSourceRemoved,this),y.add(g.postUpdate,Fst.prototype.resize,this),y.add(g.postRender,Fst.prototype._postRender,this);const F=m.length;for(let o=0;o<F;o++)this._dataSourceAdded(m,m.get(o));function z(e){const t=Pst(i,e);Object(r["a"])(t)?aN.getValueOrUndefined(t.position,i.clock.currentTime)?i.trackedEntity=t:i.zoomTo(t):Object(r["a"])(i.trackedEntity)&&(i.trackedEntity=void 0)}function k(e){i.selectedEntity=Pst(i,e)}this._dataSourceAdded(void 0,b.defaultDataSource),y.add(m.dataSourceAdded,Fst.prototype._dataSourceAdded,this),y.add(m.dataSourceRemoved,Fst.prototype._dataSourceRemoved,this),p.screenSpaceEventHandler.setInputAction(k,BD.LEFT_CLICK),p.screenSpaceEventHandler.setInputAction(z,BD.LEFT_DOUBLE_CLICK)}function zst(e,t,n,i){if(!Object(r["a"])(t))throw new a["a"]("zoomTarget is required.");Ust(e);const s=new Promise(t=>{e._completeZoom=function(e){t(e)}});return e._zoomPromise=s,e._zoomIsFlight=i,e._zoomOptions=n,Promise.resolve(t).then((function(t){if(e._zoomPromise===s)if(t instanceof bKe)t.getViewableRectangle().then((function(t){return eit(t,e.scene)})).then((function(t){e._zoomPromise===s&&(e._zoomTarget=t)}));else if(t instanceof $ge)e._zoomTarget=t;else if(t instanceof Knt)e._zoomTarget=t;else if(t.isLoading&&Object(r["a"])(t.loadingEvent)){const n=t.loadingEvent.addEventListener((function(){n(),e._zoomPromise===s&&(e._zoomTarget=t.entities.values.slice(0))}))}else Array.isArray(t)?e._zoomTarget=t.slice(0):(t=Object(o["a"])(t.values,t),Object(r["a"])(t.entities)&&(t=t.entities.values),Array.isArray(t)?e._zoomTarget=t.slice(0):e._zoomTarget=[t])})),e.scene.requestRender(),s}function kst(e){e._zoomPromise=void 0,e._zoomTarget=void 0,e._zoomOptions=void 0}function Ust(e){const t=e._zoomPromise;Object(r["a"])(t)&&(kst(e),e._completeZoom(!1))}function Vst(e){const t=e._zoomTarget;if(!Object(r["a"])(t)||e.scene.mode===SH.MORPHING)return;const n=e.scene,i=n.camera,a=Object(o["a"])(e._zoomOptions,{});let s;if(t instanceof $ge)return t.readyPromise.then((function(){const n=t.boundingSphere;Object(r["a"])(a.offset)||(a.offset=new JT(0,-.5,n.radius)),s={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?i.flyToBoundingSphere(t.boundingSphere,s):(i.viewBoundingSphere(n,a.offset),i.lookAtTransform(Me.IDENTITY),e._completeZoom(!0)),kst(e)})).catch(()=>{Ust(e)});if(t instanceof Knt)return t.readyPromise.then((function(){const n=t.boundingSphere;Object(r["a"])(a.offset)||(a.offset=new JT(0,-.5,n.radius)),s={offset:a.offset,duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?i.flyToBoundingSphere(n,s):(i.viewBoundingSphere(n,a.offset),i.lookAtTransform(Me.IDENTITY),e._completeZoom(!0)),kst(e)}));if(t instanceof I)return s={destination:n.mapProjection.ellipsoid.cartographicToCartesian(t),duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)}},e._zoomIsFlight?i.flyTo(s):(i.setView(s),e._completeZoom(!0)),void kst(e);const c=t,l=[];for(let o=0,r=c.length;o<r;o++){const t=e._dataSourceDisplay.getBoundingSphere(c[o],!1,xst);if(t===oN.PENDING)return;t!==oN.FAILED&&l.push(Tt.clone(xst))}if(0===l.length)return void Ust(e);e.trackedEntity=void 0;const u=Tt.fromBoundingSpheres(l);e._zoomIsFlight?(kst(e),i.flyToBoundingSphere(u,{duration:a.duration,maximumHeight:a.maximumHeight,complete:function(){e._completeZoom(!0)},cancel:function(){e._completeZoom(!1)},offset:a.offset})):(i.viewBoundingSphere(u,a.offset),i.lookAtTransform(Me.IDENTITY),kst(e),e._completeZoom(!0))}function Hst(e){if(!e._needTrackedEntityUpdate)return;const t=e._trackedEntity,n=e.clock.currentTime,i=aN.getValueOrUndefined(t.position,n);if(!Object(r["a"])(i))return;const o=e.scene,a=e._dataSourceDisplay.getBoundingSphere(t,!1,xst);if(a===oN.PENDING)return;const s=o.mode;s!==SH.COLUMBUS_VIEW&&s!==SH.SCENE2D||(o.screenSpaceCameraController.enableTranslate=!1),s!==SH.COLUMBUS_VIEW&&s!==SH.SCENE3D||(o.screenSpaceCameraController.enableTilt=!1);const c=a!==oN.FAILED?xst:void 0;e._entityView=new tSe(t,o,o.mapProjection.ellipsoid),e._entityView.update(n,c),e._needTrackedEntityUpdate=!1}Object.defineProperties(Fst.prototype,{container:{get:function(){return this._container}},bottomContainer:{get:function(){return this._bottomContainer}},cesiumWidget:{get:function(){return this._cesiumWidget}},selectionIndicator:{get:function(){return this._selectionIndicator}},infoBox:{get:function(){return this._infoBox}},geocoder:{get:function(){return this._geocoder}},homeButton:{get:function(){return this._homeButton}},sceneModePicker:{get:function(){return this._sceneModePicker}},projectionPicker:{get:function(){return this._projectionPicker}},baseLayerPicker:{get:function(){return this._baseLayerPicker}},navigationHelpButton:{get:function(){return this._navigationHelpButton}},animation:{get:function(){return this._animation}},timeline:{get:function(){return this._timeline}},fullscreenButton:{get:function(){return this._fullscreenButton}},vrButton:{get:function(){return this._vrButton}},dataSourceDisplay:{get:function(){return this._dataSourceDisplay}},entities:{get:function(){return this._dataSourceDisplay.defaultDataSource.entities}},dataSources:{get:function(){return this._dataSourceCollection}},canvas:{get:function(){return this._cesiumWidget.canvas}},scene:{get:function(){return this._cesiumWidget.scene}},shadows:{get:function(){return this.scene.shadowMap.enabled},set:function(e){this.scene.shadowMap.enabled=e}},terrainShadows:{get:function(){return this.scene.globe.shadows},set:function(e){this.scene.globe.shadows=e}},shadowMap:{get:function(){return this.scene.shadowMap}},imageryLayers:{get:function(){return this.scene.imageryLayers}},terrainProvider:{get:function(){return this.scene.terrainProvider},set:function(e){this.scene.terrainProvider=e}},camera:{get:function(){return this.scene.camera}},postProcessStages:{get:function(){return this.scene.postProcessStages}},clock:{get:function(){return this._clockViewModel.clock}},clockViewModel:{get:function(){return this._clockViewModel}},screenSpaceEventHandler:{get:function(){return this._cesiumWidget.screenSpaceEventHandler}},targetFrameRate:{get:function(){return this._cesiumWidget.targetFrameRate},set:function(e){this._cesiumWidget.targetFrameRate=e}},useDefaultRenderLoop:{get:function(){return this._cesiumWidget.useDefaultRenderLoop},set:function(e){this._cesiumWidget.useDefaultRenderLoop=e}},resolutionScale:{get:function(){return this._cesiumWidget.resolutionScale},set:function(e){this._cesiumWidget.resolutionScale=e}},useBrowserRecommendedResolution:{get:function(){return this._cesiumWidget.useBrowserRecommendedResolution},set:function(e){this._cesiumWidget.useBrowserRecommendedResolution=e}},allowDataSourcesToSuspendAnimation:{get:function(){return this._allowDataSourcesToSuspendAnimation},set:function(e){this._allowDataSourcesToSuspendAnimation=e}},trackedEntity:{get:function(){return this._trackedEntity},set:function(e){if(this._trackedEntity!==e){this._trackedEntity=e,Ust(this);const t=this.scene,n=t.mode;Object(r["a"])(e)&&Object(r["a"])(e.position)?this._needTrackedEntityUpdate=!0:(this._needTrackedEntityUpdate=!1,n!==SH.COLUMBUS_VIEW&&n!==SH.SCENE2D||(t.screenSpaceCameraController.enableTranslate=!0),n!==SH.COLUMBUS_VIEW&&n!==SH.SCENE3D||(t.screenSpaceCameraController.enableTilt=!0),this._entityView=void 0,this.camera.lookAtTransform(Me.IDENTITY)),this._trackedEntityChanged.raiseEvent(e),this.scene.requestRender()}}},selectedEntity:{get:function(){return this._selectedEntity},set:function(e){if(this._selectedEntity!==e){this._selectedEntity=e;const t=Object(r["a"])(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;Object(r["a"])(e)?Object(r["a"])(t)&&t.animateAppear():Object(r["a"])(t)&&t.animateDepart(),this._selectedEntityChanged.raiseEvent(e)}}},selectedEntityChanged:{get:function(){return this._selectedEntityChanged}},trackedEntityChanged:{get:function(){return this._trackedEntityChanged}},clockTrackedDataSource:{get:function(){return this._clockTrackedDataSource},set:function(e){this._clockTrackedDataSource!==e&&(this._clockTrackedDataSource=e,Rst(this._timeline,this.clock,e))}}}),Fst.prototype.extend=function(e,t){if(!Object(r["a"])(e))throw new a["a"]("mixin is required.");e(this,t)},Fst.prototype.resize=function(){const e=this._cesiumWidget,t=this._container,n=t.clientWidth,i=t.clientHeight,o=Object(r["a"])(this._animation),a=Object(r["a"])(this._timeline);if(e.resize(),n===this._lastWidth&&i===this._lastHeight)return;const s=i-125,c=this._baseLayerPickerDropDown;if(Object(r["a"])(c)&&(c.style.maxHeight=`${s}px`),Object(r["a"])(this._geocoder)){const e=this._geocoder.searchSuggestionsContainer;e.style.maxHeight=`${s}px`}Object(r["a"])(this._infoBox)&&(this._infoBox.viewModel.maxHeight=s);const l=this._timeline;let u,h=0,d=0,f=0;if(o&&"hidden"!==window.getComputedStyle(this._animation.container).visibility){const e=this._lastWidth;u=this._animation.container,n>900?(h=169,e<=900&&(u.style.width="169px",u.style.height="112px",this._animation.resize())):n>=600?(h=136,(e<600||e>900)&&(u.style.width="136px",u.style.height="90px",this._animation.resize())):(h=106,(e>600||0===e)&&(u.style.width="106px",u.style.height="70px",this._animation.resize())),d=h+5}if(a&&"hidden"!==window.getComputedStyle(this._timeline.container).visibility){const e=this._fullscreenButton,t=this._vrButton,n=l.container,i=n.style;f=n.clientHeight+3,i.left=`${h}px`;let o=0;Object(r["a"])(e)&&(o+=e.container.clientWidth),Object(r["a"])(t)&&(o+=t.container.clientWidth),i.right=`${o}px`,l.resize()}this._bottomContainer.style.left=`${d}px`,this._bottomContainer.style.bottom=`${f}px`,this._lastWidth=n,this._lastHeight=i},Fst.prototype.forceResize=function(){this._lastWidth=0,this.resize()},Fst.prototype.render=function(){this._cesiumWidget.render()},Fst.prototype.isDestroyed=function(){return!1},Fst.prototype.destroy=function(){let e;this.screenSpaceEventHandler.removeInputAction(BD.LEFT_CLICK),this.screenSpaceEventHandler.removeInputAction(BD.LEFT_DOUBLE_CLICK);const t=this.dataSources,n=t.length;for(e=0;e<n;e++)this._dataSourceRemoved(t,t.get(e));return this._dataSourceRemoved(void 0,this._dataSourceDisplay.defaultDataSource),this._container.removeChild(this._element),this._element.removeChild(this._toolbar),this._eventHelper.removeAll(),Object(r["a"])(this._geocoder)&&(this._geocoder=this._geocoder.destroy()),Object(r["a"])(this._homeButton)&&(this._homeButton=this._homeButton.destroy()),Object(r["a"])(this._sceneModePicker)&&(this._sceneModePicker=this._sceneModePicker.destroy()),Object(r["a"])(this._projectionPicker)&&(this._projectionPicker=this._projectionPicker.destroy()),Object(r["a"])(this._baseLayerPicker)&&(this._baseLayerPicker=this._baseLayerPicker.destroy()),Object(r["a"])(this._animation)&&(this._element.removeChild(this._animation.container),this._animation=this._animation.destroy()),Object(r["a"])(this._timeline)&&(this._timeline.removeEventListener("settime",Sst,!1),this._element.removeChild(this._timeline.container),this._timeline=this._timeline.destroy()),Object(r["a"])(this._fullscreenButton)&&(this._fullscreenSubscription.dispose(),this._element.removeChild(this._fullscreenButton.container),this._fullscreenButton=this._fullscreenButton.destroy()),Object(r["a"])(this._vrButton)&&(this._vrSubscription.dispose(),this._vrModeSubscription.dispose(),this._element.removeChild(this._vrButton.container),this._vrButton=this._vrButton.destroy()),Object(r["a"])(this._infoBox)&&(this._element.removeChild(this._infoBox.container),this._infoBox=this._infoBox.destroy()),Object(r["a"])(this._selectionIndicator)&&(this._element.removeChild(this._selectionIndicator.container),this._selectionIndicator=this._selectionIndicator.destroy()),this._destroyClockViewModel&&(this._clockViewModel=this._clockViewModel.destroy()),this._dataSourceDisplay=this._dataSourceDisplay.destroy(),this._cesiumWidget=this._cesiumWidget.destroy(),this._destroyDataSourceCollection&&(this._dataSourceCollection=this._dataSourceCollection.destroy()),Wc(this)},Fst.prototype._dataSourceAdded=function(e,t){const n=t.entities;n.collectionChanged.addEventListener(Fst.prototype._onEntityCollectionChanged,this)},Fst.prototype._dataSourceRemoved=function(e,t){const n=t.entities;n.collectionChanged.removeEventListener(Fst.prototype._onEntityCollectionChanged,this),Object(r["a"])(this.trackedEntity)&&n.getById(this.trackedEntity.id)===this.trackedEntity&&(this.trackedEntity=void 0),Object(r["a"])(this.selectedEntity)&&n.getById(this.selectedEntity.id)===this.selectedEntity&&(this.selectedEntity=void 0)},Fst.prototype._onTick=function(e){const t=e.currentTime,n=this._dataSourceDisplay.update(t);this._allowDataSourcesToSuspendAnimation&&(this._clockViewModel.canAnimate=n);const i=this._entityView;if(Object(r["a"])(i)){const e=this._trackedEntity,n=this._dataSourceDisplay.getBoundingSphere(e,!1,xst);n===oN.DONE&&i.update(t,xst)}let a,s=!1;const c=this.selectedEntity,l=Object(r["a"])(c)&&this._enableInfoOrSelection;if(l&&c.isShowing&&c.isAvailable(t)){const e=this._dataSourceDisplay.getBoundingSphere(c,!0,xst);e!==oN.FAILED?a=xst.center:Object(r["a"])(c.position)&&(a=c.position.getValue(t,a)),s=Object(r["a"])(a)}const u=Object(r["a"])(this._selectionIndicator)?this._selectionIndicator.viewModel:void 0;Object(r["a"])(u)&&(u.position=g.clone(a,u.position),u.showSelection=l&&s,u.update());const h=Object(r["a"])(this._infoBox)?this._infoBox.viewModel:void 0;Object(r["a"])(h)&&(h.showInfo=l,h.enableCamera=s,h.isCameraTracking=this.trackedEntity===this.selectedEntity,l?(h.titleText=Object(o["a"])(c.name,c.id),h.description=aN.getValueOrDefault(c.description,t,"")):(h.titleText="",h.description=""))},Fst.prototype._onEntityCollectionChanged=function(e,t,n){const i=n.length;for(let o=0;o<i;o++){const e=n[o];this.trackedEntity===e&&(this.trackedEntity=void 0),this.selectedEntity===e&&(this.selectedEntity=void 0)}},Fst.prototype._onInfoBoxCameraClicked=function(e){if(e.isCameraTracking&&this.trackedEntity===this.selectedEntity)this.trackedEntity=void 0;else{const e=this.selectedEntity,t=e.position;Object(r["a"])(t)?this.trackedEntity=this.selectedEntity:this.zoomTo(this.selectedEntity)}},Fst.prototype._clearTrackedObject=function(){this.trackedEntity=void 0},Fst.prototype._onInfoBoxClockClicked=function(e){this.selectedEntity=void 0},Fst.prototype._clearObjects=function(){this.trackedEntity=void 0,this.selectedEntity=void 0},Fst.prototype._onDataSourceChanged=function(e){this.clockTrackedDataSource===e&&Rst(this.timeline,this.clock,e)},Fst.prototype._onDataSourceAdded=function(e,t){this._automaticallyTrackDataSourceClocks&&(this.clockTrackedDataSource=t);const n=t.entities.id,i=this._eventHelper.add(t.changedEvent,Fst.prototype._onDataSourceChanged,this);this._dataSourceChangedListeners[n]=i},Fst.prototype._onDataSourceRemoved=function(e,t){const n=this.clockTrackedDataSource===t,i=t.entities.id;if(this._dataSourceChangedListeners[i](),this._dataSourceChangedListeners[i]=void 0,n){const t=e.length;this._automaticallyTrackDataSourceClocks&&t>0?this.clockTrackedDataSource=e.get(t-1):this.clockTrackedDataSource=void 0}},Fst.prototype.zoomTo=function(e,t){const n={offset:t};return zst(this,e,n,!1)},Fst.prototype.flyTo=function(e,t){return zst(this,e,t,!0)},Fst.prototype._postRender=function(){Vst(this),Hst(this)};var Gst=Fst;function Wst(e){i["a"].typeOf.object("viewer",e);const t=document.createElement("div");t.className="cesium-viewer-cesium3DTilesInspectorContainer",e.container.appendChild(t);const n=new Srt(t,e.scene);Object.defineProperties(e,{cesium3DTilesInspector:{get:function(){return n}}})}var qst=Wst;function Yst(e){if(!Object(r["a"])(e))throw new a["a"]("viewer is required.");const t=document.createElement("div");t.className="cesium-viewer-cesiumInspectorContainer",e.container.appendChild(t);const n=new Nrt(t,e.scene);Object.defineProperties(e,{cesiumInspector:{get:function(){return n}}})}var Xst=Yst;function Kst(e,t){if(!Object(r["a"])(e))throw new a["a"]("viewer is required.");if(e.hasOwnProperty("dropTarget"))throw new a["a"]("dropTarget is already defined by another mixin.");if(e.hasOwnProperty("dropEnabled"))throw new a["a"]("dropEnabled is already defined by another mixin.");if(e.hasOwnProperty("dropError"))throw new a["a"]("dropError is already defined by another mixin.");if(e.hasOwnProperty("clearOnDrop"))throw new a["a"]("clearOnDrop is already defined by another mixin.");if(e.hasOwnProperty("flyToOnDrop"))throw new a["a"]("flyToOnDrop is already defined by another mixin.");t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);let n=!0,i=Object(o["a"])(t.flyToOnDrop,!0);const s=new dn["a"];let c=Object(o["a"])(t.clearOnDrop,!0),l=Object(o["a"])(t.dropTarget,e.container),u=Object(o["a"])(t.clampToGround,!0),h=t.proxy;function d(t){$st(t),c&&(e.entities.removeAll(),e.dataSources.removeAll());const n=t.dataTransfer.files,i=n.length;for(let o=0;o<i;o++){const t=n[o],i=new FileReader;i.onload=Zst(e,t,h,u),i.onerror=ect(e,t),i.readAsText(t)}}l=HNe(l),Object.defineProperties(e,{dropTarget:{get:function(){return l},set:function(e){if(!Object(r["a"])(e))throw new a["a"]("value is required.");Jst(l,d),l=e,Qst(l,d)}},dropEnabled:{get:function(){return n},set:function(e){e!==n&&(e?Qst(l,d):Jst(l,d),n=e)}},dropError:{get:function(){return s}},clearOnDrop:{get:function(){return c},set:function(e){c=e}},flyToOnDrop:{get:function(){return i},set:function(e){i=e}},proxy:{get:function(){return h},set:function(e){h=e}},clampToGround:{get:function(){return u},set:function(e){u=e}}}),Qst(l,d),e.destroy=VM(e,e.destroy,(function(){e.dropEnabled=!1})),e._handleDrop=d}function $st(e){e.stopPropagation(),e.preventDefault()}function Jst(e,t){const n=e;Object(r["a"])(n)&&(n.removeEventListener("drop",t,!1),n.removeEventListener("dragenter",$st,!1),n.removeEventListener("dragover",$st,!1),n.removeEventListener("dragexit",$st,!1))}function Qst(e,t){e.addEventListener("drop",t,!1),e.addEventListener("dragenter",$st,!1),e.addEventListener("dragover",$st,!1),e.addEventListener("dragexit",$st,!1)}function Zst(e,t,n,i){const o=e.scene;return function(a){const s=t.name;try{let c;if(/\.czml$/i.test(s))c=pwe.load(JSON.parse(a.target.result),{sourceUri:s});else if(/\.geojson$/i.test(s)||/\.json$/i.test(s)||/\.topojson$/i.test(s))c=GSe.load(JSON.parse(a.target.result),{sourceUri:s,clampToGround:i});else if(/\.(kml|kmz)$/i.test(s))c=WFe.load(t,{sourceUri:s,proxy:n,camera:o.camera,canvas:o.canvas,clampToGround:i,screenOverlayContainer:e.container});else{if(!/\.gpx$/i.test(s))return void e.dropError.raiseEvent(e,s,`Unrecognized file: ${s}`);c=GDe.load(t,{sourceUri:s,proxy:n})}Object(r["a"])(c)&&e.dataSources.add(c).then((function(t){e.flyToOnDrop&&e.flyTo(t)})).catch((function(t){e.dropError.raiseEvent(e,s,t)}))}catch(c){e.dropError.raiseEvent(e,s,c)}}}function ect(e,t){return function(n){e.dropError.raiseEvent(e,t.name,n.target.error)}}var tct=Kst;function nct(e,t){if(!Object(r["a"])(e))throw new a["a"]("viewer is required.");t=Object(o["a"])(t,o["a"].EMPTY_OBJECT);const n=new Pat({scene:e.scene,container:e.bottomContainer,lowFrameRateMessage:t.lowFrameRateMessage});Object.defineProperties(e,{performanceWatchdog:{get:function(){return n}}})}var ict=nct;function oct(e,t,n){let i;try{return i=e(t,n),i}catch(o){return Promise.reject(o)}}function rct(e){let t;return function(n){const i=n.data,a=[],s={id:i.id,result:void 0,error:void 0};return Promise.resolve(oct(e,i.parameters,a)).then((function(e){s.result=e})).catch((function(e){e instanceof Error?s.error={name:e.name,message:e.message,stack:e.stack}:s.error=e})).finally((function(){Object(r["a"])(t)||(t=Object(o["a"])(self.webkitPostMessage,self.postMessage)),i.canTransferArrayBuffer||(a.length=0);try{t(s,a)}catch(e){s.result=void 0,s.error=`postMessage failed with error: ${Jl(e)}\n  with responseMessage: ${JSON.stringify(s)}`,t(s)}}))}}var act=rct;const sct="1.97"},f069:function(e,t,n){"use strict";var i=n("1c0b"),o=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new o(e)}},f183:function(e,t,n){var i=n("d012"),o=n("861d"),r=n("5135"),a=n("9bf2").f,s=n("90e3"),c=n("bb2f"),l=s("meta"),u=0,h=Object.isExtensible||function(){return!0},d=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,l)){if(!h(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},p=function(e,t){if(!r(e,l)){if(!h(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},m=function(e){return c&&_.REQUIRED&&h(e)&&!r(e,l)&&d(e),e},_=e.exports={REQUIRED:!1,fastKey:f,getWeakData:p,onFreeze:m};i[l]=!0},f537:function(e,t,n){var i,o,r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;
/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */
var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e["__isLong__"])}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var r={},a={};function s(e,t){var n,i,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(i=a[e],i)?i:(n=l(e,0,!0),o&&(a[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(i=r[e],i)?i:(n=l(e,e<0?-1:0,!1),o&&(r[e]=n),n))}function c(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=_)return C}else{if(e<=-g)return E;if(e+1>=g)return T}return e<0?c(-e,t).neg():l(e%m|0,e/m|0,t)}function l(e,t,i){return new n(e,t,i)}n.fromInt=s,n.fromNumber=c,n.fromBits=l;var u=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if("number"===typeof t?(n=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if(n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return h(e.substring(1),t,n).neg();for(var o=c(u(n,8)),r=y,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),n);if(s<8){var d=c(u(n,s));r=r.mul(d).add(c(l))}else r=r.mul(o),r=r.add(c(l))}return r.unsigned=t,r}function d(e,t){return"number"===typeof e?c(e,t):"string"===typeof e?h(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=d;var f=65536,p=1<<24,m=f*f,_=m*m,g=_/2,b=s(p),y=s(0);n.ZERO=y;var v=s(0,!0);n.UZERO=v;var O=s(1);n.ONE=O;var A=s(1,!0);n.UONE=A;var w=s(-1);n.NEG_ONE=w;var T=l(-1,2147483647,!1);n.MAX_VALUE=T;var C=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=C;var E=l(0,-2147483648,!1);n.MIN_VALUE=E;var x=n.prototype;x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},x.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=c(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}var o=c(u(e,6),this.unsigned),r=this,a="";while(1){var s=r.div(o),l=r.sub(s.mul(o)).toInt()>>>0,h=l.toString(e);if(r=s,r.isZero())return h+a;while(h.length<6)h="0"+h;a=""+h+a}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0;t--)if(0!=(e&1<<t))break;return 0!=this.high?t+33:t+1},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1===(1&this.low)},x.isEven=function(){return 0===(1&this.low)},x.equals=function(e){return i(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return this.comp(e)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return this.comp(e)<=0},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(i(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(O)},x.neg=x.negate,x.add=function(e){i(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,r=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=65535&e.low,h=0,f=0,p=0,m=0;return m+=r+u,p+=m>>>16,m&=65535,p+=o+c,f+=p>>>16,p&=65535,f+=n+s,h+=f>>>16,f&=65535,h+=t+a,h&=65535,l(p<<16|m,h<<16|f,this.unsigned)},x.subtract=function(e){return i(e)||(e=d(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return this;if(i(e)||(e=d(e)),t){var n=t["mul"](this.low,this.high,e.low,e.high);return l(n,t["get_high"](),this.unsigned)}if(e.isZero())return this.unsigned?v:y;if(this.eq(E))return e.isOdd()?E:y;if(e.eq(E))return this.isOdd()?E:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(b)&&e.lt(b))return c(this.toNumber()*e.toNumber(),this.unsigned);var o=this.high>>>16,r=65535&this.high,a=this.low>>>16,s=65535&this.low,u=e.high>>>16,h=65535&e.high,f=e.low>>>16,p=65535&e.low,m=0,_=0,g=0,O=0;return O+=s*p,g+=O>>>16,O&=65535,g+=a*p,_+=g>>>16,g&=65535,g+=s*f,_+=g>>>16,g&=65535,_+=r*p,m+=_>>>16,_&=65535,_+=a*f,m+=_>>>16,_&=65535,_+=s*h,m+=_>>>16,_&=65535,m+=o*p+r*f+a*h+s*u,m&=65535,l(g<<16|O,m<<16|_,this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(i(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var n=(this.unsigned?t["div_u"]:t["div_s"])(this.low,this.high,e.low,e.high);return l(n,t["get_high"](),this.unsigned)}if(this.isZero())return this.unsigned?v:y;var o,r,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return A;a=v}else{if(this.eq(E)){if(e.eq(O)||e.eq(w))return E;if(e.eq(E))return O;var s=this.shr(1);return o=s.div(e).shl(1),o.eq(y)?e.isNegative()?O:w:(r=this.sub(e.mul(o)),a=o.add(r.div(e)),a)}if(e.eq(E))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=y}r=this;while(r.gte(e)){o=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var h=Math.ceil(Math.log(o)/Math.LN2),f=h<=48?1:u(2,h-48),p=c(o),m=p.mul(e);while(m.isNegative()||m.gt(r))o-=f,p=c(o,this.unsigned),m=p.mul(e);p.isZero()&&(p=O),a=a.add(p),r=r.sub(m)}return a},x.div=x.divide,x.modulo=function(e){if(i(e)||(e=d(e)),t){var n=(this.unsigned?t["rem_u"]:t["rem_s"])(this.low,this.high,e.low,e.high);return l(n,t["get_high"](),this.unsigned)}return this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return l(~this.low,~this.high,this.unsigned)},x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},x.clz=x.countLeadingZeros,x.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},x.ctz=x.countTrailingZeros,x.and=function(e){return i(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return i(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return i(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return i(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){return i(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):l(32===e?this.high:this.high>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.rotateLeft=function(e){var t;return i(e)&&(e=e.toInt()),0===(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,l(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},x.rotl=x.rotateLeft,x.rotateRight=function(e){var t;return i(e)&&(e=e.toInt()),0===(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,l(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},x.rotr=x.rotateRight,x.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,i){return i?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var S=n;return e.default=S,"default"in e?e.default:e}({});i=[],o=function(){return r}.apply(t,i),void 0===o||(e.exports=o)},f5df:function(e,t,n){var i=n("00ee"),o=n("c6b6"),r=n("b622"),a=r("toStringTag"),s="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=i?o:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),a))?n:s?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},f772:function(e,t,n){var i=n("5692"),o=n("90e3"),r=i("keys");e.exports=function(e){return r[e]||(r[e]=o(e))}},fa2f:function(e,t,n){"use strict";function i(e){const t={};if(!e)return t;const n=e.split("\r\n");for(let i=0;i<n.length;++i){const e=n[i],o=e.indexOf(": ");if(o>0){const n=e.substring(0,o),i=e.substring(o+2);t[n]=i}}return t}t["a"]=i},fc6a:function(e,t,n){var i=n("44ad"),o=n("1d80");e.exports=function(e){return i(o(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var i=n("4930");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var i=n("da84");e.exports=i.Promise}}]);
//# sourceMappingURL=chunk-vendors.6525a08d.js.map